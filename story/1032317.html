<!doctype html><html lang="zh-hans"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Dasel：从cmdline查询/更新数据结构。支持JSON、YAML、TOML、XML</title><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"><link rel="stylesheet" href="/img/css.css?random="><link data-rh="true" rel="icon" href="/img/favicon.ico"/><script data-ad-client="ca-pub-6067137220025946" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script type="text/javascript" src="https://platform-api.sharethis.com/js/sharethis.js#property=5effb96910009800120b8d4d&product=inline-share-buttons" async="async"></script>
<script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?03c1a0f31299b4a2fbb83c34d6beaac9";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script></head><body><div id="my_header"><div class="container"><nav class="navbar navbar-expand-lg"><a class="navbar-brand" href="/"><img alt="diglog" src="/img/logo.v1.gif" class="rounded-sm"></a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarNavAltMarkup"><div class="navbar-nav"></div></div></nav></div></div><div class="container"><div id="my_content"><h1 class="page_narrow">Dasel：从cmdline查询/更新数据结构。支持JSON、YAML、TOML、XML</h1><div class="row"><div class="col-lg-12 col-12"><div class="my_story_list_item shadow p-3 mb-5 bg-white rounded"><div class="story_page_pub_time page_narrow">2020-10-31 01:10:09</div><div class="story_img_container"><a href="http://img2.diglog.com/img/2020/10/f01740ebbd4d1ca41a36bccff2687655.png"><img src="http://img2.diglog.com/img/2020/10/f01740ebbd4d1ca41a36bccff2687655.png" class="img-fluid my_story_img" onerror="this.style.display='none'"></a></div><div class="page_narrow text-break page_content"><p>Dasel(数据选择器的缩写)允许您使用选择器字符串查询和修改数据结构。</p><p>与JQ/yq相当，但支持零运行时依赖的JSON、YAML、TOML和XML。</p><p>您可以将DASEL作为包导入并在应用程序中使用，也可以使用预构建的二进制文件从命令行修改文件。</p><p>您可以去获取主包，Go应该会自动为您构建和安装Dasel。</p><p>这一行应该适合您--如果需要，一定要更改目标发行版的可执行文件。它当前的目标是DASEL_LINUX_AMD64。</p><p>Curl-s https://api.github.com/repos/tomwright/dasel/releases/latest|grep Browser_Download_url|grep linux_amd64|CUT-d&39；&34；&#39；-f 4|wget-qi-&amp；&amp；mv dasel_linux_amd64 dasel&amp；&amp；chmod+x daselmv./dasel/usr/local/bin/dasel。</p><p>Curl-s https://api.github.com/repos/tomwright/dasel/releases/latest|grep Browser_Download_url|grep macos_amd64|Cut-d&39；&34；&#39；-f 4|wget-qi-&amp；&amp；mv dasel_macos_amd64 dasel&amp；&amp；chmod+x daselmv./dasel/usr/local/bin/daselv./dasel/usr/local/bin/dasel./dasel/usr/local/bin/dasel./dasel/usr/local/bin/dasel。</p><p>您还可以选择使用docker映像为您运行dasel。</p><p>如果您想使用特定版本的Dasel，只需将最新版本更改为所需版本即可。</p><p>文件的格式可以在处理时更改。达塞尔本身并没有做出这些改变，而是整理结果的行为。</p><p>简而言之，输出文件可能具有不同顺序的属性，但实际内容将与预期一致。</p><p>查询数据的Dasels方法要求将整个输入文档存储在内存中。</p><p>您应该记住这一点，因为它可以处理的最大文件大小将受到系统可用资源(特别是RAM)的限制。</p><p>重要的是，如果没有给出子命令，Dasel将默认选择。</p><p>如果您正在通过管道传输数据，这是必需的，否则dasel将使用给定的文件扩展名来猜测要使用哪个解析器。</p><p>如果没有给出选择器标志，则dasel假定给出的第一个参数是选择器。</p><p>如果使用此标志，则不会进行格式化，并且结果以字符串形式输出。</p><p>指定输出文件。如果存在，结果将写入给定文件。如果不存在，结果将写入输入文件(如果没有给出，则写入标准输出)。</p><p>如果您正在通过管道传输数据，这是必需的，否则dasel将使用给定的文件扩展名来猜测要使用哪个解析器。</p><p>如果没有给出选择器标志，则dasel假定给出的第一个参数是选择器。</p><p>Dasel将根据给定类型将此值解析为字符串、int或bool。</p><p>指定输出文件。如果存在，结果将写入给定文件。如果不存在，结果将写入输入文件(如果没有给出，则写入标准输出)。</p><p>如果您正在通过管道传输数据，这是必需的，否则dasel将使用给定的文件扩展名来猜测要使用哪个解析器。</p><p>如果没有给出选择器标志，则dasel假定给出的第一个参数是选择器。</p><p>Dasel将根据相关类型将每个值解析为字符串、int或bool。</p><p>Echo&#34；&#34；|dasel put object-p YAML-t string-t int&#34；my.avorites&#34；color=red number=3。</p><p>Dasel尝试为给定的文件类型查找正确的解析器，但是如果失败，您可以选择使用带有-p或--parser标志的解析器。</p><p>由于XML的解码方式，Dasel只能在至少有2个项的情况下才能检测到列表形式的东西。</p><p>如果在列表中少于2个项目时尝试使用列表选择器(动态、索引、追加)，则会出现错误。</p><p>目前还没有为此引入变通方法的计划，但如果有足够的需求，将来可能会对其进行改进。</p><p>选择器由由点分隔的不同部分组成，每个部分用于标识链中的下一个节点。</p><p>下面的示例中将使用以下YAML数据结构作为参考。</p><p>名称：Tom首选项：最爱颜色：红色：-红色-绿色-蓝色编码：-名称：红色rgb：ff0000-名称：绿色rgb：00ff00-名称：蓝色rgb：0000ff。</p><p>当您有一个列表时，您可以使用方括号通过索引访问列表中的特定项。</p><p>下一个可用的索引选择器在添加到项目列表时使用。它允许您追加到列表中。</p><p>当您不知道项目的索引，但知道列表中某个对象的属性值时，动态选择器与列表一起使用。</p><p>查找在括号中定义。可以在同一零件内使用多个动态选择器来执行多个检查。</p><p>如果您想在列表中的某个值不是对象列表时动态确定它的目标，只需使用(value=&lt；ome_value&gt；)定义动态选择器即可。</p><p>ECHO&#39；{&#34；用户&#34；：{&#34；名称&#34；：&#34；汤姆&#34；，&#34；年龄&#34；：27}}&#39；|JQ&#39；.user.age&#39；27 ECHO&#39；{&#34；用户&#34；：{&#34；名称&#34；：&#34；汤姆&#34；，&#34；年龄&#34；：27}}&#39；|dasel-p json&#39；.user.age&#39；27。</p><p>ECHO&#39；[1，2，3]&#39；|jq&#39；.[1]&#39；2 ECHO&#39；[1，2，3]&#39；|dasel-p json&#39；.[1]&#39；2</p><p>Echo&#39；[&#34；a&#34；，&#34；b&#34；，&#34；c&#34；]&#39；|JQ&#39；。+=[&#34；d&#34；]&#39；[&#34；a&#34；，&#34；b&#34；，&#34；c&#34；，&#34；d&#34；]echo&#39；[&#34；a&#34；，&#34；b&#34；，&#34；c&#34；]&#39；|dasel put string-p json-s&#39；。[]&#39；d[&#34；a&#34；，&#34；b&#34；，&#34；c&#34；，&#34；d&#34；]。</p><p>ECHO&#39；[&#34；a&#34；，&#34；b&#34；，&#34；c&#34；]&#39；|JQ&#39；.[1]=&#34；d&#34；&#39；[&#34；a&#34；，&#34；d&#34；，&#34；c&#34；]ECHO&#39；[&#34；a&#34；，&#34；B&#34；，&#34；c&#34；]&#39；|dasel put string-p json-s&39；.[1]&#39；d[&#34；a&#34；，&#34；d&#34；，&#34；c&#34；]。</p><p>Echo&#39；[1，2，3]&#39；|jq&#39；.[1]=5&#39；[1，5，3]echo&#39；[1，2，3]&#39；|dasel put int-p json-s&#39；.[1]&#39；5[1，5，3]。</p><p>Echo&#39；{&#34；用户&#34；：{&#34；名称&#34；：&#34；汤姆&#34；，&#34；年龄&#34；：27}}&#39；|JQ&#39；.user={&#34；名称&#34；：&#34；弗兰克&#34；，&#34；年龄&#34；：25}&#39；{&#34；用户&#34；：{&#34；名称&#34；：&#34；Frank&#34；，&#34；age&#34；：25}}echo&#39；{&#34；user&#34；：{&#34；name&#34；：&#34；Tom&#34；，&#34；age&#34；：27}}&#39；|dasel put object-p json-s&#39；.user&#39；-t string-t int name=Frank age=25{&#34；用户&#34；：{&#34；年龄&#34；：25，&#34；名称&#34；：&#34；Frank&#34；}}。</p><p>Echo&#39；{&#34；Users&#34；：[{&#34；Name&#34；：&#34；Tom&#34；}]}&#39；|JQ&#39；.Users+=[{&#34；Name&#34；：&#34；Frank&#34；}]&#39；{&#34；Users&#34；：[{&#34；Name&#34；：&#34；Tom&#34；}，{&#34；Name&#34；：&#34；Frank&#34；}]}echo&#39；{&#34；Users&#34；：[{&#34；Name&#34；：&#34；Tom&#34；}]}&#39；|dasel put object-p json-s&#39；.users[]&#39；-t string name=Frank{&#34；Users&#34；：[{&#34；姓名&#34；：&#34；汤姆&#34；}，{&#34；姓名&#34；：&#34；弗兰克&#34；}]}。</p><p>Echo&#39；用户：名称：Tom age：27；|yq&#39；.user.age&#39；27 Echo&#39；用户：名称：Tom age：27&#39；|dasel-p YAML&#39；.user.age&#39；27。</p><p>ECHO&#39；-1-2-3&#39；|yq&#39；.[1]&#39；2 ECHO&#39；-1-2-3&#39；|dasel-p YAML&#39；.[1]&#39；2。</p><p>ECHO&#39；-a-b-c&#39；|yq--yaml-output&#39；。+=[&#34；d&#34；]&#39；-a-b-c-d echo&#39；-a-b-c&#39；|dasel put string-p YAML-s&#39；.[]&#39；d-a-b-c-d</p><p>Echo&#39；-a-b-c&#39；|yq--yaml-output&#39；.[1]=&#34；d&#34；&#39；-a-d-c echo&#39；-a-b-c&#39；|dasel put string-p YAML-s&#39；.[1]&#39；d-a-d-c。</p><p>ECHO&#39；-1-2-3&#39；|yq--YAML-OUTPUT&#39；.[1]=5&#39；-1-5-3 ECHO&#39；-1-2-3&#39；|Dasel Put int-p YAML-s&#39；.[1]&#39；5-1-5-3。</p><p>Echo&#39；用户：名称：Tom age：27&#39；|yq--YAML-OUTPUT&#39；.user={&#34；name&#34；：&#34；Frank&#34；，&#34；age&#34；：25}&#39；用户：名称：Frank age：25 ECHO&#39；用户：名称：Tom age：27&#39；|dasel put object-p YAML-s&#39；.user&#39；-t string-t int name=Frank age=25user：age：25 name：Frank。</p><p>Echo&#39；用户：-name：Tom&#39；|yq--yaml-output&#39；.users+=[{&#34；name&#34；：&#34；Frank&34；}]&#39；用户：-name：Tom-name：Frank echo&#39；用户：-name：Tom&39；|dasel put object-p YAML-s&39；.users[]&#39；-t字符串名称=FrankUsers：-name：Tom-name：Frank。</p><p>以下内容应该适用于Kubernetes部署清单。虽然Kubernetes并不适合每个人，但它确实提供了一些很好的示例用例。</p><p>解码的属性设置为相关对象的属性，前缀为-。</p><p>Echo&39；&lt；data&lt；/name&gt；Tom&lt；/name&gt；Tom&lt；/name&gt；&lt；/Users&gt；&lt；用户primary=&#34；false&34；&gt；&lt；name&gt；Frank&lt；/name&gt；/Users&gt；&lt；/data&gt；&39；|dasel-p XML&39；.data.users[0]。-primary&#39；true。</p><p>Echo&39；&lt；data&lt；/name&gt；Tom&lt；/name&gt；Tom&lt；/name&gt；&lt；/Users&gt；&lt；用户primary=&#34；false&34；&gt；&lt；name&gt；Frank&lt；/name&gt；/Users&gt；&lt；/data&gt；&39；|dasel-p XML&39；.data.users.(-primary=true).name&#39；Tom</p></div><div id="story_share_this"><div class="sharethis-inline-share-buttons"></div></div><div class="text-break sotry_link page_narrow"><a target="_blank" href="https://github.com/TomWright/dasel">https://github.com/TomWright/dasel</a></div><div class="story_tags page_narrow"><button type="button" class="btn btn-light my_tag"><a href="/tag/cmdline/">#cmdline</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/toml/">#toml</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/dasel/">#dasel</a></button></div></div><div class="my_movie_list_item shadow p-3 mb-5 bg-white rounded"><button type="button" class="btn btn-link my_tag"><a href="/tag/web2.0/">#web2.0</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/google/">#google</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/设计/">#设计</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/创意/">#创意</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/摄影/">#摄影</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/游戏/">#游戏</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/图片/">#图片</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/软件/">#软件</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/视频/">#视频</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/手机/">#手机</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/广告/">#广告</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/apple/">#apple</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/iphone/">#iphone</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/网站/">#网站</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/免费/">#免费</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/下载/">#下载</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/windows/">#windows</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/微软/">#微软</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/firefox/">#firefox</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/苹果/">#苹果</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/blog/">#blog</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/音乐/">#音乐</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/博客/">#博客</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/wordpress/">#wordpress</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/恶搞/">#恶搞</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/艺术/">#艺术</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/qq/">#qq</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/web/">#web</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/谷歌/">#谷歌</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/工具/">#工具</a></button></div></div></div><div id="my_footer"><div class=""><a href="/tags/">tags</a> <a href="/users/">users</a></div>&copy;2012-2021 diglog.com </div></div></body></html>