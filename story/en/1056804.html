<!doctype html><html lang="zh-hans"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>学习COBOL：现代程序员的旅程 Learning COBOL: A Journey for the Modern Programmer</title><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"><link rel="stylesheet" href="/img/css.css?random="><link data-rh="true" rel="icon" href="/img/favicon.ico"/><script data-ad-client="ca-pub-6067137220025946" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script type="text/javascript" src="https://platform-api.sharethis.com/js/sharethis.js#property=5effb96910009800120b8d4d&product=inline-share-buttons" async="async"></script>
<script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?03c1a0f31299b4a2fbb83c34d6beaac9";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script></head><body><div id="my_header"><div class="container"><nav class="navbar navbar-expand-lg"><a class="navbar-brand" href="/"><img alt="diglog" src="/img/logo.v1.gif" class="rounded-sm"></a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarNavAltMarkup"><div class="navbar-nav"></div></div></nav></div></div><div class="container"><div id="my_content"><h1 class="page_narrow">Learning COBOL: A Journey for the Modern Programmer<br/>学习COBOL：现代程序员的旅程 </h1><div class="row"><div class="col-lg-12 col-12"><div class="my_story_list_item shadow p-3 mb-5 bg-white rounded"><div class="story_page_pub_time page_narrow">2021-04-08 00:35:54</div><div class="story_img_container"><a href="http://img2.diglog.com/img/2021/4/d5a61c7e8472adab4ccdbc8fe6064b8b.png"><img src="http://img2.diglog.com/img/2021/4/d5a61c7e8472adab4ccdbc8fe6064b8b.png" class="img-fluid my_story_img" onerror="this.style.display='none'"></a></div><div class="page_narrow text-break page_content"><p>&lt;center&gt;Learning COBOL: A Journey for the Modern Programmer===*Written by [JDC](https://twitter.com/jdcaballerov). Published 2021-04-06 on the [Monadical blog](https://monadical.com/blog.html).*&lt;/center&gt;Last year, as a result of the pandemic, many legacy systems went over their capacity. [Several](https://josephsteinberg.com/covid-19-response-new-jersey-urgently-needs-cobol-programmers-yes-you-read-that-correctly/) [news](https://www.techrepublic.com/article/cobol-programmers-are-in-demand-to-fight-the-coronavirus-pandemic/) [outlets](https://www.theverge.com/2020/4/14/21219561/coronavirus-pandemic-unemployment-systems-cobol-legacy-software-infrastructure) reported that those legacy systems, programmed in COBOL, required urgent action. However, COBOL programmers are scarce and it doesn’t look like younger programmers are taking up the language (the average age of a COBOL programmer is around 60 years old). The news coverage included a plea for more COBOL programmers.I first remember hearing about COBOL from my father when he proudly told me that he had been taught languages for scientific programming (FORTRAN IV) and business programming (COBOL) at university. After speaking with him, I&#39;d searched for resources out of curiosity, but I never managed to get anywhere. This time around, I decided to stick it out and try to learn COBOL more systematically. In this post, I’ll share some resources and ideas that I&#39;ve found useful while learning COBOL. Following these resources might not be enough to make you into a COBOL programmer, but it will give you enough of an understanding of the language to begin your own journey. Disclaimer: I am not an expert COBOL programmer and welcome any corrections and useful additions to this post.&lt;center&gt; ![COLBOL report](https://docs.monadical.com/uploads/upload_55affe03315621140f87f9cb2ebdb18b.jpg)&lt;/center&gt;## Where to start?This is one of the hardest things about learning COBOL: most of the resources are either historical accounts or technical reference manuals. It feels like expressing a desire to learn Latin and having someone throw you an English-Latin dictionary, or recommend that you read the history of Ancient Rome. Strangely enough, as I’ll explain, you do need to know a bit of history to understand COBOL.### COmmon Business Oriented Language (COBOL)The idea of having a business language sounds pretty odd to most of us now--isn&#39;t business software just programmed in whatever language you want? This wasn’t so in the early days. Back then, languages worked like templates for accomplishing concrete domain tasks, operating at a level just a bit higher than the machine instructions. There were basically two domains: scientific and business. COBOL is a [domain specific language](https://martinfowler.com/bliki/DomainSpecificLanguage.html) for business. Business domain tasks usually require managing and manipulating heterogeneous data (with several sources, formats, and field types) in record structures, using true [fixed point decimal arithmetic](https://en.wikipedia.org/wiki/Fixed-point_arithmetic) for accurate financial accounting to the last digit and fast access to externally stored record structures. These are the kind of tasks where COBOL still excels. Before you invest your time in learning COBOL, it’s important to understand that it’s a different beast to what most programmers are used to. Being a business domain specific language means that the kind of tasks handled by COBOL are closer to those of SQL than Java. You will not be programming kernels or webapps in COBOL--you’ll mostly be using it to operate on records, as with SQL. Understanding this should give you an idea of the kind of tasks that you can do with COBOL.![mainframes](https://docs.monadical.com/uploads/upload_314c28c4a35d8e8489b17e0bf7bb24bc.jpg)COBOL is a powerhorse for processing records and usually runs on [mainframes](https://www.youtube.com/watch?v=ximv-PwAKnc), machines optimized for reading and writing to external storage. Maybe you’ve heard of supercomputers simulating the Big Bang by crunching millions of numbers in [CPU-bound tasks](https://en.wikipedia.org/wiki/CPU-bound). Well, you can think of mainframes as being the equivalent of that for processing and writing records in [I/O-bound tasks](https://en.wikipedia.org/wiki/I/O_bound).COBOL was also designed with readability in mind, since non-technical users may need to read it too. For example, an employee from the IRS might need to read code that implements a new tax law. Because of this, COBOL uses plain English words.One final caveat: learning COBOL is just the first step. It’s not like learning Python or Ruby--if you really want to work in COBOL, you’ll likely need to learn how to operate a mainframe. ### Program StructureMost COBOL resources will use an encyclopedic approach. The first thing that you’ll encounter will likely be a detailed presentation of program structure and columns. The importance of this concept tends to be overemphasized and, since it’s usually presented in a needlessly confusing way, it can be enough to put you off before you’ve even started! The usual phrasing is something like &#34;COBOL programs are organized into divisions, sections, paragraphs, sentences, statements and characters with strict rules about columns&#34; _(and this is when you usually close the browser tab)_. Here’s what you need to know: COBOL cares about what column your code is in. Most compilers expect your code to follow strict rules for indentation, but modern COBOL also accepts a free format. (If a modern editor can format LISP code, why not enforce simple indentation rules for a COBOL program?!).I found this image very useful:![COBOL](https://docs.monadical.com/uploads/upload_fe83b6e5383060db9886723bccce9ba0.png)*From https://devops.com/the-beauty-of-the-cobol-programming-language-v2/*Does this mean that you have to learn all those rules before you can go on? Do you really have to enumerate all of the lines? Well, let’s see what this looks like in a modern editor.![COBOL](https://docs.monadical.com/uploads/upload_4792a382fe16ece63202a836f091c3e4.png)That&#39;s it! If the resources just showed you this, you’d happily skip over it. Certain code follows indentation rules and a modern editor will save you the hassle. “So why have it in the first place?”, you may ask. Very few resources explain this, but having the code in strict positions was what allowed old computers to read the instructions on punched cards. On punched cards, a certain COBOL statement, let&#39;s say an IF statement, is mapped to a pattern of holes. If you know that a statement starts at a certain column (12-72 in COBOL), it is easier for the hardware to read (this was done by passing a light through the card). ![COBOL source card](https://docs.monadical.com/uploads/upload_1bd5f6fd7323da8e6f2de0ecb656f1c8.png)Don’t worry if this is still confusing--the next section should clear things up! ### Divisions, sections, paragraphs, sentences, statements and characters. WUT?COBOL programs are organized into divisions, sections, paragraphs, sentences, statements and characters. So, what does it all mean?The first thing you need to know is that COBOL started as an effort to create a standard common business language and was sponsored by the US Department of Defense. This means that descriptions are aimed at creating standards (yes, those fat books). Since the 50s, COBOL has been supervised by CODASYL, ANSI, and ISO, and all this bureaucracy has made for a ton of documented details.To understand what it all means and why it was needed, we need to look at the requirements of the old hardware. Before your computer could jump from task to task, it had to follow an execution cycle at the hardware level. An old computer was similar to a mechanical loom: once it was started up, it followed strict steps. For example, let’s say one of these machines is started up; it then turns on a light bulb to detect if a card is present. If there’s a card present, it turns on lights from column 8-11, reads the program&#39;s name, allocates space for the variables needed, finds out if it needs to read from an external storage, and only then allocates resources and executes what we would today call the code. This is what most divisions and sections are all about: declaring to the machine what resources (variables, record structures, external files, mechanism to pass information to a caller, etc.) will be needed to execute the program. These days, we take access to request resources at any place in the code for granted. Doing it at the start not only allowed older hardware to follow the execution cycle, but brought benefits to scheduling and software readability and maintainability. These benefits were originally born out of necessity but the same principle is still in use today.[^1] Requesting resources at the start of execution is like knowing how many people will come to your party ahead of time: you can set aside enough food for all your guests without having to run to the store as more people turn up. ## Running Hello WorldCOBOL code generally runs on mainframes, but it can also run on your laptop. To compile it, first install a COBOL compiler. [GnuCOBOL]( https://en.wikipedia.org/wiki/GnuCOBOL) is a GPL licensed compiler. To install on Debian or RPM based Linux, run:```bashsudo apt install open-cobol# orsudo yum install open-cobol```Now create a new file:`helloworld.cbl````bash= IDENTIFICATION DIVISION. PROGRAM-ID. HELLO. PROCEDURE DIVISION. DISPLAY &#34;Hello, world&#34;. END PROGRAM HELLO.```As you can see, we are not coding with strict columns. We will instruct the compiler to use a free mode. Notice, however, that we have used an IDENTIFICATION `DIVISION` and a PROCEDURE `DIVISON`. To compile it:```bashcobc -free -x -o helloworld hello.cbl# -free mode# -x produce an executable# -o name the output helloworld```And to run it:```bash./helloworldHello, world```That&#39;s it, you&#39;ve just run your first COBOL program!## The Aha MomentIf you have reached this point, you can start learning COBOL just like you would any other language. Unfortunately, most of the content is either encyclopedic, a video with crappy sound and a dark minuscule screen, or marketing content from IBM (the largest mainframe vendor). IBM&#39;s websites are a mess: you’ll be redirected all over the place and asked to log in for something only to meet a dead end or find that the login doesn’t work. Fortunately, [Derek Banas](http://www.newthinktank.com/2020/04/learn-cobol-one-video/) has made [this video](https://www.youtube.com/watch?v=TBs7HXI76yU). I think it’s the single best resource on COBOL accessible to a general public (it can now be found on some of IBM&#39;s websites). If you only watch one video, let it be this one:&lt;center&gt;&lt;iframe width=&#34;560&#34; height=&#34;315&#34; src=&#34;https://www.youtube.com/embed/TBs7HXI76yU&#34; frameborder=&#34;0&#34; allow=&#34;accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture&#34; allowfullscreen&gt;&lt;/iframe&gt; &lt;/center&gt;## COBOL Shines### Defining RecordsCOBOL can read and write data to external files. Complex nested, typed records can be declared for read/write or processing using language built-in features. For example, we can declare a customer record that contains an identification with three numbers, a customer name alphanumeric field of twenty characters, and a date of birth composed of two numbers for the month (MOB), two numbers for the day (DOB), and four numbers for the year (YOB) as follows:```01 Customer. 02 Ident PIC 9(3). 02 CustName PIC X(20). 02 DateOfBirth. 03 MOB PIC 99. 03 DOB PIC 99. 03 YOB PIC 9(4).```In modern languages this might require importing packages and using validators. ### Fixed Point ArithmeticTo appreciate one of COBOL&#39;s features that still beats modern languages out-of-the-box, let&#39;s use a [neat example from Marianne Bellotti](https://medium.com/the-technical-archaeologist/is-cobol-holding-you-hostage-with-math-5498c0eb428b). Marianne makes use of [Muller&#39;s recurrence](https://latkin.org/blog/2014/11/22/mullers-recurrence-roundoff-gone-wrong/), a recurrence designed to exploit rounding errors in floating point arithmetic.This simple recurrence makes floating point arithmetic go bonkers after a few iterations:&lt;center&gt; ![function](https://docs.monadical.com/uploads/upload_6c6d8e8dd00d652c1d3d878e88afe2bf.png)&lt;/center&gt;This is what happens when you execute a normal floating point implementation (floating_point) and compare it to a careful implementation using fixed point arithmetic (fixed_point):```i | floating point | fixed point-- | -------------- | ---------------------------0 | 4 | 41 | 4.25 | 4.252 | 4.47058823529 | 4.47058823529411764705882353 | 4.64473684211 | 4.64473684210526315789473624 | 4.77053824363 | 4.77053824362606232294616185 | 4.85570071257 | 4.85570071258907363420398576 | 4.91084749866 | 4.91084749908279320043429387 | 4.94553739553 | 4.94553740412391672465195298 | 4.96696240804 | 4.96696258176270059625712889 | 4.98004220429 | 4.980045701355631111852658210 | 4.9879092328 | 4.987979448478391267943941511 | 4.99136264131 | 4.9927702880620482067468253===| ==== FAIL ==== | ===========================12 | 4.96745509555 | 4.995655891506235647818498513 | 4.42969049831 | 4.997391268373369754025308814 | -7.81723657846 | 4.998433943785248237678160115 | 168.939167671 | 4.999060068778541393842418816 | 102.039963152 | 4.999435873288037699050118417 | 100.099947516 | 4.999660246786657582170063418 | 100.004992041 | 4.999771352671616781797971419 | 100.000249579 | 4.9993671517118171375788238```A normal Python implementation rounding error will be noticeable at the twelfth iteration (imagine this being a money operation).A better implementation will require careful use of the Decimal package in Python.Marianne&#39;s implementations are as follows:```python=from decimal import Decimaldef rec(y, z): return 108 - ((815-1500/z)/y) def floating_point(N): x = [4, 4.25] for i in range(2, N+1): x.append(rec(x[i-1], x[i-2])) return x def fixed_point(N): x = [Decimal(4), Decimal(17)/Decimal(4)] for i in range(2, N+1): x.append(rec(x[i-1], x[i-2])) return xN = 20 flt = floating_point(N)fxd = fixed_point(N)for i in range(N): print str(i) + &#39; | &#39;+str(flt[i])+&#39; | &#39;+str(fxd[i])```As you can see, implementing fixed point arithmetic requires using a package: `Decimal`. For this kind of thing, [Martin Fowler argues](https://martinfowler.com/eaaCatalog/money.html) that money should be a first class data type in computer languages.So how is this different in COBOL?```01|004.4705882352941176470588235294117647102|004.6447368421052631578947368421052632603|004.7705382436260623229461756373937699104|004.8557007125890736342042755344418514105|004.9108474990827932004402592637896261506|004.9455374041239167247733838031869962107|004.9669625817627005987119384876490333008|004.9800457013556311612686080021648103109|004.9879794484783922601401330520835400310|004.9927702880620680974895957179208727111|004.9956558915066340266240917432846567612|004.9973912683813441128951397368280258113|004.9984339439448169190393244695668126414|004.9990600719708938683255414132479926015|004.9994359371468391581737596971768720416|004.9996615241037677413275428724751232317|004.9997969007134219837458825385524402618|004.9998781354780126741273652135326017619|004.9999268795062284412357145429960986420|004.9999561270937289398012039202891817621|004.9999736766571420739102758925788930922|004.9999842185489324420751708366614922623|004.9999907838562274607594217691725842424|004.9999995254479536400947575321453775425|005.0001008181665340605154316769852530226|005.0020825068647936640610160281718064727|005.0416724911603924589146393777344294728|005.8265844727699073812755063245059464229|019.1864446524177522153831109009603291230|078.93993662847693666623797354287682536```COBOL&#39;s implementation will also break, but it allows us to have control over the decimal places, since a fixed point is built in (I used 35 places here). This was also executed without an import. For a deeper discussion of this point, I recommend [Marianne Bellotti&#39;s article](https://medium.com/the-technical-archaeologist/is-cobol-holding-you-hostage-with-math-5498c0eb428b).`muller.cbl````bash=IDENTIFICATION DIVISION.PROGRAM-ID. muller.AUTHOR. Marianne Bellotti.DATA DIVISION.WORKING-STORAGE SECTION.01 X1 PIC 9(3)V9(35) VALUE 4.25.01 X2 PIC 9(3)V9(35) VALUE 4.01 N PIC 9(2) VALUE 20.01 Y PIC 9(3)V9(35) VALUE ZEROS.01 I PIC 9(2) VALUES ZEROS. PROCEDURE DIVISION. PERFORM N TIMES ADD 1 TO I DIVIDE X2 INTO 1500 GIVING Y SUBTRACT Y FROM 815 GIVING Y DIVIDE X1 INTO Y MOVE X1 TO X2 SUBTRACT Y FROM 108 GIVING X1 DISPLAY I&#39;|&#39;X1 END-PERFORM. STOP RUN. ``` To compile and run:```cobc -free -x -o muller muller.cbl./muller```## Suggested Personal ProjectIf you’ve made it this far, it’s a good idea to find a personal project to practice your new language. For this, I suggest implementing a [personal accounting system using plain text](https://plaintextaccounting.org/). [This rust implementation](https://github.com/ebcrowder/rust_ledger/blob/main/src/ledger.rs) is a good candidate to port with records clearly defined, and is the kind of task where COBOL will excel.## ConclusionCOBOL is infamous for being difficult to learn, but I’ve found that the real obstacle here is not the language itself but finding the right resources and getting a proper understanding of its use case. While COBOL is not as inaccessible as its reputation would suggest, it’s important to understand that learning COBOL alone won’t get you one of those sweet gigs working at a big bank. For that, you’d also need to learn a bunch of stuff about mainframes (e.g., how to run a job, interface with current technologies, and access external storage). You’d also need to learn how to navigate legacy code and how to structure your program so that it doesn’t become spaghetti code. I had a lot of fun learning COBOL and feel like I can finally understand how the language works and why it’s useful. I won’t be able to use it to rewrite my kernel, but my accounting will be accurate to 35 decimal places!## Resources ### Basic (I recommend reading/viewing these in this order)- https://www.youtube.com/watch?v=ximv-PwAKnc- https://stackoverflow.blog/2020/04/20/brush-up-your-cobol-why-is-a-60-year-old-language-suddenly-in-demand/- https://www.youtube.com/watch?v=ZOLB4KqHmBs- https://devops.com/the-beauty-of-the-cobol-programming-language-v2/- http://www.newthinktank.com/2020/04/learn-cobol-one-video/### Tutorial Language References- https://www.mainframestechhelp.com/tutorials/cobol/cobol-divisions.htm- http://www.academictutorials.com/cobol/- https://www.tutorialspoint.com/cobol/index.htm### Courses- https://www.coursera.org/learn/cobol-programming-vscode#instructors- https://github.com/openmainframeproject/cobol-programming-course### Mainframe Emulator- http://www.hercules-390.eu/### YouTube Channels and Videos- https://www.youtube.com/watch?v=RdMAEdGvtLA&amp;t=3802s- https://www.youtube.com/channel/UC116jmlZqU3oib4_da75QEg- https://www.youtube.com/channel/UCR1ajTWGiUtiAv8X-hpBY7w[^1]: For example, in C, in many compilers you are required to declare your variables at the start of each function--this allows the compiler to allocate resources effectively. ---&lt;center&gt; &lt;img src=&#34;https://monadical.com/static/logo-black.png&#34; style=&#34;height: 80px&#34;/&gt;&lt;br/&gt; Monadical.com | Full-Stack Consultancy*We build software that outlasts us* &lt;/center&gt;</p><p>Warning: Can only detect less than 5000 characters</p></div><div id="story_share_this"><div class="sharethis-inline-share-buttons"></div></div><div class="text-break sotry_link page_narrow"><a target="_blank" href="https://monadical.com/posts/cobol.html">https://monadical.com/posts/cobol.html</a></div><div class="story_tags page_narrow"><button type="button" class="btn btn-light my_tag"><a href="/tag/程序/">#程序</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/cobol/">#cobol</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/warning/">#warning</a></button></div></div><div class="my_movie_list_item shadow p-3 mb-5 bg-white rounded"><button type="button" class="btn btn-link my_tag"><a href="/tag/web2.0/">#web2.0</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/google/">#google</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/设计/">#设计</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/创意/">#创意</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/摄影/">#摄影</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/图片/">#图片</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/游戏/">#游戏</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/软件/">#软件</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/视频/">#视频</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/手机/">#手机</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/广告/">#广告</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/iphone/">#iphone</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/网站/">#网站</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/免费/">#免费</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/下载/">#下载</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/windows/">#windows</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/微软/">#微软</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/firefox/">#firefox</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/blog/">#blog</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/音乐/">#音乐</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/apple/">#apple</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/博客/">#博客</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/苹果/">#苹果</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/wordpress/">#wordpress</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/恶搞/">#恶搞</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/qq/">#qq</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/艺术/">#艺术</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/谷歌/">#谷歌</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/web/">#web</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/工具/">#工具</a></button></div></div></div><div id="my_footer"><div class=""><a href="/tags/">tags</a> <a href="/users/">users</a></div>&copy;2012-2021 diglog.com </div></div></body></html>