<!doctype html><html lang="zh-hans"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>IMPORT-一个简单快速的Bash和其他Unix shell模块系统</title><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"><link rel="stylesheet" href="/img/css.css?random="><link data-rh="true" rel="icon" href="/img/favicon.ico"/><script data-ad-client="ca-pub-6067137220025946" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script type="text/javascript" src="https://platform-api.sharethis.com/js/sharethis.js#property=5effb96910009800120b8d4d&product=inline-share-buttons" async="async"></script>
<script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?03c1a0f31299b4a2fbb83c34d6beaac9";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script></head><body><div id="my_header"><div class="container"><nav class="navbar navbar-expand-lg"><a class="navbar-brand" href="/"><img alt="diglog" src="/img/logo.v1.gif" class="rounded-sm"></a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarNavAltMarkup"><div class="navbar-nav"></div></div></nav></div></div><div class="container"><div id="my_content"><h1 class="page_narrow">IMPORT-一个简单快速的Bash和其他Unix shell模块系统</h1><div class="row"><div class="col-lg-12 col-12"><div class="my_story_list_item shadow p-3 mb-5 bg-white rounded"><div class="story_page_pub_time page_narrow">2020-07-17 07:39:58</div><div class="page_narrow text-break page_content"><p>#！/bin/sh#MacOS上默认只有`shasum`，#但高山上默认只有`sha1sum`__import_shasum=&#34；$(command-v sha1sum)&#34；||__import_shasum=&#34；$(command-v shasum)&#34；||{r=$？ECHO&#34；IMPORT：不存在\`shasum\`或\`sha1sum\`命令&#34；&gt；&amp；2退出&#34；$r&#34；}[-n&#34；${import_debug-}&#34；]&amp；&amp；ECHO&34；IMPORT：Using&#39；$__IMPORT_SHASUM&#39；&gt；&amp；2import_Usage(){ECHO&#34；用法：IMPORT\&#34；org/repo/mod.sh\&#34；&gt；&amp；2 ECHO&#34；&gt；&amp；&amp；2 ECHO&34；文档：https://import.pw&#34；&gt；&amp；2回声&#34；核心模块：https://github.com/importpw&#34；&&gt;&amp；2 ECHO&34；&gt；&amp；2 ECHO&34；示例：&#34；&gt；&amp；2 ECHO&#34；IMPORT\&#34；ASSERT\&#34；#IMPORT最新提交的&#39；Assert&#34；模块&gt；&amp；2 ECHO&#34；IMPORT\&#34；Assert@2.1.3\&#34；#从GitHub存储库导入&#39；assert&#34；&gt；&amp；2 ECHO&#34；IMPORT/HELLO\&#34；#IMPORT的标记\`2.1.3\`；https://git.io/fAWiz\&#34；#IMPORT#IMPORT#IMPORT&#34；&gt；&amp；#IMPORT#IMPORT\&#34；&gt；&amp；#IMPORT#IMPORT\&#34；&&gt;&amp；#IMPORT#IMPORT&#34；&&gt;&amp；#IMPORT#IMPORT从完全限定的URL&34；&&gt;&&gt;#IMPORT#IMPORT。2返回2}import_parse_location(){LOCAL LOCATION=&#34；$1&#34；LOCAL LOCATION_HEADER=&#34；&#34；#LOCAL LOCATION_HEADER=&#34；&#34；#print`x-import-warning`标头grep-i&#39；^x-import-warning：&#39；&lt；&#34；$Headers&#34；|While IFS=&#39；&#39；read-r line；do echo|awk-F&#34；：&#34；&#39；{print$2}&#39；|TR-d\\r)&#34；&gt；&amp；2完成#查找最终的`Location`或`Content-Location`标题location_Header=&#34；$(grep-i&39；^location\|^content-location：&#39；&lt；&#34；$Headers&#34；|Tail-N1)&#34；if[-n&#34。$LOCATION_HEADER&#34；|awk-F&#34；：&#34；&#39；{print$2}&#39；|TR-d\\r)&#34；fi echo&#34；$location&#34；}import(){local url=&#34；$*&#34；local url_path=&#34；&#34；如果[-z&#34；$url&#34；]；则import_use返回FI[-n&]&amp；&amp；echo&34；import：导入&#39；$url&#34；&gt；&amp；2#如果这是相对导入，则需要基于#父导入的解析URL位置。案例&#34；$url&#34；位于(./*)url=&#34；$(目录名称&#34；$__import_location&#34；)/$url&#34；(../*)url=&#34；$(目录名称&#34；$__IMPORT_LOCATION&#34；)/$url&#34；esac#导入缓存的基目录。#默认为`$HOME/.import_cache`。#可以通过设置`IMPORT_CACHE`变量进行配置。Local cache=&#34；${IMPORT_CACHE-${HOME}/.import-cache}&#34；#如果用户正在执行隐式导入，则应用默认服务器！echo&#34；$url&#34；|grep&#34；：//&#34；&gt；/dev/null&amp；&amp；！ECHO&#34；$url&#34；|AWK-F/&#39；{PRINT$1}&#39；|AWK-F@&#39；|grep&#39；\.&39；&gt；/dev/NULL；然后url=&#34；${IMPORT_SERVER-https://import.pw}/$url&#34；[-n&#34；${IMPORT_DEBUG-}&#34；]&AMP；&AMP；ECHO&#34；导入：规范化的URL&#39；$url&#39；&#34；&gt；&amp；2fi url_path=&#34；$(echo&#34；$url&#34；|sed&#39；s/\：\/&#39；)&#34；LOCAL CACHE_PATH=&#34；$CACHE/LINKS/$url_path&#34；if[！-e&#34；$cache_path&#34；]||[-。则#确保包含此导入的符号链接的目录存在。local dir dir=&#34；$(dirname&#34；$url_path&#34；)&#34；local link_dir=&#34；$cache/link/$dir&#34；mkdir-p&#34；$link_dir&#34；$cache/data&#34；&#34；$cache/locations/$dir&#34；&gt；&amp；2||return#解析缓存和链接目录缓存=&#34；$((CD&#34；$CACHE&#34；&amp；&amp；pwd))&#34；||return link_dir=&#34；$(cd&#34；$link_dir&#34；&amp；&amp；pwd))&#34；||return cache_path=&#34；$cache/link/$url_path&#34；#将请求的文件下载到临时位置，以便计算shasum#以确定正确的最终文件本地位置=&#34；&#34；本地tmpfile=&#34；$cache_path.tmp&#34；local tmpheader=&#34；$cache_path.header&#34；local locfile=&#34；$cache/locations/$url_path&#34；local qs=&#34；$url&#34；|grep&#39；\？&#39；&gt；/dev/null；则qs=&#34；&amp；&#34；fi[-n&#34；${import_debug-}&#34；]&amp；&amp；echo&#34；导入：HTTP GET$url_with_qs&#34；&gt；&amp；2curl-sfLS\--netrc-可选\--转储标头&#34；$tmpheader&#34；\${import_curl_opts-}\&#34；$url_with_qs&#34；&gt；&#34；$Echo&#34；导入：无法下载：$url_with_qs&#34；&gt；&amp；2 rm-f&#34；$tmpfile&#34；&#34；$tmpheader&#34；||true return&#34；$r&#34；}#既然HTTP请求已解析，请解析&#34；location&#34；location=&#34；$(import_parse_location&#34；$url&#34；&#。${import_debug-}&34；]&amp；&amp；ECHO&#34；导入：解析的位置&#39；$url&#39；-&&gt;&39；$LOCATION&#39；&#34；&amp；&amp；2 ECHO&#34；$LOCATION&</p></div><div id="story_share_this"><div class="sharethis-inline-share-buttons"></div></div><div class="text-break sotry_link page_narrow"><a target="_blank" href="https://import.pw/">https://import.pw/</a></div><div class="story_tags page_narrow"><button type="button" class="btn btn-light my_tag"><a href="/tag/unix/">#unix</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/simple/">#simple</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/import/">#import</a></button></div></div><div class="shadow p-3 mb-5 bg-white rounded clearfix"><div class="container"><div class="row"><div class="col-sm"><div><a target="_blank" href="/story/1009161.html"><img src="http://img.diglog.com/img/2020/7/thumb_365a49334eac3d73a8008da99e7cdefe.png" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1009161.html">比尔·香农·里普</a></div><span class="my_story_list_date">2020-7-1 5:30</span></div><div class="col-sm"><div><a target="_blank" href="/story/1004475.html"><img src="http://img.diglog.com/img/2020/5/thumb_2a56767d751fd2cc920f485b8361dd0f.jpg" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1004475.html">Unix操作系统(1982)[视频]</a></div><span class="my_story_list_date">2020-5-31 10:5</span></div><div class="col-sm"><div><a target="_blank" href="/story/1000343.html"><img src="http://img.diglog.com/img/2020/5/thumb_f445aec87178b5c9e4b9fb45921abee9.jpg" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1000343.html">Unix上的时间</a></div><span class="my_story_list_date">2020-5-2 21:19</span></div><div class="col-sm"><div><a target="_blank" href="/story/technology_linux_761996.html"><img src="http://img.diglog.com/img/2013/6/thumb_ca4b42fd-13a7-42ea-a1b1-be5b4f4bb072.jpg" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/technology_linux_761996.html">Linux 为什么要用字符 ~ 来表示 home 目录</a></div><span class="my_story_list_date">2013-6-21 14:23</span></div></div></div></div><div class="my_movie_list_item shadow p-3 mb-5 bg-white rounded"><button type="button" class="btn btn-link my_tag"><a href="/tag/web2.0/">#web2.0</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/google/">#google</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/设计/">#设计</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/创意/">#创意</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/摄影/">#摄影</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/游戏/">#游戏</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/图片/">#图片</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/软件/">#软件</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/视频/">#视频</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/手机/">#手机</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/广告/">#广告</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/apple/">#apple</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/iphone/">#iphone</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/网站/">#网站</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/免费/">#免费</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/下载/">#下载</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/windows/">#windows</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/微软/">#微软</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/firefox/">#firefox</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/苹果/">#苹果</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/blog/">#blog</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/音乐/">#音乐</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/博客/">#博客</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/wordpress/">#wordpress</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/恶搞/">#恶搞</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/艺术/">#艺术</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/qq/">#qq</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/web/">#web</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/谷歌/">#谷歌</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/工具/">#工具</a></button></div></div></div><div id="my_footer"><div class=""><a href="/tags/">tags</a> <a href="/users/">users</a></div>&copy;2012-2021 diglog.com </div></div></body></html>