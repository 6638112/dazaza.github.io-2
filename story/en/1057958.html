<!doctype html><html lang="zh-hans"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Ubuntu 21.04的私人主页目录 Private Home Directories for Ubuntu 21.04</title><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"><link rel="stylesheet" href="/img/css.css?random="><link data-rh="true" rel="icon" href="/img/favicon.ico"/><script data-ad-client="ca-pub-6067137220025946" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script type="text/javascript" src="https://platform-api.sharethis.com/js/sharethis.js#property=5effb96910009800120b8d4d&product=inline-share-buttons" async="async"></script>
<script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?03c1a0f31299b4a2fbb83c34d6beaac9";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script></head><body><div id="my_header"><div class="container"><nav class="navbar navbar-expand-lg"><a class="navbar-brand" href="/"><img alt="diglog" src="/img/logo.v1.gif" class="rounded-sm"></a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarNavAltMarkup"><div class="navbar-nav"></div></div></nav></div></div><div class="container"><div id="my_content"><h1 class="page_narrow">Private Home Directories for Ubuntu 21.04<br/>Ubuntu 21.04的私人主页目录 </h1><div class="row"><div class="col-lg-12 col-12"><div class="my_story_list_item shadow p-3 mb-5 bg-white rounded"><div class="story_page_pub_time page_narrow">2021-04-13 07:48:55</div><div class="story_img_container"><a href="http://img2.diglog.com/img/2021/4/dc3a728849b0e1e18cc6d6aee201e0a4.jpg"><img src="http://img2.diglog.com/img/2021/4/dc3a728849b0e1e18cc6d6aee201e0a4.jpg" class="img-fluid my_story_img" onerror="this.style.display='none'"></a></div><div class="page_narrow text-break page_content"><p>Ubuntu has evolved a lot since its early beginnings as an easier-to-use derivative of Debian that catered primarily to the nascent Linux desktop market. Today Ubuntu is deployed beyond just your laptops at home and in the office.  Nowadays you are more likely to find Ubuntu in the cloud, powering some of the world’s best known enterprises and running on various IoT devices out in the field. With this shift in adoption has come many different technical challenges and trade-offs due to the competing demands of each of these environments. One such challenge that is always front-of-mind for Ubuntu developers is the tension between security and usability. With an early and continued focus on both usability and security, Ubuntu has prided itself on being the go-to choice for both users and developers. The choice of appropriate sensible defaults lets users be productive without having to fight against their operating system.</p><p>自从早期开始是由于Debian的更容易使用的衍生物，Ubuntu已经进化了很多，这些衍生物主要是在新生Linux桌面市场上迎合。今天，Ubuntu在家和办公室只能在您的笔记本电脑中部署。如今，您更有可能在云中找到Ubuntu，推动了世界上一些最着名的企业并在该领域的各种IOT设备上运行。由于每个环境的竞争需求，通过这种采用的转变具有许多不同的技术挑战和权衡。一个这样的挑战，始终是Ubuntu开发人员的思想是安全性和可用性之间的紧张关系。随着早期，继续关注可用性和安全性，Ubuntu本身就是用户和开发人员的进入选择。选择适当的明智默认值，允许用户在不必反对其操作系统的情况下富有成效。</p><p> In modern environments, strong security is paramount. This is best achieved through a defense-in-depth approach, where multiple controls and elements are used to achieve a more resilient solution. For Ubuntu, this has always been a priority and has led to the creation of various default security features. These include no open network ports by default, automatic security updates, enablement of security controls like AppArmor and snaps for seamless application sandboxing, and the use of a wide range of compiler hardening features ensure that Ubuntu provides not only a high degree of usability, but a very strong security posture out-of-the-box.</p><p> 在现代环境中，强大的安全性至关重要。通过防御深入的方法，这是最好的，其中多种控制和元素用于实现更有弹性的解决方案。对于Ubuntu，这一直是优先级，并导致创建各种默认安全功能。这些默认情况下，无需开放的网络端口，自动安全更新，使安全控件的启用，如AppArmor和Snaps for Teameration Application Sandboxing，以及广泛的编译器硬化功能确保Ubuntu不仅提供高度的可用性，但是开箱即用的安全姿势非常强劲。</p><p> One particular security/usability trade-off that has often been cited over the years is the choice of default permissions for the user’s home directory. At a high level, traditional directory permissions (like files) are broken down into 3 types (read, write and execute) and these can be assigned independently for 3 categories of users (owner, group and others). This allows a user to restrict access to files within a private directory to only their own user, or to allow access to public data to other users on the system on a directory-by-directory basis. When creating a new user for Ubuntu (whether during the installation process or after) their home directory will be created with a default set of permissions – and traditionally this has been chosen to enable shared access to files within home directories by enabling both read and execute permissions for other users. This default was chosen in the early days of Ubuntu, to support use-cases like multiple family members sharing a single PC and wanting to easily share files with one another or within university environments to support easy collaboration. The addition of per-user home directory encryption was also provided during this time, to provide privacy for those users who required it. However, as alluded to earlier, these use-cases for Ubuntu are perhaps now a bit quaint when considered in the modern era of cloud computing and IoT which have very different requirements and security exposure. With this in mind, for the forthcoming Ubuntu 21.04 release we have decided to switch to a more private default, so that for new installations of Ubuntu 21.04, or for users created on a machine that has been upgraded to Ubuntu 21.04,  home directories will be private by default.</p><p> 多年来经常被引用的一个特定的安全/可用性权衡是用户主目录的默认权限选择。在高级别，传统的目录权限（如文件）分为3种类型（读取，写和执行），可以独立分配3类用户（所有者，组和其他）。这允许用户将对私有目录中的文件的访问仅限于他们自己的用户，或者允许在目录基础上访问系统上的其他用户。在为Ubuntu创建新用户时（无论是安装过程中是否或之后），它们的主目录将使用默认的权限组创建 - 传统上，这已选择通过启用读取和执行来启用对家庭目录中的文件的共享访问其他用户的权限。此默认值在Ubuntu的早期选择，以支持像多个家庭成员的用例，如多个PC共享，并希望轻松地将文件彼此或在大学环境中以支持轻松协作。在此期间还提供了每个用户主目录加密，为需要它的用户提供隐私。然而，如前所述，ubuntu的这些用例现在可能有点古色时间在云计算和IOT的现代时代考虑，这具有非常不同的要求和安全曝光。考虑到这一点，对于即将到来的Ubuntu 21.04发布，我们已经决定切换到更私有的默认值，以便为Ubuntu 21.04的新安装，或者对于在已升级到Ubuntu 21.04的计算机上创建的用户，所以Home目录将是默认私有。</p><p> For a lot of systems that have only one primary user, this change may not appear to have a huge impact. However, whilst these machines may have only one human user, they likely have other user accounts already on them which are created by various system services. This change now means that in the future if an attacker were to exploit some previously unknown vulnerability in a given system service that is running as a separate user, they would then not be able to access the data of any other user (both human or system service) on the system. This provides a more secure out-of-the-box experience for users and system administrators.</p><p> 对于只有一个主要用户的许多系统，这种变化可能似乎没有巨大影响。然而，虽然这些机器可能只有一个人类用户，但是它们可能拥有已经由各种系统服务创建的其他用户帐户。这一变化现在意味着如果攻击者在运行作为单独用户的给定系统服务中的一些先前未知的漏洞中，他们将无法访问任何其他用户的数据（两个人或系统服务）在系统上。这为用户和系统管理员提供了更安全的开箱体验。</p><p> There may be some existing use-cases that are affected by this change – for example, a user running libvirt based virtual machines who stores the disk images within their home directory. In this case, the virtual machines run under the libvirt-qemu user and so with this new permission change, any virtual machines stored within the user’s home directory are now not able to be accessed by libvirt. To resolve this, a user can give selective access to these files via the use of an appropriate access control list entry for their home directory as follows:</p><p> 可能存在受此更改影响的一些现有使用情况 - 例如，运行基于LibVirt的虚拟机的用户存储在其主目录中的磁盘图像。在这种情况下，虚拟机在libvirt-qemu用户下运行，因此使用此新权限更改，任何存储在用户的主目录中的虚拟机现在都无法通过libvirt访问。要解决此问题，用户可以通过使用其主目录的适当访问控制列表条目来提供对这些文件的选择性访问，如下所示：</p><p>  This specifies that the libvirt-qemu user should have read and execute permission for the home directory of the user – which allows libvirt-qemu to see the names and contents of any virtual machine images as required.</p><p>  这指定libvirt-qemu用户应该为用户的主目录读取和执行权限 - 这允许libvirt-qemu根据需要查看任何虚拟机图像的名称和内容。</p><p> If you wish to try this out now, you can also make the same changes for an existing Ubuntu installation so that any existing or newly created home directories private by default:</p><p> 如果您想尝试一下，您还可以对现有的Ubuntu安装进行相同的更改，以便默认情况下任何现有或新创建的主目录私有： </p><p> # make all existing home directories private sudo chmod 750 /home/*  # ensure any users created by either the adduser(8) or useradd(8)  # commands have their home directories private by default sudo sed -i s/DIR_MODE=0755/DIR_MODE=0750/ /etc/adduser.conf echo “HOME_MODE 0750” | sudo tee -a /etc/login.defs</p><p>＃使所有现有的家庭目录私有sudo chmod 750 / home / *＃确保任何由adduser（8）或useradd（8）＃命令创建的用户默认sudo sed -is / dir_mode = 0755 / dir_mode = 0750 / /etc/adduser.conf echo“home_mode 0750”| sudo tee -a /etc/login.defs</p><p> Conversely, if you wish to disable this feature once you are running Ubuntu 21.04 and return to having shared access to home directories by default, simply run the following commands:</p><p> 相反，如果要在运行Ubuntu 21.04并返回默认情况下返回对Home目录的共享访问权限，只需运行以下命令：</p><p> # change adduser(8) to enable permissive home directory permissions sudo dpkg-reconfigure adduser  # and ensure useradd also follows suit sudo sed -i &#39;s/^\(HOME_MODE\s\+0750\)/#\1/&#39; /etc/login.defs</p><p> ＃更改adduser（8）启用允许寄存主目录权限Sudo DPKG-Recefigure AddUser＃并确保Useradd还遵循适合Sudo Sed -i＆＃39; s / ^ \（home_mode \ s \ +0750 \）/＃\ 1 / ＆＃39; /etc/login.defs.</p><p> This is just one small example of how Ubuntu offers both a high degree of usability  and security by default, and how we continue to evolve this balance over time. If you wish to provide feedback on this feature, please come join the  discussion with the Ubuntu community over on the Ubuntu Discourse.</p><p> 这只是Ubuntu如何提供高度可用性和安全性的一个小例子，以及我们如何随着时间的推移继续发展这种平衡。如果您想提供有关此功能的反馈，请在Ubuntu话语中加入ubuntu社区的讨论。 </p></div><div id="story_share_this"><div class="sharethis-inline-share-buttons"></div></div><div class="text-break sotry_link page_narrow"><a target="_blank" href="https://ubuntu.com/blog/private-home-directories-for-ubuntu-21-04">https://ubuntu.com/blog/private-home-directories-for-ubuntu-21-04</a></div><div class="story_tags page_narrow"><button type="button" class="btn btn-light my_tag"><a href="/tag/ubuntu/">#ubuntu</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/主页/">#主页</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/home/">#home</a></button></div></div><div class="my_movie_list_item shadow p-3 mb-5 bg-white rounded"><button type="button" class="btn btn-link my_tag"><a href="/tag/web2.0/">#web2.0</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/google/">#google</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/设计/">#设计</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/创意/">#创意</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/摄影/">#摄影</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/图片/">#图片</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/游戏/">#游戏</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/软件/">#软件</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/视频/">#视频</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/手机/">#手机</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/广告/">#广告</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/iphone/">#iphone</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/网站/">#网站</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/免费/">#免费</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/apple/">#apple</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/下载/">#下载</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/windows/">#windows</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/微软/">#微软</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/firefox/">#firefox</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/blog/">#blog</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/音乐/">#音乐</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/苹果/">#苹果</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/博客/">#博客</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/wordpress/">#wordpress</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/恶搞/">#恶搞</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/qq/">#qq</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/艺术/">#艺术</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/web/">#web</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/工具/">#工具</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/分享/">#分享</a></button></div></div></div><div id="my_footer"><div class=""><a href="/tags/">tags</a> <a href="/users/">users</a></div>&copy;2012-2021 diglog.com </div></div></body></html>