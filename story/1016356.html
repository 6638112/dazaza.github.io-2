<!doctype html><html lang="zh-hans"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>对SameSite Cookie行为的更改-对Web开发人员的行动呼吁</title><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"><link rel="stylesheet" href="/img/css.css?random="><link data-rh="true" rel="icon" href="/img/favicon.ico"/><script data-ad-client="ca-pub-6067137220025946" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script type="text/javascript" src="https://platform-api.sharethis.com/js/sharethis.js#property=5effb96910009800120b8d4d&product=inline-share-buttons" async="async"></script>
<script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?03c1a0f31299b4a2fbb83c34d6beaac9";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script></head><body><div id="my_header"><div class="container"><nav class="navbar navbar-expand-lg"><a class="navbar-brand" href="/"><img alt="diglog" src="/img/logo.v1.gif" class="rounded-sm"></a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarNavAltMarkup"><div class="navbar-nav"></div></div></nav></div></div><div class="container"><div id="my_content"><h1 class="page_narrow">对SameSite Cookie行为的更改-对Web开发人员的行动呼吁</h1><div class="row"><div class="col-lg-12 col-12"><div class="my_story_list_item shadow p-3 mb-5 bg-white rounded"><div class="story_page_pub_time page_narrow">2020-08-05 15:45:51</div><div class="story_img_container"><a href="http://img.diglog.com/img/2020/8/7b333b3efbde27111f1c6a6cd2f2c44f.png"><img src="http://img.diglog.com/img/2020/8/7b333b3efbde27111f1c6a6cd2f2c44f.png" class="img-fluid my_story_img" onerror="this.style.display='none'"></a></div><div class="page_narrow text-break page_content"><p>我们正在将cookie的SameSite属性的默认值从None更改为Lax。这将大大提高用户的安全性。但是，一些网站可能(甚至在不知情的情况下)依赖于旧的默认设置，这可能会导致这些网站中断。在Mozilla，我们正在慢慢引入这一变化。我们强烈鼓励所有的网站开发人员使用新的默认设置来测试他们的站点。</p><p>SameSite是Cookie的一个属性，允许Web开发人员声明Cookie应仅限于第一方或同一站点上下文。该属性可以具有下列值之一：</p><p>严格-浏览器将仅发送同站点请求的Cookie(即，源自设置Cookie的站点的请求)。</p><p>Lax-Cookie将在跨站点请求(如调用加载图像或帧)时被扣留。但是，当用户从外部站点导航到URL时(例如，通过跟随链接)，将发送Cookie。</p><p>目前，缺少SameSite属性意味着Cookie将附加到针对给定源的任何请求，无论该请求是由谁发起的。此行为等效于设置SameSite=None。但是，这种“默认打开”行为使用户容易受到跨站点请求伪造(CSRF)攻击。在CSRF攻击中，恶意站点试图使用来自合法站点的有效cookie来执行攻击。</p><p>为了保护用户免受CSRF攻击，浏览器需要更改处理Cookie的方式。两个主要更改是：</p><p>显式设置SameSite=None以启用跨站点传递的Cookie还必须设置安全属性。(换句话说，它们必须需要HTTPS。)。</p><p>依赖旧的默认行为的网站现在必须将SameSite属性显式设置为None。此外，还要求它们包含安全属性。一旦在Firefox中进行了此更改，如果网站无法正确设置SameSite，则这些网站可能会对用户造成破坏。</p><p>新的SameSite行为从Nighter75(2020年2月)开始就一直是Firefox Nighways的默认行为。在Mozilla，我们已经能够探索这一变化的含义。从Firefox79(2020年6月)开始，我们将其推广到50%的Firefox Beta用户群。我们想监控任何潜在破损的范围。</p><p>目前还没有将此功能发布到Firefox发布频道的时间表。我们希望看到Beta用户没有看到不可接受的网站破损量--这表明大多数网站已经适应了新的默认行为。由于“破坏”没有确切的定义，而且很难通过遥测来确定，我们正在关注几个渠道(例如，Bugzilla、社交媒体、博客)关于站点破坏的报道。</p><p>此外，我们希望看到该提案在IETF中进一步推进。作为开放网络的支持者，对网络生态系统的改变进行适当的标准化是很重要的。</p><p>这是整个行业对浏览器的改变，而不是Mozilla一个人在做的事情。谷歌从2020年2月开始向Chrome用户推出这一改变，SameSite=lax是他们所有频道(发行版、测试版、金丝雀版)中一定百分比(未发布)的默认设置。</p><p>Mozilla正在与谷歌合作，在我们各自的漏洞跟踪数据库中跟踪和共享网站崩溃的报告。我们共同鼓励所有Web开发人员开始将SameSite属性显式设置为最佳实践。</p><p>在Firefox Nighly和Beta频道的测试表明，网站确实发生了破坏。虽然我们已经联系了我们遇到的那些站点，并鼓励他们在其Web属性上设置SameSite属性，但是Web显然太大了，不能在个案的基础上这样做。</p><p>重要的是，所有的Web开发人员都要根据这个新的默认设置来测试他们的站点。这将为Firefox和Chrome浏览器在各自的发布渠道中进行切换做好准备。</p><p>此时，请彻底测试您的站点。尤其要注意任何涉及登录流、多个域或跨站点嵌入内容(图像、视频等)的内容。对于任何涉及POST请求的流，您应该使用和不使用长延迟进行测试。这是因为Firefox和Chrome都实现了两分钟的阈值，允许在顶级的跨站点POST请求(一个常见的登录流)上发送没有SameSite属性的新创建的cookie。</p><p>要查看您的站点是否受到新Cookie行为的影响，请检查Firefox Web控制台并查找以下消息之一：</p><p>Cookie被拒绝，因为它具有“sameSite=None”属性，但缺少“Secure”属性。</p><p>Cookie将“sameSite”策略设置为“lax”，因为它缺少“sameSite”属性，而“sameSite=lax”是该属性的默认值。</p><p>看到这两条消息中的任何一条并不一定意味着您的站点将不再工作，因为新的Cookie行为可能对您的站点的功能并不重要。因此，至关重要的是，每个现场都要在新的条件下进行测试。然后，验证新的SameSite行为没有破坏任何内容。一般来说，显式设置Cookie的SameSite属性是保证您的站点继续以可预测的方式运行的最佳方式。</p></div><div id="story_share_this"><div class="sharethis-inline-share-buttons"></div></div><div class="text-break sotry_link page_narrow"><a target="_blank" href="https://hacks.mozilla.org/2020/08/changes-to-samesite-cookie-behavior/">https://hacks.mozilla.org/2020/08/changes-to-samesite-cookie-behavior/</a></div><div class="story_tags page_narrow"><button type="button" class="btn btn-light my_tag"><a href="/tag/开发/">#开发</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/cookie/">#cookie</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/站点/">#站点</a></button></div></div><div class="shadow p-3 mb-5 bg-white rounded clearfix"><div class="container"><div class="row"><div class="col-sm"><div><a target="_blank" href="/story/1016284.html"><img src="http://img.diglog.com/img/2020/8/thumb_5197fb28d8168f9d6bf058596d0eefe9.png" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1016284.html">1Password for Linux(开发预览)</a></div><span class="my_story_list_date">2020-8-5 5:33</span></div><div class="col-sm"><div><a target="_blank" href="/story/1016222.html"><img src="http://img.diglog.com/img/2020/8/thumb_62e7b5756800994c163b2c0abf3ec056.jpg" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1016222.html">软件开发人员：自动化编码的计划可能意味着未来的重大变化</a></div><span class="my_story_list_date">2020-8-5 2:30</span></div><div class="col-sm"><div><a target="_blank" href="/story/1016218.html"><img src="http://img.diglog.com/img/2020/8/thumb_95d0df3b07ba3c723a88c0860d8dd97a.jpg" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1016218.html">
Vectrix正在开发专为安全专业人员打造的云安全市场</a></div><span class="my_story_list_date">2020-8-5 1:9</span></div><div class="col-sm"><div><a target="_blank" href="/story/1016147.html"><img src="http://img.diglog.com/img/2020/8/thumb_a4bff4a464395ec6b45cfecb457b5168.png" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1016147.html">开发人工智能语音处理边缘芯片的Syntiant在M12和Application Ventures的带领下筹集了3500万美元的C系列资金，使其筹资总额达到6000万美元以上</a></div><span class="my_story_list_date">2020-8-4 21:22</span></div></div></div></div><div class="my_movie_list_item shadow p-3 mb-5 bg-white rounded"><button type="button" class="btn btn-link my_tag"><a href="/tag/web2.0/">#web2.0</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/google/">#google</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/设计/">#设计</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/创意/">#创意</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/摄影/">#摄影</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/游戏/">#游戏</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/图片/">#图片</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/软件/">#软件</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/视频/">#视频</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/手机/">#手机</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/广告/">#广告</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/apple/">#apple</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/iphone/">#iphone</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/网站/">#网站</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/免费/">#免费</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/下载/">#下载</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/windows/">#windows</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/微软/">#微软</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/firefox/">#firefox</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/苹果/">#苹果</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/blog/">#blog</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/音乐/">#音乐</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/博客/">#博客</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/wordpress/">#wordpress</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/恶搞/">#恶搞</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/艺术/">#艺术</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/qq/">#qq</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/web/">#web</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/谷歌/">#谷歌</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/工具/">#工具</a></button></div></div></div><div id="my_footer"><div class=""><a href="/tags/">tags</a> <a href="/users/">users</a></div>&copy;2012-2021 diglog.com </div></div></body></html>