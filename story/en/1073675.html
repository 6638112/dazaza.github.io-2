<!doctype html><html lang="zh-hans"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>气流的分离The Unbundling of Airflow</title><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"><link rel="stylesheet" href="/img/css.css?random="><link data-rh="true" rel="icon" href="/img/favicon.ico"/><script data-ad-client="ca-pub-6067137220025946" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script type="text/javascript" src="https://platform-api.sharethis.com/js/sharethis.js#property=5effb96910009800120b8d4d&product=inline-share-buttons" async="async"></script>
<script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?03c1a0f31299b4a2fbb83c34d6beaac9";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script></head><body><div id="my_header"><div class="container"><nav class="navbar navbar-expand-lg"><a class="navbar-brand" href="/"><img alt="diglog" src="/img/logo.v1.gif" class="rounded-sm"></a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarNavAltMarkup"><div class="navbar-nav"></div></div></nav></div></div><div class="container"><div id="my_content"><h1 class="page_narrow">The Unbundling of Airflow<br/>气流的分离</h1><div class="row"><div class="col-lg-12 col-12"><div class="my_story_list_item shadow p-3 mb-5 bg-white rounded"><div class="story_page_pub_time page_narrow">2022-02-17 03:06:07</div><div class="page_narrow text-break page_content"><p>In each subdomain of software, we have seen the same story over and over again. Products start small, in time, add adjacent verticals and functionality to their offerings and end up becoming a  platform. Once these platforms become big enough, people start to figure out how to better serve neglected verticals or abstract out functionality in order to break it down into purpose-built chunks, and  the unbundling starts. The most classic example of this is the unbundling of Craigslist. You have probably seen a version of this diagram on the internet somewhere:</p><p>在软件的每个子领域中，我们一遍又一遍地看到相同的故事。产品一开始规模小，时间长，在其产品中添加相邻的垂直领域和功能，最终成为一个平台。一旦这些平台变得足够大，人们就开始思考如何更好地为被忽视的垂直领域服务，或者抽象出功能，以便将其分解为专门构建的块，然后开始分解。最经典的例子就是Craigslist的拆分。你可能在网上的某个地方看到过这个图表的一个版本：</p><p>  In data world, it&#39;s hard to figure out what makes a platform, but luckily some tools self-advertise themselves as such. Airflow is one of them:</p><p>在数据世界里，它&#39；很难理解是什么构成了一个平台，但幸运的是，有些工具自我宣传。气流是其中之一：</p><p> Airflow is a platform created by the community to programmatically author, schedule and monitor workflows.</p><p>Airflow是由社区创建的一个平台，用于以编程方式编写、安排和监控工作流。</p><p> One might consider Airflow a workflow manager, but undoubtedly the flexibility of the product allowed it to take on additional responsibilities. Heavy users of Airflow can do a vast variety of data related tasks without leaving the platform; from extract and load scripts to generating reports, transformations with Python and SQL to syncing back data to BI tools.</p><p>人们可能会认为工作流是工作流管理器，但毫无疑问，产品的灵活性允许它承担额外的责任。大量使用Airflow的用户可以在不离开平台的情况下完成大量与数据相关的任务；从提取和加载脚本到生成报告，再到使用Python和SQL进行转换，再到将数据同步回BI工具。</p><p> Before the fragmentation of the data stack, it wasn’t uncommon to create end-to-end pipelines with Airflow. Organizations used to build almost entire data workflows as custom scripts developed by in-house data engineers. Bigger companies even built their own frameworks inside Airflow, for example frameworks with dbt-like functionality for SQL transformations in order to make it easier for data analysts to write these pipelines.</p><p>在数据堆栈碎片化之前，创建带有气流的端到端管道并不罕见。过去，企业通常将几乎整个数据工作流构建为内部数据工程师开发的定制脚本。更大的公司甚至在Airflow内部构建了自己的框架，例如具有类似dbt的SQL转换功能的框架，以便数据分析师更容易编写这些管道。</p><p>   Today, data practitioners have many tools under their belt and only very rarely they have to reach for a tool like Airflow.  Fivetran and  Airbyte took care of the extract and load scripts that one might write with Airflow.  dbt came for the data transformations,  Census and  Hightouch for Reverse ETL. Metrics and experimentation layers are also getting their own focused tooling; metrics with tools like  Transform,  Metriql,  Supergrain  and experimentation with  Eppo.  Certain companies relied on Airflow for data science and ML workloads, but with the popularity of MLOps, that layer is also being abstracted out. Open source tools like  Feast are unbundling best practices for feature management that used to exist as independent Python scripts.</p><p>如今，数据从业者拥有许多工具，他们很少需要使用气流之类的工具。Fivetran和Airbyte负责使用Airflow编写的提取和加载脚本。dbt用于数据转换，人口普查和Hightouch用于反向ETL。度量和实验层也有自己的专注工具；使用Transform、Metriql、Supergrain和Eppo实验等工具进行度量。某些公司在数据科学和ML工作负载方面依赖气流，但随着MLOP的普及，这一层也被抽象出来。像Feast这样的开放源代码工具正在将过去作为独立Python脚本存在的功能管理最佳实践分解开来。</p><p>   If the unbundling of Airflow means all the heavy lifting is done by separate tools, what is left behind?</p><p>如果气流的分离意味着所有的重物都是由单独的工具完成的，那么剩下什么呢？</p><p> The missing gap is that we still don’t have a good solution for things that need to happen in non-SQL languages. For example, adding pandas data transformations within a dbt DAG is still a non-trivial task. Another example is the  entity resolution scenario that Tristian from dbt Labs points out. It is also very common to have Python nodes in a DAG that are not transformations. Such nodes might calculate risky users with an ML model, write predictions to a table that is then further processed by SQL transformations. We are working on this problem at  Features and Labels by  adding bilingual support to dbt.</p><p>缺少的差距是，对于需要在非SQL语言中发生的事情，我们仍然没有一个好的解决方案。例如，在dbt DAG中添加数据转换仍然是一项非常重要的任务。另一个例子是dbt实验室的特里斯汀指出的实体解析场景。DAG中的Python节点不是转换也是很常见的。这样的节点可能会使用ML模型计算风险用户，将预测写入表中，然后由SQL转换进一步处理。我们在Features and Labels上通过向dbt添加双语支持来解决这个问题。</p><p> Another big responsibility is scheduling, but this is a relatively simple task. EL is usually the starting point of a data pipeline so I can see EL tools (or even dbt Cloud) taking this on without Airflow. People really like the Airflow UI, it provides a holistic view of the whole system to easily discover what has failed, and re-run jobs when necessary. This is a valid point, but the holistic view has diminishing returns as more complexity is moved inside other tools. For example if an Airflow workflow is invoking a complicated dbt Cloud job the complexity of the dbt DAG is not observable from the Airflow UI.</p><p>另一项重要职责是安排时间，但这是一项相对简单的任务。EL通常是数据管道的起点，所以我可以看到EL工具（甚至是dbt Cloud）在没有气流的情况下执行此操作。人们非常喜欢Airflow UI，它提供了整个系统的整体视图，可以轻松发现失败的地方，并在必要时重新运行作业。这是一个正确的观点，但随着更多的复杂性被转移到其他工具中，整体观点的回报越来越小。例如，如果气流工作流正在调用复杂的dbt云作业，则无法从气流UI中观察到dbt DAG的复杂性。</p><p> Then there are tools that are trying to become a better Airflow by making it easier to deploy tasks or being more scalable or containerized or asset driven... It’s hard to make predictions in the ever evolving data landscape, but I am not sure if we need a better Airflow. Building a better Airflow feels like trying to optimize writing code that shouldn’t have been written in the first place.</p><p>还有一些工具正试图通过更容易地部署任务或更具可扩展性、容器化或资产驱动，成为更好的工具。。。在不断变化的数据环境中很难做出预测，但我不确定我们是否需要更好的气流。构建更好的气流感觉就像是试图优化编写本来不应该编写的代码。</p><p> A diverse set of tools is unbundling Airflow and this diversity is causing substantial fragmentation in modern data stack. Like everyone else, I also predict some consolidation of these tools in the coming years. I believe dbt Cloud is the best positioned place for this consolidation to happen. More on this in the next post!</p><p>各种各样的工具正在分解气流，这种多样性正在现代数据堆栈中造成大量碎片。和其他人一样，我也预测这些工具在未来几年会得到一些整合。我相信dbt云是实现整合的最佳位置。下一篇文章将对此进行详细介绍！</p></div><div id="story_share_this"><div class="sharethis-inline-share-buttons"></div></div><div class="story_tags page_narrow"><button type="button" class="btn btn-light my_tag"><a href="/tag/气流/">#气流</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/数据/">#数据</a></button></div></div><div class="my_movie_list_item shadow p-3 mb-5 bg-white rounded"><button type="button" class="btn btn-link my_tag"><a href="/tag/web2.0/">#web2.0</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/google/">#google</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/设计/">#设计</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/创意/">#创意</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/摄影/">#摄影</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/图片/">#图片</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/游戏/">#游戏</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/软件/">#软件</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/广告/">#广告</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/视频/">#视频</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/手机/">#手机</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/iphone/">#iphone</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/网站/">#网站</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/免费/">#免费</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/windows/">#windows</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/下载/">#下载</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/微软/">#微软</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/苹果/">#苹果</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/firefox/">#firefox</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/blog/">#blog</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/音乐/">#音乐</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/博客/">#博客</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/apple/">#apple</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/wordpress/">#wordpress</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/恶搞/">#恶搞</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/qq/">#qq</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/艺术/">#艺术</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/谷歌/">#谷歌</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/工具/">#工具</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/web/">#web</a></button></div></div></div><div id="my_footer"><div class=""><a href="/tags/">tags</a> <a href="/users/">users</a></div>&copy;2012-2021 diglog.com </div></div></body></html>