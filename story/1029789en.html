<!doctype html><html lang="zh-hans"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>树莓派计算模块4述评</title><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"><link rel="stylesheet" href="/img/css.css?random="><link data-rh="true" rel="icon" href="/img/favicon.ico"/><script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?03c1a0f31299b4a2fbb83c34d6beaac9";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script><script data-ad-client="ca-pub-6067137220025946" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script type="text/javascript" src="https://platform-api.sharethis.com/js/sharethis.js#property=5effb96910009800120b8d4d&product=inline-share-buttons" async="async"></script></head><body><div id="my_header"><div class="container"><nav class="navbar navbar-expand-lg"><a class="navbar-brand" href="/"><img alt="diglog" src="/img/logo.v1.gif" class="rounded-sm"></a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarNavAltMarkup"><div class="navbar-nav"></div></div></nav></div></div><div class="container"><div id="my_content"><h1 class="page_narrow">树莓派计算模块4述评</h1><div class="row"><div class="col-lg-12 col-12"><div class="my_story_list_item shadow p-3 mb-5 bg-white rounded"><div class="story_page_pub_time page_narrow">2020-10-19 20:56:23</div><div class="page_narrow text-break page_content"><p>Six years ago, the Raspberry Pi Foundation introduced the  Compute Module: a teensy-tiny version of the popular Raspberry Pi model B board.</p><p>六年前，树莓派基金会推出了计算模块：这是广受欢迎的树莓派B型电路板的一个极小的版本。</p><p> Between then and now, there have been multiple revisions to the Compute Module, like the 3+ I used in my  Raspberry Pi Cluster YouTube series, but they&#39;ve all had the same basic form factor and a very limited feature set.</p><p>从那时到现在，Compute Module已经有了多次版本，就像我在我的Raspberry Pi Cluster YouTube系列中使用的3+版一样，但它们都有相同的基本外形规格和非常有限的功能集。</p><p> But today, that all changes with the fourth generation of the compute module, the  Compute Module 4! Here&#39;s a size comparison with the previous-generation Compute Module 3+, some other common Pi models, and an SD and microSD card (remember when the original Pi used a full-size SD card?):</p><p>但是今天，随着第四代计算模块--计算模块4的问世，一切都改变了！下面是与上一代计算模块3+、其他一些常见PI型号以及SD和microSD卡的大小比较(还记得最初的PI使用全尺寸SD卡的时候吗？)：</p><p>   I also posted a video review of the Compute Module 4, embedded below (scroll past it for the blog post version of the review):</p><p>我还发布了一个Compute Module4的视频评论，嵌入在下面(滚动浏览博客文章版本的评论)：</p><p>   The Compute Module 4 is basically a Raspberry Pi 4 model B, with all the ports cut off. Instead of the ports, you plug the Compute Module into another board with its special board-to-board connectors. But the Compute module has a few other tricks up its sleeve:</p><p>计算模块4基本上是一个Raspberry PI 4型号B，所有端口都被切断。您可以使用其特殊的板对板连接器将计算模块插入另一个板，而不是端口。但是，Compute模块还有其他一些诀窍：</p><p> Faster eMMC: It has optional onboard eMMC storage, which is now much faster than any microSD card I&#39;ve tested</p><p>更快的eMMC：它有可选的板载eMMC存储，现在比我测试过的任何microSD卡都快得多。</p><p> PCI Express: It drops the USB 3.0 interface for a PCI Express interface, meaning you can do some pretty cool things in lieu of having a couple USB 3.0 ports.</p><p>PCI Express：它去掉了PCI Express接口的USB3.0接口，这意味着你可以做一些非常酷的事情，而不是只有几个USB3.0端口。</p><p> WiFi and U.FL: It has an external antenna connector for it&#39;s wireless interface. What&#39;s that? Oh yes, there&#39;s now a version of the Compute Module with Bluetooth and WiFi!</p><p>WiFi和u.fl：它有一个外部天线接口用于连接无线接口。那是什么？哦，是的，现在有一个版本的带蓝牙和WiFi的计算模块！</p><p> More Options: There are now  thirty two different Compute Module flavors to choose from, whether you want onboard WiFi or not, whether you want eMMC storage, or whether you want 1, 2, 4, or even  eight gigabytes of RAM!</p><p>更多选项：现在有32种不同的计算模块风格可供选择，无论您是否想要板载WiFi，无论您想要eMMC存储，还是想要1 GB、2 GB、4 GB甚至8 GB的RAM！</p><p> You can find all the details on the Raspberry Pi website, but here are the highlights:</p><p>你可以在Raspberry Pi网站上找到所有细节，但以下是亮点：</p><p> The cheapest CM4 is the Lite version with 1 GB of RAM, no wireless, and no onboard storage, and that&#39;ll run just $25.</p><p>最便宜的CM4是精简版，有1 GB的内存，没有无线，也没有板载存储，售价只有25美元。</p><p> The most expensive, creme-de-la-creme version, with WiFi, Bluetooth, 8 GB of RAM, and 32 GB of faster eMMC storage, costs $90.</p><p>最贵的奶油版，配有WiFi、蓝牙、8 GB内存和更快的32 GB eMMC存储，售价90美元。</p><p> But to use the Compute Module 4, you will either need to build your own board to integrate it, or buy the Pi Foundation&#39;s new  Compute Module 4 IO Board, which is an extra $35. This board turns your Compute Module 4 into a Pi 4 on steroids, because it has all the ports on a standard model B Pi and then some. The only thing lacking is built-in USB 3.0 ports, and that&#39;s one of the differences that made me do a double-take.</p><p>但是要使用计算模块4，你要么需要自己建造一块板来集成它，要么需要购买Pi Foundation的新的计算模块4 IO板，这需要额外支付35美元。这块板把你的计算模块4变成了类固醇上的PI 4，因为它有一个标准的B型PI上的所有端口，然后还有一些端口。唯一缺少的就是内置的USB3.0端口，这也是让我仔细考虑的不同之处之一。</p><p> I remember earlier this year,  Eben Upton mentioned in a podcast that the Raspberry Pi would someday have it&#39;s PCIe 1x interface exposed directly. And now it is!</p><p>我记得今年早些时候，埃本·厄普顿(Eben Upton)在一次播客中提到，树莓PI有一天会直接暴露它的PCIe1x接口。现在就是了！</p><p>  You get this nice PCIe port on the IO board, and you can plug in any PCIe device, as long as it only uses &#39;one lane&#39; of capacity. For example, if you just want to have a couple USB 3.0 ports like you would on a model B, you can plug in an adapter like the  Syba USB 3.1 PCI express card I used:</p><p>IO板上有这个漂亮的PCIe端口，您可以插入任何PCIe设备，只要它只使用一个通道的容量即可。例如，如果您只想像在型号B上一样拥有几个USB 3.0端口，则可以插入像我使用的Syba USB 3.1 PCI Express卡那样的适配器：</p><p>  Or... if you want to get bleeding-edge performance out of disk storage, pop in an NVMe adapter with an NVMe, and enjoy the fastest disk IO ever—at least on a Raspberry Pi:</p><p>或者..。如果您想要从磁盘存储中获得最先进的性能，请使用带NVMe的NVMe适配器，并享受有史以来最快的磁盘IO-至少在Raspberry PI上是这样：</p><p>  I&#39;ll be posting a video on  my YouTube channel about all the new disk options on the Compute Module 4, so be sure to subscribe to my channel for that, but I&#39;ll talk about performance a little later in this post.</p><p>我将在我的YouTube频道上发布一段视频，介绍Compute Module 4的所有新磁盘选项，因此请务必订阅我的频道，但我将在本文稍后讨论性能。</p><p>  First, I want to talk a little bit about why the Compute Module is a complete redesign from past versions:</p><p>首先，我想稍微谈谈为什么计算模块是对过去版本的完全重新设计：</p><p> A few of the things I noted in my  Turing Pi cluster review included the lack of enough power and board space to fit in all the features the Pi 4 crams into its small package, especially the un-throttled 1.5 GHz clock of the Pi 4&#39;s system on a chip.</p><p>我在图灵PI集群评估中注意到的几件事包括，缺乏足够的电源和电路板空间来容纳PI 4塞进它的小封装中的所有功能，特别是PI 4的系统芯片的不加节流的1.5 GHz时钟。</p><p> Also, because of the physical constraints of the DIMM form factor, it would&#39;ve been impossible (at least, according to my eyes) to include all the features like WiFi, with a built-in antenna, eMMC storage, and an ethernet controller chip.</p><p>此外，由于DIMM外形的物理限制，(至少在我看来)不可能包括所有功能，如内置天线、eMMC存储和以太网控制器芯片的WiFi。</p><p> For all these reasons, and to make it easier to affix the Compute Module to different boards, a more specialized &#39;board to board&#39; connector was used. There are two of them, and they each have 100 pins, to connect power, IO, and the GPIO pins to the Compute Module:</p><p>由于所有这些原因，为了更容易地将计算模块固定到不同的主板上，使用了更专业的主板到主板的连接器。它们中有两个，每个都有100个引脚，用于将电源、IO和GPIO引脚连接到计算模块：</p><p>  One of the biggest changes from the CM3 plus and earlier is the CM4 now includes an onboard gigabit ethernet controller, so you can get the best network performance possible without a manufacturer having to include it on an external IO board or using an external adapter.</p><p>与CM3 Plus及更早版本相比，CM4最大的变化之一是现在包括一个板载千兆以太网控制器，因此您可以获得尽可能最佳的网络性能，而无需制造商将其包含在外部IO板上或使用外部适配器。</p><p>  The headline feature, though, especially for me, is the PCIe slot. But to be clear, this is the smallest PCIe flavor, with just 1 &#39;lane&#39;, or &#39;1x&#39; bandwidth available. So, not to burst your bubble, but you won&#39;t be able to use an  Nvidia RTX 3080 on your Raspberry Pi. It still won&#39;t run your favorite PC game at 8K resolution and 240 fps.</p><p>不过，头条新闻的特点，特别是对我来说，是PCIe插槽。但需要明确的是，这是最小的PCIe风格，只有1个通道或1x#39；个带宽可用。所以，我不想让你的泡沫破灭，但是你不可能在你的树莓圆周率上使用NVIDIA RTX 3080。它仍然不能在8K分辨率和240fps下运行你最喜欢的电脑游戏。</p><p>  But it  will run a lot of things. For starters, if you are in love with USB 3.0 and are sad to see it missing here, you can buy a USB 3 PCIe expansion card, but be sure it uses the VLI VL805 chipset, otherwise it might not be fully compatible with Raspberry Pi OS and you&#39;ll get stuck with USB 2.0 speeds.</p><p>但是它会运行很多东西。首先，如果你喜欢USB3.0，并为这里没有USB3.0而难过，你可以买一块USB3PCIe扩展卡，但要确保它使用的是VLI VL805芯片组，否则它可能不能完全兼容Raspberry Pi OS，你就会陷入USB2.0的速度。</p><p> I actually bought  three different PCIe USB 3.0 cards to see how they worked, and two of the three didn&#39;t provide USB 3.0 throughput for most of my devices. They kept mounting drives at USB 2.0 speeds, which was very annoying.</p><p>我实际上买了三块不同的PCIe USB3.0卡，看看它们是怎么工作的，三块卡中有两块没有为我的大多数设备提供USB3.0吞吐量。他们一直以USB2.0的速度安装驱动器，这非常烦人。</p><p>  (From left to right:) The first was a generic &#34;PCI-Experss&#34; card from  A ADWITS—and no, I that&#39;s not a typo, that&#39;s how it&#39;s spelled on the box—has the VL805 chip in it, but it only mounted a couple of my USB 3.0 drives at that rate. The others, like the fastest one I&#39;ve tested on a Pi 4, mounted as a USB 2.0 device, and was very slow, but worked fine otherwise.</p><p>(从左至右：)第一张是ADWITS的通用PCI-Experss卡--不，我不是打字错误，盒子上是这么拼的--里面有VL805芯片，但它只按这个速度安装了我的几个USB 3.0驱动器。其他的，比如我在PI 4上测试过的最快的一个，安装在USB2.0设备上，速度很慢，但除此之外工作得很好。</p><p> I had higher hopes for the  2 port Inateck card, but was nervous about the Fresco Logic chip on it. As it turns out, it had similar issues, where it would mount some drives at USB 3.0 speeds  sometimes, but not always.</p><p>我对2端口的Inateck卡寄予了更高的期望，但对上面的Fresco Logic芯片感到紧张。事实证明，它也有类似的问题，有时会以USB3.0的速度安装一些驱动器，但并不总是如此。</p><p> The best USB 3.0 card I tested was the  Syba SD-PEX20199, and it even includes a USB Type-C slot! It mounted all my devices at USB 3.0 speeds, and worked perfectly with the Raspberry Pi. Just be careful plugging in power-hungry devices; it can only put through a little power since it shares the 12v power supply with the IO board itself!</p><p>我测试的最好的USB3.0卡是Syba SD-PEX20199，它甚至包括一个USB Type-C插槽！它以USB3.0的速度安装我所有的设备，并且与树莓PI完美配合。只需小心插入耗电设备；由于它与IO板本身共用12V电源，因此只能接通少量电源！</p><p>  The thing I was most excited about was NVMe support. I had to find out if an NVMe drive attached directly to the Raspberry Pi&#39;s PCIe bus would be faster than one connected through a USB 3.0 slot.</p><p>我最兴奋的是NVMe的支持。我必须弄清楚，直接连接到Raspberry PI的PCIe总线上的NVMe驱动器是否会比通过USB3.0插槽连接的驱动器速度更快。</p><p> So I plugged my  XPG SX6000 drive into  this PCIe to NVMe adapter and... nothing.</p><p>所以我把我的XPG SX6000驱动器插入这个PCIe转NVMe适配器，然后...。没什么。</p><p>  I should note here that NVMe support is  not enabled out of the box on Raspberry Pi OS. You have to run the command  modprobe nvme-core and then reboot to enable the NVMe kernel module.</p><p>我应该在这里指出，在Raspberry PI OS上没有启用开箱即用的NVMe支持。您必须运行命令modProbe NVMe-core，然后重新引导以启用NVMe内核模块。</p><p> Anyways, I could use the command  lspci and see the NVMe controller from Realtek was at least recognized, but the drive itself wouldn&#39;t show up, and I found some weird errors in the system&#39;s logs using  dmesg:</p><p>无论如何，我可以使用命令lspci来查看来自Realtek的NVMe控制器至少可以识别，但是驱动器本身不会出现，而且我在使用dmesg：的系统日志中发现了一些奇怪的错误：</p><p>  So I bought another spare NVMe drive for testing, the  Samsung 970 EVO Plus, which is a bit more expensive than the XPG drive. I popped it in the adapter, and booted the Pi.</p><p>所以我买了另一个备用的NVMe光驱进行测试，三星970EVO Plus，它比XPG光驱要贵一点。我把它插进适配器，然后启动PI。</p><p> Bingo! I was able to see the device using  lsblk, so I formatted it and mounted it for testing.</p><p>对啰!。我可以使用lsblk查看设备，所以我对其进行了格式化并挂载以供测试。</p><p> And let me tell you, it is  fast. You&#39;re hearing it here, first. The Raspberry Pi Compute Module 4 offers the fastest disk IO of any Raspberry Pi yet.</p><p>让我告诉你，它是很快的。你先在这里听到这句话。Raspberry PI计算模块4提供迄今所有Raspberry PI中最快的磁盘IO。</p><p>   You can see the performance of USB 3.0 or NVMe drives is far beyond that of onboard eMMC or microSD cards. SSDs are incredibly fast for sequential writes for large files, but what really sets this Pi apart is the ability to get native NVMe performance, which more than doubles the 4K performance over a USB 3.0-attached drive—check out that 4K random write speed!</p><p>您可以看到，USB 3.0或NVMe驱动器的性能远远超过板载eMMC或microSD卡。对于大文件的顺序写入，固态硬盘的速度快得令人难以置信，但真正让这款PI与众不同的是获得原生NVMe性能的能力，这比连接USB 3.0的驱动器的4K性能提高了一倍多-来看看4K的随机写入速度吧！</p><p> Sadly, you can&#39;t use an NVMe drive as a boot volume, at least not yet. I think it would be awesome if I could use a few Lite CM4s with NVMe drives in a tiny cluster that would absolutely knock the socks off the  Turing Pi cluster I built earlier this year.</p><p>遗憾的是，您不能将NVMe驱动器用作启动卷，至少现在还不能。我认为如果我能在一个很小的集群中使用几个带有NVMe驱动器的LiteCM4，那就太棒了，这绝对会让我在今年早些时候构建的图灵PI集群大吃一惊。</p><p> Speaking of, I heard from  Turing Machines that they  do plan on building a new &#39;version 2&#39; board with full support for the Compute Module 4, and I can&#39;t wait to see how it turns out!</p><p>说到这里，我从图灵机那里听说，他们确实计划建造一个完全支持计算模块4的新版本2&39；板，我迫不及待地想知道结果会是什么！</p><p>  All right, so you can get USB or NVMe over the PCIe bus, but what about upgraded video cards?</p><p>好的，那么你可以通过PCIe总线获得USB或NVMe，但是升级后的视频卡呢？</p><p> Well, there  are some slower PCI video cards that work with just a 1x bus, but most of them either have no drivers for Linux (so they wouldn&#39;t work with Raspberry Pi OS), or if they  do have Linux drivers, the drivers are only available for &#39;x86&#39; processors. The Pi uses an &#39;arm&#39; processor, which would not work with the x86 drivers.</p><p>当然，也有一些速度较慢的PCI显卡只在1X总线上运行，但它们中的大多数要么没有Linux驱动程序(因此它们不能在Raspberry PI OS上运行)，要么如果它们有Linux驱动程序，那么这些驱动程序只适用于x86处理器。PI使用ARM处理器，该处理器不能与x86驱动程序一起使用。</p><p> Anyways, in all my searching, I could only find  one PCI video card that seems like it would be hardware-compatible with the Compute Module 4, the  ZOTAC GeForce GT 710. Note that I said  hardware compatible. The graphics chip has Linux drivers, but only for X86. There might be a way to get it running, but I&#39;m not sure. What do you think? Leave a comment if you want me to try to buy one of these cards and test it out on the Pi!</p><p>无论如何，在我所有的搜索中，我只能找到一块PCI显卡，看起来它似乎与计算模块4-Zotac GeForce GT710硬件兼容。请注意，我说的是硬件兼容。图形芯片有Linux驱动程序，但仅适用于X86。也许有办法让它运行起来，但我不确定。你认为如何？如果您想让我尝试购买其中一张卡并在PI上进行测试，请留下您的评论！</p><p>  There are a number of other adapters you can get for PCIe, including SATA adapters for hard drives and SSDs, sound cards, printer ports, network adapters, and even old parallel port adapters! The most important thing to look at is whether the card has Linux support. Some things are supported out of the box, but for other things, you need to install a driver, and it has to be compatible with not only  Linux, but also the ARM processor architecture.</p><p>您还可以为PCIe购买许多其他适配器，包括用于硬盘和SSD的SATA适配器、声卡、打印机端口、网络适配器，甚至是旧的并行端口适配器！需要查看的最重要的事情是该卡是否支持Linux。有些东西是开箱即可支持的，但对于其他东西，您需要安装一个驱动程序，它不仅必须与Linux兼容，而且还必须与ARM处理器体系结构兼容。</p><p>  The other headline feature compared to the older Compute Modules is the inclusion of onboard WiFi  and Gigabit Ethernet. You can choose whether to get Wifi and Bluetooth, but all versions come with gigabit ethernet built in, courtesy of this little Broadcom chip:</p><p>与较旧的计算模块相比，另一个主要功能是包含板载WiFi和千兆以太网。你可以选择是否使用Wifi和蓝牙，但所有版本都内置了千兆位以太网，由这个小小的Broadcom芯片提供：</p><p>  The CM4 performs just as well as a Pi 4 model B in my testing.</p><p>在我的测试中，CM4的性能和PI4型B一样好。</p><p>  The wired network gets 942 Mbps, which is about as fast as I&#39;ve seen on my home gigabit network, and it&#39;s infinitely faster than the older Compute Module boards—which have no onboard networking at all! Even with the Turing Pi cluster board, it only gave you 100 Mbps per Compute Module, so this alone is a HUGE improvement.</p><p>有线网络的速度为942 Mbps，这大约是我在我家千兆网络上看到的速度，而且比老式的计算模块板快得多--后者根本没有板载网络！即使使用图灵PI集群板，它也只为每个计算模块提供100 Mbps，因此仅此一项就是一个巨大的改进。</p><p> And wireless, which is also not available at all on older Compute Module versions, gets up to 80 Mbps on my home 802.11ac network. Now, here&#39;s where it gets a little more interesting. The CM4 is the first Pi of any type to offer a  U.FL antenna connector. Because many people who integrate the CM4 into a device may put it inside a metal enclosure, if they want WiFi to work, they need to attach an external antenna.</p><p>而无线，这在较旧的计算模块版本上也是完全不可用的，在我家的802.11ac网络上最高可达80 Mbps。现在，这里是它变得更有趣的地方。CM4是第一个提供U.FL天线连接器的任何类型的PI。因为许多将CM4集成到设备中的人可能会把它放在金属外壳内，如果他们想让WiFi正常工作，他们需要附加一个外部天线。</p><p> The Pi Foundation will sell you a certified antenna you can plug into this tiny connector, and that antenna can then be mounted somewhere to allow the Pi to still get a solid WiFi connection.</p><p>PI基金会将向您出售一种经过认证的天线，您可以将其插入到这个小小的连接器中，然后将该天线安装在某个地方，以便PI仍然可以获得稳定的WiFi连接。</p><p>  But  technically (and you didn&#39;t hear this from me!), you could grab any standard U.FL antenna like the  Highfine U.FL antenna I have, and use it.</p><p>但从技术上讲(你不是从我这里听到的！)，你可以拿起任何标准的ufl天线，比如我拥有的Highfineufl天线，然后使用它。</p><p> To enable the antenna connector (and disable the built-in PCB antenna), you need to edit the  /boot/config.txt file on your Pi, and add the following line, then reboot the Pi:</p><p>要启用天线连接器(并禁用内置PCB天线)，您需要编辑PI上的/boot/config.txt文件，并添加以下行，然后重新启动PI：</p><p>  I did some testing with this antenna just to compare the tiny built in triangle antenna on the PCB, and the results surprised me.</p><p>我用这个天线做了一些测试，只是为了比较PCB上的微型内置三角形天线，结果让我大吃一惊。</p><p>  With the built-in PCB antenna, the signal level was -43 dBm (measured with  cat /proc/net/wireless), with a quality rating of 67/70 (measured with  iwlist wlan0 scanning). And that&#39;s pretty respectable, even though my router is only about 20 feet away. With the external antenna, I could get -40 dBm (with a quality rating of 70/70), but that was only after I adjusted its position a bit to get the best possible signal.</p><p>使用内置PCB天线，信号电平为-43dBm(用cat/proc/net/Wireless测量)，质量等级为67/70(用iwlist wlan0扫描测量)。虽然我的路由器只有20英尺远，但这是相当体面的。用外置天线，我可以得到-40dBm(质量等级为70/70)，但那是在我稍微调整了一下它的位置以获得尽可能好的信号之后。</p><p> If I unplugged the antenna, the signal was terrible, at -74 dBm with a quality of 36/70, and it could only do about 6 Mbps. So the onboard antenna is a great design—as long you&#39;re not enclosing the Pi in a metal box or faraday cage!</p><p>如果我拔下天线，信号很糟糕，是-74dBm，质量是36/70，只能做到大约6 Mbps。因此，机载天线是一个伟大的设计-只要你没有把圆周率的圆周率封装在一个金属盒子或法拉第笼子里！</p><p> So for both wireless and wired networking, the CM4 is on par with the regular Pi 4, and far beyond the capability of earlier Compute Modules—it surprised me how much functionality is crammed into such a tiny board.</p><p>因此，无论是无线网络还是有线网络，CM4都与普通的PI 4不相上下，远远超过了早期的计算模块的能力-让我惊讶的是，这么小的电路板上塞满了这么多功能。</p><p>  If you&#39;ve used the Pi 4, you know what you&#39;ll be getting with the CM4, performance-wise. But if you used the Compute Module 3+ or an older version, the Compute Module 4 is a huge leap in performance, for a few different reasons.</p><p>如果你用过PI 4，你就知道CM4在性能上会得到什么。但是如果你使用的是Compute Module 3+或更老的版本，由于几个不同的原因，Compute Module 4在性能上有了巨大的飞跃。</p><p> First, the CPU clock was increased from an underclocked 1.2 GHz to 1.5 GHz. Second, the CPU is upgrade from a Cortex A53 to an A72, and that means there&#39;s more bandwidth, more caches, and all-around better performance even at the same clock speeds.</p><p>首先，CPU时钟从欠频的1.2 GHz增加到1.5 GHz。其次，CPU从Cortex A53升级到A72，这意味着即使在相同的时钟速度下，也会有更多的带宽、更多的缓存和全面更好的性能。</p><p> But don&#39;t take my word for it. Here are some benchmarks between the Compute Module versions:</p><p>但是不要轻信我的话。以下是计算模块版本之间的一些基准测试：</p><p>  These three benchmarks represent some real-world scenarios that require good CPU performance to run well. In every case, the Compute Module 4 is  twice as fast as the previous 3+. It&#39;s barely even a contest.</p><p>这三个基准代表了一些需要良好的CPU性能才能正常运行的真实场景。在每种情况下，计算模块4的速度都是前3+的两倍。这甚至算不上是一场比赛。</p><p> In real-world use, for things like web browsing and playing games, the difference isn&#39;t usually as stark, but it does feel a lot faster, and every time I go back to my 3+ I realize how big the performance gap is.</p><p>在实际使用中，比如浏览网页和玩游戏，两者之间的区别通常不会那么明显，但感觉上要快得多，而且每次我回到我的3+版时，我都会意识到性能差距有多大。</p><p>   Some people spend a bit of time working with external storage and try to get the best disk performance possible. But for most people considering the Compute Module (especially for embedded use), the built-in eMMC offers the best performance for the dollar.</p><p>有些人花了一些时间处理外部存储，并试图尽可能获得最佳的磁盘性能。但对于大多数考虑使用计算模块(尤其是嵌入式使用)的人来说，内置的eMMC提供了最划算的性能。</p><p> The Pi engineers increased the eMMC bus from 4 bits to  8 bits, so you can get more bandwidth out of the eMMC storage. And it really shows in the benchmarks I ran:</p><p>PI工程师将eMMC总线从4位增加到8位，因此您可以从eMMC存储中获得更多带宽。我运行的基准测试确实显示了这一点：</p><p>  Random IO is  twice as fast on the CM4 than it was on the CM3. And sequential performance is a way better too. The Compute Module 3&#39;s eMMC had slower sequential performance than the fastest microSD cards I tested, but the CM4 is neck-in-neck, meaning there are no tradeoffs with eMMC storage on the Compute Module anymore.</p><p>CM4上的随机IO速度是CM3上的两倍。顺序性能也是一种更好的方式。与我测试的最快的microSD卡相比，Compute Module 3的eMMC的顺序性能较慢，但CM4并驾齐驱，这意味着计算模块上的eMMC存储不再有任何折衷。</p><p> And since random IO is more important for most computing tasks, that makes built-in eMMC the best option for most people, especially since it keeps the whole compute module package tiny, so it&#39;ll fit almost anywhere.</p><p>由于随机IO对于大多数计算任务更加重要，这使得内置eMMC成为大多数人的最佳选择，特别是因为它使整个计算模块包变得很小，所以它几乎可以适用于任何地方。</p><p> Now, if you need to flash a new OS to the eMMC, it&#39;s a little more complicated than doing the same thing with a microSD card, but thanks to Raspberry Pi&#39;s   usbboot utility, it&#39;s not too hard as long as you have another computer or Pi handy. I&#39;ll cover how to do that in a later video.</p><p>现在，如果你需要将新的操作系统闪存到eMMC上，这比用microSD卡做同样的事情要复杂一些，但多亏了Raspberry PI的usbboot实用程序，只要你手边有另一台电脑或PI，就不会太难。我将在后面的视频中介绍如何做到这一点。</p><p>  Speaking of USB boot, what about booting the Compute Module from a USB drive? After all, I did a  whole post on how to USB boot with the Pi 4. Can you do it on the Compute Module? Well, yes, but if you want USB 3.0 speeds, you&#39;ll need to drop a PCIe USB adapter card in the single PCI express slot and plug in your drive through that. The ports from the Pi itself on the IO board are USB 2.0 only.</p><p>说到USB启动，从USB驱动器启动计算模块怎么样？毕竟，我做了一整篇关于如何用PI 4引导USB的文章。你能在计算模块上做到吗？嗯，是的，但是如果你想要USB 3.0的速度，你需要把一块PCIe USB适配卡放在单个PCI express插槽中，然后通过它插入你的驱动器。IO板上PI本身的端口仅为USB 2.0。</p><p> But it works just as well as on the Pi 4, assuming you use a USB 3.0 adapter.</p><p>但是，假设您使用的是USB3.0适配器，它在PI 4上的工作效果与PI4一样好。</p><p> I was  really hoping to be able to boot the Pi off an NVMe and do some more testing that way, but alas that is not yet supported, and if you try it with a Lite Compute Module, the Pi just sits there looking aimlessly at microSD, then USB, then microSD, forever:</p><p>我真的很希望能够通过NVMe启动PI并以这种方式进行更多测试，但可惜这还不受支持，如果您使用Lite Compute Module尝试，PI只是漫无目的地坐在那里看着microSD，然后是USB，然后是microSD，永远：</p><p>  Technically you can still boot off an NVMe, but only if you put it in a USB 3.0 adapter, plugged into a USB 3.0 PCI adapter... but that&#39;s not the same as booting directly off an NVMe drive and you miss out on a lot of performance!</p><p>从技术上讲，你仍然可以从NVMe启动，但前提是你要把它放到USB3.0适配器上，插到USB3.0PCI适配器上……。但这与直接从NVMe驱动器启动不同，您会错过很多性能！</p><p>  One other thing I wanted to check is how well the Compute Module performs as an NFS (Networked File System) server. I currently have an old 2011 Mac mini that I still use to store many terabytes of old video files and backups of my computers, but it&#39;s so old it&#39;s not even supported by Apple anymore.</p><p>我想检查的另一件事是计算模块作为NFS(网络文件系统)服务器的性能如何。我目前有一台2011年的旧Mac mini，我仍然在用它来存储数TB的旧视频文件和电脑备份，但它太旧了，苹果甚至不再支持它了。</p><p> So I wanted to see if the Compute Module could be faster than the ten-year-old Mac mini for file storage, and—spoiler alert—it is!</p><p>所以我想看看Compute Module在文件存储方面是否能比十年前的Mac mini更快，而且--剧透提醒--的确如此！</p><p>  On the Mac mini, the fastest consistent write speed I could get is around 35 MB per second, mostly because the drives are all attached to old USB 2.0 ports. On the Pi, if I wrote to either an external USB 3.0 drive or an NVMe drive, I could write over the network at about 70 MB per second (2x faster than the old Mac mini).</p><p>在Mac mini上，我能获得的最快一致写入速度约为每秒35MB，这主要是因为驱动器都连接到了旧的USB2.0端口。在PI上，如果我写入外部USB3.0驱动器或NVMe驱动器，我可以通过网络以大约每秒70MB的速度写入(比旧的Mac mini快2倍)。</p><p> Now, a  brand new Mac mini would saturate the network&#39;s bandwidth and give me somewhere around 100 MB per second, but that would also cost at least $800, and that&#39;s a lot to pay to get that extra 30 MB per second.</p><p>现在，一台全新的Mac mini将使网络带宽饱和，每秒约为100MB，但那也至少要800美元，而要获得额外的每秒30MB，这是一笔很大的费用。</p><p>  All right, so enough of the Compute Module itself, it is, to put it in the words of Steve Jobs, a &#39;screamer&#39; compared to all the previous Pis.</p><p>好了，用史蒂夫·乔布斯(Steve Jobs)的话说，计算模块本身已经足够了，与之前所有的PI相比，它简直就是一个尖叫者。</p><p>   The Compute Module 4 IO board has a few new tricks up its sleeve, too.</p><p>Compute Module 4 IO板也有一些新的诀窍。</p><p> Not only does it have all the same breakouts and connections that the old IO board had, it also has PoE (Power over Ethernet) support included standard, so you can power the board from an Ethernet cable.</p><p>它不仅具有与旧IO板相同的所有分支和连接，还具有标准的PoE(以太网供电)支持，因此您可以通过以太网电缆为该板供电。</p><p> We&#39;ve already covered the PCIe slot, but right above it is a 4-pin PSU connector that can be used to provide power to accessories, as well as a 4-pin fan connector that can power and control a fan.</p><p>我们已经覆盖了PCIe插槽，但就在它的正上方是一个可用于为附件供电的4针PSU连接器，以及一个可为风扇供电和控制风扇的4针风扇连接器。</p><p> Down along the bottom, there&#39;s a 12v barrel plug power jack. I&#39;m using this jack to power the IO board using a generic  TMEZON 12v 2A power adapter. Any power adapter should work as long as it supplies 12v at 2A or more, and has a 2.1mm X 5.5mm barrel plug.</p><p>沿着底部，有一个12V的桶插头电源插孔。我正在使用此插孔通过通用TMEZON 12V 2A电源适配器为IO板供电。任何电源适配器只要在2A或更高电压下提供12V电压，并且具有2.1 mm X 5.5 mm桶插头，即可正常工作。</p><p> Then there&#39;s a microSD card slot for use with the Compute Module Lite version (the slot isn&#39;t recognized at all for eMMC versions), two USB 2.0 ports (along with a header for two more USB ports), and the RJ45 network jack.</p><p>然后还有一个用于Compute Module Lite版本的microSD卡插槽(该插槽在eMMC版本中根本无法识别)、两个USB 2.0端口(以及另外两个USB端口的接头)和RJ45网络插孔。</p><p> It also has two full-size HDMI ports so you can drive up to two external displays.</p><p>它还具有两个全尺寸HDMI端口，因此您最多可以驱动两个外部显示器。</p><p>  It&#39;s interesting that they&#39;re  full-size, because now when I&#39;m switching between my Pi projects I have to deal with the following:</p><p>有趣的是，它们都是全尺寸的，因为现在当我在PI项目之间切换时，我必须处理以下问题：</p><p>  Go figure! People who complain about USB-C dongles have not had to put up with testing multiple generations of Raspberry Pi :)</p><p>去想一想吧！抱怨USB-C加密狗的人不必忍受测试多代树莓PI：)</p><p> There&#39;s a built in RTC, or Real-Time Clock, with a slot for a standard CR2032 backup battery.</p><p>有一个内置的RTC或实时时钟，带有一个标准CR2032备用电池的插槽。</p><p> And there&#39;s a standard HAT (&#39;Hardware Attached on Top&#39;) connector, and it allows you to interface with the Pi&#39;s GPIO. It has mounting holes in the same place as a standard Pi B model, so you can mount HATs within the board&#39;s footprint. And finally there are some display and camera connectors along the side and top edge, along with a set of jumpers to help when flashing an eMMC module or to disable firmware updates.</p><p>还有一个标准的HAT(硬件连接在顶部)连接器，它允许您与PI的GPIO接口。它在与标准PI B模型相同的位置有安装孔，因此您可以在板的占地面积内安装帽子。最后，在侧面和顶部边缘有一些显示器和摄像头连接器，以及一组跳线，帮助您在刷新eMMC模块或禁用固件更新时提供帮助。</p><p> There are two things I think I could call out as downsides to the IO board and Compute Module board-to-board designs: first, the IO board is pretty large. I understand why, since it support  every feature of the CM4, including mounting full-size Pi HATs, but it would be nice if it took up a little less desk space even if a few features were dropped.</p><p>对于IO板和计算模块板对板设计的缺点，我认为可以指出两点：第一，IO板非常大。我理解为什么，因为它支持CM4的所有功能，包括安装全尺寸PI帽子，但如果它占用的桌子空间少一点就好了，即使去掉了几个功能。</p><p> Second, having two 100 pin board-to-board connectors close together makes attaching and removing the Compute Module a slight bit more tricky than it should be. You&#39;re  supposed to pull straight up to detach the module, but it&#39;s pretty much impossible to do that unless you use spudgers. With your fingers, you kind of have to pry up one side first, and then the module pops out. Plugging it in is a little easier, since you can just push down with equal pressure on both sides.</p><p>其次，将两个100针的板对板连接器靠得很近会使连接和移除计算模块比正常情况下稍微复杂一些。您应该拉直向上，以分离模块，但它几乎是不可能做到的，除非你使用推土机。用你的手指，你必须先撬开一侧，然后模块就会弹出来。插上插头会容易一些，因为你可以用两边相等的压力向下推。</p><p>  There are a ton of other little details that I haven&#39;t had time to convey in this post, but I think the Pi Foundation did a great job with this board, given the constraints of the form factor and price. I&#39;m sure keeping the new version starting at the same price as the old version was no small feat!</p><p>还有很多其他的小细节我没有时间在这篇文章中传达，但我认为PI基金会在这个董事会上做得很好，考虑到形式因素和价格的限制。我敢肯定，保持新版本的起步价与旧版本相同是不小的壮举！</p><p>  I&#39;m really happy with the Compute Module 4. It delivers on the promise of native PCIe support, and uses a form factor that will fit well into embedded systems, with some great new features like onboard WiFi, Bluetooth, and Etherne</p><p>我对Compute Module 4真的很满意。它兑现了原生PCIe支持的承诺，并采用了非常适合嵌入式系统的外形规格，具有一些很棒的新功能，如板载WiFi、蓝牙和以太网。</p><p>......</p><p>.</p></div><div id="story_share_this"><div class="sharethis-inline-share-buttons"></div></div><div class="text-break sotry_link page_narrow"><a target="_blank" href="https://www.jeffgeerling.com/blog/2020/raspberry-pi-compute-module-4-review">https://www.jeffgeerling.com/blog/2020/raspberry-pi-compute-module-4-review</a></div><div class="story_tags page_narrow"><button type="button" class="btn btn-light my_tag"><a href="/tag/模块/">#模块</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/pi/">#pi</a></button></div></div><div class="my_movie_list_item shadow p-3 mb-5 bg-white rounded"><button type="button" class="btn btn-link my_tag"><a href="/tag/web2.0/">#web2.0</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/google/">#google</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/设计/">#设计</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/游戏/">#游戏</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/创意/">#创意</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/apple/">#apple</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/苹果/">#苹果</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/摄影/">#摄影</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/软件/">#软件</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/美国/">#美国</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/iphone/">#iphone</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/图片/">#图片</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/手机/">#手机</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/视频/">#视频</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/广告/">#广告</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/免费/">#免费</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/谷歌/">#谷歌</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/网站/">#网站</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/windows/">#windows</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/微软/">#微软</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/下载/">#下载</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/firefox/">#firefox</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/音乐/">#音乐</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/linux/">#linux</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/blog/">#blog</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/博客/">#博客</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/程序/">#程序</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/艺术/">#艺术</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/web/">#web</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/wordpress/">#wordpress</a></button></div></div></div><div id="my_footer"><div class=""><a href="/tags/">tags</a> <a href="/users/">users</a></div>&copy; 2020 diglog.com </div></div></body></html>