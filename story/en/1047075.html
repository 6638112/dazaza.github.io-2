<!doctype html><html lang="zh-hans"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Scala 3的金属 Metals with Scala 3</title><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"><link rel="stylesheet" href="/img/css.css?random="><link data-rh="true" rel="icon" href="/img/favicon.ico"/><script data-ad-client="ca-pub-6067137220025946" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script type="text/javascript" src="https://platform-api.sharethis.com/js/sharethis.js#property=5effb96910009800120b8d4d&product=inline-share-buttons" async="async"></script>
<script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?03c1a0f31299b4a2fbb83c34d6beaac9";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script></head><body><div id="my_header"><div class="container"><nav class="navbar navbar-expand-lg"><a class="navbar-brand" href="/"><img alt="diglog" src="/img/logo.v1.gif" class="rounded-sm"></a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarNavAltMarkup"><div class="navbar-nav"></div></div></nav></div></div><div class="container"><div id="my_content"><h1 class="page_narrow">Metals with Scala 3<br/>Scala 3的金属 </h1><div class="row"><div class="col-lg-12 col-12"><div class="my_story_list_item shadow p-3 mb-5 bg-white rounded"><div class="story_page_pub_time page_narrow">2021-02-06 19:47:47</div><div class="story_img_container"><a href="http://img2.diglog.com/img/2021/2/0ae762781a697dc1bdf6581a0d7e87f5.jpeg"><img src="http://img2.diglog.com/img/2021/2/0ae762781a697dc1bdf6581a0d7e87f5.jpeg" class="img-fluid my_story_img" onerror="this.style.display='none'"></a></div><div class="page_narrow text-break page_content"><p>At the end of 2020, the work on the upcoming release of Scala 3 is intensifying. This is the perfect time to get to know, explore, and eventually add Metals to your toolkit!</p><p>到2020年底，即将发布的Scala 3的工作正在加强。这是了解，探索并最终将Metals添加到您的工具箱的最佳时机！</p><p>  If you are already familiar with Metals, you can proceed to  Scala 3 project setup with Metals.</p><p>  如果您已经熟悉Metals，则可以使用Metals进行Scala 3项目设置。</p><p> Regardless of whether you are a seasoned Scala developer or if you start your journey with this programming language just now, there is a great chance that you began with IntelliJ as your IDE. Through the  Scala plugin, IntelliJ provides features that are very useful while working with Scala.</p><p> 无论您是一位经验丰富的Scala开发人员，还是现在就开始使用这种编程语言开始旅程，都有很大的机会将IntelliJ作为您的IDE。通过Scala插件，IntelliJ提供了在使用Scala时非常有用的功能。</p><p> Though the most popular, IntelliJ comes with its disadvantages. It is heavyweight and it can be slow. Metals is the alternative that contains all the functionalities that you need to get the work done and at the same time, it is lightweight and fast. This is why we observe the increase in the number of Metals users in spite of the fact that this is a pretty recently created open-source project. Developers expect their IDE to make their workflow productive and seamless. Metals does this job perfectly.</p><p> 尽管最流行，但IntelliJ也有其缺点。它很重，可能很慢。金属是一种替代方案，它包含完成工作所需的所有功能，并且轻巧，快捷。这就是为什么尽管这是一个新近创建的开源项目，但我们仍观察到Metals用户数量增加的原因。开发人员期望他们的IDE使他们的工作流高效且无缝。金属完美地完成了这项工作。</p><p> Thanks to Metals we can have support for Scala in any popular text editor such as VS Code, Sublime Text, Vim, Emacs, and others, while the Scala plugin mentioned earlier is a tool dedicated exclusively to IntelliJ. What exactly allows Metals to so seamlessly integrate with a range of different text editors?</p><p> 感谢Metals，我们可以在任何流行的文本编辑器（例如VS Code，Sublime Text，Vim，Emacs等）中支持Scala，而前面提到的Scala插件是专用于IntelliJ的工具。是什么让Metals如此无缝地与各种不同的文本编辑器无缝集成？</p><p>  The main driving force behind Metals is the  Language Server Protocol ( LSP) which allows handling language syntax and semantics independently of the editor presentation. Metals is a language server itself. Any editor that supports LSP is able to reuse the Metals language server to provide Scala support. Some editors can be further modified via extensions to provide an easier setup of the server. Metals, among others, has  VS Code and  Vim extensions.</p><p>  Metals背后的主要驱动力是语言服务器协议（LSP），该协议允许独立于编辑器呈现方式处理语言语法和语义。 Metals是语言服务器本身。任何支持LSP的编辑器都可以重用Metals语言服务器来提供Scala支持。可以通过扩展对某些编辑器进行进一步修改，以简化服务器设置。金属等具有VS Code和Vim扩展。</p><p> Besides  LSP, Metals also uses  Build Server Protocol ( BSP) which facilitates communication between build tools and IDEs. Thanks to the BSP client, which in this case is the Metals language server, editors can easily communicate with a BSP server to compile source code, run tests, etc. Check out this  article if you want to learn more about BSP.</p><p> 除了LSP，Metals还使用构建服务器协议（BSP），该协议可促进构建工具与IDE之间的通信。借助BSP客户端（在本例中为Metals语言服务器），编辑人员可以轻松地与BSP服务器进行通信以编译源代码，运行测试等。如果您想了解有关BSP的更多信息，请查阅本文。 </p><p> The main BSP server used by Metals is  Bloop which is used to compile, test, and run Scala code. It can be easily integrated with different IDEs and build tools. Learn more about it  here.</p><p>Metals使用的主要BSP服务器是Bloop，用于编译，测试和运行Scala代码。它可以轻松地与不同的IDE和构建工具集成。点击此处了解详情。</p><p> As you can already see,  LSP and  BSP are the tools that allow Metals to provide support for so many editors and build tools at once.</p><p> 正如您已经看到的那样，LSP和BSP是使Metals能够同时为众多编辑器和构建工具提供支持的工具。</p><p>  Though Metals can be used in a range of different text editors, Visual Studio Code is probably the most popular and provides the best beginner-friendly experience for users. Because of that, the examples are going to be coming from this editor. In VS Code you can get Metals like any other extension — install it via the VS Code marketplace. The exact installation tutorials for the editors, namely VS Code, Vim, Sublime Text, Emacs, and Eclipse can be found in the  documentation.</p><p>  尽管可以在各种不同的文本编辑器中使用Metals，但是Visual Studio Code可能是最受欢迎的，并且为用户提供了最佳的初学者友好型体验。因此，示例将来自此编辑器。在VS Code中，您可以像其他任何扩展程序一样获得Metals-通过VS Code市场进行安装。可以在文档中找到针对编辑器的确切安装教程，即VS Code，Vim，Sublime Text，Emacs和Eclipse。</p><p>  The following instructions will explain how to set up a project from scratch. If you want to import the existing project, it can be done with Metals very easily as well. To do so, open the project directory. Then you will be prompted to import it. Do this and the project will be ready to work with!</p><p>  以下说明将说明如何从头开始设置项目。如果要导入现有项目，也可以使用Metals轻松完成。为此，请打开项目目录。然后将提示您导入它。这样做，该项目就可以使用了！</p><p> Metals uses  giter8 to provide a number of predefined templates that can be used to set up a new Scala project. One of them is a Scala 3 template. Let’s go through the process of creating a new project with Metals step by step.</p><p> Metals使用giter8提供了许多预定义的模板，这些模板可用于设置新的Scala项目。其中之一是Scala 3模板。让我们逐步完成使用Metals创建新项目的过程。</p><p> First, open an empty workspace, select the Metals extension and press the New Scala project button. Alternatively, you can open the command palette with  Ctrl+Shift+P ( Cmd+Shift+P) and type  Metals: New Scala project .</p><p> 首先，打开一个空的工作区，选择Metals扩展，然后按New Scala项目按钮。或者，您可以使用Ctrl + Shift + P（Cmd + Shift + P）打开命令面板，然后键入Metals：New Scala project。</p><p>  In a couple of seconds, after the Metals language server starts, the dropdown with all available project templates will appear. In this example, we are going to select the Scala 3 template. You will be prompted to select the directory that you want the project to be created in. By default, it shows you the parent of the current directory. The last thing you will need to do is to choose the name or use the default one suggested by Metals.</p><p>  在几秒钟之后，Metals语言服务器启动后，将出现带有所有可用项目模板的下拉列表。在此示例中，我们将选择Scala 3模板。系统将提示您选择要在其中创建项目的目录。默认情况下，它将显示当前目录的父目录。您需要做的最后一件事是选择名称或使用Metals建议的默认名称。 </p><p>  Now, we are able to start working on your new Scala 3 project. The only thing, that is needed to utilize all of the Metals features, is to import the build definition which you will be prompted to do in a popup window. In the case of a current project, the build is defined with  sbt.</p><p>现在，我们可以开始进行新的Scala 3项目了。要利用所有“金属”功能，唯一需要做的就是导入生成定义，然后将在弹出窗口中提示您进行定义。对于当前项目，将使用sbt定义构建。</p><p>  In a while, you will be able to run and develop code with Metals. Now open  src/main/scala/Main.scala file. One of the first features that can be noticed is  run | debug located above the main method, which will allow you to run your program by clicking on it.</p><p>  不久之后，您将能够使用Metals运行和开发代码。现在打开src / main / scala / Main.scala文件。可以注意到的第一个功能是运行|位于main方法上方的debug，它将允许您通过单击它来运行程序。</p><p>    For now, Metals supports Scala 3 versions up to  3.0.0-M3 which will be released any time now. As you can see in the build definition below, the project from our example uses  3.0.0-M2. You can usually expect the support for a new version within the next day of the release.</p><p>    目前，Metals支持高达3.0.0-M3的Scala 3版本，该版本现在可以随时发布。如您在下面的构建定义中所见，我们示例中的项目使用3.0.0-M2。通常，您可以在发布的第二天获得对新版本的支持。</p><p>   Scala 3 comes with plenty of awesome features. Worksheets are a great tool that can be used to experiment because they let you quickly evaluate Scala expressions. The worksheet is a file with a format  *.worksheet.sc. Create it by typing  Metals: Create Worksheet in the command palette.</p><p>   Scala 3具有许多很棒的功能。工作表是一个很好的工具，可以用来进行实验，因为它可以让您快速评估Scala表达式。该工作表是具有* .worksheet.sc格式的文件。通过在命令面板中键入Metals：Create Worksheet来创建它。</p><p>  As a new feature, traits in Scala 3 now  can have parameters. Paste the code below into the worksheet to try it out.</p><p>  作为一项新功能，Scala 3中的特征现在可以具有参数。将下面的代码粘贴到工作表中以进行尝试。</p><p>  On save, the code within the worksheet will be instantly evaluated. As we can see the evaluated class field matches with the argument provided to the trait.</p><p>  保存后，将立即评估工作表中的代码。如我们所见，评估的类字段与提供给特征的参数匹配。</p><p>   Editors are expected to provide a couple of functionalities which are necessary for developers in their day-to-day job. Let’s find out which of them work with Scala 3!</p><p>   编辑人员应提供一些功能，这对于开发人员的日常工作是必不可少的。让我们找出其中哪些可与Scala 3配合使用！ </p><p> First of all, let’s create a new file called  ColorEnum.scala alongside  Main.scala. The file contains an example definition of an  enum which is a new feature introduced in Scala 3.</p><p>首先，让我们与Main.scala一起创建一个名为ColorEnum.scala的新文件。该文件包含枚举的示例定义，这是Scala 3中引入的新功能。</p><p>     This is a crucial functionality that lets you find the location in which a given symbol is defined. To use it in VS Code, move your mouse cursor over the symbol and press  Ctrl ( Cmd). Metals will provide a definition preview. Left-click on the symbol while still holding the key to proceed to the definition location. Alternatively, you can right-click on it and select  Go to definition.</p><p>     这是一项至关重要的功能，可让您找到定义给定符号的位置。要在VS Code中使用它，请将鼠标光标移到该符号上，然后按Ctrl（Cmd）。金属将提供定义预览。在仍然按住键的同时，在符号上单击鼠标左键以转到定义位置。或者，您可以右键单击它，然后选择“转到定义”。</p><p>   We already know how to navigate from the specific identifier to its definition. We can also utilize Metals to find all usages of a given class, method, or value. It can be accomplished in a similar way to the symbol definition navigation. Simply hold  Ctrl ( Cmd) and left-click on the definition identifier. Alternatively, you can right-click and pick  Go to references. You will be provided with all the references that can be easily previewed and navigated to.</p><p>   我们已经知道如何从特定标识符导航到其定义。我们还可以利用Metals查找给定类，方法或值的所有用法。可以通过与符号定义导航类似的方式来完成。只需按住Ctrl（Cmd）并在定义标识符上单击鼠标左键即可。或者，您可以右键单击并选择转到参考。您将获得所有可以轻松预览和浏览的参考。</p><p>   Scala 3 symbols can be already renamed as well! To rename the identifier, right-click on it and select  Rename Symbol. All the references will be changed accordingly.</p><p>   Scala 3符号也已经可以重命名！要重命名标识符，请右键单击它，然后选择“重命名符号”。所有参考将相应更改。</p><p>   In most statically typed languages like Scala, editors can suggest the name of the symbol based on the context that we are in. This is also the case with Metals and Scala 3. Once you start typing the name of the enum case, you will be able to see all the possible names of fields and methods. Though right now in Metals, only basic completions work with Scala 3, we still have to wait for the implementation of  advanced completions like for example  exhaustive match/case which could be very useful with regard to enums.</p><p>   在大多数静态类型的语言（例如Scala）中，编辑者可以根据我们所处的上下文来建议符号的名称。Metals和Scala 3也是如此。一旦开始键入枚举大小写的名称，您将能够查看字段和方法的所有可能名称。尽管目前在Metals中，只有基本补全可以在Scala 3中使用，但我们仍然必须等待高级补全的实现，例如详尽的匹配/案例，这对于枚举可能非常有用。</p><p>  As you can see, thanks to the features described earlier, working with Scala 3 is already possible in a pretty convenient way. Of course, there is a lot of work to do. What other features do we expect from Metals for Scala 3 in the near future? We can for sure expect advanced completions like for example  auto imports of classes or  exhaustive matches. In addition to that, we are still missing  symbol outline,  go to implementation, and  code actions, which would be also good to have .</p><p>  如您所见，由于前面描述的功能，使用Scala 3已经可以以非常方便的方式进行操作。当然，还有很多工作要做。在不久的将来，我们希望Metals for Scala 3有哪些其他功能？我们可以肯定会期望高级完成，例如自动导入类或详尽匹配。除此之外，我们仍然缺少符号轮廓，实现以及代码操作，这也很不错。</p><p> There is also one more feature which is not available only in the case of Scala 3 —  go-to sources. It is available for other versions of Scala and for Java though. This feature is important for troubleshooting and certainly, we will want to have it in the future.</p><p> 还有一个仅在Scala 3中不可用的附加功能-转到源。不过，它可用于其他版本的Scala和Java。此功能对于故障排除很重要，当然，我们将来会希望拥有此功能。 </p><p>  Fortunately, the work behind the support for Scala 3 in Metals is ahead of time for the Scala enthusiasts that are eager to experiment with the new features directly in their editor. Although a couple of important features are not yet supported, hopefully, they will be implemented even before the official release of Scala 3!</p><p>幸运的是，对于渴望在他们的编辑器中直接尝试新功能的Scala爱好者来说，支持Metal中的Scala 3的工作要提前。 尽管尚不支持几个重要功能，但希望它们可以在Scala 3正式发布之前实现！ </p></div><div id="story_share_this"><div class="sharethis-inline-share-buttons"></div></div><div class="text-break sotry_link page_narrow"><a target="_blank" href="https://medium.com/virtuslab/introduction-to-metals-with-scala-3-79ebf3120a95">https://medium.com/virtuslab/introduction-to-metals-with-scala-3-79ebf3120a95</a></div><div class="story_tags page_narrow"><button type="button" class="btn btn-light my_tag"><a href="/tag/scala/">#scala</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/metals/">#metals</a></button></div></div><div class="my_movie_list_item shadow p-3 mb-5 bg-white rounded"><button type="button" class="btn btn-link my_tag"><a href="/tag/web2.0/">#web2.0</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/google/">#google</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/设计/">#设计</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/创意/">#创意</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/摄影/">#摄影</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/游戏/">#游戏</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/图片/">#图片</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/软件/">#软件</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/视频/">#视频</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/手机/">#手机</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/广告/">#广告</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/iphone/">#iphone</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/网站/">#网站</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/免费/">#免费</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/下载/">#下载</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/windows/">#windows</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/微软/">#微软</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/苹果/">#苹果</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/apple/">#apple</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/blog/">#blog</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/firefox/">#firefox</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/音乐/">#音乐</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/博客/">#博客</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/wordpress/">#wordpress</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/恶搞/">#恶搞</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/qq/">#qq</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/艺术/">#艺术</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/web/">#web</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/工具/">#工具</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/分享/">#分享</a></button></div></div></div><div id="my_footer"><div class=""><a href="/tags/">tags</a> <a href="/users/">users</a></div>&copy; 2020 diglog.com </div></div></body></html>