<!doctype html><html lang="zh-hans"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>在Apple Silicon Arm M1上本地运行Homebrew</title><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"><link rel="stylesheet" href="/img/css.css?random="><link data-rh="true" rel="icon" href="/img/favicon.ico"/><script data-ad-client="ca-pub-6067137220025946" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script type="text/javascript" src="https://platform-api.sharethis.com/js/sharethis.js#property=5effb96910009800120b8d4d&product=inline-share-buttons" async="async"></script>
<script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?03c1a0f31299b4a2fbb83c34d6beaac9";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script></head><body><div id="my_header"><div class="container"><nav class="navbar navbar-expand-lg"><a class="navbar-brand" href="/"><img alt="diglog" src="/img/logo.v1.gif" class="rounded-sm"></a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarNavAltMarkup"><div class="navbar-nav"></div></div></nav></div></div><div class="container"><div id="my_content"><h1 class="page_narrow">在Apple Silicon Arm M1上本地运行Homebrew</h1><div class="row"><div class="col-lg-12 col-12"><div class="my_story_list_item shadow p-3 mb-5 bg-white rounded"><div class="story_page_pub_time page_narrow">2020-11-23 11:40:30</div><div class="story_img_container"><a href="http://img2.diglog.com/img/2020/11/adc8191db7201821bc720668d5a37017.png"><img src="http://img2.diglog.com/img/2020/11/adc8191db7201821bc720668d5a37017.png" class="img-fluid my_story_img" onerror="this.style.display='none'"></a></div><div class="page_narrow text-break page_content"><p>这就是我如何使大多数配置与MacBook Pro（13，M1，2020）一起工作的方法在macOS Big Sur（11.0.1）上进行了测试创建于2020年11月17日最后更新：2020年11月18日</p><p>  在撰写本文时（11月17日），此新体系结构尚未支持大多数应用程序，并且大多数应用程序将与Apple创建的Rosetta2一起运行。</p><p> 首次在Mac上启动x86-64应用程序时，它将自动弹出并要求您安装Rosetta。该过程大约需要2分钟。然后，我可以打开这些应用程序，就像它们是为ARM mac本地构建的一样。</p><p> 谣言说，在首次启动翻译时加载Microsoft Word需要20秒。但是，在我的计算机上打开它只需要6.89秒，这与我的16英寸MacBook Pro的加载时间一样快，甚至更快。我不知道是否是因为我在安装应用程序时已经对它进行了翻译，或者Microsoft / Apple进行了一些优化。对于其他应用，例如与x86一起运行的IINA，即使是首次启动，也可以像您期望的那样在一台新机器上以最快的速度运行，其中大多数机器不到5秒。非常令人印象深刻。</p><p>  如果选择使用xcode提供的git，则在安装Xcode之后，您必须同意其许可</p><p> 您尚未同意Xcode许可协议。您必须同意下面的两个许可协议才能使用Xcode。单击Return键可在'/Applications/Xcode.app/Contents/Resources/English.lproj/License.rtf'同意Xcode / iOS上查看许可协议许可证需要管理员权限，请运行“ sudo xcodebuild -license”，然后重试此命令。</p><p> 只需使用其命令，按空格键继续并按q退出，然后键入同意同意许可。然后可以使用git，make之类的命令。</p><p>目前尚未在Apple Silicon Macs上正式支持Homebrew，并且他们的团队正在研究它。他们提供了如何支持核心公式的详细列表。您可以在此处找到该列表。</p><p> 由于目前尚无此Mac的官方支持，因此下面列出的大多数安装只是我在本地计算机上测试的个人变通办法。无法保证这是最佳做法，否则将在您的计算机上正常工作。</p><p>  我在homebrew的官方文档中找到了这种替代安装方法，可以在这里找到</p><p> 对于基于ARM的macs，他们的建议是“帮自己一个忙，并在macOS ARM上安装到/ opt / homebrew”。最简单的方法之一是将其解压缩到本地目录，然后将其移动到/ opt它需要root权限才能写入/ opt文件夹。</p><p> cd〜mkdir homebrew && curl -L https://github.com/Homebrew/brew/tarball/master | tar xz --strip 1 -C homebrewsudo mv homebrew / opt / homebrew</p><p> 这样，自制软件将安装到/ opt / homebrew文件夹中。然后，我们可以通过cd初始化自制程序到该目录，并在bin文件夹中运行brew。</p><p>  此操作需要git，而git并未像旧版mac一样内置在ARM Big Sur中。如果您没有预先安装xcode，则会弹出另一个窗口，要求您为开发人员安装命令行工具。预期的输出（如在我的本地计算机上）：</p><p>在/opt/homebrew/.git/remote中初始化为空的Git存储库：枚举对象：46，完成。远程：计数对象：100％（46/46），完成。远程：压缩对象：100％（37/37）， done.remote：总计159587（增量18），已重用26（增量8），数据包重用159541接收对象：100％（159587/159587），40.85 MiB | 11.00 MiB / s，完成。解析增量：100％（118220/118220），完成。来自https://github.com/Homebrew/brew==>将homebrew / core克隆到'/ opt / homebrew / Library / Taps / homebrew / homebrew-core'...远程：枚举对象：753，完成。远程：计数对象：100％（753/753），完成。远程：压缩对象：100％（500/500），完成。远程：总计835291（增量380），已重复使用446（增量253），已重新使用包装的834538接收对象：100％（835291/835291），332.87 MiB |已完成11.64 MiB / s解析增量：已完成100％（562744/562744）使用2条命令和5344个公式（5,629个文件，365.2MB）已经是最新的。</p><p> 之后，您可以将brew（以及brew管理的软件包）添加到PATH。</p><p> 对于macOS Big Sur，默认外壳为zsh。您可以在主目录中创建一个.zshrc文件，并将此行添加到配置中。</p><p>   Brew尚未提供可用于ARM Mac的预编译软件包。最好的安装方法是使用brew install -s 命令。如homebrew所解释，它将“即使提供了瓶也可以从源代码编译公式。如果有依赖关系，仍将从瓶中安装依赖项。”可在此处找到受支持的软件包的列表。</p><p> 我已经在本地计算机上成功编译了几个二进制文件，并且将二进制文件上传为瓶子以节省一些编译时间。</p><p>  autoconf gnutls libmpc luarocks sqliteautomake guile libssh2 mpfr texinfobdw-gc isl libtasn1 msgpack tree-sittercmake jansson libtermkey ncurses unboundcoreutils jpeg libtiff nettle unibiliumcurl libatomic_ops libtool opensl@1.1 wgetexpat libpgmunigggpggggpglibfftgggpggpgzgpgpgggpggpgggpggggpgggggggggliblib中文-cms2 python@3.9gmp libiconv lua readlinegnu-sed libidn2 luajit sphinx-doc</p><p> 我遇到的问题：编译neovim时，我发现系统无法重新分配luajit安装并不断向我发送错误：在/ opt / homebrew / opt / luajit中找不到Lua解释器</p><p>我通过在/ opt / homebrew / opt / luajit / bin文件夹中创建一个符号链接来解决此问题，该链接将lua重定向到luajit，</p><p>   cd / tmp / neovim-20201117-74316-1uv0si9 / build / runtime / pack / dist / opt / vimball && /opt/homebrew/Cellar/cmake/3.18.4/bin/cmake -E复制目录/ tmp / neovim-20201117- 74316-1uv0si9 / runtime / pack / dist / opt / vimball / tmp / neovim-20201117-74316-1uv0si9 / build / runtime / pack / dist / opt / vimballcd / tmp / neovim-20201117-74316-1uv0si9 / build / runtime / pack / dist / opt / matchit && /opt/homebrew/Cellar/cmake/3.18.4/bin/cmake -E copy_directory / tmp / neovim-20201117-74316-1uv0si9 / runtime / pack / dist / opt / matchit / tmp / neovim-20201117-74316-1uv0si9 / build / runtime / pack / dist / opt / matchitcd / tmp / neovim-20201117-74316-1uv0si9 / build / runtime && /opt/homebrew/Cellar/cmake/3.18.4/bin/cmake -E复制目录/ tmp / neovim-20201117-74316-1uv0si9 / runtime / doc doccd / tmp / neovim-20201117-74316-1uv0si9 / build / runtime / pack / dist / opt / vimball && / tmp / neovim-20201117-74316- 1uv0si9 / build / bin / nvim -u NONE -i NONE -e --headless -c helptags \ doc -c quitcd / tmp / neovim-20201117-74316-1uv0si9 / build / runtime / pack / dist / opt / matchit && / tmp / neovim-20201117-74316- 1uv0si9 / build / bin / nvim -u NONE -i NONE -e --headless -c helptags \ doc -c quit / bin / sh：行1：77744被杀死：9 / tmp / neovim-20201117-74316-1uv0si9 / build / bin / nvim -u NONE -i NONE -e --headless -c helptags \ doc -c quit / bin / sh：行1：77743已杀死：9 / tmp / neovim-20201117-74316-1uv0si9 / build / bin / nvim -u NONE -i NONE -e --headless -c helptags \ doc -c quitmake [2]：*** [运行时/打包/ dist / opt / matchit / doc / tags]错误137make [2]：** *等待未完成的作业。...make [2]：*** [runtime / pack / dist / opt / vimball / doc / tags]错误137cd / tmp / neovim-20201117-74316-1uv0si9 / build / runtime && / tmp / neovim-20201117-74316-1uv0si9 / build / bin / nvim -u NONE -i NONE -e --headless -c helptags \ ++ t \ doc -c quit / bin / sh：第1行：77746已杀死：9 / tmp / neovim-20201117-74316-1uv0si9 / build / bin / nvim -u NONE -i NONE -e --headless -c helptags \ ++ t \ doc -c quitmake [2]：*** [运行时/ doc / tags]错误137make [1]：*** [runtime / CMakeFiles / runtime.dir / all]错误2make：*** [all]错误2</p><p>     正在检查xcrun ...正在检查xcrun ...正在检查make ...是正在检查GNU Make ...正在检查生成系统类型... arm-apple-darwin20.1.0正在检查主机系统类型... arm-apple-darwin20.1.0configure：错误：Emacs不支持'arm-apple-darwin20.1.0'系统，如果您认为应该，请发送报告至bug-gnu-emacs@gnu.org。检查'etc / MACHINES'以获取可识别的配置名称。</p><p> 但这确实帮助我测试了另外一堆软件包。具有讽刺意味的是，从GNU网站下载的emacs.app（emacsformacosx）可以正常工作，猜测我会在neovim或emacs本地构建之前坚持使用它。</p></div><div id="story_share_this"><div class="sharethis-inline-share-buttons"></div></div><div class="text-break sotry_link page_narrow"><a target="_blank" href="https://github.com/mikelxc/Workarounds-for-ARM-mac">https://github.com/mikelxc/Workarounds-for-ARM-mac</a></div><div class="story_tags page_narrow"><button type="button" class="btn btn-light my_tag"><a href="/tag/apple/">#apple</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/silicon/">#silicon</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/homebrew/">#homebrew</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/安装/">#安装</a></button></div></div><div class="shadow p-3 mb-5 bg-white rounded clearfix"><div class="container"><div class="row"><div class="col-sm"><div><a target="_blank" href="/story/1036000.html"><img src="http://img2.diglog.com/img/2020/11/thumb_25c3b18cf6f26b8ec0820f6232cbabd8.jpg" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1036000.html">Apple TV遥控器太糟糕了，有线公司将为您提供更好的解决方案-通用电子公司重新设计的Apple TV遥控器可以修复正式版本中的所有错误。</a></div><span class="my_story_list_date">2020-11-23 7:3</span></div><div class="col-sm"><div><a target="_blank" href="/story/1035899.html"><img src="http://img2.diglog.com/img/2020/11/thumb_957ddc8ccc5a3af4f5a8335bc95b72a7.png" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1035899.html">Apple MacBook Pro 13英寸M1评测-为什么您想要通过</a></div><span class="my_story_list_date">2020-11-22 21:0</span></div><div class="col-sm"><div><a target="_blank" href="/story/1035883.html"><img src="http://img2.diglog.com/img/2020/11/thumb_017a0af02cf8e28d59b5944d00af6176.jpg" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1035883.html">苹果新的M1图形使分辨率瞬间变化</a></div><span class="my_story_list_date">2020-11-22 17:56</span></div><div class="col-sm"><div><a target="_blank" href="/story/1035882.html"><img src="http://img2.diglog.com/img/2020/11/thumb_2110b1cdf3c723027b87c2cc880e41d9.jpg" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1035882.html">苹果机密史蒂夫·乔布斯参加“不同思维”内部会议，1997年9月23日</a></div><span class="my_story_list_date">2020-11-22 17:28</span></div></div></div></div><div class="my_movie_list_item shadow p-3 mb-5 bg-white rounded"><button type="button" class="btn btn-link my_tag"><a href="/tag/web2.0/">#web2.0</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/google/">#google</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/设计/">#设计</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/创意/">#创意</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/摄影/">#摄影</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/游戏/">#游戏</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/图片/">#图片</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/软件/">#软件</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/视频/">#视频</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/手机/">#手机</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/广告/">#广告</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/apple/">#apple</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/iphone/">#iphone</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/网站/">#网站</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/免费/">#免费</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/下载/">#下载</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/windows/">#windows</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/微软/">#微软</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/firefox/">#firefox</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/苹果/">#苹果</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/blog/">#blog</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/音乐/">#音乐</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/博客/">#博客</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/wordpress/">#wordpress</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/恶搞/">#恶搞</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/艺术/">#艺术</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/qq/">#qq</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/web/">#web</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/谷歌/">#谷歌</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/工具/">#工具</a></button></div></div></div><div id="my_footer"><div class=""><a href="/tags/">tags</a> <a href="/users/">users</a></div>&copy;2012-2021 diglog.com </div></div></body></html>