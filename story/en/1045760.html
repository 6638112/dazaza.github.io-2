<!doctype html><html lang="zh-hans"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>记住David M. Tilbrook和QED编辑的工作 Remembering the work of David M. Tilbrook and the QED editor</title><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"><link rel="stylesheet" href="/img/css.css?random="><link data-rh="true" rel="icon" href="/img/favicon.ico"/><script data-ad-client="ca-pub-6067137220025946" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script type="text/javascript" src="https://platform-api.sharethis.com/js/sharethis.js#property=5effb96910009800120b8d4d&product=inline-share-buttons" async="async"></script>
<script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?03c1a0f31299b4a2fbb83c34d6beaac9";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script></head><body><div id="my_header"><div class="container"><nav class="navbar navbar-expand-lg"><a class="navbar-brand" href="/"><img alt="diglog" src="/img/logo.v1.gif" class="rounded-sm"></a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarNavAltMarkup"><div class="navbar-nav"></div></div></nav></div></div><div class="container"><div id="my_content"><h1 class="page_narrow">Remembering the work of David M. Tilbrook and the QED editor<br/>记住David M. Tilbrook和QED编辑的工作 </h1><div class="row"><div class="col-lg-12 col-12"><div class="my_story_list_item shadow p-3 mb-5 bg-white rounded"><div class="story_page_pub_time page_narrow">2021-01-22 17:05:58</div><div class="page_narrow text-break page_content"><p>Last week, I learned that David M. Tilbrook has died, which made me sad.I did not know him personally and cannot say much about his life,but I studied his publications and software ideas a lot, and considerthem interesting, especially from a historic perspective.</p><p>上周，我得知David M.Tilbrook死了，这让我很难过。我个人不认识他，也不能说太多关于他的生活，但是我研究了他的出版物和软件构想，并且认为它们很有趣，特别是从历史的观点。</p><p> Unfortunately, most of these things are on websites taken down already,so this post will refer to pages on the Internet Archive extensively.</p><p> 不幸的是，这些东西大多数都在被拆除的网站上，因此本文将广泛地引用Internet存档上的页面。</p><p> I first came across David when I researched the history of the QED editor,the direct predecessor of the Unix standard text editor  ed.The history of QED is well documented by Dennis Ritchie.However, for a long time the QED source code was hard to find,and I heard that David still maintained a version.</p><p> 当我研究Unix标准文本编辑器ed的直接前身QED编辑器的历史时，首先遇到了David。QED的历史由Dennis Ritchie很好地记录了下来。但是，长期以来，QED源代码很难被发现。找到，听说大卫仍然保留了一个版本。</p><p> Around 2016, I swooped a copy of  Caltech qed from USENIX tape 80.1and tried making it work on modern platforms, with moderate success.Thanks to efforts by Arnold Robbinsthere is now an QED Archivewhich also features a copy of 1992 QED from Toronto,which contains contributions byTom Duff, Robert Pike, Hugh Redelmeier and David Tilbrook.If you want to run it yourself, there is a  modernized, UTF-8 awareversion available now!</p><p> 在2016年左右，我从USENIX磁带80.1中获得了一份Caltech qed副本，并尝试使其在现代平台上工作，并取得了一定的成功。感谢Arnold Robbinsthere的努力，现在是QED档案馆，其中还包含多伦多的1992 QED副本，其中包含汤姆·达夫（Tom Duff），罗伯特·派克（Robert Pike），休·雷德迈尔（Hugh Redelmeier）和戴维·蒂尔布鲁克（David Tilbrook）的贡献。如果您想自己运行它，现在可以使用现代化的UTF-8意识版本！</p><p> I do not know what David exactly contributed to QED, but from hiswritings its clear he was a heavy user of QED and wrote many scripts init. Remember that in the early 80’s, awk was quite limited and Perldid not exist, so general-purpose string processing on Unix was difficult.We will have an example of a small QED script at the end of this post.</p><p> 我不知道David到底为QED贡献了什么，但是从他的著作中可以明显看出他是QED的重度用户，并编写了许多脚本init。请记住，在80年代初期，awk相当有限，Perldid不存在，因此在Unix上进行通用字符串处理非常困难。本文结尾处将提供一个小型QED脚本示例。</p><p> David’s  opus magnum was a suite of tools called QEF,  quod erat faciendum.Euclid wrote this at the end of geometric constructions, and in asoftware sense, we want a build system to produce  what was to be made.At its time of creation, David was responsible for maintaininga (for the time) large system, essentially a Unix distribution.Tooling was stuck in the era of 1977’s make(1).For the details and basic ideas, seeTilbrook and Place (1986), “Tools for the Maintenance and Installation of a LargeSoftware Distribution”(Huge thanks to Alan Grosskurth for making a copy available.)My favorite footnote is the one about their Prolog prototype of a build system:“Is the cray free? I need to reinstall /bin/true!”</p><p> 大卫的大手笔是一套称为QEF的工具，是Euclid在几何构造的末尾写的，从软件的意义上讲，我们希望构建系统能够产生要制造的东西。负责维护（当时）大型系统，基本上是Unix发行版。工具停留在1977年make（1）的时代。有关详细信息和基本思想，请参见Tilbrook和Place（1986），“维护和维护工具”。安装大型软件发行版”（非常感谢Alan Grosskurth提供了副本。）我最喜欢的脚注是关于其构建系统的Prolog原型的脚注：“ cray免费吗？我需要重新安装/ bin / true！”</p><p> Back then, Unix software development was plagued with all kinds ofincompatibilities and vendor-specific workarounds, and QEF was one ofthe first tools to provide concepts like out-of-tree builds, automaticdependency detection, and provided portable abstractions for things like creatingshared libraries, which required performing occult rituals back then.</p><p> 那时，Unix软件开发受到各种不兼容和特定于供应商的解决方法的困扰，而QEF是最早提供树外构建，自动依赖检测等概念的工具之一，并为诸如创建共享库之类的事情提供了可移植的抽象，那时需要执行神秘的仪式。 </p><p>  What is intriguing is that the whole toolkit is created in classicUnix manner from small tools and little languages.I acquired an evaluation copy of QEF in 2015, but sadlyit had no copy of QED included. However, I couldread the full manpages for many of his tools.</p><p>有趣的是，整个工具包都是以经典的Unix方式由小型工具和少量语言创建的.2015年，我获得了QEF的评估版，但遗憾的是其中没有QED的副本。但是，我可以阅读他的许多工具的完整手册。</p><p> Looking at these tools was instructive; many are obsoleted now because thefeatures have been added to standard tools, or we can afford usingmore general, inefficient tools now. But for example, his  go tooldirectly influenced the user interface of my   nq tool,and reading about  rls,  lls,  fexists, and  ftestinspired my   lr.His  rpl lives on as my   mend.</p><p> 查看这些工具很有启发性；许多功能已被废弃，因为这些功能已添加到标准工具中，或者我们现在可以负担得起使用更通用，效率低下的工具。但是，例如，他的go工具直接影响了我的nq工具的用户界面，并且阅读有关rls，lls，fexists和ftest的内容启发了我的lr。</p><p>   Well, I promised you some QED code earlier, so let’s do fizzbuzz.(I heard this is useful in job interviews, so next time why not askwhether you can use QED for the task!)</p><p>   好吧，我已答应过您一些QED代码，所以让我们开始吧。（我听说这在工作面试中很有用，所以下一次为什么不问您是否可以使用QED来完成任务！）</p><p> It turns out this does not get as obscure as expected,but I’m not claiming what I wrote is idiomatic QED. I hacked it togetherwhile studying the tutorial a little bit.</p><p> 事实证明，这并没有像预期的那样晦涩难懂，但我并不是说我写的是惯用的QED。在研究本教程的同时，我将其一起破解。</p><p>    So, how does it work? First, we switch to buffer  a of QED’s 56available buffers ( ba). By default we are in the script buffer named ~ due to the  -x flag, which made me scratch my head in the beginningbecause the script always printed its own source at first!</p><p>    那么它是怎样工作的？首先，我们切换到QED的56个可用缓冲区中的一个（ba）。缺省情况下，由于-x标志，我们位于名为〜的脚本缓冲区中，这使我从头开始抓头，因为脚本一开始总是打印自己的源代码！</p><p> Next, we set up a loop.QED provides structured programming in the form of a while loop,but that requires fitting the loop body on the same line.Instead, we will use jumps.We start with a label  &#34;loop and increment the  cregister using  zc#+1. The  # enables arithmetic mode for registers,they also can be strings.Since the register is empty, it will be regarded as zero.The end of the loop is the zc#=100 yf`loop line, which checks whether the  c register equals 100,and if not ( yf) jumps  back to the label  loop.Curiously, QED has different commands for jumping forwards ( &#39;)and backwards ( `).Having explicit directions is, I assume,an implementation detail of the buffer-based program storage,but compare with Unix’s gotoor  TECO’s O command,which both search from the top.</p><p> 接下来，我们建立一个循环.QED以while循环的形式提供结构化的编程，但这需要将循环主体装配在同一行上，相反，我们将使用跳转。我们以标签＆＃34; loop和使用zc＃+ 1递增cregister。 ＃启用寄存器的算术模式，它们也可以是字符串。由于寄存器为空，将被视为零。循环的结尾是zc＃= 100 yf`循环行，它检查c寄存器是否等于100，否则（yf）跳回到标签循环。奇怪的是，QED具有不同的命令来向前（＆＃39;）和向后（`）跳跃。我假设有明确的方向是该缓冲区的实现细节基于程序的存储，但是与Unix的gotoor TECO的O命令进行比较，两者都从顶部开始搜索。</p><p>   But QED allows using  \N as a newline, so we can save some screen space.</p><p>   但是QED允许使用\ N作为换行符，因此我们可以节省一些屏幕空间。 </p><p> Then, we need to do the fizzbuzz logic. The command za#:\zc%3=0 will copy the  c register to the  a register (we needto do this, as all arithmetic operations store their result in aregister), then we take the  a register modulo 3 and check if theregister is then zero. If it isn’t, we jump a line forward ( yf).If we didn’t jump, we append  fizz to the line, using the  s command(pretty much like in ed).</p><p>然后，我们需要执行fizzbuzz逻辑。命令za＃：\ zc％3 = 0会将c寄存器复制到a寄存器（我们需要这样做，因为所有算术运算都将其结果存储在aregister中），然后我们将a寄存器取模3并检查寄存器是否为3然后为零。如果不是，则向前跳一行（yf）。如果不跳转，则使用s命令将fizz附加到该行（与ed中的用法非常相似）。</p><p>  If the line is still empty, we have to say the number, so weappend it using  s again and this time insert the  c register intothe input stream using  \zc. Note that this not interpolated by the s command, but by QED itself. You can write  \zc (or  \N)essentially everywhere and it will work as if you’d have typed it in!A  \ can be quoted as  \c, so we can do this:</p><p>  如果该行仍然为空，则必须说出该数字，因此我们再次使用s将其附加，这次使用\ zc将c寄存器插入输入流。请注意，这不是由s命令进行插值，而是由QED本身进行插值。您基本上可以在任何地方写\ zc（或\ N），它的工作方式就像您在其中键入一样！\可以引用为\ c，因此我们可以这样做：</p><p>  Note how the insertion of the  a register resulted in the  bregister being inserted as well! Luckily, the people involved with QEDdid better when they wrote shells later.</p><p>  注意插入a寄存器是如何导致bregister也被插入的！幸运的是，参与QED的人员以后写shell时会更好。</p><p> At the end of the loop, we have the fizzbuzz output in the buffer,so we can just print out the whole thing ( ,p)and quit QED with no questions asked ( Q).</p><p> 在循环的最后，我们将fizzbuzz输出存储在缓冲区中，因此我们只需打印出整个内容（，p）即可退出QED，而无需问任何问题（Q）。</p><p>  By striking a harmonious balance between Qed and UNIX’s other tools, the intelligent user will find Qed powerful, flexible, easy to master and fun!</p><p>  通过在Qed和UNIX其他工具之间取得和谐的平衡，聪明的用户将发现Qed功能强大，灵活，易于掌握和娱乐！ </p></div><div id="story_share_this"><div class="sharethis-inline-share-buttons"></div></div><div class="text-break sotry_link page_narrow"><a target="_blank" href="https://leahneukirchen.org/blog/archive/2021/01/remembering-the-work-of-david-m-tilbrook-and-the-qed-editor.html">https://leahneukirchen.org/blog/archive/2021/01/remembering-the-work-of-david-m-tilbrook-and-the-qed-editor.html</a></div><div class="story_tags page_narrow"><button type="button" class="btn btn-light my_tag"><a href="/tag/qed/">#qed</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/work/">#work</a></button></div></div><div class="my_movie_list_item shadow p-3 mb-5 bg-white rounded"><button type="button" class="btn btn-link my_tag"><a href="/tag/web2.0/">#web2.0</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/google/">#google</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/设计/">#设计</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/创意/">#创意</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/摄影/">#摄影</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/图片/">#图片</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/游戏/">#游戏</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/软件/">#软件</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/视频/">#视频</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/手机/">#手机</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/广告/">#广告</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/iphone/">#iphone</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/网站/">#网站</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/免费/">#免费</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/下载/">#下载</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/windows/">#windows</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/苹果/">#苹果</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/微软/">#微软</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/apple/">#apple</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/firefox/">#firefox</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/blog/">#blog</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/音乐/">#音乐</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/博客/">#博客</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/wordpress/">#wordpress</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/恶搞/">#恶搞</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/qq/">#qq</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/艺术/">#艺术</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/web/">#web</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/工具/">#工具</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/分享/">#分享</a></button></div></div></div><div id="my_footer"><div class=""><a href="/tags/">tags</a> <a href="/users/">users</a></div>&copy; 2020 diglog.com </div></div></body></html>