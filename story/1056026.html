<!doctype html><html lang="zh-hans"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>简化的电子图形实现 </title><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"><link rel="stylesheet" href="/img/css.css?random="><link data-rh="true" rel="icon" href="/img/favicon.ico"/><script data-ad-client="ca-pub-6067137220025946" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script type="text/javascript" src="https://platform-api.sharethis.com/js/sharethis.js#property=5effb96910009800120b8d4d&product=inline-share-buttons" async="async"></script>
<script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?03c1a0f31299b4a2fbb83c34d6beaac9";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script></head><body><div id="my_header"><div class="container"><nav class="navbar navbar-expand-lg"><a class="navbar-brand" href="/"><img alt="diglog" src="/img/logo.v1.gif" class="rounded-sm"></a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarNavAltMarkup"><div class="navbar-nav"></div></div></nav></div></div><div class="container"><div id="my_content"><h1 class="page_narrow">简化的电子图形实现 </h1><div class="row"><div class="col-lg-12 col-12"><div class="my_story_list_item shadow p-3 mb-5 bg-white rounded"><div class="story_page_pub_time page_narrow">2021-04-04 07:29:56</div><div class="page_narrow text-break page_content"><p>我一直在花一些时间仔细考虑电子图表。我觉得我有点折叠，直到它相当简单。这一实现可能不是高性能，因为主要诀窍是去除真正有用的索引结构。尽管如此，这种实施足够小，我可以把它留在我的脑海里。它变得非常可爱。</p><p>  在计算机中，术语（a + b）* c通常被存储为树。 EGraph将此树结构转换为具有额外间接层的一个树结构。而不是直接连接到节点的节点，它们首先通过Integer标记的不同类型的节点连接。这些整数节点称为eMlasses，修改后的原始节点称为Enode。</p><p>  Egraph是eMlasses和Enods之间的双链定向图。 Enodes属于eclasses。一旦我们开始合并eMlasses，emlasses将指向多个eNode。该图还还可以在无限术语的意义上开发允许表示的环。</p><p> 上次https://www.philipzucker.com/union-find-dict/，我建立了一个Union的抽象 - 找到了dict。此数据结构允许您在仍然支持Union操作时检索键入等效类上的信息。鉴于这件作品，定义两个数据结构很简单。</p><p>  eclass字段是一个Union-condice类从等效类到enodes的向量。我们告诉联盟的底层Intdisjointmap！在等价类中，我们将联合enode向量在Intdisjointmap的Codomain中彼此相互作用。</p><p> 备忘录表不是严格必要的，但它给了我们一个很好的方法来查找eNode所属的eMlass。否则，我们必须蛮力搜索整个Intdisjointmap，以便在我们想要它们时找到enodes。</p><p> Enodes将引用符合Eclass ID，不幸的是可以陈旧。我们可以规范Enodes以使用最新鲜的等价类索引。 </p><p>要将eNode添加到EGRAPT之前，我们可以致规定它，然后我们检查它是否已经在备忘录表中，如果不是我们实际上在IntDisjointMap中将其推动并更新备忘录表。</p><p> 功能addende！ （G :: EPRAGH，F :: ENODE）F = Canonize（g，f）如果haskey（g.备忘录，f）返回g。备忘录[f] else id =推！ （g。emlass，[f]）g。备忘录[f] = ID返回ID结束末端#Vonvenience函数用于推动julia expr addexpr！ （g :: Egraph，f ::符号）= addende！ （g，enode（f，[]））函数addexpr！ （g :: egraph，f :: expr）@assert f。头==：致电addende！ （g，eNode（f。args [1]，[addexpr！（g，a）为f。args [2：end]]））结束</p><p> 当我们向EGRAGRS致力于Egraph时，我们采取联盟！两个相应的偏蚀。我们联盟！然后，底层的IntdisjointMap，然后我们重新创建了该eMlass中的所有隐藏enodes并更新备忘录表。</p><p> 函数base.union！ （g :: Egraph，f :: int64，g :: int64）Id = Union！ （g. eMlass，f，g）Eclass = eNode中的eNode []。 eclass [id]删除！ （g。备忘录，eNode）＃我们甚至应该打扰删除吗？ eNode = canonize（g，enode）＃应该典可返回它是否有什么事？ G 。备忘录[eNode] = ID推动！ （emlass，eNode）结束g。 eclass [id] = emlass结束</p><p>  我们尚未讨论的大件事是计算同时关闭。在我的原始演示文稿中，这是一个整个磨难，而且我们需要将父指针从eNods维护eNodes.这非常令人困惑。</p><p> 相反，我们可以通过蛮力扫过电子镜头来找到同时。与父指针有可能指向我们的候选人相比，这是效率低下。但是，在天真的映射期间，无论如何，我们都会在EGROGP上扫描，以找到可能的重写规则应用程序。这种方法使得在某种意义上使得与其他重写规则相当相似。可能存在一些实用性，而不是考虑一致性关闭作为Egraph的真正内在部分。也许你可以将它用于同时不严格持有的系统？</p><p> 一个不幸的是，必须在最坏的情况下应用一致与Egraph的深度成比例的时间，因为它一次只传播一层一层。 </p><p>它是如何运作的：在工会之后！操作在备忘录和eMlass中存在非典型enode。这些非Canonical enodes是那些具有刚刚转变为另一eClass的子项的参数的参数。这些也是一般的enodes，即用于同时闭合传播的候选者。我们可以在扫描期间通过典范来检测它们。</p><p> 这一昂贵的同时扫过更多的罪，而不是更有效的罪。可能发生的事情是我们尝试addexpr！作为陈旧的忠实，换句话说，它应该在备忘录中但不是。这将错误地为此eNode创建一个新的eclass。但是，同时关闭扫描将在下一个传球上找到这种等价。</p><p> ＃我忘记在我的上一篇文章中包含此IntdisjointMap迭代器功能。 ＃概念上它属于那里。函数base.igerate（x :: intdisjointmap，state = 1），而状态＆lt; =长度（x。父母）如果x。父母[状态]＆lt; 0返回（（陈述，x。值[状态]），状态+ 1）结束状态+ = 1结束返回NOLL END＃返回发现的同时函数同时的组合列表（G :: EGROP）BUF = TOU {INT64， int64} [] for（id1，eclass）中的g。 Eclass #Alterniply迭代Enclass Cnode = Canonize（g，eNode）的enode备忘录，如果haskey（g.备忘录，cnode）ID2 = G.备忘录[CNODE]如果ID1！= ID2推！ （BUF，（ID1，ID2））结束结束结束返回BUF端＃传播所有同时函数传播_Congruence（G :: Egraph）cong =长度（cong）＆gt的同时（g）; 0 for（i，j）在Cong Union！ （g，i，j）结束ing =同时（g）结束</p><p>  原则上，我认为这种配方使得更容易并行化同一度伴随重写规则匹配。重写过程成为查找元组之间并实际应用它们之间的交换。</p><p>  要添加分析，您希望在IntdisjointMap中存储复合结构。元组{vector {enode}，分析）合并操作然后是eNode合并和分析合并。</p><p> 可能更改eNode是二进制的可能很好。一个人可以编写任意的arity。然后一切都适合适当的数组，取消了重大的间接</p><p>      使用Eggraph使用测试@testset＆＃34;基本的电子版和＃34; begin g = Egraph（）a = addende！ （g，eNode（：a，[]））b = addende！ （g，enode（：b，[]））#println（g）联盟！ （g，a，b）#println（g）@test addende！ （g，eNode（：a，[]））== 2 @Test AddEnode！ （g，eNode（：c，[]））== 3 @Test AddEnode！ （g，eNode（：f，[a]））== 4联盟！ （g，3,4）＃= println（g）在g.eclass println（k，v）end =＃g = egraph（）a = addende！ （g，eNode（：a，[]））b = addende！ （g，eNode（：b，[]））c = addende！ （g，eNode（：c，[]））联盟！ （g，a，b）fa = addende！ （g，eNode（：f，[a]））fb = addende！ （g，eNode（：f，[b]））fc = addende！ （g，eNode（：f，[c]））ffa = addende！ （g，eNode（：f，[fa]））ffb = addende！ （g，eNode（：f，[fb]））@test同时（g）== [（fb）]（x，y）在同时（g）联盟！ （g，x，y）结束@test同时（g）== [（ffa，ffb）]联盟！ （g，a，c）@test同时（g）== [（ff，ffb），（ffa，ffb）for（x，y）在同时（g）联盟中！ （g，x，y）结束@test同时（g）== [] g = egraph（）f5a = addexpr！ （g，：（f（f（f（f（f（a））））））））f2a = addexpr！ （g，：（f（f（a）））））@test长度（g。eclass）== 6联盟！ （g，f5a，f2a）@test find_root（g，f5a）== find_root（g，f2a）@test长度（g。eclass）== 5 f5a = addexpr！ （g，：（f（f（f（f（f（a））））））））f2a = addexpr！ （g，：（f（f（a））））））@test长度（g。eclass）== 5 g = egraph（）f5a = addexpr！ （g，：（f（f（f（f（a））））））））））fa = addexpr！ （g，：（f（a）））a = addexpr！ （g，：a）@test长度（g。eclass）== 6联盟！ （g，fa，a）@test find_root（g，fa）== find_root（g，a）传播_congruence（g）@test长度（g。eclass）== 1 g = egraph（）ffa = addexpr！ （g，：（f（f（a）））））f5a = addexpr！ （g，：（f（f（f（f（a）））））））a = addexpr！ （g，：a）@test长度（g。eclass）== 6联盟！ （g，ffa，a）@test find_root（g，ffa）== find_root（g，a）传播_congruence（g）@test长度（g。eclass）== 2结束 </p></div><div id="story_share_this"><div class="sharethis-inline-share-buttons"></div></div><div class="text-break sotry_link page_narrow"><a target="_blank" href="https://www.philipzucker.com/a-simplified-egraph/">https://www.philipzucker.com/a-simplified-egraph/</a></div><div class="story_tags page_narrow"><button type="button" class="btn btn-light my_tag"><a href="/tag/电子/">#电子</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/graph/">#graph</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/enode/">#enode</a></button></div></div><div class="shadow p-3 mb-5 bg-white rounded clearfix"><div class="container"><div class="row"><div class="col-sm"><div><a target="_blank" href="/story/1054751.html"><img src="http://img2.diglog.com/img/2021/3/thumb_ffd341c102360848becb562193ed9237.png" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1054751.html">凝聚态的快乐 </a></div><span class="my_story_list_date">2021-3-27 20:42</span></div><div class="col-sm"><div><a target="_blank" href="/story/1052421.html"><img src="http://img2.diglog.com/img/2021/3/thumb_28dd0490d6b9c72448aeb3be9e64a578.jpg" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1052421.html">Alt-Currency Martyr：在美联储恐惧比特币之前，他们担心电子金 </a></div><span class="my_story_list_date">2021-3-15 13:15</span></div><div class="col-sm"><div><a target="_blank" href="/story/1051071.html"><img src="http://img2.diglog.com/img/2021/3/thumb_4d7c3227cfa7dd94ab7cbeb8ad777268.png" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1051071.html">虚拟粒子：它们是什么？ （2011） </a></div><span class="my_story_list_date">2021-3-7 12:7</span></div><div class="col-sm"><div><a target="_blank" href="/story/1049903.html"><img src="http://img2.diglog.com/img/2021/2/thumb_d4b3026a7d58d206504c9b21edc03405.jpg" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1049903.html">大众电子ID.4行驶两天 </a></div><span class="my_story_list_date">2021-2-28 12:41</span></div></div></div></div><div class="my_movie_list_item shadow p-3 mb-5 bg-white rounded"><button type="button" class="btn btn-link my_tag"><a href="/tag/web2.0/">#web2.0</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/google/">#google</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/设计/">#设计</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/创意/">#创意</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/摄影/">#摄影</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/游戏/">#游戏</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/图片/">#图片</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/软件/">#软件</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/视频/">#视频</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/手机/">#手机</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/广告/">#广告</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/apple/">#apple</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/iphone/">#iphone</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/网站/">#网站</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/免费/">#免费</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/下载/">#下载</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/windows/">#windows</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/微软/">#微软</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/firefox/">#firefox</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/苹果/">#苹果</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/blog/">#blog</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/音乐/">#音乐</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/博客/">#博客</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/wordpress/">#wordpress</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/恶搞/">#恶搞</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/艺术/">#艺术</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/qq/">#qq</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/web/">#web</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/谷歌/">#谷歌</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/工具/">#工具</a></button></div></div></div><div id="my_footer"><div class=""><a href="/tags/">tags</a> <a href="/users/">users</a></div>&copy;2012-2021 diglog.com </div></div></body></html>