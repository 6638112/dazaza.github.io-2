<!doctype html><html lang="zh-hans"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Logica：现代逻辑编程 Logica: Modern Logic Programming</title><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"><link rel="stylesheet" href="/img/css.css?random="><link data-rh="true" rel="icon" href="/img/favicon.ico"/><script data-ad-client="ca-pub-6067137220025946" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script type="text/javascript" src="https://platform-api.sharethis.com/js/sharethis.js#property=5effb96910009800120b8d4d&product=inline-share-buttons" async="async"></script>
<script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?03c1a0f31299b4a2fbb83c34d6beaac9";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script></head><body><div id="my_header"><div class="container"><nav class="navbar navbar-expand-lg"><a class="navbar-brand" href="/"><img alt="diglog" src="/img/logo.v1.gif" class="rounded-sm"></a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarNavAltMarkup"><div class="navbar-nav"></div></div></nav></div></div><div class="container"><div id="my_content"><h1 class="page_narrow">Logica: Modern Logic Programming<br/>Logica：现代逻辑编程 </h1><div class="row"><div class="col-lg-12 col-12"><div class="my_story_list_item shadow p-3 mb-5 bg-white rounded"><div class="story_page_pub_time page_narrow">2021-04-14 18:55:47</div><div class="story_img_container"><a href="http://img2.diglog.com/img/2021/4/693a4b65e499efbf209d9aaad9539a75.jpg"><img src="http://img2.diglog.com/img/2021/4/693a4b65e499efbf209d9aaad9539a75.jpg" class="img-fluid my_story_img" onerror="this.style.display='none'"></a></div><div class="page_narrow text-break page_content"><p>We present  Logica, a novel  open source Logic Programming language. A successor to  Yedalog (a language developed at Google earlier) it is a Datalog-like logic programming language. Logica code compiles to SQL and runs on Google BigQuery (with experimental support for PostgreSQL and SQLite), but it is much more concise and supports the clean and reusable abstraction mechanisms that SQL lacks. It supports modules and imports, it can be used from an interactive Python notebook and it even makes  testing your queries natural and easy.  “Data is the new oil”, they say, and SQL is so far the  lingua franca for working with data. When SQL (or “Structured English Query Language”, as it was first named) was invented in the 1970s, its authors might not have imagined the popularity that it would reach half a century later. Today, systems ranging from tiny smart watch applications to enterprise IT solutions, read and write their data using SQL. Even the browser that you are using to read this post now might  have a working built-in SQL database in it. Despite the widespread adoption, SQL is not flawless. Constructing statements from long chains of English words (which are often capitalized to keep the old-fashioned COBOL spirit of the 70s alive!) can be very verbose—a single query spanning hundreds of lines is a routine occurrence. The main flaw of SQL, however, lies in its very limited  support for abstraction. Good programming is about creating small, understandable, reusable pieces of logic that can be tested, given names, and organized into packages which can later be used to construct more useful pieces of logic. SQL resists this workflow. Although you can encapsulate certain repeated computations into  views and  functions, the syntax and support for these can vary among implementations, the notions of  packages and  imports are generally nonexistent, and higher-level constructions (e.g. passing a function to a function) are impossible.  This inherent resistance to decomposition of logic into bite-sized pieces is what leads into the contrived, lengthy queries, the copy-pasted chunks of code and, eventually, unmaintainable, un structured (note the irony) SQL codebases. To make things worse, SQL code is rarely tested, because “ testing SQL queries” sounds rather esoteric to most engineers, at best. Because of that, a number of  alternative query languages and  libraries have been developed. Of those,  systems based on logic programming perhaps come the closest to addressing SQL’s limitations. Logic programming languages solve problems of SQL by using syntax of mathematical propositional logic rather than natural English language. The language of formal logic was designed by mathematicians specifically to make expression of complex statements easier and suits this purpose much better than natural language. Logica extends classical Logic programming syntax further, most notably with aggregation, hence the name, which stands for    Let us see how it all works. SQL operates with  relations, which are sets of  rows. In logic programming the analog of a  relation is a  predicate. While a predicate is a set of rows, we  think of it as a  logical  condition, which describes the rows of a relation. Here is, for example, the definition of a simple predicate: The definition claims that the condition  MagicNumber(x) must hold when X is precisely either 2, 3, or 5. That means, if we were to  query this predicate (i.e. request all values of X that satisfy it), the output should be a “relation” with a single column X and rows 2, 3, and 5. The SQL equivalent would be:</p><p>我们呈现Logica，这是一种新颖的开源逻辑编程语言。 Yedalog的继任者（谷歌早些时候在谷歌开发的语言）是一种类似数据记录逻辑编程语言。 Logica代码编译为SQL并在Google BueQuery上运行（对于PostgreSQL和SQLite的实验支持），但它更简洁并支持SQL缺乏的清洁和可重复使用的抽象机制。它支持模块和导入，它可以从交互式Python笔记本使用，它甚至可以通过自然和简单地测试您的查询。他们说，“数据是新的油”，并且SQL是迄今为止与数据一起使用的语言弗朗卡。当SQL（或“结构化英国查询语言”时，它在第一个名为第一个名为20世纪70年代而发明的时候，其作者可能无法想象它将达到半个世纪以后的人气。如今，系统从小型智能手表应用程序到企业IT解决方案，使用SQL读取和写入数据。即使是您使用的浏览器，现在可以阅读此帖子可能具有其内置的SQL数据库。尽管采用了广泛的采用，但SQL并非完美。构建英语单词的长链（通常资本化以保持70年代的老式COBOL Spirity的陈述！）可以非常详细 - 跨越数百行的单个查询是常规发生。但是，SQL的主要缺陷位于其对抽象的非常有限的支持下。良好的编程是创建可以测试的小型，可理解的可重复使用的逻辑逻辑，该逻辑可以被测试，给定名称，并组织成稍后可以用于构造更有用的逻辑的包。 SQL抵制此工作流程。虽然您可以将某些重复计算封装到视图和功能中，但是对实现的语法和支持可能会有所不同，但程序包和导入的概念通常是不存在的，而且更高级别的构造（例如，将函数传递给函数）是不可能的。这种固有的抵抗逻辑分解成咬合尺寸的块是导致了重要的，冗长的查询，副本粘贴的代码块，最终，不知情，联合国结构化（注意讽刺）SQL CodeBases。为了使事情更糟糕，SQL代码很少测试，因为“测试SQL查询”听起来与大多数工程师的声音相当疏远。因此，已经开发了许多替代查询语言和库。其中，基于逻辑编程的系统可能最接近解决SQL的限制。逻辑编程语言通过使用数学命题逻辑而不是自然语语言的语法来解决SQL的问题。正式逻辑的语言是由数学家设计的，专门制作复杂陈述的表达更容易，并且适合这个目的比自然语言更好。 Logica进一步扩展了古典逻辑编程语法，最特别是聚合，因此名称，它代表让我们看看它是如何工作的。 SQL与关系运行，这是一组行。在逻辑编程中，关系的模拟是谓词。虽然谓词是一系列行，但我们认为它是逻辑条件，它描述了关系的行。这里是一个简单谓词的定义：定义声明条件MagicNumber（x）必须按住x，当x正是2,3或5时必须保持。这意味着，如果我们要查询此谓词（即请求满足它的X的所有值），输出应该是单个列x和行2,3和5的“关系”。SQL等价物将是：</p><p> Rather than listing the individual values, we could have defined the predicate by encoding a logical condition upon X as follows:</p><p> 不是列出单个值，我们可以通过在x上编码逻辑条件来定义谓词，如下所示：</p><p> Now, here is where the magic starts. Firstly, any table in your database is itself already a predicate, so the following definition:</p><p> 现在，这是魔法开始的地方。首先，数据库中的任何表都已经是谓词，因此以下定义：</p><p> Defines a predicate  MagicComment, which includes precisely those  comment_text values, which are present in the  comments table where  user_id == 5. In SQL this would read:</p><p> 定义谓词的MagicComment，它确切地说是那些注释_Text值，它存在于评论表中，其中user_id == 5.在SQL中，这将读取：</p><p> Observe what happens if we replace the condition “ user_id == 5” in our predicate with  MagicNumber(x: user_id):</p><p> 如果我们用MagicNumber中的谓词替换“user_id == 5”，请遵守会发生什么（x：user_id）：</p><p> Here, we are querying for comments of users whose ID is one of the “magic numbers” we just defined above. Note how easily we could  reuse a previously defined piece of code without having to copy anything around. We could now even extract the  MagicNumber to a common module and  import it in wherever it is needed:</p><p> 在这里，我们查询其ID是我们刚刚定义的“魔号”之一的用户的评论。请注意我们如何轻松地重复使用先前定义的代码，而无需复制任何内容。我们现在可以将MagicNumber解压缩到公共模块并在需要它的地方导入它：</p><p> As a final example, let us  mock the comments table, in a unittest of a query.</p><p> 作为最后的示例，让我们在一个uniftest的查询中嘲笑评论表。 </p><p> If we query the  MagicComment predicate here, it will not try to read the  comments table in the database. Instead, it will use the predicate we just defined, thus letting us  verify its correctness by testing the output (it must include two rows “Logic” and “Programming”). Observe how natural and frictionless many of the good programming practices become with Logica, and compare that to what you would have to do to achieve the same using bare SQL.</p><p>如果我们在此查询MagicComment谓词，则不会尝试阅读数据库中的注释表。相反，它将使用我们刚定的谓词，从而让我们通过测试输出来验证其正确性（它必须包含两行“逻辑”和“编程”）。观察许多良好的编程实践的自然和摩擦力如何成为Logica，并将其与您必须做的事情进行比较，以实现使用裸机的达到相同的方式。</p><p> There is much more to Logica, so make sure you give it a try—chances are, you will love it! Start with  this tutorial to learn Logica. Even if you do not end up using it in your next project, learning a new powerful language may open your mind to new ideas and perspectives on data processing and computing in general.  The simple examples above are only a small sample of how concise Logica code can be over SQL for complex queries. In particular, we did not even touch the topic of aggregations in this article. For all of this see  examples section of the Logica  open source repository.   We also hope that some of the readers consider contributing to Logica development. That’s what open source is all about!   By Konstantin Tretyakov and Evgeny Skvortsov – Logica Open Source Project</p><p> Logica还有更多的东西，所以请确保你给它一个尝试，你会喜欢它！从本教程开始学习Logica。即使您在下一个项目中没有结束使用它，也会学习一种新的强大语言，可能会向一般数据处理和计算的新想法和观点敞开心扉。上面的简单示例仅是一个小型样本，即如何在复杂查询中逐渐超过SQL。特别是，我们甚至没有触及本文中的聚合主题。对于所有此此，请参阅Logica开源存储库的示例部分。我们也希望有些读者考虑为Logica开发提供贡献。这就是开源是什么！由Konstantin Trettyakov和Evgeny Skvortsov  -  Logica开源项目 </p></div><div id="story_share_this"><div class="sharethis-inline-share-buttons"></div></div><div class="text-break sotry_link page_narrow"><a target="_blank" href="https://opensource.googleblog.com/2021/04/logica-organizing-your-data-queries.html">https://opensource.googleblog.com/2021/04/logica-organizing-your-data-queries.html</a></div><div class="story_tags page_narrow"><button type="button" class="btn btn-light my_tag"><a href="/tag/编程/">#编程</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/现代/">#现代</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/modern/">#modern</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/sql/">#sql</a></button></div></div><div class="my_movie_list_item shadow p-3 mb-5 bg-white rounded"><button type="button" class="btn btn-link my_tag"><a href="/tag/web2.0/">#web2.0</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/google/">#google</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/设计/">#设计</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/创意/">#创意</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/摄影/">#摄影</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/图片/">#图片</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/游戏/">#游戏</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/软件/">#软件</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/视频/">#视频</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/手机/">#手机</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/广告/">#广告</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/iphone/">#iphone</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/网站/">#网站</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/apple/">#apple</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/免费/">#免费</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/下载/">#下载</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/windows/">#windows</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/微软/">#微软</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/firefox/">#firefox</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/blog/">#blog</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/苹果/">#苹果</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/音乐/">#音乐</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/博客/">#博客</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/wordpress/">#wordpress</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/恶搞/">#恶搞</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/qq/">#qq</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/艺术/">#艺术</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/web/">#web</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/工具/">#工具</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/分享/">#分享</a></button></div></div></div><div id="my_footer"><div class=""><a href="/tags/">tags</a> <a href="/users/">users</a></div>&copy;2012-2021 diglog.com </div></div></body></html>