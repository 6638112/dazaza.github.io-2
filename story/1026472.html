<!doctype html><html lang="zh-hans"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>用C编写的Urkel认证的密钥值存储</title><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"><link rel="stylesheet" href="/img/css.css?random="><link data-rh="true" rel="icon" href="/img/favicon.ico"/><script data-ad-client="ca-pub-6067137220025946" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script type="text/javascript" src="https://platform-api.sharethis.com/js/sharethis.js#property=5effb96910009800120b8d4d&product=inline-share-buttons" async="async"></script>
<script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?03c1a0f31299b4a2fbb83c34d6beaac9";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script></head><body><div id="my_header"><div class="container"><nav class="navbar navbar-expand-lg"><a class="navbar-brand" href="/"><img alt="diglog" src="/img/logo.v1.gif" class="rounded-sm"></a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarNavAltMarkup"><div class="navbar-nav"></div></div></nav></div></div><div class="container"><div id="my_content"><h1 class="page_narrow">用C编写的Urkel认证的密钥值存储</h1><div class="row"><div class="col-lg-12 col-12"><div class="my_story_list_item shadow p-3 mb-5 bg-white rounded"><div class="story_page_pub_time page_narrow">2020-09-26 04:19:37</div><div class="story_img_container"><a href="http://img2.diglog.com/img/2020/9/624643603c5a383b4f797c13bc5f2466.jpeg"><img src="http://img2.diglog.com/img/2020/9/624643603c5a383b4f797c13bc5f2466.jpeg" class="img-fluid my_story_img" onerror="this.style.display='none'"></a></div><div class="page_narrow text-break page_content"><p>Urkel树被实现为基数为2的Merkel化基数树。它建立在布拉姆·科恩(Bram Cohen)和阿毛里·塞谢(Amaury Séchet)早期的研究基础上，目的是创造一种替代以太16基Trie的方法。</p><p>节点存储在一系列仅附加文件中，以实现快照和崩溃一致性功能。由于这些特性的存在，Urkel能够公开一个完全事务性的数据库。</p><p>Urkel是它自己的数据库。这与早期经过身份验证的数据结构形成对比，后者通常是在现有的数据存储(如LevelDB)之上实现的。</p><p>跨平台-在Windows XP及更高版本以及任何POSIX.1-2001兼容操作系统上运行。</p><p>#include&lt；assert.h&gt；#include&lt；stdlib.h&gt；#include&lt；string.h&gt；#include&lt；urkel.h&gt；int main(Void){UNSIGNED CHAR KEY[32]；UNSIGNED CHAR VAL[4]={0xde，0xad，0xbe，0xef}；UNSIGNED CHAR KEY_OUT[32]；UNSIGNED CHAR VAL_OUT[1024]；/*最大大小(当前)。*/size_t val_len；urkel_t*db；urkel_tx_t*tx；/*打开数据库。*/db=URKEL_OPEN(&#34；/path/to/db&#34；)；ASSERT(db！=NULL)；/*创建事务。*/tx=URKEL_TX_CREATE(db，NULL)；ASSERT(tx！=NULL)；/*哈希键。*/urkel_hash(key，&#34；my key&#34；，6)；/*插入记录。*/Assert(URKEL_TX_INSERT(tx，key，val，sizeof(Val)；/*检索记录。*/ASSERT(Urkel_TX_GET(tx，val_out，&amp；val_len，key))；assert(val_len==sizeof(Val))；assert(memcmp(val_out，val，val_len)==0)；/*提交事务。*/assert(urkel_tx_Commit(Tx))；{unsign char root[32]；unsign char*PROMPT_RAW；SIZE_T PROMPT_LEN；INT EXISTS；/*计算根。*/URKEL_TX_ROOT(tx，root)；/*创建校样。*/ASSERT(Urkel_TX_PROPE(TX，&amp；PROMPT_RAW，&amp；PROMPT_LEN，KEY))；/*验证证明。*/assert(Urkel_Verify(&amp；EXISTS，VAL_OUT，&amp；VAL_LEN，PROMPY_RAW，PROMPT_LEN，KEY，ROOT))；/*返回我们的值。*/ASSERT(EXISTS==1)；ASSERT(val_len==sizeof(Val))；ASSERT(memcmp(val_out，val，val_len)==0)；free(PROMPATE_RAW)；}{/*创建迭代器。*/URKEL_ITER_t*ITER=URKEL_ITER_CREATE(Tx)；size_t i=0；ASSERT(ITER！=NULL)；/*迭代我们的单个记录。*/WHILE(URKEL_ITER_NEXT(ITER，KEY_OUT，VAL_OUT，&amp；VAL_LEN)){ASSERT(memcmp(KEY_OUT，KEY，32)==0)；ASSERT(val_len==sizeof(Val))；ASSERT(memcmp(val_out，val，val_len)==0)；i+=1；}Assert(Urkel_errno==URKEL_EITEREND)；ASSERT(i==1)；Urkel_ITER_DESTORY(ITER)；}/*Cleanup。*/URKEL_TX_DESTORY(Tx)；URKEL_CLOSE(Db)；返回0；}。</p><p>默认构建将为您提供一个URKEL可执行文件。这允许从命令行非常简单地操作URKEL数据库。</p><p>$URKEL CREATE$URKEL root0000000000000000000000000000000000000000000000000000000000000000$URKEL INSERT FOO&#39；DEADE BEAN&#39；-H$URKEL root1da2776eaa254ef65aeeee1f37f61c06bac2e82e221d37da21190191218f6631$URKEL INSERT BAR&#39；01020304&39；-H$URKEL root497b751637ff244ab969a965f8d9dc7623f18d649d012276dfb317b0e38b9bec$URKEL GET BAR-H01020304$URKEL REMOVE BAR-H$URKEL root1da2776eaa254ef65aeeee1f37f61c06bac2e82e221d37da21190191218f6631$URKLE REMOVE FOO-H$URKEL root0000000000000000000000000000000000000000000000000000000000000000。</p><p>$Urkel root497b751637ff244ab969a965f8d9dc7623f18d649d012276dfb317b0e38b9bec$Urkel证明Foo-H03c00100800280a6386fa1781a92e3905f718d4e0ea0d757abe962eefdd52a23d2ad6e1409fd8a0400deadbeef$Urkel验证Foo-H\&#39；03c00100800280a6386fa1781a92e3905f718d4e0ea0d757abe962eefdd52a23d2ad6e1409fd8a0400deadbeef&\--Root&#39；497b751637ff244ab969a965f8d9dc7623f18d649d012276dfb317b0e38b9bec&#39；</p><p>用法：Urkel[Options][action][args]操作：create create a new database销毁数据库信息打印数据库信息root print root hash get&lt；key&gt；检索值INSERT&lt；key&gt；value&gt；INSERT Value Remove&lt；key&gt；Remove Value List All Key Prove&lt；Key&gt；CREATE Proof Verify&lt；Key&gt；&lt；Verify Proof(Required-root)选项：-p，-path&lt；path&gt；数据库的路径(默认值：$URKEL_PATH)-r，--用于快照的ROOT&lt；HASH&&gt;；ROOT HASH-H，--HASH HASH KEY WITH BLAKE2b-256-h，--HELP输出使用信息环境变量：URKEL_PATH数据库的路径(默认值：./)。</p><p>基准测试在高端消费级笔记本电脑上运行，该笔记本电脑包含英特尔酷睿i7-8550U 1.80 GHz和NVMe PCIe固态硬盘。</p><p>基准插入...。操作：100000纳秒：176354477秒：0.176354操作/秒：567039.758225秒/操作：0.000002基准获取(缓存)...。操作：100000纳秒：91769518秒：0.091770操作/秒：1089686.446866秒/操作：0.000001基准提交...。操作：1纳秒：121798848秒：0.121799操作/秒：8.210258秒/操作：0.121799基准获取(未缓存)...。操作：100000纳秒：300755918秒：0.300756操作/秒：332495.535466秒/操作：0.000003基准删除...。操作：100000纳秒：88950509秒：0.088951操作/秒：1124220.660727秒/操作：0.000001基准提交...。操作：1纳秒：30168275秒：0.030168操作/秒：33.147404秒/操作：0.030168基准提交(无)...。运算：1纳秒：24088秒：0.000024运算/秒：41514.447028秒/运算：0.000024基准证明...。操作：100000纳秒：327144781秒：0.327145操作/秒：305675.058286秒/操作：0.000003基准验证...。运算：100000纳秒：330230736秒：0.330231运算/秒：302818.572285秒/运算：0.000003。</p><p>如果你为这个项目贡献代码，你就隐含地允许你的代码在麻省理工学院的许可下分发。您还隐含地验证了所有代码都是您的原创作品。&lt；/法律术语&gt；</p></div><div id="story_share_this"><div class="sharethis-inline-share-buttons"></div></div><div class="text-break sotry_link page_narrow"><a target="_blank" href="https://github.com/chjj/liburkel">https://github.com/chjj/liburkel</a></div><div class="story_tags page_narrow"><button type="button" class="btn btn-light my_tag"><a href="/tag/urkel/">#urkel</a></button></div></div><div class="my_movie_list_item shadow p-3 mb-5 bg-white rounded"><button type="button" class="btn btn-link my_tag"><a href="/tag/web2.0/">#web2.0</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/google/">#google</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/设计/">#设计</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/创意/">#创意</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/摄影/">#摄影</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/游戏/">#游戏</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/图片/">#图片</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/软件/">#软件</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/视频/">#视频</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/手机/">#手机</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/广告/">#广告</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/apple/">#apple</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/iphone/">#iphone</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/网站/">#网站</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/免费/">#免费</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/下载/">#下载</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/windows/">#windows</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/微软/">#微软</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/firefox/">#firefox</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/苹果/">#苹果</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/blog/">#blog</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/音乐/">#音乐</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/博客/">#博客</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/wordpress/">#wordpress</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/恶搞/">#恶搞</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/艺术/">#艺术</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/qq/">#qq</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/web/">#web</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/谷歌/">#谷歌</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/工具/">#工具</a></button></div></div></div><div id="my_footer"><div class=""><a href="/tags/">tags</a> <a href="/users/">users</a></div>&copy;2012-2021 diglog.com </div></div></body></html>