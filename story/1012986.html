<!doctype html><html lang="zh-hans"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>自托管电子邮件服务器</title><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"><link rel="stylesheet" href="/img/css.css?random="><link data-rh="true" rel="icon" href="/img/favicon.ico"/><script data-ad-client="ca-pub-6067137220025946" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script type="text/javascript" src="https://platform-api.sharethis.com/js/sharethis.js#property=5effb96910009800120b8d4d&product=inline-share-buttons" async="async"></script>
<script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?03c1a0f31299b4a2fbb83c34d6beaac9";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script></head><body><div id="my_header"><div class="container"><nav class="navbar navbar-expand-lg"><a class="navbar-brand" href="/"><img alt="diglog" src="/img/logo.v1.gif" class="rounded-sm"></a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarNavAltMarkup"><div class="navbar-nav"></div></div></nav></div></div><div class="container"><div id="my_content"><h1 class="page_narrow">自托管电子邮件服务器</h1><div class="row"><div class="col-lg-12 col-12"><div class="my_story_list_item shadow p-3 mb-5 bg-white rounded"><div class="story_page_pub_time page_narrow">2020-07-20 15:37:54</div><div class="story_img_container"><a href="http://img.diglog.com/img/2020/7/61118277bcdc797f8b082a64d2a9f5eb.jpg"><img src="http://img.diglog.com/img/2020/7/61118277bcdc797f8b082a64d2a9f5eb.jpg" class="img-fluid my_story_img" onerror="this.style.display='none'"></a></div><div class="page_narrow text-break page_content"><p>订阅1998年在我的第一份工作中，我是玻利维亚最大的互联网提供商的系统管理员，现在它仍然是最大的提供商。互联网在1995年或1996年来到这里，所以它才刚刚开始。</p><p>我负责BGP路由器，通过卫星连接到互联网，在那些日子里，整个国家的连接速度只有2 Mbps。我还负责电子邮件服务器(roble.scz.entelnet.bo)，DNS服务器在Unix机器上运行，而电子邮件和Web服务器在RedHat Linux驱动的PC上运行。</p><p>快进到2001年，我成立了自己的公司，它与系统管理无关，但无论如何我们需要电子邮件服务，所以我只是获得了一个带有/28公共IP段的在线通道，并设置了一台运行BIND、Sendmail、Dovecot的CentOS服务器。</p><p>2007年，我开始使用Apache、PHP和MySQL在同一台服务器上运行的Drupal上写博客，这里是我的第一篇文章。我以前是主持服务的。</p><p>但后来我手中的时间变少了，维护服务运行也变得更加困难，更新垃圾邮件过滤器和规则变得困难，BIND也有问题，Slashdot发生了，带宽不足。</p><p>我把我的服务器转移到一家网络托管公司，然后转移到Linode VPS，我还外包了DNS服务，并将电子邮件转移到Google Apps。</p><p>那或多或少是在2010年，所以我停止了托管我的服务，只有我的博客在我手中，但那时我开始使用Jekyll，所以它只是一个带有Nginx的VPS。</p><p>今年4月，我开始了这个博客，但我也注册了Fedariable，并决定运行我自己的实例，因此我再次托管，那不只是一台Nginx服务器，然后我读到了这个、这个和这个。</p><p>经营我的服务的想法又一次出现在我的脑海里。我想随着时间的推移做不同的事情，现在已经不是1998年了，所以我决定了解一下Docker。所以现在我只有一台Arch Linux服务器：</p><p>都是用Docker编写的文件，但是遗漏了一些东西，那就是电子邮件。(乳齿象有自己的服务器-还没有-)。</p><p>我想在Docker上运行一个电子邮件服务器，所以我寻找了一些替代方案，我发现有一些非常好的。</p><p>我还没有测试过，但似乎真的很容易部署，它有一个免费版本，我认为个人使用已经足够了，有两个专业选项，每月收费。</p><p>它是Poste.io的克隆，但仅使用我安装和配置的免费开放源码替代方案，我只用了45分钟就为我的一个域运行了服务器。它有一个根据您的选项创建配置文件的工具，它可以为您设置一切，您可以在这里找到它，您只需回答几个问题，然后运行三四个命令，您就拥有了一个完整的电子邮件服务器。</p><p>然后我发现了这个，它也是一个完整的套件，都是开源的，有非常好的文档，可以用Docker部署在服务器上。它不像麦露那么简单，但我决定用它。我遵循了这个指南，是的，我知道，如果你遵循这个指南，你仍然需要Gmail或任何其他提供商来发送你的电子邮件。但是我还没有准备好完全跳进池子里。</p><p>MX记录指向我的服务器，所以我的所有电子邮件都由我的服务器接收。</p><p>Gmail配置为使用这些帐户作为默认帐户，而不是Gmail地址，并使用我的SMTP服务器发送</p><p>这样，我确信我在使用我的域名，因为我们已经同意每个人都应该拥有自己的域名，对吗？我正在使用Gmail作为我的电子邮件客户端。</p><p>我之所以这样做，是因为使用Gmail搜索电子邮件很容易，也因为我不确定我是否会丢失服务器和丢失一些重要的电子邮件。我需要确定这一点，因为我是为我的家人举办的，而不仅仅是我自己。</p><p>此外，在手机上安装IMAP客户端也会耗尽电池，因为即使没有东西可下载，或者如果您保持打开的IMAP空闲连接，它也会轮询服务器，也会耗尽电池。有一个解决方案，你需要Pushover，这个IMAP to Pushover应用程序，我还没有测试，但我认为是可行的。</p><p>如果您计划托管您自己的电子邮件服务器，您需要考虑一些重要的事情，那就是正确配置您的DNS服务器。以下是您需要的内容：</p><p>您确实需要配置SPF记录，这并不适用于所有提供商，但是有大量的文档，这并不难做到。该记录基本上告诉收件人服务器谁有权代表您的域发送邮件。最常见的配置是MX服务器是授权的，如下所示。</p><p>这个有点难，您需要创建DKIM密钥，您的电子邮件服务器可以做到这一点，上面的所有示例都可以做到，一旦您有了它，您需要在DNS上创建一个TXT记录并将其粘贴到那里，它将如下所示：</p><p>您的所有电子邮件都将使用该DKIM密钥签名，接收服务器可以使用DNS中的信息检查签名是否有效。</p><p>这是可选的，但最好有它，您可以使用像这样的在线工具生成它。它所做的是告诉发生故障时要做什么，以及向谁报告这一点，通常是服务器管理员，也就是您。</p><p>您需要有一个PTR DNS记录，即您的服务器正在使用的IP的反向DNS应该指向与A记录相同的名称。举个例子，如果你有一张A唱片。</p><p>您需要要求IP所有者为您添加该记录，如果您使用的是VPS，您可以查看相关文档。</p><p>当然，您需要一个MX记录，但是您已经知道了这个记录，否则运行您自己的服务器可能不是一个好主意。这基本上通知所有发送服务器哪个服务器正在接收您的域的电子邮件。</p><p>一旦您设置好一切，等待24小时DNS传播并测试它，这个工具非常棒。</p><p>您可能不需要托管您的电子邮件服务器，您可以使用Fastmail、Zoho、Office 365或Google Suite，但您必须使用您的域，所有帐户、所有银行对帐单都应发送到您域中的电子邮件地址，否则您可能会失去对帐户的控制。托管电子邮件服务器不是一件容易的事情，处理垃圾邮件很难，停机也可能是一场噩梦，但在托管电子邮件的过程中，您会学到一两件事。</p></div><div id="story_share_this"><div class="sharethis-inline-share-buttons"></div></div><div class="text-break sotry_link page_narrow"><a target="_blank" href="https://www.garron.blog/posts/host-your-email-server.html">https://www.garron.blog/posts/host-your-email-server.html</a></div><div class="story_tags page_narrow"><button type="button" class="btn btn-light my_tag"><a href="/tag/电子邮件/">#电子邮件</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/email/">#email</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/服务器/">#服务器</a></button></div></div><div class="shadow p-3 mb-5 bg-white rounded clearfix"><div class="container"><div class="row"><div class="col-sm"><div><a target="_blank" href="/story/1012143.html"><img src="http://img.diglog.com/img/2020/7/thumb_a187173d21fbfe9a2a8a3c11e979644d.png" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1012143.html">Hey.com和Fastmail的对决。综述</a></div><span class="my_story_list_date">2020-7-16 4:32</span></div><div class="col-sm"><div><a target="_blank" href="/story/1010658.html"><img src="http://img.diglog.com/img/2020/7/thumb_969483a775a2e737eac61154036e6ee8.jpg" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1010658.html">监狱电子邮件公司收取数百万美元</a></div><span class="my_story_list_date">2020-7-9 6:1</span></div><div class="col-sm"><div><a target="_blank" href="/story/1010216.html"><img src="http://img.diglog.com/img/2020/7/thumb_5c1e7fa451e4fae6e965b960c91e4bd9.jpg" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1010216.html">
电子邮件坏了，嘿的杰森·弗莱德在这里修复它</a></div><span class="my_story_list_date">2020-7-7 6:47</span></div><div class="col-sm"><div><a target="_blank" href="/story/1009231.html"><img src="http://img.diglog.com/img/2020/7/thumb_9250be733d1af3ad9060595654327f64.jpg" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1009231.html">电子邮件未损坏</a></div><span class="my_story_list_date">2020-7-1 15:2</span></div></div></div></div><div class="my_movie_list_item shadow p-3 mb-5 bg-white rounded"><button type="button" class="btn btn-link my_tag"><a href="/tag/web2.0/">#web2.0</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/google/">#google</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/设计/">#设计</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/创意/">#创意</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/摄影/">#摄影</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/游戏/">#游戏</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/图片/">#图片</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/软件/">#软件</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/视频/">#视频</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/手机/">#手机</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/广告/">#广告</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/apple/">#apple</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/iphone/">#iphone</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/网站/">#网站</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/免费/">#免费</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/下载/">#下载</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/windows/">#windows</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/微软/">#微软</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/firefox/">#firefox</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/苹果/">#苹果</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/blog/">#blog</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/音乐/">#音乐</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/博客/">#博客</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/wordpress/">#wordpress</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/恶搞/">#恶搞</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/艺术/">#艺术</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/qq/">#qq</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/web/">#web</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/谷歌/">#谷歌</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/工具/">#工具</a></button></div></div></div><div id="my_footer"><div class=""><a href="/tags/">tags</a> <a href="/users/">users</a></div>&copy;2012-2021 diglog.com </div></div></body></html>