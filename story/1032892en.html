<!doctype html><html lang="zh-hans"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Rails 6.1 RC1</title><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"><link rel="stylesheet" href="/img/css.css?random="><link data-rh="true" rel="icon" href="/img/favicon.ico"/><script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?03c1a0f31299b4a2fbb83c34d6beaac9";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script><script data-ad-client="ca-pub-6067137220025946" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script type="text/javascript" src="https://platform-api.sharethis.com/js/sharethis.js#property=5effb96910009800120b8d4d&product=inline-share-buttons" async="async"></script></head><body><div id="my_header"><div class="container"><nav class="navbar navbar-expand-lg"><a class="navbar-brand" href="/"><img alt="diglog" src="/img/logo.v1.gif" class="rounded-sm"></a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarNavAltMarkup"><div class="navbar-nav"></div></div></nav></div></div><div class="container"><div id="my_content"><h1 class="page_narrow">Rails 6.1 RC1</h1><div class="row"><div class="col-lg-12 col-12"><div class="my_story_list_item shadow p-3 mb-5 bg-white rounded"><div class="story_page_pub_time page_narrow">2020-11-03 10:14:19</div><div class="story_img_container"><a href="http://img2.diglog.com/img/2020/11/e5c947b7730c1c416fa0ef68131c8242.png"><img src="http://img2.diglog.com/img/2020/11/e5c947b7730c1c416fa0ef68131c8242.png" class="img-fluid my_story_img" onerror="this.style.display='none'"></a></div><div class="page_narrow text-break page_content"><p>The first release candidate for Rails 6.1 has been released and wow does it have a lot of great stuff! We’ve been hardat work these past few months implementing improvements to multiple databases, adding support for destroyingassociations in jobs instead of in-memory, turning errors into objects, and so much more.</p><p>Rails 6.1的第一个候选版本已经发布，哇，它有很多很棒的东西！在过去的几个月里，我们一直在努力实现对多个数据库的改进，添加对在作业中而不是在内存中销毁关联的支持，将错误转化为对象，等等。</p><p> It’s amazing how Rails has grown over the years and while we have some improvements to make to the onboarding process, Rails has never been better. The featuresin this release focus on adding the functionality you need to keep your application up and running for years to come.</p><p>Rails多年来的发展令人惊讶，虽然我们需要对入职过程进行一些改进，但Rails从未像现在这样好过。此版本的功能侧重于添加您需要的功能，以使您的应用程序在未来几年保持正常运行。</p><p>    Rails 6.1 provides you with the ability to  switch connections per-database. In 6.0 if you switched to the  reading role then all database connections also switched to the reading role. Now in 6.1 if you set  legacy_connection_handling to  false in your configuration, Rails will allow you to switch connections for a single database by calling  connected_to on the corresponding abstract class.</p><p>Rails 6.1为您提供了按数据库切换连接的能力。在6.0中，如果您切换到读取角色，那么所有数据库连接也都切换到读取角色。现在，在6.1中，如果您在配置中将LISTICATION_CONNECTION_HANDLING设置为FALSE，Rails将允许您通过调用相应抽象类上的CONNECTED_TO来切换单个数据库的连接。</p><p>  Rails 6.0 provided the ability to functionally partition (multiple partitions, different schemas) your database but wasn’t able to support horizontal sharding (same schema, multiple partitions). Rails wasn’t able to support horizontal sharding because models in Active Record could only have one connection per-role per-class. This is now fixed and  horizontal sharding with Rails is available.</p><p>Rails 6.0提供了对数据库进行功能分区(多个分区、不同模式)的能力，但不能支持水平分片(相同模式、多个分区)。Rails不能支持水平分片，因为活动记录中的模型每个角色每个类只能有一个连接。现在已修复此问题，并且可以使用Rails进行水平切分。</p><p>  In addition to adding horizontal sharding support we added tons of new functionality and improved a lot of internals for multiple databases.  Kyle Thompson added support for  database namespaced tasks like  db:schema:dump:namespace,  db:schema:load:namespace,  db:structure:dump:namespace, and  db:structure:load:namespace.  Jean Boussier from Shopify improved  connection pool management.</p><p>除了添加水平分片支持外，我们还为多个数据库添加了大量新功能并改进了大量内部功能。Kyle Thompson添加了对数据库命名空间任务的支持，如db：schema：dump：Namespace、db：Schema：Load：Namespace、db：Structure：Dump：Namespace和db：Structure：Load：Namespace。Shopify的Jean Boussier改进了连接池管理。</p><p>  In addition to the many database and connection management improvements,  Aaron Patterson and  Eileen M. Uchitelle added support for  strict loading associations. With this feature you can ensure that all your associations are loaded eagerly and stop N+1’s before they happen.  Kevin Deisz added additional support to  association declarations and  bogdanvlviv added support to turn  strict loading on by default.</p><p>除了许多数据库和连接管理改进之外，Aaron Patterson和Eileen M.Uitelle还添加了对严格加载关联的支持。使用此功能，您可以确保您的所有关联都已立即加载，并在N+1发生之前停止它们。Kevin Deisz添加了对关联声明的额外支持，bogdanvlviv添加了对默认情况下打开严格加载的支持。</p><p>  Rails 6.1 adds “Delegated Types” as an alternative to single-table inheritance. This is helpful for representing class hierarchies allowing the superclass to be a concrete class that is represented by its own table. Each subclass has its own table for additional attributes. Check out the  pull request written by  DHH.</p><p>Rails 6.1添加了“委托类型”作为单表继承的替代方案。这对于表示类层次结构很有帮助，允许超类成为由其自己的表表示的具体类。每个子类都有自己的附加属性表。查看由DHH编写的拉取请求。</p><p>  Destroy associations async adds the ability for applications to  destroy associations in a background job. This can help you avoid timeouts and other performance issues in your application when destroying data. The  implementation was a group effort - the PR was started by  George Claghorn from Basecamp, further support added by  Cory Gwin of GitHub and finalized by  Rafael França and  Adrianna Chang from Shopify.</p><p>异步销毁关联为应用程序添加了在后台作业中销毁关联的功能。这可以帮助您在销毁数据时避免应用程序中的超时和其他性能问题。实施是一个团队的努力-公关是由Basecamp的George Claghorn启动的，GitHub的Cory Gwin补充了进一步的支持，Shopify的Rafael França和Adrianna Chang最终敲定了公关。</p><p>  Active Model’s errors are now objects with an interface that allows your application to more easily handle and interact with errors thrown by models.  The feature was implemented by  lulalala and includes a query interface, enables more precise testing, and access to error details.</p><p>Active Model的错误现在是具有接口的对象，该接口允许您的应用程序更轻松地处理模型引发的错误并与之交互。该功能由lulalala实现，包括一个查询接口，支持更精确的测试和访问错误详细信息。</p><p>  Active Storage got a nice update in Rails 6.1! You can now configure attachments for service you want to store them in. The  feature was implemented by  Dmitry Tsepelev.</p><p>活动存储在Rails 6.1中有了很好的更新！现在，您可以为要存储附件的服务配置附件。该功能是由德米特里·特塞佩列夫实现的。</p><p> Additionally, Rails 6.1 adds support to Active Storage for  permanent URLs for blobs. Implemented by  Peter Zhu from Shopify, this feature allows configuring your attachments to use a private or public URL and ensures that public URLs will always use a permanent URL.</p><p>此外，Rails 6.1为BLOB的永久URL添加了对active Storage的支持。此功能由Shopify的Peter朱实现，允许将附件配置为使用私有或公共URL，并确保公共URL始终使用永久URL。</p><p>  If you like to run your application deprecation-warning free then this feature is for you. The feature allows applications to  optionally raise an error if a deprecation warning is thrown. This is useful for making sure developers don’t reintroduce deprecation warnings that have already been fixed. The feature was implemented by  Cliff Pruitt of Test Double!</p><p>如果您喜欢运行您的应用程序而不受警告，那么这个功能就是为您准备的。该功能允许应用程序在抛出弃用警告时选择性地引发错误。这对于确保开发人员不会重新引入已修复的弃用警告非常有用。该功能是由Test Double的Cliff Pruitt实现的！</p><p>  A release isn’t just about the awesome features you get. It’s also about fixing bugs, improving performance, and making Rails more stable for everyone. This release includes an improvement that  avoids making a query if  where passes an empty array reported by  Molly Struve and the fix implemented by  John Hawthorn.  Eileen M. Uchitelle and  Aaron Patterson also implemented a  performance improvement that speeds up  where queries when we know all the values are an integer.</p><p>发布不仅仅是关于你得到的令人惊叹的功能。它还涉及到修复错误、提高性能，并使Rails对每个人来说都更稳定。此版本包括一项改进，避免了在WHERE传递Molly Struve报告的空数组和John Hawthorn实现的修复时进行查询。Eileen M.Uitelle和Aaron Patterson还实现了性能改进，当我们知道所有值都是整数时，可以加快WHERE查询的速度。</p><p>  The  classic autoloader has served us well since the first Rails release, but there’s a new kid on the block and it is going to start its deprecation cycle.</p><p>自从第一个Rails发布以来，经典的自动加载机一直很好地服务于我们，但现在有了一个新成员，它将开始它的弃用周期。</p><p> New Rails projects are strongly discouraged from using the  classic autoloader, and we recommend that existing projects running on  classic switch to  zeitwerk mode when upgrading. Please check the   Upgrading Ruby on Rails guide for tips.</p><p>强烈建议新的Rails项目不要使用经典自动加载器，我们建议在升级时将运行在经典自动加载器上的现有项目切换到zeitwerk模式。请查看Ruby on rails升级指南获取提示。</p><p>  There are so many great changes in Rails 6.1.  686 people made contributions to Rails. Check out the  CHANGELOGS for more details on bug fixes, performance improvements, and other features.</p><p>在Rails 6.1中有如此多的巨大变化。686人为Rails做出了贡献。有关错误修复、性能改进和其他特性的更多详细信息，请查看CHANGELOGS。</p><p> Thank you to everyone who reported a bug, sent a pull request, and helped improve Rails. Rails is better because of your hard work!</p><p>感谢报告错误、发送拉入请求并帮助改进Rails的每个人。Rails因为您的辛勤工作而变得更好！</p><p> We hope you test out Rails 6.1 and love it as much as we do. Please report any bugs to the  Rails issue tracker.</p><p>我们希望您测试一下Rails 6.1，并和我们一样热爱它。请向Rails问题跟踪器报告任何错误。</p></div><div id="story_share_this"><div class="sharethis-inline-share-buttons"></div></div><div class="text-break sotry_link page_narrow"><a target="_blank" href="https://weblog.rubyonrails.org/2020/11/2/Rails-6-1-rc1-release/">https://weblog.rubyonrails.org/2020/11/2/Rails-6-1-rc1-release/</a></div><div class="story_tags page_narrow"><button type="button" class="btn btn-light my_tag"><a href="/tag/rails/">#rails</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/添加/">#添加</a></button></div></div><div class="my_movie_list_item shadow p-3 mb-5 bg-white rounded"><button type="button" class="btn btn-link my_tag"><a href="/tag/web2.0/">#web2.0</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/google/">#google</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/设计/">#设计</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/游戏/">#游戏</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/创意/">#创意</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/apple/">#apple</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/苹果/">#苹果</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/摄影/">#摄影</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/软件/">#软件</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/美国/">#美国</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/iphone/">#iphone</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/图片/">#图片</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/手机/">#手机</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/视频/">#视频</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/广告/">#广告</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/免费/">#免费</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/谷歌/">#谷歌</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/网站/">#网站</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/windows/">#windows</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/微软/">#微软</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/下载/">#下载</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/firefox/">#firefox</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/音乐/">#音乐</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/linux/">#linux</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/blog/">#blog</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/博客/">#博客</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/程序/">#程序</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/艺术/">#艺术</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/web/">#web</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/wordpress/">#wordpress</a></button></div></div></div><div id="my_footer"><div class=""><a href="/tags/">tags</a> <a href="/users/">users</a></div>&copy; 2020 diglog.com </div></div></body></html>