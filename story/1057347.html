<!doctype html><html lang="zh-hans"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>介质 - 热代码重新加载Python </title><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"><link rel="stylesheet" href="/img/css.css?random="><link data-rh="true" rel="icon" href="/img/favicon.ico"/><script data-ad-client="ca-pub-6067137220025946" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script type="text/javascript" src="https://platform-api.sharethis.com/js/sharethis.js#property=5effb96910009800120b8d4d&product=inline-share-buttons" async="async"></script>
<script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?03c1a0f31299b4a2fbb83c34d6beaac9";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script></head><body><div id="my_header"><div class="container"><nav class="navbar navbar-expand-lg"><a class="navbar-brand" href="/"><img alt="diglog" src="/img/logo.v1.gif" class="rounded-sm"></a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarNavAltMarkup"><div class="navbar-nav"></div></div></nav></div></div><div class="container"><div id="my_content"><h1 class="page_narrow">介质 - 热代码重新加载Python </h1><div class="row"><div class="col-lg-12 col-12"><div class="my_story_list_item shadow p-3 mb-5 bg-white rounded"><div class="story_page_pub_time page_narrow">2021-04-10 03:29:56</div><div class="story_img_container"><a href="http://img2.diglog.com/img/2021/4/775ef809fc8d0383d7951c872bcad710.jpeg"><img src="http://img2.diglog.com/img/2021/4/775ef809fc8d0383d7951c872bcad710.jpeg" class="img-fluid my_story_img" onerror="this.style.display='none'"></a></div><div class="page_narrow text-break page_content"><p>介质更新Live代码巧妙：更改函数或方法将使代码指针剪辑，以便同时修改所有现有实例以实现新行为。修改模块时，只会重新运行更改的行。</p><p>     使用介的最简单方法是将-M致致脚本调用，或使用介绍而不是Python。您可以使用-v来获取有关观看文件的反馈以及更改文件时会发生什么。</p><p>     用法：介介[ -  verbose] [ -  vatch path] [-m module] [path] ...运行一个python脚本，以便它是实时可编辑的。定位参数：脚本的路径路径运行...脚本参数Optional Arguments：-h，--help显示此帮助消息和退出 -  verbose，-v显示观看的文件和它们发生的更改--watch path，-w路径通配符路径/目录手表-M模块模块或模块：运行功能</p><p>  首先，如果有问题，请使用详细的标志（介质-v）来获取更多信息。它将输出手表＆lt;文件＆gt;对其手表和更新/添加/删除且更新/删除且函数＆gt的每个文件的陈述。在原始文件中更新，添加或删除函数时的语句，然后保存它。</p><p>  默认情况下，在当前工作目录中观看脚本。尝试判决-w＆lt;文件＆gt;观看特定文件，或介绍-W /观看所有文件。</p><p>  它＆＃39可能是因为您使用的编辑器保存到临时交换文件中，并将其移动到位（VI执行此处）。介质使用介绍时的看门狗库在发生时失去文件。挂断更好的解决方案，您可以尝试配置编辑器，以便直接写入文件。例如，在VI中，：SET NOMRITEBACKUP似乎执行诀窍（将其放在您的.vimrc中或在第一次保存之前执行它）。</p><p>  如果您正在在＆＃39; s当前正在运行的函数内编辑A for循环的主体，则下次调用函数时，更改将实际上实际上。解决方法是将for循环的主体解压缩到自己的辅助函数中，然后您可以编辑。或者，您可以使用沿译文重新加载。 </p><p>类似地，更新生成器或异步函数不会更改已在运行的生成器或异步函数的行为。</p><p>  在判决不理解的某些数据结构中装饰或藏起时，可能会更新某些功能。致辞确实必须找到他们更新它们，不幸的是。</p><p>  您可以调用murigged.watch（）以编程方式开始观看更改。这也应该在Ipython或Jupyter内工作，作为AutoReload Magic的替代品。</p><p>  默认情况下，将关注当前目录中的所有文件，但您可以使用murigged.watch（＆＃34; script.py＆＃34;）只能观看单个文件，或jurgged.watch（＆＃34; /＆＃ 34;）观看所有模块。</p><p>  可以使用Recoder进行编程方式更改功能。用murigges.make_recoder制作一个。这可用于实现热修补或嘲笑。更改也可以写回文件系统。</p><p> 从致介导导入make_recoder def f（x）：return x * x断言f（2）== 4＃更改函数的行为，但不在原始文件recoder = make_recoder（f）recoder中。补丁（＆＃34; def f（x）：返回x * x * x＆＃34;）断言f（2）== 8＃revert更改Recoder。恢复（）断言F（2）== 4＃或：将修补程序写入原始文件本身Recoder。犯罪（）</p><p> 如果没有提交，则还原只会恢复到最后一个提交，或者原始内容。 </p><p>Recoder还允许您将导入，辅助功能等添加到补丁，但必须在这种情况下使用recoder.patch_module（...）。</p><p>  致辞工作在令人惊讶的大量情况下，但有几个案例赢得了几个案例，或者在＆＃39; T工作，或者可能出现问题：</p><p> 已运行的函数将继续使用现有代码运行。只有下一个调用将使用新代码。如果要能够修改循环运行，则可以使用重新加载除了介绍。</p><p> 更改初始化器或属性名称可能会导致现有实例的错误。介质修改了类的所有现有实例，但它不会重新运行现有实例上的__init__或重命名属性，因此您可以轻松地使用损坏的对象（新方法，但旧数据）。</p><p> 更新装饰器或封闭件的代码可能或可能无法工作。介质将尽力而为，但有可能会更新一些封闭物，而不是其他人。</p><p> 查看/调整功能代码的装饰器可能不会正确更新。尝试编译/ JIT Python代码Won＆＃39; t知道关于介绍和赢得的＆＃39; t能够重做新代码的工作。</p><p> 如果它们在旧功能上设置（介介特定）__conform__属性，则可以工作。 __conform__将引用应替换它的函数，或者如果要删除它。 </p><p>通过模块爬行以查找功能对象并将其与定义匹配。它将通过课堂成员，遵循功能＆＃39; __wrapped__和__clure__指针，等等。</p><p> 修改文件时，将其重新解析为一组定义并将其与原始定义匹配，并产生一组更改，添加和删除。</p><p> 有关更改，请执行新代码（如果他们没有更改，则剥离装饰器），然后采取生成的函数＆＃39; s内部__code__指针并将其推入旧的函数。如果更改失败，则将重新解释为旧代码的删除，然后添加新代码。</p><p>  介质的两个最可比的实现和＃39; s功能集的两个功能集（但它可能有点难以找到相当的一切）是Ipython和Limeade中的％自动加载。以下是关键差异：</p><p> 当其代码更改时，它们都重新执行整个模块。相比之下，手术提取来自解析树的更改函数，只取而代之。它仅在模块中执行新的或更改的语句。</p><p> 哪个更好是有些情况依赖性：一方面，重新执行模块将拿起更多的变化。另一方面，它将重新初始化模块变量和状态，因此某些事情可能会破裂。介相＆＃39; S方法更保守，只会拿起修改的功能，但它不会触及其他任何东西，所以我相信它不太可能产生意外的副作用。它也告诉你它在做什么:)</p><p> 他们将重新执行装饰器，而介狗将挖掘它们并更新它在内部找到的功能。 </p><p>再次，没有客观地卓越的方法。 ％autOreload将正确重新执行更改的装饰器，但这些装饰器将返回新对象，因此如果模块导入已装饰的功能，则会赢得＆＃39; t更新到新版本。 如果您只修改函数＆＃39;但是，如果介绍，则介绍通常能够在装饰器内更改它，因此所有旧实例都将使用新的行为。  这是一个双刃剑，因为即使介狗也可以将Live更新添加到具有零线的额外代码的现有脚本，它根本不是线程（代码可以在更新的中间执行，这可能是不一致的 状态）。  重新加载可以包装迭代器以使循环可修改。 介质不能这样做，但您可以同时使用两个包。 </p></div><div id="story_share_this"><div class="sharethis-inline-share-buttons"></div></div><div class="text-break sotry_link page_narrow"><a target="_blank" href="https://github.com/breuleux/jurigged">https://github.com/breuleux/jurigged</a></div><div class="story_tags page_narrow"><button type="button" class="btn btn-light my_tag"><a href="/tag/python/">#python</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/代码/">#代码</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/加载/">#加载</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/hot/">#hot</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/更改/">#更改</a></button></div></div><div class="shadow p-3 mb-5 bg-white rounded clearfix"><div class="container"><div class="row"><div class="col-sm"><div><a target="_blank" href="/story/1057274.html"><img src="http://img2.diglog.com/img/2021/4/thumb_31de5da65e03e1b3359a92d772c98388.png" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1057274.html">没有Python翻译？ 这个简单的恶意软件安装自己的副本 </a></div><span class="my_story_list_date">2021-4-9 22:15</span></div><div class="col-sm"><div><a target="_blank" href="/story/1056940.html"><img src="http://img2.diglog.com/img/2021/4/thumb_daacc23b71e491fecf6eb28f7ad0be78.png" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1056940.html">如何在2021年制作一个Python包 </a></div><span class="my_story_list_date">2021-4-8 10:12</span></div><div class="col-sm"><div><a target="_blank" href="/story/1056634.html"><img src="http://img2.diglog.com/img/2021/4/thumb_f8f5d529d35334f2fb264d19f656224e.png" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1056634.html">Python 3.9.4. </a></div><span class="my_story_list_date">2021-4-7 7:49</span></div><div class="col-sm"><div><a target="_blank" href="/story/1056010.html"><img src="http://img2.diglog.com/img/2021/4/thumb_9b5cdc184ef69f39458e662451cadb19.jpg" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1056010.html">Python中的交换案例等效是什么？ </a></div><span class="my_story_list_date">2021-4-4 5:26</span></div></div></div></div><div class="my_movie_list_item shadow p-3 mb-5 bg-white rounded"><button type="button" class="btn btn-link my_tag"><a href="/tag/web2.0/">#web2.0</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/google/">#google</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/设计/">#设计</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/创意/">#创意</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/摄影/">#摄影</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/游戏/">#游戏</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/图片/">#图片</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/软件/">#软件</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/视频/">#视频</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/手机/">#手机</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/广告/">#广告</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/apple/">#apple</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/iphone/">#iphone</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/网站/">#网站</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/免费/">#免费</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/下载/">#下载</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/windows/">#windows</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/微软/">#微软</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/firefox/">#firefox</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/苹果/">#苹果</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/blog/">#blog</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/音乐/">#音乐</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/博客/">#博客</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/wordpress/">#wordpress</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/恶搞/">#恶搞</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/艺术/">#艺术</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/qq/">#qq</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/web/">#web</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/谷歌/">#谷歌</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/工具/">#工具</a></button></div></div></div><div id="my_footer"><div class=""><a href="/tags/">tags</a> <a href="/users/">users</a></div>&copy;2012-2021 diglog.com </div></div></body></html>