<!doctype html><html lang="zh-hans"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Debian看门人：60k林田问题自动修复</title><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"><link rel="stylesheet" href="/img/css.css?random="><link data-rh="true" rel="icon" href="/img/favicon.ico"/><script data-ad-client="ca-pub-6067137220025946" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script type="text/javascript" src="https://platform-api.sharethis.com/js/sharethis.js#property=5effb96910009800120b8d4d&product=inline-share-buttons" async="async"></script>
<script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?03c1a0f31299b4a2fbb83c34d6beaac9";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script></head><body><div id="my_header"><div class="container"><nav class="navbar navbar-expand-lg"><a class="navbar-brand" href="/"><img alt="diglog" src="/img/logo.v1.gif" class="rounded-sm"></a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarNavAltMarkup"><div class="navbar-nav"></div></div></nav></div></div><div class="container"><div id="my_content"><h1 class="page_narrow">Debian看门人：60k林田问题自动修复</h1><div class="row"><div class="col-lg-12 col-12"><div class="my_story_list_item shadow p-3 mb-5 bg-white rounded"><div class="story_page_pub_time page_narrow">2020-08-22 18:09:17</div><div class="page_narrow text-break page_content"><p>Debian看门人是一个自动系统，它提交对Debian包中的(小)问题的修复，这些问题可以通过软件修复。它在12月初逐渐开始提出合并建议。发出的第一组更改对Git中维护的sid包运行了lintian-brush。这篇帖子是关于看门人进步的系列文章的一部分。</p><p>为了确定要处理哪些包，看门人查看UDD[1]中可用的归档中的lintian输出的导入。它将优先处理那些有修复程序的最严重问题的包。</p><p>一旦选择了包，它将克隆包存储库并对其运行lintian-brushon。林田笔刷提供了一个框架，用于将一组“修复器”应用于书包。它将在库的原始版本中运行一组“修复程序”中的每一个，并处理大部分繁重的工作。</p><p>每个修复程序只是一个可执行文件，它在包的干净签出中运行，并且可以在那里进行更改。大多数修复程序都是用Python或Shell编写的，但它们可以是任何语言。</p><p>如果修复程序以非零值退出，则会恢复更改，并认为修复程序已失败。</p><p>如果以零退出并进行了更改，则它应该将其更改的摘要写入标准输出。</p><p>如果修复程序不确定它所做的更改，它应该使用伪头报告标准输出。默认情况下，lintian-brush将丢弃任何不确定的更改，但是如果您在本地运行它，您仍然可以通过指定--uncerned来应用它们。</p><p>如果包不使用GBP DCH，则标准输出上的摘要消息将用于提交消息和(可能)ChangeLog消息。</p><p>让我们看一个例子。自从Debian Policy 4.0.1(于017年8月发布)以来，包优先级“Extra”已被弃用-请参阅Policy 2.5&#34；Priority&#34；。取而代之的是，大多数包应该使用“可选”优先级。</p><p>当软件包使用不推荐的“Extra”值作为“Priority”时，Lintian会发出警告--相关的标记是priority-extra-is-replaced-by-priority-optional.Lintian-brush有一个修复程序脚本，可以自动将“Extra”替换为“Optional”。</p><p>在安装了林田笔刷的系统上，修复程序的源代码位于/usr/share/lintian-brush/fixers/priority-extra-is-replaced-by-priority-optional.py，中，但下面是它的副本以供参考：</p><p>#！/usr/bin/python3 from debmuate.control从lintian_brush.fixer导入ControlEditor导入report_result，fix_lintian_tag使用ControlEditor()作为更新程序：用于更新程序中的para。段落：如果第。GET(&#34；优先级&#34；)==&#34；额外&#34；：para[&#34；优先级&#34；]=&#34；可选&#34；FIXED_LINTIAN_TAG(para，&#39；priority-extra-is-replaced-by-priority-optional&#39；)REPORT_RESULT(&#34；将额外优先级更改为可选优先级。&#34；)。</p><p>这个修复程序是用Python编写的，它使用demuate库在保留格式的同时轻松修改控制文件-如果无法保留格式，则退出。</p><p>所有当前的修复程序都带有测试，例如，对于这个特定的修复程序，测试可以在这里找到：https://salsa.debian.org/jelmer/lintian-brush/-/tree/master/tests/priority-extra-is-replaced-by-priority-optional.。</p><p>以下是当前可用的修复程序列表，以及每个修复程序成功合并/推送的数量：</p></div><div id="story_share_this"><div class="sharethis-inline-share-buttons"></div></div><div class="text-break sotry_link page_narrow"><a target="_blank" href="https://www.jelmer.uk/janitor-update-3.html">https://www.jelmer.uk/janitor-update-3.html</a></div><div class="story_tags page_narrow"><button type="button" class="btn btn-light my_tag"><a href="/tag/issues/">#issues</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/lintian/">#lintian</a></button></div></div><div class="my_movie_list_item shadow p-3 mb-5 bg-white rounded"><button type="button" class="btn btn-link my_tag"><a href="/tag/web2.0/">#web2.0</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/google/">#google</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/设计/">#设计</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/创意/">#创意</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/摄影/">#摄影</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/游戏/">#游戏</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/图片/">#图片</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/软件/">#软件</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/视频/">#视频</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/手机/">#手机</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/广告/">#广告</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/apple/">#apple</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/iphone/">#iphone</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/网站/">#网站</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/免费/">#免费</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/下载/">#下载</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/windows/">#windows</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/微软/">#微软</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/firefox/">#firefox</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/苹果/">#苹果</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/blog/">#blog</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/音乐/">#音乐</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/博客/">#博客</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/wordpress/">#wordpress</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/恶搞/">#恶搞</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/艺术/">#艺术</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/qq/">#qq</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/web/">#web</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/谷歌/">#谷歌</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/工具/">#工具</a></button></div></div></div><div id="my_footer"><div class=""><a href="/tags/">tags</a> <a href="/users/">users</a></div>&copy;2012-2021 diglog.com </div></div></body></html>