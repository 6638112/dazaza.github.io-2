<!doctype html><html lang="zh-hans"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>我几乎被解雇了在我们的企业应用程序中选择反应 I Almost Got Fired for Choosing React in Our Enterprise App</title><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"><link rel="stylesheet" href="/img/css.css?random="><link data-rh="true" rel="icon" href="/img/favicon.ico"/><script data-ad-client="ca-pub-6067137220025946" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script type="text/javascript" src="https://platform-api.sharethis.com/js/sharethis.js#property=5effb96910009800120b8d4d&product=inline-share-buttons" async="async"></script>
<script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?03c1a0f31299b4a2fbb83c34d6beaac9";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script></head><body><div id="my_header"><div class="container"><nav class="navbar navbar-expand-lg"><a class="navbar-brand" href="/"><img alt="diglog" src="/img/logo.v1.gif" class="rounded-sm"></a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarNavAltMarkup"><div class="navbar-nav"></div></div></nav></div></div><div class="container"><div id="my_content"><h1 class="page_narrow">I Almost Got Fired for Choosing React in Our Enterprise App<br/>我几乎被解雇了在我们的企业应用程序中选择反应 </h1><div class="row"><div class="col-lg-12 col-12"><div class="my_story_list_item shadow p-3 mb-5 bg-white rounded"><div class="story_page_pub_time page_narrow">2021-03-12 19:06:33</div><div class="story_img_container"><a href="http://img2.diglog.com/img/2021/3/4bf8a9d8010537cfe9b2533969858b97.jpeg"><img src="http://img2.diglog.com/img/2021/3/4bf8a9d8010537cfe9b2533969858b97.jpeg" class="img-fluid my_story_img" onerror="this.style.display='none'"></a></div><div class="page_narrow text-break page_content"><p>It’s summer 2018. My boss, Adrian, asks me to join him in a Skype call with James, the CTO of a big Canadian company.</p><p>这是2018年夏天。我的老板阿德里安让我在一个大加拿大公司的首席技术官詹姆斯加入他的Skype呼叫。</p><p> While getting to know each other, I find out that James is a smart guy with big ambition. His vision is to migrate a massive desktop WPF application to the web in the cloud.</p><p> 虽然相互了解，但我发现詹姆斯是一个雄心壮志的聪明人。他的愿景是将大规模的桌面WPF应用程序迁移到云中的Web。</p><p> I like his friendly attitude and I can tell that he is eager to collaborate with us. He already has a development partner in India, but they lack experience in building web applications.</p><p> 我喜欢他友好的态度，我可以告诉他渴望与我们合作。他已经在印度拥有一个发展伙伴，但他们缺乏建立Web应用程序的经验。</p><p> Adrian an d I follow the standard approach for this situation. We have a few more calls and then we start the discovery phase in which we try to grasp the big picture and find the non-functional requirements. These are the main points we should focus on:</p><p> Adrian A D我遵循这种情况的标准方法。我们有几个电话，然后我们开始发现的发现阶段，我们试图掌握大局并找到非功能性要求。这些是我们应该关注的要点：</p><p> A big application — more than 220 pages, most of which are maintenance screens and around 20% of which are highly customized.</p><p> 大应用程序 - 超过220页，其中大部分是维护屏幕，其中大约20％是高度定制的。</p><p> Display large amounts of data, especially in grids with all kinds of features: grouping, column freezing, row expand, custom columns, you name it.</p><p> 显示大量数据，尤其是在具有各种功能的网格中：分组，列冻结，行展开，自定义列，您将其命名为。</p><p>    Quick onboarding for new team members, especially for the .NET developers working on the old desktop application.</p><p>    新团队成员的快速仓库，特别是对于在旧桌面应用程序上工作的.NET开发人员。 </p><p> As an architect, my role is to create a technical proposal that contains the architecture details, approach, roadmap, guidelines, and most importantly, the technology stack that will be used.</p><p>作为架构师，我的角色是创建一个技术提案，其中包含架构细节，方法，路线图，指导方针，最重要的是，将使用的技术堆栈。</p><p> James mentioned multiple times that he wants a future-proof technology, and he is not in favor of Angular because it has a bad reputation after AngularJS got deprecated.</p><p> 詹姆斯多次提到他想要一个未来的技术，他并不赞成角度，因为它在Angularjs被贬值后它具有糟糕的声誉。</p><p> I had already successfully implemented a few small and medium-sized projects using both Angular and React, so I am not really attached to any of them. I feel that either could do the job.</p><p> 我已经成功地使用了一个角度和反应来实现了一些中小型项目，所以我并没有真正附加到其中任何一个。我觉得要么可以做这项工作。</p><p> For this project, I pick React with Redux… which I will regret two years later.</p><p> 对于这个项目，我选择与Redux的反应......我会在两年后后悔。</p><p> We assign a team of three developers to work on the proof of concept, and after two months, it’s a success. Super-responsive user interface, blazing-fast build time, and high development speed. Everyone is happy.</p><p> 我们为三个开发人员分配了一个团队来努力解决概念证明，并在两个月后，这是一项成功。超级响应用户界面，燃烧 - 快速构建时间和高的发展速度。大家都开心。</p><p>  After the proof of concept, it’s time for the developers from the client’s outsourcing team to join in. We hadn’t started the knowledge-sharing sessions yet and the CTO sends me an email saying, “Hey, Răzvan. We really have to meet tomorrow with my outsourcing team.”</p><p>  在概念证明之后，现在是客户外包团队的开发人员加入的时候了。我们还没有开始知识共享会议，并将CTH发送给我一封电子邮件，“嘿，răzvan。我们真的不得不和我的外包团队明天见面。“</p><p>  “Where is the dependency injection? What do you mean by ‘There is no need for one?’ Here is one: InversifyJS!”</p><p>  “依赖注入在哪里？你是什​​么意思'没有必要？'这里是一个：InversifyJS！“ </p><p> “Functional components? No, no, no. We don’t like them. Let’s use class components!”</p><p>“功能组件？不不不。我们不喜欢他们。让我们使用类组件！“</p><p> “Why do these functions just hang around and why aren’t they encapsulated inside service classes to make them static?”</p><p> “为什么这些函数只是围绕，为什么他们封装在服务类内，以使它们静态？”</p><p> “Where is the Retry Policy for the API? Let’s implement one using PollyJS.”</p><p> “API的重试策略在哪里？让我们使用pollyjs来实现一个。“</p><p> “Why are file names dash-case when class names are PascalCase? It should reflect the class name, so from now on, we will name them  SomePageComponent.tsx.”</p><p> “为什么文件名dash-case当类名是pascalcase时？它应该反映类名，所以从现在开始，我们会将它们命名为somepageComponent.tsx。“</p><p> And, the one that annoys me most: “How can I run it using Visual Studio and not Visual Studio Code?”</p><p> 而且，最让我惹恼我的那个：“我如何使用Visual Studio且不是Visual Studio代码运行它？”</p><p> It‘s’ clear to me. They want to use the .NET guidelines and design patterns in React. I have seen this happen many times — developers who have a hard time adapting to the new technology’s way of doing things. So I am not afraid of getting into a debate about why those are unusual patterns for React.</p><p> 这对我来说很清楚。他们希望使用.NET指南和设计模式反应。我已经看到这一切发生了很多次 - 开发人员，他们难以适应新技术的做事方式。所以我不害怕进入辩论，了解为什么那些对反应不寻常的模式。</p><p> But in this case, the CTO is backing his team, which is normal. He had known me for just two months, while he had been working with his team for many years. I have to make compromises and agree with their proposals.</p><p> 但在这种情况下，CTO正在支持他的团队，这是正常的。他只知道我只有两个月了，而他一直在与他的团队合作多年。我必须妥协并同意他们的提案。 </p><p> I just realized that React is not Java or .NET developer-friendly.  Angular would have been a better choice in this case because of similar design patterns.</p><p>我刚才意识到反应不是Java或.NET开发人员友好。由于类似的设计模式，在这种情况下，角度将是一个更好的选择。</p><p>  React is an unopinionated library, which means that it doesn’t have an opinion about how to implement cross-cutting concerns. So it is your and your team’s responsibility to develop an opinion about how to do it and especially what other libraries you want to use. Of course, you will use third-party libraries because you don’t want to reinvent the wheel. And there are so many options for everything in React.</p><p>  React是一个未致力于未致病的图书馆，这意味着它没有关于如何实施跨领域问题的意见。因此，您和您的团队有责任为如何做到，特别是您要使用的其他图书馆的意见。当然，您将使用第三方库，因为您不想重新发明轮子。还有很多选择反应的一切。</p><p> For the proof of concept, I already had an opinion about how we should handle most of the cross-cutting concerns. Now they had to be revalidated with the new team members. This is a minimal list of topics to discuss:</p><p> 对于概念证明，我已经对我们应该如何处理大部分交叉的关注点。现在他们必须与新的团队成员一起重新婚姻。这是讨论的最小主题列表：</p><p>  So we spend another three weeks making those decisions. I can feel you screaming at me, “Come on, man! There is no way it takes three weeks to pick those libraries!”</p><p>  所以我们花了三个星期制作这些决定。我可以觉得你尖叫着我，“来吧，男人！挑选这些图书馆没有3个星期！“</p><p> Well… welcome to enterprise projects. There are many decisions. For each one, you have to create decision criteria, do research, validate findings by creating a proof of concept, present findings, document everything in the decision log, and keep libraries up to date. It takes a crazy amount of time, and it is not even fun.</p><p> 嗯...欢迎来到企业项目。有许多决定。对于每个人来说，您必须通过创建概念证明，当前调查结果，在决策日志中的所有内容中创建决策标准，进行研究，验证验证结果，并将库保持最新。它需要一段疯狂的时间，它甚至没有乐趣。</p><p> And I am not even considering the time that each developer spends on learning all those third-party libraries. I never saw two React projects with the same dependencies, project structure, and guidelines. This means the knowledge is not transferable from project to project, as can be the case in Angular or Vue.</p><p> 而且我甚至不考虑每个开发人员在学习所有第三方图书馆时花在学习所有第三方图书馆的时间。我从未见过具有相同依赖性，项目结构和指南的两项反应项目。这意味着知识无法从项目到项目转移，就像角度或Vue一样。</p><p> After those three weeks of not making any progress in implementing functional user stories, the CTO starts to worry.</p><p> 在执行功能用户故事的情况下，这三周后，CTO开始担心。 </p><p>  After nine months, we have more than 50 pages created. The developers notice that function components are as good as class components and start using them. So, now the project no longer follows the original coding guidelines. It’s more like a personal choice for each developer. And for me, that is OK.</p><p>九个月后，我们创建了超过50页。开发人员注意到函数组件与类组件一样好并开始使用它们。因此，现在项目不再遵循原始编码指南。它更像是每个开发人员的个人选择。对我来说，没关系。</p><p> React Hooks is released and gets popular. The team has mixed feelings. Some developers are offended by the suggestion that  classes confuse both people and machines, while others are enthusiastic about the new coding pattern.</p><p> React Hooks被释放并受欢迎。球队的感情很多。一些开发人员被课程混淆了人员和机器的建议冒犯了，而其他人则热衷于新的编码模式。</p><p> All the third-party libraries that we are using have added support for Hooks, and it looks like the entire React world is going in that direction. So what should we do? Should we deviate from the original coding guidelines and add a third way of implementing components? There is no way of going back and migrating existing pages and components to Hooks!</p><p> 我们正在使用的所有第三方库都添加了对钩子的支持，看起来整个反应世界正在进行这方面。那么我们该怎么办？我们应该偏离原始编码指南并添加第三种实施组件吗？无法返回和将现有页面和组件迁移到挂钩！</p><p> The team is in favor of using Redux Hooks because there is no need to use Redux  connect() and separate the dump components from the containers. This makes sense and we agree that from now on, new pages and components will use Hooks. We will leave the old ones as they are.</p><p> 该团队赞成使用Redux挂钩，因为无需使用Redux Connect（）并将转储组件与容器分开。这是有道理的，我们同意现在开始，新页面和组件将使用钩子。我们会像他们一样离开旧的。</p><p> And that’s how we end up with three ways of doing things. There is no consistency anymore.</p><p> 这就是我们如何以三种做事的方式结束。没有一致性了。</p><p> To make things even worse, some developers start to push the idea of not using Redux anymore but  useState instead. This means that we will disrupt the idea of having a single global state.</p><p> 要使事情更糟糕，一些开发人员开始推动不再使用Redux但是使用的想法。这意味着我们将扰乱单一全球州的想法。</p><p> Suspense is still an experimental feature. I am concerned about what will happen when it gets released.</p><p> 悬念仍然是一个实验特征。我担心在它被发布时会发生什么。 </p><p>  When we did the setup for Continuous Integration, the build took around three minutes, including  npm install. But now, after a year, it takes around 15 minutes.</p><p>当我们为持续集成进行设置时，构建花了大约三分钟，包括NPM Install。但现在，一年后，它需要大约15分钟。</p><p> We also had to configure Node.js to extend RAM to 4GB because 2GB was no longer enough. This is not a big issue. What is concerning is that the developers have started complaining that the build takes so much time, the hot reloading stops working after 45-60 minutes of development, and a restart takes more than five minutes — especially for those with Windows machines (Linux systems apparently are much faster for Node.js). Sometimes, they have to delete  node_modules entirely and download dependencies again because it simply won’t work otherwise.</p><p> 我们还必须配置node.js以将RAM扩展到4GB，因为2GB不再足够了。这不是一个大问题。什么是关于开发人员开始抱怨建设需要这么多时间，热重新加载在开发45-60分钟后停止工作，重启需要超过五分钟 - 特别是对于那些带Windows机器的人（显然是Linux系统Node.js的速度要快得多。有时，它们必须完全删除node_modules并再次下载依赖项，因为它根本无法正常工作。</p><p> What can you expect when there are 1,200+ dependencies in  node_modules with a total of 600MB in size?</p><p> 在Node_Modules中有1,200多个依赖项时，您可以期待什么，总共大小为600MB？</p><p> For an enterprise application, everything is about costs. Let’s say a developer has to restart six times a day with an hourly rate of $40 per hour. Six times/day x five minutes x 240 days/year x $40/hour x eight developers = $38,400/year. This is not a big amount for an enterprise, but it makes a nice annual bonus for the project sponsors. After all, it’s equal to a brand new Tesla Model 3.</p><p> 对于企业应用程序，一切都是关于成本的。让我们说，开发商必须每天六次重新启动，每小时每小时40美元。六次/天x五分钟x 240天/年x $ 40 /小时x八个开发人员= 38,400美元/年。这对企业来说并不大量，但它为项目提案国提供了一个很好的年度奖金。毕竟，它等于一个全新的Tesla模型3。</p><p>  Most developers disagree with me, but I feel that a big part of the business logic is inside Redux async actions. Most of the time, it’s the only place where you can do the validation, API calls, error handling, trigger redux mutations, or trigger a notification toaster. If these are not considered business logic on frontend applications, then what is?</p><p>  大多数开发人员对我不同意，但我觉得企业逻辑的大部分都是Redux Async行动。大多数情况下，它是唯一可以执行验证，API调用，错误处理，触发Redux突变的地方，或触发通知烤面包机。如果这些不被视为前端应用程序的业务逻辑，那么是什么？</p><p> We use Redux-Saga, which was a poor decision because it adds unnecessary complexity. Thunk would have been good enough.</p><p> 我们使用Redux-Saga，这是一个糟糕的决定，因为它增加了不必要的复杂性。干得好足够好。</p><p> In enterprise applications, you have to upgrade and revalidate the dependencies once in a while. It is a good practice because you want security updates, performance improvements, and small incremental API changes while hoping for no breaking changes. It looks like Redux-Saga is being left behind. The last update was more than one year ago and the number of GitHub issues is still increasing without anybody fixing them.</p><p> 在Enterprise应用程序中，您必须升级并遍历依赖于依赖项。这是一个很好的做法，因为你想要安全更新，性能改进和小增量API更改，同时希望没有破坏变化。它看起来像redux-saga被遗忘了。最后的更新是一年多的更新，GitHub问题的数量仍在增加，而无需任何人都会修复它们。 </p><p> Developers love React for three reasons: simplicity, flexibility, and ecosystem. React’s team enjoy experimenting with new ideas, but this is killing the ecosystem! They should be brave and take the blame for it!</p><p>开发人员喜欢作出三个原因：简单，灵活性和生态系统。 React的团队喜欢尝试新的想法，但这杀了生态系统！他们应该勇敢，责备它！</p><p> Indeed, React is mostly backward-compatible, but the ecosystem around React is not. Developers and third-party libraries will always use the latest features and architecture patterns, while old experiments will be left behind to die. This should not be a problem for small and medium-sized projects because you can adapt much more easily. But for big multi-year projects, these experiments can be a deal-breaker.</p><p> 实际上，反应大多是向后兼容的，但反应的生态系统不是。开发人员和第三方图书馆将始终使用最新的功能和架构模式，而旧实验将被留下来死亡。这不应该是小型和中型项目的问题，因为您可以更容易地适应。但对于大年的项目来说，这些实验可以是交易破坏者。</p><p> It’s already September 2020 and I decide to include React-Saga in the risk assessment results for the technical steering committee.</p><p> 它已经是9月2020年9月，我决定在技术指导委员会的风险评估结果中包括反应 - 佐贺。</p><p> Because 30% of the business logic was inside the sagas, I marked it as a high risk. That was when the CTO lost his temper and blamed me for making poor decisions when we started the project.</p><p> 因为30％的业务逻辑在SAGAS内，我将其标记为高风险。那是当CTO失去他的脾气并指责我在开始项目时责备了差的决定。</p><p> It was just the spark the product manager needed. He uses this as an opportunity to start asking questions like:</p><p> 这只是产品经理所需的火花。他用它作为开始询问问题的机会，如：</p><p>  Things escalate to the management level. I spend many hours looking for evidence to prove that we made the best decisions at the time — not the way I want to spend my weekend.</p><p>  事情升级到管理层。我花了很多时间寻找证据证明我们当时做了最好的决定 - 不是我想度过我周末的方式。</p><p> Several retrospective meetings later, we are sailing through calm waters again. After all, the project is almost done. It’s close to entering maintenance mode.</p><p> 几个回顾性会议后，我们再次航行了平静的水域。毕竟，该项目几乎完成了。它接近进入维护模式。 </p><p>  I love React. I use it for all my personal projects and would love to recommend it for new work initiatives. However, after the unpleasant experience I had, I will not encourage using it for enterprise applications. Not again.</p><p>我喜欢反应。 我为所有个人项目使用它，并希望推荐新的工作计划。 但是，在我难以愉快的经验之后，我不会鼓励对企业应用程序使用它。 再也不。 </p></div><div id="story_share_this"><div class="sharethis-inline-share-buttons"></div></div><div class="text-break sotry_link page_narrow"><a target="_blank" href="https://betterprogramming.pub/i-almost-got-fired-for-choosing-react-in-our-enterprise-app-846ea840841c">https://betterprogramming.pub/i-almost-got-fired-for-choosing-react-in-our-enterprise-app-846ea840841c</a></div><div class="story_tags page_narrow"><button type="button" class="btn btn-light my_tag"><a href="/tag/程序/">#程序</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/企业/">#企业</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/choosing/">#choosing</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/项目/">#项目</a></button></div></div><div class="my_movie_list_item shadow p-3 mb-5 bg-white rounded"><button type="button" class="btn btn-link my_tag"><a href="/tag/web2.0/">#web2.0</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/google/">#google</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/设计/">#设计</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/创意/">#创意</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/摄影/">#摄影</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/图片/">#图片</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/游戏/">#游戏</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/软件/">#软件</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/手机/">#手机</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/视频/">#视频</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/广告/">#广告</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/iphone/">#iphone</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/网站/">#网站</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/免费/">#免费</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/下载/">#下载</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/windows/">#windows</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/微软/">#微软</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/apple/">#apple</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/firefox/">#firefox</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/blog/">#blog</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/苹果/">#苹果</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/音乐/">#音乐</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/博客/">#博客</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/wordpress/">#wordpress</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/恶搞/">#恶搞</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/qq/">#qq</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/艺术/">#艺术</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/web/">#web</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/谷歌/">#谷歌</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/工具/">#工具</a></button></div></div></div><div id="my_footer"><div class=""><a href="/tags/">tags</a> <a href="/users/">users</a></div>&copy; 2020 diglog.com </div></div></body></html>