<!doctype html><html lang="zh-hans"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>到Poom的旅程（Pico8 Doom） </title><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"><link rel="stylesheet" href="/img/css.css?random="><link data-rh="true" rel="icon" href="/img/favicon.ico"/><script data-ad-client="ca-pub-6067137220025946" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script type="text/javascript" src="https://platform-api.sharethis.com/js/sharethis.js#property=5effb96910009800120b8d4d&product=inline-share-buttons" async="async"></script>
<script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?03c1a0f31299b4a2fbb83c34d6beaac9";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script></head><body><div id="my_header"><div class="container"><nav class="navbar navbar-expand-lg"><a class="navbar-brand" href="/"><img alt="diglog" src="/img/logo.v1.gif" class="rounded-sm"></a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarNavAltMarkup"><div class="navbar-nav"></div></div></nav></div></div><div class="container"><div id="my_content"><h1 class="page_narrow">到Poom的旅程（Pico8 Doom） </h1><div class="row"><div class="col-lg-12 col-12"><div class="my_story_list_item shadow p-3 mb-5 bg-white rounded"><div class="story_page_pub_time page_narrow">2021-05-09 06:58:39</div><div class="story_img_container"><a href="http://img2.diglog.com/img/2021/5/3ecf6096419a435af7ae92289f215f61.png"><img src="http://img2.diglog.com/img/2021/5/3ecf6096419a435af7ae92289f215f61.png" class="img-fluid my_story_img" onerror="this.style.display='none'"></a></div><div class="page_narrow text-break page_content"><p>由于一个（仍未发布的）项目，一个突击席位 - 一场攻击 - 我曾经像孩子一样玩的游戏（双棍！出色的音乐！超低低音爆炸！）。</p><p>  2020年初，为我的丝般流畅的旋转孔发动机骄傲完全在记忆中运行，远低于50％的CPU与敌方单位。</p><p>        引擎看起来不错，是时候导出到HTML和演示它。我在我的家用电脑和手机上运行了几次测试......</p><p>  它没有顺利，表现遍布各地，需要一个强大的PC以全速运行。</p><p>  向Zep（Joseph White，Pico8作者）报告错误（？），显而易见的是，游戏在二进制操作上依赖太多并删除了Web播放器。模拟API成本的微妙平衡并没有考虑到这么多＆＃34;低级＆＃34;每帧的操作。</p><p>    Poke4（ mem， BOR（ BOR（ BOR（ROTR（频带（SHL（MX（频带（MX，0xFFFF）， 频段（LSHR（SRCY，16），0x0.FFFF））]，SHL（频段（SRCX，7），2）），0xF000），28）， rotr（频段（shl（mx（bor（mx + mdx1,0xffff）， 频段（LSHR（SRCY-DDY1,16），0x0.ffff））]，SHL（带（SRCX + DDX1,7），2）），0xF000），24））， BOR（ROTR（频带（SHL（MX（MX + MDX2,0xFFFF）， 频段（LSHR（SRCY-DDY2,16），0x0.ffff））]，SHL（频段（SRCX + DDX2,7），2）），0xF000），20）， ROTR（频段（SHL（M [BOR（BAND（MX + MDX3,0xFFFF）， 频段（LSHR（SRCY-DDY3,16），0x0.FFFF））]，SHL（带（SRCX + DDX3,7），2）），0xF000），16））） ）， BOR（ BOR（ROTR（频带（SHL（MX（频段）（mx + mdx4,0xffff）， 频段（LSHR（SRCY-DDY4,16），0x0.ffff））]，SHL（频段（SRCX + DDX4,7），2）），0xF000），12）， rotr（频段（shl（mx（mx + mdx5,0xffff）， 频段（LSHR（SRCY-DDY5,16），0x0.FFFF）），SHL（频段（SRCX + DDX5,7），2）），0xF000），8））， BOR（ROTR（频段（SHL（MX（频带（MX + MDX6,0xFFFF）， 频段（LSHR（SRCY-DDY6,16），0x0.ffff））]，SHL（带（SRCX + DDX6,7），2）），0xF000），4）， 频段（SHL（M [BOR（BAND（MX + MDX7,0xFFFF）， 频段（LSHR（SRCY-DDY7,16），0x0.FFFF））]，SHL（频段（SRCX + DDX7,7），2）），0xF000）） ） ）</p><p>  长话短说，Pico8 0.2不久 - 二元运营商和Tline（＆＃34;纹理线＆＃34;）是一件事...... </p><p>tline x0 y0 x1 y1 mx my [mdx mdy] [图层]  将纹理线从（x0，y0）绘制到（x1，y1），从地图采样颜色值。  半开玩笑，我告诉Zep关于我们将在任何时候都有的洪水克隆......  如果说，我会挖掘自己有点进入二进制空间分区（BSP树）＆amp; 门户？  善良的事情接近（非常成功的）第30岁的比赛是文件和amp; 工具是顶级陷阱！  由便携性和amp驱动; 可扩展性，现在使用开放文本格式（UDMF）表示级别几何，从而节省了WAD结构的繁琐二元打开包装（在某种程度上......）并完美地快速黑客。  5月9日至10日：武装从埃里斯顿计数埃里斯顿的实时碰撞检测，为UDMF解析的Antlr和良好的Python我得到了我的第一个BSP编译器，并运行Pico8渲染器：  接下来的2周都花了挖掘了WAD结构（我想我现在知道一只Linef是什么......）并越过Zoom Wiki一百万次。 </p><p>我的自定义编译器很快被删除，支持＆＃34;官方＆＃34; ZBSP编译器（没有什么比错误修复多年！），Python代码完全解码二进制WAD文件，支持复杂的几何，包括纹理墙壁＆amp;楼层：</p><p>            由于纹理在内，发动机离开了＆＃34;佳能＆＃34;前后厄运渲染到前面。</p><p>  无论如何，我真的从未想过前后Woudl工作 - 对于Pico8的编程更像是针对一个非常低端的GPU。</p><p>  根据厄运标准，透视正确纹理＆amp;只要世界由平面墙和宽大的墙壁制成，遮荫为便宜的工作地板。</p><p>  使用标准调色板交换完成快速深度遮荫（您的样子越远，它越暗）。深度信息索引渐变表，存储在Pico8 RAM中。它使完整的调色板交换速度比常规方法PAL（）呼叫，节省核心墙壁和amp的宝贵循环;地板光栅化循环：</p><p>    回到前面的渲染意味着失去自然＆＃34;缩小＆＃34;标准厄运水平扫描（参见黑书以进行广泛的解释！）和较大级别的性能影响有限。</p><p>    我知道地震有同样的问题，并使用潜在可见的集（PVS）解决了它。在编译时生成的PVS是来自任何给定的子扇区的所有潜在可见的凸子扇区的集合（慢慢读取两次！）。 </p><p>令人惊讶的是，如何产生适当的PVS，我发现的最值得注意的来源很少有文献：</p><p>      PVS被编码为位域，存储为32bits块以保留控制中的内存使用（比Quake PV的RLE编码更简单）：</p><p>   -  PVS（包装为位数）unpack_array（function（）  - 可见子扇区ID（16位） local id = unpack_variant（）  - 包装作为位域 PVS [ID \ 32] = BOR（PVS [ID \ 32]，0x0.0001＆lt;（ID＆amp; 31））结尾）</p><p>    更多地在将旋转精灵进入游戏引擎的情况下工作，这是明显的精灵房地产将成为一个重大痛点。供参考，单个士兵姿势正在吃几乎一半的可用空间。和＃34;小＆＃34;精灵......</p><p>    我知道游戏将是多车，也就是说，存储可能不是我的主要关注点，Pico8有一个大型2MB的Lua RAM玩。</p><p>  如果精灵可以适应内存，如何最好使用内置Pico8 Sproite缩放功能（读取，SSPR）？</p><p>  如果我有某种快速内存分配器怎么办？上次循环使用的缓存是这种情况的良好设计模式，如果块的大小是固定的，则足够简单。 </p><p>如果我拆分精灵略微分为小（但不是太小）块，比如16x16，从中获取他们的实际精灵位置和＃34;虚拟内存＆＃34;分配器？</p><p>  7月15日，这确实是一种非常可行的方法 -  Memcpy足够快，可以在飞行中换流所需的精灵瓷砖。精灵可以高达16瓦，例如16瓦。 64像素上升64像素，允许大型怪物等春天的原始尺寸的1/2。</p><p>      虚拟精灵引擎（TM！）集成在游戏中 - 怪物可能不仅仅是模糊的像素化乱七八糟！</p><p>    基于其半径，在每个子扇区都注册了演员。假设＆＃34的数量，使用基本插入排序对给定的子扇区上的多个演员进行排序。演员通常很低：</p><p>   - 所有事物中的所有事物 对于东西，_成对（segs.things）做 本地x，y = thing [1]，事情[2] 本地轴，AZ = M1 * X + M3 * Y + M4，M9 * x + M11 * Y + M12  -  todo：考虑到半径 如果az＆gt; 8和az＆lt; 854和ax和az和-ax＆lt; az然后  - 默认值：在排序阵列结尾插入 本地w，thingi = 128 / az，#imest + 1  - 基本插入排序 对于我，在iPairs（事物）中的其他工作 如果（其他[1]＆gt; w）thingi =我打破了 结尾  - 透视缩放 添加（事物，{w，thing，63.5 + ax * w，63.5-（thing [3] + m8）* w}，thingi） 结尾 结尾</p><p>      请参阅凸面侧面的前正面渲染是如何删除GIF下面的一部分Cacodaemon。 Sprite呈现多次，最后渲染（在最近的子扇区中）修复了图像：</p><p>    每次子部门注册演员（例如BSP叶子）也用于加速玩家/演员＆amp;演员/演员碰撞检测。 </p><p>夏季时间，此时，我的目标很清楚：使发动机尽可能轻松地与艺术家合作，我＆＃39; ll需要一个团队来实现视力。</p><p>        每个＆＃34;事情＆＃34;运行它＆＃39;自己的小状态机，可以参考精灵和呼叫游戏功能：</p><p>  演员Zombieman：怪物3004{ 健康20. 半径20. 高度56. 速度8. 状态 { 产卵： poss一个10 a_look; 环形 看： poss a 8 poss b 8 a_chase; 环形 导弹： poss e 10 a_facetarget; poss f 8 a_firebullets（22.5,0,1,9，＆＃34; bulletpuff＆＃34;）; poss e 8. 去看 死亡： POSS H 5. poss i 5 // a_scream poss j 5 // a_noblocking poss k 5. poss l 60. 停止 }}</p><p>  Python编译器支持有限的功能集，但足以支持关键的DOOM游戏元素（状态，动画，使用参数调用）。</p><p>  运行时部分足够简单，以符合少于20行代码：</p><p>   -  VM更新勾选=函数（self） 蜱虫！=  -  1做  - 等待（+重置随机启动延迟） if（ticks＆gt; 0）滴答+ = delay-1 delay = 0返回true  - 完成，下一步 if（ticks == 0）i + = 1：：环形：： 地方州=州[i]  - 停止（或VM指令的结尾） 如果（不是状态或extend.jmp == -1）del_thing（self）返回  - 循环或转到 如果（state.jmp）self：hump_to（state.jmp）goto循环  - 有效状态 self.state =状态  - 获得蜱虫 蜱=州[1]  - 触发功能（如果有的话）  - 提供所有者和自我（例如，武器） if（state.fn）state.fn（self.owner或self，self） 结尾结尾</p><p>  总之，游戏中的所有内容都使用相同的语法描述：武器，子弹，项目＆amp;怪物！ </p><p>到8月，我有一个可以轻松安装的Python包。编译器支持许多关键的厄运功能（门，平台，怪物，Infigthing，多种武器，拾取，难度级别......）。</p><p>        八月结束，我伸手去偏执狂仙人掌（X-Zero的名声和我的工作总粉丝！），让＆＃39;等等...</p><p>  偏执狂仙人掌（Simon Huleinga Irl）回复了几天后几天，似乎有兴趣 - 好消息！</p><p>                这就是这样，西蒙是一个多级Gamevev，掌握代码，艺术，音乐＆amp;游戏（是的，生活是不公平的！）。</p><p>  偏执狂仙人掌在游戏玩法方面取得了铅，我们都进入了挑战性目前的功能的例程，重新加工发动机支持在保持令牌的同时支持越来越多的细节。要命名一些：</p><p>    代码进入大规模的重构，始终接近危险区域，始终找到挤压我们最后一个想法的新方法！</p><p>  示例令牌优化技术，其中项目标识符，属性名称和解压缩功能被声明为大型文本块： </p><p>-  布局： - 财产掩码 - 属性类名称 - 房产解压缩功能本地属性_factory = split（＆＃34; 0x0.0001，Health，Unpack_variant，0x0.0002，Armor，Unpack_variant，0x0.0004，unpack_variant，0x0.0008，maxamount，Unpack_variant，0x0.0010，图标，Unpack_chr，0x0 .0020，slot，mpeek，0x0.0040，Ammouse，Unpack_variant，0x0.0080，速度，unpack_variant，0x0.0100，损坏，unpack_variant，0x0.0200，Ammotype，Unpack_ref，0x0.0800，Mass，Unpack_variant，0x0.1000 ，Pickupsound，Unpack_variant，0x0.2000，攻击，unpack_variant，0x0.4000，Hudcolor，0x0.8000，Deathsound，Unpack_variant，0x1，Meleerange，Unpack_variant，0x2，MaxtargetRange，Unpack_variant，0x4，Ammogive，Unpack_variant，0x8，Tradtype ，unpack_ref，0x10，拖动，unpack_fixed＆＃34;，＆＃34;，＆＃34;，1） - 属性：当前演员的属性位域对于i = 1，＃properties_factory，3做 如果属性_factory [i]＆amp;属性！= 0然后  - 解压缩＆amp;为演员分配价值 演员[属性_factory [i + 1]] = _ env [properties_factory [i + 2]]（演员） 结尾结尾</p><p>        碰撞经历了多次重构，使世界感觉坚实 - 其中一个关键点。</p><p>  我真的很惊讶地发现厄运使用不同的数据模型来处理碰撞（众所周知的BlockMap），当BSP将具有完美的匹配（黑书和amp; Carmack Notes确认这是一个错过的机会）。</p><p>  Poom碰撞代码生成沿着光线遍历的Linefs列表，使用BSP按顺序遍历世界。</p><p>  有一天，你有一个超级练习例程，第二天你得到了那个gif：</p><p>    根本原因是BSP树松散的扇区空间关系，例如， 2墙可能在树的2个不同的一部分上，留下一种＆＃34; GAP＆＃34;按顺序处理碰撞时。</p><p>  溶液是将每个壁视为胶囊（例如，带半径的射线），确保球播路径不能落入壁段之间。 </p><p>在所有情况下，PVS计算也非常棘手。在失败时，整个部门最终会从屏幕上消失（被称为＆＃34;黑色扇区＆＃34;由我和西蒙）。</p><p>        来自给定的子扇区（凸区）： 迭代所有双面狐 寄存器连接的子扇区（＆＃34;其他子扇区和＃34;） ＃查找所有反门户网站 对于来自其他子行业的所有双面Linefef： 如果其他leinef是前面或跨跨的电流leinef： 将leinef对注册为门户＃剪辑＆amp;找到可见的几何虽然门户集不是空： 创建剪辑区域（＆＃34;反半影＆＃34;） 对于目的地门户的所有两侧： 如果侧面是背部或跨越： 剪辑段 如果有的话： 注册一个新的门户网站 标记子部门可见</p><p>    在游戏Deviopement之前不支持压缩，我已经成为一个LZW编码器，用于攻击相当良好的攻击。</p><p>  事情是，我很快意识到LZW解压缩是一个记忆猪，当然与已经伸展可用RAM的游戏不兼容......</p><p>      Python中的压缩代码，解压缩代码足够小以适应令牌预算，最好的全部，固定内存帽！</p><p>  压缩比率约为50％，在图片和世界数据上有足够的工作。</p><p>      那个障碍是一个较大的一级播放层面回到后面会在2MB限制上提示游戏。 </p><p>以下是我用来了解我是否正在讨论垃圾收集错误或依赖周期或其他一些错误的图表......  大多数数据结构转换为阵列，代码令人享受，但内存用法返回安全区域  没有正确像素的Poom吸引力就没有 - 我们需要许多像素......  左右：原始厄运Imp | 自动50％缩放+调色板转换| 手固定  9月至12月的最佳部分是重写选定的演员达到正确的质量水平。  Pico8游戏都是关于制作选择，即使使用如此大的游戏，也不是每个想法都可以制作它。  有趣＆amp; 游戏玩法主要是第一个，第二岁和＃34;嘿，它适合＆＃34; 我相信西蒙在播放游戏设计决策时，仍然试图让他用新的发动机特征，如透明纹理！ </p><p>似乎显而易见，一旦你花了几个月在比赛上工作，有一双新鲜的眼睛是宝贵的。</p><p>  向Tom Hall（厄运设计名人谱和居民Pico8 Discord成员）发出邀请，他们迅速提出了众多的生活质量调整＆amp;熟悉水平进步。</p><p>  最值得注意的添加是鼠标支持（引用Tom＆＃34;我想要鼠标支持＆＃34;），接线＆＃34;鼠标锁定＆＃34;浏览器处理程序到Pico8 GPIO将坐标沟通回游戏。</p><p>  向zep的转发当然有助于将鼠标锁作为天然pico8特征（在夜晚的小小时内提供的封面修补程序下！） - 谢谢！</p><p>    Behond这项技术，主要带走的是，如此大的比赛将难以拔出没有团队合作，善良的话语＆amp;扩展PICO8社区的贡献（嘿@Farbs，@nucertide，@sam，@valeradhd ...！）。</p><p>  游戏是我们最大的成功，迄今为止总计10k +下载，100k +网页课程，数百名评论......</p><p>    阅读给了你一些新的游戏观念，想要返工精灵或试图改善发动机吗？不再犹豫，一个完整的吹嘘SDK就在那里 - 我们用来制作游戏的同一个工具！ POOM SDK. </p></div><div id="story_share_this"><div class="sharethis-inline-share-buttons"></div></div><div class="text-break sotry_link page_narrow"><a target="_blank" href="https://freds72.itch.io/poom/devlog/241700/journey-to-poom">https://freds72.itch.io/poom/devlog/241700/journey-to-poom</a></div><div class="story_tags page_narrow"><button type="button" class="btn btn-light my_tag"><a href="/tag/旅程/">#旅程</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/poom/">#poom</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/unpack/">#unpack</a></button></div></div><div class="shadow p-3 mb-5 bg-white rounded clearfix"><div class="container"><div class="row"><div class="col-sm"><div><a target="_blank" href="/story/1057100.html"><img src="http://img2.diglog.com/img/2021/4/thumb_b4f7ad03a9a86c00a4a76ccd3b0eef7d.jpg" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1057100.html">超级马里奥兄弟。任何％speedrun在4：54.948 * wr </a></div><span class="my_story_list_date">2021-4-9 2:51</span></div><div class="col-sm"><div><a target="_blank" href="/story/1046204.html"><img src="http://img2.diglog.com/img/2021/1/thumb_e818683be71498fca0c6004f91ffca00.png" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1046204.html">我2年的旅程达到$ 10K MRR </a></div><span class="my_story_list_date">2021-1-28 22:19</span></div><div class="col-sm"><div><a target="_blank" href="/story/1031410.html"><img src="http://img2.diglog.com/img/2020/10/thumb_23cff65fe288b4e7535ac62655911567.png" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1031410.html">我们的旅程</a></div><span class="my_story_list_date">2020-10-27 13:30</span></div><div class="col-sm"><div><a target="_blank" href="/story/1023815.html"><img src="http://img2.diglog.com/img/2020/9/thumb_7ea5b40d116c7789f59a79fa157a1232.jpg" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1023815.html">
虚拟医疗保健提供商Medefer筹集1000万GB将门诊旅程数字化</a></div><span class="my_story_list_date">2020-9-14 14:22</span></div></div></div></div><div class="my_movie_list_item shadow p-3 mb-5 bg-white rounded"><button type="button" class="btn btn-link my_tag"><a href="/tag/web2.0/">#web2.0</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/google/">#google</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/设计/">#设计</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/创意/">#创意</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/摄影/">#摄影</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/游戏/">#游戏</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/图片/">#图片</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/软件/">#软件</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/视频/">#视频</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/手机/">#手机</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/广告/">#广告</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/apple/">#apple</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/iphone/">#iphone</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/网站/">#网站</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/免费/">#免费</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/下载/">#下载</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/windows/">#windows</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/微软/">#微软</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/firefox/">#firefox</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/苹果/">#苹果</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/blog/">#blog</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/音乐/">#音乐</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/博客/">#博客</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/wordpress/">#wordpress</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/恶搞/">#恶搞</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/艺术/">#艺术</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/qq/">#qq</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/web/">#web</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/谷歌/">#谷歌</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/工具/">#工具</a></button></div></div></div><div id="my_footer"><div class=""><a href="/tags/">tags</a> <a href="/users/">users</a></div>&copy;2012-2021 diglog.com </div></div></body></html>