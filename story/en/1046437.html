<!doctype html><html lang="zh-hans"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>寻找更多的调试器 Looking for More Debugger</title><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"><link rel="stylesheet" href="/img/css.css?random="><link data-rh="true" rel="icon" href="/img/favicon.ico"/><script data-ad-client="ca-pub-6067137220025946" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script type="text/javascript" src="https://platform-api.sharethis.com/js/sharethis.js#property=5effb96910009800120b8d4d&product=inline-share-buttons" async="async"></script>
<script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?03c1a0f31299b4a2fbb83c34d6beaac9";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script></head><body><div id="my_header"><div class="container"><nav class="navbar navbar-expand-lg"><a class="navbar-brand" href="/"><img alt="diglog" src="/img/logo.v1.gif" class="rounded-sm"></a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarNavAltMarkup"><div class="navbar-nav"></div></div></nav></div></div><div class="container"><div id="my_content"><h1 class="page_narrow">Looking for More Debugger<br/>寻找更多的调试器 </h1><div class="row"><div class="col-lg-12 col-12"><div class="my_story_list_item shadow p-3 mb-5 bg-white rounded"><div class="story_page_pub_time page_narrow">2021-01-29 02:22:31</div><div class="page_narrow text-break page_content"><p>C-l fixes the display and using  gdb -tty $SOME_OTHER_TTY stops it from getting messed up in the first place.</p><p>C-l修复了显示，并使用gdb -tty $ SOME_OTHER_TTY阻止了显示的混乱。</p><p> Readline bindings (C-n, C-p etc) work in the command window even while the source window has focus.  focus cmd gives focus to the command window so I can use arrow keys again.</p><p> 即使源窗口具有焦点，Readline绑定（C-n，C-p等）仍在命令窗口中工作。 focus cmd将焦点移到命令窗口，因此我可以再次使用箭头键。</p><p> C-x A is supposed to toggle the tui but for me just crashes, in both alacritty and xterm. I&#39;ve  reported this against nix for now, since that&#39;s the most likely culprit. (EDIT nope,  it was a gdb bug).</p><p> C-x A应该会切换tui，但对我而言，无论是在alacritty还是xterm中，都崩溃了。我目前已针对nix对此进行了举报，因为这是最有可能的罪魁祸首。 （不编辑，这是一个gdb错误）。</p><p>   This is much better - I get a clickable thread list, backtrace and locals list.</p><p>   这样更好-我得到了一个可点击的线程列表，回溯和本地列表。</p><p>  It displays all my locals as &#34;&lt;complex data type&gt;&#34; which is not super helpful. There is a  patch to improve this but it looks like it got delayed by legal issues.</p><p>  它将所有本地人显示为＆＃34;＆lt;复杂数据类型＆gt;＆＃34;。这不是超级有帮助。有一个修补程序可以改善此问题，但似乎由于法律问题而延迟了。</p><p>  For gdb this  requires the vscode extension which I couldn&#39;t get working in the last post, so I haven&#39;t investigated further.</p><p>  对于gdb，这需要vscode扩展名，而我在上一篇文章中无法使用它，因此我没有进一步研究。</p><p>   Several of the issues you encountered with CLion are ones I have previously encountered, and thankfully two of them are solvable and one can be worked around.</p><p>   您在CLion中遇到的几个问题是我以前遇到的，值得庆幸的是，其中两个可以解决，一个可以解决。 </p><p> Your variables are (probably) not being displayed because CLion leans on its language support for computing precise start-of-scope for variables (GDB doesn&#39;t support this DWARF feature, sadly), but unfortunately defaults to assuming that variables are always out of scope if its language support isn&#39;t capable of mapping debug symbols to declarations. (It appears that the Zig plugin doesn&#39;t have any debugger integration). As such, you need to click on the gear icon on the left of the debug pane (in your screenshot, hidden behind a  &gt;&gt; symbol at the bottom), and uncheck &#34;Hide out-of-scope variables&#34;.</p><p>（可能）不会显示您的变量，因为CLion依靠其语言支持来计算变量的精确范围（可悲的是，GDB不支持此DWARF功能），但是很遗憾，默认情况下假定变量始终为如果其语言支持无法将调试符号映射到声明，则超出范围。 （看来Zig插件没有任何调试器集成）。因此，您需要单击调试窗格左侧的齿轮图标（在屏幕快照中，隐藏在底部的＆gt;＆gt;符号后面），然后取消选中＆＃34;隐藏范围外的变量＆＃ 34;。</p><p> To use the Memory View, you need to right-click on any variable and choose &#34;Show in Memory View&#34;, which will actually cause the pane to load. I have no idea why this is required given that the Memory View is perfectly capable of navigating to raw addresses or addresses computed by arbitrary expressions once the pane has loaded.</p><p> 要使用“内存视图”，您需要右键单击任何变量，然后选择＆＃34;在内存视图中显示＆＃34 ;，这实际上会导致窗格加载。我不知道为什么需要这样做，因为一旦加载窗格，“内存视图”就完全能够导航到原始地址或由任意表达式计算的地址。</p><p> You (probably) can&#39;t set breakpoints through the UI because the Zig plugin doesn&#39;t register the Zig filetype as capable of having breakpoints set on it. There&#39;s no way to fix this without writing a plugin, unfortunately, but you can still use the GDB console to set breakpoints. They won&#39;t persist between sessions, though, or show up in the UI.</p><p> 您（可能）无法通过UI设置断点，因为Zig插件不会将Zig文件类型注册为能够在其上设置断点的功能。不幸的是，没有编写插件就无法解决此问题，但是您仍然可以使用GDB控制台设置断点。不过，它们不会在会话之间持久存在，也不会显示在用户界面中。</p><p> Both of the fixes worked. I can now see variables and open them in the memory view.</p><p> 两种修复程序均有效。现在，我可以看到变量并在内存视图中打开它们。</p><p>  The memory view doesn&#39;t support editing memory, but I can still do that in the gdb console.</p><p>  内存视图不支持编辑内存，但是我仍然可以在gdb控制台中执行此操作。</p><p> I added  *actual.items.ptr@100 to the watches list and it rendered the whole array perfectly happily.</p><p> 我在手表列表中添加了*actual.items.ptr@100，它使整个数组完美地呈现出来。</p><p> Setting breakpoints in the gdb console seemed to work at first, but restarting the program to get to the breakpoint doesn&#39;t. If I rerun using the button in the debugger, the breakpoints disappear. If I try to restart the program from within gdb, it crashes:</p><p> 首先，似乎可以在gdb控制台中设置断点，但是重新启动程序以到达断点却没有。如果我使用调试器中的按钮重新运行，则断点将消失。如果我尝试从gdb中重新启动程序，它将崩溃： </p><p> (gdb) info breakpointsNo breakpoints or watchpoints.(gdb) b Tree.searchForwardsBreakpoint 1 at 0x207222: file /home/jamie/focus/lib/focus/tree.zig, line 591.(gdb) runCommand &#39;run&#39; is not supported.(gdb) startThe program being debugged has been started already.Start it from the beginning? (y or n) [answered Y; input not from terminal]Temporary breakpoint 2 at 0x2097dc: file /nix/store/5g4w66g606d46w8pmzwzq7flrlk3k7cs-zig/lib/zig/std/start.zig, line 243.Starting program: /home/jamie/focus/test 1&gt; &#39;/dev/pts/4&#39; 2&gt; &#39;/dev/pts/5&#39; During startup program exited with code 1.</p><p>（gdb）info断点没有断点或观察点。（gdb）b Tree.searchForwardsBreakpoint 1位于0x207222：文件/home/jamie/focus/lib/focus/tree.zig，第591行。 ;不支持。（gdb）start正在调试的程序已经启动。从头开始吗？ （是或否）[回答是；输入不是来自终端] 0x2097dc处的临时断点2：文件/nix/store/5g4w66g606d46w8pmzwzq7flrlk3k7cs-zig/lib/zig/std/start.zig，第243行。启动程序：/ home / jamie / focus / test 1＆gt; ＆＃39; / dev / pts / 4＆＃39; 2＆gt; ＆＃39; / dev / pts / 5＆＃39;在启动过程中，程序以代码1退出。</p><p> I can get this to work by starting the program, immediately pausing, setting a breakpoint and then resuming.</p><p> 我可以通过启动程序，立即暂停，设置断点然后恢复来使其正常工作。</p><p> Holding F8 to continue runs smoothly, like most of the other debuggers. But unlike most of the other debuggers the local variables stop being displayed until I release the key, so I can&#39;t just watch the changes in real time.</p><p> 像其他大多数调试器一样，保持F8继续运行平稳。但是，与大多数其他调试器不同，在我释放键之前，本地变量将停止显示，因此我无法实时观察更改。</p><p>  I made a new C++ project with the wizard and hit &#34;Debug Main Project&#34;. At first I though nothing happened, but after a while I noticed a small red message box at the bottom-right of the screen.</p><p>  我使用向导创建了一个新的C ++项目，然后点击＆＃34; Debug Main Project＆＃34;。最初我虽然什么都没发生，但是过了一会儿我注意到屏幕右下方的红色小消息框。</p><p>  It&#39;s actually bigger when it first appears, but it shrinks after a few seconds of not being noticed.</p><p>  它初次出现时实际上更大，但在几秒钟没有被注意到时它会缩小。</p><p>      It also says I should do something like  netbeans -J-Dcnd.tmpbase=&#34;/home/jamie/netbeans-project&#34;. But that produces the same error message, still referring to &#34;/tmp&#34; rather than the directory I gave it. Did I spell something wrong?</p><p>      它还说我应该做一些类似netbeans -J-Dcnd.tmpbase =＆＃34; / home / jamie / netbeans-project＆＃34;的事情。但这会产生相同的错误消息，仍然引用＆＃34; / tmp＆＃34;而不是我给它的目录。我拼错了吗？</p><p>   It doesn&#39;t actually seem to be trying to write &#34;/tmp&#34;. It actually doesn&#39;t issue any syscalls at all when I press &#34;Debug Main Project&#34; and trigger the message. So I think it&#39;s just misreporting some other error. The underlying issue is probably nix-related again.</p><p>   实际上似乎并没有尝试写＆tmp / tmp＆＃34;。当我按“调试主项目”时，它实际上根本不发出任何系统调用。并触发消息。因此，我认为这只是错误地报告了其他一些错误。潜在的问题可能又与nix有关。 </p><p> Also... I try to avoid ranting about software, because software is hard. But if you give me an error message and then make the error text non-selectable and then in the context menu only offer &#34;Mark As Read&#34; instead of &#34;Copy To Clipboard So I Can Google This&#34; then it makes debugging a lot slower.</p><p>另外...因为软件很难，所以我尽量避免对软件泛滥。但是，如果您给我一条错误消息，然后使错误文本变为不可选择，然后在上下文菜单中仅提供“标记为已读”。而不是＆＃34;复制到剪贴板，这样我就可以谷歌搜索此＆＃34;然后会使调试慢很多。</p><p>  Broadly similar to gdb -tui. It shows the source window and has a lot of useful keyboard shortcuts, but it doesn&#39;t display much ambient information like current backtrace or local variables. Everything seems to work, but it&#39;s not what I&#39;m looking for.</p><p>  与gdb -tui大致相似。它显示了源代码窗口，并且具有许多有用的键盘快捷键，但是它不显示很多环境信息，例如当前回溯或局部变量。一切似乎都正常，但这不是我想要的。</p><p>    There doesn&#39;t seem to be a memory view or a way to display arbitrary expressions. I tried adding  display (*actual.items.ptr)@100 in the gdb console and it didn&#39;t appear anywhere on screen, nor did it print the result in the console after the first time.</p><p>    似乎没有内存视图或显示任意表达式的方法。我尝试在gdb控制台中添加display（* actual.items.ptr）@ 100，但它没有出现在屏幕上的任何位置，也没有在第一次后在控制台中打印结果。</p><p> The rendering of large arrays is a bit annoying - you have to click at the beginning to reveal a few more elements, but they appear at the end. So getting the whole thing on screen requires lots of scrolling.</p><p> 大型数组的渲染有点烦人-您必须在开始时单击以显示更多元素，但它们会出现在末尾。因此，要在屏幕上显示整个内容，需要进行大量滚动。</p><p> The key binding for &#39;next&#39; is also in use by kate, so you have to go into the bindings menu and disambiguate. Which wouldn&#39;t be a big deal except that it reset several times over the course of a single session so I had to keep visiting the bindings menu.</p><p> ＆next＆＃39;的键绑定也是kate使用的，因此您必须进入绑定菜单并进行歧义消除。没什么大不了的，除了它在单个会话的过程中重置了几次外，所以我不得不继续访问绑定菜单。</p><p>  An init file for gdb that adds a dashboard, which is printed whenever the program stops and can be hooked to print at other times too.</p><p>  gdb的初始化文件，其中添加了仪表板，该仪表板在程序停止时会打印，也可以在其他时间挂接以进行打印。</p><p>  This is pretty great. It doesn&#39;t offer the easy point-and-click of a gui but it does reliably put a bunch of useful context on the screen. And it manages to do that without breaking or hiding basic features of gdb like most of the gui frontends I tried.</p><p>  太好了它不提供gui的简单点击功能，但是确实在屏幕上可靠地放置了许多有用的上下文。它可以做到这一点，而不会像我尝试的大多数gui前端那样破坏或隐藏gdb的基本功能。 </p><p> I&#39;m still on the lookout for a good gui debugger, but this is what I&#39;ll use in the meantime.</p><p>我仍在寻找一个好的gui调试器，但这是我在此期间要使用的。</p><p>  Loris Cro suggested voltron which is similar to gdb-dashboard but opens the various view in separate terminals and updates them in real time. This seems like a strict improvement and I really like the idea.</p><p>  Loris Cro建议使用voltron，它类似于gdb-dashboard，但在单独的终端中打开各种视图并实时更新它们。这似乎是一个严格的改进，我真的很喜欢这个主意。</p><p> After wading through the usual python dependency management morass, I managed to occasionally run some voltron views but mostly managed to crash it repeatedly, and occasionally gdb too.</p><p> 在经历了通常的python依赖管理问题之后，我设法偶尔运行了一些voltron视图，但是大多数情况下还是设法使它反复崩溃，偶尔也使gdb崩溃。</p><p> (The gdb crashes are in  somewhere inside printf so this might be the same issue as the tui crash above.)</p><p> （gdb崩溃位于printf内的某个位置，因此这可能与上面的tui崩溃是同一问题。）</p><p>   If I type the full path in the file picker it pops up &#34;An error has occurred&#34;. You have to type the dirname and then pick the file from the list.</p><p>   如果我在文件选择器中键入完整路径，则会弹出＆＃34;发生错误＆＃34;。您必须键入目录名，然后从列表中选择文件。</p><p> When I ran the program it reached the breakpoint and then the UI stopped responding to button clicks and occasionally spat out messages saying the gdb main thread was blocking.</p><p> 当我运行程序时，它到达了断点，然后UI停止响应按钮单击，并偶尔吐出一些消息，说gdb主线程正在阻塞。</p><p> After C-c in terminal it left behind a bunch of ophan gdb processes that prevented gdbfrontend from being restarted.</p><p> 在终端中执行C-c之后，它留下了一堆ophan gdb进程，这些进程阻止了gdbfrontend重新启动。 </p><p>  drosan explained that in ddd the focus follows the mouse which explains why I had trouble typing in the text boxes.</p><p>drosan解释说，在ddd中，焦点跟随在鼠标上，这解释了为什么我在文本框中键入时遇到麻烦。</p><p>    gef and  pwndbg add a bunch of commands to gdb that are useful for low-level debugging and reverse engineering.  radare2 is an independent set of tools for the same purpose that can optionally connect to gdb. I don&#39;t have much use for these at the moment, but it&#39;s good to know about them.</p><p>    gef和pwndbg向gdb添加了一堆命令，这些命令对于底层调试和反向工程很有用。 Radar2是一组用于同一目的的独立工具，可以选择性地连接到gdb。我目前对这些没有太多用处，但是很高兴了解它们。</p><p>  pernosco is a project I&#39;ve been keeping an eye on. It&#39;s not currently affordable for hobby stuff, but I can certainly imagine paying for it when I start doing commercial work again.</p><p>  pernosco是我一直关注的项目。目前尚无法以业余爱好买得起，但是我可以想象当我再次开始从事商业工作时为此付费。</p><p> frida injects javascript code into binaries. At the very least, this enables post-hoc println debugging. I&#39;ve put aside a weekend in my calendar to try it out.</p><p> frida将javascript代码注入二进制文件。至少，这可以进行事后的println调试。我已经在日历中预留了一个周末来尝试一下。</p><p> blinkenlights I think is a way to watch your code execute as directly as possible, so you can build intuition for what is actually happening on the hardware. I tried it out quickly and it rendered a single frame before exiting with code 0. But it&#39;s interesting enough that I made a note to come back and try it again next year.</p><p> 我认为眨眼是一种尽可能直接地观察代码执行的方法，因此您可以直观了解硬件上实际发生的情况。我很快尝试了一下，并在退出代码0之前渲染了一个帧。但是它很有趣，我记下了笔记，然后在明年再次尝试。</p><p> I haven&#39;t tried many proprietary options so far. While I have a strong preference for foss tools, I&#39;m open to suggestions for good proprietary tools so long as I can try them out without emailing a sales team for a quote.</p><p> 到目前为止，我还没有尝试过许多专有选项。尽管我对foss工具有强烈的偏好，但只要我能在不通过电子邮件向销售团队发送报价的情况下进行试用，就可以接受有关专有工具的建议。 </p></div><div id="story_share_this"><div class="sharethis-inline-share-buttons"></div></div><div class="text-break sotry_link page_narrow"><a target="_blank" href="https://scattered-thoughts.net/writing/looking-for-debugger-2/">https://scattered-thoughts.net/writing/looking-for-debugger-2/</a></div><div class="story_tags page_narrow"><button type="button" class="btn btn-light my_tag"><a href="/tag/寻找/">#寻找</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/debugger/">#debugger</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/gdb/">#gdb</a></button></div></div><div class="my_movie_list_item shadow p-3 mb-5 bg-white rounded"><button type="button" class="btn btn-link my_tag"><a href="/tag/web2.0/">#web2.0</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/google/">#google</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/设计/">#设计</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/创意/">#创意</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/摄影/">#摄影</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/图片/">#图片</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/游戏/">#游戏</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/软件/">#软件</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/视频/">#视频</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/手机/">#手机</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/广告/">#广告</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/iphone/">#iphone</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/网站/">#网站</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/免费/">#免费</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/下载/">#下载</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/windows/">#windows</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/微软/">#微软</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/苹果/">#苹果</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/apple/">#apple</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/blog/">#blog</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/firefox/">#firefox</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/音乐/">#音乐</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/博客/">#博客</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/wordpress/">#wordpress</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/恶搞/">#恶搞</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/qq/">#qq</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/艺术/">#艺术</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/web/">#web</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/工具/">#工具</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/分享/">#分享</a></button></div></div></div><div id="my_footer"><div class=""><a href="/tags/">tags</a> <a href="/users/">users</a></div>&copy; 2020 diglog.com </div></div></body></html>