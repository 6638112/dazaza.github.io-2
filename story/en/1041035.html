<!doctype html><html lang="zh-hans"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Ruby 3.0.0 RC1发布 Ruby 3.0.0 RC1 Released</title><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"><link rel="stylesheet" href="/img/css.css?random="><link data-rh="true" rel="icon" href="/img/favicon.ico"/><script data-ad-client="ca-pub-6067137220025946" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script type="text/javascript" src="https://platform-api.sharethis.com/js/sharethis.js#property=5effb96910009800120b8d4d&product=inline-share-buttons" async="async"></script>
<script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?03c1a0f31299b4a2fbb83c34d6beaac9";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script></head><body><div id="my_header"><div class="container"><nav class="navbar navbar-expand-lg"><a class="navbar-brand" href="/"><img alt="diglog" src="/img/logo.v1.gif" class="rounded-sm"></a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarNavAltMarkup"><div class="navbar-nav"></div></div></nav></div></div><div class="container"><div id="my_content"><h1 class="page_narrow">Ruby 3.0.0 RC1 Released<br/>Ruby 3.0.0 RC1发布 </h1><div class="row"><div class="col-lg-12 col-12"><div class="my_story_list_item shadow p-3 mb-5 bg-white rounded"><div class="story_page_pub_time page_narrow">2020-12-21 22:05:03</div><div class="page_narrow text-break page_content"><p>Type checkers including TypeProf and other tools supporting RBS will understand Ruby programs much better with RBS definitions.</p><p>类型检查器（包括TypeProf和其他支持RBS的工具）将通过RBS定义更好地理解Ruby程序。</p><p> You can write down the definition of classes and modules: methods defined in the class, instance variables and their types, and inheritance/mix-in relations.</p><p> 您可以写下类和模块的定义：类中定义的方法，实例变量及其类型以及继承/混合关系。</p><p> The goal of RBS is to support commonly seen patterns in Ruby programs and it allows writing advanced types including union types, method overloading, and generics. It also supports duck typing with  interface types.</p><p> RBS的目标是支持Ruby程序中常见的模式，它允许编写高级类型，包括联合类型，方法重载和泛型。它还支持带有接口类型的鸭子输入。</p><p> Ruby 3.0 ships with  rbs gem, which allows parsing and processing type definitions written in RBS.The following is a small example of RBS with class, module, and constant definitions.</p><p> Ruby 3.0附带了rbs gem，它允许解析和处理用RBS编写的类型定义。以下是带有类，模块和常量定义的RBS的一个小示例。</p><p> module ChatApp VERSION: String class Channel attr_reader name: String attr_reader messages: Array[Message] attr_reader users: Array[User | Bot] # `|` means union types, `User` or `Bot`. def initialize: (String) -&gt; void def post: (String, from: User | Bot) -&gt; Message # Method overloading is supported. | (File, from: User | Bot) -&gt; Message endend</p><p> 模块ChatApp版本：字符串类通道attr_reader名称：字符串attr_reader消息：Array [Message] attr_reader用户：Array [User | Bot]＃`|`表示联合类型，`User`或`Bot`。 def initialize：（String）-＆gt; void def post ：（字符串，来自：用户| Bot）-＆gt;消息＃支持方法重载。 | （文件，来自：用户| Bot）-＆gt;消息结束</p><p>     It reads plain (non-type-annotated) Ruby code, analyzes what methods are defined and how they are used, and generates a prototype of type signature in RBS format.</p><p>     它读取普通的（无类型注释的）Ruby代码，分析定义了哪些方法以及如何使用它们，并生成RBS格式的类型签名的原型。</p><p>   # test.rb class  User  def  initialize ( name :,  age :)  @name ,  @age  =  name ,  age  end  attr_reader  :name ,  :age end User . new ( name:  &#34;John&#34; ,  age:  20 )</p><p>   ＃test.rb类用户def初始化（name：，age :) @name，@age = name，年龄终止attr_reader：name，：age最终用户。新建（姓名：＆＃34; John＆＃34;年龄：20） </p><p>  $ typeprof test.rb# Classesclass User attr_reader name : String attr_reader age : Integer def initialize : (name: String, age: Integer) -&gt; [String, Integer]end</p><p>$ typeprof test.rb＃类class用户attr_reader名称：字符串attr_reader年龄：整数def初始化：（名称：字符串，年龄：整数）-＆gt; [String，Integer]结束</p><p> You can run TypeProf by saving the input as “test.rb” and invoke a command called “typeprof test.rb”.</p><p> 您可以通过将输入另存为“ test.rb”并调用名为“ typeprof test.rb”的命令来运行TypeProf。</p><p> You can also  try TypeProf online. (It runs TypeProf on the server side, so sorry if it is out!)</p><p> 您也可以在线尝试TypeProf。 （它在服务器端运行TypeProf，因此很抱歉！）</p><p>  TypeProf is experimental and not so mature yet; only a subset of the Ruby language is supported, and the detection of type errors is limited. But it is still growing rapidly to improve the coverage of language features, the analysis performance, and usability. Any feedback is very welcome.</p><p>  TypeProf尚处于实验阶段，尚未成熟。仅支持一部分Ruby语言，并且类型错误的检测受到限制。但是，改善语言功能，分析性能和可用性的范围仍在迅速增长。任何反馈都非常欢迎。</p><p>  Ractor is an Actor-model like concurrent abstraction designed to provide a parallel execution feature without thread-safety concerns.</p><p>  Ractor是类似于并发抽象的Actor模型，旨在提供并行执行功能而无需担心线程安全。</p><p> You can make multiple ractors and you can run them in parallel. Ractor enables you to make thread-safe parallel programs because ractors can not share normal objects. Communication between ractors are supported by message passing.</p><p> 您可以制造多个拖拉机，也可以并行运行它们。 Ractor使您可以制作线程安全的并行程序，因为ractors无法共享普通对象。消息传递可支持各练习器之间的通信。</p><p> To limit sharing of objects, Ractor introduces several restrictions to the Ruby’s syntax (without multiple Ractors, there is no restriction).</p><p> 为了限制对象共享，Ractor对Ruby的语法引入了一些限制（没有多个Ractor，没有限制）。 </p><p> The specification and implementation are not matured and may be changed in the future, so this feature is marked as experimental and show the “experimental feature” warning when the first  Ractor.new.</p><p>规格和实现尚不成熟，将来可能会更改，因此此功能被标记为实验性功能，并在首次Ractor.new时显示“实验性功能”警告。</p><p> The following small program calculates  n.prime? ( n is relatively a big integer) in parallel with two ractors. You will confirm that the program execution is about x2 times faster compared to the sequential program on the parallel computer.</p><p> 下面的小程序计算n.prime？ （n是一个相对较大的整数）与两个拖拉机平行。您将确认与并行计算机上的顺序程序相比，该程序的执行速度快约x2倍。</p><p> require  &#39;prime&#39; # n.prime? with sent integers in r1, r2 run in parallel r1 ,  r2  =  * ( 1 .. 2 ). map  do  Ractor . new  do  n  =  Ractor . recv  n . prime?  end end # send parameters r1 . send  2 ** 61  -  1 r2 . send  2 ** 61  +  15 # wait for the results of expr1, expr2 p  r1 . take  #=&gt; true p  r2 . take  #=&gt; true</p><p> 要求“素数” ＃n.prime？在r1中发送整数的情况下，r2并行运行r1，r2 = *（1 .. 2）。贴图做Ractor。新做n = Ractor。收录主要？结束结束＃发送参数r1。发送2 ** 61-1 r2。发送2 ** 61 + 15＃等待expr1，expr2 p r1的结果。取＃=＆gt;真p r2。取＃=＆gt;真正</p><p>   Fiber#scheduler is introduced for intercepting blocking operations. This allows for light-weight concurrency without changing existing code. Watch  “Don’t Wait For Me, Scalable Concurrency for Ruby 3” for an overview of how it works.</p><p>   引入了Fiber＃scheduler来拦截阻塞操作。这允许轻量级的并发，而无需更改现有代码。观看“别等我，Ruby 3的可扩展并发性”，以了解它的工作原理。</p><p>      require  &#39;async&#39; require  &#39;net/http&#39; require  &#39;uri&#39; Async  do  [ &#34;ruby&#34; ,  &#34;python&#34; ,  &#34;c&#34; ]. each  do  | topic |  Async  do  Net :: HTTP . get ( URI  &#34;https://www.google.com/search?q= #{ topic } &#34; )  end  end end</p><p>      需要＆＃39; async＆＃39;需要＆＃39; net / http＆＃39;需要＆＃39; uri＆＃39;异步执行[＆＃34; ruby​​＆＃34; ，＆＃34; python＆＃34; ，＆＃34; c＆＃34; ]。每个做|话题异步网络:: HTTP。得到（URI＆＃34; https：//www.google.com/search？q =＃{topic}＆＃34;）结束结束结束</p><p>  One-line pattern matching is redesigned. (experimental)  0  =&gt;  a  p  a  #=&gt; 0  { b:  0 ,  c:  1 }  =&gt;  { b :}  p  b  #=&gt; 0</p><p>  重新设计了单行模式匹配。 （实验性）0 =＆gt; a p a＃=＆gt; 0 {b：0，c：1} => {b：} p b＃=＆gt; 0</p><p>  # version 3.0  0  in  1  #=&gt; false  # version 2.7  0  in  1  #=&gt; raise NoMatchingPatternError</p><p>  ＃版本3.0 0 in 1＃=＆gt; false＃版本2.7 0合1＃=＆gt;引发NoMatchingPatternError </p><p>  Find pattern is added. (experimental)  case  [ &#34;a&#34; ,  1 ,  &#34;b&#34; ,  &#34;c&#34; ,  2 ,  &#34;d&#34; ,  &#34;e&#34; ,  &#34;f&#34; ,  3 ]  in  [ * pre ,  String  =&gt;  x ,  String  =&gt;  y ,  * post ]  p  pre  #=&gt; [&#34;a&#34;, 1]  p  x  #=&gt; &#34;b&#34;  p  y  #=&gt; &#34;c&#34;  p  post  #=&gt; [2, &#34;d&#34;, &#34;e&#34;, &#34;f&#34;, 3]  end</p><p>查找模式已添加。 （实验）案例[＆＃34; a＆＃34; ，1，＆＃34; b＆＃34; ，＆＃34; c＆＃34; ，2，＆＃34; d＆＃34; ，＆＃34; e＆＃34; ，＆＃34; f＆＃34; ，3] in [* pre，String =＆gt; x，字符串=> y，* post] p pre＃=＆gt; [＆＃34; a＆＃34;，1] p x＃=＆gt; ＆＃34; b＆＃34; p y＃=＆gt; ＆＃34; c＆＃34; p帖子＃=＆gt; [2，＆＃34; d＆＃34 ;,＆＃34; e＆＃34 ;,＆＃34; f＆＃34 ;, 3]结尾</p><p>    Hash#except is now built-in.  h  =  {  a:  1 ,  b:  2 ,  c:  3  }  p  h . except ( :a )  #=&gt; {:b=&gt;2, :c=&gt;3}</p><p>    Hash＃except现在是内置的。 h = {a：1，b：2，c：3} p h。除了（：a）＃=＆gt; {：b =＆gt; 2，：c =＆gt; 3}</p><p>  Memory view is added as an experimental feature  This is a new C-API set to exchange a raw memory area, such as a numeric array and a bitmap image, between extension libraries. The extension libraries can share also the metadata of the memory area that consists of the shape, the element format, and so on. Using these kinds of metadata, the extension libraries can share even a multidimensional array appropriately. This feature is designed by referring to Python’s buffer protocol.</p><p>  添加了内存视图作为实验功能。这是一个新的C-API集，用于在扩展库之间交换原始内存区域，例如数字数组和位图图像。扩展库还可以共享由形状，元素格式等组成的存储区域的元数据。使用这些类型的元数据，扩展库甚至可以适当地共享多维数组。此功能是通过参考Python的缓冲区协议来设计的。</p><p>  Pasting long code to IRB is 53 times faster than bundled with Ruby 2.7.0. For example, the time required to paste  this sample code goes from 11.7 seconds to 0.22 seconds.</p><p>  将长代码粘贴到IRB的速度比Ruby 2.7.0捆绑的速度快53倍。例如，粘贴此示例代码所需的时间从11.7秒变为0.22秒。</p><p>  Keyword arguments are separated from other arguments.  In principle, code that prints a warning on Ruby 2.7 won’t work. See the  document in detail.</p><p>  关键字参数与其他参数分开。原则上，在Ruby 2.7上显示警告的代码将不起作用。详细信息请参见文档。</p><p>      The order of backtrace had been reversed at Ruby 2.5, and is reverted. Now it behaves like Ruby 2.4; an error message and the line number where the exception occurs are printed first, and its callers are printed later.</p><p>      在Ruby 2.5中，回溯的顺序已被颠倒，并且被恢复。现在，它的行为类似于Ruby 2.4；首先打印错误消息和发生异常的行号，然后再打印其调用方。</p><p>    The following libraries are no longer bundled gems.Install the corresponding gems to use these features.</p><p>    以下库不再是捆绑的gem。请安装相应的gem以使用这些功能。 </p><p>       Ruby was first developed by Matz (Yukihiro Matsumoto) in 1993,and is now developed as Open Source. It runs on multiple platformsand is used all over the world especially for web development.</p><p>Ruby最初由Matz（Yukihiro Matsumoto）于1993年开发，现在已作为开源开发。 它运行在多个平台上，并在全世界范围内广泛用于Web开发。 </p></div><div id="story_share_this"><div class="sharethis-inline-share-buttons"></div></div><div class="text-break sotry_link page_narrow"><a target="_blank" href="https://www.ruby-lang.org/en/news/2020/12/20/ruby-3-0-0-rc1-released/">https://www.ruby-lang.org/en/news/2020/12/20/ruby-3-0-0-rc1-released/</a></div><div class="story_tags page_narrow"><button type="button" class="btn btn-light my_tag"><a href="/tag/发布/">#发布</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/ruby/">#ruby</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/rc1/">#rc1</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/类型/">#类型</a></button></div></div><div class="my_movie_list_item shadow p-3 mb-5 bg-white rounded"><button type="button" class="btn btn-link my_tag"><a href="/tag/web2.0/">#web2.0</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/google/">#google</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/设计/">#设计</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/创意/">#创意</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/摄影/">#摄影</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/游戏/">#游戏</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/图片/">#图片</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/软件/">#软件</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/视频/">#视频</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/广告/">#广告</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/手机/">#手机</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/iphone/">#iphone</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/网站/">#网站</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/免费/">#免费</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/下载/">#下载</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/windows/">#windows</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/苹果/">#苹果</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/微软/">#微软</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/apple/">#apple</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/firefox/">#firefox</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/blog/">#blog</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/音乐/">#音乐</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/博客/">#博客</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/wordpress/">#wordpress</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/恶搞/">#恶搞</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/qq/">#qq</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/艺术/">#艺术</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/web/">#web</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/工具/">#工具</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/分享/">#分享</a></button></div></div></div><div id="my_footer"><div class=""><a href="/tags/">tags</a> <a href="/users/">users</a></div>&copy; 2020 diglog.com </div></div></body></html>