<!doctype html><html lang="zh-hans"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>“回到未来：Unix通配符失控”(2014)</title><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"><link rel="stylesheet" href="/img/css.css?random="><link data-rh="true" rel="icon" href="/img/favicon.ico"/><script data-ad-client="ca-pub-6067137220025946" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script type="text/javascript" src="https://platform-api.sharethis.com/js/sharethis.js#property=5effb96910009800120b8d4d&product=inline-share-buttons" async="async"></script>
<script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?03c1a0f31299b4a2fbb83c34d6beaac9";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script></head><body><div id="my_header"><div class="container"><nav class="navbar navbar-expand-lg"><a class="navbar-brand" href="/"><img alt="diglog" src="/img/logo.v1.gif" class="rounded-sm"></a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarNavAltMarkup"><div class="navbar-nav"></div></div></nav></div></div><div class="container"><div id="my_content"><h1 class="page_narrow">“回到未来：Unix通配符失控”(2014)</h1><div class="row"><div class="col-lg-12 col-12"><div class="my_story_list_item shadow p-3 mb-5 bg-white rounded"><div class="story_page_pub_time page_narrow">2020-08-21 12:43:35</div><div class="page_narrow text-break page_content"><p>-创建日期：2013年4月20日-发布日期：2014年6月25日目录：=[1.简介=[2.Unix Dummies通配符=[3.通配符空白=[4.更有用的东西...。4.1 chown文件引用技巧(文件所有者劫持)4.2 chmod文件引用技巧4.3 Tar任意命令执行4.4 rsync任意命令执行=[5.结论=[1.简介首先，本文与现代黑客技术无关，如ASLR绕过、ROP利用、0day远程内核利用或Chrome的Chain-14-Different-Bugs-to-There...。不，以上都不是。本文将介绍一种有趣的老式Unix黑客技术，该技术在2013年仍然有效。黑客技术，让我吃惊的是，甚至很多安全相关的人都没有听说过这种技术。这可能是因为以前从来没有人真正谈论过它。我之所以决定写这个主题是因为，对我个人来说，看到简单的Unix通配符中毒技巧能做些什么是相当有趣的。因此，从这篇文章中，你可以预料到的是，据我所知，这些巧妙的黑客技巧并没有在更早的时候出现。如果您想知道像tar或chown这样的基本Unix工具是如何导致整个系统受损的，请继续阅读。女士们，先生们；请坐好，系好安全带，抓紧--因为我们要直接回到80年代，直接回到Unix外壳黑客攻击……。(这是不是在播放糟糕的摇滚乐/时髦的迪斯科音乐？我认为所以...)=[2.Unix通配符for Dummies如果您已经知道Unix通配符是什么，以及它们在shell脚本中是如何(以及为什么)使用的，那么您应该跳过这一部分。但是，为了一致性和潜在的新手，我们将在这里包括通配符定义。通配符是可用作某些范围/类字符的替代的字符或字符集。在采取任何其他操作之前，通配符由shell解释。某些Shell通配符：*星号可匹配文件名中的任意数量的字符，包括无字符。？问号与任何单个字符匹配。[]方括号包含一组字符，其中任何一个都可以与该位置的单个字符匹配。-[]内使用的连字符表示字符范围。~单词开头的波浪号可扩展为您的主目录的名称。如果您将另一个用户的登录名附加到角色，则它指的是该用户的主目录。通配符用法的基本示例：#ls*.php-列出PHP扩展名为#rm*.gz的所有文件#cat backup*-删除所有GZIP文件#cat backup*-显示名称以&#39；backup&#39；string#ls test？开头的所有文件的内容-列出名称以字符串&#39；test&#39；开头并且恰好有一个附加字符=[3.通配符野生通配符作为其名称状态，根据其性质是&#34；Wild&34；在玩这个有趣的通配符技巧的最初阶段，我已经与十几个老派的Unix管理员和安全人员交谈过，只是为了找出他们中有多少人知道通配符技巧，以及它们构成的潜在危险。令我惊讶的是，20个人中只有两个人表示，他们知道使用通配符是不明智的，尤其是在rm命令中，因为有人可能会用类似于参数的文件名来滥用通配符。其中一人说，他几年前在一些基本的Linux管理课程上听说过这一点。有趣的。此技术背后的简单技巧是，当使用shell通配符(特别是星号(*))时，Unix shell将把以连字符(-)开头的文件解释为执行的命令/程序的命令行参数。这就为经典的通灵攻击留下了变种的空间。当不同类型的信息通道合并为单通道时，会出现信道问题。特殊形式的实际情况由于使用外壳通配符，该技术将不同通道的参数和文件名组合成单个。让我们检查一个非常基本的通配符参数注入示例。[root@defensecode public]#ls-al总计20 drwxrwxr-x。5里昂·里昂4096 10月28日17：04。DRWX-。22利昂4096 10月28日16：15..。Drwxrwxr-x。2 Leon Leon 4096 Oct 28 17：04 DIR1 drwxrwxr-x.。2 Leon Leon 4096 Oct 28 17：04 DIR2 drwxrwxr-x.。2Leon Leon 4096 Oct 28 17：04 DIR3-RW-RW-r--。1 Leon Leon 0 Oct 28 17：03 file1.txt-rw-rw-r--。1 Leon Leon 0 Oct 28 17：03 file2.txt-rw-rw-r--。1 Leon Leon 0 Oct 28 17：03 file3.txt-rw-rw-r--。1没人没人0 OCT 28 16：38-RF我们有一个目录，里面的子目录和文件都很少。还有文件名为&#39；-rf&#39；的文件，该文件由用户&#39；nobody&#39；拥有。现在，让运行rm*；命令，并再次检查目录内容。[root@defensecode public]#rm*[root@defensecode public]#ls-al共8个drwxrwxr-x。2里昂4096 10月28日17：05。DRWX-。22</p></div><div id="story_share_this"><div class="sharethis-inline-share-buttons"></div></div><div class="text-break sotry_link page_narrow"><a target="_blank" href="https://www.defensecode.com/public/DefenseCode_Unix_WildCards_Gone_Wild.txt">https://www.defensecode.com/public/DefenseCode_Unix_WildCards_Gone_Wild.txt</a></div><div class="story_tags page_narrow"><button type="button" class="btn btn-light my_tag"><a href="/tag/unix/">#unix</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/通配符/">#通配符</a></button></div></div><div class="shadow p-3 mb-5 bg-white rounded clearfix"><div class="container"><div class="row"><div class="col-sm"><div><a target="_blank" href="/story/1009161.html"><img src="http://img.diglog.com/img/2020/7/thumb_365a49334eac3d73a8008da99e7cdefe.png" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1009161.html">比尔·香农·里普</a></div><span class="my_story_list_date">2020-7-1 5:30</span></div><div class="col-sm"><div><a target="_blank" href="/story/1004475.html"><img src="http://img.diglog.com/img/2020/5/thumb_2a56767d751fd2cc920f485b8361dd0f.jpg" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1004475.html">Unix操作系统(1982)[视频]</a></div><span class="my_story_list_date">2020-5-31 10:5</span></div><div class="col-sm"><div><a target="_blank" href="/story/1000343.html"><img src="http://img.diglog.com/img/2020/5/thumb_f445aec87178b5c9e4b9fb45921abee9.jpg" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1000343.html">Unix上的时间</a></div><span class="my_story_list_date">2020-5-2 21:19</span></div><div class="col-sm"><div><a target="_blank" href="/story/technology_linux_761996.html"><img src="http://img.diglog.com/img/2013/6/thumb_ca4b42fd-13a7-42ea-a1b1-be5b4f4bb072.jpg" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/technology_linux_761996.html">Linux 为什么要用字符 ~ 来表示 home 目录</a></div><span class="my_story_list_date">2013-6-21 14:23</span></div></div></div></div><div class="my_movie_list_item shadow p-3 mb-5 bg-white rounded"><button type="button" class="btn btn-link my_tag"><a href="/tag/web2.0/">#web2.0</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/google/">#google</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/设计/">#设计</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/创意/">#创意</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/摄影/">#摄影</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/游戏/">#游戏</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/图片/">#图片</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/软件/">#软件</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/视频/">#视频</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/手机/">#手机</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/广告/">#广告</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/apple/">#apple</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/iphone/">#iphone</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/网站/">#网站</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/免费/">#免费</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/下载/">#下载</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/windows/">#windows</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/微软/">#微软</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/firefox/">#firefox</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/苹果/">#苹果</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/blog/">#blog</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/音乐/">#音乐</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/博客/">#博客</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/wordpress/">#wordpress</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/恶搞/">#恶搞</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/艺术/">#艺术</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/qq/">#qq</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/web/">#web</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/谷歌/">#谷歌</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/工具/">#工具</a></button></div></div></div><div id="my_footer"><div class=""><a href="/tags/">tags</a> <a href="/users/">users</a></div>&copy;2012-2021 diglog.com </div></div></body></html>