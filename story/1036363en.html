<!doctype html><html lang="zh-hans"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>人们如何发现错误？How do people find bugs?</title><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"><link rel="stylesheet" href="/img/css.css?random="><link data-rh="true" rel="icon" href="/img/favicon.ico"/><script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?03c1a0f31299b4a2fbb83c34d6beaac9";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script><script data-ad-client="ca-pub-6067137220025946" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script type="text/javascript" src="https://platform-api.sharethis.com/js/sharethis.js#property=5effb96910009800120b8d4d&product=inline-share-buttons" async="async"></script></head><body><div id="my_header"><div class="container"><nav class="navbar navbar-expand-lg"><a class="navbar-brand" href="/"><img alt="diglog" src="/img/logo.v1.gif" class="rounded-sm"></a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarNavAltMarkup"><div class="navbar-nav"></div></div></nav></div></div><div class="container"><div id="my_content"><h1 class="page_narrow">How do people find bugs?<br/>人们如何发现错误？</h1><div class="row"><div class="col-lg-12 col-12"><div class="my_story_list_item shadow p-3 mb-5 bg-white rounded"><div class="story_page_pub_time page_narrow">2020-11-25 02:39:45</div><div class="page_narrow text-break page_content"><p>You might wonder how people find bugs. Low-hanging fruit bugs can be found via code review, static analysis, dynamic analysis (like fuzzing), and other techniques. But what about deep logic bugs. Those you can’t find easily. Perhaps the protocol implemented is quite complicated, or correctness is hard to define, and edge-cases hard to detect. One thing I’ve noticed is that re-visiting protocols are an excellent way to find logic bugs.</p><p>您可能想知道人们如何发现错误。可以通过代码审查，静态分析，动态分析（如模糊测试）和其他技术来找到难以捉摸的果实错误。但是，我们深深的逻辑错误。那些您找不到的东西。可能实现的协议非常复杂，或者很难定义正确性，并且很难检测到边缘情况。我注意到的一件事是，重新访问协议是查找逻辑错误的绝佳方法。</p><p> Ian Miers once said something like that: &#34;you need time, expertise, and meaningful engagement”. I like that sentence, although one can point out that these traits are closely linked--you can’t have meaningful engagement without time and expertise--it does show that finding bugs take &#34;effort&#34;.</p><p> 伊恩·米尔斯（Ian Miers）曾说过这样的话：“您需要时间，专业知识和有意义的参与。”我喜欢那句话，尽管有人可以指出，这些特质是紧密相连的-没有时间和专业知识就无法拥有有意义的参与- -它确实表明发现错误需要“努力”。</p><p> OK. Meaningful engagement can lead to meaningful bugs, and meaningful bugs can be found at different levels.So you&#39;re here, seating in your undies in the dark, with a beer on your side and some uber eats lying on the floor.Your computer is staring back at you, blinking at a frequency you can&#39;t notice, and waiting for you to find a bug in this protocol.What do you do?Perhaps the protocol doesn&#39;t have a proof, and this leads you to wonder if you can write one for it...</p><p> 好。有意义的互动可能导致有意义的错误，并且可以在不同级别发现有意义的错误，因此您在这里，在黑暗中坐在自己的内裤上，一边喝啤酒一边躺在地板上，一些超级吃的东西躺在地上。盯着你看，以不知所措的频率闪烁，等待您发现此协议中的错误，您怎么办？也许该协议没有证据，这使您想知道您是否可以为此写一个...</p><p> It worked for Ariel Gabizon, who in 2018  found a subtle error in a  2013 zk-SNARK paper used by the Zcash cryptocurrency he was working on.He found it by trying to write a proof for the paper he was reading, realizing that the authors had winged it.While protocols back in the days could afford to wing it, these days people are more difficult--they demand proofs.The bug Ariel found could have allowed anyone to forge an unlimited amount of money undetected.It was silently fixed months later in an upgrade to the network.</p><p> 它适用于Ariel Gabizon，他在2018年发现了他正在研究的Zcash加密货币使用的2013年zk-SNARK论文中的一个细微错误，他通过尝试为他正在阅读的论文写证明来发现了这一点，意识到作者虽然过去的协议可以负担得起，但如今人们却更加困难-他们需要证明。阿里埃勒（Ariel）发现的漏洞可以使任何人伪造无限量的金钱而未被发现。稍后升级到网络。</p><p> Ariel Gabizon, a cryptographer employed by the Zcash Company at the time of discovery, uncovered a soundness vulnerability. The key generation procedure of [BCTV14], in step 3, produces various elements that are the result of evaluating polynomials related to the statement being proven. Some of these elements are unused by the prover and were included by mistake; but their presence allows a cheating prover to circumvent a consistency check, and thereby transform the proof of one statement into a valid-looking proof of a different statement. This breaks the soundness of the proving system.</p><p> Zcash公司雇用的密码学家Ariel Gabizon在发现时发现了一个健全性漏洞。 [BCTV14]的密钥生成过程在步骤3中，生成各种元素，这些元素是评估与被证明语句相关的多项式的结果。证明者未使用其中的某些元素，并错误地将其包括在内。但是它们的存在使作弊证明者能够绕过一致性检查，从而将一个陈述的证明转换为另一陈述的有效外观的证明。这打破了证明体系的稳健性。</p><p> What if the protocol already had a proof though?Well that doesn&#39;t mean much, people enjoy writing unintelligible proofs, and people make errors in proofs all the time.So the second idea is that reading and trying to understand a proof might lead to a bug in the proof.Here&#39;s some meaningful engagement for you.</p><p> 如果协议已经有了证明怎么办？这并不意味着很多，人们喜欢编写难以理解的证明，人们总是在证明中犯错误，所以第二个想法是阅读并试图理解证明可能会导致证明中的错误。这里有一些对您有意义的约定。</p><p> In 2001, Shoup revisited some proofs and  found some darning gaps in the proofs for RSA-OAEP, leading to a newer scheme OAEP+ which was never adopted in practice.Because back then, as I said, we really didn&#39;t care about proofs.</p><p> 2001年，Shoup重新审视了一些证明，并在RSA-OAEP的证明中发现了一些明显的差距，从而导致了一种新的OAEP +方案，该方案从未在实践中被采用，因为那时候，正如我说的那样，我们真的不在乎证明。</p><p> [BR94] contains a valid proof that OAEP satisfies a certain technical property which they call “plaintext awareness.” Let us call this property PA1. However, it is claimed without proof that PA1 implies security against chosen ciphertext attack and non-malleability. Moreover, it is not even clear if the authors mean adaptive chosen ciphertext attack (as in [RS91]) or indifferent (a.k.a. lunchtime) chosen ciphertext attack (as in [NY90]).</p><p>[BR94]包含OAEP满足某种技术特性的有效证据，他们称之为“纯文本意识”。让我们将此属性称为PA1。但是，它声称没有证据表明PA1意味着针对所选密文攻击和不可恶意攻击的安全性。而且，作者甚至是选择自适应的密文攻击（如[RS91]）还是漠不关心（又称午餐时间）选择密文攻击（如[NY90]），甚至还不清楚。</p><p> Later in 2018, a series of discoveries on the proofs for the OCB2 block cipher quickly led to  practical attacks breaking the cipher.</p><p> 在2018年晚些时候，有关OCB2分组密码证明的一系列发现迅速导致实际攻击破坏了该密码。</p><p> We have presented practical forgery and decryption attacks against OCB2, a high-profile ISO-standard authenticated encryption scheme. This was possible due to the discrepancy between the proof of OCB2 and the actual construction, in particular the interpretation of OCB2 as a mode of a TBC which combines XEX and XE.</p><p> 我们已经提出了针对OCB2的实用伪造和解密攻击，OCB2是一种备受瞩目的ISO标准认证的加密方案。这可能是由于OCB2的证明与实际构造之间的差异，尤其是将OCB2解释为结合了XEX和XE的TBC模式的原因。</p><p> We comment that, due to errors in proofs, ‘provably-secure schemes’ sometimes still can be broken, or schemes remain secure but nevertheless the proofs need to be fixed. Even if we limit our focus to AE, we have many examples for this, such as NSA’s Dual CTR [37,11], EAX-prime [28], GCM [22], and some of the CAESAR submissions [30,10,40]. We believe our work emphasizes the need for quality of security proofs, and their active verification.</p><p> 我们评论说，由于证据的错误，有时仍可能会破坏“可证明安全的方案”，或者方案仍然是安全的，但是仍然需要修复证据。即使我们将注意力集中在AE上，我们也有很多示例，例如NSA的Dual CTR [37,11]，EAX-prime [28]，GCM [22]，以及一些CAESAR提交的内容[30,10， 40]。我们认为我们的工作强调安全证明质量及其积极验证的必要性。</p><p> Now, reading and verifying a proof is always a good idea, but it’s slow, it’s not flexible (if you change the protocol, good job changing the proof), and it’s limited (you might want to prove different things re-using parts of the proofs, which is not straight forward).Today, we are starting to bridge the gap between pen and paper proofs and computer science: it is called formal verification.And indeed, formal verification is booming, with a number of papers in the recent years finding issues here and there just by describing protocols in a formal language and verifying that they withstand different types of attacks.</p><p> 现在，阅读和验证证明始终是一个好主意，但是它很慢，不灵活（如果您更改协议，可以很好地更改证明），而且很有限（您可能想证明重用部分内容的不同事物）如今，我们开始弥合笔和纸质证明与计算机科学之间的鸿沟：这被称为形式验证。事实上，形式验证正在蓬勃发展，最近有很多论文十年来，仅通过以正式语言描述协议并验证其可以承受不同类型的攻击，就可以在各处发现问题。</p><p>  We implement our improved models in the Tamarin prover. We find a new attack on the Secure Scuttlebutt Gossip protocol, independently discover a recent attack on Tendermint’s secure handshake, and evaluate the effectiveness of the proposed mitigations for recent Bluetooth attacks.</p><p>  我们在Tamarin证明器中实现了改进的模型。我们发现了针对Secure Scuttlebutt Gossip协议的新攻击，独立发现了针对Tendermint安全握手的最新攻击，并评估了针对近期蓝牙攻击的缓解措施的有效性。</p><p>  We implement our models in the Tamarin Prover, yielding the first way to perform these analyses automatically, and validate them on several case studies. In the process, we find new attacks on DRKey and SOAP’s WS-Security, both protocols which were previously proven secure in traditional symbolic models.</p><p>  我们在Tamarin Prover中实施我们的模型，这是第一种自动执行这些分析并在多个案例研究中进行验证的方法。在此过程中，我们发现了针对DRKey和SOAP的WS-Security的新攻击，这两种协议以前在传统符号模型中都被证明是安全的。</p><p>    I don’t want to spend much time talking about KRACK itself, because the vulnerability is pretty straightforward. Instead, I want to talk about why this vulnerability continues to exist so many years after WPA was standardized. And separately, to answer a question: how did this attack slip through, despite the fact that the 802.11i handshake was formally proven secure?</p><p>我不想花太多时间谈论KRACK本身，因为该漏洞非常简单。相反，我想谈谈为什么该漏洞在WPA标准化后这么多年仍然存在。分别回答一个问题：尽管802.11i握手已被正式证明是安全的，但这种攻击是如何通过的呢？</p><p>  The critical problem is that while people looked closely at the two components — handshake and encryption protocol — in isolation, apparently nobody looked closely at the two components as they were connected together. I’m pretty sure there’s an entire geek meme about this.</p><p>  关键问题是，当人们孤立地仔细查看握手和加密协议这两个组件时，显然没有人在将两个组件连接在一起时仔细查看这两个组件。我很确定对此有一个完整的怪胎模因。</p><p>    Of course, the reason nobody looked closely at this stuff is that doing so is just plain hard. Protocols have an exponential number of possible cases to analyze, and we’re just about at the limit of the complexity of protocols that human beings can truly reason about, or that peer-reviewers can verify. The more pieces you add to the mix, the worse this problem gets.In the end we all know that the answer is for humans to stop doing this work. We need machine-assisted verification of protocols, preferably tied to the actual source code that implements them. This would ensure that the protocol actually does what it says, and that implementers don’t further screw it up, thus invalidating the security proof.</p><p>    当然，没有人仔细看这个东西的原因是这样做很简单。协议有多种可能的案例需要分析，而我们正处于人类可以真正推理或同行评审员可以验证的协议复杂性的极限。添加到组合中的片段越多，这个问题就越严重。最后，我们都知道答案是人类要停止这项工作。我们需要机器辅助的协议验证，最好与实现它们的实际源代码绑定在一起。这样可以确保该协议确实按照其说的去做，并且实现者不会进一步搞砸它，从而使安全性证明无效。</p><p> Well, Matthew, we do have formally generated code!  HACL* and  fiat-crypto are two examples.Anybody has heard of that failing? I’d be interested…</p><p> 好吧，马修，我们确实有正式生成的代码！ HACL *和fiat-crypto是两个例子，有人听说过失败吗？我有兴趣...</p><p> In any case, what’s left for us? A lot! Formally generated code is hard, and generally covers small parts of your protocol (e.g. field arithmetic for elliptic curves).So what else can we do?Implementing the protocol, if it hasn’t been implemented before, is a no-brainer.In 2016, Taylor Hornby an engineer at Zcash  wrote about a bug he found while implementing the zerocash paper into the Zcash cryptocurrency:</p><p> 无论如何，还剩下什么呢？很多！正式生成的代码很困难，通常只覆盖协议的一小部分（例如椭圆曲线的现场算术），那么我们还能做些什么呢？如果以前没有实现过，那么实施该协议就很容易了。 2016年，Zcash的工程师Taylor Hornby撰写了一篇他在将零现金论文实施到Zcash加密货币中时发现的错误：</p><p> In this blog post, we report on the security issues we’ve found in the Zcash protocol while preparing to deploy it as an open, permissionless financial system.Had we launched Zcash without finding and fixing the InternalH Collision vulnerability, it could have been exploited to counterfeit currency. Someone with enough computing power to find 128-bit hash collisions would have been able to double-spend money to themselves, creating Zcash out of thin air.</p><p> 在这篇博客文章中，我们报告了Zcash协议中发现的安全性问题，同时准备将其部署为开放的，未经许可的金融系统。伪造货币。拥有足够的计算能力来查找128位哈希冲突的人本可以将钱花在自己身上，从而凭空创造出Zcash。</p><p>   One last thing, most of the code out there is not formally verified.So of course, reviewing code works, but you need time, expertise, money, etc.So instead, what about testing?This is what  Wycheproof does by implementing a number of test vectors that are known to cause issues:</p><p>   最后一件事是，大多数代码尚未经过正式验证，因此当然可以查看代码，但是您需要时间，专业知识，金钱等，因此，测试该怎么办呢？已知会导致问题的测试向量：</p><p> These observations have prompted us to develop Project Wycheproof, a collection of unit tests that detect known weaknesses or check for expected behaviors of some cryptographic algorithm. Project Wycheproof provides tests for most cryptographic algorithms, including RSA, elliptic curve crypto and authenticated encryption. Our cryptographers have systematically surveyed the literature and implemented most known attacks. We have over 80 test cases which have uncovered more than 40 bugs. For example, we found that we could recover the private key of widely-used DSA and ECDHC implementations.</p><p>这些观察促使我们开发了Wycheproof项目，这是一组单元测试的集合，可以检测已知的弱点或检查某些加密算法的预期行为。 Wycheproof项目为大多数加密算法提供测试，包括RSA，椭圆曲线加密和认证加密。我们的密码学家已经系统地调查了文献并实施了最著名的攻击。我们有80多个测试用例，发现了40多个错误。例如，我们发现我们可以恢复广泛使用的DSA和ECDHC实现的私钥。</p><p> In all of that, I didn&#39;t even talk about the benefits of writing a specification... that&#39;s for another day.</p><p> 在所有这些中，我什至没有谈论编写规范的好处……那是另一天的事情。</p></div><div id="story_share_this"><div class="sharethis-inline-share-buttons"></div></div><div class="text-break sotry_link page_narrow"><a target="_blank" href="https://cryptologie.net/article/511/how-do-people-find-bugs/">https://cryptologie.net/article/511/how-do-people-find-bugs/</a></div><div class="story_tags page_narrow"><button type="button" class="btn btn-light my_tag"><a href="/tag/find/">#find</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/证明/">#证明</a></button></div></div><div class="my_movie_list_item shadow p-3 mb-5 bg-white rounded"><button type="button" class="btn btn-link my_tag"><a href="/tag/web2.0/">#web2.0</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/google/">#google</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/设计/">#设计</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/创意/">#创意</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/摄影/">#摄影</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/图片/">#图片</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/游戏/">#游戏</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/软件/">#软件</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/视频/">#视频</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/手机/">#手机</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/广告/">#广告</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/iphone/">#iphone</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/网站/">#网站</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/免费/">#免费</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/下载/">#下载</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/windows/">#windows</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/微软/">#微软</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/苹果/">#苹果</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/apple/">#apple</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/blog/">#blog</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/firefox/">#firefox</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/音乐/">#音乐</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/博客/">#博客</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/wordpress/">#wordpress</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/恶搞/">#恶搞</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/qq/">#qq</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/艺术/">#艺术</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/web/">#web</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/工具/">#工具</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/分享/">#分享</a></button></div></div></div><div id="my_footer"><div class=""><a href="/tags/">tags</a> <a href="/users/">users</a></div>&copy; 2020 diglog.com </div></div></body></html>