<!doctype html><html lang="zh-hans"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>URL：这很复杂 URLs: It's Complicated</title><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"><link rel="stylesheet" href="/img/css.css?random="><link data-rh="true" rel="icon" href="/img/favicon.ico"/><script data-ad-client="ca-pub-6067137220025946" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script type="text/javascript" src="https://platform-api.sharethis.com/js/sharethis.js#property=5effb96910009800120b8d4d&product=inline-share-buttons" async="async"></script>
<script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?03c1a0f31299b4a2fbb83c34d6beaac9";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script></head><body><div id="my_header"><div class="container"><nav class="navbar navbar-expand-lg"><a class="navbar-brand" href="/"><img alt="diglog" src="/img/logo.v1.gif" class="rounded-sm"></a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarNavAltMarkup"><div class="navbar-nav"></div></div></nav></div></div><div class="container"><div id="my_content"><h1 class="page_narrow">URLs: It's Complicated<br/>URL：这很复杂 </h1><div class="row"><div class="col-lg-12 col-12"><div class="my_story_list_item shadow p-3 mb-5 bg-white rounded"><div class="story_page_pub_time page_narrow">2021-06-23 23:49:52</div><div class="story_img_container"><a href="http://img2.diglog.com/img/2021/6/af7a637d99185879ec11c14772d6b17f.png"><img src="http://img2.diglog.com/img/2021/6/af7a637d99185879ec11c14772d6b17f.png" class="img-fluid my_story_img" onerror="this.style.display='none'"></a></div><div class="page_narrow text-break page_content"><p>Punycode.)        But note that there is no requirement for the hostname component (when it  is ahostname and not an IP address) to be a fully-qualified domain name ( FQDN);a partially qualified domain name is also possible,as resolution follows the usual local stub resolver&#39;slogic and likely  involving /etc/nsswitch.conf,  /etc/hosts,and  /etc/resolv.conf.</p><p>punycode。）但请注意，Hostname组件（当AhostName而不是IP地址时）没有要求是完全限定的域名（FQDN）;也可能是一个部分合格的域名，因为决议遵循通常的本地存根resolver＆＃39;斜语和可能涉及/etc/nsswitch.conf，/ etc / hosts和/etc/resolv.conf。</p><p> This is actually quite useful, and severalcompanies use this as a neat little trick to provide acompany-internal link-shortener / bookmarkingredirector like  golinks without theneed for a browser plugin or anything like that:</p><p> 这实际上非常有用，几种群体使用这是一个整洁的小技巧，以提供acompany-internall-shortener / bookmarkingredirector，如golinks，没有为浏览器插件或类似于这样的东西：</p><p>   Now the only slightly confusing part here is thatunless you run your own CA, you can&#39;t get acertificate for &#34; go&#34;, so the short links mustbe accessed using plain http. But either way, you seethat the &#34; hostname&#34; component in a URL neednot be fully qualified.</p><p>   现在，这里唯一有点令人困惑的部分是无论你运行自己的CA，你可以＆＃39; t获得＆＃34的actericate; Go＆＃34 ;,,,,,,,,,,,,,,,,,,,,,,,,,,,,但是，无论哪种方式，你都会看到＆＃34; hostname＆＃34; URL需要的组件是完全合格的。</p><p>  The &#34; authority&#34; component may further containa &#34; port&#34; subcomponent. I&#39;m sure you&#39;ve seenthat in action when a server uses a non-default port,so there isn&#39;t really much that&#39;s surprising here.Leaving out the port simply means that you&#39;ll use thedefault port associated with the scheme.</p><p>  ＆＃34;权威＆＃34;组分可以进一步容纳＆＃34;端口＆＃34;子组件。当服务器使用非默认端口时，我肯定有效地＆＃39; ve seenthat在行动中，所以＆＃39;它真的很多。令人惊讶的是。砍掉港口只是意味着你＆＃ 39; LL使用与该方案相关联的Thedefault端口。</p><p> One edge condition here is that you can leave theport blank, but still include the &#34; :&#34;:</p><p> 这里的一个边缘条件是您可以将波斯特空白留下，但仍然包括＆＃34; ：＆＃34 ;:</p><p>  The other edge condition is that  RFC3986does not specify a maximum value on the port number(which per  RFC1340/  RFC6335is in the range of  0 - 65535) or how e.g.,zero-padding is handled, as that of course depends onthe client processing the URL. Which makes this avalid URL:</p><p>  另一个边缘条件是RFC3986DOES未在端口号上指定最大值（每个RFC1340 / RFC6335IS在0  -  65535的范围内）或者如何处理零填充，因为当然取决于客户端处理URL的客户端。这使得这是一个可怕的URL：</p><p>   Now for the &#34; pathname&#34;. This one&#39;s fun.It looks like... well, a pathname. Just like on yourfile system. Putting aside the server&#39;s prerogativeto interpret it any way it likes, this means that allthe various edge conditions for file system path namesapply here, too.</p><p>   现在为＆＃34; Pathname＆＃34;这个＆＃39; s fun.it看起来像......好吧，一个路径名。就像在你的系统上。将服务器删除，PrerogativeTo以其喜欢的方式解释它，这意味着，文件系统路径的所有边缘条件也在此处使用。 </p><p> A &#34; pathname&#34; has a different set ofallowed characters from the &#34; hostname&#34;component, since it is not bound by the hostname orDNS limitations. That also means that within a URL,we&#39;re now switching the meaning of certain characters,such as &#34; .&#34;. Pretty much the only character not allowed in a &#34; pathname&#34;component are  NUL and  /; all othercharacters are allowed either explicitly orimplicitly as  percentencoded data, which the server may then decodeagain before resolving the local path.</p><p>A＆＃34; Pathname＆＃34;有一个来自＆＃34的不同乌卢其字符; hostname＆＃34;组件，因为它不受主机名ordns限制的绑定。这也意味着在URL中，我们＆＃39;现在切换某些字符的含义，例如＆＃34; 。＆＃34 ;.几乎是一个＆＃34中唯一不允许的角色; pathname＆＃34;组件是nul和/;允许所有其他类别明确地单纯属于百分比的数据，然后在解析本地路径之前，服务器可以在该数据中进行解码。</p><p> This includes spaces, and the following two URLslead to the same file located in a directory that&#39;snamed &#34; &#34;:</p><p> 这包括空格，以及以下两个URLSLEAD到位于目录中的同一文件; SNAMED＆＃34; ＆＃34 ;:</p><p>   $ pwd/htdocs/www.netmeister.org$ ls -la &#34;blog/urls/ &#34; total 12drwxr-xr-x 2 jschauma wheel 512 Jun 19 14:58 .drwxr-xr-x 6 jschauma wheel 1024 Jun 20 16:26 ..-rw-r--r-- 1 jschauma wheel 85 Jun 19 14:59 f$ curl -i &#34;https://www.netmeister.org/blog/urls/ /f&#34;HTTP/2 200 date: Mon, 21 Jun 2021 15:45:31 GMTserver: Apache/2.4.43 (Unix) OpenSSL/1.1.1klast-modified: Sat, 19 Jun 2021 18:59:53 GMTcontent-length: 85This file is in a directory named &#34; &#34;.See https://www.netmeister.org/blog/urls.html$</p><p>   $ pwd / htdocs / www.netmeister.org $ ls -la＆＃34;博客/ urls /＆＃34;总计12drwxr-xr-x 2 jschauma滚轮512 19月19日14:58 .drwxr-xr-x 6 jschauma滚轮1024 6月20日16:26 ..- rw-r  -  r-- 1 jschauma轮子85 Jun 19 14:59 f $ curl -i＆＃34; https：//www.netmeister.org/blog/urls/ / f＆＃34; http / 2 200日期：星期一，21日2021 15:45:31 gmtserver：apache / 2.4。 43（UNIX）openssl / 1.1.1klast-modified：SAT，19六月2021 18:59:53 GMTContent-Length：85这个文件位于名为＆＃34的目录中; ＆＃34; .see https://www.netmeister.org/blog/urls.html$$</p><p> And yes, of course you can give the path name component any valid name, such as &#34;💩&#34;:</p><p> 是的，当然，您可以给出路径名组件任何有效名称，例如＆＃34;💩＆＃34 ;:</p><p>  The pathname may be empty, or consist entirely ofempty subcomponents, making all of these go to the same place:</p><p>  路径名可能是空的，或者完全由emptemy子组件组成，使所有这些都转到同一个地方：</p><p>  But the &#34; pathname&#34; component of a URL sentin the HTTP request once you&#39;ve already made aconnection to the server may also be the full URLitself, not just the &#34; pathname&#34; component. RFC7230in fact mandates this when talking to a proxy:</p><p>  但是＆＃34; Pathname＆＃34; URL发送HTTP请求的组件一旦您已将AC连接到服务器，也可能是完整的URLittitelf，而不仅仅是＆＃34; Pathname＆＃34;成分。 RFC7230IN事实在与代理交谈时授权此项：</p><p> $ openssl s_client -connect www.netmeister.org:443 -quiet -crlf 2&gt;/dev/null HEAD https://www.netmeister.org/blog/urls.html HTTP/1.0HTTP/1.1 200 OKDate: Mon, 21 Jun 2021 18:36:39 GMTServer: Apache/2.4.43 (Unix) OpenSSL/1.1.1kLast-Modified: Mon, 21 Jun 2021 18:24:38 GMTContent-Length: 29963Content-Type: text/html; charset=utf-8</p><p> $ openssl s_client -connect www.netmeister.org:443 -quiet -crlf 2＆gt; / dev / null head https://www.netmeister.org/blog/urls.html http / 1.0http / 1.1 200 Okdate：Mon，21 2021年6月2021年6月18日GMTserver：Apache / 2.4.43（UNIX）openssl / 1.1.1klast-Modified：Mon，21 Jun 2021 18:24:38 GMTContent-Length：29963Content型：Text / HTML; charset = UTF-8 </p><p> And if you&#39;re not talking to a proxy, you can justput  any  scheme://authority into the&#34; Request-URI&#34;,which is what this now has become in this context, andat least Apache ignores everything up to the pathnamecomponent:</p><p>如果你＆＃39;重新与代理商交谈，你可以刚刚出现任何方案：//进入＆＃34的权限; Request-Uri＆＃34;，这是现在现在已成为此上下文的情况，Andat最少Apache忽略了路径名中的所有内容：</p><p> $ openssl s_client -connect www.netmeister.org:443 -quiet -crlf 2&gt;/dev/null GET gopher://facebook.com/blog/urls.html HTTP/1.0HTTP/1.1 200 OKDate: Mon, 21 Jun 2021 18:43:28 GMTServer: Apache/2.4.43 (Unix) OpenSSL/1.1.1kContent-Type: text/html; charset=utf-8Content-Language: en[...]</p><p> $ openssl s_client -connect www.netmeister.org:443 -quiet -crlf 2＆gt; / dev / null get gopher：//facebook.com/blog/urls.html http / 1.0http / 1.1 200 okdate：mon，21 2021 18:43:28 GMTserver：Apache / 2.4.43（UNIX）openssl / 1.1.1kContent型：Text / HTML; Charset = UTF-8Content语言：en [...]</p><p>  Dots are funny. If your web server runs on aUnix-like system, then for a pathname, a single dotmeans &#34;this directory&#34;, and two dots means &#34;my parentdirectory&#34;, which is why you see requests for e.g.,&#34; /../../../../../../../../../etc/passwd&#34; inyour web server&#39;s logs, trying to break out of yourweb servers document root.</p><p>  点很有趣。如果您的Web服务器在类似AUNIX的系统上运行，则为路径名，单个DOTMeans＆＃34;此目录＆＃34;和两个点意味着＆＃34;我的parentdirectory＆＃34;这就是为什么你看到请求的原因例如，＆＃34; /../../../../../../../../../../../../../1.. / ...... inyour web服务器和＃39; s日志，试图突破您的我们的服务器文档根目录。</p><p>   Now a decent web server does not allow a request tobe made outside of its document root, but what&#39;sperhaps more interesting here is that this resolutionof  dot-segments happens (well, should happen)  prior to localfilesystem path resolution per  RFC3986,which means that you can pretend-&#34; ../&#34; aroundnon-existent directories:</p><p>   现在，一个体面的Web服务器不允许请求在其文档根目录外的请求，但是这里＆＃39;这里更有意思的是，此分辨率发生在每个RFC3986的LocalFileSystem路径分辨率之前（嗯，应该发生）意味着你可以假装 - ＆＃34; ../&#34;周末存在的目录：</p><p> $ pwd/htdocs/www.netmeister.org$ ls -ld t d n e ls: d: No such file or directoryls: e: No such file or directoryls: n: No such file or directoryls: t: No such file or directory$ ls -ld t/h/e/s/e/../../../../../d/i/r/e/c/t/o/r/i/e/s/../../../../../../../../../../../d/o/../../n/o/t/../../../e/x/i/s/t/../../../../../blog/urls.htmlls: t/h/e/s/e/../../../../../d/i/r/e/c/t/o/r/i/e/s/../../../../../../../../../../../d/o/../../n/o/t/../../../e/x/i/s/t/../../../../../blog/urls.html: No such file or directory$ curl -I https://www.netmeister.org/t/h/e/s/e/../../../../../d/i/r/e/c/t/o/r/i/e/s/../../../../../../../../../../../d/o/../../n/o/t/../../../e/x/i/s/t/../../../../../blog/urls.htmlHTTP/2 200 date: Mon, 21 Jun 2021 16:07:35 GMTserver: Apache/2.4.43 (Unix) OpenSSL/1.1.1klast-modified: Mon, 21 Jun 2021 16:03:41 GMTcontent-length: 24107content-type: text/html; charset=utf-8content-language: en$</p><p> $ pwd / htdocs / www.netmeister.org $ ls -ld tdne ls：d：没有这样的文件或directoryls：e：没有这样的文件或directoryls：n：没有这样的文件或directoryls：t：没有这样的文件或目录$ ls -ld t / h / e / s / e / d d / I / R / E / C / T / O / R / I / E / S /。 。/../../../../../../../../../../不要/.. /../../e/x/i/s/t/../../../../../.. / blog / urls.htmlls：t / h / e / s / e / / ...../../../../d/i / r/e/c/t/o/r/i/e/s/d/../../../ ... ../../../../../../d/../../n/o/t/../../../t/../../'o/x/i/s. /t/../../../../../../.. /bog/urls.html：没有这样的文件或目录$ curl -i https://www.netmeister.org/t/h/e/s /e/../../../../../../../../1../i/r/e/c/t/or/r/i/e/s/../../ ... ./../../../../../../d/o/../../n/t/t/../../../t/ X / I / S / T / d / ...博客/ urls.htmlhttp / 2 200日期：Mon，21 Jun 2021 16:07:35 GmTserver：Apache / 2.4.43 （UNIX）openssl / 1.1.1klast-modified：mon，21日2021年6月21日16:03:41 GMTContent-Length：24107Content型：Text / HTML; Charset = UTF-8 Content语言：EN $</p><p> But of course you can have files or directoriesnamed &#34; ...&#34; or &#34; ....&#34; etc., so thefollowing will get you an actual file:</p><p> 但当然你可以拥有文件或目录名和＃34; ...＆＃34;或＆＃34; ....＆＃34;等等，所以关注会给你一个实际文件：</p><p>     Hmm, but this morse code pathname component isgetting pretty long. How long can we make those? Ifit&#39;s a path name, then it should be subject to theoperating systems limits, and sure enough, I can&#39;tcreate a directory that&#39;s longer than FFS_MAXNAMLEN = 255 characters. But I can create nested subdirs to ultimately builda full path that hits the operating system&#39;s PATH_MAX = 1024:</p><p>     嗯，但这个莫尔斯代码Pathname组件很长。我们可以制作多久？ IFIT＆＃39; s路径名称，那么它应该受到特工系统的限制，并熟悉，我可以＆＃39; tCreate一个名录＆＃39; s长于ffs_maxnamlen = 255个字符。但我可以创建嵌套的子模型，最终构建击中操作系统的完整路径＆＃39; s path_max = 1024： </p><p> $ pwd/htdocs/www.netmeister.org$ cd blog/urls $ ls -ld ddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddrwxr-xr-x 3 jschauma wheel 512 Jun 19 17:40 ddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddd/$ cd dd*$ cd dd*$ cd dd*$ cd dd*ksh: cd: dddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddd: bad directory$ pwd/htdocs/www.netmeister.org/blog/urls/ddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddd/ddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddd/ddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddd$</p><p>$ PWD / htdocs中/ www.netmeister.org $ CD博客/ URL $ LS -ld ddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddrwx-XR-X 19年6月3日17:40 ddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddd jschau到车轮512 / $ CD CD DD DD * $ * $ * $ CD CD DD DD * KSH：CD：dddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddd：坏目录$ PWD / htdocs中/ www.netmeister.org /博客/ URL / ddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddd dddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddd / ddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddd / $ ddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddd</p><p>     &#34; ~&#34; is special, except when it&#39;s not. Inthis regard, it&#39;s a lot like tilde expansion in yourshell -- it only takes place if it&#39;s the firstcharacter after the &#34; /&#34; that begins the&#34; pathname&#34;. If this first segment beginswith &#34; /~username/, then many web serversdefault (or can be configured) to resolving theremainder of the &#34; pathname&#34; from under thatuser&#39;s &#34;web space&#34;, often times ~username/public_html.</p><p>     ＆＃34; 〜＃34;是特殊的，除了它＆＃39; s note。 INTHIS，IT＆＃39;很多像你谢尔的TINDE扩张一样 - 它只是如果它＆＃39;＆＃34之后的第一特征才会发生; /＆＃34;这是＆＃34; Pathname＆＃34;。如果这个第一个段开始＆＃34; /〜用户名/，然后是许多Web ServersDefault（或可以配置）以解决和＃34的Theremaine; Pathname＆＃34;从本发明＆＃39; s＆＃34; web空间＆＃34;常常〜用户名/ public_html。</p><p>   But it&#39;s worth noting that the expansion to auser&#39;s personal web space is convention only: the RFCsdon&#39;t appear to discuss this, although support for a&#34; UserDir&#34; appears to go as far back as  CERNhttpd and  ncsa_httpd.But there is really nothing special about the&#34; ~&#34; character at all. You can, of course,have a directory or file named &#34; ~&#34;:</p><p>   但它值得注意的是，对Auser的扩张＆＃39;只有常规的个人网空间是公约：rfcsdon＆＃39; tipps讨论了这一点，尽管支持A＆＃34; Userdir＆＃34;似乎是头灯回来作为cernhttpd和ncsa_httpd.但是，关于＆＃34的速度没有什么特别的特别之处; 〜＃34;字符根本。当然，您可以使用名为＆＃34的目录或文件; 〜＆＃34;：</p><p>  So far, so good. But what happens if you either donot have a user named &#34; username&#34; or you do,and there is a file name &#34; ~username&#34; in yourweb server&#39;s root? Let&#39;s give it a try:</p><p>  到目前为止，一切都很好。但是如果捐赠者有一个名为＆＃34的用户会发生什么;用户名＆＃34;或者你这样做，并且有一个文件名和＃34; 〜用户名＆＃34;在你的我们的根目录中＆＃39;让＆＃39; s试一试：</p><p> $ pwd/htdocs/www.netmeister.org$ id nobody uid=32767(nobody) gid=39(nobody) groups=39(nobody)$ ls -ld ~nobody/public_html \~nobodyls: /nonexistent//public_html: No such file or directory-rw-r--r-- 1 jschauma wheel 4 Jun 20 15:22 ~nobody$ cat \~nobodyThis is a file named &#34;~nobody&#34; with a symlink of &#34;~notauser&#34; pointing to it.See https://www.netmeister.org/blog/urls.html$ curl -I https://www.netmeister.org/~nobodyHTTP/2 404 date: Mon, 21 Jun 2021 20:12:21 GMTserver: Apache/2.4.43 (Unix) OpenSSL/1.1.1kcontent-type: text/html; charset=iso-8859-1$ id notauserid: notauser: No such user$ ls -ld ~notauser/public_html \~notauser ls: ~notauser/public_html: Not a directorylrwx------ 1 jschauma wheel 7 Jun 20 15:23 ~notauser -&gt; ~nobody$ cat \~notauserThis is a file named &#34;~nobody&#34; with a symlink of &#34;~notauser&#34; pointing to it.See https://www.netmeister.org/blog/urls.html$ curl -I https://www.netmeister.org/~notauserHTTP/2 200 date: Mon, 21 Jun 2021 20:17:09 GMTserver: Apache/2.4.43 (Unix) OpenSSL/1.1.1kcontent-length: 124content-language: en$</p><p> $ pwd / htdocs / www.netmeister.org $ id nobody uid = 32767（nobody）go = 39（nobody）组= 39（nobody）$ ls -ld〜nobody / public_html \〜nobodyls：/ nonexistent // public_html：否这样的文件或目录-RW-R  -  R-- 1 Jschauma滚轮4月20日15:22〜Nobody $ Cat \〜nobodythis是一个名为＆＃34;〜nobody＆＃34;符合＆＃34;〜notauser＆＃34;指向它.see https://www.netmeister.org/blog/urls.html$$卷曲-i https：//www.netmeister.org/~nobodyhttp/2 404日期：星期一，21日2021 20:12： 21 GmTserver：Apache / 2.4.43（UNIX）openssl / 1.1.1kcontent yext：text / html; Charset = ISO-8859-1 $ ID NotaUserID：NOTAUSER：没有这样的用户$ ls -ld〜notaUser / public_html \〜notauser ls：〜notauser / public_html：注意一个directorylwx ------ 1 jschauma滚轮7月20日：23〜NOTAUSER  - ＆gt; 〜没有人$ cat \〜notauserthis是一个名为＆＃34;〜没有人和＃34;符合＆＃34;〜notauser＆＃34;指向它.see https://www.netmeister.org/blog/urls.html$$卷曲-i https：//www.netmeister.org/2notauserhttp/2 200日期：周一，21日2021 20:17： 09 GmTserver：Apache / 2.4.43（UNIX）openssl / 1.1.1kcontent-length：124content-language：en $</p><p> That is, if your web server supports (and hasenabled) user directories, and you submit a requestfor &#34; ~username&#34;:</p><p> 也就是说，如果您的Web服务器支持（和哈希为）用户目录，并且您提交请求＆＃34; 〜用户名＆＃34;：</p><p> if &#34; username&#34; is a valid user, the serverlooks for &#34; ~username/public_html&#34;, evenif that directory does  not exist, but the file ~username  does exist</p><p> 如果＆＃34;用户名＆＃34;是一个有效的用户，＆＃34的serverlooks; 〜用户名/ public_html＆＃34; open open该目录不存在，但文件〜用户名确实存在 </p><p> if &#34; username&#34; is  not a validuser, then normal pathname resolution takes place,meaning if the file &#34; ~username&#34; exists in theweb server&#39;s document root, it is served</p><p>如果＆＃34;用户名＆＃34;不是一个有效的人，然后发生正常的路径名决议，意味着文件＆＃34; 〜用户名＆＃34;存在于WEB服务器和＃39; S文档根目录中，它是服务的</p><p>   A &#34; query&#34; component in a URL follows a&#34; ?&#34; characters and... is basically not welldefined at all. You could put just about anything into the query, including charactersthat would otherwise not be possible, such as&#34; /&#34; and &#34; ?&#34;:</p><p>   A＆＃34;查询＆＃34; URL中的组件遵循A＆＃34; ？＆＃34;字符和......基本上没有完全融合。你可以把任何东西放入查询中，包括否则无法实现的人物，如＆＃34; /＆＃34;和＃34; ？＆＃34 ;:</p><p>  Now by convention, queries tend to use a&#34; key1=value1&amp;key2=value2&#34; syntax,although of course nothing requires you to do that, oreven to use the &#34; &amp;&#34; as a separator; somesystems also (used to) use &#34; ;&#34;.</p><p>  现在按照惯例，查询往往使用A＆＃34; key1 = value1＆amp; key2 = value2＆＃34;语法，虽然当然没有什么需要你这样做，但是oreven要使用＆＃34; ＆amp;＆＃34;作为分隔符; SomeSystems也（用于）使用＆＃34; ;＆＃34;</p><p> But that&#39;s really all there is to the query. It&#39;spart of the HTTP request and the server may put itinto the environment as &#34; QUERY_STRING&#34;.</p><p> 但是，它真的都有查询。它＆＃39; HTTP请求的SPART和服务器可以将ITINTO放置为＆＃34; query_string＆＃34;</p><p>  The last component of the URL is the &#34; fragmentidentifier&#34;. This one&#39;s weird in that, whileit&#39;s obviously part of the URL, it is intended to bescoped entirely to the  client, not the server. In fact, common HTTP clients do notsend the fragment to the server, a fact that is thenused by systems like e.g.,  https://privatebin.info/,whereby the decryption key is placed into the fragmentcomponent of the URL, ensuring that the server doesnot see the key.</p><p>  URL的最后一个组成部分是＆＃34;碎片identifier＆＃34;这个＆＃39;很奇怪，虽然＆＃39;显然是一个URL，它旨在完全向客户端Bescoped，而不是服务器。实际上，常见的HTTP客户端确认将片段归功于服务器，该事实是由eg，https://privatebin.info/，decryption键放入URL的Fragment Component中的系统，然后确保服务器不知道键。</p><p> Your common web browsers and even e.g., curl(1) will strip the fragment prior tosending the HTTP request, but of course nothingprevents you from sending a  GET requestwith a  Request-URI containing a fragment, andyou can of course create a file name containinga &#34; #&#34;.</p><p> 您的常见Web浏览器甚至例如，Curl（1）将在提前调整HTTP请求之前绑住片段，但当然您从发送Get RequestWith包含一个片段的请求时，您当然可以创建包含A的文件名，并且可以创建一个包含A的文件名。 ＃34; ＃＆＃34;</p><p> Now Apache httpd treats a &#34; #&#34; in theRequest-URI as a  400 Bad Request, but  RFC2616does not mandate this.  bozohttpd,for example, does not treat &#34; #&#34; in theRequest-URI as special, so you can, for example, makethis request:</p><p> 现在Apache httpd处理A＆＃34; ＃＆＃34;在那里，您可以在其中作为400个不良请求，但RFC2616DOES不授权这一点。例如，Bozohttpd不治疗＆＃34; ＃＆＃34;在那里，uriest-uri，所以您可以例如makethis请求： </p><p> $ echo -ne &#34;GET /blog/urls/urls.html#fragment HTTP/1.0\r\n\r\n&#34; | \ nc www.netmeister.org 8080HTTP/1.0 200 OKDate: Tue, 22 Jun 2021 00:12:22 GMTServer: bozohttpd/20170201Accept-Ranges: bytesLast-Modified: Sat, 19 Jun 2021 12:58:28 GMTContent-Type: text/plainContent-Length: 113Just a normal file that just happens to contain a &#39;#&#39; in its name.See https://www.netmeister.org/blog/urls.html</p><p>$ echo -ne＆＃34; get /blog/urls/urls.html#fragment http / 1.0 \ r \ n \ r \ n＆＃34; | \ nc www.netmeister.org 8080http / 1.0 200 okdate：tue，22 jun 2021 00:12:22 GmTserver：Bozohttpd / 20170201Accept-ranges：Byteslast-Modified：Byteslast-Modified：Byteslast-Modified：Sat，19 Jun 2021 12:58:28 GMTContent型：文本/ plaincontent-length：113刚刚恰好包含一个＆＃39的普通文件;＃＆＃39;在它的姓名.see https://www.netmeister.org/blog/urls.html</p><p>  Now with all of this long discussion, let&#39;s go backto that silly URL from above:</p><p>  现在与所有这一长的讨论，让＆＃39; s从上面回到那个愚蠢的网址：</p><p>  Now this really looks like the  Buffalobuffalo equivalent of a URL. Let&#39;s untangle howthis becomes a valid link.</p><p>  现在这看起来像是水豚鼠等同于URL。 Let＆＃39; s Untangle豪了扬声器成为一个有效的链接。</p><p> The first &#34; https://&#34; is nothing out of theordinary, just your usual scheme and start ofauthority</p><p> 第一个＆＃34; https：//＃34;没有违约，只是你平常的计划和奉承</p><p>   Now we start to play silly tricks:&#34; ⁄ ⁄www.netmeister.org&#34; uses the fractionslash characters as part of the  password.Percent-encoded, this would look like so: %E2%81%84%E2%81%84www%2Enetmeister%2Eorg</p><p>   现在我们开始发挥愚蠢的技巧：＆＃34; / www wetmeister.org＆＃34;使用小部分册字符作为密码的一部分。编码，这看起来如此：％E2％81％84％E2％81％84www％2enetmeister％2eorg</p><p>  The next &#34; https&#34; now is the hostname component of the  authority: a  partially qualified hostname, that relies on  /etc/hosts containing an entry pointing  https to the right IP address.</p><p>  下一个＆＃34; https＆＃34;现在是权限的主机名组件：依赖于/ etc / hosts的部分限定主机名，其中包含一个指向https到正确的IP地址的条目。</p><p> The next &#34; :&#34; now is the separator of the hostname and the  port components.Only here, it is followed by an empty port, so wedefault to the scheme-specific port, 443 in thiscase.</p><p> 下一个＆＃34; ：＆＃34;现在是主机名和端口组件的分隔符。在这里，它后跟一个空端口，使Wedefault到特定于方案的端口，443在该配置。 </p><p> The next &#34; //&#34; then is merely the end ofthe  authority followed by an empty pathcomponent.</p><p>下一个＆＃34; //＃34;然后仅仅是权威的结束，后跟一个空的路径组成。</p><p> The next &#34; www.netmeister.org&#34; now issimply a directory by that name, followed by a normaldirectory separator,&#34; /</p><p> 下一个＆＃34; www.netmeister.org＆＃34;现在通过该名称提供目录，其次是标准的分隔符，＆＃34; /</p><p> Following that, we find a file name &#34; https:⁄⁄www.netmeister.org⁄⁄&#34; again using the fraction slash character.</p><p> 在此之后，我们找到文件名和＃34; https：//www.netmeister.org//＆＃34;再次使用分数斜杠字符。</p><p>  Queries allow just about any characters, so here we get a key named &#34; https://www.netmeister.org&#34; with a &#34; =&#34; assigned value of &#34; https://www.netmeister.org&#34;.</p><p>  查询允许任何字符，所以在这里我们得到一个名为＆＃34; https：//www.netmeister.org&#34;与一个＆＃34; =＆＃34;分配值＆＃34; https：//www.netmeister.org&#34;</p><p>  And finally, we have a fragment, which may containjust about any character as well, so we stuff another&#34; https://www.netmeister.org&#34; in there aswell.</p><p>  最后，我们有一个碎片，可能会包含任何角色，所以我们填充了另一个角色和＃34; https：//www.netmeister.org&#34;在那里。</p><p>    Ok, so what&#39;s the big deal? Why did I bother withall of the above, when I didn&#39;t even breakanything?</p><p>    好的，所以什么＆＃39;这是什么大问题？为什么我在上面的情况下打扰了上面的情况，当我甚至是屁股？</p><p> I call it &#34; brain fuzzing&#34; or &#34; logicalfuzzing&#34;: I try to understand what something thatI use every single day does, what it&#39;s supposed todo, how it&#39;s defined, and then sometimes I go &#34;Huh, Iwonder what happens if I put  X in hereinstead.&#34;</p><p> 我称之为＆＃34;脑袋模糊＆＃34;或＆＃34; logicalfuzzing＆＃34 ;:我试图了解每一天使用的东西，它是什么＆＃39; scapting todo，它如何定义，然后有时我去＆＃34;呵呵，我会发生什么我把x放在旁边。＆＃34; </p><p> I also find it interesting how URLs haveimplications beyond just the normal browser context,and how we depend on both clients and servers tobehave a certain way, even if that is not clearlyspecified.</p><p>我也发现它有趣的是网址如何超越正常浏览器上下文，以及我们如何依赖于客户端和服务器，即使这不清楚。 </p></div><div id="story_share_this"><div class="sharethis-inline-share-buttons"></div></div><div class="text-break sotry_link page_narrow"><a target="_blank" href="https://www.netmeister.org/blog/urls.html">https://www.netmeister.org/blog/urls.html</a></div><div class="story_tags page_narrow"><button type="button" class="btn btn-light my_tag"><a href="/tag/url/">#url</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/urls/">#urls</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/服务器/">#服务器</a></button></div></div><div class="my_movie_list_item shadow p-3 mb-5 bg-white rounded"><button type="button" class="btn btn-link my_tag"><a href="/tag/web2.0/">#web2.0</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/google/">#google</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/设计/">#设计</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/创意/">#创意</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/摄影/">#摄影</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/图片/">#图片</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/游戏/">#游戏</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/软件/">#软件</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/手机/">#手机</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/视频/">#视频</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/广告/">#广告</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/windows/">#windows</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/iphone/">#iphone</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/免费/">#免费</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/网站/">#网站</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/下载/">#下载</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/微软/">#微软</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/blog/">#blog</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/firefox/">#firefox</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/音乐/">#音乐</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/苹果/">#苹果</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/博客/">#博客</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/apple/">#apple</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/wordpress/">#wordpress</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/恶搞/">#恶搞</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/qq/">#qq</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/艺术/">#艺术</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/web/">#web</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/谷歌/">#谷歌</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/分享/">#分享</a></button></div></div></div><div id="my_footer"><div class=""><a href="/tags/">tags</a> <a href="/users/">users</a></div>&copy;2012-2021 diglog.com </div></div></body></html>