<!doctype html><html lang="zh-hans"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>464XLAT:仅限IPv6网络上的IPv4服务464XLAT: IPv4 services over an IPv6-only network</title><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"><link rel="stylesheet" href="/img/css.css?random="><link data-rh="true" rel="icon" href="/img/favicon.ico"/><script data-ad-client="ca-pub-6067137220025946" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script type="text/javascript" src="https://platform-api.sharethis.com/js/sharethis.js#property=5effb96910009800120b8d4d&product=inline-share-buttons" async="async"></script>
<script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?03c1a0f31299b4a2fbb83c34d6beaac9";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script></head><body><div id="my_header"><div class="container"><nav class="navbar navbar-expand-lg"><a class="navbar-brand" href="/"><img alt="diglog" src="/img/logo.v1.gif" class="rounded-sm"></a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarNavAltMarkup"><div class="navbar-nav"></div></div></nav></div></div><div class="container"><div id="my_content"><h1 class="page_narrow">464XLAT: IPv4 services over an IPv6-only network<br/>464XLAT:仅限IPv6网络上的IPv4服务</h1><div class="row"><div class="col-lg-12 col-12"><div class="my_story_list_item shadow p-3 mb-5 bg-white rounded"><div class="story_page_pub_time page_narrow">2022-02-22 08:02:21</div><div class="page_narrow text-break page_content"><p>As noted in  draft-arkko-ipv6-only-experience,  IPv6-only networks, even with  NAT64 /  DNS64, cannot meet service level parity with traditional IPv4-only networks. Some applications and services just fail to work correctly over IPv6.  IPv4 is required because of poor programming practices that referencing IPv4 specific networking APIs instead of address family agnostic APIs, signaling IPv4 literals, or failing to use DNS FQDN names instead of IPv4 literals does.  All of the above failure scenarios are preventable and will need to be resolved for applications to thrive in the new Internet reality where there are IPv4-only, IPv6-only, and dual-stack clients.</p><p>正如draft-arkko-ipv6-only-experience中所指出的，仅限ipv6的网络，即使使用NAT64/DNS64，也无法与仅限IPv4的传统网络达到服务级别对等。一些应用程序和服务无法在IPv6上正常工作。之所以需要IPv4，是因为糟糕的编程实践导致引用IPv4特定的网络API而不是地址族不可知的API、发送IPv4文本，或者未能使用DNS FQDN名称而不是IPv4文本。以上所有故障场景都是可以预防的，需要解决，以便应用程序在新的互联网现实中蓬勃发展，在新的互联网现实中，只有IPv4、IPv6和双栈客户端。</p><p>  One survey of IPv6 readiness in the Android Market showed approximately 85% of applications being IPv6-capable, while approximately 15% failed to work on an IPv6-only networks.  The data is  here.  Most of applications that failed are in the peer-to-peer communications space (Skype, Google Hangouts, Tango, ...).</p><p>一项针对Android市场IPv6就绪性的调查显示，大约85%的应用程序支持IPv6，而大约15%的应用程序无法在仅支持IPv6的网络上运行。数据在这里。大多数失败的应用程序都在点对点通信领域（Skype、Google Hangouts、Tango等等）。</p><p>   T-Mobile USA has been supporting a beta implementation of IPv6 GSM and UMTS service for over  2 years now.  Trying to solve some limitations in the IPv6-only experience, some technically minded  IPv6 early adopters began experimenting with translating  IPv4 to IPv6 locally on the N900 handset.  This allowed various application to function properly on an IPv6-only networks that would otherwise require IPv4.  This same idea and code has now been ported to Android and  submitted to the Android Open Source Project.  At the same time in Japan, JPIX and NEC have been working on the  same solution of IPv6-only access network with shared IPv4 addresses in the core.</p><p>T-Mobile USA已经支持IPv6 GSM和UMTS服务的测试版实施两年多了。为了解决纯IPv6体验中的一些局限性，一些有技术头脑的IPv6早期采用者开始尝试在N900手机上本地将IPv4转换为IPv6。这使得各种应用程序能够在只支持IPv6的网络上正常运行，否则这些网络将需要IPv4。同样的想法和代码现在已经移植到Android上，并提交给Android开源项目。与此同时，在日本，JPIX和NEC一直在开发同一个仅限IPv6的接入网络解决方案，核心是共享IPv4地址。</p><p>  RFC 6877 is now published!  This document describes an architecture (464XLAT) for providing limited IPv4 connectivity across an IPv6-only network by combining existing and well-known stateful protocol translation   RFC 6146  in the core and stateless protocol translation   RFC 6145  at the edge. 464XLAT is a simple and scalable technique to quickly deploy limited IPv4 access service to mobile and wireline IPv6-only edge networks without encapsulation.</p><p>RFC 6877现已发布！本文档描述了一种体系结构（464XLAT），该体系结构通过将现有的和众所周知的有状态协议转换RFC 6146（核心）与无状态协议转换RFC 6145（边缘）相结合，在纯IPv6网络上提供有限的IPv4连接。464XLAT是一种简单且可扩展的技术，可以在没有封装的情况下将有限的IPv4访问服务快速部署到仅限移动和有线IPv6的边缘网络。</p><p>  The purpose of this section is to provide enough information so that various network operators can reproduce, test, and deploy 464XLAT</p><p>本节的目的是提供足够的信息，以便各网络运营商能够复制、测试和部署464XLAT</p><p>  The mobile network provides the WAN interface of the handset with an /64 size IPv6 address, /96 of this space used for mapping to IPv4 addresses</p><p>移动网络为手机的WAN接口提供/64大小的IPv6地址，其中/96空间用于映射到IPv4地址</p><p> The CLAT interface provides the required route and IPv4 OS level interface for IPv4-only applications to properly function</p><p>CLAT接口为只支持IPv4的应用程序提供所需的路由和IPv4操作系统级接口，以使其正常运行</p><p>  The network is compliant with  3GPP Release 7 and allows for the establishment of IPv6 PDP</p><p>该网络符合3GPP第7版，并允许建立IPv6 PDP</p><p> The network has stateful NAT64 and DNS64 services available, the provided DNS server is DNS64 enabled.</p><p>网络有状态NAT64和DNS64服务可用，提供的DNS服务器已启用DNS64。</p><p> For NAT64, network specific prefix is used for traffic engineering reasons.  The well known prefix is not used.</p><p>对于NAT64，网络特定前缀用于流量工程。不使用众所周知的前缀。</p><p> No changes were required to the existing T-Mobile USA IPv6-only + NAT64/DNS64 to support the 464XLAT architecture.  The stateless RFC6145 translation on the handset was the only modification needed.</p><p>无需对现有的T-Mobile USA IPv6 only+NAT64/DNS64进行任何更改，即可支持464X LAT体系结构。手机上的无状态RFC6145翻译是唯一需要的修改。</p><p>  On test-ipv6.com, the handset scores 10/10 for IPv4 and 10/10 for IPv6 connectivity, previously the score was 7/10 for IPv4 since IPv4 literal connections failed.</p><p>在test-ipv6上。com，该手机在IPv4和IPv6连接方面的得分分别为10/10和10/10，此前，由于IPv4文本连接失败，IPv4的得分为7/10。</p><p> Skype, Netflix, and other applications that were otherwise broken on an IPv6-only network now function properly.  Note column H in  the data</p><p>Skype、Netflix和其他在纯IPv6网络上被破坏的应用程序现在可以正常运行。注意数据中的H列</p><p> CLAT on the device allows for 10/10 scores for both IPv4 and IPv6 on  test-ipv6.com</p><p>该设备上的CLAT允许在test-IPv6上对IPv4和IPv6进行10/10的评分。通用域名格式</p><p>   Skype makes a successful call, signalling of IPv4 addresses works since the application can bind to the CLAT IPv4 address</p><p>Skype成功呼叫，IPv4地址的信令工作，因为应用程序可以绑定到CLAT IPv4地址</p><p> Google Talk Video Chat works correctly despite signalling IPv4 literals, the CLAT interface allows this application when it would otherwise be broken on IPv6-only</p><p>Google Talk Video Chat正常工作，尽管发送IPv4文本信号，但CLAT接口允许此应用程序在仅在IPv6上中断时使用</p><p> Cisco  ASR 1000 as CLAT and  LITNET public implementation of  Linux NAT64 BIND DNS64 as PLAT</p><p>Cisco ASR 1000 as CLAT和LITNET Linux NAT64绑定DNS64 as平台的公共实现</p><p> CLAT has IPv4-only network with 1 Windows 7 PC on it (other scenarios also described below for dual-stack and using DNS64)</p><p>CLAT有一个只有IPv4的网络，上面有一台Windows 7 PC（下面还介绍了双栈和使用DNS64的其他情况）</p><p> CLAT is configured to forward all IPv4 traffic to the LITNET NAT64, there was no coordination with LITNET to support this test.</p><p>CLAT配置为将所有IPv4流量转发到LITNET NAT64，但没有与LITNET协调以支持此测试。</p><p>  All IPv4 traffic from G0/0/0 (IPv4-only LAN)  is RFC6145 translated as it is routed to G0/0/3 (IPv6-only WAN)</p><p>来自G0/0/0（仅限IPv4 LAN）的所有IPv4流量在路由到G0/0/3（仅限IPv6 WAN）时都会转换为RFC6145</p><p>   The dual-stack windows PC with 464XLAT and IPv6-only WAN scores 10/10 for both IPv4 and IPv6 test-ipv6.com</p><p>双栈windows PC（带464X LAT和仅限IPv6的WAN）在IPv4和IPv6测试IPv6中的得分均为10/10。通用域名格式</p><p>  DNS request can be made from IPv4-only host to any arbitrary public DNS server such as 8.8.8.8</p><p>DNS请求可以从仅IPv4的主机向任意公共DNS服务器（如8.8.8.8）发出</p><p> When a dual-stack host is used, it may use the DNS64 to minimize translation on the CLAT since the dual-stack host will always receive AAAA answers for DNS queries.</p><p>当使用双栈主机时，它可能会使用DNS64来最小化CLAT上的转换，因为双栈主机将始终收到DNS查询的AAAA答案。</p><p>     10/10 for both IPv4 and IPv6 is achieved by allowing the host to send IPv4 packets to the CLAT to be translated to IPv6 in the 464XLAT model.  In this way, IPv4 literal and IPv4-only applications can be supported across an IPv6-only network.</p><p>IPv4和IPv6的10/10是通过允许主机向CLAT发送IPv4数据包来实现的，以便在464XLAT模型中转换为IPv6。通过这种方式，可以在仅限IPv6的网络上支持IPv4文本和仅限IPv4的应用程序。</p><p>   464XLAT Case: IPv4-only host, IPv6-only WAN, using LITNET NAT64, 8.8.8.8 DNS,  and ASR 1000 as CLAT</p><p>464XLAT情况：仅IPv4主机，仅IPv6 WAN，使用LITNET NAT64、8.8.8.8 DNS和ASR 1000作为CLAT</p><p> This use case shows how an IPv4-only host may reach IPv4-only destination across an IPv6-only WAN</p><p>本用例展示了仅IPv4主机如何通过仅IPv6的WAN到达仅IPv4的目标</p><p>  A: To demonstrate that  464XLAT is a useful architecture with running code.  It is also intended to help guide network operators begin their own research, testing, and deployment of 464XLAT.</p><p>答：证明464XLAT是一个有用的架构，可以运行代码。它还旨在帮助指导网络运营商开始自己的464XLAT研究、测试和部署。</p><p>     Q: All of the above test demonstrate how 464XLAT allows the edge network to grow without being tighly coupled IPv4 resources, since IPv4 is all shared on the stateful NAT PLAT?</p><p>问：以上所有测试都演示了464XLAT如何允许边缘网络增长，而不需要临时耦合IPv4资源，因为IPv4都在有状态NAT平台上共享？</p><p>   Q:  Is there a way to demonstrate this only using free and open source code?</p><p>问：有没有办法只用免费的开源代码来证明这一点？</p><p> A:   A:  Yes, there are free PLAT (Linux NAT64, OpenBSD PF, Ecdysis ....)  and CLAT ( Android , Vyatta/ASAMAP -- configuration,  CLATd for Linux)</p><p>答：是的，有免费平台（Linux NAT64、OpenBSD PF、蜕皮……）和CLAT（Android、Vyatta/ASAMAP——配置、针对Linux的CLATd）</p><p>  Q:  My organization does not like open source, can this be done with commercial gear?</p><p>问：我的组织不喜欢开源，这可以通过商业设备来实现吗？</p><p> A:  Yes, there are several NAT64 PLAT platforms from:   Cisco,  Juniper,  Brocade,  A10 and others.  You can also use the ASR 1000 as CLAT using stateless translation (demonstrated above)</p><p>答：是的，有几个NAT64平台来自：思科、Juniper、Brocade、A10等。您还可以使用ASR 1000 as CLAT，使用无状态翻译（如上所示）</p><p>   A:  Yes, T-Mobile provides a  beta IPv6 service today that includes NAT64/DNS64.  If you attach to the T-Mobile USA network with a CLAT enabled Android phone, you will be doing 464XLAT.</p><p>答：是的，T-Mobile现在提供了一种测试版IPv6服务，包括NAT64/DNS64。如果您使用支持CLAT的Android手机连接到T-Mobile USA网络，您将使用464X LAT。</p></div><div id="story_share_this"><div class="sharethis-inline-share-buttons"></div></div><div class="story_tags page_narrow"><button type="button" class="btn btn-light my_tag"><a href="/tag/仅限/">#仅限</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/ipv4/">#ipv4</a></button></div></div><div class="my_movie_list_item shadow p-3 mb-5 bg-white rounded"><button type="button" class="btn btn-link my_tag"><a href="/tag/web2.0/">#web2.0</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/google/">#google</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/设计/">#设计</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/创意/">#创意</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/摄影/">#摄影</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/图片/">#图片</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/游戏/">#游戏</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/软件/">#软件</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/广告/">#广告</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/视频/">#视频</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/手机/">#手机</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/iphone/">#iphone</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/网站/">#网站</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/免费/">#免费</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/windows/">#windows</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/下载/">#下载</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/微软/">#微软</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/苹果/">#苹果</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/firefox/">#firefox</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/blog/">#blog</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/音乐/">#音乐</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/博客/">#博客</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/apple/">#apple</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/wordpress/">#wordpress</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/恶搞/">#恶搞</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/qq/">#qq</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/谷歌/">#谷歌</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/艺术/">#艺术</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/web/">#web</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/工具/">#工具</a></button></div></div></div><div id="my_footer"><div class=""><a href="/tags/">tags</a> <a href="/users/">users</a></div>&copy;2012-2021 diglog.com </div></div></body></html>