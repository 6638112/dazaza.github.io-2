<!doctype html><html lang="zh-hans"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>用于在Web应用程序中更改数据模型的迂腐检查表 </title><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"><link rel="stylesheet" href="/img/css.css?random="><link data-rh="true" rel="icon" href="/img/favicon.ico"/><script data-ad-client="ca-pub-6067137220025946" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script type="text/javascript" src="https://platform-api.sharethis.com/js/sharethis.js#property=5effb96910009800120b8d4d&product=inline-share-buttons" async="async"></script>
<script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?03c1a0f31299b4a2fbb83c34d6beaac9";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script></head><body><div id="my_header"><div class="container"><nav class="navbar navbar-expand-lg"><a class="navbar-brand" href="/"><img alt="diglog" src="/img/logo.v1.gif" class="rounded-sm"></a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarNavAltMarkup"><div class="navbar-nav"></div></div></nav></div></div><div class="container"><div id="my_content"><h1 class="page_narrow">用于在Web应用程序中更改数据模型的迂腐检查表 </h1><div class="row"><div class="col-lg-12 col-12"><div class="my_story_list_item shadow p-3 mb-5 bg-white rounded"><div class="story_page_pub_time page_narrow">2021-06-09 21:00:31</div><div class="page_narrow text-break page_content"><p>让＆＃39; s说你有一个带有一些数据库的Web应用程序。在您的数据库中，您有一个发票模型，您可以在那里存储您为客户收费的东西。</p><p> 您的结算系统是灵活的，因此您支持建立税收或独家发票，以及免税发票！在此模型中，您将其存储为：</p><p>  您使用此几年，为您的数据库写一堆实例。你醒来的一天并决定你不再喜欢这个型号！它允许表示无效状态（什么是不征税，但含税发票？）。因此，您决定要用于新数据模型：</p><p>   您的数据库＆＃39; S数据都在旧的形状！您＆＃39; ll需要将所有数据移到此新数据模型。</p><p> 你是一个高度可用的Web应用程序！除非你可以避免它，否则你不会做任何停机时间（井，有计划，无论如何）。</p><p> 您的系统跨越多台机器（高可用性右侧？），因此您必须在部署期间同时处理多个版本的后端代码。</p><p> 在那里有一个整个步骤列表，你必须要做的事情来推出这种变化。关于＆＃34;双重写作和＃34 ;,34;回填＆＃34;等等，但是当您最终需要做出向后 - 不兼容的变化时，它实际上有很多步骤！ </p><p>我觉得我知道这个名单，但是每次偶尔我最终错过了一步，当我走出人迹罕至的时候，这里的列表和＃39;列表，在所有迂科中需要每一段时间。</p><p> 这里的一个重要细节是您需要逐一推出每个版本。您可以在版本3和第4版上拥有系统的某些部分。但如果您在第3版和版本5上的其他系统上有一些系统，则会使用数据稳定性的问题。这使得很多步骤！根据您的数据模型，您可能能够将多个版本保险为一个（特别是当您具有灵活的系统时）。</p><p>  当然，申请的初始版本正在使用旧模型。这是您的起点，它可能实际上无法准备好开始引入新模型（特别是如果您的应用程序＆lt;  - ＆gt; db图层尤其严格）</p><p>  如果存在新的表示，此版本将能够读取您的数据而不会爆炸。这并不意味着你正在使用任何新的代表！只是你可以处理它。</p><p> 许多系统在Don＆＃39; t实际上要求这是一个独特的步骤。您可以将新列添加到数据库中，并将现有查询继续工作只是Fiine。但是你需要更加小心的地方。一些例子：</p><p> 将新值添加到枚举。如果我只拥有Tax_inclusive和Tax_Exclusive，我需要在我开始将数据迁移到此（或具有新行使用它）之前放入No_Tax处理代码。</p><p> 系统严格验证。当在某些JSON字典中出现新密钥开始时，系统可能会有错误路径，因此您可能需要为此添加准备代码。 </p><p>对于SQL数据库，通常是关于将新列添加到数据库中。某些数据库可能不需要此步骤，并且某些数据模型更改可能不需要此（例如，如果您只是将新值添加到枚举中，但底层数据被存储为字符串）</p><p>  此版本的应用程序将开始填写写入数据库的两个表示。您仍然继续从旧的表示中读取（因此v1的写入仍然有意义），并写入旧的表示意味着在V1  - ＆gt; v2部署，v1读取Don＆＃39; t出陈旧。</p><p>  对于哈比和＃39的任何行为。从你推出的版本2被写入2，你赢了＆＃39; t已经填写了你的数据的新代表（也许是用户只有一段时间登录的用户＆＃39; ）。为了确保准备好读取新的表示，此迁移应该通过所有现有数据并填写新的表示。</p><p> 部署版本2后，您需要执行此操作，因为如果在迁移期间会发生版本1写入，则回填值实际上将陈旧。并且在开始阅读新表示之前，您需要执行此迁移，以便正确读取旧记录。</p><p>  你现在填写了新的领域，所以你可以从中读取！但是，您仍然需要写入两个表示。为什么？因为您的申请版本2仍然从旧领域读取！在部署期间，您＆＃39; LL仍然有先前版本的机器，因此您需要至少在部署期间与共存兼容。</p><p>  有时不需要，但如果您正在删除需要一次的旧领域，则您希望在此时删除这些约束。如果您不执行此操作，则部署一个应用程序版本的应用程序，其中删除了对旧版本的引用，则可能会击中数据库约束失败等。</p><p>  此时，以前的版本只是为了向后兼容原因编写到旧表示。所以你可以停止写入旧的表示，并且所有读/写路径都刚刚击中新的表示。 </p><p>此时，您还需要删除对旧表示（特别是模型字段）的引用，以准备最终迁移。  版本4出版后，查询应不再引用旧表示。 你应该是好的，只是为了完全放弃这个东西！  在您的特定情况下，可能是其中一些可以合并。 我发现这些步骤足以安全地涵盖最多的情景。 虽然真的，最好的是真正了解为什么需要这么多步骤以及系统的特征是否强加不同的约束。  如果您在实践中遇到这种卷展栏的问题或以其他方式认为这项游戏计划缺少一些关键步骤，请给我发电子邮件！ 我非常好奇地覆盖所有基地。 </p></div><div id="story_share_this"><div class="sharethis-inline-share-buttons"></div></div><div class="text-break sotry_link page_narrow"><a target="_blank" href="https://rtpg.co/2021/06/07/changes-checklist.html">https://rtpg.co/2021/06/07/changes-checklist.html</a></div><div class="story_tags page_narrow"><button type="button" class="btn btn-light my_tag"><a href="/tag/程序/">#程序</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/web/">#web</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/checklist/">#checklist</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/版本/">#版本</a></button></div></div><div class="shadow p-3 mb-5 bg-white rounded clearfix"><div class="container"><div class="row"><div class="col-sm"><div><a target="_blank" href="/story/1064520.html"><img src="http://img2.diglog.com/img/2021/6/thumb_7cf484ceeae6bc7fc2161eddc603cd15.jpg" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1064520.html">lockdown.exe：通过Windows软件限制策略阻止未知应用程序 </a></div><span class="my_story_list_date">2021-6-9 20:54</span></div><div class="col-sm"><div><a target="_blank" href="/story/1064462.html"><img src="http://img2.diglog.com/img/2021/6/thumb_a4ee3f1e14760c71a30c0e7d3d58d4a5.jpg" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1064462.html">俄亥俄州文件诉讼申报谷歌公共实用程序 </a></div><span class="my_story_list_date">2021-6-9 8:52</span></div><div class="col-sm"><div><a target="_blank" href="/story/1064447.html"><img src="http://img2.diglog.com/img/2021/6/thumb_0cd73ff11b3973578652984b81260a62.jpg" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1064447.html">俄亥俄州AG的Clarence Thomas Spurred Clarence Thomas希望谷歌宣布了公共实用程序 </a></div><span class="my_story_list_date">2021-6-9 7:49</span></div><div class="col-sm"><div><a target="_blank" href="/story/1064424.html"><img src="http://img2.diglog.com/img/2021/6/thumb_12bc6f6fd3d95353a30a1a771f5fe62a.jpg" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1064424.html">俄亥俄州AG文件与特拉华州县法院的诉讼指控谷歌的搜索业务是反竞争，并要求法院宣布谷歌公共实用程序 </a></div><span class="my_story_list_date">2021-6-9 6:4</span></div></div></div></div><div class="my_movie_list_item shadow p-3 mb-5 bg-white rounded"><button type="button" class="btn btn-link my_tag"><a href="/tag/web2.0/">#web2.0</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/google/">#google</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/设计/">#设计</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/创意/">#创意</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/摄影/">#摄影</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/游戏/">#游戏</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/图片/">#图片</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/软件/">#软件</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/视频/">#视频</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/手机/">#手机</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/广告/">#广告</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/apple/">#apple</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/iphone/">#iphone</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/网站/">#网站</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/免费/">#免费</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/下载/">#下载</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/windows/">#windows</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/微软/">#微软</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/firefox/">#firefox</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/苹果/">#苹果</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/blog/">#blog</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/音乐/">#音乐</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/博客/">#博客</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/wordpress/">#wordpress</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/恶搞/">#恶搞</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/艺术/">#艺术</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/qq/">#qq</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/web/">#web</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/谷歌/">#谷歌</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/工具/">#工具</a></button></div></div></div><div id="my_footer"><div class=""><a href="/tags/">tags</a> <a href="/users/">users</a></div>&copy;2012-2021 diglog.com </div></div></body></html>