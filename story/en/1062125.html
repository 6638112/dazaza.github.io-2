<!doctype html><html lang="zh-hans"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>V1.10与V1.10 Deno v1.10 Released</title><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"><link rel="stylesheet" href="/img/css.css?random="><link data-rh="true" rel="icon" href="/img/favicon.ico"/><script data-ad-client="ca-pub-6067137220025946" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script type="text/javascript" src="https://platform-api.sharethis.com/js/sharethis.js#property=5effb96910009800120b8d4d&product=inline-share-buttons" async="async"></script>
<script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?03c1a0f31299b4a2fbb83c34d6beaac9";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script></head><body><div id="my_header"><div class="container"><nav class="navbar navbar-expand-lg"><a class="navbar-brand" href="/"><img alt="diglog" src="/img/logo.v1.gif" class="rounded-sm"></a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarNavAltMarkup"><div class="navbar-nav"></div></div></nav></div></div><div class="container"><div id="my_content"><h1 class="page_narrow">Deno v1.10 Released<br/>V1.10与V1.10 </h1><div class="row"><div class="col-lg-12 col-12"><div class="my_story_list_item shadow p-3 mb-5 bg-white rounded"><div class="story_page_pub_time page_narrow">2021-05-12 16:01:03</div><div class="story_img_container"><a href="http://img2.diglog.com/img/2021/5/86928eb4c6987ee4b647f47726776c57.png"><img src="http://img2.diglog.com/img/2021/5/86928eb4c6987ee4b647f47726776c57.png" class="img-fluid my_story_img" onerror="this.style.display='none'"></a></div><div class="page_narrow text-break page_content"><p>If you already have Deno installed you can upgrade to 1.10 by running deno upgrade. If you are installing Deno for the first time, you can use oneof the methods listed below:</p><p>如果您已安装Deno安装，则通过运行丹麦升级，您可以升级到1.10。如果您首次安装DENO，则可以使用以下方法的ONEOF：</p><p> # Using Shell (macOS and Linux):curl -fsSL https://deno.land/x/install/install.sh | sh# Using PowerShell (Windows):iwr https://deno.land/x/install/install.ps1 -useb | iex# Using Homebrew (macOS):brew install deno# Using Scoop (Windows):scoop install deno# Using Chocolatey (Windows):choco install deno</p><p> ＃使用shell（麦克斯和linux）：curl -fssl https://deno.land/x/install/install.sh | Sh＃使用PowerShell（Windows）：IWR HTTPS：//deno.land/x/install/install.ps1-useb | iex＃使用homebrew（麦斯科斯）：酿造install in deno＃使用scoop（windows）：scoop安装deno＃使用巧克力（windows）：choco安装deno</p><p>   Isolated and parallel execution of tests: Before this release, Deno ran alltests serially inside a single runtime instance. Now all discovered test modulesare run in isolation using a new instance of a runtime for each of the modules. deno test now supports the  --jobs flag that allows one to specify how manythreads should be used when running tests. By default all tests are still runserially.</p><p>   孤立和并行执行测试：在此版本之前，丹诺在单个运行时串行串行arttests。现在，所有发现的测试Modulesare使用每个模块的运行时的新实例运行隔离运行。 Deno测试现在支持--JOBS标志，允许其中的标志指定运行测试时应使用的曲线。默认情况下，所有测试仍然在运行状态。</p><p> Configurable permissions for tests: Deno has a number of flagsthat allow to specify permissions a program is allowed to use. To ease testingof your program under different permissions sets,  Deno.test now supports permissions option that allows to specify exact permissions to be applied to atest case.</p><p> 测试的可配置权限：丹诺有许多旗杆允许指定允许使用程序的权限。为了在不同的权限集下可容易地测试，Deno.test现在支持“权限”选项，允许指定要应用于最佳案例的确切权限。</p><p> Deno.test({ name: &#34;write only&#34;, permissions: { write: true, read: false }, async fn() { await Deno.writeTextFile(&#34;./foo.txt&#34;, &#34;I can write!&#34;); console.log(await Deno.readTextFile(&#34;./foo.txt&#34;)); },});</p><p> deno.test（{name：＆＃34;只写＆＃34;，权限：{write：true，阅读：false}，async fn（）{await deno.writetextfile（＆＃34; ./ foo.txt＆＃34 ;，＆＃34;我可以写！＆＃34;）; console.log（等待deno.readtextfile（＆＃34; ./ foo.txt＆＃34;））;}，}）;</p><p>  $ deno test --allow-read --allow-write --unstable test_permissions.tsCheck file:///Users/ry/src/deno/test_permissions.tsrunning 1 test from file:///Users/ry/src/deno/test_permissions.tstest write only ... FAILED (5ms)failures:write onlyPermissionDenied: Requires read access to &#34;./foo.txt&#34;, run again with the --allow-read flag at deno:core/core.js:86:46 at unwrapOpResult (deno:core/core.js:106:13) at async open (deno:runtime/js/40_files.js:46:17) at async Object.readTextFile (deno:runtime/js/40_read_file.js:40:18) at async fn (file:///Users/ry/src/deno/test_permissions.ts:6:17) at async asyncOpSanitizer (deno:runtime/js/40_testing.js:21:9) at async resourceSanitizer (deno:runtime/js/40_testing.js:58:7) at async exitSanitizer (deno:runtime/js/40_testing.js:85:9) at async runTest (deno:runtime/js/40_testing.js:199:7) at async Object.runTests (deno:runtime/js/40_testing.js:244:7)failures:	write onlytest result: FAILED. 0 passed; 1 failed; 0 ignored; 0 measured; 0 filtered out (37ms)</p><p>  $ deno test --allow-read -allow-write  -  unstable test_permissions.tscheck文件：//users/ry/src/deno/test_permissions.tsrunning 1从文件中测试：///用户/ Ry / src / deno /test_permissions.tstest只写入...失败（5ms）失败：写入次数denied：需要读取访问＆＃34; ./ foo.txt＆＃34;，再次使用deno read-read标志运行：核心/ core.js：86：46在unwrappropresult（deno：core / core.js：106：13）在Async Open.ReadTextFile（Deno：运行时/）处于Async Open（Deno：Runtime / JS / 40_Files.js：46：17） js / 40_read_file.js：40：18）在Async Fn（文件：//users/ry/src/deno/test_permissions.ts：6：17）在Async AsyncopsAnitizer（Deno：Runtime / JS / 40_Testing.js：21 ：9）在Async Exitsanitizer（Deno：运行时/ js / 40_testing.js：85：9）处的Async IncuessInizer（Deno：58：7）在Async Runtest（丹诺：运行时/ js / 40_testing） .js：199：7）在Async对象.RULESTS（DENO：Runtime / JS / 40_Testing.js：244：7）失败：写入仅限结果：失败。 0通过; 1失败; 0忽略了; 0测量; 0过滤掉（37ms）</p><p> Keep in mind, permissions requested by a test case cannot exceed permissionsgranted to the process using  --allow-* flags. If a key is omitted in permissions object then it inherits its value from the respective  --allow-*flag.</p><p> 请记住，测试用例所要求的权限不能超过使用--allow-*标志的进程的Permissgranted。如果在权限对象中省略了一个密钥，则它将继承其从相应--allow-*标志的值。 </p><p>  Better test runner output: When running a test suite a prompt will bedisplayed for each discovered module with number of tests and origin of thosetests.</p><p>更好的测试Runner输出：运行测试套件时，将为每个发现的模块提供提示，其中包含测试数量和原点。</p><p> running 4 tests from file:///dev/deno/cli/tests/unit/tty_test.tstest consoleSizeFile ... ok (11ms)test consoleSizeError ... ok (4ms)test isatty ... ok (4ms)test isattyError ... ok (3ms)running 6 tests from file:///dev/deno/cli/tests/unit/rename_test.tstest renameSyncSuccess ... ok (17ms)test renameSyncReadPerm ... ok (5ms)test renameSyncWritePerm ... ok (6ms)test renameSuccess ... ok (13ms)test renameSyncErrorsUnix ... ok (34ms)test renameSyncErrorsWin ... ignored (1ms)...</p><p> 从文件运行4个测试：///dev/deno/cli/tests/unit/tty_test.tstest veleasizefile ...好的（11ms）测试账户化error ...确定（4ms）测试insatty ...确定（4ms）test isattyerror ...好的（3ms）从文件运行6个测试：///dev/deno/cli/tests/unit/rename_test.tstest renamedyncsucess ...确定（17ms）test renameyncreadperm ...确定（5ms）test renamesyncwriteperm。 。好的（6ms）测试Renames ...确定（13ms）测试RenameyNcErrorSunix ......确定（34ms）测试RenameyNcErrorswin ...忽略（1ms）...</p><p> Type check examples in documentation: Ensuring documentation stays up todate is crucial for all projects. It is easy to forget to update code samplesafter changing the API, leading to stale code samples. To prevent suchsituations  deno test now supports the  --doc flag that will type check codeexamples in the documentation comments.</p><p> 类型在文档中查看示例：确保文档保持待扭力对所有项目至关重要。很容易忘记更新代码SamplesAfter更改API，导致陈旧的代码样本。为防止丹麦测试现在支持将在文档评论中键入检查CodeExamples的-Doc标志。</p><p> /** * ``` * import { example } from &#34;./test_docs.ts&#34;; * * console.assert(example() == 42); * ``` */export function example(): string { return &#34;example&#34;;}</p><p> / ** *```*导入{example} from＆＃34; ./ test_docs.ts＆＃34 ;; * * console.assert（示例（）== 42）; *```* /导出函数示例（）：string {return＆＃34;示例＆＃34 ;;}</p><p>  $ deno test --doc https://deno.com/v1.10/test_docs.tsCheck file:///dev/test_docs.ts:2-7error: TS2367 [ERROR]: This condition will always return &#39;false&#39; since the types &#39;string&#39; and &#39;number&#39; have no overlap.console.assert(example() == 42); ~~~~~~~~~~~~~~~ at file:///dev/test_docs.ts:2-7.ts:3:16</p><p>  $ deno test --doc https://deno.com/v1.10/test_docs.tscheck文件：///dev/test_docs.ts：2-7Error：TS2367 [错误]：此条件将始终返回＆＃39;假＆＃39;自从类型＆＃39; string＆＃39;和＃39;数字＆＃39;没有重叠.Console.Assert（示例（）== 42）; ~~~~~~~~~~~~~~~ at文件：///dev/test_docs.ts：2-7.Ts：3：16</p><p> In the future releases we plan to add support for running code examples asregular tests.</p><p> 在未来版本中，我们计划添加对运行代码示例的支持ASRegular测试。</p><p> Watch for file changes when running tests:  deno test now supports the --watch flag that will keep the process alive after finishing tests and watchfor file changes to re-run relevant test cases.</p><p> 在运行测试时监视文件更改：丹诺测试现在支持--Watch标志将在完成测试后保持过程并监视文件更改以重新运行相关的测试用例。 </p><p> As in other subcommands that support  --watch flag, the files that are neededto be watched are automatically discovered by Deno.</p><p>与支持--WARCT标志的其他子命令一样，所需的文件被丹诺自动发现。</p><p>    Web Workers are the parallelization primitive of the web. They allow you to runmultiple bits of JavaScript, TypeScript, or WASM concurrently, in seperateexecution environments (isolates). You can communicate between these workers andthe main thread by passing messages from one to another.</p><p>    Web工人是Web的并行化原始。它们允许您在单个例外环境（隔离）中同时运行JavaScript，Cypescript或WASM。您可以通过将消息传递到另一个工人和主线程之间进行通信。</p><p> Deno has supported web workers ever since our inital 1.0 release, but there wasa major limitation: until now  Worker.postMessage() used non-spec compliantalgorithm that internally JSON-stringified messages. This solution led to somesurprising pitfalls for users, because not all values and objects wereserialized properly. This release changes that to allow any data which can beserialized using the structured clone alogrithm.</p><p> 丹诺自从我们的Intal 1.0发布以来支持Web工作者，但有一个重大限制：直到现在员工.PostMessage（）使用内部JSON合格的邮件的非规范符合性algorithm。此解决方案导致用户为SomesureSulising缺陷，因为并非所有值和对象都会正确地提升。此版本更改为允许使用结构化克隆alogrom批准的任何数据。</p><p> Here is an example of sending a recursive JavaScript object to a Worker, whichpreviously would have thrown an error:</p><p> 以下是向工作人员发送递归JavaScript对象的示例，这将抛出错误：</p><p> const obj = { hello: &#34;world&#34; };obj.self = obj;const worker = new Worker( &#34;data:application/javascript,self.onmessage = (e) =&gt; self.postMessage(e.data);&#34;, { type: &#34;module&#34; },);worker.onmessage = (e) =&gt; { console.log(&#34;Received event:&#34;, e.data);};worker.postMessage(obj);</p><p> const obj = {你好：＆＃34;世界＆＃34; }; obj.self = obj; const worker =新工人（＆＃34;数据：application / javascript，self.onmessage =（e）=＆gt; self.postmessage（e.data）;＆＃34;，{类型：＆＃34;模块＆＃34;}，）; worker.onmessage =（e）=＆gt; {console.log（＆＃34;收到的事件：＆＃34;，e.data）;}; worker.postmessage（obj）;</p><p>   This release adds support for the Web Storage API. This API consists of localStorage and  sessionStorage, which can be used to store a small amountof data persistently, without direct file system access. Data is keyed by origin(which in Deno can be set with  --location). You can make use of  localStorageand  sessionStorage without requiring any permissions.</p><p>   此版本为Web存储API添加了支持。此API由LocalStorage和SessionStorage组成，可用于持久地存储少量数据，而无需直接文件系统访问。数据由原点键入（在丹麦中可以使用--location设置）。您可以使用LocalStorageAnd SessionStorage，而无需任何权限。</p><p>  The API works just like in the browser:  localStorage can be used topersistently store up to 5 MB of data across process restarts, while sessionStorage can be used to store a small amount of data for the duration ofthe process.</p><p>  API工作就像在浏览器中一样：LocalStorage可以使用拓扑存储在过程重新启动时最多5 MB的数据，而SessionStorage可用于存储过程持续时间的少量数据。 </p><p>  // kv.tsconst key = Deno.args[0];if (key === undefined) { // if user passes no args, display number of entries console.log(localStorage.length);} else { const value = Deno.args[1]; if (value === undefined) { // if no value is specified, return value of the key console.log(localStorage.getItem(key)); } else { // if value is specifed, set the value localStorage.setItem(key, value); }}</p><p>// kv.tsconst key = deno.args [0];如果（key ===未定义）{//如果用户通过args，则显示条目控制台的数量.log（localstorage.length）;} else {const值= deno.args [1]; if（value ===未定义）{//如果没有指定值，则返回key console.log的值（localstrage.getItem（key））; } else {//如果指定值，请设置值localstorage.setItem（键，值）; }}</p><p> $ deno run --location https://example.com ./kv.ts0$ deno run --location https://example.com ./kv.ts foo bar$ deno run --location https://example.com ./kv.ts foobar$ deno run --location https://example.com ./kv.ts1</p><p> $ deno运行 - 位置https://example.com ./kv.ts0$ enow --location https://example.com ./kv.ts foo bar $ deno运行--location https：//示例。 com ./kv.ts foobar $ deno运行 - 位置https://example.com ./kv.ts1</p><p>   deno fmt is a formatter based on   dprint that is ableto format JavaScript, TypeScript, JSON and Markdown files.</p><p>   丹诺FMT是一个基于Dint的格式化程序，它是Ableto格式JavaScript，Cypescript，Json和Markdown文件。</p><p> To skip formatting of a file one can use  deno-fmt-ignore-file directivein a form of comment at the top of the file. Previously those directives werenot working in Markdown files, but from 1.10 they are now supported.</p><p> 跳过文件的格式，可以使用deno-fmt-ingrore-filedifige指令在文件顶部的评论形式。以前那些指令Werenot在标记文件中工作，但现在支持1.10。</p><p> To skip formatting a Markdown file use  &lt;!-- deno-fmt-ignore-file --&gt; atthe top of the file.</p><p> 跳过格式化标记文件使用＆lt;！ -  deno-fmt-Ignore-file  - ＆gt;在文件的顶部。</p><p>  This release enables support for atomics and shared memory in WebAssembly. Thisfeature is already enabled by default in Chrome and Firefox, and now also inDeno.</p><p>  此版本使得支持WebasseMbly中的原始原子和共享内存。此前已经在Chrome和Firefox中启用了已启用，现在也是Indeno。</p><p> Setting the  shared to  true in the  WebAssembly.Memory constructor enablesatomics, and allows for shared array buffers as WASM memory the backing store.</p><p> 在WebasseMbly中将共享设置为True.Memory构造函数启用算法，允许共享阵列缓冲区作为WASM Memory备份存储。 </p><p>  WASM threading is not yet possible in Deno, because of the lack of support fortransferring (shared) array buffers to workers. This is a feature we want tointroduce soon. To learn more about WASM threads, you can read this blog post from Alex Danilo.</p><p>由于缺乏支持转移（共享）阵列缓冲区的支持，WASM线程尚不可能。这是我们想要很快倾向的一个功能。要了解有关WASM线程的更多信息，您可以从Alex Danilo阅读此博客文章。</p><p>  Deno stabilized import maps in Deno v1.8, after they were stabilized in Chrome89. In 1.10 we have enabled the use of remote import maps. This means thatimport maps now do not have to be stored on the local file system, they can alsobe loaded over HTTP:</p><p>  丹哥稳定的进口地图在Deno v1.8中，在Chrome89中稳定后。在1.10中，我们启用了使用远程导入地图。这意味着目前地图现在不必存储在本地文件系统上，他们可以在http上加载Alsobe：</p><p>   This release refreshes the plugin interface and allows them to leverage  serde_v8 for interfacing between runtimeand the native plugin. This update provides all necessary utilities to dispatchops from native plugins without needing to use third party code. Additionallyplugins are now allowed to access  ResourceTable to store Rust objects insidethe runtime infrastructure. Refer to the  test_pluginexample for how to use those APIs. The plugin system still requires the --unstable flag, as it&#39;s an experimental feature.</p><p>   此版本刷新插件界面，并允许它们利用Serde_v8以在runtimeand本机插件之间接口。此更新提供从本机插件调度的所有必要实用程序，而无需使用第三方代码。此外，现在允许使用斥责将rust对象储存运行时基础架构的resourcetable。有关如何使用这些API，请参阅test_pluginexample。插件系统仍然需要 - 不稳定标志，如实验特征。</p><p>   Some parts of Deno are not yet stable and might undergo breaking changes beforebeing stabilized - this refers mostly to JavaScript APIs. To use those APIs itis required to specify  --unstable flag when running Deno. However this flagwas also used to mark some of CLI features that were not yet stable (like deno lint). In 1.10 we have removed requirement to use  --unstable flag forCLI features, and thus, from now on  --unstable flag controls only theavailability of unstable runtime APIs. Some of the CLI features that are stillconsidered unstable have appropriate comments in their help text ( UNSTABLE:).However they no longer require to use  --unstable flag to run the subcommand,eg.  deno compile,  deno lint.</p><p>   丹诺的某些部分尚未稳定，可能会在稳定之前进行断裂变化 - 这主要是指JavaScript API。在运行丹诺时使用所需的API ITIS指定 - 不稳定标志。但是，此旗杆还用于标记尚未稳定的CLI功能（如丹麦棉绒）。在1.10中，我们已删除了使用 - 不稳定标志Forcli功能，因此，从现在开始，不稳定的标志仅控制不稳定的运行时API的可力性。一些仍然被认为不稳定的CLI功能在他们的帮助文本中有适当的评论（不稳定:)。但是，它们不再需要使用 - 不稳定标志来运行子命令，例如。丹诺编译，丹诺棉绒。 </p></div><div id="story_share_this"><div class="sharethis-inline-share-buttons"></div></div><div class="text-break sotry_link page_narrow"><a target="_blank" href="https://deno.com/blog/v1.10">https://deno.com/blog/v1.10</a></div><div class="story_tags page_narrow"><button type="button" class="btn btn-light my_tag"><a href="/tag/v1/">#v1</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/deno/">#deno</a></button></div></div><div class="my_movie_list_item shadow p-3 mb-5 bg-white rounded"><button type="button" class="btn btn-link my_tag"><a href="/tag/web2.0/">#web2.0</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/google/">#google</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/设计/">#设计</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/创意/">#创意</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/摄影/">#摄影</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/图片/">#图片</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/游戏/">#游戏</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/软件/">#软件</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/视频/">#视频</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/广告/">#广告</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/手机/">#手机</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/iphone/">#iphone</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/网站/">#网站</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/免费/">#免费</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/下载/">#下载</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/windows/">#windows</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/apple/">#apple</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/微软/">#微软</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/firefox/">#firefox</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/blog/">#blog</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/苹果/">#苹果</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/音乐/">#音乐</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/博客/">#博客</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/wordpress/">#wordpress</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/恶搞/">#恶搞</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/qq/">#qq</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/艺术/">#艺术</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/web/">#web</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/工具/">#工具</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/分享/">#分享</a></button></div></div></div><div id="my_footer"><div class=""><a href="/tags/">tags</a> <a href="/users/">users</a></div>&copy;2012-2021 diglog.com </div></div></body></html>