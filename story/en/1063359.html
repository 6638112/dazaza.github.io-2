<!doctype html><html lang="zh-hans"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>PWAS作为URL处理程序 PWAs as URL Handlers</title><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"><link rel="stylesheet" href="/img/css.css?random="><link data-rh="true" rel="icon" href="/img/favicon.ico"/><script data-ad-client="ca-pub-6067137220025946" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script type="text/javascript" src="https://platform-api.sharethis.com/js/sharethis.js#property=5effb96910009800120b8d4d&product=inline-share-buttons" async="async"></script>
<script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?03c1a0f31299b4a2fbb83c34d6beaac9";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script></head><body><div id="my_header"><div class="container"><nav class="navbar navbar-expand-lg"><a class="navbar-brand" href="/"><img alt="diglog" src="/img/logo.v1.gif" class="rounded-sm"></a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarNavAltMarkup"><div class="navbar-nav"></div></div></nav></div></div><div class="container"><div id="my_content"><h1 class="page_narrow">PWAs as URL Handlers<br/>PWAS作为URL处理程序 </h1><div class="row"><div class="col-lg-12 col-12"><div class="my_story_list_item shadow p-3 mb-5 bg-white rounded"><div class="story_page_pub_time page_narrow">2021-06-04 04:11:32</div><div class="story_img_container"><a href="http://img2.diglog.com/img/2021/6/6647c523e0c399813ea5704998c4eba5.jpg"><img src="http://img2.diglog.com/img/2021/6/6647c523e0c399813ea5704998c4eba5.jpg" class="img-fluid my_story_img" onerror="this.style.display='none'"></a></div><div class="page_narrow text-break page_content"><p>PWAs as URL Handlers is part of the  capabilities projectand is currently in development. This post will be updated as the implementation progresses.</p><p>作为URL处理程序的PWA是Projectsand的一部分，目前正在开发中。这篇文章将在执行进展情况时更新。</p><p>  Imagine you are chatting with a friend using an instant messenger application like Messages on macOSand you are talking about music. Further imagine you both have the  music.example.com PWA installedon your devices. If you want to share your favorite track for your friend to enjoy, you can sendthem a deep link like  https://music.example.com/rick-astley/never-gonna-give-you-up. Since thislink is pretty long, the developers of  music.example.com may have decided to add an additionalshort link to each track, like, for example,  https://🎵.example.com/r-a/n-g-g-y-u.</p><p>  想象一下，你正在与朋友聊天使用即时通信应用程序，如麦斯兰群岛上的消息你正在谈论音乐。进一步想象你都有Music.example.com PWA Signdon你的设备。如果您想为您的朋友分享您最喜欢的曲目来享受，您可以派遣一个像https://music.example.com/rick-astley/never-gonna-give-you-up这样的深层链接。由于Thislink很长，Music.example.com的开发人员可能已经决定将AdformalShort链接添加到每个轨道，例如，Https：//.example.com/r-a/n-g-g-y-u。</p><p> PWA as URL Handlers allows apps like  music.example.com to register themselves as URL handlers forURLs that match patterns like  music.example.com,  *.music.example.com, or  🎵.example.com, sothat links from outside of the PWA, for example, from an instant messenger application or an emailclient, open in the installed PWA rather than in a browser tab.</p><p> PWA作为URL处理程序允许像Music.example.com这样的应用程序作为URL处理程序托管，该网址致意与Music.example.com，* .music.example.com，或🎵.example.com，来自外面的sothat链接例如，PWA从即时通信应用程序或电子邮件链接，在已安装的PWA中打开而不是在浏览器选项卡中。</p><p>     Music or video streaming sites so track links or playlist links open in the player experience ofthe app.</p><p>     音乐或视频流媒体站点，以便在应用程序的播放器体验中播放链接或播放列表链接。</p><p> News or RSS readers so followed or subscribed-to sites open in the app&#39;s reader mode.</p><p> 新闻或RSS读者如此遵循或订阅到App＆＃39; S读卡器模式下的网站。</p><p>     To experiment with PWAs as URL Handlers locally, without an origin trial token, enable the #enable-desktop-pwas-url-handling flag in  about://flags.</p><p>     要在本地作为URL处理程序进行实验，在没有原始试用令牌的情况下，请启用#endent-Desktop-PWAS-URL处理标志：//标志。</p><p> Support for the PWAs as URL Handlers feature is limited to desktop operating systemslike Windows, macOS, and Linux. On Android, Chromium browsers install PWAs by generating a WebAPK, which can register aset of intent filters for all URLs within the scope of the app. This means that PWAs already handleassociated URLs on Android at the operating system level using intent filters.</p><p> 支持PWA作为URL处理程序功能仅限于桌面操作系统的Windows，MacOS和Linux。在Android中，Chromium浏览器通过生成WebApk来安装PWA，这可以为应用范围内的所有URL注册ASET Intent过滤器。这意味着PWA使用意图过滤器在操作系统级别处理了Android的URL。 </p><p>  To associate an installed PWA with URL patterns, these patterns need to be specified in the web appmanifest. This happens through the  &#34;url_handlers&#34; member. It accepts an array of objects with an origin property, which is a required  string that is a pattern for matching origins. Thesepatterns are allowed to have a wildcard ( *) prefix in order to include multiple sub-domains (like *.example.com). URLs that match these origins could be handled by this web app. The scheme isalways assumed to be  https://.</p><p>要将安装的PWA与URL模式相关联，需要在Web AppManifest中指定这些模式。这发生在＆＃34; url_handlers＆＃34;成员。它接受具有原始属性的一系列对象，这是一个必需的字符串，它是匹配起源的模式。允许TheSepatterns具有通配符（*）前缀以包括多个子域（如* .example.com）。匹配这些起源的URL可以由此Web应用程序处理。该方案Isalways认为是https：//。</p><p> The excerpt of a web app manifest below shows how the music PWA example from the introductoryparagraph could set this up. The second entry with the wildcard ( &#34;*.music.example.com&#34;) makes surethat the app also gets activated for  www.music.example.com or potential other examples like marketing-activity.music.example.com.</p><p> 下面的Web应用程序的摘录显示了来自介绍orderparagraph的音乐PWA示例如何设置为此。与通配符的第二个条目（＆＃34; *。Music.example.com＆＃34;）使得应用程序也被激活为www.music.example.com或潜在的其他例子，如营销活动。例子。 COM。</p><p>  {   &#34;url_handlers&#34; :  [   {   &#34;origin&#34; :  &#34;music.example.com&#34;   } ,   {   &#34;origin&#34; :  &#34;*.music.example.com&#34;   } ,   {   &#34;origin&#34; :  &#34;🎵.example.com&#34;   }   ]  }</p><p>  {＆＃34; url_handlers＆＃34; ：[{＆＃34;起源＆＃34; ：＆＃34; music.example.com＆＃34; }，{＆＃34;起源＆＃34; ：＆＃34; *。Music.example.com＆＃34; }，{＆＃34;起源＆＃34; ：＆＃34;🎵.example.com＆＃34; }]}</p><p> While in an online scenario, short links from  🎵.example.com would typically beredirected to  music.example.com. Such navigation redirection is not a good alternative withrespect to offline scenarios. Therefore the app needs to register for both origins.</p><p> 在在线场景中，🎵.example.com的短链接通常会被击败到Music.example.com。此类导航重定向不是偏离线程方案的替代方案。因此，应用程序需要注册两项起源。</p><p>  Since the PWA lives on a different origin ( music.example.com) than some of the URLs it needs tohandle (e.g.,  🎵.example.com), the app needs to verify ownership of these other origins. Thishappens in a  web-app-origin-association file hosted on the other origins.</p><p>  由于PWA生存在不同的原点（Music.example.com）上的某些URL（例如，🎵.example.com），因此该应用程序需要验证这些其他问题的所有权。在另一个起源上托管的Web应用程序源关联文件中的此Happens。</p><p> This file must contain valid JSON. The top-level structure is an object, with a member named &#34;web_apps&#34;. This member is an array of objects and each object represents an entry for a uniqueweb app. Each object contains:</p><p> 此文件必须包含有效的JSON。顶级结构是一个对象，具有名为＆＃34; web_apps＆＃34;此成员是一个对象数组，每个对象都表示uniqueeb应用程序的条目。每个对象都包含：</p><p>    An example  web-app-origin-association file for the music PWA example from above is given below. Itwould be hosted on the origin  🎵.example.com and establishes the association with the music.example.com PWA, identified by its web app manifest URL.</p><p>    下面给出了上面的音乐PWA示例的示例Web-App-源关联文件。它会托管在原产地🎵.example.com上，并建立与Music.example.com PWA的关联，由其Web应用程序清单URL标识。 </p><p>  {   &#34;web_apps&#34; :  [   {   &#34;manifest&#34; :  &#34;https://music.example.com/manifest.json&#34; ,   &#34;details&#34; :  {   &#34;paths&#34; :  [ &#34;/*&#34; ] ,   &#34;exclude_paths&#34; :  [ &#34;/internal/*&#34; ]   }   }   ]  }</p><p>{＆＃34; web_apps＆＃34; ：[{＆＃34;清单＆＃34; ：＆＃34; https：//music.example.com/manifest.json&#34; ，＃34;细节＆＃34; ：{＆＃34;路径＆＃34; ：[＆＃34; / *＆＃34; ]，＆＃34;排除_paths＆＃34; ：[＆＃34; /内部/ *＆＃34; ]}}]}}</p><p> The  web-app-origin-association file is similar to Apple&#39;s associated domain file, Android&#39;s  assetlinks.json file,and Windows&#39;  windows-app-web-link file.What differs is that the  web-app-origin-association file does not reference PWAs using aplatform-specific app ID, but by their web app manifest URL.</p><p> Web-App-Origine关联文件类似于Apple＆＃39; s关联域文件，android＆＃39; s assetlinks.json文件，以及Windows＆＃39; Windows-app-web-link file.What的不同之处在于Web-App-源 - 关联文件不使用特定于Aplatform的应用程序ID引用PWA，而是由其Web应用程序清单URL。</p><p>  A PWA matches a URL for handling if both of the following conditions are fulfilled:</p><p>  如果满足以下两种情况，PWA匹配用于处理的URL：</p><p> The browser is able to validate via the respective  web-app-origin-association file that eachorigin agrees to let this app handle such a URL.</p><p> 浏览器能够通过相应的Web应用程序源关联文件进行验证，每个Gyp-app-源关联文件都同意让此应用程序处理此类URL。</p><p>   Add a  &lt;link rel=&#34;web-app-origin-association&#34;&gt; element in the header section of the main documentat the origin&#39;s root path that points at the  web-app-origin-association file via the  hrefattribute.</p><p>   添加＆lt;链接rel =＆＃34; web-app-源 - 协会＆＃34;＆gt;主文档的标题部分中的元素＆＃39; s通过hRefAttribute指向Web-App-源关联文件的根路径。</p><p> Place the  web-app-origin-association file in the  /.well-known/ folder at the root of the app.For this to work, the file name must exactly be  web-app-origin-association.</p><p> 将Web应用程序源关联文件放在应用程序的root的/.well-known/文件夹中。此项工作，文件名必须完全是Web-App-源关联。</p><p>  To test PWAs as URL Handlers, be sure to  set the browser flag asoutlined above and then install the PWA at https://mandymsft.github.io/pwa/. By looking at its web app manifest, you can see that ithandles URLs with the following URL patterns:  https://mandymsft.github.io and https://luhuangmsft.github.io. Since the latter is on a different origin ( luhuangmsft.github.io)than the PWA, the PWA on  mandymsft.github.io needs to prove ownership, which happens via the web-app-origin-association file hosted at https://luhuangmsft.github.io/.well-known/web-app-origin-association.</p><p>  要将PWAS视为URL处理程序，请务必将浏览器标志放在上面的浏览器标志，然后在https://mandymsft.github.io/pwa//上安装PWA。通过查看其Web应用程序清单，您可以看到具有以下URL模式的Ithands URL：https://mandymsft.github.io和https://luhuangmsft.github.io。由于后者在不同的原点（Luhuangmsft.githuit.io），而不是PWA，Mandymsft.Github.io上的PWA需要证明所有权，它通过HTTPS托管的Web-App-源关联文件发生了所有权：// luhuangmsft.github.io/.well-known/web-app-origin-association。 </p><p> To test that it is indeed working, send yourself a test message using an instant messaging app ofyour choice or an email viewed in an email client that is not web-based like Mail on macOS. Theemail or text message should contain either of the links  https://mandymsft.github.io or https://luhuangmsft.github.io. Both should open in the installed PWA.</p><p>要测试它确实工作，请使用即时邮件应用程序的Inty Messaging应用程序发送测试消息，或者在电子邮件客户端中查看的电子邮件，该电子邮件客户端不是基于Web的邮件。电子邮件或短信应包含链接https://mandymsft.github.io或https://luhuangmsft.github.io。两者都应该在安装的PWA中打开。</p><p>   The Chromium team has designed and implemented PWAs as URL Handlers using the core principlesdefined in  Controlling Access to Powerful Web Platform Features, including usercontrol, transparency, and ergonomics.</p><p>   Chromium团队使用核心原理设计和实施PWAS作为URL处理程序，使用核心原理进行控制，控制权限的访问权限，包括UserControl，透明度和人体工程学。</p><p>  If more than one PWA registers as a URL handler for a given URL pattern, the user will be promptedto choose which PWA they want to handle the pattern with—if any at all. Navigations that start in abrowser tab are not handled by this proposal, it is explicitly aimed at navigations that startoutside of the browser.</p><p>  如果多个PWA寄存器作为给定URL模式的URL处理程序，则会提示用户选择它们想要处理哪些PWA，如果有的话 - 如果有的话。在Araverer选项卡中开始的导航未通过此提议处理，它明确地针对浏览器启动中断的导航。</p><p>  If the necessary association validation cannot be completed successfully during PWA installation forany reason, the browser will not register the app as an active URL handler for the affected URLs.URL handlers, if improperly implemented, can be used to hijack traffic for websites. This is why theapp association mechanism is an important part of the scheme.</p><p>  如果在PWA安装期间无法成功完成必要的关联验证，则浏览器将不会将应用程序注册为受影响的URLS.URL处理程序的活动URL处理程序，如果实施不正确，可用于为网站劫持流量。这就是为什么THEAPP协会机制是该计划的重要组成部分。</p><p> Platform-specific applications can already use operating system APIs to enumerate installedapplications on the user&#39;s system. For example, applications on Windows can use the  FindAppUriHandlersAsyncAPI to enumerate URL handlers. If PWAs register as OS level URL handlers in Windows, their presencewould be visible to other applications.</p><p> 特定于平台的应用程序已经可以使用操作系统API枚举用户＆＃39; S系统上的已更改应用程序。例如，Windows上的应用程序可以使用FindAppUriHandLersAsAncapi来枚举URL处理程序。如果PWAS在Windows中注册为OS级别URL处理程序，则它们的存在会对其他应用程序可见。</p><p>  An origin could modify its associations with PWAs at any time. Browsers will regularly attempt torevalidate the associations of installed web apps. If a URL handler registration fails to revalidatebecause the association data has changed or is no longer available, the browser will removeregistrations.</p><p>  起源可以随时修改其关联与PWA。浏览器将定期尝试Torevalate已安装的Web应用程序的关联。如果URL处理程序注册未能重新验证，因此关联数据已更改或不再可用，则浏览器将重新启动。</p><p>  The Chromium team wants to hear about your experiences with the PWAs as URL Handlers.</p><p>  铬团队希望听到您与PWAS作为URL处理程序的经历。 </p><p>  Is there something about the API that doesn&#39;t work like you expected? Or are there missing methodsor properties that you need to implement your idea? Have a question or comment on the securitymodel? File a spec issue on the corresponding  GitHub repo, or add your thoughts to anexisting issue.</p><p>是否有关于API的事情，这也像你一样的工作？或者是否有缺少的方法or需要实现您的想法？对SecurityModel有一个问题或评论？在相应的GitHub repo上提交规格问题，或将您的想法添加到Anexisting问题。</p><p>  Did you find a bug with Chromium&#39;s implementation? Or is the implementation different from the spec?File a bug at  new.crbug.com. Be sure to include as much detail as you can,simple instructions for reproducing, and enter  UI&gt;Browser&gt;WebAppInstalls in the  Componentsbox.  Glitch works great for sharing quick and easy repros.</p><p>  你发现铬的虫子＆＃39; s的实施吗？或者从规范的实现是什么不同？在new.crbug.com上文件一个错误。请务必尽可能详细地包含，再现简单的再现说明，并输入UI＆gt;浏览器＆gt;零件框中的webappinstalls。毛刺很高兴分享快速和简单的Repros。</p><p>  Are you planning to use PWAs as URL Handlers? Your public support helps the Chromium team prioritizefeatures and shows other browser vendors how critical it is to support them.</p><p>  您是否计划使用PWA作为URL处理程序？您的公共支持帮助Chromium Team ReforitizeFeatures并展示了其他浏览器供应商支持它们的重要意义。</p><p> Send a tweet to  @ChromiumDev using the hashtag  #URLHandlers and letus know where and how you&#39;re using it.</p><p> 使用hashtag #urlhandlers和letus发送Tweet到@ChromiumDev和Letus了解您的位置和＃39;重新使用它。</p><p>    PWAs as URL Handlers was specified and implemented by  Lu Huangfrom the Microsoft Edge team. This article was reviewed by Joe Medley.Hero image by  Bryson Hammer on Unsplash.</p><p>    PWA是URL处理程序由Lu Huangom由Microsoft Edge团队指定和实施。这篇文章由Joe Medley.Hero Image通过Bryson Hammer进行审查。 </p></div><div id="story_share_this"><div class="sharethis-inline-share-buttons"></div></div><div class="text-break sotry_link page_narrow"><a target="_blank" href="https://web.dev/pwa-url-handler/">https://web.dev/pwa-url-handler/</a></div><div class="story_tags page_narrow"><button type="button" class="btn btn-light my_tag"><a href="/tag/程序/">#程序</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/url/">#url</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/应用程序/">#应用程序</a></button></div></div><div class="my_movie_list_item shadow p-3 mb-5 bg-white rounded"><button type="button" class="btn btn-link my_tag"><a href="/tag/web2.0/">#web2.0</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/google/">#google</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/设计/">#设计</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/创意/">#创意</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/摄影/">#摄影</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/游戏/">#游戏</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/图片/">#图片</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/软件/">#软件</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/视频/">#视频</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/手机/">#手机</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/广告/">#广告</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/apple/">#apple</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/iphone/">#iphone</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/网站/">#网站</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/免费/">#免费</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/下载/">#下载</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/windows/">#windows</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/微软/">#微软</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/firefox/">#firefox</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/苹果/">#苹果</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/blog/">#blog</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/音乐/">#音乐</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/博客/">#博客</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/wordpress/">#wordpress</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/恶搞/">#恶搞</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/艺术/">#艺术</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/qq/">#qq</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/web/">#web</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/谷歌/">#谷歌</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/工具/">#工具</a></button></div></div></div><div id="my_footer"><div class=""><a href="/tags/">tags</a> <a href="/users/">users</a></div>&copy;2012-2021 diglog.com </div></div></body></html>