<!doctype html><html lang="zh-hans"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>地上有价值10亿美元的服务器吗？</title><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"><link rel="stylesheet" href="/img/css.css?random="><link data-rh="true" rel="icon" href="/img/favicon.ico"/><script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?03c1a0f31299b4a2fbb83c34d6beaac9";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script><script data-ad-client="ca-pub-6067137220025946" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script type="text/javascript" src="https://platform-api.sharethis.com/js/sharethis.js#property=5effb96910009800120b8d4d&product=inline-share-buttons" async="async"></script></head><body><div id="my_header"><div class="container"><nav class="navbar navbar-expand-lg"><a class="navbar-brand" href="/"><img alt="diglog" src="/img/logo.v1.gif" class="rounded-sm"></a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarNavAltMarkup"><div class="navbar-nav"></div></div></nav></div></div><div class="container"><div id="my_content"><h1 class="page_narrow">地上有价值10亿美元的服务器吗？</h1><div class="row"><div class="col-lg-12 col-12"><div class="my_story_list_item shadow p-3 mb-5 bg-white rounded"><div class="story_page_pub_time page_narrow">2020-11-02 19:39:46</div><div class="page_narrow text-break page_content"><p>Note: Some details of the stories in this article are slightly altered to protect the privacy of the companies I worked for</p><p>注：本文中故事的一些细节略有更改，以保护我工作过的公司的隐私。</p><p> It&#39;s somewhat anecdotal, but in my work, I often encounter projects that seem to use highly inefficient infrastructure providers, from a cost perspective.</p><p>这有点奇闻轶事，但在我的工作中，我经常遇到一些项目，从成本的角度看，这些项目似乎使用了效率极低的基础设施提供商。</p><p> I usually point out that, based on a fairly unbiased hardware comparison, that they could save over half their budget by migrating, and am usually met with a series of almost canned answer about migrations being too difficult due to x,y,z.</p><p>我通常指出，基于相当公正的硬件比较，他们可以通过迁移节省一半以上的预算，而且通常会遇到一系列几乎可以肯定的答案，即由于x、y、z的原因，迁移太困难。</p><p>  I will pick one of the &#34;expensive&#34; and one of the &#34;cheap&#34; server providers, chosen simply based on the fact that I&#39;ve worked with them a lot, and compare two of their high~ish end servers.</p><p>我会选择一个昂贵的服务器提供商和一个便宜的服务器提供商，这只是因为我与他们合作过很多，并比较了他们的两个高端服务器。</p><p> I&#39;m going to take 1 example from a cheap server provider OVH and a somewhat worst machine from AWS.</p><p>我将举一个来自廉价服务器提供商OVH的例子和一台来自AWS的有点糟糕的机器的例子。</p><p>    For a close comparison, AWS offers their  4.16xlarge. I&#39;ll try to figure out the exact hardware specs on  this description:</p><p>为了更好地比较，AWS提供了4.16xLarge。我将尝试找出此描述中的确切硬件规格：</p><p> R4 instances feature up to 64 vCPUs and are powered by two AWS-customized Intel XEON processors based on E5-2686v4 that feature high-memory bandwidth and larger L3 caches to boost the performance of in-memory applications.</p><p>R4实例最多配备64个vCPU，并由两个基于E5-2686v4的AWS定制的Intel Xeon处理器提供支持，这两个处理器具有高内存带宽和更大的L3缓存，可提升内存中应用程序的性能。</p><p> So basically let&#39;s call it 2x E5-2686v4, though the &#34;real&#34; E5-2686v4 seems to have more cores (both real and virtual) than the AWS version, I&#39;ll give AWS the benefit of the doubt and say that their version is more or less the same. I&#39;ll also assume AWS&#39;s RAM is the same 2666MHz DDR4 EEC2 (basically the best you can get right now) though they don&#39;t specify this, but I&#39;ll be generous here.</p><p>因此，基本上让我们称其为2xE5-2686v4，尽管真实的E5-2686v4似乎比AWS版本拥有更多的内核(无论是真实的还是虚拟的)，我会姑息AWS的说法，并说他们的版本大同小异。我也会假设AWS的RAM是相同的2666 MHz DDR4 EEC2(基本上是你现在能得到的最好的)，尽管他们没有具体说明这一点，但我在这里会很慷慨。</p><p>    The OVH server has more memory, it comes with 1TB of very fast storage, and adding more storage is much cheaper than AWS EBS prices (+ you get the option for NVME SSDs connected via PCIe on all servers).</p><p>OVH服务器内存更大，配备1 TB非常快的存储，添加更多存储比AWS EBS价格便宜得多(+您可以在所有服务器上选择通过PCIe连接的NVMe固态硬盘)。</p><p> I chose two processors which are  fairly similar but running a comparison is still hard. Unlike e.g. RAM, processors are much more synergistic, you can&#39;t just look at parameters like nr cores, cache size, and frequency to figure out how well they perform.</p><p>我选择了两个相当相似的处理器，但运行比较仍然很困难。与RAM不同，处理器的协作性要强得多，你不能只看nr核、高速缓存大小和频率等参数来计算它们的性能。</p><p> Still, these two seem to be pretty close on those parameters and when looking at  the benchmarks. It seems that the Gold 6132 is marginally better than the E5-2684-v4. Granted, benchmarking server CPUs is hard, but still, I think it&#39;s fair to say that the former has at least a tiny advantage, even if somehow the E5-2684 performs worst of benchmarks than on &#34;real tasks&#34;.</p><p>尽管如此，这两家公司在这些参数上似乎相当接近，在查看基准时也是如此。看来，黄金6132略好于E5-2684-V4。诚然，很难对服务器CPU进行基准测试，但我仍然认为，公平地说，前者至少有一个微小的优势，即使E5-2684在基准测试中的表现比真正的任务表现更差。</p><p>  One has 768GB of RAM the other 488GB (58% of the first one) with the same specs</p><p>一个有768 GB的RAM，另一个有488 GB(第一个的58%)，规格相同。</p><p> One has an extremely to slightly better CPU (let&#39;s say 10% better, a bit bellow the ~17% claimed by the benchmarks)</p><p>一个人的CPU要好得多(比方说好10%，略低于基准所宣称的17%)。</p><p> One has free bandwidth, the other one charges you for every single Kb of communication with the outside world (though at a fairly small sum)</p><p>一个有免费带宽，另一个按与外界通信的每一KB收费(虽然收费相当少)。</p><p> One comes with 1TB of very fast NVME storage, for the other one you have to pay extra</p><p>一台配有1TB非常快的NVMe存储，另一台需要额外付费。</p><p> If the first server, the one that is better in literally every way, costs ~16k/year... how much should the other one cost? Well, maybe 10, maybe 12, maybe 14?</p><p>如果第一台服务器，也就是几乎在各个方面都更好的一台，成本约为16K/年…。另一个要多少钱呢？嗯，也许10个，也许12个，也许14个？</p><p> I don&#39;t know, but the answer certainly shouldn&#39;t be &#34;Almost twice as much at 26k/year&#34;, that&#39;s the kind of answer that indicates something is broken.</p><p>我不知道，但答案肯定不应该是26K/年的近两倍，这才是那种表明有什么东西坏了的答案。“。</p><p> In a worst-case scenario, AWS is ~1.6x times as expensive, but again, that&#39;s paid yearly. If we compare paid monthly to paid hourly (not exactly fair) we get 37k vs 16k, if we do some  napkin math calculations for equivalent storage cost (with equivalent speed via guaranteed iops) we easily get to ~3k/year extra. We have a 40k vs 16k difference, the AWS machine with the worst specs is 250% more expensive.</p><p>在最坏的情况下，AWS的价格大约是它的1.6倍，但同样，这是按年支付的。如果我们将按月付费与按小时付费进行比较(不完全公平)，我们会得到37k与16k，如果我们对同等存储成本(通过保证IOPS实现同等速度)进行一些简单的数学计算，我们很容易就会得到大约3000/年的额外成本。我们有40k和16k的差别，规格最差的AWS机器要贵250%。</p><p> But whether the worst AWS machine is 160% or 250% as expensive as the OVH one is not the relevant question here, the question is why are we seeing those astronomical differences in terms of cost to being with.</p><p>但是，最差的AWS机器是否比OVH机器贵160%或250%并不是这里的相关问题，问题是为什么我们在使用成本方面看到了天文数字的差异。</p><p> We should consider there are hosting providers cheaper than OVH (e.g. scaleway, potentially online.net, and other such providers you never heard of). On the flip side of the coin, there are server providers such as digital oceans, GC, and Azure that can be more expensive than AWS.</p><p>我们应该考虑有比OVH更便宜的主机提供商(例如scaleway，潜在的Online.net，以及其他你从未听说过的提供商)。另一方面，数字海洋、GC和Azure等服务器提供商的价格可能比AWS更高。</p><p>    The story goes that you end up using firebase for authentication, then you hire a sysadmin / DevOps guy that knows GC to create your infrastructure there. Then you make use of some fancy google ML service that integrates seamlessly with the GC storage... so on and so forth, until it would cost you a lot more manpower to move away from GC than to pay them a bit extra for whatever compute or storage you could get for less elsewhere.</p><p>故事是这样的：您最终使用Firebase进行身份验证，然后聘请一个了解GC的sysadmin/DevOps人员在那里创建您的基础设施。然后，您将使用一些奇特的Google ML服务，该服务与GC存储无缝集成……。以此类推，直到离开GC会花费更多的人力，而不是向他们支付一点额外的费用来购买您在其他地方可以用更少的钱获得的任何计算或存储。</p><p>  This is compounded by the fact that most of the time startups are oblivious to the cost of these services.</p><p>大多数情况下，初创公司对这些服务的成本视而不见，这让情况变得更加复杂。</p><p> I switched my personal &#34;infrastructure&#34; from AWS since it ended up costing me over 100$/month to maintain. Most of the costs being bandwith for cerebralab and LBs I needed to painlessly assign subdomains to servers, but the compute itself was also starting to get quite steep. Nowadays I pay 23$/month, but I could probably end up with ~11$/month if I cared to cost cut.</p><p>我把我的个人基础设施从AWS换了下来，因为它最终花费了我每月100多美元的维护费。大部分成本都是用于cerebralab和lbs，我需要毫不费力地将子域分配给服务器，但计算本身也开始变得相当陡峭。现在我每月支付23美元，但如果我愿意削减成本，最终可能会达到11美元/月。</p><p> On the other hand, I can often call the shots regarding hardware at the startups I&#39;ve worked with, yet I usually can&#39;t argue against using AWS or GC... because often enough, the first hit is free. AWS, GC, and Azure are throwing out 10k$ worth of credits like candy, and topping that off with 50-200k$ worth of credit for startups that they think have potential. The catch here is that the credits expire in 1 year, and once that year is done many are probably locked into the vendor.</p><p>另一方面，在与我合作过的初创企业中，我经常可以在硬件方面发号施令，但我通常不能反对使用AWS或GC……。因为很多时候，第一首歌是免费的。AWS、GC和Azure像糖果一样扔掉了价值10K美元的信贷，除此之外，他们还为他们认为有潜力的初创企业提供了价值50-20万美元的信贷。这里的问题是，信用在1年后到期，一旦那一年到期，许多人可能会被锁定在卖家手中。</p><p> The startup model is one of exponential growth, most fail and the winners have dozens or hundreds of millions from investments. So what is one or two hundred thousand a year on an IaaS bill?</p><p>创业模式是一种指数增长的模式，大多数都失败了，获胜者从投资中获得了数千万或数亿美元。那么，一份iaas法案的一年或20万零1年是多少年呢？</p><p> Well, the answer is almost nothing. I believe the standard AWS offering for free credits is something like 100k$/year. So assuming a startup that uses that for a year gets 10mil in investment, it costs them 1% of their budget a year to maintain that.</p><p>嗯，答案几乎是什么都没有。我相信标准的AWS免费积分大概是10万美元/年。因此，假设一家初创公司使用它一年获得1000万美元的投资，他们每年要花费预算的1%来维持这一数字。</p><p> The problem is that investment reflects future potential worth, a startup receiving a 10 mil investment is probably operating at a small fraction of the capacity those investors hope it will reach. For the shares to be worth 5x time that original investment, the company might have to scale its operations 20x or 50x, or 100x.</p><p>问题是，投资反映了未来的潜在价值，一家获得1000万美元投资的初创公司的运营能力可能只有投资者希望达到的水平的一小部分。为了使股票价值是原始投资的5倍，该公司可能不得不将业务规模扩大20倍、50倍或100倍。</p><p> This becomes a problem since you can&#39;t run on investment forever, and scaling up 20x suddenly turns that 100k into 2 million a year spent on servers.</p><p>这就成了一个问题，因为你不能永远依靠投资，而把规模扩大到20倍，突然之间每年花在服务器上的10万就变成了200万。</p><p> Of course, this is just a hypothetical, the numbers here are stand-ins to make a point, not a case-study. From my own experience, that the lock-in funnel looks something like:</p><p>当然，这只是一个假设，这里的数字只是用来表明观点的替身，而不是案例研究。根据我自己的经验，锁定漏斗看起来像是：</p><p> Loads of investment money, let&#39;s not waste time switching away from {expensive infrastructure provider}, it&#39;s &lt; 1% of our yearly budget.</p><p>大量的投资资金，让我们不要浪费时间从{昂贵的基础设施提供商}那里切换，它是我们年度预算的1%。</p><p> Turns out that once the company grew, {expensive infrastructure provider} now consists of a double-digit percentage of our yearly expenditure, but it&#39;s too late to switch now.</p><p>事实证明，一旦公司发展壮大，{昂贵的基础设施提供商}现在占我们年度支出的比例达到两位数，但现在转换已经太晚了。</p><p>  This situation is exacerbated by consolidation (big fish buys little fish). I vividly remember a situation where I found an optimal hardware+software combination for a data processing platform, I think a conservative estimate would be that it was ~5 times cheaper than the vendor lock-in alternative being used at the time.</p><p>这种情况因合并(大鱼买小鱼)而加剧。我清楚地记得有一次我找到了数据处理平台的最佳硬件+软件组合，我想保守的估计是比当时使用的供应商锁定替代方案便宜~5倍。</p><p> This happened to make it worth the switch since the startup lacked a generous credit offer for Google cloud. But, as soon as it was &#34;consolidated&#34;, I was forced to switch the whole system back to Google cloud, granted a much better GC setup, but one that still involved costs ~2-3x times greater than the original solution.</p><p>这恰好是值得的，因为这家初创公司没有为谷歌云提供慷慨的信贷。但是，一旦整合完成，我就被迫将整个系统切换回Google云，虽然GC设置要好得多，但成本仍比原来的解决方案高出约2-3倍。</p><p> Why? Well, boils down to the parent company using Google cloud, all their employees knowing how to work with GC, all their contracts having weird security-related clauses composed by many lawyers based on &#34;official security audits&#34; ran on their GC infrastructure, and so on.</p><p>为什么？嗯，归根结底是母公司使用谷歌云，他们的所有员工都知道如何与GC合作，他们的所有合同都有奇怪的安全相关条款，这些条款是由许多律师根据他们的GC基础设施进行的官方安全审计撰写的，诸如此类。</p><p>   Employees end up deciding most of what a company is using internally, including infrastructure providers.</p><p>员工最终决定公司内部使用的大部分内容，包括基础设施提供商。</p><p> People aggregate  along weird lines, to the extent that it wouldn&#39;t surprise me if a CTO hired initial engineers that favored his preferred infrastructure provider, even if he didn&#39;t actively seek that trait out.</p><p>人们按照奇怪的方式聚集在一起，以至于如果一名首席技术官聘请了偏爱他喜欢的基础设施提供商的初始工程师，即使他没有积极寻找这一特质，我也不会感到惊讶。</p><p> Once the first few employees are fans of a given infrastructure provider, it starts making it into the job specs, because onboarding someone familiar with AWS when you use Azure is a huge pain in the ass. All other things being equal you&#39;d rather have someone familiar with the technology you are already using.</p><p>一旦最初的几名员工成为某个基础设施提供商的粉丝，它就会开始出现在工作规格中，因为当你使用Azure时，让熟悉AWS的人上岗是一件非常痛苦的事情。在其他条件不变的情况下，你宁愿找一个熟悉你已经在使用的技术的人。</p><p> This is compounded by the kind of employees that permeate a given field. If you are developing mobile apps or web apps, for example, it&#39;s likely that many engineers you will find will be familiar with Heroku and Digital Oceans. If you are developing whatever the heck people use C# for, I&#39;d bet you&#39;ll find people that know how to use Azure. If you are doing machine learning, most people will know a thing or two about google cloud&#39;s offers regarding TPUs.</p><p>渗透到特定领域的员工种类更是加剧了这一点。例如，如果你正在开发移动应用或网络应用，很可能你会发现很多工程师都熟悉Heroku和Digital Ocean。如果您正在开发人们使用C#做的任何事情，我敢打赌，您一定会找到知道如何使用Azure的人。如果你在做机器学习，大多数人都会对谷歌云关于TPU的优惠略知一二。</p><p> More broadly, this leaves no room for people that want to have a &#34;multi-cloud&#34; infrastructure or use a very little known platform. Either you get engineers that are very versed in the subject, but that will cost extra. Or you consign to having a few experts on the subject handle everything, with the rest of the team having no idea how to boot up a new VM without calling someone up.</p><p>更广泛地说，这没有给那些想要拥有多云基础设施或使用鲜为人知的平台的人留下任何空间。你要么请非常精通这一主题的工程师，但那会额外收费。或者你委托几个专家来处理所有事情，而团队的其他成员不知道如何在不叫人的情况下启动一个新的虚拟机。</p><p> Of course, some of you might say, &#34;a Linux machine is just a Linux machine, once you ssh into it it&#39;s all the same&#34;, and I agree, and most engineers I speak with also agree. But all those engineers also happen to be very expensive to hire, all things considered. Having recently introduced a &#34;please explain to me what how a  | is used in a bash shell&#34; question in my interviews, I am surprised by how many people with claimed &#34;DevOps&#34; knowledge can&#39;t answer that elementary question given examples and time to think it out (granted, on a ~60 sample size).</p><p>当然，你们中的一些人可能会说，Linux机器只是一台Linux机器，一旦你把它塞进去，它就完全一样了，我同意，与我交谈过的大多数工程师也都同意这一点。但考虑到所有因素，所有这些工程师的雇佣费用也恰好非常昂贵。最近在我的采访中，我介绍了一个问题，请向我解释一下|是如何用在bash shell问题中的。令我惊讶的是，有多少自称掌握DevOps；知识的人不能给出例子和时间来思考这个基本问题(当然，这是在大约60个样本大小的情况下)。</p><p> But even if you assume all capable software developers don&#39;t need provider-specific hand holding to boot up a machine and run commands on it via ssh, things change once you get to orchestration. I can probably make a Kubernetes based infrastructure on GC and AWS, but I might fail at it miserably on Azure. I can create a &#34;serverless&#34; infrastructure on AWS, but not on any other infrastructure provider, at least not without a time commitment twice as long.</p><p>但是，即使您假设所有有能力的软件开发人员都不需要特定于提供商的手来引导机器并通过ssh在机器上运行命令，一旦您开始进行编排，情况也会发生变化。我也许可以在GC和AWS上构建一个基于Kubernetes的基础设施，但是在Azure上我可能会失败得很惨。我可以在AWS上创建无服务器基础设施，但不能在任何其他基础设施提供商上创建，至少在没有两倍时间承诺的情况下是不行的。</p><p>   I can make an apples to apples comparison between OVH and AWS servers, or GC and Scaleway servers, but I can&#39;t make one between GC Vision AI and Sagemaker, or between GC&#39;s ai-platform notebooks and IBM&#39;s Watson, or between the costs of a lambda-based &#34;serverless&#34; solution and using the OVH API to provision VMs on demand.</p><p>我可以比较一下OVH和AWS服务器，或者GC和Scaleway服务器，但我不能比较GC Vision AI和Sagemaker，或者GC的ai-Platform笔记本和IBM的Watson，或者比较基于lambda的无服务器解决方案和使用OVH API按需配置虚拟机的成本。</p><p> The world is moving more towards a &#34;hardware+sofware functionality bundled as a service&#34; model, where you are no longer buying servers with a UNIX OS, you are instead buying some abstract token of storage, memory, and compute time. This not only makes comparisons harder but often forces you into specific choices regarding your code, choices which make the vendor lock-in much stronger.</p><p>世界正在更多地向将硬件+软件功能捆绑为服务的模式发展，在这种模式下，您不再购买装有UNIX操作系统的服务器，而是购买一些存储、内存和计算时间的抽象令牌。这不仅使比较变得困难，而且经常迫使您做出关于代码的特定选择，这些选择会使供应商的锁定更强。</p><p> This double-whammy of being locked in via the way your code runs and unable to have a fair comparison since your code couldn&#39;t run on literally any other platform reminds me of the idea of &#34;mainframes&#34;. When companies would get locked into their physical hardware seller (e.g. IBM or Oracle), since the hardware would only be able to run vendor-specific code, making the company writing more vendor-specific code, leading to a vicious cycle.</p><p>由于您的代码不能在任何其他平台上运行，您的代码被锁定在运行方式中，并且无法进行公平的比较，这一双重打击让我想起了大型机的概念。当公司被锁定在其物理硬件销售商(例如IBM或Oracle)中时，因为硬件将只能运行特定于供应商的代码，使得公司编写更多特定于供应商的代码，从而导致恶性循环。</p><p> That is not to say comparison becomes impossible in these situations, but it becomes much harder, it requires a re-write of the codebase, and it comes with compromises. Maybe AWS compute is cheaper but their NLP services are a bit worst, and then you have to quantify the cost of using a cross-platform solution or losing a slight edge in terms of an NLP component.</p><p>这并不是说比较在这些情况下变得不可能，但它变得困难得多，它需要重写代码库，而且它伴随着妥协。也许AWS计算更便宜，但他们的NLP服务有点糟糕，然后您必须量化使用跨平台解决方案的成本或在NLP组件方面失去略微优势的成本。</p><p>  I also believe lock-in happens because of disinformation campaigns. A good example is &#34;serverless infrastructures&#34;. The claim  AWS makes (citing them since they are the first to introduce the concept) is:</p><p>我也相信锁定是因为虚假信息运动。无服务器基础设施就是一个很好的例子。AWS提出的主张(引用他们，因为他们是第一个引入这一概念的人)是：</p><p> Modern applications are built serverless-first, a strategy that prioritizes the adoption of serverless services, so you can increase agility throughout your application stack. We’ve developed services services for all three layers of your stack: compute, integration, and data stores</p><p>现代应用程序是无服务器优先构建的，这是一种优先采用无服务器服务的策略，因此您可以提高整个应用程序堆栈的敏捷性。我们已经为您堆栈的所有三个层开发了服务服务：计算、集成和数据存储。</p><p>  Modern applications are not built to run on an operating system, instead they are built to run on 3 AWS-specific abstraction layers, compute, integration, and data store. This means you&#39;d have to redesign your entire codebase to use any other hardware provider.</p><p>现代应用程序不是为在操作系统上运行而构建的，而是为在3个特定于AWS的抽象层、计算、集成和数据存储上运行而构建的。这意味着您必须重新设计整个代码库以使用任何其他硬件提供商。</p><p> Serverless is a misnomer used to induce the idea that you are no longer dependent on hardware, when instead you are abandoning the ability to run on 99.9% of the world&#39;s hardware, in favor of only being able to run on AWS.</p><p>无服务器是一个用词不当的词，用来诱导你不再依赖硬件的想法，而你却放弃了在世界上99.9%的硬件上运行的能力，转而只能在AWS上运行。</p><p>  combines the performance and availability of traditional enterprise databases with the simplicity and cost-effectiveness of open source databases.</p><p>将传统企业数据库的性能和可用性与开源数据库的简单性和成本效益结合起来。</p><p>  combines the ability of traditional enterprise databases to keep increasing prices due to vendor lock-in, but steals code from open source projects in order to provide a similar interface that gives you the allure of thinking you can migrate your data and queries from it as easily as you could from Postgres or MySQL.</p><p>结合了传统企业数据库由于供应商锁定而不断提高价格的能力，但从开源项目中窃取代码，以便提供类似的界面，让您觉得可以像从Postgres或MySQL迁移数据和查询一样轻松地从中迁移数据和查询。</p><p> At the same time, GC, AWS, and Azure try to drive away language from any comparable metrics that one might use to quantify their machines.</p><p>与此同时，GC、AWS和Azure试图将语言从任何可以用来量化其机器的可比指标中赶走。</p><p> What&#39;s your memory? A number of GBs. Wanna know the interface (i.e. ddr4, ddr3... etc)? The latency? The frequency? If it&#39;s EEC? Though luck.</p><p>你的记忆是什么？若干GB。想知道接口(即DDR4、DDR3...。等等)？延迟时间呢？频率是多少？如果它是欧洲经济共同体的话？虽然运气不错。</p><p> What&#39;s your CPU capacity? A number of &#34;virtual cores&#34;. Wanna know the L1/L2/L3 size? If it&#39;s shared? The behavior of the hypervisor being used? If you can change the scheduler? The frequency? The instruction set? Though luck.</p><p>您的CPU容量是多少？一些&#34；虚拟核心&#34；。想知道L1/L2/L3的尺寸吗？如果它是共享的呢？正在使用的虚拟机管理程序的行为？如果你能改变日程安排的话？频率是多少？指令集呢？虽然运气不错。</p><p> What&#39;s your storage? An SSD with a number of GBs. What SATA generation does it uses? Is it NVME? Are the IO/s numbers a function of cached reads or cold reads? Though luck, better run the benchmarks.</p><p>你们的仓库是什么？具有多个GB的固态硬盘。它使用的是哪一代SATA？是NVMe吗？IO/s数字是缓存读取还是冷读的函数？虽然运气不错，但最好还是运行基准测试。</p><p> And on providers like AWS, in my own experience, the numbers are never the same. I noticed over 2x differences in read and write speeds for EBSes with the same specs, attached to machines with the same specs, using basic hdpram and dd based benchmarks.</p><p>在像AWS这样的提供商上，根据我自己的经验，数字从来都不是一样的。我注意到，使用基本的hdpram和基于dd的基准测试，在连接到具有相同规格的机器上，具有相同规格的EBES的读写速度有2倍以上的差异。</p><p> The variable performance is not just something I observed either, Netflix has a whole  instance selection process for AWS in order to grab better EC2 VMs.</p><p>可变性能也不仅仅是我观察到的，Netflix为AWS提供了一个完整的实例选择流程，以获取更好的EC2虚拟机。</p><p> I&#39;m not saying hardware specs are unavailable, if you dig deep enough and ask support you can get everything you need. You can find out most things by just looking at the actual machine once you purchase it. But they are hidden, they aren&#39;t plastered on the walls as a selling point, they are a dirty little secret that most popular infrastructure providers would rather that you ignore.</p><p>我并不是说硬件规格不可用，如果您深入挖掘并寻求支持，您可以获得所需的一切。一旦你购买了机器，只需看一眼实际的机器，你就能找到大多数东西。但它们是隐藏的，它们不是贴在墙上作为卖点，它们是一个肮脏的小秘密，大多数受欢迎的基础设施提供商宁愿你忽视它。</p><p> Even better, most of them would rather that you don&#39;t even use that language anymore. Hence why &#34;core&#34; and &#34;CPU&#34; has been replaced by &#34;vCPU&#34; or even something more abstract like &#34;compute unit&#34;.</p><p>更好的是，他们中的大多数人都希望你甚至不再使用这种语言。因此，为什么&34；核心和&#34；CPU&34；已被&#34；vCPU&34；甚至更抽象的计算单元&34；所取代。</p><p>  The final reason I would cite here is the fact that popularity can obviously lead to costs increasing. For all the above reasons, popularity ends up being a big factor.</p><p>我要在这里引用的最后一个原因是，受欢迎显然会导致成本增加。基于上述原因，受欢迎程度最终成为一个重要因素。</p><p> The more popular you are, the more companies are locked into your ecosystem, the more they will draw their subsidiaries and contractors into it.</p><p>你越受欢迎，越多的公司被锁定在你的生态系统中，他们就会越多地吸引他们的子公司和承包商进入其中。</p><p> The more popular you are, the more developers know how to use your system, the stronger the employee lock-in effect becomes.</p><p>你越受欢迎，开发人员越知道如何使用你的系统，员工锁定效应就越强。</p><p> The more those two things are true, the more you can abstract away basic infrastructure as &#34;services&#34; to deny easy comparisons of price and make migrating code away harder.</p><p>这两件事越是正确，你就越能把基本的基础设施抽象为服务，以避免容易的价格比较，并使迁移代码变得更加困难。</p><p> The more those three things are true, the more you can &#34;educate&#34; people away from the very language that would allow them to compare your service against others on unfavorable grounds. To pull the very ideas needed for comparison out of the vocabulary people use when comparing infrastructure providers. To steal concepts that could be used against your services and rephrase them to make them seem like one of the advantages your services bring.</p><p>这三件事越属实，你就越能教育人们远离那些会让他们以不利的理由将你的服务与他人进行比较的语言。将比较所需的想法从人们比较基础设施提供商时使用的词汇表中提取出来。窃取可能被用来反对您的服务的概念，并对它们进行重新表述，使其看起来像是您的服务带来的优势之一。</p><p>  Given the economy of scale that applies on top of all that, I&#39;d expect more of a monopoly in the infrastructure provisioning space. Which is to say that I am pleasantly surprised by the current state of it all.</p><p>考虑到最重要的是规模经济，我预计基础设施供应领域将出现更多垄断。也就是说，我对这一切的现状感到惊喜。</p><p> Finding relevant numbers on this is difficult, but based on  various metrics it seems that the war has hardly been won by anyone.</p><p>在这方面很难找到相关的数字，但根据各种衡量标准，这场战争似乎很难由任何人赢得。</p><p> Even in the most monopoly-prone field of &#34;infrastructure as a service&#34;, AWS dominates a bit under 50% of the market, with no-name companies ( &lt; 1.8% market share) taking 23.2% of the pie.</p><p>即使在最容易垄断的基础设施即服务领域，AWS的市场占有率也略低于50%，无名公司(市场份额为1.8%)占据了23.2%的市场份额。</p><p> I can think of plenty of small companies making a big impact into markets I&#39;d have imagined forever lost to monopoly. An interesting example here being the recent domination of the CDN space by Fastly.</p><p>我能想到许多小公司对我想象中永远输给垄断的市场产生了重大影响。这里有一个有趣的例子，那就是最近Fastly主宰了CDN领域。</p><p> Even more so, while I usually harp on about solutions like Kubernetes being a step in the wrong direction. I must admit that I&#39;ve started seeing it used more and more as a solution for infrastructure agnostic deployments.</p><p>更重要的是，虽然我经常喋喋不休地说像Kubernetes这样的解决方案是朝着错误的方向迈出的一步。我必须承认，我已经开始看到它越来越多地被用作基础设施不可知部署的解决方案。</p><p> Add to that orchestration tools like Terraform and software such as  serverless, designed to abstract away over &#34;serverless&#34; services provided by various IaaS providers.</p><p>此外，还有Terraform等编排工具和Serverless等软件，旨在抽象各种IaaS提供商提供的服务。</p><p> On the one hand, billions are probably getting wasted on overpriced infrastructure, on the other hand, it seems like a software environment meant to make cost-cutting on infrastructure is alive and kicking, growing bigger every day.</p><p>一方面，数十亿美元可能被浪费在价格过高的基础设施上，另一方面，似乎是一个旨在使基础设施成本削减活跃起来的软件环境，每天都在变得更大。</p><p> In part, I have to think this can be attributed to the constant desire of programmers to experiment with new stuff, to write new abstractions, to try to out-do each other.</p><p>在某种程度上，我不得不认为这可以归因于程序员不断地想要尝试新的东西，编写新的抽象，试图超越其他人。</p><p>  We&#39;re already past the point where it&#39;s impossible to say that an IaaS provider is more efficient than the other.</p><p>我们已经过了不可能说IaaS提供商比其他提供商更有效率的地步。</p><p> The cleanest example is comparing servers with similar OSes and CPUs with similar instruction sets, like my original example. But what about storage? What about CDNs? What about GPUs? What about FPGAs? What about services that bundle a bunch of those together seamlessly?</p><p>最干净的示例是比较具有类似操作系统的服务器和具有类似指令集的CPU，就像我最初的示例一样。但是仓库呢？那CDNS呢？GPU呢？那FPGA呢？将这些服务无缝捆绑在一起的服务怎么办？</p><p> It becomes really complicated. In my own experience, I was often flabbergasted by the difference between benchmarks with my own workload when compared to the claims of some hardware providers. A vivid example that comes to mind was comparing AWS&#39;s own Aurora database versus an RDS Postgres cluster of the same price... and finding out Aurora was ~30% slower. In a comparison where I was sure that, since AWS was holding all the cards, their custom database solution would win.</p><p>它变得非常复杂。根据我自己的经验，与一些硬件提供商的声明相比，基准测试与我自己的工作负载之间的差异经常让我大吃一惊。我脑海中浮现出一个生动的例子，那就是将AWS自己的Aurora数据库与相同价格的RDS Postgres集群进行比较……。发现奥罗拉的速度慢了约30%。在比较中，我确信，由于AWS掌握着所有的牌，他们的定制数据库解决方案将获胜。</p><p> The problem with benchmarks, however, is that they are very workload-specific. I can go to almost any company and claim with a straight face that they are probably using an over infrastructure provider, and moving their compute and/or storage heavy workloads to another would save costs. However, I can&#39;t always make that same claim if my hourly rate for designing the benchmarks is included in that cost-benefit analysis.</p><p>然而，基准测试的问题在于它们非常特定于工作负载。我几乎可以去找任何一家公司，毫不掩饰地宣称，他们可能正在使用过度基础架构提供商，而将其计算和/或存储繁重的工作负载转移到另一家公司将节省成本。然而，如果我设计基准的时薪包括在成本效益分析中，我就不能总是提出同样的主张。</p><p> That is, in large part, why I am somewhat against &#34;infrastructure as a service&#34;, past some level of abstraction benchmarking becomes unfeasible, it involves redesigning the whole codebase. Once that happens we reach javascript land, where objective measures are replaced by marketing and hype.</p><p>这就是为什么我在很大程度上反对基础设施即服务，超过一定程度的抽象基准是不可行的，它涉及到重新设计整个代码库。一旦发生这种情况，我们就会到达javascript领域，在那里，客观的衡量标准被营销和炒作所取代。</p><p>  I think that I can paint a pretty bleak picture in terms of money being wasted on overpriced infrastructure.</p><p>我认为我可以描绘出一幅相当黯淡的图景，因为资金被浪费在了价格过高的基础设施上。</p><p> One where new companies get lured away into the nets of inefficient hardware providers by unreasonably high offers of free credits. This then leads to them recruiting people familiar with those hardware providers. Potentially getting further locked-in with more free credits and seminars on vario</p><p>在这种情况下，新公司被不合理的高额免费信用引诱进入效率低下的硬件提供商的网络。这就导致他们招募熟悉这些硬件供应商的人。可能会进一步锁定更多关于Vario的免费学分和研讨会。</p><p>......</p><p>.</p></div><div id="story_share_this"><div class="sharethis-inline-share-buttons"></div></div><div class="text-break sotry_link page_narrow"><a target="_blank" href="https://cerebralab.com/Is_a_billion-dollar_worth_of_server_lying_on_the_ground">https://cerebralab.com/Is_a_billion-dollar_worth_of_server_lying_on_the_ground</a></div><div class="story_tags page_narrow"><button type="button" class="btn btn-light my_tag"><a href="/tag/价值/">#价值</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/dollar/">#dollar</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/aws/">#aws</a></button></div></div><div class="my_movie_list_item shadow p-3 mb-5 bg-white rounded"><button type="button" class="btn btn-link my_tag"><a href="/tag/web2.0/">#web2.0</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/google/">#google</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/设计/">#设计</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/游戏/">#游戏</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/创意/">#创意</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/apple/">#apple</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/苹果/">#苹果</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/摄影/">#摄影</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/软件/">#软件</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/美国/">#美国</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/iphone/">#iphone</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/图片/">#图片</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/手机/">#手机</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/视频/">#视频</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/广告/">#广告</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/免费/">#免费</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/谷歌/">#谷歌</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/网站/">#网站</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/windows/">#windows</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/微软/">#微软</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/下载/">#下载</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/firefox/">#firefox</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/音乐/">#音乐</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/linux/">#linux</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/blog/">#blog</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/博客/">#博客</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/程序/">#程序</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/艺术/">#艺术</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/web/">#web</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/wordpress/">#wordpress</a></button></div></div></div><div id="my_footer"><div class=""><a href="/tags/">tags</a> <a href="/users/">users</a></div>&copy; 2020 diglog.com </div></div></body></html>