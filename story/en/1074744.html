<!doctype html><html lang="zh-hans"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Linux系统操作手册Linux Sysops Handbook</title><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"><link rel="stylesheet" href="/img/css.css?random="><link data-rh="true" rel="icon" href="/img/favicon.ico"/><script data-ad-client="ca-pub-6067137220025946" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script type="text/javascript" src="https://platform-api.sharethis.com/js/sharethis.js#property=5effb96910009800120b8d4d&product=inline-share-buttons" async="async"></script>
<script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?03c1a0f31299b4a2fbb83c34d6beaac9";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script></head><body><div id="my_header"><div class="container"><nav class="navbar navbar-expand-lg"><a class="navbar-brand" href="/"><img alt="diglog" src="/img/logo.v1.gif" class="rounded-sm"></a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarNavAltMarkup"><div class="navbar-nav"></div></div></nav></div></div><div class="container"><div id="my_content"><h1 class="page_narrow">Linux Sysops Handbook<br/>Linux系统操作手册</h1><div class="row"><div class="col-lg-12 col-12"><div class="my_story_list_item shadow p-3 mb-5 bg-white rounded"><div class="story_page_pub_time page_narrow">2022-02-24 21:12:19</div><div class="page_narrow text-break page_content"><p>A study notes book for the common knowledge and tasks of a Linux system admin.</p><p>一本关于Linux系统管理员的常识和任务的学习笔记书。</p><p>     List the current active process with their statuses, numbers, resource usage, etc. using the command  ps .</p><p>使用ps命令列出当前活动进程及其状态、编号、资源使用情况等。</p><p>  Quoting man&#39;s page documentaiton on  ps : &#34;A different set of processes can be selected for display by using any combination of the  -a, -G, -g, -p, -T, -t, -U, and -u  options. If more than one of these options are given, then ps will select all processes which are matched by at least one of the given options&#34;.</p><p>引用人&#39；ps上的s页文档：&#34；通过使用-A、-G、-G、-p、-T、-T、-U和-U选项的任意组合，可以选择一组不同的进程进行显示。如果给出了多个选项，则ps将选择至少一个给定选项匹配的所有流程&#34；。</p><p> The daemon  systemd  process starts during boot time, and remains active until the shutdown. It&#39;s the parent process for all other process in the system.</p><p>守护程序systemd进程在引导期间启动，并在关机之前保持活动状态。它&#39；它是系统中所有其他进程的父进程。</p><p> Each process contains several main parts, such as: PID, state, virtual space address (memory), threads, network and file descriptors, scheduler information, and links. Processes are controlled and respond to signals. The states that a process can transistion among are depicted below:</p><p>每个进程都包含几个主要部分，例如：PID、状态、虚拟空间地址（内存）、线程、网络和文件描述符、调度程序信息和链接。过程受到控制并响应信号。以下描述了一个过程可以在其中传输的状态：</p><p>  To observe the states and other information of the processes interatively, use the  top  command.</p><p>要交互观察进程的状态和其他信息，请使用top命令。</p><p>        Each user in the system is associated with unique user id  uid , and each group is associated with  gid .</p><p>系统中的每个用户都与唯一的用户id uid关联，每个组都与gid关联。</p><p>      To restrict service user accounts (e.g. accounts for web servers), the shell can be set to  nologin :</p><p>要限制服务用户帐户（例如web服务器的帐户），可以将shell设置为nologin：</p><p>  To change a user password, use the command  passwd  interactively. Additionally  change  command sets the password policy in the system.</p><p>要更改用户密码，请交互使用passwd命令。另外，change命令设置系统中的密码策略。</p><p> Use the command  su - &lt;username&gt;  to switch to the specified user. which will promote for her password. Running the command without username will switch to the root user. To avoid cases where password is not available, use  sudo  to switch accounts using current user password only and according to rules in  /etc/sudoers  directory. Use  sudo -i  to gain an interactive root shell.</p><p>使用命令su-&lt；用户名&gt；切换到指定的用户。这将提升她的密码。在没有用户名的情况下运行该命令将切换到root用户。为了避免密码不可用的情况，请使用sudo仅使用当前用户密码并根据/etc/sudoers目录中的规则切换帐户。使用sudo-i获得一个交互式根shell。</p><p>    To bring back a job in the foreground in the current session, and send it back use the following:</p><p>要在当前会话中在前台带回作业并将其发回，请使用以下命令：</p><p>  Use the command  kill -l  to see the available signals to send to processes, like interrupt, terminate, resume, etc.</p><p>使用kill-l命令查看发送给进程的可用信号，如中断、终止、恢复等。</p><p>  Use  killall  to operate on multiple processes using their executable name. Use  pkill  for filtering with more options.</p><p>使用killall可以使用可执行文件名对多个进程进行操作。使用pkill进行过滤，提供更多选项。</p><p>   Getting used to     bash language and its fundamentals   like conditions, looping, functions, etc. is recommended.</p><p>建议您习惯bash语言及其基础知识，如条件、循环、函数等。</p><p> The popular files and text processing and manipulation utilites are important to master, such as:</p><p>流行的文件、文本处理和操作实用程序对掌握非常重要，例如：</p><p>  Use the command  date  to print the current date and time or others in the past and future:</p><p>使用“日期”命令打印当前日期和时间或过去和将来的其他日期和时间：</p><p>  The  ssh  command used to connect to servers in secure manner using OpenSSH library using public key cryptography. The configuration and known hosts are kept under  /etc/ssh  system-wide or in  ~/.ssh/  in current user&#39;s home directory. On the other hand  scp  is used for secure copy on secure shell fashion.</p><p>ssh命令用于使用OpenSSH库（使用公钥加密）以安全的方式连接到服务器。配置和已知主机保存在/etc/ssh系统范围内或~/中。ssh/in当前用户&#39；这是主目录。另一方面，scp用于安全外壳上的安全复制。</p><p> The following list of commands are used to generate and manage ssh keys between client and server:</p><p>以下命令列表用于生成和管理客户端和服务器之间的ssh密钥：</p><p>   A file permissions are considered in three dimensions: the owner user, the owner&#39;s group, and rest of other users.</p><p>文件权限分为三个维度：所有者用户、所有者和#39；s组和其他用户。</p><p> Showing the permisison of files and directories can be using  ls -l ,  ls -ld  respectively.</p><p>显示文件和目录的权限可以分别使用ls-l和ls-ld。</p><p> The basic permission types are: read (r), write (w), and execute (x) on both folders and files:</p><p>基本权限类型包括：对文件夹和文件的读取（r）、写入（w）和执行（x）：</p><p>  Setting the files and folders permission is done by  chmod  command and can be using symbols or digits.</p><p>通过chmod命令设置文件和文件夹权限，可以使用符号或数字。</p><p> The symbols/letter way is made for  u ,  g ,  o , or  a  basis for the user, group, others, or all. Whereas, the digits are written for all at once in sequence for user, group, and others. Examples are below for both cases:</p><p>符号/字母方式用于u、g、o，或作为用户、组、其他人或所有人的基础。然而，这些数字是按照用户、组和其他人的顺序一次性写入的。以下是两种情况的示例：</p><p>  chown  is used to change the ownership of folder/files to users or groups respectively.  chgrp  is a shortcut to group change only. The root or the owner are only people can change ownership and in the latter, she needs to be part of the new target group before the change.</p><p>chown用于分别将文件夹/文件的所有权更改为用户或组。chgrp是一种仅用于组更改的快捷方式。根或所有者是唯一可以改变所有权的人，在后者中，她需要在改变之前成为新目标群体的一部分。</p><p>  Lastly, a fourth dimension at the start can be added to represent the special permissions of  suid s ,  sgid s , and  sticky t  which control executable nature of files to be of owner users, and groups regardless of the current user. The last is to restrict deletion for only the root and owner always.</p><p>最后，可以在开始处添加第四个维度，以表示suid s、sgid s和sticky t的特殊权限，这些权限控制文件的可执行性质，这些文件将属于所有者用户，并且组与当前用户无关。最后一个是始终限制仅对根用户和所有者的删除。</p><p>  Finally, use  pstree  and  pgrep  to view process parent/child tree and search for processes by pattern.</p><p>最后，使用pstree和pgrep查看流程父/子树，并按模式搜索流程。</p><p>   systemctl  is the command used to list, manage, and check background processes or so called  daemons .</p><p>systemctl是用于列出、管理和检查后台进程或所谓的守护进程的命令。</p><p>   There are 3 types of daemons: 1. services, 2. sockets, 3. paths. Use the following to see the system&#39;s processes in each:</p><p>有3种类型的守护程序：1。服务，2。插座，3。路径。使用以下命令查看系统&#39；在每个过程中：</p><p>  The states  enabled  and  disabled  indicate wether a service is lanuched on startup or not. The subcommands  enable  and  disable  can be used to control this aspect.</p><p>启用和禁用状态表示服务在启动时是否被激活。子命令enable和disable可用于控制此方面。</p><p> To view the status of a daemon use the  status  command or its state shortcuts:</p><p>要查看守护程序的状态，请使用status命令或其状态快捷方式：</p><p>     Finally, to resolve conflicting services making them unavailable, the  mask  and  unmask  commands can be used to point a deamons config to  dev/null  then back to normal respectively.</p><p>最后，为了解决使服务不可用的冲突服务，可以使用mask和unmask命令将deamons配置指向dev/null，然后分别返回正常。</p><p>  In 1991, Linux kernel was introduced by Linus Torvalds, and combined with GNU project, which was previously created in 1983-1984 as open source OS programs and components. This formed what we call today Linux distribution, a Unix-like operating system.</p><p>1991年，Linux内核由Linus Torvalds引入，并与GNU项目相结合，GNU项目之前是在1983-1984年作为开源操作系统程序和组件创建的。这形成了我们今天所说的Linux发行版，一种类似Unix的操作系统。</p><p> Today the Linux operating system is supported on most hardware platforms.     Linux works on almost every architecture from i386 to SPARC  . Linux can be found on almost every type of device today, from watches, televisions, mobile phones, servers, desktops, and even vending machines.</p><p>如今，大多数硬件平台都支持Linux操作系统。从i386到SPARC，Linux几乎适用于所有体系结构。如今，从手表、电视、手机、服务器、台式机，甚至自动售货机，几乎所有类型的设备上都可以找到Linux。</p><p> One of the major distinction between Linux distributions is the package management part and how software is installed and managed. There are multiple package formats, and the most common ones are Debian (deb), RedHat Package Manager (RPM).</p><p>Linux发行版之间的主要区别之一是包管理部分以及软件的安装和管理方式。有多种软件包格式，最常见的是Debian（deb）、RedHat软件包管理器（RPM）。</p><p>        You can monitor the system&#39;s resources usage, uptime, and sessions&#39; load leverages over time as follows:</p><p>你可以监控系统&#39；s资源使用、正常运行时间和会话#39；随着时间的推移，负载杠杆如下所示：</p><p>   The logs of the system events and processes traces are usually kept in  /var/log  directory. There are two categories of persistent logs ( rsyslogs ) and temporary logs ( journald ) that are wiped across boots. Logs include syslog protocol messages, events, security incidents, mailing logs, jobs logs, and other program logs.</p><p>系统事件和进程跟踪的日志通常保存在/var/log目录中。有两种类型的持久日志（rsyslogs）和临时日志（journald），它们会在boots中擦除。日志包括系统日志协议消息、事件、安全事件、邮件日志、作业日志和其他程序日志。</p><p> As explored in section (3), use  cat ,  head ,  tail  commands to interactively see or follow the logs.</p><p>如第（3）节所述，使用cat、head、tail命令以交互方式查看或跟踪日志。</p><p>    On the other hand, use  journalctl  to view and follow the system&#39;s  journald  log entries, which resides in  run/log/journal .</p><p>另一方面，使用journalctl查看和跟踪系统&#39；s日志日志条目，它位于run/log/journal中。</p><p>   For effective work on the system network configurations and troubleshooting, it is essential to review network/internet protocols (TCP/UDP) and IPv4/IPv6 concepts     (Ref.1)  ,     (Ref.2)  .</p><p>为了有效地进行系统网络配置和故障排除，有必要回顾网络/互联网协议（TCP/UDP）和IPv4/IPv6概念（参考1）、（参考2）。</p><p>    The host connection is either managed dynamically ( DHCP ) configured in  /etc/resolv.conf  or manually in  /etc/hosts  file.</p><p>主机连接在/etc/resolv中配置为动态管理（DHCP）。conf或手动输入/etc/hosts文件。</p><p>       NetworkManager  is the kernel feature     to manage netowrk configurations in Linux  .  nmcli  is the terminal utility.</p><p>NetworkManager是Linux中管理Network配置的核心功能。nmcli是终端实用程序。</p><p>   Managing the system packages varies depending on linux distributions, but the essential parts are the same (installation, repositories, package managers, etc.). For Debian based distribtuions,  apt  is the package manager, whereas for Fedora / RHEL,  yum  is used.</p><p>系统包的管理因linux发行版而异，但基本部分是相同的（安装、存储库、包管理器等）。对于基于Debian的发行版，apt是包管理器，而对于Fedora/RHEL，则使用yum。</p><p>               And finally, the package source repos can be set up and updated through the following:</p><p>最后，可以通过以下方式设置和更新包源回购协议：</p><p>   Linux is formed for a unified file-system consists of all file systems provided by the hardware or virtual storage devices attached to the system. Essentially, everything in linux is a file. It can be viewed as a reversed tree of nested directories starting from the root directory  / .</p><p>Linux是为一个统一的文件系统而形成的，它由连接到系统的硬件或虚拟存储设备提供的所有文件系统组成。本质上，linux中的所有内容都是一个文件。可以将其视为从根目录/开始的嵌套目录的反向树。</p><p>  Block devices are the mechanism that the kernel detects and identify raw storage devices (HDD, SSD, USBs, ..).     As the name indicates, the kernel interfaces and references them by fixed-size blocks (chunks of spaces)  . The block devices are stored in  /dev  directory by the OS, and has letters naming convention such as  /dev/sda ,  /dev/sdb ,  /dev/vda , and appended numbers in case of partitions  /dev/sda3 . The attachment of the block device into the system is done through mounting it to a directory in the system.</p><p>块设备是内核检测和识别原始存储设备（HDD、SSD、USB等）的机制。正如名称所示，内核通过固定大小的块（空间块）进行接口和引用。操作系统将块设备存储在/dev目录中，并具有字母命名约定，如/dev/sda、/dev/sdb、/dev/vda，以及分区/dev/sda3的附加数字。将块设备安装到系统中是通过将其安装到系统中的目录来完成的。</p><p>   Breaking the disk into reusable smaller units, each treated as own disk. The main partitioning methods are MBR (Master Boot Record) and GPT (GUID Partition Table).</p><p>将磁盘拆分为可重复使用的较小单元，每个单元都被视为自己的磁盘。主要的分区方法是MBR（主引导记录）和GPT（GUID分区表）。</p><p>  Prepeating the device as a file-system to be read and write to. Many file-system formats exists like:</p><p>将设备准备为要读取和写入的文件系统。存在许多文件系统格式，如：</p><p>  Additionall, LVM and RAID are another two concepts where the first operate on the opposite of partitioning and group multiple disks as one logical volume. The latter (Redundant Array of Independent Disks) is used to architect more advanced storage setup to ensure higher availablity, redundency, RD, etc.</p><p>此外，LVM和RAID是另外两个概念，其中第一个概念与分区相反，并将多个磁盘分组为一个逻辑卷。后者（独立磁盘冗余阵列）用于构建更高级的存储设置，以确保更高的可用性、冗余性、RD等。</p><p> To see the currently attached file system with mounts and a directory space usage, run  df / du  commands:</p><p>要查看当前连接的文件系统的挂载和目录空间使用情况，请运行df/du命令：</p><p>   The permanent mounting process rely on  /etc/fstab  file to determine devices to mount on the boot time.</p><p>永久安装过程依赖于/etc/fstab文件来确定要在启动时安装的设备。</p><p>   Use the  man  command to lookup the manual information on commands or topics in the system.</p><p>使用man命令查找有关系统中命令或主题的手册信息。</p><p>  Both provide shortcuts, navigation, and searching capablities (e.g.  man -K &lt;keyword  to search across manual).</p><p>两者都提供快捷方式、导航和搜索功能（例如，在手册中搜索man-K&lt；关键字）。</p></div><div id="story_share_this"><div class="sharethis-inline-share-buttons"></div></div><div class="story_tags page_narrow"><button type="button" class="btn btn-light my_tag"><a href="/tag/linux/">#linux</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/系统/">#系统</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/sysops/">#sysops</a></button></div></div><div class="my_movie_list_item shadow p-3 mb-5 bg-white rounded"><button type="button" class="btn btn-link my_tag"><a href="/tag/web2.0/">#web2.0</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/google/">#google</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/设计/">#设计</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/创意/">#创意</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/摄影/">#摄影</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/图片/">#图片</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/游戏/">#游戏</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/软件/">#软件</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/广告/">#广告</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/视频/">#视频</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/手机/">#手机</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/iphone/">#iphone</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/网站/">#网站</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/免费/">#免费</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/windows/">#windows</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/下载/">#下载</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/微软/">#微软</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/苹果/">#苹果</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/firefox/">#firefox</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/blog/">#blog</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/音乐/">#音乐</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/博客/">#博客</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/apple/">#apple</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/wordpress/">#wordpress</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/恶搞/">#恶搞</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/qq/">#qq</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/谷歌/">#谷歌</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/艺术/">#艺术</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/web/">#web</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/工具/">#工具</a></button></div></div></div><div id="my_footer"><div class=""><a href="/tags/">tags</a> <a href="/users/">users</a></div>&copy;2012-2021 diglog.com </div></div></body></html>