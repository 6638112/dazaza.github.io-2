<!doctype html><html lang="zh-hans"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>给我的微波炉拉皮条</title><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"><link rel="stylesheet" href="/img/css.css?random="><link data-rh="true" rel="icon" href="/img/favicon.ico"/><script data-ad-client="ca-pub-6067137220025946" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script type="text/javascript" src="https://platform-api.sharethis.com/js/sharethis.js#property=5effb96910009800120b8d4d&product=inline-share-buttons" async="async"></script>
<script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?03c1a0f31299b4a2fbb83c34d6beaac9";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script></head><body><div id="my_header"><div class="container"><nav class="navbar navbar-expand-lg"><a class="navbar-brand" href="/"><img alt="diglog" src="/img/logo.v1.gif" class="rounded-sm"></a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarNavAltMarkup"><div class="navbar-nav"></div></div></nav></div></div><div class="container"><div id="my_content"><h1 class="page_narrow">给我的微波炉拉皮条</h1><div class="row"><div class="col-lg-12 col-12"><div class="my_story_list_item shadow p-3 mb-5 bg-white rounded"><div class="story_page_pub_time page_narrow">2020-11-15 01:53:42</div><div class="story_img_container"><a href="http://img2.diglog.com/img/2020/11/a12e257df6b1bff9cca754af4221b61d.jpeg"><img src="http://img2.diglog.com/img/2020/11/a12e257df6b1bff9cca754af4221b61d.jpeg" class="img-fluid my_story_img" onerror="this.style.display='none'"></a></div><div class="page_narrow text-break page_content"><p>机械键盘最近很流行！人们喜欢这种令人满意的触感，有些人不遗余力地根据自己的喜好进行定制。</p><p>这就回避了一个问题：如果人们那么喜欢它，为什么只停留在电脑键盘上呢？</p><p>如果你仔细想想，就会发现有很多日常输入设备迫切需要改进！</p><p>以下是我如何添加一个RGB OLED热插拔机械键盘，从而创造出全世界最漂亮的微波炉的故事！</p><p>一年前，我在一次汽车行李箱拍卖会上买了一台用于GB5的二手微波炉。这是一位名为Proline Micro Chef ST44&34；的厨师：</p><p>它似乎来自21世纪初，在各个方面都相当不起眼。但它很便宜，而且很管用，对我来说已经足够好了！</p><p>也就是说，直到几乎恰好一年后。我按下常见的按钮来加热我的饭菜，但什么也没有发生。</p><p>在最初的怀疑之后，我通过随机戳按键进行了彻底的调查，发现薄膜键盘很可能坏了。起初，有几个按钮仍然有效，但很快所有的按钮都停止了响应。</p><p>在这一点上，我本可以扔掉它，但我的钱仍然物有所值。但仅仅因为一个廉价的塑料键盘失灵，这看起来就像是一种浪费。另外，如果我修好它，而不是买一个新的，我可以省下几英镑。</p><p>这块板的标记很好，有趣的是，它使用了真空荧光显示屏(VFD)，在制作这块板的时候，真空荧光显示屏已经失宠了。</p><p>我还注意到这块板，实际上里面的所有东西都是由大宇设计的，大宇是一家韩国企业集团，生产从汽车到这个的各种产品。</p><p>不管怎样，回到手头的问题上来。我想我可以把带状电缆的触点清理干净，到此为止。只是我没有注意到触头是由碳(石墨？)制成的。而不是普通的金属，我马上擦掉了一些：</p><p>不过，这并不是世界末日。键盘几乎肯定会使用矩阵扫描来与控制器连接。</p><p>在SparkFun上有关于这个话题的详细介绍。但简而言之，矩阵扫描允许我们从有限数量的控制器引脚读取大量输入。</p><p>例如，我们的电脑键盘上有100多个键。如果我们简单地将每个按键连接到一个输入引脚上，那么控制器芯片将需要100多个引脚！它将是笨重的，难以布线，生产成本也很高。</p><p>取而代之的是，在固件中稍加巧妙，我们就可以将按钮排列在由列和行组成的网格中，也就是一个矩阵，如下所示：</p><p>这样，通过一次扫描一行和一列，我们可以确定按下了哪些键。当然，还有更多的技术细节，所以如果你愿意，可以在这里多读一些。</p><p>无论如何，在上面的例子中，我们只需要4+4=8个引脚，而不是4*4=16个引脚，节省了一半！有了我们的电脑键盘，我们只需要大约20个管脚，而不是100多个管脚！</p><p>由此可见，矩阵扫描简化了输入设备的管脚数和设计复杂度。</p><p>回到我们手边的微波炉键盘上。我们可以看到它的带状电缆分为两部分，每部分有5个针脚：</p><p>因此，如果我的假设是正确的，它将是一个有25个按钮的5x5矩阵。如果你一直往上滚动，你会发现键盘上有24个按钮，所以它是正确的！</p><p>现在我们知道有5列5行，是时候找出哪个键是哪个键了。</p><p>为此，我拆开了带状电缆连接器，并将其替换为直插头：</p><p>另外，该微控制器是东芝公司设计的TMP47C412AN。它是一个4位处理器，有4KB的ROM和128字节的RAM。它还可以直接驱动真空荧光灯管。总而言之，这是一款非常专业的家电芯片。与Arduinos和STM32相比，动力非常不足。但尽管如此，它还是完成了任务！</p><p>然后，我把电路板放回原处，打开电源，触摸每一对电线，看看它按的是哪一个按钮。</p><p>我花了一段时间，但最终我找到了我需要的按钮的矩阵位置：</p><p>总共有10个数字键盘键和4个控制按钮。还有很多其他按钮，但我并没有费心去做，因为我根本就不用它们。</p><p>说到这里，我在一个功能板上硬接上了几个按钮，作为一种快速而肮脏的解决办法：</p><p>它起作用了!。至少我现在可以吃热腾腾的饭菜了！而且它没有花我一分钱。</p><p>但正如你所看到的，10根电线从箱子里出来是非常凌乱的，我相信我可以做得更好。</p><p>大约在同一时间，我正在开发duckyPad，这是一款拥有15个按键的机械式宏键盘，具有OLED、热插拔、RGB以及带duckyScript的复杂输入自动化功能：</p><p>它被称为万能Macropad，所以为了不辜负它的名字，我自然也会让它在我的微波炉上工作！</p><p>如果我做到了这一点，我那台低矮的20岁二手坏微波炉将变成世界上唯一一台有机械开关和RGB照明的微波炉！现在这就是我所说的..。韩国风俗😅。</p><p>现在，有10根电线从盒子里出来，进入我的手工键盘，非常凌乱。</p><p>理想情况下，有了duckyPad，我希望它只需要使用三根线：电源、接地和数据。用这么少的电线，它们可以放在一根电缆里，这样会干净整洁得多。</p><p>然而，微波控制器仍然需要键盘矩阵中的10根线。所以这意味着我需要一个适配器。让我们就叫它PMM董事会吧。</p><p>DumkyPad会与PMM董事会对话，PMM董事会又会与微波控制器对话。就像这样：</p><p>还不错！然而，到目前为止，我们一直在使用键盘矩阵的真实开关。但是有了PMM板，我们需要电子控制按键矩阵，才能让微波炉误以为我们按下了按钮！我们该怎么做？</p><p>这有点让人惊讶，但经过一番挖掘，我发现我在3年前就解决了这个问题！那时候，我正试着让任天堂Switch Joycons的输入自动化，而他们的按钮也使用了矩阵扫描。</p><p>答案是什么？模拟开关！你可以把它们想象成普通的开关，但它们是电子控制的，而不是用手指按动它们。</p><p>我使用的芯片是ADI公司的ADG714。一块芯片有8个交换机，通过简单的SPI协议进行控制：</p><p>这是一个相对简单的电路板。使用的是STM32F042F6P6，我把它的所有插针都打开了，以备不时之需。</p><p>因为我想控制14个按钮，所以需要两个ADG714。有了SPI，它们可以很容易地以菊花链的形式连接在一起。</p><p>你可以在示意图中看到，模拟开关的连接方式与我的劣质手工焊接键盘完全一样。只不过现在它们可以由微控制器以电子方式按下。</p><p>我用连续性寻呼机做了初步测试，它似乎工作得很好，但只有当它安装在真正的东西上时，我们才能确定。</p><p>现在PMM板可以控制按钮矩阵，duckyPad应该如何与其对话？</p><p>由于只有一根数据线，我认为一条简单的单向串行链路应该足够了。</p><p>DumkyPad会在每次按下一个键时以115200bps的速度发送一条简单的串行消息。PMM板接收信号，如果格式正确，它会暂时关闭相应的模拟开关，模拟按下微波炉的按钮。</p><p>我向duckyScript解析器添加了一个绝密的UARTPRINT命令，并为我的微波键盘创建了一个配置文件。</p><p>这一切都在一起！这就引出了最后一个问题：我们将如何为它提供动力？</p><p>我以为这会很简单。微波电路板上已经有微控制器了，只要轻触它的电源就可以了！事实证明，几乎但不完全如此。</p><p>仔细检查电路板，发现整个电路都是在负电压下运行的。</p><p>我们可以看到变压器的电压是-26V，然后降到-12V，然后再降到-5V。该稳压器是一款S7905PIC固定负压稳压器，进一步证实了这一理论。</p><p>我不确定为什么它会被设计成这样，可能与交流变压器有关。尽管如此，它实际上并没有那么重要，因为它只是从不同的参考点。</p><p>我从电路板上接上两根电源线，为PMM板供电，然后依次为duckyPad供电：</p><p>通常，我们会将0V连接到GND，并将正电压连接到VCC。但在这种情况下，0V实际上处于更高的电势。所以我需要做的就是把-5V连接到GND，0V连接到VCC。电势差仍然是5V，所以一切都能正常工作。</p><p>(鹰眼的观众可能会注意到，我还用一张贴纸盖住了蜂鸣器。太吵了！)。</p><p>我重新安装了电路板，把所有的东西都连接起来，并做了一个快速测试，它起作用了！</p><p>您可以看到从DumkyPad调试接头到PMM板的3条线，以及进入控制板的10条线，其中蓝色带状电缆曾经位于控制板中。</p><p>我把鸭子垫连接到微波炉上，砍下一根便宜的USB数据线的两端，用里面的4根线通过底部的通风口把所有东西连接起来。</p><p>哇！它已经完成了！全宇宙中第一个也可能是唯一一个拥有机械开关、OLED和RGB照明的微波炉！</p><p>你有没有体验过Gateron Green Switch清脆易懂的触感和听觉上的完美，同时因为你太懒而不敢做饭而加热一些冷冻垃圾食品？嗯，我有，所以就这样了！</p><p>如果你对鸭子垫感兴趣，你可以在这里获得更多关于它的知识，😅！</p><p>每台微波炉都有不同的键盘布局，所以你需要弄清楚它们，然后自己设计和制造一块PMM板。这不是一个小壮举，但至少所有的信息都在这里！如果你真的沿着这条路走下去，如果你有任何问题，请告诉我！</p><p>当然，拆开时会有高电压和高电势的微波辐射，所以要小心！</p><p>请随时打开一个问题，在官方的DuckyPad不和谐中询问，在不和谐的dekuNukem#6998上DM我，或者发电子邮件到dekuNukem@Gmail。Com查询。</p></div><div id="story_share_this"><div class="sharethis-inline-share-buttons"></div></div><div class="text-break sotry_link page_narrow"><a target="_blank" href="https://github.com/dekuNukem/pimp_my_microwave/#">https://github.com/dekuNukem/pimp_my_microwave/#</a></div><div class="story_tags page_narrow"><button type="button" class="btn btn-light my_tag"><a href="/tag/微波炉/">#微波炉</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/pimp/">#pimp</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/键盘/">#键盘</a></button></div></div><div class="my_movie_list_item shadow p-3 mb-5 bg-white rounded"><button type="button" class="btn btn-link my_tag"><a href="/tag/web2.0/">#web2.0</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/google/">#google</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/设计/">#设计</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/创意/">#创意</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/摄影/">#摄影</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/游戏/">#游戏</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/图片/">#图片</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/软件/">#软件</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/视频/">#视频</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/手机/">#手机</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/广告/">#广告</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/apple/">#apple</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/iphone/">#iphone</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/网站/">#网站</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/免费/">#免费</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/下载/">#下载</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/windows/">#windows</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/微软/">#微软</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/firefox/">#firefox</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/苹果/">#苹果</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/blog/">#blog</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/音乐/">#音乐</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/博客/">#博客</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/wordpress/">#wordpress</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/恶搞/">#恶搞</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/艺术/">#艺术</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/qq/">#qq</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/web/">#web</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/谷歌/">#谷歌</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/工具/">#工具</a></button></div></div></div><div id="my_footer"><div class=""><a href="/tags/">tags</a> <a href="/users/">users</a></div>&copy;2012-2021 diglog.com </div></div></body></html>