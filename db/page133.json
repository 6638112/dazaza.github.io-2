[{"category": "", "categoryclass": "", "imagename": "ce65c382b5edeba4dde3fd0ffcd76cfe.jpg", "infoid": 1070158, "ip": "", "isanchordig": 1, "ischecked": 1, "isdelete": 0, "isneo": 1, "mark": "", "name": "", "note": "\u7f8e\u56fd\u51fa\u552e\u88ab\u5b9a\u7f6a\u7684\u5bf9\u51b2\u57fa\u91d1\u7ecf\u7406 Martin Shkreli \u6ca1\u6536\u7684\u72ec\u7279\u6b66\u5f53\u5bb6\u65cf\u4e13\u8f91 \u4eca\u5929\u65e9\u4e9b\u65f6\u5019\uff0c\u7f8e\u56fd\u51fa\u552e\u4e86\u6b66\u5f53\u5bb6\u65cf\u4e13\u8f91\u201c\u5c11\u6797\u9ec4\u98de\u9e3f\u201d\uff08\u201c\u4e13\u8f91\u201d\uff09\u7684\u552f\u4e00\u526f\u672c\u6b64\u524d\uff0cShkreli \u5728 2018 \u5e74 3 \u6708\u7684\u5224\u51b3\u4e2d\u88ab\u547d\u4ee4\u6ca1\u6536\u4f5c\u4e3a\u66ff\u4ee3\u8d44\u4ea7\uff0c\u5176\u4e2d\u6d89\u53ca\u7ea6 740 \u4e07\u7f8e\u5143\u7684\u6ca1\u6536\u6b3e\u9879\u5224\u51b3\uff08Forfeiture Money Judgment\uff09\u3002\u51fa\u552e\u4e13\u8f91\u7684\u6536\u76ca\u5c06\u7528\u4e8e\u652f\u4ed8\u6ca1\u6536\u6b3e\u9879\u5224\u51b3\u6240\u6b20\u7684\u672a\u507f\u8fd8\u4f59\u989d\u3002\u9500\u552e\u5408\u540c\u5305\u542b\u4fdd\u5bc6\u6761\u6b3e\uff0c\u4ee5\u4fdd\u62a4\u4e0e\u4e70\u65b9\u548c\u4ef7\u683c\u76f8\u5173\u7684\u4fe1\u606f\u3002\u7ebd\u7ea6\u4e1c\u533a\u4ee3\u7406\u7f8e\u56fd\u68c0\u5bdf\u5b98 Jacquelyn M. Kasulis \u5ba3\u5e03\u51fa\u552e\u4e13\u8f91\u3002 \u201c\u901a\u8fc7\u672c\u529e\u516c\u5ba4\u53ca\u5176\u6267\u6cd5\u4f19\u4f34\u7684\u52e4\u594b\u548c\u575a\u6301\uff0c\u65bd\u514b\u83b1\u91cc\u5df2\u7ecf\u88ab\u8ffd\u7a76\u8d23\u4efb\uff0c\u5e76\u4e3a\u81ea\u5df1\u6492\u8c0e\u548c\u7a83\u53d6\u6295\u8d44\u8005\u7684\u5229\u76ca\u4ed8\u51fa\u4e86\u4ee3\u4ef7\u3002\u968f\u7740\u4eca\u5929\u8fd9\u5f20\u72ec\u4e00\u65e0\u4e8c\u7684\u4e13\u8f91\u7684\u9500\u552e\uff0c\u4ed6\u7684\u6ca1\u6536\u6b3e\u9879\u73b0\u5df2\u5b8c\u6210\uff0c\u201d\u4ee3\u7406\u7f8e\u56fd\u68c0\u5bdf\u5b98\u5361\u82cf\u5229\u65af\u8bf4\u3002 Kasulis \u5973\u58eb\u611f\u8c22\u7f8e\u56fd\u6cd5\u8b66\u7f72\u7684\u91cd\u5927\u52aa\u529b\uff0c\u7279\u522b\u662f\u7f8e\u56fd\u6cd5\u8b66\u7f72\u603b\u6cd5\u5f8b\u987e\u95ee\u529e\u516c\u5ba4\u548c\u8be5\u673a\u6784\u8d44\u4ea7\u6ca1\u6536\u53f8\u590d\u6742\u8d44\u4ea7\u90e8\u95e8\u7684\u5de5\u4f5c\uff0c\u4ee5\u53ca\u53f8\u6cd5\u90e8\u63d0\u4f9b\u7684\u534f\u52a9\u3002\u6c11\u4e8b\u5206\u5ead\uff0c\u5546\u4e8b\u8bc9\u8bbc\u5206\u5ead\u3002 Shkreli \u662f\u5bf9\u51b2\u57fa\u91d1 MSMB Capital Management LP \u548c MSMB Healthcare Management LP \u7684\u521b\u59cb\u4eba\u548c\u7ba1\u7406\u6210\u5458\uff0c\u4ee5\u53ca\u4e0a\u5e02\u751f\u7269\u5236\u836f\u516c\u53f8 Retrophin Inc.\uff08\u201cRetrophin\u201d\uff09\u7684\u524d\u9996\u5e2d\u6267\u884c\u5b98\u3002\u5728\u5e03\u9c81\u514b\u6797\u8054\u90a6\u6cd5\u9662\u8fdb\u884c\u4e86\u4e3a\u671f\u516d\u5468\u7684\u5ba1\u5224\u540e\uff0cShkreli \u4e8e 2017 \u5e74 8 \u6708\u88ab\u5224\u72af\u6709\u4e24\u9879\u8bc1\u5238\u6b3a\u8bc8\u7f6a\u548c\u4e00\u9879\u8bc1\u5238\u6b3a\u8bc8\u5171\u8c0b\u7b56\u5212\u4e00\u7cfb\u5217\u8ba1\u5212\u4ee5\u6b3a\u9a97\u5bf9\u51b2\u57fa\u91d1\u6295\u8d44\u8005\u5e76\u64cd\u7eb5\u4ef7\u683c\u548cRetrophin \u80a1\u7968\u7684\u4ea4\u6613\u91cf\u3002\u7f8e\u56fd\u5730\u533a\u6cd5\u5b98 Kiyo A. Matsumoto \u5224\u5904 Shkreli \u4e03\u5e74\u76d1\u7981\uff0c\u968f\u540e\u4e09\u5e74\u76d1\u7763\u91ca\u653e\uff0c\u5e76\u547d\u4ee4\u4ed6\u652f\u4ed8\u6ca1\u6536\u6b3e\u9879\u5224\u51b3\u3001\u7ea6 388,000 \u7f8e\u5143\u7684\u8d54\u507f\u91d1\u548c 75,000 \u7f8e\u5143\u7684\u7f5a\u6b3e\u3002\u677e\u672c\u6cd5\u5b98\u8fd8\u547d\u4ee4 Shkreli \u6ca1\u6536\u4e13\u8f91\u548c\u5176\u4ed6\u66ff\u4ee3\u8d44\u4ea7\uff0c\u4ee5\u6ee1\u8db3\u6ca1\u6536\u5224\u51b3\u3002\u7f8e\u56fd\u7b2c\u4e8c\u5de1\u56de\u4e0a\u8bc9\u6cd5\u9662\u4e8e 2019 \u5e74 7 \u6708\u786e\u8ba4\u4e86 Shkreli \u7684\u5b9a\u7f6a\u548c\u5224\u5211\uff0c\u5305\u62ec\u5224\u5904\u6ca1\u6536\u91d1\u94b1\u5224\u51b3\u3002\u5728\u7f8e\u56fd\u6700\u9ad8\u6cd5\u9662\u62d2\u7edd Shkreli \u8fdb\u4e00\u6b65\u5ba1\u67e5\u5176\u5b9a\u7f6a\u548c\u5224\u5211\u7684\u8bf7\u6c42\u540e\uff0c\u653f\u5e9c\u6ca1\u6536\u4e86 Shkreli \u6240\u6b20\u7684\u4e13\u8f91\u548c\u5176\u4ed6\u8d44\u4ea7\u3002\u5728 Shkreli \u4e8e 2015 \u5e74\u8d2d\u4e70\u4e13\u8f91\u65f6\uff0c\u5b83\u88ab\u5ba3\u4f20\u4e3a\u201c\u65e2\u662f\u827a\u672f\u54c1\u53c8\u662f\u97f3\u9891\u795e\u5668\u201d\u3002\u4e13\u8f91\u5305\u62ec\u4e00\u4e2a\u624b\u5de5\u96d5\u523b\u7684\u954d\u94f6\u76d2\u5b50\u4ee5\u53ca\u4e00\u4efd\u5305\u542b\u6b4c\u8bcd\u548c\u771f\u54c1\u8bc1\u4e66\u7684\u76ae\u9769\u88c5\u8ba2\u624b\u7a3f\u3002\u4e13\u8f91\u53d7\u5230\u5404\u79cd\u9650\u5236\uff0c\u5305\u62ec\u4e0e\u5f55\u97f3\u590d\u5236\u6709\u5173\u7684\u9650\u5236\u3002 2017 \u5e74 9 \u6708\uff0c\u5c31\u5728\u4ed6\u88ab\u5b9a\u7f6a\u51e0\u5468\u540e\uff0c\u4f46\u5728\u5730\u533a\u6cd5\u9662\u5f3a\u5236\u6ca1\u6536\u4e4b\u524d\uff0cShkreli \u8bd5\u56fe\u901a\u8fc7\u5728\u7ebf\u62cd\u5356\u51fa\u552e\u4e13\u8f91\u3002\n\u4e0e Shkreli \u5224\u51b3\u6709\u5173\u7684\u6ca1\u6536\u4e8b\u5b9c\u7531\u8be5\u529e\u516c\u5ba4\u5211\u4e8b\u53f8\u65b0\u6210\u7acb\u7684\u8d44\u4ea7\u8ffd\u56de\u79d1\u7684\u7f8e\u56fd\u52a9\u7406\u68c0\u5bdf\u5b98 Laura D. Mantell \u548c Claire S. Kedeshian \u5904\u7406\u3002\u4ee3\u7406\u7f8e\u56fd\u68c0\u5bdf\u5b98 Kasulis \u548c\u52a9\u7406\u7f8e\u56fd\u68c0\u5bdf\u5b98 Alixandra E. Smith \u548c G. Karthik Srinivasan\uff08\u73b0\u5728\u662f\u5fb7\u514b\u8428\u65af\u5dde\u897f\u90e8\u5730\u533a\u7684\u52a9\u7406\u7f8e\u56fd\u68c0\u5bdf\u5b98\uff09\u8d1f\u8d23\u5bf9 Shkreli \u7684\u8d77\u8bc9\uff0c\u5e76\u5728\u4e0a\u8bc9\u4e2d\u4e3a\u4ed6\u7684\u5b9a\u7f6a\u548c\u5224\u5211\u8fa9\u62a4\u3002", "note_en": "United States Sells Unique Wu-Tang Clan Album Forfeited by Convicted Hedge Fund Manager Martin Shkreli\n Earlier today, the United States sold the sole copy of the Wu-Tang Clan album \u201cOnce Upon a Time in Shaolin\u201d (the \u201cAlbum\u201d) which had previously been ordered to be forfeited as a substitute asset in connection with the approximately $7.4 million forfeiture money judgment (Forfeiture Money Judgment) entered against Shkreli at his March 2018 sentencing.\u00a0 Proceeds from the sale of the Album will be applied to satisfy the outstanding balance owed on the Forfeiture Money Judgment.\u00a0 The contract of sale contains a confidentiality provision that protects information relating to the buyer and price.\n Jacquelyn M. Kasulis, Acting United States Attorney for the Eastern District of New York, announced the sale of the Album.\n \u201cThrough the diligent and persistent efforts of this Office and its law enforcement partners, Shkreli has been held accountable and paid the price for lying and stealing from investors to enrich himself.\u00a0 With today\u2019s sale of this one-of-a-kind album, his payment of the forfeiture is now complete,\u201d stated Acting U.S. Attorney Kasulis.\u00a0 Ms. Kasulis acknowledged the significant efforts of the U.S. Marshals Service and, in particular, the work of the U.S. Marshals Service\u2019s Office of General Counsel and the Complex Asset Unit of the agency\u2019s Asset Forfeiture Division, as well as assistance provided by the Department of Justice\u2019s Civil Division, Commercial Litigation Branch.\n Shkreli was the founder and managing member of hedge funds MSMB Capital Management LP and MSMB Healthcare Management LP and the former Chief Executive Officer of Retrophin Inc. (\u201cRetrophin\u201d), a publicly traded biopharmaceutical company.\u00a0 Following a six-week trial in federal court in Brooklyn, Shkreli was convicted in August 2017 of two counts of securities fraud and one count of securities fraud conspiracy for orchestrating a series of schemes to defraud investors in the hedge funds and to manipulate the price and trading volume of Retrophin\u2019s stock.\u00a0 United States District Judge Kiyo A. Matsumoto sentenced Shkreli to seven years\u2019 imprisonment, to be followed by three years\u2019 supervised release, and ordered him to pay the Forfeiture Money Judgment, approximately $388,000 in restitution and a $75,000 fine.\u00a0 Judge Matsumoto also ordered Shkreli to forfeit the Album and other substitute assets to satisfy the Forfeiture Judgment.\n Shkreli\u2019s conviction and sentence, including the imposition of the Forfeiture Money Judgment, were affirmed by the U.S. Court of Appeals for the Second Circuit in July 2019.\u00a0 Following the U.S. Supreme Court\u2019s denial of Shkreli\u2019s request for further review of his conviction and sentence, the government seized the Album and other assets owed by Shkreli.\n At the time Shkreli purchased the Album in 2015, it was marketed as \u201cboth a work of art and an audio artifact.\u201d\u00a0 The Album includes a hand-carved nickel-silver box as well as a leather-bound manuscript containing lyrics and a certificate of authenticity.\u00a0 The Album is subject to various restrictions, including those relating to the duplication of its sound recordings. In September 2017, just weeks after his conviction but before the district court-imposed forfeiture, Shkreli attempted to sell the Album through an on-line auction.\n Forfeiture matters related to Shkreli\u2019s sentence were handled by Assistant United States Attorneys Laura D. Mantell and Claire S. Kedeshian of the newly formed Asset Recovery Section in the Office\u2019s Criminal Division.\u00a0 Acting U.S. Attorney Kasulis and Assistant United States Attorneys Alixandra E. Smith and G. Karthik Srinivasan (now an Assistant United States Attorney in the Western District of Texas) were in charge of the prosecution of Shkreli, and defended his conviction and sentence on appeal.", "posttime": "2021-07-28 03:52:18", "source_domain": "news.ycombinator.com", "source_name": "Hacker News", "tags": "\u7f8e\u56fd,\u51fa\u552e,states,\u4e13\u8f91", "title": "\u7f8e\u56fd\u51fa\u552e Martin Shkreli \u6ca1\u6536\u7684 Wu-Tang \u4e13\u8f91", "title_en": "United States sells Wu-Tang album forfeited by Martin Shkreli", "transed": 1, "url": "https://www.justice.gov/usao-edny/pr/united-states-sells-unique-wu-tang-clan-album-forfeited-convicted-hedge-fund-manager", "via": "", "real_tags": ["\u7f8e\u56fd", "\u51fa\u552e", "states", "\u4e13\u8f91"]}, {"category": "", "categoryclass": "", "imagename": "896708248cd0b96af1f88fe0432bbc9b.png", "infoid": 1070157, "ip": "", "isanchordig": 1, "ischecked": 1, "isdelete": 0, "isneo": 1, "mark": "", "name": "", "note": "Apple \u4e00\u76f4\u5728 Mac OS \u4e2d\u505a\u4e00\u4e9b\u8ba9\u7528\u6237\u4f53\u9a8c (UX) \u793e\u533a\u96c6\u4f53\u6478\u4e0d\u7740\u5934\u8111\u7684\u4e8b\u60c5\uff0c\u6bd4\u5982\u9690\u85cf\u6eda\u52a8\u6761\u548c\u5728\u8ba1\u7b97\u673a\u7a97\u53e3\u7684\u5185\u5bb9\u533a\u57df\u5185\u653e\u7f6e\u4e0d\u53ef\u89c1\u7684\u63a7\u4ef6\u3002 Apple \u7684\u79fb\u52a8\u8bbe\u5907\u66f4\u7cdf\u7cd5\uff1a\u7528\u6237\u53ef\u80fd\u9700\u8981 5 \u79d2\u4ee5\u4e0a\u7684\u65f6\u95f4\u624d\u80fd\u5c06\u6587\u672c\u6307\u9488\u51c6\u786e\u5730\u653e\u5230\u4ed6\u4eec\u9700\u8981\u7684\u4f4d\u7f6e\uff0c\u4f46 Apple \u62d2\u7edd\u6dfb\u52a0\u4ece\u4e00\u5f00\u59cb\u5c31\u5c5e\u4e8e\u952e\u76d8\u7684\u7bad\u5934\u952e\u3002\u5bf9\u4e8e\u90a3\u4e9b\u5728 UX \u9886\u57df\u53d7\u8fc7\u6559\u80b2\u7684\u4eba\u6765\u8bf4\uff0cApple \u7684\u51b3\u5b9a\u53ef\u80fd\u770b\u8d77\u6765\u5f88\u611a\u8822\uff0c\u4f46\u8981\u5e73\u8861\u8fd9\u4e00\u70b9\uff0c\u56e0\u4e3a Apple \u7684\u6536\u5165\u4e00\u76f4\u6bd4\u884c\u4e1a\u4e2d\u63a5\u4e0b\u6765\u51e0\u4f4d\u9886\u5bfc\u8005\u7684\u603b\u548c\u8fd8\u8981\u591a\u3002\u867d\u7136 Apple \u786e\u5b9e\u7f3a\u5c11\u4e00\u4e9b\u4e1c\u897f\u2014\u2014\u7bad\u5934\u952e\u2014\u2014\u4f46\u6211\u4eec\u5728 UX \u793e\u533a\u4e2d\u4e5f\u7f3a\u5c11\u4e00\u4e9b\u4e1c\u897f\uff1aApple \u5bf9\u6211\u4eec\u8bb8\u591a\u4eba\u7ecf\u5e38\u5ffd\u7565\u7684\u7528\u6237\u7684\u654f\u9510\u5173\u6ce8\uff1a\u6f5c\u5728\u7528\u6237\uff0c\u4e70\u5bb6\u3002", "note_en": "Apple keeps doing things in the Mac OS that leave the user-experience (UX) community scratching its collective head, things like hiding the scroll bars and placing invisible controls inside the content region of windows on computers.\n Apple\u2019s mobile devices are even worse: \u00a0It can take users upwards of five seconds to accurately drop the text pointer where they need it, but Apple refuses to add the arrow keys that have belonged on the keyboard from day-one.\n  Apple\u2019s decisions may look foolish to those schooled in\u00a0UX, but balance that against the fact that Apple consistently makes more money than the next several leaders in the industry combined. \u00a0While it\u2019s true Apple is missing something\u2014arrow keys\u2014we in the UX community areN missing something, too: Apple\u2019s razor-sharp focus on a user many of us often fail to even consider: The potential user, the buyer.", "posttime": "2021-07-28 03:51:53", "source_domain": "news.ycombinator.com", "source_name": "Hacker News", "tags": "\u82f9\u679c,apple", "title": "\u7b2c\u4e09\u4e2a\u7528\u6237\u6216\u4e3a\u4ec0\u4e48\u82f9\u679c\u4e00\u76f4\u5728\u505a\u611a\u8822\u7684\u4e8b\u60c5", "title_en": "The Third User or Why Apple Keeps Doing Foolish Things", "transed": 1, "url": "https://asktog.com/atc/the-third-user/", "via": "", "real_tags": ["\u82f9\u679c", "apple"]}, {"category": "", "categoryclass": "", "imagename": "e44007778736e2ebcf13d5cb1d597bbf.png", "infoid": 1070155, "ip": "", "isanchordig": 1, "ischecked": 1, "isdelete": 0, "isneo": 1, "mark": "", "name": "", "note": "\u5728 Mac OS X \u7684\u5934\u516d\u5e74\u5de6\u53f3\u7684\u65f6\u95f4\u91cc\uff0c\u5b83\u7684\u7cfb\u7edf\u51e0\u4e4e\u6ca1\u6709\u63d0\u4f9b\u4efb\u4f55\u4e1c\u897f\u6765\u68c0\u6d4b\u3001\u5220\u9664\u6216\u5bf9\u6297\u6076\u610f\u8f6f\u4ef6\u3002\u4f3c\u4e4e\u91c7\u53d6\u7684\u7b2c\u4e00\u6b65\u662f\u5728 2007 \u5e74\u5de6\u53f3\u81ea\u613f\u5f15\u5165\u4ee3\u7801\u7b7e\u540d\uff0c\u8be5\u529f\u80fd\u7531\u4ec5\u88ab\u79f0\u4e3a\u201c\u6124\u4e16\u5ac9\u4fd7\u7684\u4f69\u91cc\u201d\u7684 Apple \u5de5\u7a0b\u5e08\u63a8\u5e7f\u3002\u8fd9\u4e9b\u662f\u7b2c\u4e00\u4e2a Gatekeeper \u5b50\u7cfb\u7edf\u7684\u4e00\u90e8\u5206\uff0c\u8be5\u5b50\u7cfb\u7edf\u5728 2012 \u5e74\u6b63\u5f0f\u63a8\u51fa\u4e4b\u524d\u4e00\u76f4\u5728\u7f13\u6162\u53d1\u5c55\u3002\u4e0e\u6b64\u540c\u65f6\uff0cApple \u7684\u5b89\u5168\u5de5\u7a0b\u5e08\u6b63\u5fd9\u4e8e\u5f00\u53d1 App Sandbox\uff0c\u540c\u6837\u4e8e 2007 \u5e74\u63a8\u51fa\uff0c\u4f46\u5e76\u672a\u771f\u6b63\u6210\u719f\u76f4\u5230 2012 \u5e74 6 \u6708\u5b83\u6210\u4e3a App Store \u5e94\u7528\u7a0b\u5e8f\u7684\u4e00\u9879\u8981\u6c42\uff0c\u5c3d\u7ba1\u4ece\u90a3\u65f6\u8d77\u4e00\u4e9b\u8f83\u65e7\u7684\u5e94\u7528\u7a0b\u5e8f\u4e00\u76f4\u4eab\u6709\u8c41\u514d\u6743\u3002 Gatekeeper \u63d0\u4f9b\u4e86\u4e00\u79cd\u673a\u5236\uff0c\u7528\u4e8e\u533a\u5206\u4ece\u4e0d\u53d7\u4fe1\u4efb\u7684 Internet \u6765\u6e90\u4e0b\u8f7d\u7684\u5e94\u7528\u7a0b\u5e8f\uff0c\u901a\u8fc7\u9644\u52a0\u6269\u5c55\u5c5e\u6027\u5c06\u5b83\u4eec\u9694\u79bb\u3002\u7136\u540e\u5728\u9996\u6b21\u542f\u52a8\u65f6\u901a\u8fc7\u4e09\u79cd\u4e0d\u540c\u7684\u673a\u5236\u68c0\u67e5\u88ab\u9694\u79bb\u7684\u5e94\u7528\u7a0b\u5e8f\uff1a\u4ee3\u7801\u7b7e\u540d\u68c0\u67e5\uff0c\u4ee5\u786e\u5b9a\u7b7e\u540d\u8eab\u4efd\u548c\u5e94\u7528\u7a0b\u5e8f\u5b8c\u6574\u6027\uff0c\u7531 AMFI\uff08Apple \u79fb\u52a8\u6587\u4ef6\u5b8c\u6574\u6027\uff09\u7b49\u5b50\u7cfb\u7edf\u8fdb\u884c\uff0c\u901a\u5e38\u79f0\u4e3a Gatekeeper\uff1b XProtect \u963b\u6b62\u8f6f\u4ef6\uff0c\u4f8b\u5982\u6613\u53d7\u653b\u51fb\u7684 Java \u7248\u672c\uff0c\u5e76\u626b\u63cf\u5df2\u77e5\u6076\u610f\u8f6f\u4ef6\u7684\u7279\u5f81\uff1b\u60a8\u53ef\u4ee5\u5728\u672c\u6587\u4e2d\u9605\u8bfb\u622a\u81f3 2015 \u5e74\u4ed6\u4eec\u7684\u5b58\u5728\u548c\u884c\u52a8\u7684\u63cf\u8ff0\u3002\u4e3a\u4e86\u89e3\u51b3\u67d0\u4e9b\u5f62\u5f0f\u7684\u6076\u610f\u8f6f\u4ef6\u884c\u4e3a\uff0c\u6211\u4eec\u91c7\u53d6\u4e86\u989d\u5916\u7684\u63aa\u65bd\uff0c\u4f8b\u5982\u5e94\u7528\u7a0b\u5e8f\u6613\u4f4d\uff0c\u5728\u67d0\u4e9b\u60c5\u51b5\u4e0b\u4f1a\u4ece\u7279\u6b8a\u4f4d\u7f6e\u542f\u52a8\u9694\u79bb\u7684\u5e94\u7528\u7a0b\u5e8f\u3002\u5bf9\u4ee3\u7801\u7b7e\u540d\u7684\u68c0\u67e5\u5206\u4e3a\u4e24\u4e2a\u9636\u6bb5\uff1a\u9996\u5148\u662f\u5e94\u7528\u7a0b\u5e8f\u4e0d\u540c\u90e8\u5206\u5b58\u50a8\u7684 cdhashes \u7684\u6709\u6548\u6027\uff0c\u5176\u6b21\u662f\u7528\u4e8e\u7b7e\u7f72\u5e94\u7528\u7a0b\u5e8f\u7684\u8bc1\u4e66\u7684\u6709\u6548\u6027\uff0c\u4ee5\u786e\u4fdd\u5b83\u6ca1\u6709\u88ab\u64a4\u9500\u3002\u4ece 2018 \u5e74\u7684 Mojave \u5f00\u59cb\uff0cApple \u901a\u8fc7\u5f15\u5165\u516c\u8bc1\u589e\u52a0\u4e86\u53e6\u4e00\u7ec4\u68c0\u67e5\u3002\n\u5728 2018-19 \u5e74\u4e4b\u524d\uff0cmacOS \u4f3c\u4e4e\u5728\u672c\u5730\u5b58\u50a8\u4e86\u6709\u5173\u8bc1\u4e66\u64a4\u9500\u7684\u4fe1\u606f\uff0c\u4f4d\u4e8e /private/var/db/gkopaque.bundle \u7684\u201cGatekeeper\u201d\u6570\u636e\u5e93\u4e2d\uff0cApple \u6bcf\u4e24\u5468\u66f4\u65b0\u4e00\u6b21\u3002\u968f\u7740 macOS 10.15 Catalina \u7684\u53d1\u5e03\uff0c\u90a3\u4e9b\u4e0e\u6700\u65b0\u7248 macOS \u4fdd\u6301\u540c\u6b65\u7684 Mac \u4e8e 2019 \u5e74 9 \u6708\u505c\u6b62\u8bbf\u95ee\u8be5\u6570\u636e\u5e93\u3002\u81ea 2019 \u5e74 8 \u6708 26 \u65e5\u4ee5\u6765\uff0cApple \u5c1a\u672a\u53d1\u5e03\u66f4\u65b0\uff0c\u4efb\u4f55\u5168\u65b0\u5b89\u88c5 Big Sur \u7684\u4eba\u90fd\u5c06\u5b89\u88c5\u4e00\u4e2a\u771f\u6b63\u53e4\u8001\u7684\u7248\u672c\u3002\u6b63\u5982\u6211\u5728\u8fd9\u91cc\u6307\u51fa\u7684\u90a3\u6837\uff0c\u201cGatekeeper\u201d\u6570\u636e\u5e93\u73b0\u5728\u5df2\u88ab\u6709\u6548\u5e9f\u5f03\u3002\u968f\u7740\u8fd9\u4e2a\u68c0\u67e5\u7cfb\u7edf\u7684\u53d1\u5c55\uff0c\u65e9\u5728 High Sierra \u4e4b\u524d\uff0c\u4e5f\u53ef\u80fd\u5728 El Capitan \u4e4b\u524d\uff0cGatekeeper \u5f00\u59cb\u6267\u884c\u5728\u7ebf OCSP \u67e5\u8be2\u4ee5\u68c0\u67e5\u4ee3\u7801\u7b7e\u540d\u8bc1\u4e66\u7684\u6709\u6548\u6027\uff0c\u6700\u521d\u4ec5\u7528\u4e8e\u7b2c\u4e00\u6b21\u8fd0\u884c\u7684\u9694\u79bb\u5e94\u7528\u7a0b\u5e8f\u3002\u4f46\u662f\uff0c\u5728 2019 \u5e74 7 \u6708\u5de6\u53f3\uff08macOS 10.14.6\uff09\uff0c\u8fd9\u4e9b\u68c0\u67e5\u6269\u5c55\u5230\u5df2\u7ecf\u6e05\u9664\u9694\u79bb\u7684\u5e94\u7528\u7a0b\u5e8f\u3002\u5230 2019 \u5e74 10 \u6708\u53d1\u5e03 Catalina \u65f6\uff0c\u5373\u4f7f\u672a\u8bbe\u7f6e\u9694\u79bb\u6807\u5fd7\uff0c\u4e5f\u4f1a\u5728\u52a0\u8f7d\u6240\u6709\u53ef\u6267\u884c\u4ee3\u7801\u65f6\u68c0\u67e5\u8bc1\u4e66\u3002\u636e\u6211\u6240\u77e5\uff0c\u8fd9\u4e9b\u5305\u62ec\u5bf9\u7b7e\u540d\u548c cdhashes \u7684\u7cfb\u7edf\u68c0\u67e5\uff0c\u8fd9\u4e0e\u516c\u8bc1\u7684\u9644\u52a0\u8981\u6c42\u91cd\u53e0\u3002\u5c3d\u7ba1 Apple \u957f\u671f\u4ee5\u6765\u4e00\u76f4\u8ba4\u4e3a\u7528\u6237\u4ecd\u7136\u53ef\u4ee5\u5728 macOS \u4e2d\u8fd0\u884c\u5b8c\u5168\u672a\u7b7e\u540d\u7684\u4ee3\u7801\uff0c\u4f46\u968f\u7740\u7b2c\u4e00\u6279 Apple Silicon Mac \u7684\u53d1\u5e03\uff0c\u8fd9\u79cd\u60c5\u51b5\u5728 2020 \u5e74 11 \u6708\u4e5f\u53d1\u751f\u4e86\u53d8\u5316\u3002\u6240\u6709\u5728 ARM \u5904\u7406\u5668\u4e0a\u672c\u5730\u8fd0\u884c\u7684\u4ee3\u7801\u90fd\u9700\u8981\u7b7e\u540d\uff0c\u5c3d\u7ba1\u76ee\u524d\u8fd9\u662f\u4e3a\u4e86\u63d0\u4f9b cdhashes \u4ee5\u4f20\u8f93\u5230 Apple\uff0c\u5e76\u53ef\u80fd\u5bf9\u6076\u610f\u8f6f\u4ef6\u503c\u8fdb\u884c\u8fdc\u7a0b\u68c0\u67e5\u3002\u76ee\u524d\u6ca1\u6709\u5bf9\u9996\u6b21\u542f\u52a8\u9694\u79bb\u5e94\u7528\u7a0b\u5e8f\u65f6\u4f7f\u7528\u7684\u7b7e\u540d\u8bc1\u4e66\u65bd\u52a0\u8d85\u51fa\u73b0\u6709 Gatekeeper \u63a7\u5236\u7684\u8981\u6c42\uff0c\u5176\u4e2d\u73b0\u5728\u4e5f\u5305\u62ec\u516c\u8bc1\u68c0\u67e5\u3002 2020 \u5e74 11 \u6708\uff0cApple \u4f7f\u7528\u5728\u7ebf OCSP \u68c0\u67e5\u53d7\u5230\u62a8\u51fb\uff0c\u4fc3\u4f7f\u5176\u7acb\u5373\u91c7\u53d6\u63aa\u65bd\u4fdd\u62a4\u9690\u79c1\uff0c\u5e76\u58f0\u660e\u8bc1\u4e66\u540a\u9500\u68c0\u67e5\u5c06\u5728\u4e0b\u4e00\u5e74\u66f4\u6539\u4e3a\uff1a\u201c\u7528\u6237\u9009\u62e9\u9000\u51fa\u7684\u65b0\u504f\u597d\u8fd9\u4e9b\u5b89\u5168\u4fdd\u62a4\u201d\uff0c\u5927\u6982\u610f\u5473\u7740\u54c8\u5e0c\u67e5\u627e\u548c\u8bc1\u4e66\u540a\u9500\u68c0\u67e5\u3002\u636e\u6211\u6240\u77e5\uff0c\u8fd9\u4e09\u4e2a\u53d8\u5316\u90fd\u8fd8\u6ca1\u6709\u5b9e\u65bd\uff0c\u5c3d\u7ba1\u8ddd\u79bb\u90a3\u4e00\u5e74\u8fc7\u53bb\u53ea\u5269\u4e0b\u56db\u4e2a\u6708\u4e86\u3002 XProtect \u662f\u4e00\u79cd\u9690\u85cf\u5728 macOS \u5b89\u5168\u670d\u52a1\u4e2d\u7684\u6309\u9700\u670d\u52a1\uff0c\u5176\u4e2d\u5305\u542b\u4e00\u7ec4\u66f4\u660e\u663e\u7684\u6570\u636e\u6587\u4ef6\uff0c\u8fd9\u4e9b\u6587\u4ef6\u7531 Apple \u5b9a\u671f\u66f4\u65b0\u3002\u5305\u542b\u6570\u636e\u6587\u4ef6\u7684 XProtect.bundle \u4f4d\u4e8e /Library/Apple/System/Library/CoreServices/\uff0c\u5728 Catalina \u7cfb\u7edf\u5377\u4e0a /System/Library/CoreServices/ \u7684\u672a\u53d7\u4fdd\u62a4\u6570\u636e\u5377\u4e2d\u6dfb\u52a0\uff1b\u5728 Mojave \u53ca\u66f4\u65e9\u7248\u672c\u4e2d\uff0c\u8fd9\u53ea\u662f /System/Library/CoreServices/\n\u5b83\u7684\u76ee\u7684\u662f\u626b\u63cf\u6587\u4ef6\u5e76\u6839\u636e\u88ab\u963b\u6b62\u7684\u8f6f\u4ef6\u5217\u8868\u548c\u5df2\u77e5\u6076\u610f\u8f6f\u4ef6\u7684 Yara \u7b7e\u540d\u8fdb\u884c\u68c0\u67e5\u3002\u5b83\u4e0e Gatekeeper \u662f\u5728\u540c\u4e00\u65f6\u671f\u53d1\u5c55\u8d77\u6765\u7684\uff0c\u5c3d\u7ba1\u5b83\u7684\u4fa7\u91cd\u70b9\u5728\u90a3\u4e2a\u65f6\u671f\u53d1\u751f\u4e86\u5f88\u5927\u7684\u53d8\u5316\u3002\u6700\u521d\u5b83\u7528\u4e8e\u786e\u4fdd\u4e0d\u4f7f\u7528\u65e7\u7248\u672c\u7684 Java\u3001Adobe Flash Player \u548c\u7c7b\u4f3c\u4ea7\u54c1\uff0c\u5bf9\u7167 XProtect.meta.plist \u4e2d\u7684\u5217\u8868\u68c0\u67e5\u5b83\u4eec\u3002\u4f8b\u5982\uff0c\u5728 2013 \u5e74 1 \u6708\u5e95\uff0cApple \u7684\u5b89\u5168\u5c0f\u7ec4\u5c06 Java 1.6.0_37 \u5217\u5165 XProtect \u7684\u963b\u6b62\u5217\u8868\uff0c\u5e76\u4e14\u4ecd\u7136\u5b89\u88c5\u4e86\u8be5\u7248\u672c\u6216\u66f4\u65e7\u7248\u672c\u7684 Mac \u65e0\u6cd5\u8fd0\u884c Java\u3002\u8fd9\u4e2a\u529f\u80fd\u73b0\u5728\u4f3c\u4e4e\u57fa\u672c\u4e0a\u88ab\u5e9f\u5f03\u4e86\uff0c\u8fd9\u4e9b\u7248\u672c\u53f7\u81f3\u5c11\u6709\u51e0\u5e74\u6ca1\u6709\u66f4\u65b0\u4e86\u3002 XProtect \u8fd8\u4f7f\u7528\u4e00\u7ec4 Yara \u5b9a\u4e49\u6765\u68c0\u6d4b\u5df2\u77e5\u6076\u610f\u8f6f\u4ef6\u3002\u8fd9\u4e9b\u5b9a\u4e49\u5305\u542b\u626b\u63cf\u6587\u4ef6\u65f6\u5e94\u7528\u7684\u89c4\u5219\uff1b\u5982\u679c\u6ee1\u8db3\u67d0\u4e2a\u89c4\u5219\uff0cXProtect \u4f1a\u58f0\u660e\u8be5\u9879\u76ee\u662f\u6076\u610f\u7684\uff0c\u963b\u6b62\u5176\u88ab\u6253\u5f00\uff0c\u5e76\u63d0\u9192\u7528\u6237\u3002\u76f4\u5230 2018 \u5e74\uff0cApple \u4f7f\u7528\u516c\u8ba4\u7684\u540d\u79f0\u8bc6\u522b\u6076\u610f\u8f6f\u4ef6\u7b7e\u540d\uff1b\u4ece\u90a3\u65f6\u8d77\uff0c\u5b83\u4f7f\u7528\u5b83\u53ef\u4ee5\u68c0\u6d4b\u5230\u7684\u6076\u610f\u8f6f\u4ef6\u7684\u4ee3\u53f7\u6765\u6df7\u6dc6\u6076\u610f\u8f6f\u4ef6\u7684\u8eab\u4efd\u3002 2019 \u5e74\u4e4b\u524d\uff0cXProtect \u4ec5\u68c0\u67e5\u9694\u79bb\u6587\u4ef6\u3002\u82f9\u679c\u968f\u540e\u5ba3\u5e03\uff0c\u65e0\u8bba\u9694\u79bb\u6807\u5fd7\u5982\u4f55\uff0c\u6bcf\u4e2a\u5e94\u7528\u7a0b\u5e8f\u548c\u547d\u4ee4\u5de5\u5177\u7684\u53ef\u6267\u884c\u4ee3\u7801\u5728\u8fd0\u884c\u65f6\u90fd\u4f1a\u88ab\u68c0\u67e5\uff0c\u8fd9\u4ece Catalina \u5f00\u59cb\u5c31\u5e94\u7528\u4e86\u3002\u4ece Big Sur \u5f00\u59cb\uff0cXProtect \u8fd8\u5728\u540e\u671f\u542f\u52a8\u671f\u95f4\u8fd0\u884c\u521d\u59cb\u626b\u63cf\uff0c\u81f3\u5c11\u5728 Intel Mac \u4e0a\u662f\u8fd9\u6837\u3002 Apple \u8fd8\u6ca1\u6709\u900f\u9732\u5b83\u5f53\u65f6\u626b\u63cf\u4e86\u54ea\u4e9b\u6587\u4ef6\u3002\u8fd1\u5e74\u6765\uff0c\u968f\u7740\u6076\u610f\u8f6f\u4ef6\u7684\u6fc0\u589e\uff0cApple \u901a\u5e38\u6bcf\u4e24\u5468\u63a8\u9001\u4e00\u6b21 XProtect \u7684 Yara \u5b9a\u4e49\u66f4\u65b0\uff0c\u4ee5\u8ddf\u4e0a\u6076\u610f\u8f6f\u4ef6\u5f00\u53d1\u4eba\u5458\u4e3a\u9003\u907f\u6700\u65b0\u7b7e\u540d\u6240\u505a\u7684\u66f4\u6539\u3002\u867d\u7136 XProtect \u4f9d\u8d56 Yara \u5b9a\u4e49\u548c\u963b\u6b62\u5217\u8868\u6765\u68c0\u6d4b\u6613\u53d7\u653b\u51fb\u7684\u8f6f\u4ef6\u548c\u6076\u610f\u8f6f\u4ef6\uff0c\u4f46\u6076\u610f\u8f6f\u4ef6\u5220\u9664\u5de5\u5177 (MRT) \u5305\u542b\u4e00\u4e2a\u4f8b\u7a0b\u5e93\uff0c\u8fd9\u4e9b\u4f8b\u7a0b\u5c1d\u8bd5\u6839\u636e\u81ea\u5df1\u7684\u4e0d\u900f\u660e\u89c4\u5219\u5220\u9664\u6076\u610f\u548c\u4e0d\u9700\u8981\u7684\u8f6f\u4ef6\u3002\u5c3d\u7ba1 MRT \u770b\u8d77\u6765\u662f\u4e00\u4e2a\u5e94\u7528\u7a0b\u5e8f\uff0c\u4f46\u5b83\u5305\u542b\u4e00\u4e2a\u547d\u4ee4\u5de5\u5177\uff0c\u8be5\u5de5\u5177\u4ee5\u4e24\u79cd\u6a21\u5f0f\u8fd0\u884c\uff1a\u4f5c\u4e3a\u4ee3\u7406\u6216\u5b88\u62a4\u7a0b\u5e8f\u3002\u865a\u62df\u5e94\u7528\u7a0b\u5e8f\u4f4d\u4e8e /Library/Apple/System/Library/CoreServices/\uff0c\u5728 Catalina \u7cfb\u7edf\u5377\u4e0a /System/Library/CoreServices/ \u7684\u672a\u53d7\u4fdd\u62a4\u6570\u636e\u5377\u6dfb\u52a0\u4e2d\uff1b\u5728 Mojave \u53ca\u66f4\u65e9\u7248\u672c\u4e2d\uff0c\u8fd9\u53ea\u662f /System/Library/CoreServices/\u3002\u5b83\u662f\u7528 Swift \u7f16\u5199\u7684\uff0c\u901a\u5e38\u7531\u4e24\u4e2a launchd \u5c5e\u6027\u5217\u8868\u8fd0\u884c\u3002 MRT \u5728\u4e24\u79cd\u60c5\u51b5\u4e0b\u53ef\u9884\u89c1\u5730\u8fd0\u884c\uff1a\u5728\u542f\u52a8\u540e\u671f\u3001\u7528\u6237\u767b\u5f55\u540e\u548c\u66f4\u65b0\u540e\u7acb\u5373\u8fd0\u884c\u3002\u5b83\u4e5f\u53ef\u80fd\u5728 Gatekeeper \u68c0\u67e5\u671f\u95f4\u77ed\u6682\u8fd0\u884c\uff0c\u4f46\u6b64\u65f6\u4f1a\u663e\u793a\u4e3a\u65e0\u58f0\u3002\u4e0d\u5e78\u7684\u662f\uff0c\u81ea 2018 \u5e74\u4ee5\u6765\uff0cApple \u6df7\u6dc6\u4e86 MRT \u53ef\u4ee5\u5220\u9664\u7684\u6076\u610f\u8f6f\u4ef6\u7684\u540d\u79f0\u3002\u5728\u6b64\u4e4b\u524d\uff0c\u53ef\u4ee5\u641c\u7d22\u5176\u53ef\u6267\u884c\u6587\u4ef6\u7684\u5b57\u7b26\u4e32\u5185\u5bb9\u5e76\u53d1\u73b0\u5b83\u58f0\u79f0\u80fd\u591f\u201c\u4fee\u590d\u201d\u7684\u6076\u610f\u8f6f\u4ef6\u7684\u540d\u79f0\u3002\u81ea Gatekeeper \u65e9\u671f\u63a8\u51fa\u4ee5\u6765\uff0cMRT \u65e0\u7591\u5df2\u7ecf\u53d1\u751f\u4e86\u53d8\u5316\uff0c\u4f46\u4e0e XProtect \u76f8\u6bd4\uff0c\u5b83\u7684\u5916\u5f62\u8981\u4f4e\u5f97\u591a\uff0c\u56e0\u6b64\u66f4\u96be\u4ee5\u8c03\u67e5\u3002\u5c3d\u7ba1\u5b83\u5df2\u7ecf\u4e24\u6b21\u8131\u9896\u800c\u51fa\u3002\n2019 \u5e74 7 \u6708\u4e0a\u65ec\uff0cMRT \u88ab\u8981\u6c42\u5220\u9664\u5e94\u7528\u7a0b\u5e8f\u7684\u4e00\u90e8\u5206\uff0c\u8be5\u5e94\u7528\u7a0b\u5e8f\u4e0d\u662f\u6076\u610f\u8f6f\u4ef6\uff0c\u4f46\u5374\u7ed9\u7528\u6237\u7559\u4e0b\u4e86\u4e00\u4e2a\u4e25\u91cd\u7684\u6f0f\u6d1e\uff1aZoom\u3002\u65e7\u7248\u672c\u7684 Zoom \u5ba2\u6237\u7aef\u5e26\u6765\u7684\u6700\u5927\u95ee\u9898\u4e4b\u4e00\u662f\uff0c\u5b83\u5728\u4e00\u4e2a\u9690\u85cf\u6587\u4ef6\u5939\u4e2d\u5b89\u88c5\u4e86\u4e00\u4e2a Web \u670d\u52a1\u5668\uff0c\u5f53\u60a8\u5378\u8f7d\u5176\u5e94\u7528\u7a0b\u5e8f\u65f6\uff0c\u8be5\u670d\u52a1\u5668\u4ecd\u7136\u5904\u4e8e\u6d3b\u52a8\u72b6\u6001\u3002\u8be5 Web \u670d\u52a1\u5668\u80fd\u591f\u91cd\u65b0\u5b89\u88c5 Zoom \u5ba2\u6237\u7aef\uff0c\u5e76\u4e14\u53d1\u73b0\u5176\u81ea\u8eab\u4e5f\u5b58\u5728\u6f0f\u6d1e\u3002\u7136\u800c\uff0cZoom \u5bf9\u5176\u5ba2\u6237\u7aef\u8f6f\u4ef6\u4e2d\u7684\u5176\u4ed6\u95ee\u9898\u505a\u51fa\u4e86\u56de\u5e94\uff0c\u5220\u9664\u6b64 Web \u670d\u52a1\u5668\u7684\u6240\u6709\u526f\u672c\u81f3\u5173\u91cd\u8981\uff0c\u5c24\u5176\u662f\u5728\u7528\u6237\u53ef\u80fd\u5fd8\u8bb0\u4ed6\u4eec\u66fe\u7ecf\u5b89\u88c5\u8fc7 Zoom \u5ba2\u6237\u7aef\u7684 Mac \u4e0a\u3002\u8fd9\u4e0d\u662f Zoom \u80fd\u591f\u5355\u72ec\u5904\u7406\u7684\u4e8b\u60c5\uff1a\u5b83\u9700\u8981 Apple\uff0c\u5c31\u50cf Apple \u9700\u8981\u5728 Zoom \u7684\u7f51\u7edc\u670d\u52a1\u5668\u88ab\u5229\u7528\u4e4b\u524d\u5220\u9664\u5b83\u4e00\u6837\u3002\u89e3\u51b3\u65b9\u6848\u5728\u4e8e\u8f7b\u8f7b\u5730\u91cd\u65b0\u5229\u7528 MRT \u6765\u68c0\u6d4b\u548c\u7834\u574f Zoom \u9690\u85cf\u6587\u4ef6\u5939\u4e2d\u7684\u7f51\u7edc\u670d\u52a1\u5668\uff0c\u5c31\u50cf\u5b83\u5bf9\u6076\u610f\u8f6f\u4ef6\u6240\u505a\u7684\u90a3\u6837\u3002\u56e0\u6b64\uff0c\u9001\u8d27\u5de5\u5177\u5fc5\u987b\u662f\u4e00\u4e2a\u7d27\u6025\u7684\u201c\u65e0\u58f0\u201d\u5b89\u5168\u66f4\u65b0\uff0c\u5176\u4e2d\u5305\u542b Apple \u4e8e 2019 \u5e74 7 \u6708 10 \u65e5\u63a8\u51fa\u7684\u65b0\u7248 MRT\u3002MRT \u7684\u7b2c\u4e8c\u4e2a\u6210\u540d\u65f6\u523b\u5e76\u4e0d\u90a3\u4e48\u4ee4\u4eba\u5370\u8c61\u6df1\u523b\uff0c\u5f53\u65f6 1.68 \u7248\u4e8e 2020 \u5e74 10 \u6708 19 \u65e5\u53d1\u5e03\uff0c\u5bfc\u81f4\u8bb8\u591a Mac \u4e0a\u7684\u4e25\u91cd\u95ee\u9898\u3002\u5341\u4e00\u5929\u540e\uff0c\u82f9\u679c\u5728 1.69.3 \u7248\u672c\u4e2d\u9ed8\u9ed8\u5730\u89e3\u51b3\u4e86\u8fd9\u4e2a\u95ee\u9898\u3002\u5728 Mac \u5b89\u5168\u7684\u5b8f\u4f1f\u8ba1\u5212\u4e2d\uff0c\u516c\u8bc1\u662f\u6700\u8fd1\u51fa\u73b0\u7684\u3001\u6709\u4e89\u8bae\u7684\u5e76\u4e14\u53ef\u80fd\u5728\u5f88\u5927\u7a0b\u5ea6\u4e0a\u88ab\u8bef\u89e3\u4e86\u3002\u4eba\u4eec\u671f\u671b Apple \u7684\u6076\u610f\u8f6f\u4ef6\u68c0\u6d4b\u7cfb\u7edf\u5c06\u786e\u4fdd\u4efb\u4f55\u6076\u610f\u8f6f\u4ef6\u90fd\u4e0d\u4f1a\u88ab\u516c\u8bc1\uff0c\u9274\u4e8e\u6b64\u7c7b\u68c0\u6d4b\u65b9\u6848\u7684\u7ecf\u9a8c\uff0c\u8fd9\u662f\u4e0d\u73b0\u5b9e\u7684\u3002\u76f8\u53cd\uff0c\u516c\u8bc1\u5bf9\u6076\u610f\u8f6f\u4ef6\u5f00\u53d1\u4eba\u5458\u63d0\u51fa\u4e86\u4e00\u4e2a\u91cd\u5927\u6311\u6218\uff0c\u5373\u9664\u6700\u575a\u5b9a\u7684\u4eba\u4e4b\u5916\u7684\u6240\u6709\u4eba\uff0c\u4ed6\u4eec\u5728\u516c\u8bc1\u68c0\u67e5\u671f\u95f4\u53ef\u4ee5\u7528\u6765\u9003\u907f\u81ea\u52a8\u68c0\u6d4b\u7684\u7b56\u7565\u53d7\u5230\u9650\u5236\u3002\u66f4\u91cd\u8981\u7684\u662f\uff0c\u5b83\u4e3a Apple \u63d0\u4f9b\u4e86\u6240\u6709\u7ecf\u8fc7\u516c\u8bc1\u7684\u8f6f\u4ef6\u7684\u526f\u672c\uff0c\u8ba9\u8fd9\u53ea\u732b\u5728\u9f20\u6807\u65b9\u9762\u53d6\u5f97\u4e86\u9886\u5148\u3002\u5982\u679c\u7ecf\u8fc7\u516c\u8bc1\u7684\u5e94\u7528\u7a0b\u5e8f\u88ab\u8bc1\u660e\u662f\u6076\u610f\u7684\uff0c\u53ef\u4ee5\u7acb\u5373\u540a\u9500\u8bc1\u4e66\uff0c\u800c\u4e14 Apple \u7684\u5b89\u5168\u5de5\u7a0b\u5e08\u5df2\u7ecf\u62e5\u6709\u8be5\u5e94\u7528\u7a0b\u5e8f\u7684\u6837\u672c\u53ca\u5176 cdhashes\uff0c\u53ef\u4ee5\u8fc5\u901f\u5c06\u5176\u5408\u5e76\u5230 XProtect \u7684 Yara \u5b9a\u4e49\u548c MRT \u89c4\u5219\u4e2d\u3002\u5bf9\u67d0\u4e9b\u4eba\u800c\u8a00\uff0c\u66f4\u4ee4\u4eba\u62c5\u5fe7\u7684\u662f\uff0c\u76ee\u524d\u4ecd\u7136\u662f\u81ea\u613f\u7684\uff0c\u56e0\u4e3a Apple \u4e0d\u4f1a\u5bf9\u5f00\u53d1\u4eba\u5458\u5f3a\u5236\u6267\u884c\u516c\u8bc1\uff08\u9664\u975e\u5728\u7279\u5b9a\u60c5\u51b5\u4e0b\uff0c\u4f8b\u5982\u6269\u5c55\uff09\uff0c\u5e76\u4e14\u7528\u6237\u53ef\u4ee5\u9009\u62e9\u5ffd\u7565\u516c\u8bc1\uff0c\u8fd9\u5c06\u6210\u4e3a\u5f3a\u5236\u6027\u7684\u3002\u7136\u800c\uff0c\u201c\u6124\u4e16\u5ac9\u4fd7\u8005\u4f69\u91cc\u201d\u7684\u4ee3\u7801\u7b7e\u540d\u7528\u4e86 13 \u5e74\u65f6\u95f4\u624d\u6210\u4e3a Apple Silicon Mac \u7684\u5f3a\u5236\u6027\u8981\u6c42\u3002", "note_en": "For the first six years or so of Mac OS X, its system provided little if anything to detect, remove or combat malicious software. It seems that the first step taken was the voluntary introduction of code signatures in around 2007, a feature promoted by an Apple engineer known only as \u201cPerry the Cynic\u201d. These were part of the first Gatekeeper sub-system, which developed slowly until its formal introduction in 2012.\n At the same time, Apple\u2019s security engineers were busy developing the  App Sandbox, also introduced in 2007, but which didn\u2019t really come of age until it was made a requirement for App Store apps in June 2012, although some older apps have enjoyed grandfathered exemptions ever since.\n Gatekeeper brought its mechanism for distinguishing apps which had been downloaded from untrusted Internet sources, by the attachment of an extended attribute putting them in quarantine. Quarantined apps are then checked on their first launch by three distinct mechanisms:\n code signature checks, to ascertain signing identity and app integrity, by sub-systems such as AMFI (Apple Mobile File Integrity), known generically as  Gatekeeper;\n blocking software such as vulnerable versions of Java, and scanning for characteristics of known malware, by  XProtect;\n You can read a description of their presence and actions as of 2015 in  this article. To address certain forms of malware behaviour, additional measures have been adopted, such as app translocation, which in some circumstances launches a quarantined app from a special location.\n  Checks on code signatures fall into two phases: first the validity of stored cdhashes for different parts of an app, and second the validity of the certificate used to sign the app, to ensure that it hasn\u2019t been revoked. From Mojave in 2018, Apple has added another set of checks with the introduction of notarization.\n Until 2018-19, it appears that macOS stored information about certificate revocations locally, in the \u2018Gatekeeper\u2019 database at /private/var/db/gkopaque.bundle, which Apple updated every couple of weeks. Those Macs which have kept pace with the latest release of macOS stopped accessing that database in September 2019, with the release of macOS 10.15 Catalina. Apple hasn\u2019t released an update to it since 26 August 2019, and anyone with a fresh installation of Big Sur will have a truly ancient version installed. As I  pointed out here, that \u2018Gatekeeper\u2019 database is now effectively disused.\n As this checking system developed, well before High Sierra and probably before El Capitan too, Gatekeeper started to perform online OCSP queries to check the validity of code signing certificates, initially only for quarantined apps undergoing their first run. However, around July 2019 (macOS 10.14.6), these checks were extended to apps which had already cleared quarantine. By the release of Catalina in October 2019, certificates were being checked on loading all executable code even when no quarantine flag was set. As far as I can tell, those include systematic checks of both signature and cdhashes, which overlap with the added requirement of notarization.\n Although Apple had long maintained that users would remain able to run completely unsigned code in macOS, that too changed in November 2020, with the release of the first Apple Silicon Macs. All code running natively on ARM processors is required to be signed, although at present this is to provide cdhashes for transmission to Apple, and possible remote checks against malware values. No requirements are currently imposed on signing certificates used beyond those of existing Gatekeeper controls on the first launching of quarantined apps, which now include checks for notarization too.\n In November 2020, Apple\u2019s use of online OCSP checks came under fire, driving it to take immediate steps to protect privacy, and to state that certificate revocation checks will change in the following year to feature:\n \u201ca new preference for users to opt out of these security protections\u201d, which presumably means both hash lookup and certificate revocation checks.\n As far as I\u2019m aware, none of those three changes has yet been implemented, although there are only four months left before that year elapses.\n  XProtect is an on-demand service buried within macOS security services, with a more visible set of data files which are updated periodically by Apple. The XProtect.bundle containing data files is located in /Library/Apple/System/Library/CoreServices/, among the unprotected Data volume additions to /System/Library/CoreServices/ on the System volume in Catalina; in Mojave and earlier, that\u2019s simply /System/Library/CoreServices/\n Its purpose is to scan files and check them against lists of blocked software, and against Yara signatures of known malware. It has developed over the same period as Gatekeeper, although its emphasis has changed considerably over that period. Originally it was used to ensure that old versions of Java, Adobe Flash Player and similar products weren\u2019t used, checking them against lists in XProtect.meta.plist. For example, at the end of January 2013, Apple\u2019s security group put Java 1.6.0_37 on XProtect\u2019s blocked list, and Macs which still had that or older versions installed were unable to run Java. This function now appears largely disused, and those version numbers haven\u2019t been updated for at least a couple of years.\n XProtect also uses a set of Yara definitions to detect known malware. These definitions contain rules which are applied when scanning files; if a rule is satisfied, XProtect declares that item malicious, prevents it from being opened, and alerts the user. Until 2018, Apple identified malware signatures using generally accepted names; since then it has obfuscated malware identities with the use of code names for the malware it can detect.\n Before 2019, XProtect only checked quarantined files. Apple then announced that the executable code of every app and command tool would be checked whenever they are run, regardless of the quarantine flag, and this has applied from Catalina onwards. From Big Sur, XProtect also runs an initial scan during late startup, at least on Intel Macs. Apple hasn\u2019t revealed which files it scans then.\n In recent years, with the proliferation of malware, Apple has usually pushed updates to XProtect\u2019s Yara definitions every two weeks, in its efforts to keep pace with changes made by malware developers to evade the latest signatures.\n  While XProtect depends on Yara definitions and block lists to detect vulnerable software and malware, the Malware Removal Tool (MRT) contains a library of routines which try to remove malicious and unwanted software, based on its own opaque rules. Although MRT appears to be an app, it consists of a command tool which is run in two modes: as an agent, or a daemon. The dummy app is located in /Library/Apple/System/Library/CoreServices/, among the unprotected Data volume additions to /System/Library/CoreServices/ on the System volume in Catalina; in Mojave and earlier, that\u2019s simply /System/Library/CoreServices/. It\u2019s written in Swift, and is normally run by two  launchd property lists.\n MRT runs predictably on two occasions: in the late phase of startup, after the user has logged in, and immediately after it has been updated. It may also run briefly during Gatekeeper checks, but appears silent then. Unfortunately, since 2018, Apple has obfuscated the names of malware which MRT can remove. Prior to that, it was possible to search the string content of its executable and discover the names of malware which it claimed to be able to \u2018remediate\u2019.\n MRT has undoubtedly evolved since its introduction in the early days of Gatekeeper, but its much lower profile compared to that of XProtect makes it harder to investigate. It has though emerged twice into prominence.\n In early July 2019, MRT was called into play to remove part of an app which wasn\u2019t malware, but left users with a serious vulnerability: Zoom. One of the biggest problems posed by that old version of the Zoom client was that it installed, in a hidden folder, a web server which was left behind, still active, when you uninstalled its app. This web server was capable of reinstalling the Zoom client, and was found to have its own vulnerability as well. However Zoom responded to the other issues in its client software, it was vital that all copies of this web server were removed, particularly on Macs whose users may have forgotten that they had ever installed Zoom\u2019s client. This wasn\u2019t something that Zoom was able to handle alone: it needed Apple, just as Apple needed to remove Zoom\u2019s web server before it could be exploited.\n The solution lay in gently repurposing MRT to detect and destroy Zoom\u2019s web server in its hidden folder, much in the way that it does for malware. The delivery vehicle had therefore to be an urgent \u2018silent\u2019 security update containing the new version of MRT, which Apple pushed out on 10 July 2019.\n MRT\u2019s second moment of fame was less impressive, when version 1.68, released on 19 October 2020, caused serious problems on many Macs. Apple silently addressed that in version 1.69.3 eleven days later.\n  In the grand scheme of Mac security, notarization is very recent, controversial and probably largely misunderstood. Expectations were that Apple\u2019s malware detection system would ensure that no malware could ever be notarized, which is unrealistic given the experience of such detection schemes. Instead, notarization presents a significant challenge to malware developers to eliminate all but the most determined, who are then limited in the strategies they can use to evade automatic detection during notarization checks.\n More importantly, it provides Apple with a copy of all notarized software, giving the cat something of a head start on the mouse for once. In the event that a notarized app turns out to be malicious, certificate revocation can be immediate, and Apple\u2019s security engineers already have a sample of the app complete with its cdhashes, which can be rapidly incorporated into XProtect\u2019s Yara definitions and rules for MRT.\n To some the greater concern is that notarization, which currently remains voluntary in the sense that Apple doesn\u2019t enforce it on developers (except in specific cases such as extensions), and users can choose to ignore it, becomes mandatory. Yet it has taken thirteen years for \u201cPerry the Cynic\u2019s\u201d code signing to become mandatory on Apple Silicon Macs.", "posttime": "2021-07-28 03:50:55", "source_domain": "news.ycombinator.com", "source_name": "Hacker News", "tags": "\u8f6f\u4ef6,\u6076\u610f\u8f6f\u4ef6,history,apple", "title": "macOS \u6076\u610f\u8f6f\u4ef6\u4fdd\u62a4\u7b80\u53f2", "title_en": "A Short History of Malware Protection in macOS", "transed": 1, "url": "https://eclecticlight.co/2021/07/26/a-short-history-of-malware-protection-in-macos/", "via": "", "real_tags": ["\u8f6f\u4ef6", "\u6076\u610f\u8f6f\u4ef6", "history", "apple"]}, {"category": "", "categoryclass": "", "imagename": "64d955d1f07475ade86ce1833c2ca5f5.png", "infoid": 1070154, "ip": "", "isanchordig": 1, "ischecked": 1, "isdelete": 0, "isneo": 1, "mark": "", "name": "", "note": "\u7ea7\u522b 1 \u8fd9\u5bf9\u4e8e\u5236\u4f5c\u9700\u8981\u5e26\u6709\u6eda\u52a8\u6587\u672c\u7684\u975e\u5e38\u5c0f\u7684\u5c4f\u5e55\u7684\u6a21\u578b\u7684\u4eba\u53ef\u80fd\u5f88\u6709\u7528\u3002\u4f7f\u7528 QtPy \u677f\u548c SSD1306 128x64 \u50cf\u7d20 OLED\u3002\u5982\u679c\u4f60\u60f3\u9605\u8bfb Terry Bisson \u7684\u4f18\u79c0\u77ed\u7bc7\u5c0f\u8bf4\u7684\u5176\u4f59\u90e8\u5206\uff0c\u4f60\u53ef\u4ee5\u5728\u8fd9\u91cc\u627e\u5230\u5b83 - http://www.terrybisson.com/theyre-made-out-of-meat-2/ level 2 Nice\uff08\u5bf9\u4e8e\u67d0\u4e9b\u4e1c\u897f\u7531\u601d\u7ef4\u8089\u7f16\u7801\uff09\u3002\u4f60\u5e94\u8be5\u4ece\u8fde\u7eed\u884c\u7684\u5f00\u5934\u53bb\u6389\u524d\u5bfc\u7a7a\u683c\uff0c\u60f3\u3002", "note_en": "level 1  This might be useful for someone making a model that requires a really small screen with scrolling text. Uses a QtPy board and SSD1306 128x64 pixel OLED.\n  And if you want to read the rest of the excellent short story by Terry Bisson you can find it here -  http://www.terrybisson.com/theyre-made-out-of-meat-2/\n level 2  Nice (for something coded by thinking meat). You should strip leading spaces from the start of continuation lines, thought.", "posttime": "2021-07-28 03:46:12", "source_domain": "news.ycombinator.com", "source_name": "Hacker News", "tags": "\u4ee3\u7801,github,text,\u50cf\u7d20", "title": "Tiny Text Scroller \u2013 GitHub \u4e0a\u7684\u4ee3\u7801 \u2013 \u8bc4\u8bba\u4e2d\u7684\u94fe\u63a5", "title_en": "Tiny Text Scroller \u2013 Code on GitHub \u2013 Link in Comments", "transed": 1, "url": "https://www.reddit.com/r/FUI/comments/oshibn/tiny_text_scroller_code_on_github_link_in_comments/", "via": "", "real_tags": ["\u4ee3\u7801", "github", "text", "\u50cf\u7d20"]}, {"category": "", "categoryclass": "", "imagename": "657763ebe41908505f4b24b7cd522b65.png", "infoid": 1070153, "ip": "", "isanchordig": 1, "ischecked": 1, "isdelete": 0, "isneo": 1, "mark": "", "name": "", "note": "\u4e09\u5e74\u524d\uff0c\u6211\u4eec\u5728\u8bc4\u4f30 Qualcomm Centriq \u540e\u63a5\u53d7\u4e86 ARM \u751f\u6001\u7cfb\u7edf\u3002 Centriq \u53ca\u5176 Falkor \u5185\u6838\u663e\u7740\u964d\u4f4e\u4e86\u529f\u8017\uff0c\u540c\u65f6\u4fdd\u6301\u4e86\u4e0e\u5f53\u65f6\u4e3a\u6211\u4eec\u7684\u670d\u52a1\u5668\u7fa4\u63d0\u4f9b\u52a8\u529b\u7684\u5904\u7406\u5668\u76f8\u5f53\u7684\u6027\u80fd\u3002\u5f53\u6211\u4eec\u5b8c\u6210\u79fb\u690d\u6211\u4eec\u7684\u8f6f\u4ef6\u5806\u6808\u4ee5\u4e0e ARM \u517c\u5bb9\u65f6\uff0c\u9ad8\u901a\u51b3\u5b9a\u9000\u51fa\u670d\u52a1\u5668\u4e1a\u52a1\u3002\u4ece\u90a3\u65f6\u8d77\uff0c\u6211\u4eec\u4e00\u76f4\u5728\u7b49\u5f85\u53e6\u4e00\u6b3e\u670d\u52a1\u5668\u7ea7 ARM \u5904\u7406\u5668\uff0c\u5e0c\u671b\u80fd\u591f\u63d0\u9ad8\u6211\u4eec\u5168\u7403\u7f51\u7edc\u7684\u80fd\u6548\uff0c\u73b0\u5728\u6211\u4eec\u7684\u5168\u7403\u7f51\u7edc\u904d\u5e03 100 \u591a\u4e2a\u56fd\u5bb6/\u5730\u533a\u7684 200 \u591a\u4e2a\u57ce\u5e02\u3002 ARM \u63a8\u51fa\u4e86 Neoverse N1 \u5e73\u53f0\uff0c\u8fd9\u662f\u521b\u5efa\u9ad8\u80fd\u6548\u5904\u7406\u5668\u7684\u84dd\u56fe\uff0c\u6388\u6743\u673a\u6784\u53ef\u4ee5\u5b9a\u5236\u539f\u59cb\u8bbe\u8ba1\u4ee5\u6ee1\u8db3\u5176\u7279\u5b9a\u8981\u6c42\u3002 Ampere \u6388\u6743 Neoverse N1 \u5e73\u53f0\u521b\u5efa Ampere Altra\uff0c\u8fd9\u662f\u4e00\u79cd\u5904\u7406\u5668\uff0c\u5141\u8bb8\u62e5\u6709\u548c\u7ba1\u7406\u81ea\u5df1\u7684\u670d\u52a1\u5668\u7fa4\u7684\u516c\u53f8\uff08\u5982\u6211\u4eec\u81ea\u5df1\uff09\u5229\u7528\u4e0d\u65ad\u6269\u5927\u7684 ARM \u751f\u6001\u7cfb\u7edf\u3002\u6211\u4eec\u4e00\u76f4\u5728\u4e0e Ampere \u5408\u4f5c\uff0c\u4ee5\u786e\u5b9a Altra \u662f\u5426\u9002\u5408\u4e3a\u6211\u4eec\u7684\u7b2c\u4e00\u4ee3 ARM \u8fb9\u7f18\u670d\u52a1\u5668\u63d0\u4f9b\u52a8\u529b\u3002 AWS Graviton2 \u662f\u552f\u4e00\u53ef\u516c\u5f00\u8bbf\u95ee\u7684\u5176\u4ed6\u57fa\u4e8e Neoverse N1 \u7684\u5904\u7406\u5668\uff0c\u4f46\u53ea\u80fd\u901a\u8fc7\u4e9a\u9a6c\u900a\u7684\u4e91\u4ea7\u54c1\u7ec4\u5408\u63d0\u4f9b\u3002\u6211\u4eec\u60f3\u4e86\u89e3\u4e24\u8005\u4e4b\u95f4\u7684\u5dee\u5f02\uff0c\u56e0\u6b64\u6211\u4eec\u6bd4\u8f83\u4e86 Ampere \u7684\u5355\u63d2\u69fd\u670d\u52a1\u5668\uff0c\u540d\u4e3a Mt\u3002 Snow \u914d\u5907\u4e86 Ampere Altra Q80-30 \u4ee5\u5bf9\u6297 AWS Graviton2 \u7684 EC2 \u5b9e\u4f8b\u3002 Ampere Altra \u548c AWS Graviton2 \u90fd\u57fa\u4e8e ARM \u7684 Neoverse N1 \u5e73\u53f0\uff0c\u91c7\u7528 TSMC 7nm \u5de5\u827a\u5236\u9020\u3002 N1 \u53c2\u8003\u5185\u6838\u5177\u6709 11 \u7ea7\u4e71\u5e8f\u6267\u884c\u6d41\u6c34\u7ebf\u4ee5\u53ca\u4ee5\u4e0b ARM \u547d\u540d\u6cd5\u89c4\u8303\u3002\u4e00\u4e2a N1 \u5185\u6838\u5305\u542b 64KiB \u7684 L1 \u6307\u4ee4\u548c 64KiB \u7684 L1 \u6570\u636e\u7f13\u5b58\u4ee5\u53ca\u4e00\u4e2a\u4e13\u7528\u7684 L2 \u7f13\u5b58\uff0c\u6bcf\u4e2a\u5185\u6838\u6700\u591a\u53ef\u4ee5\u5b9e\u73b0 1MiB\u3002 L3 \u7f13\u5b58\u6216\u7cfb\u7edf\u7ea7\u7f13\u5b58\u53ef\u4ee5\u901a\u8fc7\u6240\u6709\u5185\u6838\u5171\u4eab\u7684\u9ad8\u8fbe 256MiB\uff08\u6bcf\u7247\u6700\u591a 4MiB\uff0c\u6700\u591a 64 \u4e2a\u7247\uff09\u6765\u5b9e\u73b0\u3002\u4e00\u5bf9 N1 \u6838\u5fc3\u53ef\u4ee5\u9009\u62e9\u901a\u8fc7\u7ec4\u4ef6\u805a\u5408\u5c42\u7ec4\u5408\u6210\u53cc\u6838\u5fc3\u914d\u7f6e\uff0c\u7136\u540e\u653e\u7f6e\u5728\u540d\u4e3a Coherent Mesh Network \u6216 CMN-600 \u7684\u7f51\u72b6\u4e92\u8fde\u4e2d\uff0c\u8be5\u7f51\u72b6\u4e92\u8fde\u652f\u6301\u591a\u8fbe 64 \u5bf9\u6838\u5fc3\uff0c\u603b\u5171 128 \u4e2a\u6838\u5fc3\u3002\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7\u68c0\u67e5cpuinfo\u4e2d\u7684CPU\u90e8\u5206\u6765\u9a8c\u8bc1\u8fd9\u4e24\u4e2a\u5904\u7406\u5668\u662f\u57fa\u4e8eNeoverse N1\u5e73\u53f0\u7684\uff0c\u5b83\u8fd4\u56de0xd0c\uff0c\u5373Neoverse N1\u7684\u6307\u5b9a\u90e8\u4ef6\u53f7\u3002\nAmpere \u5c06\u5404\u79cd\u529f\u80fd\u5411\u540e\u79fb\u690d\u5230 Ampere Altra \u4e2d\uff0c\u7279\u522b\u662f\u63a8\u6d4b\u6027\u4fa7\u4fe1\u9053\u653b\u51fb\u7f13\u89e3\u63aa\u65bd\uff0c\u5305\u62ec\u6765\u81ea ARMv8.5 \u6307\u4ee4\u96c6\u67b6\u6784\u7684 Meltdown \u548c Spectre\uff08\u53d8\u4f53 1 \u548c 2\uff09\uff0c\u5728\u5176 ISA (ARMv8.2 +)\u3002 Ampere Altra \u5305\u542b\u6bd4 AWS Graviton2 \u591a 25% \u7684\u7269\u7406\u5185\u6838\u548c\u9ad8 20% \u7684\u5de5\u4f5c\u9891\u7387\u3002\u7531\u4e8e Altra \u7684\u6838\u5fc3\u6570\u548c\u9891\u7387\u66f4\u9ad8\uff0c\u6211\u4eec\u5e94\u8be5\u671f\u671b Ampere Altra \u5728\u8ba1\u7b97\u5bc6\u96c6\u578b\u5de5\u4f5c\u8d1f\u8f7d\u4e2d\u7684\u6027\u80fd\u6bd4 AWS Graviton2 \u9ad8 50%\u3002 Ampere \u548c AWS \u90fd\u51b3\u5b9a\u4e3a\u6bcf\u4e2a\u5185\u6838\u5b9e\u65bd 1MiB \u7684 L2 \u7f13\u5b58\uff0c\u4f46\u53ea\u6709 32MiB \u7684 L3 \u6216\u7cfb\u7edf\u7ea7\u7f13\u5b58\uff0c\u5c3d\u7ba1 CMN-600 \u89c4\u8303\u5141\u8bb8\u9ad8\u8fbe 256MiB\u3002\u8fd9\u4f7f\u5f97 Ampere Altra \u7684 L3 \u6bcf\u6838\u7f13\u5b58\u6bd4\u7387\u4f4e\u4e8e AWS Graviton2\uff0c\u5e76\u5728\u5e94\u7528\u7a0b\u5e8f\u7684\u5de5\u4f5c\u96c6\u4e0d\u9002\u5408 L3 \u7f13\u5b58\u7684\u60c5\u51b5\u4e0b\u4f7f Altra \u5904\u4e8e\u6f5c\u5728\u52a3\u52bf\u3002\u6211\u4eec\u4f7f\u7528 Debian Buster \u5bf9\u4e24\u4e2a\u7cfb\u7edf\u8fdb\u884c\u4e86\u6620\u50cf\uff0c\u5e76\u4e0b\u8f7d\u4e86\u6211\u4eec\u7684\u5f00\u6e90\u57fa\u51c6\u6d4b\u8bd5\u5957\u4ef6 cf_benchmark\u3002\u8be5\u57fa\u51c6\u5957\u4ef6\u5728\u5927\u7ea6 15 \u5230 30 \u5206\u949f\u5185\u6267\u884c 49 \u79cd\u4e0d\u540c\u7684\u5de5\u4f5c\u8d1f\u8f7d\u3002\u6bcf\u4e2a\u5de5\u4f5c\u8d1f\u8f7d\u90fd\u4f7f\u7528\u4e00\u4e2a\u5e93\uff0c\u8be5\u5e93\u8981\u4e48\u5728\u6211\u4eec\u7684\u5806\u6808\u4e2d\u4f7f\u7528\u8fc7\uff0c\u8981\u4e48\u5728\u67d0\u4e2a\u65f6\u5019\u8003\u8651\u8fc7\u3002\u7531\u4e8e\u57fa\u51c6\u6d4b\u8bd5\u548c\u5de5\u4f5c\u8d1f\u8f7d\u8c03\u7528\u7684\u5e93\u7684\u6301\u7eed\u65f6\u95f4\u76f8\u5bf9\u8f83\u77ed\uff0c\u6211\u4eec\u5728\u4efb\u4f55\u65b0\u7cfb\u7edf\u4e0a\u8fd0\u884c cf_benchmark \u4f5c\u4e3a\u6211\u4eec\u7684\u5192\u70df\u6d4b\u8bd5\u4ee5\u8fdb\u884c\u8bc4\u4f30\u3002\u6211\u4eec\u5728\u8ba8\u8bba\u65b0\u786c\u4ef6\uff08\u4e3b\u8981\u662f\u5904\u7406\u5668\uff09\u65f6\u5411\u6211\u4eec\u7684\u6280\u672f\u5408\u4f5c\u4f19\u4f34\u63a8\u8350 cf_benchmark\uff0c\u4ee5\u786e\u4fdd\u8fd9\u4e9b\u5de5\u4f5c\u8d1f\u8f7d\u80fd\u591f\u6210\u529f\u7f16\u8bd1\u548c\u8fd0\u884c\u3002\u6211\u4eec\u591a\u6b21\u8fd0\u884c cf_benchmark \u5e76\u6ca1\u6709\u89c2\u5bdf\u5230\u663e\u7740\u7684\u8fd0\u884c\u95f4\u53d8\u5316\u3002\u4e0e\u884c\u4e1a\u6807\u51c6\u57fa\u51c6\u6d4b\u8bd5\u7c7b\u4f3c\uff0c\u6211\u4eec\u4f7f\u7528\u51e0\u4f55\u5e73\u5747\u503c\u8ba1\u7b97\u603b\u5206\uff0c\u4ee5\u63d0\u4f9b\u6bd4\u4f7f\u7528\u5404\u81ea\u5de5\u4f5c\u8d1f\u8f7d\u5b50\u96c6\u7684\u6240\u6709 49 \u4e2a\u5de5\u4f5c\u8d1f\u8f7d\u548c\u7c7b\u522b\u5206\u6570\u7684\u7b97\u672f\u5e73\u5747\u503c\u66f4\u4fdd\u5b88\u7684\u7ed3\u679c\u3002\u5728\u5355\u6838\u573a\u666f\u4e2d\uff0ccf_benchmark \u4f1a\u4ea7\u751f\u4e00\u4e2a\u5e94\u7528\u7ebf\u7a0b\uff0c\u5360\u7528\u4e00\u4e2a\u786c\u4ef6\u7ebf\u7a0b\u3002\u5728\u591a\u6838\u573a\u666f\u4e2d\uff0ccf_benchmark \u5c06\u6839\u636e\u9700\u8981\u4ea7\u751f\u5c3d\u53ef\u80fd\u591a\u7684\u5e94\u7528\u7a0b\u5e8f\u7ebf\u7a0b\uff0c\u76f4\u5230\u5904\u7406\u5668\u4e0a\u7684\u6240\u6709\u786c\u4ef6\u7ebf\u7a0b\u90fd\u88ab\u5360\u7528\u3002\u4e24\u4e2a\u5904\u7406\u5668\u90fd\u5b9e\u73b0\u4e86\u540c\u6b65\u591a\u7ebf\u7a0b\uff0c\u56e0\u6b64\u6bcf\u4e2a\u7269\u7406\u5185\u6838\u4e00\u6b21\u53ea\u80fd\u6267\u884c\u4e00\u4e2a\u786c\u4ef6\u7ebf\u7a0b\u3002\u9274\u4e8e Altra \u5728\u5de5\u4f5c\u9891\u7387\u548c\u6838\u5fc3\u6570\u91cf\u65b9\u9762\u7684\u4f18\u52bf\uff0cAmpere Altra \u5728\u5355\u6838\u548c\u591a\u6838\u6027\u80fd\u65b9\u9762\u5904\u4e8e\u9886\u5148\u5730\u4f4d\u3002\n\u5728\u5355\u6838\u6027\u80fd\u65b9\u9762\uff0cAmpere Altra \u6bd4 AWS Graviton2 \u9ad8\u51fa 16%\u3002\u4e24\u79cd\u5904\u7406\u5668\u4e4b\u95f4\u7684\u5de5\u4f5c\u9891\u7387\u5dee\u5f02\u4f7f Ampere Altra \u5728\u6211\u4eec\u8d85\u8fc7\u4e00\u534a\u7684\u5355\u6838\u5de5\u4f5c\u8d1f\u8f7d\u4e2d\u5177\u6709\u9ad8\u8fbe 20% \u7684\u6bd4\u4f8b\u4f18\u52bf\u3002\u5728\u591a\u6838\u6027\u80fd\u65b9\u9762\uff0cAmpere Altra \u7ee7\u7eed\u4fdd\u6301\u6bd4 AWS Graviton2 \u9ad8 31% \u7684\u4f18\u52bf\u3002\u6211\u4eec\u9884\u8ba1 Ampere Altra \u5c06\u83b7\u5f97 20% \u5230 50% \u7684\u7406\u8bba\u4f18\u52bf\uff0c\u56e0\u4e3a Altra \u7684\u5de5\u4f5c\u9891\u7387\u548c\u5185\u6838\u6570\u66f4\u9ad8\uff0c\u540c\u65f6\u8003\u8651\u5230\u4e0e\u589e\u52a0\u5185\u6838\u6570\u76f8\u5173\u7684\u56fa\u6709\u5f00\u9500\uff0c\u4e3b\u8981\u662f\u6269\u5c55\u7f51\u72b6\u7f51\u7edc\u3002\u6211\u4eec\u89c2\u5bdf\u5230\uff0c\u6211\u4eec\u7684\u5927\u90e8\u5206\u591a\u6838\u5de5\u4f5c\u8d1f\u8f7d\u90fd\u5728 20% \u5230 50% \u7684\u8303\u56f4\u5185\u3002\u5728 OpenSSL \u548c LuaJIT \u4e2d\uff0cAmpere Altra \u5728\u5355\u6838\u6027\u80fd\u65b9\u9762\u4e0e\u5176\u5de5\u4f5c\u9891\u7387\u6210\u6bd4\u4f8b\u5730\u6269\u5c55\uff0c\u5e76\u5728\u591a\u6838\u6027\u80fd\u65b9\u9762\u7ee7\u7eed\u968f\u7740\u5176\u5185\u6838\u6570\u91cf\u800c\u6a2a\u5411\u6269\u5c55\u3002 Ampere Altra \u5728\u7edd\u5927\u591a\u6570\u538b\u7f29\u548c Golang \u5de5\u4f5c\u8d1f\u8f7d\u4e2d\u4fdd\u6301\u9886\u5148\u5730\u4f4d\uff0c\u4f46 Brotli 9 \u7ea7\u538b\u7f29\u548c\u4e00\u4e9b\u65e0\u6cd5\u5728 100% CPU \u5229\u7528\u7387\u4e0b\u4fdd\u6301\u4e24\u4e2a\u5904\u7406\u5668\u5fd9\u788c\u7684 Golang \u591a\u6838\u5de5\u4f5c\u8d1f\u8f7d\u9664\u5916\u3002\u5982\u524d\u6240\u8ff0\uff0c\u6211\u4eec\u5728\u8bf8\u5982 TLS \u63e1\u624b\u5904\u7406\u4e4b\u7c7b\u7684\u5730\u65b9\u4f7f\u7528\u540d\u4e3a BoringSSL \u7684 OpenSSL \u5206\u652f\u3002\u6700\u521d\u7684 OpenSSL \u5e26\u6709\u4e00\u4e2a\u540d\u4e3a\u201c\u901f\u5ea6\u201d\u7684\u5185\u7f6e\u57fa\u51c6\u6d4b\u8bd5\uff0c\u7528\u4e8e\u6d4b\u91cf\u5355\u6838\u548c\u591a\u6838\u6027\u80fd\u3002\u6b64\u5904\u53d1\u73b0\u7684\u975e\u5bf9\u79f0\u548c\u5bf9\u79f0\u52a0\u5bc6\u5de5\u4f5c\u8d1f\u8f7d\u4f7f\u5904\u7406\u5668\u8fbe\u5230 100% \u7684 CPU \u5229\u7528\u7387\u3002 Altra \u7684\u6027\u80fd\u4e0e\u6211\u4eec\u5728\u6574\u4e2a\u7c7b\u522b\u4e2d\u7684\u9884\u671f\u4e00\u81f4\uff0c\u5728\u5355\u6838\u65b9\u9762\u4fdd\u6301\u4e86\u6bd4 AWS Graviton2 \u9ad8 20% \u7684\u4e00\u8d2f\u4f18\u52bf\uff0c\u5e76\u7ee7\u7eed\u968f\u7740\u5176\u6838\u5fc3\u6570\u91cf\u8fdb\u884c\u6269\u5c55\uff0c\u5e76\u4e14\u5728\u591a\u6838\u6027\u80fd\u65b9\u9762\u5e73\u5747\u63d0\u9ad8\u4e86 47%\u3002\u6211\u4eec\u901a\u5e38\u5c06 LuaJIT \u63cf\u8ff0\u4e3a\u5c06 Cloudflare \u7ed3\u5408\u5728\u4e00\u8d77\u7684\u7c98\u5408\u5242\u3002 LuaJIT \u5728 Cloudflare \u62e5\u6709\u60a0\u4e45\u7684\u5386\u53f2\uff0c\u539f\u56e0\u4e0e\u5b83\u5e7f\u6cdb\u7528\u4e8e\u89c6\u9891\u6e38\u620f\u884c\u4e1a\u7684\u539f\u56e0\u76f8\u540c\uff0c\u5728\u8fd9\u4e9b\u884c\u4e1a\u4e2d\uff0c\u6027\u80fd\u548c\u54cd\u5e94\u80fd\u529b\u662f\u4e0d\u5bb9\u5546\u91cf\u7684\u8981\u6c42\u3002\u5c3d\u7ba1\u6211\u4eec\u4e00\u76f4\u5728\u4ece LuaJIT \u8fc7\u6e21\u5230 Rust\uff0c\u4f46\u6211\u4eec\u6b22\u8fce\u5728 Ampere Altra \u4e2d\u5b9e\u73b0\u7684\u6307\u4ee4\u7f13\u5b58\u4e00\u81f4\u6027\u3002\u6307\u4ee4\u7f13\u5b58\u4e00\u81f4\u6027\u65e8\u5728\u89e3\u51b3\u4e0e LuaJIT \u76f8\u5173\u7684\u7f3a\u70b9\uff0c\u4f8b\u5982\u5176\u81ea\u4fee\u6539\u5c5e\u6027\uff0c\u5176\u4e2d\u9700\u8981\u63d0\u53d6\u7684\u4e0b\u4e00\u6761\u6307\u4ee4\u4e0d\u5728\u6307\u4ee4\u7f13\u5b58\u4e2d\uff0c\u800c\u662f\u5728\u6570\u636e\u7f13\u5b58\u4e2d\u3002\u542f\u7528\u6b64\u529f\u80fd\u540e\uff0c\u6307\u4ee4\u7f13\u5b58\u4f1a\u53d8\u5f97\u4e00\u81f4\u6216\u4e86\u89e3\u6570\u636e\u7f13\u5b58\u4e2d\u6240\u505a\u7684\u66f4\u6539\u3002 L2 \u7f13\u5b58\u5305\u542b L1 \u6307\u4ee4\u7f13\u5b58\uff0c\u8fd9\u610f\u5473\u7740\u5728 L1 \u6307\u4ee4\u7f13\u5b58\u4e2d\u627e\u5230\u7684\u4efb\u4f55\u7f13\u5b58\u884c\u4e5f\u5e94\u8be5\u5b58\u5728\u4e8e L2 \u7f13\u5b58\u4e2d\u3002\u6b64\u5916\uff0cL2 \u7f13\u5b58\u62e6\u622a\u5bf9\u4efb\u4f55 L2 \u7f13\u5b58\u884c\u8fdb\u884c\u7684\u4efb\u4f55\u65e0\u6548\u6216\u5b58\u50a8\uff0c\u5e76\u5c06\u8fd9\u4e9b\u66f4\u6539\u4f20\u64ad\u5230 L1 \u6307\u4ee4\u7f13\u5b58\u3002 Ampere Altra \u5728\u5355\u6838\u6027\u80fd\u65b9\u9762\u8868\u73b0\u826f\u597d\uff0c\u9664\u4e86 fasta \u4e24\u4e2a\u5904\u7406\u5668\u90fd\u505c\u5728\u7ba1\u9053\u524d\u7aef\u3002\u5728 fasta \u7684\u591a\u6838\u7248\u672c\u4e2d\uff0c\u7531\u4e8e Ampere \u5b9e\u73b0\u4e86\u6307\u4ee4\u7f13\u5b58\u4e00\u81f4\u6027\uff0cAltra \u5e76\u6ca1\u6709\u5728\u524d\u7aef\u82b1\u8d39\u90a3\u4e48\u591a\u5468\u671f\u3002\u6240\u6709\u5176\u4ed6\u5de5\u4f5c\u8d1f\u8f7d\u5728\u591a\u6838\u5de5\u4f5c\u8d1f\u8f7d\u4e2d\u7ee7\u7eed\u6269\u5c55\uff0c\u5176\u4e2d\u4e8c\u53c9\u6811\u5360 73%\u3002\u7531\u4e8e\u591a\u6838\u53d8\u4f53\u672a\u80fd\u5728\u4e24\u53f0\u670d\u52a1\u5668\u4e0a\u8fd0\u884c\uff0c\u56e0\u6b64\u7701\u7565\u4e86 Spectral\u3002\nBrotli \u548c Gzip \u662f\u6211\u4eec\u5728 Cloudflare \u4f7f\u7528\u7684\u4e24\u79cd\u4e3b\u8981\u538b\u7f29\u7c7b\u578b\u3002\u6211\u4eec\u53d1\u73b0\u9ad8\u6548\u538b\u7f29\u7b97\u6cd5\u7684\u4ef7\u503c\uff0c\u56e0\u4e3a\u5b83\u5e2e\u52a9\u6211\u4eec\u5728\u66f4\u5feb\u7684\u5904\u7406\u5668\u4e0a\u82b1\u8d39\u66f4\u591a\u8d44\u6e90\u6216\u62e5\u6709\u66f4\u5927\u7684\u5b58\u50a8\u5bb9\u91cf\u4e4b\u95f4\u627e\u5230\u5e73\u8861\uff0c\u9664\u4e86\u80fd\u591f\u66f4\u5feb\u5730\u4f20\u8f93\u5185\u5bb9\u3002\u9664\u4e86 Brotli 9 \u7ea7\u548c Gzip 4 \u7ea7\u591a\u6838\u6027\u80fd\u5916\uff0cAmpere Altra \u5728\u4e24\u79cd\u538b\u7f29\u7c7b\u578b\u4e0a\u90fd\u8868\u73b0\u826f\u597d\u3002\u5728\u6574\u4e2a\u57fa\u51c6\u6d4b\u8bd5\u5957\u4ef6\u4e2d\uff0cBrotli 9 \u7ea7\u5bfc\u81f4 Ampere Altra \u548c AWS Graviton2 \u4e4b\u95f4\u7684\u6700\u5927\u589e\u91cf\u3002\u867d\u7136\u6211\u4eec\u5728\u6267\u884c\u52a8\u6001\u538b\u7f29\u65f6\u4e0d\u4f7f\u7528 Brotli 7 \u7ea7\u53ca\u66f4\u9ad8\u7ea7\u522b\uff0c\u4f46\u6211\u4eec\u51b3\u5b9a\u8fdb\u4e00\u6b65\u8c03\u67e5\u3002\u6839\u636e\u5386\u53f2\u89c2\u5bdf\uff0c\u6211\u4eec\u6ce8\u610f\u5230\u5927\u591a\u6570\u5904\u7406\u5668\u5728\u7ea7\u522b 9 \u65f6\u5f80\u5f80\u4f1a\u51fa\u73b0\u663e\u7740\u7684\u6027\u80fd\u4e0b\u964d\u3002\u538b\u7f29\u5de5\u4f5c\u8d1f\u8f7d\u901a\u5e38\u7531\u66f4\u9ad8\u7684\u5206\u652f\u6307\u4ee4\u7ec4\u5408\u7ec4\u6210\uff0c\u6211\u4eec\u53d1\u73b0\u5927\u7ea6 15% \u5230 20% \u7684\u52a8\u6001\u6307\u4ee4\u662f\u5206\u652f\u6307\u4ee4\u3002\u76f4\u89c2\u5730\uff0c\u6211\u4eec\u9996\u5148\u67e5\u770b\u4e86\u9519\u8bef\u9884\u6d4b\u7387\uff0c\u56e0\u4e3a\u9ad8\u9519\u8bef\u7387\u4f1a\u8fc5\u901f\u589e\u52a0\u60e9\u7f5a\u5468\u671f\u3002\u7136\u800c\uff0c\u4ee4\u6211\u4eec\u60ca\u8bb6\u7684\u662f\uff0c\u6211\u4eec\u53d1\u73b0\u7b2c 9 \u7ea7\u7684\u9519\u8bef\u9884\u6d4b\u7387\u975e\u5e38\u4f4e\u3002\u901a\u8fc7\u8fdb\u4e00\u6b65\u5206\u6790\u6211\u4eec\u7684\u6570\u636e\u96c6\uff0c\u6211\u4eec\u53d1\u73b0\u5e38\u89c1\u7684\u6839\u672c\u539f\u56e0\u4f3c\u4e4e\u662f\u7ea7\u522b 9 \u53d1\u751f\u7684\u5927\u91cf\u9875\u9762\u9519\u8bef\u3002 Ampere \u5df2\u7ecf\u8bc1\u660e\uff0c\u901a\u8fc7\u5c06\u9875\u9762\u5927\u5c0f\u4ece 4K \u589e\u52a0\u5230 64K \u5b57\u8282\uff0c\u6211\u4eec\u53ef\u4ee5\u7f13\u89e3\u74f6\u9888\u5e76\u5e26\u6765 Ampere Altra \u4e0e AWS Graviton2 \u6301\u5e73\u3002\u968f\u7740\u6211\u4eec\u7ee7\u7eed\u8bc4\u4f30 Altra\uff0c\u6211\u4eec\u8ba1\u5212\u5728\u672a\u6765\u5c1d\u8bd5\u5927\u9875\u9762\u5c3a\u5bf8\u3002 LuaJIT\u3001Rust\u3001C++ \u548c Go \u662f\u6211\u4eec\u7684\u4e00\u4e9b\u4e3b\u8981\u8bed\u8a00\uff1b\u6b64\u5904\u53d1\u73b0\u7684 Golang \u5de5\u4f5c\u8d1f\u8f7d\u5305\u62ec\u52a0\u5bc6\u3001\u538b\u7f29\u3001\u6b63\u5219\u8868\u8fbe\u5f0f\u548c\u5b57\u7b26\u4e32\u64cd\u4f5c\u3002\u5728\u7edd\u5927\u591a\u6570\u5355\u6838\u6027\u80fd\u4e2d\uff0cAmpere Altra \u4e0e AWS Graviton2 \u7684\u8fd0\u884c\u9891\u7387\u6210\u6b63\u6bd4\u3002\u5728\u591a\u6838\u6027\u80fd\u65b9\u9762\uff0c\u65e0\u6cd5\u4f7f\u5904\u7406\u5668\u8fbe\u5230 100% CPU \u5229\u7528\u7387\u7684\u5de5\u4f5c\u8d1f\u8f7d\u4e0d\u4f1a\u4e0e\u4e24\u4e2a\u5904\u7406\u5668\u5404\u81ea\u7684\u5de5\u4f5c\u9891\u7387\u548c\u5185\u6838\u6570\u91cf\u6210\u6bd4\u4f8b\u5730\u6269\u5c55\u3002\u6211\u4eec\u65e0\u6cd5\u5728 AWS Graviton2 \u4e0a\u6536\u96c6\u4efb\u4f55\u9065\u6d4b\u6570\u636e\u3002\u529f\u7387\u672c\u6765\u662f AWS Graviton2 \u4e0a\u4e00\u4e2a\u6709\u8da3\u7684\u6570\u636e\u70b9\uff0c\u4f46 EC2 \u5b9e\u4f8b\u6ca1\u6709\u516c\u5f00\u9891\u7387\u6216\u529f\u7387\u4f20\u611f\u5668\u3002\u6211\u4eec\u6d4b\u8bd5\u7684\u5b89\u57f9\u578b\u53f7\u662f Altra Q80-30\uff0c\u989d\u5b9a\u5de5\u4f5c\u9891\u7387\u4e3a 3.0GHz\uff0c\u70ed\u8bbe\u8ba1\u529f\u7387 (TDP) \u4e3a 210W\u3002 Ampere Altra \u5728\u6574\u4e2a cf_benchmark \u4e2d\u4fdd\u6301\u6301\u7eed\u7684\u5de5\u4f5c\u9891\u7387\uff0c\u800c Altra \u7684\u52a8\u6001\u7535\u538b\u548c\u9891\u7387\u7f29\u653e (DVFS) \u673a\u5236\u5076\u5c14\u4f1a\u6839\u636e\u9700\u8981\u5728\u5de5\u4f5c\u8d1f\u8f7d\u4e4b\u95f4\u964d\u4f4e\u5176\u5de5\u4f5c\u9891\u7387\u4ee5\u964d\u4f4e\u529f\u8017\u3002\u5c01\u88c5\u529f\u7387\u56e0\u5de5\u4f5c\u8d1f\u8f7d\u800c\u5f02\uff0c\u4f46 Altra \u4ece\u4e0d\u6d88\u8017\u63a5\u8fd1\u5176\u989d\u5b9a TDP \u7684\u4efb\u4f55\u5730\u65b9\uff0c\u800c\u9ed8\u8ba4\u98ce\u6247\u66f2\u7ebf\u5c06\u6e29\u5ea6\u4fdd\u6301\u5728 70C \u4ee5\u4e0b\u3002\u5728\u7cfb\u7edf\u5c42\u9762\uff0c\u901a\u8fc7IPMI\u7b80\u5355\u67e5\u8be2\u57fa\u677f\u7ba1\u7406\u63a7\u5236\u5668\uff0c\u6211\u4eec\u89c2\u5bdf\u5230\u5b89\u57f9\u670d\u52a1\u5668\u6d88\u8017\u4e0d\u8d85\u8fc7300W\u3002\u66f4\u8282\u80fd\u7684\u670d\u52a1\u5668\u76f4\u63a5\u8f6c\u5316\u4e3a\u5728\u6211\u4eec\u5982\u4f55\u586b\u5145\u673a\u67b6\u65b9\u9762\u5177\u6709\u66f4\u5927\u7684\u7075\u6d3b\u6027\uff0c\u6211\u4eec\u5e0c\u671b\u8fd9\u79cd\u8d8b\u52bf\u5c06\u5728\u751f\u4ea7\u4e2d\u7ee7\u7eed\u4e0b\u53bb\u3002\n\u5728\u6211\u4eec\u81ea\u4e0a\u800c\u4e0b\u7684\u8bc4\u4f30\u4e2d\uff0cAmpere Altra \u5728\u6574\u4e2a\u57fa\u51c6\u6d4b\u8bd5\u5957\u4ef6\u4e2d\u7684\u8868\u73b0\u57fa\u672c\u4e0a\u7b26\u5408\u6211\u4eec\u7684\u9884\u671f\u3002\u6211\u4eec\u5b9a\u671f\u89c2\u5bdf\u5230\u4e24\u4e2a Neoverse N1 \u5904\u7406\u5668\u5728\u5404\u81ea\u7684\u5de5\u4f5c\u9891\u7387\u548c\u6838\u5fc3\u6570\u4e0a\u7684\u8868\u73b0\uff0cAmpere Altra \u5728\u8fd9\u4e9b\u5173\u952e\u9886\u57df\u4e2d\u8d85\u8fc7 AWS Graviton2\u3002\u7531\u4e8e\u66f4\u9ad8\u7684\u5de5\u4f5c\u9891\u7387\uff0cAmpere Altra \u4ea7\u751f\u4e86\u66f4\u597d\u7684\u5355\u6838\u6027\u80fd\uff0c\u5e76\u901a\u8fc7\u4e0e AWS Graviton2 \u76f8\u6bd4\u5728\u591a\u6838\u6027\u80fd\u4e2d\u4f7f\u7528\u66f4\u9ad8\u7684\u6838\u6570\u8fdb\u884c\u6a2a\u5411\u6269\u5c55\uff0c\u8fdb\u4e00\u6b65\u6269\u5927\u4e86\u5176\u5f71\u54cd\u3002\u6211\u4eec\u8fd8\u53d1\u73b0\u6211\u4eec\u7684 Ampere \u8bc4\u4f30\u670d\u52a1\u5668\u6d88\u8017\u7684\u529f\u7387\u4f4e\u4e8e\u6211\u4eec\u7684\u9884\u671f\uff0c\u5e76\u5e0c\u671b\u8fd9\u79cd\u8d8b\u52bf\u5728\u751f\u4ea7\u4e2d\u7ee7\u7eed\u4e0b\u53bb\u3002\u5728\u6574\u4e2a\u521d\u59cb\u6d4b\u8bd5\u96c6\u548c\u66f4\u591a\u5730\u4e86\u89e3\u5e95\u5c42\u67b6\u6784\u7684\u8fc7\u7a0b\u4e2d\uff0c\u4e0e\u5f53\u4ee3 x86 \u5bf9\u5e94\u7269\u76f8\u6bd4\uff0c\u6211\u4eec\u53d1\u73b0\u4e86\u8bb8\u591a\u6709\u8da3\u7684\u90e8\u5206\uff0c\u4f8b\u5982\u6ca1\u6709\u540c\u6b65\u591a\u7ebf\u7a0b\u6216\u52a8\u6001\u9891\u7387\u63d0\u5347\u3002\u6211\u4eec\u671f\u5f85\u770b\u5230\u54ea\u79cd\u8bbe\u8ba1\u7406\u5ff5\u5bf9\u4e91\u66f4\u6709\u610f\u4e49\u3002\u6211\u4eec\u76ee\u524d\u6b63\u5728\u6839\u636e\u6211\u4eec\u7684\u670d\u52a1\u5668\u7fa4\u8bc4\u4f30 Altra \u7684\u6027\u80fd\uff0c\u5e76\u4e0e Ampere \u5408\u4f5c\u5b9a\u4e49\u57fa\u4e8e Altra \u7684\u53ef\u5927\u89c4\u6a21\u90e8\u7f72\u7684 ARM \u8fb9\u7f18\u670d\u52a1\u5668\u3002 Ampere ARM \u786c\u4ef6\u6570\u636e\u4e2d\u5fc3 Cloudflare Network", "note_en": "Over three years ago, we embraced the ARM ecosystem after  evaluating the Qualcomm Centriq. The Centriq and its Falkor cores delivered a significant reduction in power consumption while maintaining a comparable performance against the processor that was powering our server fleet at the time. By the time we completed  porting our software stack to be compatible with ARM, Qualcomm decided to  exit the server business. Since then, we have been waiting for another server-grade ARM processor with hopes to improve our power efficiencies across our  global network, which now spans more than 200 cities in over 100 countries.\n ARM has introduced the Neoverse N1 platform, the blueprint for creating power-efficient processors licensed to institutions that can customize the original design to meet their specific requirements. Ampere licensed the Neoverse N1 platform to create the Ampere Altra, a processor that allows companies that own and manage their own fleet of servers, like ourselves, to take advantage of the expanding ARM ecosystem. We have been working with Ampere to determine whether Altra is the right processor to power our first generation of ARM edge servers.\n The AWS Graviton2 is the only other Neoverse N1-based processor publicly accessible, but only made available through Amazon\u2019s cloud product portfolio. We wanted to understand the differences between the two, so we compared Ampere\u2019s single-socket server, named Mt. Snow, equipped with the Ampere Altra Q80-30 against an EC2 instance of the AWS Graviton2.\n   The Ampere Altra and AWS Graviton2 alike are based on the Neoverse N1 platform by ARM, manufactured on the TSMC 7nm process. The N1 reference core features an 11-stage out-of-order execution pipeline along with the  following specifications in ARM nomenclature.\n  A  N1 core contains 64KiB of L1 instruction and 64KiB of L1 data caches and a dedicated L2 cache that can be implemented with up to 1MiB per core. The L3 cache or the System Level Cache can be implemented with up to 256MiB (up to 4MiB per slice, up to 64 slices) shared by all cores.\n  A pair of N1 cores can optionally be combined into a dual-core configuration through the Component Aggregation Layer, then placed inside the mesh interconnects named the Coherent Mesh Network or  CMN-600 that supports up to 64 pairs of cores, totaling 128 cores.\n      We can verify that the two processors are based on the Neoverse N1 platform by checking  CPU part inside  cpuinfo, which returns  0xd0c, the  designated part number for the Neoverse N1.\n   Ampere backported various features into the Ampere Altra notably,  speculative side-channel attack mitigations that include Meltdown and Spectre (variants 1 and 2) from the ARMv8.5 instruction set architecture, giving Altra the \u201c+\u201d designation in their ISA (ARMv8.2+).\n The Ampere Altra consists of 25% more physical cores and 20% higher operating frequency than the AWS Graviton2. Because of Altra\u2019s higher core-count and frequency, we should expect the Ampere Altra to perform up to 50% better than the AWS Graviton2 in compute-bound workloads.\n Both Ampere and AWS decided to implement 1MiB of L2 cache per core, but only 32MiB of L3 or System Level Cache, although the CMN-600 specification allows up to 256MiB. This leaves the Ampere Altra with a lower L3 cache-per-core ratio than the AWS Graviton2 and places Altra at a potential disadvantage in situations where the  application\u2019s working set does not fit within the L3 cache.\n  We imaged both systems with Debian Buster and downloaded our open-source benchmark suite,  cf_benchmark. This benchmark suite executes 49 different workloads over approximately 15 to 30 minutes. Each workload utilizes a library that has either been used in our stack or considered at one point or another. Due to the relatively short duration of the benchmark and the libraries called by the workloads, we run cf_benchmark as our smoke test on any new system brought in for evaluation. We recommend cf_benchmark to our technology partners when we discuss new hardware, primarily processors, to ensure these workloads can compile and run successfully.\n We ran cf_benchmark multiple times and observed no significant run-to-run variations. Similar to industry standard benchmarks, we calculated the overall score using geometric mean to provide a more conservative result than arithmetic mean across all 49 workloads and category scores using their respective subset of workloads.\n In single-core scenarios, cf_benchmark will spawn a single application thread, occupying a single hardware thread. In multi-core scenarios, cf_benchmark will spawn as many application threads as needed until all hardware threads on the processor are occupied. Neither processors implemented  simultaneous multithreading, so each physical core can only execute one hardware thread at a time.\n  Given Altra\u2019s advantage in both operating frequency and sheer core-count, the Ampere Altra took the lead across single and multi-core performance.\n In single-core performance, the Ampere Altra outperformed the AWS Graviton2 by 16%. The differences in operating frequencies between the two processors gave the Ampere Altra a proportional advantage of up to 20% in more than half of our single-core workloads.\n In multi-core performance, the Ampere Altra continued to maintain its edge over the AWS Graviton2 by 31%. We expected the Ampere Altra to attain a theoretical advantage between 20% to 50% due to Altra\u2019s higher operating frequency and core count while taking inherent overheads associated with increasing core count into consideration, primarily scaling out the mesh network. We observed that the majority of our multi-core workloads fell within this 20% to 50% range.\n   In OpenSSL and LuaJIT, the Ampere Altra scaled proportionally with its operating frequency in single-core performance and continued to scale out with its core count in multi-core performance. The Ampere Altra maintained its lead in the vast majority of compression and Golang workloads with the exception of Brotli level 9 compression and some Golang multi-core workloads that were not able to keep the two processors busy at 100% CPU utilization.\n    As described  previously, we use a fork of OpenSSL, named BoringSSL, in places such as for  TLS handshake handling. The original OpenSSL comes with a built-in benchmark called `speed` that measures single and multi-core performance. The asymmetric and  symmetric crypto workloads found here saturated the processors at 100% CPU utilization. Altra\u2019s performance aligned with our expectations throughout this entire category by maintaining a consistent 20% advantage over the AWS Graviton2 in single-core and continued to scale with its core count and performed, on average, 47% better in multi-core performance.\n        We commonly describe LuaJIT as the  glue that holds Cloudflare together. LuaJIT has a  long history here at Cloudflare for the same reason it is widely used in the videogame industry, where performance and responsiveness are non-negotiable requirements.\n Although we have been transitioning from LuaJIT  to Rust, we welcomed the  instruction cache coherency implemented into the Ampere Altra. The instruction cache coherency aims to address the  drawbacks associated with LuaJIT, such as its self-modifying properties, where the next instruction that needs to be fetched is not in the instruction cache, but rather the data cache. With this feature enabled, the instruction cache becomes coherent or made aware of changes made in the data cache. The L2 cache becomes inclusive of the L1 instruction cache, meaning any cache lines found in the L1 instruction cache should also be present in the L2 cache. Furthermore, L2 cache intercepts any invalidations or stores made to any of the L2\u2019s cache lines and propagates those changes up to the L1 instruction cache.\n The Ampere Altra performed well within single-core performance except for fasta where both processors stalled at the front-end of the pipeline. In the multi-core version of fasta, Altra did not spend as many cycles stalled in the front-end likely due to Ampere&#39;s implementation of the instruction cache coherency. All other workloads continued to scale in multi-core workloads with binary trees coming in at 73%. Spectral was omitted since the multi-core variant failed to run on both servers.\n    Brotli and Gzip are the two primary types of compression we use at Cloudflare. We find value in highly efficient compression algorithms as it helps us find a balance between spending more resources on a faster processor or having a larger storage capacity in addition to being able to transfer contents faster. The Ampere Altra performed well on both compression types with the exception of Brotli level 9 and Gzip level 4 multi-core performance.\n    Out of the entire benchmark suite, Brotli level 9 caused the largest delta between the Ampere Altra and the AWS Graviton2. Although we do not use  Brotli level 7 and above when performing dynamic compression, we decided to investigate further.\n From historical observations, we noticed that most processors tend to experience significant performance degradation at level 9. Compression workloads generally consist of a higher branch instructions mix, and we found approximately 15% to 20% of the dynamic instructions to be branch instructions. Intuitively, we first looked at the misprediction rate since a high miss rate will quickly add up penalty cycles. However, to our surprise, we found the misprediction rate at level 9 very low.\n  By analyzing our dataset further, we found the common underlying cause appeared to be the high number of page faults incurred at level 9. Ampere has demonstrated that by increasing the page size from 4K to 64K bytes, we can alleviate the bottleneck and bring the Ampere Altra at parity with the AWS Graviton2. We plan to experiment with large page sizes in the future as we continue to evaluate Altra.\n      LuaJIT, Rust, C++, and Go are some of our  primary languages; the Golang workloads found here include  cryptography, compression, regular expression, and string manipulation. The Ampere Altra performed proportionally to its operating frequency against the AWS Graviton2 in the vast majority of single-core performance. In multi-core performance, the workloads that could not saturate the processors to 100% CPU utilization did not scale proportionally to the two processor\u2019s respective operating frequencies and core count.\n              We were unable to collect any telemetry on the AWS Graviton2. Power would have been an interesting data point on the AWS Graviton2, but the EC2 instance did not expose either frequency or power sensors. The Ampere model we tested was the Altra Q80-30, rated with an operating frequency of 3.0GHz and a thermal design power (TDP) of 210W.\n The Ampere Altra maintained a sustained operating frequency throughout cf_benchmark while Altra\u2019s dynamic voltage and frequency scaling (DVFS) mechanism occasionally lowered its operating frequency in between workloads as needed to reduce power consumption. Package power varied depending on the workload, but Altra never consumed anywhere near its rated TDP while the default fan curve maintained the temperature below 70C. At the system level, by simply querying the baseboard management controller over  IPMI, we observed that the Ampere server consumed no more than 300W. More power-efficient servers directly translates to more  flexibility over how we can populate our racks and we hope this trend will continue in production.\n    In our top-down evaluation, the Ampere Altra largely performed as we had expected throughout our benchmarking suite. We regularly observed the two Neoverse N1 processors perform to their respective operating frequency and core count, with the Ampere Altra coming on top in these key areas over the AWS Graviton2. The Ampere Altra yielded a better single-core performance due to higher operating frequency and multiplied its impact even further by scaling out with a higher core count in multi-core performance against the AWS Graviton2. We also found our Ampere evaluation server consuming less power than we had anticipated and hope this trend will continue in production.\n Throughout this initial set of testing and learning more about the underlying architecture, there were many parts we found interesting when compared against contemporary x86 counterparts such as the absence of simultaneous multithreading or dynamic frequency boost. We look forward to seeing which design philosophy makes more sense for the cloud. We are currently assessing Altra\u2019s performance against our fleet of servers and collaborating with Ampere to define an ARM edge server based on Altra that could be deployed at scale.\n  Ampere  ARM  Hardware  Data Center  Cloudflare Network", "posttime": "2021-07-28 03:45:35", "source_domain": "news.ycombinator.com", "source_name": "Hacker News", "tags": "ampere,race,altra", "title": "\u519b\u5907\u7ade\u8d5b\uff1aAmpere Altra \u6311\u6218 AWS Graviton2", "title_en": "Arms Race: Ampere Altra Takes on the AWS Graviton2", "transed": 1, "url": "https://blog.cloudflare.com/arms-race-ampere-altra-takes-on-aws-graviton2/", "via": "", "real_tags": ["ampere", "race", "altra"]}]