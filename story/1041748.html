<!doctype html><html lang="zh-hans"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Ruby 3.0.0发布 </title><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"><link rel="stylesheet" href="/img/css.css?random="><link data-rh="true" rel="icon" href="/img/favicon.ico"/><script data-ad-client="ca-pub-6067137220025946" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script type="text/javascript" src="https://platform-api.sharethis.com/js/sharethis.js#property=5effb96910009800120b8d4d&product=inline-share-buttons" async="async"></script>
<script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?03c1a0f31299b4a2fbb83c34d6beaac9";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script></head><body><div id="my_header"><div class="container"><nav class="navbar navbar-expand-lg"><a class="navbar-brand" href="/"><img alt="diglog" src="/img/logo.v1.gif" class="rounded-sm"></a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarNavAltMarkup"><div class="navbar-nav"></div></div></nav></div></div><div class="container"><div id="my_content"><h1 class="page_narrow">Ruby 3.0.0发布 </h1><div class="row"><div class="col-lg-12 col-12"><div class="my_story_list_item shadow p-3 mb-5 bg-white rounded"><div class="story_page_pub_time page_narrow">2020-12-25 14:32:29</div><div class="page_narrow text-break page_content"><p>我们很高兴宣布Ruby的发布。从2015年开始，我们朝着Ruby 3进行了艰苦的开发，其目标是性能，并发性和键入。 Matz表示，特别是在性能方面，“ Ruby3将比Ruby2快3倍”，也就是Ruby 3x3。</p><p>  Optcarrot基准测试可以根据NES的游戏仿真工作负载来衡量单线程性能，因此其性能比Ruby 2.0快3倍！这些是在https://benchmark-driver.github.io/hardware.html中编写的环境下测量的。 8c510e4095被用作Ruby 3.0。根据您的环境或基准，它可能不会快3倍。</p><p>     当我在会议主题演讲中首次声明“ Ruby3x3”时，包括核心团队成员在内的许多人都感到“ Matz是个助推器”。实际上，我也是如此。但是我们做到了。我很高兴看到核心团队在将Ruby3.0的速度比Ruby2.0快三倍的情况下（在某些基准测试中）确实取得了成就。 –马茨</p><p>   从Ruby 3.0开始，JIT可以在有限的工作负载（例如游戏（Optcarrot），AI（Rubykon）或花费大量时间多次调用几种方法的应用程序）中提高性能。</p><p> 尽管Ruby 3.0大大减少了JIT版本的代码的大小，但它仍未准备好优化诸如Rails之类的工作负载，因为它们经常花很多时间在许多方法上，因此遭受了JIT加剧的i-cache丢失的困扰。请继续关注Ruby 3.1，以进一步解决此问题。</p><p>  今天是多核时代。并发非常重要。有了Ractor，再加上Async Fiber，Ruby将成为真正的并发语言。 — Matz</p><p>  Ractor是类似于并发抽象的Actor模型，旨在提供并行执行功能而无需担心线程安全。 </p><p>您可以制造多个拖拉机，也可以并行运行它们。 Ractor使您可以制作线程安全的并行程序，因为ractors无法共享普通对象。拖拉机之间的交流是通过交流信息来支持的。</p><p> 为了限制对象共享，Ractor对Ruby的语法引入了一些限制（没有多个Ractor，没有限制）。</p><p> 规格和实现尚不成熟，将来可能会更改，因此此功能被标记为实验性功能，并在首次Ractor.new时显示“实验性功能”警告。</p><p> 以下小程序通过顺序执行4次或与拖拉机并行执行4次来测量著名的基准tak函数（Tak（函数）-Wikipedia）的执行时间。</p><p> def tarai（x，y，z）= x＆lt; = y？ y：tarai（tarai（x-1，y，z），tarai（y-1，z，x），tarai（z-1，x，y））需要＆benchmark基准测试。 bm做| x | ＃顺序版本x。报告（＆seq＆＃39;）{4。 times {tarai（14，7，0）}}＃并行版本x。报告（＆＃39; par＆＃39;）{4。时代。贴图做Ractor。新{tarai（14,7,0）}结束。每个（＆amp;：take）}结尾</p><p> 基准测试结果：用户系统总计realseq 64.560736 0.001101 64.561837（64.562194）par 66.422010 0.015999 66.438009（16.685797）</p><p> 结果是在Ubuntu 20.04，Intel®Core™i7-6700（4核，8个硬件线程）上测量的。它表明并行版本比顺序版本快3.87倍。 </p><p>引入了Fiber＃scheduler来拦截阻塞操作。这允许轻量级的并发，而无需更改现有代码。观看“别等我，Ruby 3的可扩展并发性”，以了解它的工作原理。</p><p>    需要＆＃39; async＆＃39;需要＆＃39; net / http＆＃39;需要＆＃39; uri＆＃39;异步执行[＆＃34; ruby​​＆＃34; ，＆＃34; rails＆＃34; ，＆＃34; async＆＃34; ]。每个做|话题异步网络:: HTTP。得到（URI＆＃34; https：//www.google.com/search？q =＃{topic}＆＃34;）结束结束结束</p><p> 它使用提供事件循环的异步。此事件循环使用Fiber＃scheduler挂钩使Net :: HTTP成为非阻塞的。其他gem可以使用此接口为Ruby提供非阻塞执行，并且这些gem可以与支持相同非阻塞钩子的Ruby其他实现（例如JRuby，TruffleRuby）兼容。</p><p>  2010年代是静态类型编程语言的时代。 Ruby通过使用抽象解释的无类型声明的静态类型检查来寻求未来。苏格兰皇家银行TypeProf是未来的第一步。更多步骤。 — Matz</p><p>   类型检查器（包括TypeProf和其他支持RBS的工具）将通过RBS定义更好地理解Ruby程序。</p><p> 您可以写下类和模块的定义：类中定义的方法，实例变量及其类型以及继承/混合关系。</p><p> RBS的目标是支持Ruby程序中常见的模式，它允许编写高级类型，包括联合类型，方法重载和泛型。它还支持带有接口类型的鸭子输入。 </p><p>Ruby 3.0附带了rbs gem，它允许解析和处理用RBS编写的类型定义。以下是带有类，模块和常量定义的RBS的一个小示例。</p><p> 模块ChatApp版本：字符串类通道attr_reader名称：字符串attr_reader消息：Array [Message] attr_reader用户：Array [User | Bot]＃`|`表示联合类型，`User`或`Bot`。 def initialize：（String）-＆gt; void def post ：（字符串，来自：用户| Bot）-＆gt;消息＃支持方法重载。 | （文件，来自：用户| Bot）-＆gt;消息结束</p><p>     它读取普通的（无类型注释的）Ruby代码，分析定义了哪些方法以及如何使用它们，并生成RBS格式的类型签名的原型。</p><p>   ＃test.rb类用户def初始化（name：，age :) @name，@age = name，年龄终止attr_reader：name，：age最终用户。新建（姓名：＆＃34; John＆＃34;年龄：20）</p><p>  $ typeprof test.rb＃类class用户attr_reader名称：字符串attr_reader年龄：整数def初始化：（名称：字符串，年龄：整数）-＆gt; [String，Integer]结束</p><p> 您可以通过将输入另存为“ test.rb”并调用名为“ typeprof test.rb”的命令来运行TypeProf。</p><p> 您也可以在线尝试TypeProf。 （它在服务器端运行TypeProf，因此很抱歉！） </p><p>TypeProf尚处于实验阶段，尚未成熟。仅支持一部分Ruby语言，并且类型错误的检测受到限制。但是，改善语言功能，分析性能和可用性的范围仍在迅速增长。任何反馈都非常欢迎。</p><p>  案例[＆＃34; a＆＃34; ，1，＆＃34; b＆＃34; ，＆＃34; c＆＃34; ，2，＆＃34; d＆＃34; ，＆＃34; e＆＃34; ，＆＃34; f＆＃34; ，3] in [* pre，String =＆gt; x，字符串=> y，* post] p pre＃=＆gt; [＆＃34; a＆＃34;，1] p x＃=＆gt; ＆＃34; b＆＃34; p y＃=＆gt; ＆＃34; c＆＃34; p帖子＃=＆gt; [2，＆＃34; d＆＃34 ;,＆＃34; e＆＃34 ;,＆＃34; f＆＃34 ;, 3]结尾</p><p>      这是一个新的C-API集，用于在扩展库之间交换原始内存区域，例如数字数组和位图图像。扩展库还可以共享由形状，元素格式等组成的存储区域的元数据。使用这些类型的元数据，扩展库甚至可以适当地共享多维数组。此功能是通过参考Python的缓冲区协议来设计的。</p><p>  将长代码粘贴到IRB的速度比Ruby 2.7.0捆绑的速度快53倍。例如，粘贴此示例代码所需的时间从11.7秒变为0.22秒。</p><p>  irb（main）：001：0＆gt; 3 =＆gt; 3irb（main）：002：0＆gt; = measuregt已添加。 nilirb（main）：003：0＆gt; 3处理时间：0.000058s =＆gt; 3irb（main）：004：0＆gt;测量：off =＆gt; nilirb（main）：005：0＆gt; 3 =＆gt; 3</p><p>  关键字参数与其他参数分开。原则上，在Ruby 2.7上显示警告的代码将不起作用。详细信息请参见文档。</p><p>      在Ruby 2.5中，回溯的顺序已被颠倒，并且被恢复。现在，它的行为类似于Ruby 2.4；首先打印错误消息和发生异常的行号，然后再打印其调用方。 </p><p>以下库不再是捆绑的gem或标准库。请安装相应的gem以使用这些功能。  Ruby3.0是一个里程碑。 语言不断发展，保持了兼容性。 但这还没有结束。 Ruby将不断发展，并变得更加强大。 敬请关注！ — Matz  Ruby最初由Matz（Yukihiro Matsumoto）于1993年开发，现在已作为开源开发。 它运行在多个平台上，并在全世界范围内广泛用于Web开发。 </p></div><div id="story_share_this"><div class="sharethis-inline-share-buttons"></div></div><div class="text-break sotry_link page_narrow"><a target="_blank" href="https://www.ruby-lang.org/en/news/2020/12/25/ruby-3-0-0-released/">https://www.ruby-lang.org/en/news/2020/12/25/ruby-3-0-0-released/</a></div><div class="story_tags page_narrow"><button type="button" class="btn btn-light my_tag"><a href="/tag/ruby/">#ruby</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/发布/">#发布</a></button></div></div><div class="shadow p-3 mb-5 bg-white rounded clearfix"><div class="container"><div class="row"><div class="col-sm"><div><a target="_blank" href="/story/1036013.html"><img src="http://img2.diglog.com/img/2020/11/thumb_a1fe6584030c6a7cb2547a0764fd0777.png" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1036013.html">StimulusReflex：使用Ruby on Rails构建现代的反应式Web界面</a></div><span class="my_story_list_date">2020-11-23 8:30</span></div><div class="col-sm"><div><a target="_blank" href="/story/1035840.html"><img src="http://img2.diglog.com/img/2020/11/thumb_11c826cfa4b68a0727ed56dfc94a9e82.jpeg" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1035840.html">我对Ruby类一无所知</a></div><span class="my_story_list_date">2020-11-22 8:57</span></div><div class="col-sm"><div><a target="_blank" href="/story/1035641.html"><img src="http://img2.diglog.com/img/2020/11/thumb_e3cca80340e666a775173cbbdc0b7a39.png" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1035641.html">Ruby的静态类型：大规模采用冰糕</a></div><span class="my_story_list_date">2020-11-21 21:33</span></div><div class="col-sm"><div><a target="_blank" href="/story/1035270.html"><img src="http://img2.diglog.com/img/2020/11/thumb_6f5c84856fa29d5f5170a177cc0f6115.jpg" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1035270.html">将我的无服务器项目转移到Ruby on Rails</a></div><span class="my_story_list_date">2020-11-15 20:58</span></div></div></div></div><div class="my_movie_list_item shadow p-3 mb-5 bg-white rounded"><button type="button" class="btn btn-link my_tag"><a href="/tag/web2.0/">#web2.0</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/google/">#google</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/设计/">#设计</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/创意/">#创意</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/摄影/">#摄影</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/游戏/">#游戏</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/图片/">#图片</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/软件/">#软件</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/视频/">#视频</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/手机/">#手机</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/广告/">#广告</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/apple/">#apple</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/iphone/">#iphone</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/网站/">#网站</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/免费/">#免费</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/下载/">#下载</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/windows/">#windows</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/微软/">#微软</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/firefox/">#firefox</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/苹果/">#苹果</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/blog/">#blog</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/音乐/">#音乐</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/博客/">#博客</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/wordpress/">#wordpress</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/恶搞/">#恶搞</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/艺术/">#艺术</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/qq/">#qq</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/web/">#web</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/谷歌/">#谷歌</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/工具/">#工具</a></button></div></div></div><div id="my_footer"><div class=""><a href="/tags/">tags</a> <a href="/users/">users</a></div>&copy;2012-2021 diglog.com </div></div></body></html>