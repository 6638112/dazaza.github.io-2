<!doctype html><html lang="zh-hans"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>正确的git与git-autofixup提交 Correct Git commits with git-autofixup</title><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"><link rel="stylesheet" href="/img/css.css?random="><link data-rh="true" rel="icon" href="/img/favicon.ico"/><script data-ad-client="ca-pub-6067137220025946" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script type="text/javascript" src="https://platform-api.sharethis.com/js/sharethis.js#property=5effb96910009800120b8d4d&product=inline-share-buttons" async="async"></script>
<script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?03c1a0f31299b4a2fbb83c34d6beaac9";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script></head><body><div id="my_header"><div class="container"><nav class="navbar navbar-expand-lg"><a class="navbar-brand" href="/"><img alt="diglog" src="/img/logo.v1.gif" class="rounded-sm"></a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarNavAltMarkup"><div class="navbar-nav"></div></div></nav></div></div><div class="container"><div id="my_content"><h1 class="page_narrow">Correct Git commits with git-autofixup<br/>正确的git与git-autofixup提交 </h1><div class="row"><div class="col-lg-12 col-12"><div class="my_story_list_item shadow p-3 mb-5 bg-white rounded"><div class="story_page_pub_time page_narrow">2021-03-18 19:08:34</div><div class="story_img_container"><a href="http://img2.diglog.com/img/2021/3/126b99c5f7ddc5cef26d1dac5d1ceee4.png"><img src="http://img2.diglog.com/img/2021/3/126b99c5f7ddc5cef26d1dac5d1ceee4.png" class="img-fluid my_story_img" onerror="this.style.display='none'"></a></div><div class="page_narrow text-break page_content"><p>The version control system  Git gives us powerful tools to orchestrate collaborative software development. Developers use  code reviews to catch many issues long before a customer would notice them. To address issues that are found during a review, a developer typically has to make numerous small changes. This can be a tedious process, involving lots of busywork.</p><p>版本控制系统GIT为我们提供了协作软件开发的强大工具。开发人员使用代码审查以在客户注意到他们之前捕获许多问题。为了解决审核期间发现的问题，开发人员通常必须进行许多小的变化。这可能是一个繁琐的过程，涉及大量忙碌。</p><p> To address review comments, you often want to modify earlier commits that were not quite right. This article is a tutorial on how to do that by automatically creating fixup commits using  git-autofixup. As a result, you can focus on more interesting problems.</p><p> 要解决审核评论，您通常希望修改早期的提交，这些提交不太正确。本文是如何通过使用git-autofixup自动创建修复程序来执行此操作的教程。结果，您可以专注于更有趣的问题。</p><p>  Let’s say you want to share a music diary with your friends. Every day, you and your friends will add your favorite songs to this file. To not accidentally overwrite each other’s additions, you store the diary in a Git repository.</p><p>  让我们说你想和朋友分享音乐日记。每天，您和您的朋友都会将您最喜欢的歌曲添加到此文件中。不要意外地覆盖彼此的添加，您将日记存储在Git存储库中。</p><p> To get started, create a fresh Git repository and add an empty music diary, with a heading for each day of the week.</p><p> 要开始，请创建一个新的Git存储库并添加一个空的音乐日记，为一周中的每一天都有标题。</p><p> $ git init my-favorite-things &amp;&amp; cd my-favorite-thingsInitialized empty Git repository in ~/my-favorite-things/.git/$ echo &gt; songs.md &#34;\# Our Music Diary## Monday## Tuesday## Wednesday## Thursday## Friday&#34;$ git add songs.md$ git commit -m &#34;Initial commit&#34;</p><p> $ git init我最喜欢的东西＆amp;＆amp; CD我最喜欢的东西 - 在〜/ my-chinestion-missions / .git / $ echo＆gt中initeializimitializinializializializializialialized空的git存储库; songs.md＆＃34; \＃我们的音乐日记##星期一##星期二##星期三##星期四##周五＆＃34; $ git添加歌曲.md $ git commit -m＆＃34;初始提交＆＃34;</p><p> Since you don’t want to send out changes every single time you add a song, you use a branch-based workflow: your changes live on a local branch until you merge it to the shared remote branch. Let’s create a new branch for the songs we add this week:</p><p> 由于您不想每次添加歌曲的每次添加更改，因此您使用基于分支的工作流程：您的更改在本地分支上运行，直到您将其合并到共享远程分支。让我们为本周添加的歌曲创建一个新的分支：</p><p>  Great, now you have your own branch where you can add songs as you like. At the end of the week you can share your additions.</p><p>  很棒，现在你有自己的分支，你可以在那里添加歌曲。在本周末，您可以分享您的添加。 </p><p> Let’s add a song for Monday, and commit that change. Here we use the  sed text editor to first search for our Monday line, and then use the sed’s “a” command to add a new item to the list.</p><p>让我们在星期一添加一首歌，并提交更改。在这里，我们使用sed文本编辑器首先搜索我们的星期一行，然后使用sed的“a”命令将新项目添加到列表中。</p><p>   sed -i &#34;/Tuesday/a- Isn&#39;t he lovely&#34; songs.mdgit commit -am &#34;Tuesday&#34;sed -i &#34;/Wednesday/a- Superstition&#34; songs.mdgit commit -am &#34;Wednesday&#34;sed -i &#34;/Thursday/a- Sir Duke&#34; songs.mdgit commit -am &#34;Thursday&#34;sed -i &#34;/Friday/a- Cause We&#39;ve Ended as Covers&#34; songs.mdgit commit -am &#34;Friday&#34;</p><p>   SED -I＆＃34; /星期二/ a-ISN＆＃39;它可爱＆＃34; songs.mdgit commit -am＆＃34;星期二＆＃34; sed -i＆＃34; /星期三/ a-迷信＆＃34; songs.mdgit commit -am＆＃34;星期三＆＃34; sed -i＆＃34; / thursday / a-爵士和＃34; songs.mdgit commit -am＆＃34;星期四＆＃34; sed -i＆＃34; / friday / a-导致我们结束＆＃34; songs.mdgit commit -am＆＃34;星期五＆＃34;</p><p>  $ cat songs.md# Our Music Diary## Monday- Overjoyed## Tuesday- Isn&#39;t he lovely## Wednesday- Superstition## Thursday- Sir Duke## Friday- Cause We&#39;ve Ended as Covers</p><p>  $ cat songs.md＃我们的音乐日记##星期一 -  overjoyed ##星期二 -  ISN＆＃39; T Heavicy ##星期三 - 迷信##星期四 - 爵士##星期五 - 因为我们＆＃39; ve＆＃39</p><p> Looks great! But wait, did a typo just sneak in? If you’re a fan of Stevie Wonder, you will have noticed that two song titles are misspelled! Let’s edit the diary once again, to correct these mistakes. You can use sed’s “s” command to replace each occurrence of a string.</p><p> 看起来很棒！但等等，拼错拼音只是潜入？如果你是史蒂夫奇怪的粉丝，你会注意到两首歌标题是拼写错误的！让我们再次编辑日记，纠正这些错误。您可以使用SED的“S”命令替换每次出现字符串。</p><p>  We could create a new commit with these corrections, but that would overthrow the nice structure of having one commit per day. Also, you want to share your music with your friends, but not your silly mistakes, right?</p><p>  我们可以使用这些更正创建一个新的提交，但这将推翻每天有一个提交的漂亮结构。另外，您还希望与朋友分享您的音乐，但不是您的愚蠢错误，对吧？</p><p> Luckily, you have read  a tutorial on  git rebase so you know how to change your commit history: you just need to create a so-called  fixup commit that fixes a typo and then use  git rebase -i --autosquash to modify the commit that introduced the typo.</p><p> 幸运的是，您已经阅读了Git Rebase的教程，因此您知道如何更改Commit历史记录：您只需要创建一个所谓的修复程序，该提交修复拼写错误，然后使用Git Rebase -i --Autosquash来修改提交介绍了错字。</p><p> To create a fixup commit, we need to know the target commit to modify. You have made two fixes that belong to different target commits - but which ones? A simple heuristic is to use a commit that added a line that the fix corrected. Let’s ask  git blame which commit added the faulty line. Since  Isn&#39;t he lovely was on line number 7, you can pass an inclusive range of only that line to  git blame.</p><p> 要创建一个修复程序，我们需要知道目标提交要修改。你已经做了两个属于不同目标的修复 - 但是哪些修复？一个简单的启发式是使用一个提交来添加修复更正的行。让我们询问Git Chinouch哪个提交了错误的行。自从ISN＆＃39;它可爱是在第7号线，你可以通过包容范围，只能归咎于git责备。 </p><p> $ git blame -L 7,7 HEAD songs.md91492e3c (Johannes 2020-10-16 09:44:06 +0200 7) - Isn&#39;t he lovely</p><p>$ git chinough -l 7,7头歌曲.md91492e3c（约翰内斯2020-10-16 09:44:06 +0200 7） -  ISN＆＃39;可爱</p><p> Gotcha! The commit with ID  91492e3c needs to be corrected. Let’s do that. Remember that you only want to change one line in this commit, so you can use the  --patch option to select the right one.</p><p> Gotcha！需要纠正ID 91492E3C的提交。让我们这样做。请记住，您只想在此提交中更改一行，因此您可以使用--patch选项选择正确的选项。</p><p> $ git commit --patch --fixup 91492e3cdiff --git a/songs.md b/songs.mdindex 8795f4b..6229282 100644 --- a/songs.md  +++ b/songs.md  @@ -4,7 +4,7 @@  - Overjoyed ## Tuesday -- Isn&#39;t he lovely  +- Isn&#39;t she lovely  ## Wednesday - Superstition(1/2) Stage this hunk [y,n]? Yes, please! @@ -13,5 +13,5 @@  - Sir Duke ## Friday -- Cause We&#39;ve Ended as Covers  +- Cause We&#39;ve Ended as Lovers (2/2) Stage this hunk [y,n]? No thanks, leave this for later ;)[my-songs-of-the-week 84460d1] fixup! Tuesday 1 file changed, 1 insertion(+), 1 deletion(-)</p><p> $ git commit --patch --fixup 91492e3cdiff --git a / songs.md b / songs.mdindex 8795f4b..6229282 100644 --- a / songs.md +++ b / songs.md @@ -7 + 4,7 @@ @  - 过度约##星期二 -  ISN＆＃39; T He Lovely +  -  ISN＆＃39; T她可爱##星期三 - 迷信（1/2）阶段这个Hunk [Y，N]？是的，请！ @@ -13,5 +13,5 @@  -  sir duke ##星期五 - 因为我们结束了封面+  - 导致我们以恋人（2/2）阶段为止这个HUNK [Y.）＆＃39结束了，n]？不，谢谢，为以后留下这个;）[我的歌曲为期84460d1]修复！周二1文件已更改，1个插入（+），1删除（ - ）</p><p> Ok, that was easy! Now you just need to do the same thing again for the other mistake. Wait a minute… 🤨 “the same thing again”, huh? Well, if it’s so easy, why can’t the computer do that for me? 🤔</p><p> 好的，这很容易！现在你只需要再次做同样的事情来换下另一个错误。等一下......🤨“再次相同”，嗯？好吧，如果它这么容易，为什么电脑不能为我做这件事？ 🤔</p><p> Turns out Jordan Torbiak’s   git-autofixup does exactly what we want: it runs  git blame on each change and creates fixup commits, just like we did.</p><p> 转出jordan torbiak的git-autofixup确实是我们想要的：它在每个更改中运行git责备，并创建夹具提交，就像我们所做的那样。</p><p> Let’s try that. First undo the fixup commit you just created, but leave the diary as-is:</p><p> 让我们试试吧。首先撤消您刚刚创建的Fixpup提交，但留下日记 - 是：</p><p>  Then just run  git-autofixup. Passing the special commit reference  @{upstream} tells it to consider all commits on the current branch as desirable fixup targets.</p><p>  然后只是运行git-autofixup。传递特殊提交参考文献@ {上游}告诉它以考虑当前分支上的所有提交，如期望的拾取目标。 </p><p> $ git autofixup @{upstream}[my-songs-of-the-week 88d2457] fixup! Tuesday 1 file changed, 1 insertion(+), 1 deletion(-)[my-songs-of-the-week aadb1e5] fixup! Friday 1 file changed, 1 insertion(+), 1 deletion(-)</p><p>$ git autofixup @ {上游} [我的歌曲为期88d2457]修复！星期二1文件已更改，1个插入（+），1删除（ - ）[我的歌曲Aadb1e5]修复！星期五1文件已更改，1插入（+），1删除（ - ）</p><p> Observe that  git-autofixup created two fixup commits for the errors made on Tuesday and Friday.</p><p> 观察Git-AutoFixup为周二和星期五制作的错误创建了两个修复程序。</p><p> Finally, run  git rebase -i --autosquash, and you’ll have an immaculate history, ready to be shared.With the first approach, we had to figure out the correct arguments for  git blame and  git commit, whereas  git-autofixup is smart enough to do the same out of the box.</p><p> 最后，运行git rebase -i --autosquash，你有一个完美无暇的历史，准备分享。我们必须弄清楚git责备和git提交的正确论据，而git-autofixup是足够聪明，以便开箱即用。</p><p> Side note:   git revise nicely complements  git-autofixup. It is an efficient alternative to  git rebase which avoids invalidating builds by rewriting commits without touching worktree files.</p><p> 侧面注意：git修改了很好的补充git-autofixup。它是Git Rebase的一个有效的替代方案，它通过在不触摸WhiteTree文件的情况下重写提交来避免无效构建。</p><p>  At  Symflower we value a thorough review process, and  git-autofixup saves us a lot of time implementing that. We hope you find it useful, too. Keep in mind that fixup targets are assigned using a heuristic; when in doubt please double-check that your fixup commits are correct. 😉 If you want to learn about the technical details of how  git-autofixup works, the  original blog post is a good place to start.</p><p>  在Symflower中，我们重视彻底的审查过程，Git-Autofixup为我们节省了大量的时间来实现这一点。我们希望您发现它也很有用。请记住，使用启发式分配固定目标;如有疑问，请仔细检查您的修复程序是否正确。 😉如果您想了解Git-Autofixup如何工作的技术细节，原始博客文章是一个很好的开始。</p><p> If you love working on challenging problems, using tools that make development fun, and maybe even want to help us enhance our workflow,  consider joining us!.</p><p> 如果你喜欢努力解决挑战性问题，使用制作开发乐趣的工具，甚至希望帮助我们增强我们的工作流程，考虑加入我们！ </p></div><div id="story_share_this"><div class="sharethis-inline-share-buttons"></div></div><div class="text-break sotry_link page_narrow"><a target="_blank" href="https://symflower.com/en/company/blog/2021/git-autofixup/">https://symflower.com/en/company/blog/2021/git-autofixup/</a></div><div class="story_tags page_narrow"><button type="button" class="btn btn-light my_tag"><a href="/tag/autofixup/">#autofixup</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/git/">#git</a></button></div></div><div class="my_movie_list_item shadow p-3 mb-5 bg-white rounded"><button type="button" class="btn btn-link my_tag"><a href="/tag/web2.0/">#web2.0</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/google/">#google</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/设计/">#设计</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/创意/">#创意</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/摄影/">#摄影</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/图片/">#图片</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/游戏/">#游戏</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/软件/">#软件</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/视频/">#视频</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/手机/">#手机</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/广告/">#广告</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/iphone/">#iphone</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/网站/">#网站</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/免费/">#免费</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/下载/">#下载</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/windows/">#windows</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/微软/">#微软</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/firefox/">#firefox</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/blog/">#blog</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/苹果/">#苹果</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/apple/">#apple</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/音乐/">#音乐</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/博客/">#博客</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/wordpress/">#wordpress</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/恶搞/">#恶搞</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/qq/">#qq</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/艺术/">#艺术</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/web/">#web</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/工具/">#工具</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/分享/">#分享</a></button></div></div></div><div id="my_footer"><div class=""><a href="/tags/">tags</a> <a href="/users/">users</a></div>&copy;2012-2021 diglog.com </div></div></body></html>