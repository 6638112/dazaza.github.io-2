<!doctype html><html lang="zh-hans"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>反向工程复古比较器芯片 Reverse-engineering a vintage comparator chip</title><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"><link rel="stylesheet" href="/img/css.css?random="><link data-rh="true" rel="icon" href="/img/favicon.ico"/><script data-ad-client="ca-pub-6067137220025946" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script type="text/javascript" src="https://platform-api.sharethis.com/js/sharethis.js#property=5effb96910009800120b8d4d&product=inline-share-buttons" async="async"></script>
<script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?03c1a0f31299b4a2fbb83c34d6beaac9";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script></head><body><div id="my_header"><div class="container"><nav class="navbar navbar-expand-lg"><a class="navbar-brand" href="/"><img alt="diglog" src="/img/logo.v1.gif" class="rounded-sm"></a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarNavAltMarkup"><div class="navbar-nav"></div></div></nav></div></div><div class="container"><div id="my_content"><h1 class="page_narrow">Reverse-engineering a vintage comparator chip<br/>反向工程复古比较器芯片 </h1><div class="row"><div class="col-lg-12 col-12"><div class="my_story_list_item shadow p-3 mb-5 bg-white rounded"><div class="story_page_pub_time page_narrow">2021-04-18 18:13:10</div><div class="story_img_container"><a href="http://img2.diglog.com/img/2021/4/2061b94dd92adb900d94f4ce1647accd.jpeg"><img src="http://img2.diglog.com/img/2021/4/2061b94dd92adb900d94f4ce1647accd.jpeg" class="img-fluid my_story_img" onerror="this.style.display='none'"></a></div><div class="page_narrow text-break page_content"><p>I recently saw an interesting die photo of an unknown chip  on Twitter,so I did some analysis of it.Looking at the circuitry inside, the chip appears to be four comparators, probably in the ECL (Emitter Coupled Logic) family.This is a quick blog post to summarize my investigation.</p><p>我最近看到了一个有趣的芯片在Twitter上的一个有趣的芯片照片，所以我对它进行了一些分析。在电路里面，芯片似乎是四个比较器，可能在ECL（发射器耦合逻辑）家庭中。这是一个快速博客帖子总结了我的调查。</p><p> The die photo below shows the chip under the microscope.Regions of the silicon appear pink, blue, or yellow, depending on how the silicon was doped.The speckled regions are the metal layer on top of the silicon, wiring the circuitry together.Around the edges, the black bond wires connect the chip to the external pins. These wires are attached to the square bond pads.The die has four blocks of circuitry, one for each of its four comparators. Much of the die is unused, especially the large metal areain the middle. Because this chip&#39;s circuitry is relatively simple, it only uses a fraction of the available space.</p><p> 下面的芯片照片显示了显微镜下的芯片。硅的细节显得粉红色，蓝色或黄色，这取决于硅的掺杂方式。斑点区域是硅顶部的金属层，在一起将电路接线。边缘，黑色键合线将芯片连接到外部销。这些电线连接到方形键合焊盘上。模具具有四个电路块，一个用于其四个比较器中的每一个。大部分的死亡是未使用的，特别是中间的大金属面积。因为这种芯片和＃39; S电路相对简单，因此它仅使用可用空间的一小部分。</p><p> The chip with pins labeled. Click this photo (or any other) for a larger version. Photo courtesy of  EvilMonkeyDesignz.</p><p> 芯片用销钉标记。单击此照片（或任何其他）以获得更大的版本。照片由邪恶的曼尼克斯尼尼州提供。</p><p> The photo below shows the chip with its metal lid removed.Modern chips are usually in a black epoxy package, but this chip has a white ceramic package.The tiny silicon die is visible in the middle, with bond wires connecting the die to the lead frame, the metal connections to thechip&#39;s gold-plated pins.The metal layer on top of the die is visible, and can be matched with the die photo above.The semi-circular notch on the left indicates the orientation of the chip; the &#34;P&#34; is pin 1.</p><p> 下面的照片显示了芯片的芯片，盖子拆分了。芯片通常处于黑色环氧包装中，但该芯片具有白色的陶瓷包装。微小的硅模在中间可见，带粘合电线将管芯连接到铅框架，金属连接到TheChip＆＃39; S镀金销。模具顶部的金属层可见，可以与上面的模具相匹配。左侧的半圆形凹口表示芯片; ＆＃34; p＆＃34;是PIN 1。</p><p> The chip with the metal lid removed, showing the tiny silicon die inside. Photo courtesy of  EvilMonkeyDesignz.</p><p> 将芯片移除了金属盖，显示了内部的微小硅模。照片由邪恶的曼尼克斯尼尼州提供。</p><p>  Transistors are the key components in a chip.This chip uses a type of transistor called the NPN transistor.The photo below shows a transistor as it appears on the chip.The orange and blue colors are regions of silicon that have been doped differently, forming N and P regions.The speckled areas are the metal layer of the chip on top of the silicon—these form the wires connecting to the transistor&#39;s collector, emitter, and base.</p><p>  晶体管是芯片中的关键部件。本芯片使用称为NPN晶体管的晶体管。下面的照片显示晶体管，如芯片上出现的晶体管。橙色和蓝色是硅的区域，它们被不同地掺杂，形成N和P区域。斑点区域是硅顶部的芯片的金属层 - 这些芯片形成连接到晶体管＆＃39; S收集器，发射器和底座的电线。</p><p> Underneath the photo is a cross-section drawing showing approximately how the transistor is constructed.There&#39;s a lot more than just the N-P-N sandwich you see in books, but if you look carefully at the vertical cross-section below the &#39;E&#39;, you can find the N-P-N that forms the transistor.The emitter (E) wire is connected to N+ silicon.Below that is a P layer connected to the base contact (B).And below that is an N+ layer connected (indirectly) to the collector (C).The emitter, base, and collector can be distinguished on the die with careful examination.The base&#39;s region surrounds the emitter, forming a blue rectangle. The collector contact is larger and off to the side.</p><p> 在照片下面是一个横截面图，显示了晶体管的构造方式。＆＃39; SA很多比你在书中看到的NPN三明治，但如果你在＆＃39下面的垂直横截面仔细看看; E＆＃39;您可以找到形成晶体管的NPN。发射器（e）线连接到n +硅..是连接到基部接触（b）的p层。下面是n +层的p层。连接（间接地）到收集器（C）。发射器，基地和收集器可以通过仔细检查来区分模具。底座和＃39; S区域围绕发射器，形成蓝色矩形。收集器接触较大，侧面较大。 </p><p> Structure of an NPN transistor. Top: transistor as it appears on the die. Bottom: cross-section diagram.</p><p>NPN晶体管的结构。顶部：晶体管出现在模具上。底部：横截面图。</p><p> The other key components of this chip are the resistors.The photo below shows two resistors as they appear on the die.The resistors are formed from strips of higher-resistance P silicon, which appears blue in the die photos.The two ends of each resistor are connected to the metal layer.A resistor has higher resistance if it is longer and narrower.While one resistor below is a simple rectangle, the other has a complex zig-zag shape to fit more length into the available space.(The blue rectangle in the lower right is a transistor, not a resistor.To distinguish it from a resistor, note that it has three contacts, and the two contacts on therectangle are not symmetrical.)</p><p> 该芯片的其他关键部件是电阻器。下面的照片显示了模具上的两个电阻器。电阻器由高电阻P硅条形成，这在模芯中看起来是蓝色的。每个末端电阻连接到金属层。如果它更长且较窄，则电阻具有更高的电阻。当下面的一个电阻是一个简单的矩形，另一个具有复杂的锯齿形状，以将更多长度适合可用空间。（蓝色右下方的矩形是晶体管，而不是电阻器。将其与电阻区分开，请注意它有三个触点，并且其上的两个触点不对称。）</p><p>   Once the components can be recognized on the die, the circuit can be traced out and reverse-engineered.But before I describe the complete circuit, I&#39;ll explain one important functional block.</p><p>   一旦组件可以在模具上识别，电路就可以追踪和反向工程。但在我描述完整电路之前，I＆＃39; LL解释一个重要的功能块。</p><p> The schematic below shows a differential pair, or long-tailed pair, which amplifies the difference between its two inputs.This circuit is common in analog circuits, forming the heart of an op-amp. It is also the basis of Emitter-Coupled Logic (ECL).The basic idea is that a current sink (the two circles at the bottom) generates a fixed current  I.This current gets split between the left path ( I1) and the right path ( I2).If the transistor on the left has a higher input voltage than the transistor on the right, most of the current will go to the left.But if the transistor on the right has a higher input, most of the current will go to the right.This circuit amplifies the voltage difference: even a small difference between the two inputs will switch most of the current from oneside to the other.</p><p> 下面的示意图显示了差分对或长尾对，其放大了其两个输入之间的差异。该电路在模拟电路中常见，形成运算放大器的心脏。它也是发射器耦合逻辑（ECL）的基础。基本思想是电流宿（底部的两个圆圈）产生固定电流I.该电流在左路（I1）和右侧之间分裂路径（I2）。如果左侧的晶体管具有比右侧的晶体管更高的输入电压，大部分电流将转到左侧。但是如果右侧的晶体管具有更高的输入，则大多数电流将转到右侧。这个电路放大电压差：即使两个输入之间的差别也会将大部分电流从均方切换到另一个输入。</p><p> Schematic of a simple differential pair circuit. The current sink sends a fixed current I through the differential pair. If the two inputs are equal, the current is split equally between the two branches. Otherwise, the branch with the higher input voltage gets most of the current.</p><p> 简单差分对电路的示意图。电流接收器通过差分对发送固定电流i。如果两个输入相等，则电流在两个分支之间同等地分割。否则，具有较高输入电压的分支获得大部分电流。</p><p> In this chip, the circuit is used as a comparator, a circuit that compares the two inputs and generates a logic output that indicateswhich input is higher.The side with the current will get pulled low, while the other side is pulled high by the resistor.Thus, the output can be treated as a logic signal.</p><p> 在该芯片中，电路用作比较器，一个电路比较两个输入，并产生指示输入更高的逻辑输出。当前的侧面将被拉低，而另一侧被电阻拉高.thus，输出可以被视为逻辑信号。</p><p> The schematic below shows the circuitry for one of the four comparators on the chip.Note that the differential amplifier circuit above is used twice.For better performance,the output from the first differential amplifier is fed into a second differential amplifier.This sharpens the output: if the inputs are close together, the outputs from the first stage may not be fully &#34;0&#34; or &#34;1&#34;. The secondstage amplifies this difference, providing solid &#34;0&#34; and &#34;1&#34; outputs.The current sinks provide a relatively constant current for the amplifiers, but I won&#39;t explain them in detail.</p><p> 下面的示意图显示了芯片上的四个比较器之一的电路。注意到上面的差分放大器电路两次。对于更好的性能，来自第一差分放大器的输出被馈送到第二差分放大器。这锐化了输出：如果输入靠近在一起，则第一阶段的输出可能无法完全＆＃34; 0＆＃34;或＆＃34; 1＆＃34;第二裤放大这种差异，提供实体＆＃34; 0＆＃34;和＃34; 1＆＃34;输出。电流水槽为放大器提供相对恒定的电流，但我赢得了＆＃39;详细解释它们。 </p><p>  The diagram below shows the circuitry on the die, corresponding to the schematic above.The red boxes indicate the transistors for the two amplifier stages and their associated current sinks. The other components are the resistors, which appear as blue rectangles.The wiring in the metal layer connects the components together, as well as the inputs on the left and the output at the top.</p><p>下图显示了模具上的电路，对应于上方的示意图。红色框表示两个放大器级及其相关的电流槽的晶体管。其他组件是电阻器，其显示为蓝色矩形。金属层中的布线将组件连接在一起，以及左侧的输入和顶部的输出。</p><p>  The diagram below shows how the circuitry of the chip maps onto its 16 pins.Each triangle represents a comparator with its positive and negative inputs.Two of the comparators have a single output, while two also have an inverted output (indicated by a bubble).</p><p>  下图显示了芯片地图的电路如何映射到其16个引脚。两个三角形代表一个比较器，其正负输入是比较器的两种输出，而两个也具有反相输出（由泡沫表示） 。</p><p>   So what is this chip?Maybe it&#39;s simply four comparators, but they could have a specific purpose.The chip could be a converter for four differential input signals, e.g. DCS (Differential Current Switch) logic.Another chip in the family seems to be Emitter-Coupled Logic, so this chip could befour ECL inverters (but it doesn&#39;t make sense to have four pins for the reference voltage).It&#39;s a bit puzzling that two comparators have inverted and noninverted outputs, while two have single outputs.</p><p>   那么这个芯片是什么？也许是它的简单四个比较器，但它们可以具有特定目的。芯片可以是用于四个差分输入信号的转换器，例如，芯片。 DCS（差分电流开关）逻辑。家庭中的其他芯片似乎是发射器耦合逻辑，所以该芯片可以是ECL逆变器（但它没有为参考电压有四个引脚）。＆＃ 39;两个比较器具有反转和不变输出的SA令人费解，而两个具有单个输出。</p><p> Based on the circuitry and ceramic packaging of this chip, I estimate that it is from around 1970.The chip is labeled &#34;OQ104&#34;, soI did a bunch of searching through old databooks, but I couldn&#39;t find anything that matches it.Since the chip looks like ECL and has the part number 104, it&#39;s tempting to think that the chip might be the 10,104 part in the  MECL 10,000 series. Unfortunately, the 10,104 is a quad AND gate, and the internal circuitry is different.The &#34;P&#34; on the chip might indicate Philips, but I couldn&#39;t find any matching Philips components.For now, the exact identity of this chip is a mystery.</p><p> 基于该芯片的电路和陶瓷包装，我估计它是从1970年左右到的。芯片被标记为＆＃34; oq104＆＃34;，soi做了一堆搜索旧数据卷，但我无法搜索＆＃39; t找到任何与其匹配的东西。芯片看起来像ECL并具有第104份，它＆＃39;诱人认为芯片可能是MECL 10,000系列的10,104部分。不幸的是，10,104是四边形和门，内部电路不同。＆＃34; p＆＃34;在芯片上可能表示飞利浦，但我无法找到任何匹配的飞利浦组件。如果现在，这款芯片的确切身份是一个谜。</p><p> I announce my latest blog posts on Twitter, so follow me  @kenshirriff.Many thanks to EvilMonkeyz Designs for providing the photos; follow on Instagram or  Twitter for more interesting die photos.</p><p> 我在Twitter上宣布了我的最新博客帖子，所以跟着我@kenshirriff.many，感谢邪恶的minkeyz设计来提供照片;在Instagram或Twitter上关注更有趣的模具照片。 </p></div><div id="story_share_this"><div class="sharethis-inline-share-buttons"></div></div><div class="text-break sotry_link page_narrow"><a target="_blank" href="https://www.righto.com/2021/04/reverse-engineering-vintage-comparator.html">https://www.righto.com/2021/04/reverse-engineering-vintage-comparator.html</a></div><div class="story_tags page_narrow"><button type="button" class="btn btn-light my_tag"><a href="/tag/芯片/">#芯片</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/工程/">#工程</a></button></div></div><div class="my_movie_list_item shadow p-3 mb-5 bg-white rounded"><button type="button" class="btn btn-link my_tag"><a href="/tag/web2.0/">#web2.0</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/google/">#google</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/设计/">#设计</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/创意/">#创意</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/摄影/">#摄影</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/图片/">#图片</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/游戏/">#游戏</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/软件/">#软件</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/视频/">#视频</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/广告/">#广告</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/手机/">#手机</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/iphone/">#iphone</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/网站/">#网站</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/apple/">#apple</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/免费/">#免费</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/下载/">#下载</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/windows/">#windows</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/微软/">#微软</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/firefox/">#firefox</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/blog/">#blog</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/苹果/">#苹果</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/音乐/">#音乐</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/博客/">#博客</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/wordpress/">#wordpress</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/恶搞/">#恶搞</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/qq/">#qq</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/艺术/">#艺术</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/web/">#web</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/工具/">#工具</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/分享/">#分享</a></button></div></div></div><div id="my_footer"><div class=""><a href="/tags/">tags</a> <a href="/users/">users</a></div>&copy;2012-2021 diglog.com </div></div></body></html>