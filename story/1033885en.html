<!doctype html><html lang="zh-hans"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>乐高头脑风暴上的BGP网络</title><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"><link rel="stylesheet" href="/img/css.css?random="><link data-rh="true" rel="icon" href="/img/favicon.ico"/><script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?03c1a0f31299b4a2fbb83c34d6beaac9";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script><script data-ad-client="ca-pub-6067137220025946" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script type="text/javascript" src="https://platform-api.sharethis.com/js/sharethis.js#property=5effb96910009800120b8d4d&product=inline-share-buttons" async="async"></script></head><body><div id="my_header"><div class="container"><nav class="navbar navbar-expand-lg"><a class="navbar-brand" href="/"><img alt="diglog" src="/img/logo.v1.gif" class="rounded-sm"></a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarNavAltMarkup"><div class="navbar-nav"></div></div></nav></div></div><div class="container"><div id="my_content"><h1 class="page_narrow">乐高头脑风暴上的BGP网络</h1><div class="row"><div class="col-lg-12 col-12"><div class="my_story_list_item shadow p-3 mb-5 bg-white rounded"><div class="story_page_pub_time page_narrow">2020-11-09 01:57:22</div><div class="page_narrow text-break page_content"><p>Since I was 7 years old, I have wanted a LEGO Mindstorms robot. I will admit that in the later years it was mainly that I wanted to prove to myself that I got somewhere as it seemed so infinitely expensive back when I was younger…</p><p>从我7岁起，我就想要一个乐高头脑风暴机器人。我承认，在后来的几年里，我主要是想向自己证明，在我年轻的时候，它看起来是如此昂贵，我已经取得了一定的成就。…。</p><p>   I knew this thing had some capability to run  MicroPython since that was mentioned in the product description quite predominantly, which sounded like a pretty hackable platform.</p><p>我知道它有一些运行MicroPython的能力，因为在产品描述中主要提到了这一点，这听起来像是一个非常容易被黑客攻击的平台。</p><p> However, shortly after opening the box, I realized that this wasn’t at all just an update to the  Mindstorms EV3. Apparently the Robot Inventor was a slightly more expensive thing with less features and using a LiPo battery instead of AA cells.</p><p>然而，在打开盒子后不久，我意识到这根本不只是MindStorms EV3的更新。显然，Robot的发明者比AA电池稍贵一些，功能更少，而且使用的是脂肪电池而不是AA电池。</p><p> Luckily I ordered it via the store’s website which means that by law I can return it within 14 days for any reason, and it allows me to open the box for inspection.</p><p>幸运的是，我通过商店的网站订购了它，这意味着根据法律，我可以在14天内退货，无论出于什么原因，它允许我打开盒子进行检查。</p><p> So after convincing some stubborn store employee that this is not a consumable product (which would remove my right to open the box), I got it returned and ordered the EV3.</p><p>因此，在说服一些顽固的店员相信这不是消费品(这会剥夺我打开盒子的权利)后，我拿回了它，并订购了EV3。</p><p> Then two days later I finally had the thing which I have wanted for so long.</p><p>两天后，我终于得到了我梦寐以求的东西。</p><p> While I was waiting for the EV3, I was looking around at how it did MicroPython as it had this paragraph on the downloads page.</p><p>当我在等待EV3的时候，我四处看看它是如何做MicroPython的，就像它在下载页面上的这段话一样。</p><p> You can now use your EV3 Brick to unleash the power of Python programming using MicroPython. Simply install the EV3 MicroPython image onto any micro SD card and boot up your EV3 Brick from it to start programming straight away.</p><p>现在，您可以使用EV3 Brick通过MicroPython释放Python编程的强大功能。只需将EV3 MicroPython镜像安装到任何Micro SD卡上，然后从其中启动EV3 Brick，即可立即开始编程。</p><p> After just a few minutes of searching I found  ev3dev which is an open source community project that allows you to run Debian on it!</p><p>经过几分钟的搜索，我找到了ev3dev，这是一个开放源码社区项目，允许您在上面运行Debian！</p><p> It appears to be really well made and apparently good enough for LEGO to provide  official builds of it, which is what they use for MicroPython support.</p><p>它看起来做得很好，而且显然足够好，乐高可以提供它的官方版本，这就是他们用来支持MicroPython的。</p><p> So I just went ahead and downloaded and flashed the disk image to a microSD card with  dd.I then plugged in the microSD card into the EV3 controller and turned it on…</p><p>因此，我继续下载磁盘镜像，并使用dd将其刷新到microSD卡。然后，我将microSD卡插入EV3控制器并打开…。</p><p>  To my surprise, after applying power I was pleased to see kernel dmesg output scrolling out on the LCD of the EV3 on the first try!</p><p>令我惊讶的是，在通电后，我很高兴看到内核dmesg的输出在第一次尝试时就在EV3的LCD上滚动显示出来！</p><p> robot@ev3dev:~$ uname -aLinux ev3dev 4.14.117-ev3dev-2.3.5-ev3 #1 PREEMPT Sat Mar 7 12:54:39 CST 2020 armv5tejl GNU/Linuxrobot@ev3dev:~$ cat /etc/os-release PRETTY_NAME=&#34;ev3dev-stretch&#34;NAME=&#34;ev3dev-stretch&#34;ID=ev3devID_LIKE=debianHOME_URL=&#34;http://www.ev3dev.org&#34;SUPPORT_URL=&#34;http://www.ev3dev.org/support&#34;BUG_REPORT_URL=&#34;https://github.com/ev3dev/ev3dev/issues&#34;</p><p>Robot@ev3dev：~$uname-aLinux ev3dev 4.14.117-ev3dev-2.3.5-ev3#1 Preempt Sat Mar 7 12：54：39 CST 2020 armv5tejl GNU/linuxbot@ev3dev：~$cat/etc/os-Release PRETTY_NAME=&#34；ev3dev-stretch&#34；NAME=&#34；ev3dev-stretch&#34；ID=ev3devID_LIKE=debianHOME_URL=&#34；http://www.ev3dev.org&#34；SUPPORT_URL=&#34；http://www.ev3dev.org/support&#34；BUG_REPORT_URL=&#34；Https://github.com/ev3dev/ev3dev/issues&#34；</p><p> After playing around with it for about two minutes, I realized something… this thing runs Debian with a pretty damn complete package repository (it has ~64000 packages and normal amd64 Debian has ~66000 packages), can this thing run BIRD?</p><p>在玩了大约两分钟后，我意识到了一些事情…。这款软件在Debian上运行的包库相当完整(它有大约64000个包，而普通的AMD64 Debian有大约66000个包)，它能运行BIRD吗？</p><p> I assumed that if the ARM926EJ-S CPU can run Debian and stuff it can probably run a very minimal BIRD config, however I wasn’t so sure about the 56MB of RAM.</p><p>我猜想如果ARM926EJ-S CPU可以运行Debian之类的东西，那么它大概可以运行非常简单的BIRD配置，但是我对56MB的RAM不是很确定。</p><p>  So I just went ahead and typed  sudo apt install bird and pressed enter…</p><p>所以我继续输入sudo apt install bird，然后按Enter…键</p><p> robot@ev3dev:~$ sudo apt install birdReading package lists... DoneBuilding dependency tree Reading state information... DoneSuggested packages: bird-doc</p><p>Bot@ev3dev：~$sudo apt安装Birdread软件包列表...。正在完成正在生成依赖关系树，正在读取状态信息...。DoneSuggest套餐：bird-doc.。</p><p> (this was actually painfully slow as this thing doesn’t have a powerful CPU in the slightest)</p><p>(这实际上慢得令人痛苦，因为这款机器一点也没有强大的CPU)。</p><p> As soon as I saw  bird-doc I realized that yes it did at least have BIRD in the repo so that was a good first step.</p><p>当我看到鸟医生的时候，我意识到，是的，它至少有鸟在回购中，所以这是一个很好的第一步。</p><p> I am only installing BIRD 1.6.3 here as it will probably use less resources than BIRD 2 if I only run the IPv6 daemon and disable the IPv4 daemon.</p><p>我在这里只安装BIRD 1.6.3，因为如果我只运行IPv6守护进程并禁用IPv4守护进程，它可能会比BIRD 2使用更少的资源。</p><p> I then wrote a  quick little bird config to let the EV3 (AS202314) announce 2a0d:1a45:666::/48 to my home router (AS210089), and the home router will then deal with the rest.</p><p>然后，我编写了一个快速的小鸟配置，让EV3(AS202314)向我的家庭路由器(AS210089)通告2a0d：1a45：666：：/48，然后家庭路由器将处理其余的事情。</p><p> I applied that and wrote the other end of the config on my home router and applied that too.</p><p>我应用了这一点，并在我的家用路由器上写下了配置的另一端，也应用了这一点。</p><p> Then I went to the  NLNOG RING Looking Glass and I saw the /48 show up as announced by AS202314!</p><p>然后我去了NLNOG的Look Glass戒指，我看到了AS202314宣布的/48！</p><p>  I then sent it to a friend who pointed out only about half of his sources could see the route, and well turns out I forgot to give AS202314 an  RPKI ROA for the prefix, so I added that.</p><p>然后我把它发给了一个朋友，他指出只有大约一半的消息来源可以看到这条路线，结果发现我忘了给AS202314一个RPKI ROA作为前缀，所以我补充了这一点。</p><p> Then just for demo purposes I installed nginx which worked surprisingly well, so then I had a website I could access at http://[2a0d:1a45:666::]/   [1].</p><p>然后，出于演示的目的，我安装了ngix，它运行得出奇地好，所以我有了一个网站，我可以在http://[2a0d:1a45:666：：]/[1]上访问它。</p><p> This was surprisingly easy to get working. Hats off to the  ev3dev people for making this Debian derivative for the EV3.</p><p>这是出人意料的容易上手。向ev3dev人员致敬，因为他们为EV3制作了这个Debian衍生品。</p><p> While having the EV3 sitting there announcing a /48 of IPv6 is not useful in itself, this shows off how flexible the platform is. The fact that I can do this silly thing means that I can do much cooler things that don’t involve BGP on this, like running web servers and other things.</p><p>虽然让EV3坐在那里宣布IPv6的/48本身并不有用，但这显示了该平台的灵活性。事实上，我可以做这件傻事，这意味着我可以做一些不涉及BGP的更酷的事情，比如运行Web服务器和其他事情。</p><p>  If this was to your liking then maybe you will find my other posts interesting, and you can also find my smaller projects and ramblings on twitter:  @bitcynth.</p><p>如果这是你喜欢的，也许你会发现我的其他帖子很有趣，你也可以在Twitter上找到我的小项目和漫谈：@bitcynth。</p><p> Thank you to  Ben Cox and  Molly Miller for the help in editing this blog post.</p><p>感谢本·考克斯和莫莉·米勒帮助编辑这篇博客文章。</p></div><div id="story_share_this"><div class="sharethis-inline-share-buttons"></div></div><div class="text-break sotry_link page_narrow"><a target="_blank" href="https://blog.cynthia.re/post/bgp-lego">https://blog.cynthia.re/post/bgp-lego</a></div><div class="story_tags page_narrow"><button type="button" class="btn btn-light my_tag"><a href="/tag/头脑/">#头脑</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/ev3/">#ev3</a></button></div></div><div class="my_movie_list_item shadow p-3 mb-5 bg-white rounded"><button type="button" class="btn btn-link my_tag"><a href="/tag/web2.0/">#web2.0</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/google/">#google</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/设计/">#设计</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/游戏/">#游戏</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/创意/">#创意</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/apple/">#apple</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/苹果/">#苹果</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/摄影/">#摄影</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/软件/">#软件</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/美国/">#美国</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/iphone/">#iphone</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/图片/">#图片</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/手机/">#手机</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/视频/">#视频</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/广告/">#广告</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/免费/">#免费</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/谷歌/">#谷歌</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/网站/">#网站</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/windows/">#windows</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/微软/">#微软</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/下载/">#下载</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/firefox/">#firefox</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/音乐/">#音乐</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/linux/">#linux</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/blog/">#blog</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/博客/">#博客</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/程序/">#程序</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/艺术/">#艺术</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/web/">#web</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/wordpress/">#wordpress</a></button></div></div></div><div id="my_footer"><div class=""><a href="/tags/">tags</a> <a href="/users/">users</a></div>&copy; 2020 diglog.com </div></div></body></html>