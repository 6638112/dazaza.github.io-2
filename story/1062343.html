<!doctype html><html lang="zh-hans"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>在手臂2分钟内加速LLVM / CLANG </title><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"><link rel="stylesheet" href="/img/css.css?random="><link data-rh="true" rel="icon" href="/img/favicon.ico"/><script data-ad-client="ca-pub-6067137220025946" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script type="text/javascript" src="https://platform-api.sharethis.com/js/sharethis.js#property=5effb96910009800120b8d4d&product=inline-share-buttons" async="async"></script>
<script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?03c1a0f31299b4a2fbb83c34d6beaac9";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script></head><body><div id="my_header"><div class="container"><nav class="navbar navbar-expand-lg"><a class="navbar-brand" href="/"><img alt="diglog" src="/img/logo.v1.gif" class="rounded-sm"></a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarNavAltMarkup"><div class="navbar-nav"></div></div></nav></div></div><div class="container"><div id="my_content"><h1 class="page_narrow">在手臂2分钟内加速LLVM / CLANG </h1><div class="row"><div class="col-lg-12 col-12"><div class="my_story_list_item shadow p-3 mb-5 bg-white rounded"><div class="story_page_pub_time page_narrow">2021-05-13 08:07:19</div><div class="page_narrow text-break page_content"><p>在发布和分享上一篇关于IRC上的朋友后的工具链，我被问到我是否想尝试在160核心手臂机上做同样的事情。摘掉我的答案是留给读者的练习:-)</p><p> 系统i＆＃39; m使用此实验是bm.standard.a1.160来自Oracle云的裸金属，它具有双插座主板，具有两个80cores Ampere Altra CPU，总共160个核心，1024 GB ofram。这是我所知的最佳AARCH64 ServerMachine此时。</p><p>   Uname -Alinux Benchmarks 5.4.17-2102.201.3.el8uek.aarch64＃2 SMP Fri 4月23日09:42:46 PDT 2021 AARCH64 AARCH64 AARCH64 GNU / LINUX</p><p>   不幸的是，软件包存储库中可用的CMake版本（3.11.4）太旧，无法构建LLVM GIT存储库的主分支，也可以使用Ninja Isnot。</p><p>  git clone https://github.com/netbsd/pkgsrc.git cd pkgsrc / bootstrap。/ bootstrap --make-作业= 160  - 不平等===＆gt; Bootstrap启动：5月12日星期三12:23:34 GMT 2021 ===＆gt; Bootstrap结束：5月12日星期三12:26:08 GMT 2021</p><p>         关于链接器，我们正在使用Binutils 2.30和LLD 10.0.1的GNU LD和GNU Gold。</p><p>  对于所有以下运行，i＆＃39; m建筑物从git存储库主分支机构cf4610d27bbb5c3a744374440e2fdf77caa12040404040404040404040每个运行之间的构建目录是完全删除的。 </p><p>我不确定底层的存储是什么，但有1 TB的RAM没有理由不使用ramdisk。</p><p>   CD LLVM-Project MKDIR构建CD BuildCmake -dcmake_c_compiler = clang \ -dcmake_cxx_compiler = clang ++ \ -dcmake_build_type = seleels \ -dllvm_enable_projects = clang \ ../lamvm time make -j160real 7m3.226suser 403m28.362ssys 6m41.331s</p><p> 默认情况下，CMake会生成makefiles。如在＆＃34中的文件;入门LLVM系统＆＃34;教程，大多数LLVM开发人员使用Ninja。</p><p>  cmake -dcmake_c_compiler = clang \ -dcmake_cxxx_compiler = clang ++ \ -dcmake_build_type = -dllvm_enable_projects = clang \ -gninja ./llvm time ninja [4182/4182]链接Cxx可执行箱/ c-index-testreal 4m20.403suser 427m27.118ssys 7m2.320s.</p><p>   cmake -dcmake_c_compiler = clang \ -dcmake_cxx_compiler = clang ++ \ -dcmake_build_type = recely \ -dllvm_enable_projects = clang \ -dllvm_use_linker = gold \ -gninja ../llvm time ninja [4182/4182]链接Cxx可执行垃圾箱/ c-index-testreal 4m1 .062suser 427m1.648ssys 6m58.282s.</p><p>  cmake -dcmake_c_compiler = clang \ -dcmake_cxx_compiler = clang ++ \ -dcmake_build_type = recelety \ -dllvm_enable_projects = clang \ -dllvm_use_linker = lld \ -gninja ./llvm time ninja [4182/4182]链接Cxx可执行箱/ clang-scan-sup-deps-depsreal 3m58 .476Suser 428m3.807ssys 7m14.418s.</p><p> 使用GNU黄金而不是GNU LD结果明显更快地构建，伴随着LLD刮掉了距离构建的几秒钟。 </p><p>如果我们想要更快地构建，我们可以通过删除一些组件来妥协并开始剥离构建。</p><p>  cmake -dcmake_c_compiler = clang \ -dcmake_cxx_compiler = clang ++ \ -dcmake_build_type = recelay \ -dllvm_enable_projects = clang \ -dllvm_use_linker = lld \ -dllvm_targets_to_build =＆＃34; aarch64＆＃34; \ -gninja ../llvm time ninja [3195/3195]链接CXX可执行箱/ C-Index-Testreal 3M10.312Suser 326M54.898SYS 5M24.770S</p><p>  Bin / Clang  -  intrint-targets注册目标：AARC64  -  AARC64（小endian）AARCH64_32  -  AARC64（小endian ILP32）AARC64_BE  -  AARC64（BIG ENDIAN）ARM64  -  ARM64（小endian）ARM64_32  -  ARM64（小endian ILP32）</p><p>  cmake -dcmake_c_compiler = clang \ -dcmake_cxx_compiler = clang ++ \ -dcmake_build_type = recelay \ -dllvm_enable_projects = clang \ -dllvm_use_linker = lld \ -dllvm_targets_to_build =＆＃34; aarch64＆＃34; \ -dclang_enable_static_Analyzer = Off \ -dclang_enable_arcmt = off \ -gninja./llvm time ninja [3146/3146]创建库symlink lib / libclang-cpp.soreal 3m6.474suser 319m25.914ssys 5m20.924s</p><p>  cmake -dcmake_c_compiler = clang \ -dcmake_cxx_compiler = clang ++ \ -dcmake_build_type = recelay \ -dllvm_enable_projects = clang \ -dllvm_use_linker = lld \ -dllvm_targets_to_build =＆＃34; aarch64＆＃34; \ -dclang_enable_static_Analyzer = Off \ -dclang_enable_arcmt = off \ -dllvm_build_tools = off \ -dllvm_build_utils = off \ -gninja ./lyvm time ninja [2879/2879]创建库symlink lib / libclang-cpp.soreal 2m59.659suser 298m47.482ssys 4m57.430s.</p><p> 与以前的构建相比，以下二进制文件未构建：FileCheck，Count，LLI-Child-Target，LLVM-JITLINK-EXECUREL，LLVM-PESTERSHUFFLE，NOT，OBJ2YAML，YAML2OBJ和YAML-BECH。</p><p> 我们在这里达到了我们的旅程结束。在这一点上，我们戴上事物。 </p><p>cmake -dcmake_c_compiler = clang \ -dcmake_cxx_compiler = clang ++ \ -dcmake_build_type = recelay \ -dllvm_enable_projects = clang \ -dllvm_use_linker = lld \ -dllvm_targets_to_build =＆＃34; aarch64＆＃34; \ -dclang_enable_static_Analyzer = OFF \ -dclang_enable_arcmt = off \ -dllvm_build_tools = off \ -dllvm_build_utils = off \ -dcmake_cxx_flags_release =＆＃34; -O0＆＃34; \ -gninja ../llvm time ninja [2879/2879]链接CXX可执行箱/ C-Index-testreal 2m37.003suser 231m53.133ssys 4m56.675s  因此，这台机器可以构建完整的LLVM / CLANG释放构建INA少于四分钟，并在两分钟内使用优化的剥离压缩。 2分钟。 这绝对是令人兴奋的......未来现在！ </p></div><div id="story_share_this"><div class="sharethis-inline-share-buttons"></div></div><div class="text-break sotry_link page_narrow"><a target="_blank" href="https://www.cambus.net/speedbuilding-llvm-clang-in-2-minutes-on-arm/">https://www.cambus.net/speedbuilding-llvm-clang-in-2-minutes-on-arm/</a></div><div class="story_tags page_narrow"><button type="button" class="btn btn-light my_tag"><a href="/tag/加速/">#加速</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/llvm/">#llvm</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/构建/">#构建</a></button></div></div><div class="shadow p-3 mb-5 bg-white rounded clearfix"><div class="container"><div class="row"><div class="col-sm"><div><a target="_blank" href="/story/1057310.html"><img src="http://img2.diglog.com/img/2021/4/thumb_fd63bf8c73c9c6a0b890e6d361ba8e46.png" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1057310.html">HW加速Xwayland渲染为NVIDIA合并 </a></div><span class="my_story_list_date">2021-4-10 0:46</span></div><div class="col-sm"><div><a target="_blank" href="/story/1051430.html"><img src="http://img2.diglog.com/img/2021/3/thumb_52b03383f830f67c707d01d620371549.png" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1051430.html">通过稀疏推理加速在移动设备和网络上的神经网络 </a></div><span class="my_story_list_date">2021-3-11 0:36</span></div><div class="col-sm"><div><a target="_blank" href="/story/1040292.html"><img src="http://img2.diglog.com/img/2020/12/thumb_bb976273335287d62ac8e850ced4eda5.jpg" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1040292.html">奥斯汀的教育科技初创公司Aceable追加了5000万美元用于加速扩张 </a></div><span class="my_story_list_date">2020-12-17 20:19</span></div><div class="col-sm"><div><a target="_blank" href="/story/1032077.html"><img src="http://img2.diglog.com/img/2020/10/thumb_a79ecd56ecf782573d7db8a998c5a9b2.jpg" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1032077.html">BlazingSQL使用GPU加速的SQL加速Summit超级计算机上的查询</a></div><span class="my_story_list_date">2020-10-30 1:58</span></div></div></div></div><div class="my_movie_list_item shadow p-3 mb-5 bg-white rounded"><button type="button" class="btn btn-link my_tag"><a href="/tag/web2.0/">#web2.0</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/google/">#google</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/设计/">#设计</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/创意/">#创意</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/摄影/">#摄影</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/游戏/">#游戏</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/图片/">#图片</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/软件/">#软件</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/视频/">#视频</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/手机/">#手机</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/广告/">#广告</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/apple/">#apple</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/iphone/">#iphone</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/网站/">#网站</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/免费/">#免费</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/下载/">#下载</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/windows/">#windows</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/微软/">#微软</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/firefox/">#firefox</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/苹果/">#苹果</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/blog/">#blog</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/音乐/">#音乐</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/博客/">#博客</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/wordpress/">#wordpress</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/恶搞/">#恶搞</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/艺术/">#艺术</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/qq/">#qq</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/web/">#web</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/谷歌/">#谷歌</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/工具/">#工具</a></button></div></div></div><div id="my_footer"><div class=""><a href="/tags/">tags</a> <a href="/users/">users</a></div>&copy;2012-2021 diglog.com </div></div></body></html>