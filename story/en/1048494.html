<!doctype html><html lang="zh-hans"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Ada中的编码：字符串（IV）不受限制 Coding in Ada: Strings (IV) Unbounded to String</title><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"><link rel="stylesheet" href="/img/css.css?random="><link data-rh="true" rel="icon" href="/img/favicon.ico"/><script data-ad-client="ca-pub-6067137220025946" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script type="text/javascript" src="https://platform-api.sharethis.com/js/sharethis.js#property=5effb96910009800120b8d4d&product=inline-share-buttons" async="async"></script>
<script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?03c1a0f31299b4a2fbb83c34d6beaac9";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script></head><body><div id="my_header"><div class="container"><nav class="navbar navbar-expand-lg"><a class="navbar-brand" href="/"><img alt="diglog" src="/img/logo.v1.gif" class="rounded-sm"></a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarNavAltMarkup"><div class="navbar-nav"></div></div></nav></div></div><div class="container"><div id="my_content"><h1 class="page_narrow">Coding in Ada: Strings (IV) Unbounded to String<br/>Ada中的编码：字符串（IV）不受限制 </h1><div class="row"><div class="col-lg-12 col-12"><div class="my_story_list_item shadow p-3 mb-5 bg-white rounded"><div class="story_page_pub_time page_narrow">2021-02-19 17:04:51</div><div class="story_img_container"><a href="http://img2.diglog.com/img/2021/2/7cf484ceeae6bc7fc2161eddc603cd15.jpg"><img src="http://img2.diglog.com/img/2021/2/7cf484ceeae6bc7fc2161eddc603cd15.jpg" class="img-fluid my_story_img" onerror="this.style.display='none'"></a></div><div class="page_narrow text-break page_content"><p>As mentioned before, strings in Ada can be tricky. Normal strings are fixed in length, and Ada is very stringent about this. Consider a piece of code like this:</p><p>如前所述，Ada中的字符串可能很棘手。普通字符串的长度是固定的，而Ada对此非常严格。考虑一段这样的代码：</p><p> with ada.Text_IO; use Ada.Text_IO;with ada.strings.unbounded; use ada.strings.unbounded;procedure ustr2strfail is function tub(Source : String) return unbounded_string renames ada.strings.unbounded.to_unbounded_string; type lexicon is array(1..10) of unbounded_string; words : lexicon := (tub(&#34;gum&#34;),tub(&#34;sin&#34;),tub(&#34;cry&#34;), tub(&#34;lug&#34;),tub(&#34;star&#34;),tub(&#34;fault&#34;),tub(&#34;sleeper&#34;), tub(&#34;a&#34;),tub(&#34;vader&#34;),tub(&#34;nordic&#34;)); aword : string(1..10);begin aword := to_string(words(7)); put(aword);end ustr2strfail;</p><p> 与ada.Text_IO;使用Ada.Text_IO;和ada.strings.unbounded;使用ada.strings.unbounded;程序ustr2strfail是功能tub（Source：String）返回unbounded_string重命名ada.strings.unbounded.to_unbounded_string;词典类型是unbounded_string的array（1..10）;单词：词典：=（tub（＆＃34; gum＆＃34;），tub（＆＃34; sin＆＃34;），tub（＆＃34; cry＆＃34;），tub（＆＃34; lug＆＃ 34;），浴缸（＆＃34; star），浴缸（＆＃34; fault＆＃34;），浴缸（＆＃34; sleeper＆＃34;），浴缸（＆＃34; a＆＃34; ），tub（＆＃34; vader＆＃34;），tub（＆＃34; nordic＆＃34;））; aword：string（1..10）;开始aword：= to_string（words（7））; put（aword）; end ustr2strfail;</p><p>   This means that although the unbounded string is converted to a string using the function  to_string(), it only works if the length of the unbounded string equals the length of the string  aword. So in the code above,  aword has a length of 10, and when an attempt is made to assign it the unbounded string, “sleeper”, it fails. It would work if sleeper was padded out with 3 spaces after it. How to fix this? Do exactly that, pad the words. Here is a subroutine that does this:</p><p>   这意味着尽管使用函数to_string（）将无界字符串转换为字符串，但仅当无界字符串的长度等于字符串aword的长度时，该字符串才有效。因此，在上面的代码中，word的长度为10，并且尝试为它分配无限制的字符串“ sleeper”时，它将失败。如果在轨枕后面加了3个空格，它将起作用。如何解决这个问题？做到这一点，填入文字。这是执行此操作的子例程：</p><p> with ada.Text_IO; use Ada.Text_IO;with ada.strings.unbounded; use ada.strings.unbounded;with ada.strings.unbounded.Text_IO; use ada.strings.unbounded.Text_IO;with ada.strings.fixed; use ada.strings.fixed;procedure ustr2str is subtype string10 is string(1..10); R : string10; function tub(Source : String) return unbounded_string renames ada.strings.unbounded.to_unbounded_string; type lexicon is array(1..10) of unbounded_string; words : lexicon := (tub(&#34;gum&#34;),tub(&#34;sin&#34;),tub(&#34;cry&#34;), tub(&#34;lug&#34;),tub(&#34;star&#34;),tub(&#34;fault&#34;),tub(&#34;sleeper&#34;), tub(&#34;a&#34;),tub(&#34;vader&#34;),tub(&#34;nordic&#34;));  function  padString(V: unbounded_string) return string10 is temp : constant string := to_string(V); res : string10; begin ada.strings.fixed.move(temp, res, drop=&gt;ada.strings.right); return res; end  padString;begin R :=   padString(words(7)); put(R);end ustr2str;</p><p> 与ada.Text_IO;使用Ada.Text_IO;和ada.strings.unbounded;与ada.strings.unbounded.Text_IO一起使用ada.strings.unbounded;使用ada.strings.unbounded.Text_IO;固定ada.strings.fixed;使用ada.strings.fixed;程序ustr2str是子类型string10是string（1..10）; R：字符串10;函数tub（Source：String）返回unbounded_string重命名ada.strings.unbounded.to_unbounded_string;词典类型是unbounded_string的array（1..10）;单词：词典：=（tub（＆＃34; gum＆＃34;），tub（＆＃34; sin＆＃34;），tub（＆＃34; cry＆＃34;），tub（＆＃34; lug＆＃ 34;），浴缸（＆＃34; star），浴缸（＆＃34; fault＆＃34;），浴缸（＆＃34; sleeper＆＃34;），浴缸（＆＃34; a＆＃34; ），tub（＆＃34; vader＆＃34;），tub（＆＃34; nordic＆＃34;））;函数padString（V：unbounded_string）返回string10是temp：常量字符串：= to_string（V）; res：字符串10;开始ada.strings.fixed.move（temp，res，drop =＆gt; ada.strings.right）;返回资源； end padString;开始R：= padString（words（7））; put（R）; end ustr2str;</p><p> It uses the procedure  move(), from the  ada.strings.fixed package. It has the following basic form:</p><p> 它使用ada.strings.fixed包中的过程move（）。它具有以下基本形式：</p><p> procedure Move (Source : in String; Target : out String; Drop : in Truncation := Error; Justify : in Alignment := Left; Pad : in Character := Space);</p><p> 过程Move（源：in字符串； Target：out字符串； Drop：截断：=错误； Justify：对齐：=左； Pad：字符：=空格）；</p><p> The procedure  move() copies characters from  Source to  Target. If Source has the same length as Target, then the effect is to assign Source to Target. If Source is shorter than Target then,  Justify is used to place the Source into the Target (default =  Left).  Pad specifies the padding, default is  Space.  Drop is used if Source is longer than Target.</p><p> 过程move（）将字符从源复制到目标。如果Source与Target的长度相同，则效果是将Source分配给Target。如果“源”比“目标”短，则将“对齐”用于将“源”放入目标（默认值=“左”）。填充指定填充，默认为空格。如果源比目标长，则使用丢弃。 </p></div><div id="story_share_this"><div class="sharethis-inline-share-buttons"></div></div><div class="text-break sotry_link page_narrow"><a target="_blank" href="https://craftofcoding.wordpress.com/2021/02/16/coding-ada-strings-iv-unbounded-to-string/">https://craftofcoding.wordpress.com/2021/02/16/coding-ada-strings-iv-unbounded-to-string/</a></div><div class="story_tags page_narrow"><button type="button" class="btn btn-light my_tag"><a href="/tag/字符串/">#字符串</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/ada/">#ada</a></button></div></div><div class="my_movie_list_item shadow p-3 mb-5 bg-white rounded"><button type="button" class="btn btn-link my_tag"><a href="/tag/web2.0/">#web2.0</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/google/">#google</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/设计/">#设计</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/创意/">#创意</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/摄影/">#摄影</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/游戏/">#游戏</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/图片/">#图片</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/软件/">#软件</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/视频/">#视频</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/广告/">#广告</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/手机/">#手机</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/iphone/">#iphone</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/网站/">#网站</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/免费/">#免费</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/下载/">#下载</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/windows/">#windows</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/微软/">#微软</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/苹果/">#苹果</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/firefox/">#firefox</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/blog/">#blog</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/apple/">#apple</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/音乐/">#音乐</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/博客/">#博客</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/wordpress/">#wordpress</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/恶搞/">#恶搞</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/qq/">#qq</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/艺术/">#艺术</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/web/">#web</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/工具/">#工具</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/分享/">#分享</a></button></div></div></div><div id="my_footer"><div class=""><a href="/tags/">tags</a> <a href="/users/">users</a></div>&copy; 2020 diglog.com </div></div></body></html>