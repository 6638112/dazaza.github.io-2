<!doctype html><html lang="zh-hans"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>您可以连接多少个设备到I2C总线？ How many device can you connect to I2C Bus?</title><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"><link rel="stylesheet" href="/img/css.css?random="><link data-rh="true" rel="icon" href="/img/favicon.ico"/><script data-ad-client="ca-pub-6067137220025946" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script type="text/javascript" src="https://platform-api.sharethis.com/js/sharethis.js#property=5effb96910009800120b8d4d&product=inline-share-buttons" async="async"></script>
<script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?03c1a0f31299b4a2fbb83c34d6beaac9";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script></head><body><div id="my_header"><div class="container"><nav class="navbar navbar-expand-lg"><a class="navbar-brand" href="/"><img alt="diglog" src="/img/logo.v1.gif" class="rounded-sm"></a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarNavAltMarkup"><div class="navbar-nav"></div></div></nav></div></div><div class="container"><div id="my_content"><h1 class="page_narrow">How many device can you connect to I2C Bus?<br/>您可以连接多少个设备到I2C总线？ </h1><div class="row"><div class="col-lg-12 col-12"><div class="my_story_list_item shadow p-3 mb-5 bg-white rounded"><div class="story_page_pub_time page_narrow">2021-04-13 20:50:55</div><div class="story_img_container"><a href="http://img2.diglog.com/img/2021/4/ad77bf5605cca01458f9a06cc21b76a1.jpg"><img src="http://img2.diglog.com/img/2021/4/ad77bf5605cca01458f9a06cc21b76a1.jpg" class="img-fluid my_story_img" onerror="this.style.display='none'"></a></div><div class="page_narrow text-break page_content"><p>If you ever posted that question on any discussion forum for Arduino users, electronic enthusiasts and fellow engineers, you will get answers like this:</p><p>如果您在Arduino用户，电子爱好者和同伴工程师的任何讨论论坛上发布了这个问题，您将获得这样的答案：</p><p>  ·          &#34;You have a 7-bit address. That means you can address up to 127 slaves.&#34;</p><p>  ·＆＃34;你有一个7位的地址。这意味着您可以解决高达127个奴隶。＆＃34;</p><p> ·          &#34;The number of devices connected to the bus is only limited by the total allowed bus capacitance of 400 pF.&#34;</p><p> ·＆＃34;连接到总线的设备数量仅限于400 pf的总允许总线电容。＆＃34;</p><p>   Well, thank you Internet! I&#39;m feeling smarter already! But seriously, how many sensors can I connect to my Arduino using the I2C bus?</p><p>   好吧，谢谢互联网！我感到更聪明的＆＃39;但是，严重，我可以使用I2C总线连接到我的Arduino的有多少传感器？</p><p>  The last answer was, despite being the most irritating, arguably the most correct one, but only because the question was so vague! So, let&#39;s try to rephrase that question.  When you say &#34;sensor&#34;, do you mean a sensor mounted on a breakout board? Yes? Now that makes a huge difference! So, the question now becomes: how many breakout boards can you connect on the I2C bus?</p><p>  最后的答案是，尽管是最令人恼火的，但可以说是最正确的答案，但只有因为这个问题如此模糊！所以，让＆＃39;试图改写这个问题。当你说＆＃34;传感器＆＃34;，你是否意味着传感器安装在突破板上？是的？现在有一个巨大的差异！那么，现在的问题变得了：你可以在I2C总线上连接多少突发板？</p><p>  This is problem is much easier to solve, and I&#39;m sorry to say, the answer is way lower than 127.</p><p>  这是问题更容易解决，我抱歉说，答案是低于127的答案。</p><p>    Yes, we are taking a quick look on the basics of the I2C bus. But we don&#39;t need to dig too deep to answer our question.</p><p>    是的，我们正在快速看看I2C总线的基础知识。但我们不需要挖掘太深而无法回答我们的问题。 </p><p>  Let&#39;s pretend that this horrible mess of wiggly lines is a device with four pins. Besides the VCC pin to supply your device with power and the GND pin to do whatever ground pins do, you also have the SDA or serial data pin and the SCL or serial clock pin.</p><p>假装让＆＃39假装这令人恐惧的线条是一个有四个引脚的设备。除VCC引脚提供电源和GND引脚的VCC引脚外，您还拥有SDA或串行数据引脚和SCL或串行时钟引脚。</p><p>  Maybe you&#39;ve noticed, both the SDA and the SCL pins are connected to the ground through a switch within the device. This is, of course, a very simple representation. When you connect two devices to each other using the I2C bus, you just need to connect the VCC pin from one device to the VCC pin from the other device, and do the same to the SDA, SCL and GND pins. Well, just look at the pretty picture!</p><p>  也许你注意到，SDA和SCL引脚都通过设备内的开关连接到地面。当然，这是一个非常简单的表示。当您使用I2C总线互相连接两个设备时，只需将VCC引脚从一个设备连接到来自其他设备的VCC引脚，并对SDA，SCL和GND引脚执行相同。好吧，看看漂亮的照片！</p><p>  One of the devices will assume the role of the Master. That means that it will be in charge of generating the clock signal on the SCL line, and use the SDA line to send commands to the Slave. The Slave, on the other hand, uses the SDA line to send data back to the Master. In most situations, the Arduino will be the Master, while any device being controlled by the Arduino, like a sensor, will act as a Slave.</p><p>  其中一个设备将呈现主机的角色。这意味着它将负责在SCL行上生成时钟信号，并使用SDA线将命令发送到从站。另一方面，从站使用SDA线将数据发送回主。在大多数情况下，Arduino将成为主人，而任何由Arduino控制的设备，如传感器，就像一个奴隶一样。</p><p>  But we&#39;re not done yet! For the I2C bus to work, we need to connect one resistor between the VCC line and the SDA line, as well as another resistor between the VCC line and the SCL line. These are called Pull-up Resistors.</p><p>  但我们＆＃39;还没有完成！对于I2C总线工作，我们需要在VCC线和SDA线之间连接一个电阻，以及VCC线和SCL线之间的另一个电阻。这些称为上拉电阻。</p><p>   How does it look like if we have more than one Slave, i.e. more than one sensor connected to the Arduino? Well, in this case you would still have one resistor to the SDA line and another for the SCL line. It doesn&#39;t matter if you have only one sensor or fifty sensors connected to your Arduino, you only need one resistor on the SCL line and one resistor on the SDA line.</p><p>   如果我们有多个从属，那么它是如何看起来的，即多于一个传感器连接到Arduino？嗯，在这种情况下，您仍然可以将一个电阻与SDA线路和另一个用于SCL线的电阻。它并不是，如果您只有一个传感器或50个传感器连接到您的Arduino，则在SCL线上只需要一个电阻和SDA线上的一个电阻。</p><p>    But why is that? Why do we need any resistor at all? And why should I care? Well, as you might be suspecting by now, one of the main problems caused by connecting multiple breakout board on the I2C boards is caused by pull-up resistors.</p><p>    但为什么这么做？为什么我们根本需要任何电阻？我为什么要关心？好吧，正如您现在可能怀疑的那样，通过上拉电阻导致多次分子板引起的多个断路板引起的主要问题之一是由上拉电阻引起的。</p><p>    To understand this, let&#39;s see how a digital signal is generated, for example, on the SCL line. The SDA line works the same way, but for the sake of clarity, I am only showing the SCL line here.</p><p>    要了解这一点，请注意，例如，如何在SCL线上生成数字信号。 SDA线路以同样的方式工作，但为了清楚起见，我只是在这里显示SCL线。 </p><p>  In this circuit, the voltage on the VCC line is 5V (or 3.3V, depending on your power supply), the voltage on the GND line is 0V and the voltage on the SCL line, the actual signal being generated, depends on the position of the switch.</p><p>在该电路中，VCC线上的电压为5V（或3.3V，根据电源），GND线路上的电压为0V，SCL线上的电压，产生的实际信号取决于位置开关。</p><p>  If the switch is open, the 5V potential from the VCC line will also be on the SCL line. In this case, the voltage on the SCL line will be 5V and the signal will be interpreted as a logic HIGH. Since the switch is open, there will be no current flowing through the device.</p><p>  如果开关打开，则VCC线路的5V电位也将在SCL线上。在这种情况下，SCL线上的电压将是5V，并且信号将被解释为逻辑高。由于开关打开，因此不会流过设备。</p><p>   If the switch is closed, the 0V from the GND line will also be on the SCL line and the signal will be interpreted as a logic LOW. Now we have a difference of potential across the resistor and a current will be flowing through the switch.</p><p>   如果开关关闭，则来自GND线的0V也将在SCL线上，并且信号将被解释为逻辑低。现在我们在电阻器上的电位差异，电流将流过开关。</p><p>   Opening and closing the switch generates a nice digital signal, varying between 0V and 5V.</p><p>   打开和关闭开关产生良好的数字信号，在0V和5V之间变化。</p><p>      Of course, this is how an ideal digital signal looks like, but let&#39;s see how a real signal looks like. If you connect a single sensor mounted on a breakout board and connect it to your Arduino using the I2C bus, you would have something like this:</p><p>      当然，这就是理想的数字信号看起来的样子，但是让＆＃39; s看真正的信号如何看起来像。如果连接安装在备用板上的单个传感器并使用I2C总线将其连接到您的Arduino，则会有类似的东西：</p><p>    Great, now take an oscilloscope and measure the signal on the SCL line. What do you see?</p><p>    伟大的，现在拍摄示波器并测量SCL线上的信号。你看到了什么？</p><p>  As you can see, the blue line, the measured signal on the SCL line, is quite different from the ideal digital signal. The maximum value is a bit lower than 5V, the minimum value is a bit higher than 0V and the voltage takes a long time to go from 0V to 5V. Despite all that, this is how a good signal looks like!</p><p>  如您所见，蓝线，SCL线上的测量信号与理想的数字信号完全不同。最大值是低于5V的位，最小值高于0V，电压需要长时间才能从0V到5V。尽管如此，这就是良好的信号看起来的看起来！ </p><p>  Now let&#39;s pretend we are connecting not one breakout board to an Arduino, but multiple boards at the same time.</p><p>现在假装我们假装我们将不是一个突破板连接到Arduino，而是同时连接多个板。</p><p>    As mentioned earlier, connecting multiple sensors on the I2C bus means connecting the SCL pins from all boards to each other. Therefore, the SCL signal being generated by the Arduino is shared by all sensors. The same applies to the SDA signal, as well as to the power supply (VCC) and the ground (GND). So, how does the SCL signal looks like now?</p><p>    如前所述，将多个传感器连接在I2C总线上意味着将SCL引脚从所有板连接到彼此。因此，由Arduino生成的SCL信号由所有传感器共享。这同样适用于SDA信号，以及电源（VCC）和地面（GND）。那么，SCL信号现在如何看？</p><p>  The new SCL signal, shown in red, looks somehow more like the ideal signal than before. The voltage at logic LOW is now much higher than before, but the voltage at logic HIGH looks the same and now the voltage increases much faster from low to high. Well, it&#39;s not that bad, right?</p><p>  新的SCL信号以红色显示，看起来比以前更像理想的信号。逻辑低电平的电压现在远高于以前，但逻辑高的电压看起来相同，现在电压从低到高电平增加得多。好吧，它和＃39不是那么糟糕，对吗？</p><p>  Very wrong! And the single reason is the new voltage at logic LOW. To understand how bad that is, let&#39;s go back to our first diagram.</p><p>  非常错误！单一原因是逻辑低电平的新电压。要了解这是多么糟糕，让＆＃39; s回到我们的第一个图表。</p><p>    Earlier I&#39;ve shown a mechanical switch connected between the SCL pin and the GND pin. But there are no mechanical switches within the device. Instead, the connection is made by a transistor operating as a switch.</p><p>    在SCL引脚和GND引脚之间，之前的I＆＃39; ve示出了连接在SCL引脚和GND引脚之间的机械开关。但设备内没有机械开关。相反，通过作为开关操作的晶体管进行连接。</p><p>  By turning the transistor ON and OFF, you can change the SCL signal to logic LOW and logic HIGH. When the transistor is OFF, the resistance on the transistor between the SCL and the GND pins is very high, so that practically no current flows through the transistor and, consequently, through the resistor. The voltage on the SCL line will be very close to 5V, so it will be interpreted as a logic HIGH.</p><p>  通过打开和关闭晶体管，可以将SCL信号更改为逻辑低且逻辑高。当晶体管关闭时，SCL和GND引脚之间的晶体管上的电阻非常高，因此实际上没有电流流过晶体管，并且因此，通过电阻器流过晶体管。 SCL线上的电压将非常接近5V，因此它将被解释为逻辑高。</p><p>  When the transistor is ON, the resistance across the transistor becomes very small, however, it is not zero. A small current now flows through the resistor and, most importantly, across the transistor. The voltage on the SCL line is equal to the voltage drop across the transistor. Since this voltage drop is very close to 0V, the SCL signal will be interpreted as a logic LOW.</p><p>  当晶体管接通时，晶体管上的电阻变得非常小，但是，它不是零。小电流现在流过电阻，最重要的是，在晶体管上。 SCL线上的电压等于晶体管上的电压降。由于该电压降非常接近0V，因此SCL信号将被解释为逻辑低。 </p><p>  Now comes the big question: what happens if we decrease the resistance of the pull-up resistor? The current across the resistor increases, of course. But the same current also flows through the transistor!</p><p>现在是大问题：如果我们减少上拉电阻的电阻会发生什么？当然，电阻器上的电流增加。但相同的电流也流过晶体管！</p><p>    A larger current across the transistor leads to more heat being dissipated within the device, and overheating is a major cause of failures of semiconductor devices. Knowing that, the  I2C bus Specification and User Manual sets a maximum of 3mA across the transistor. This current is known as a sink current.</p><p>    晶体管穿过较大电流导致在装置内消散的热量，并且过热是半导体器件故障的主要原因。知道这一点，I2C总线规范和用户手册在晶体管上设置了最多3MA。该电流被称为宿电流。</p><p>  That means that devices specified for using the I2C bus must work with a sink current of 3mA flowing across the transistor. It also means, that circuit designers should take this limit in mind when dimensioning the pull-up resistors.</p><p>  这意味着使用I2C总线指定的设备必须使用穿过晶体管的3mA的宿电流。它还意味着，当尺寸调整上拉电阻时，电路设计人员应考虑到这一限制。</p><p>  And how do we know if the sink current in our circuit is above the 3mA limit? Well, increasing the sink current means that the voltage drop across the transistor also increases. The voltage drop across the transistor, also known as the low-level output voltage, is the voltage level when the signal is at a logic LOW.</p><p>  我们如何知道我们的电路中的吸收电流是否高于3MA限制？嗯，增加吸收电流意味着晶体管上的电压降也会增加。晶体管上的电压降，也称为低电平输出电压，是信号处于低电平的电压电平。</p><p>  The I2C bus specification and user manual also sets a maximum of 0.4V for the low-level output voltage, because it indicates that a maximum sink current of 3mA is flowing across the transistor. Therefore, whenever we measure the SDA or SCL signals and the voltage at logic LOW is higher than 0.4V, we know that the sink current is too high!</p><p>  I2C总线规格和用户手册还为低电平输出电压设置为0.4V，因为它表示3MA的最大宿电流在晶体管上流动。因此，每当我们测量SDA或SCL信号时，逻辑低的电压高于0.4V，我们都知道宿电流过高！</p><p>  With the maximum sink current of 3mA and the maximum low-level output voltage of 0.4V we can calculate the minimum value for the pull-up resistors. All we have to do is consider the worst case situation when operating within the specification. The minimum value for each pull-up resistor equals the voltage drop across the resistor divided by the maximum sink current of 3mA.</p><p>  具有3mA的最大沉降电流和0.4V的最大低电平输出电压，我们可以计算上拉电阻的最小值。我们所要做的就是考虑在规范内运作时最糟糕的情况。每个上拉电阻的最小值等于电阻器上的电压降除了3mA的最大宿电流。</p><p>  For a power supply of 5V, each pull-up resistor must have at least 1.53kΩ, while for a power supply of 3.3V, each resistor must be of at least 967Ω.</p><p>  对于5V的电源，每个上拉电阻必须具有至少1.53kΩ，而对于3.3V的电源，每个电阻必须至少为967Ω。 </p><p>  Of course, it does not mean that whenever the sink current goes beyond 3mA, that the device will stop working immediately. But you should always be careful when operating a device beyond its specification, because it can lead to communication failures, reduce its life time and even damage the device permanently.</p><p>当然，它并不意味着只要吸收电流超过3mA，设备将停止立即工作。但是，在超出其规格之外的设备时，您应该始终要小心，因为它可以导致通信故障，降低其终身时间，甚至永久损坏设备。</p><p>    Now back to our problem: how many breakout boards can you connect on the I2C bus? Not many… You probably noticed already, each breakout board has its own pair of pull-up resistors. The value from these resistors vary from board to board, but most have 10kΩ, 4.7kΩ or 2.2kΩ.</p><p>    现在返回我们的问题：您可以在I2C总线上连接多少突发板？没有很多......你可能已经注意到，每个突破板都有自己的一对上拉电阻。这些电阻器的值因电路板而异，但大多数有10kΩ，4.7kΩ或2.2kΩ。</p><p>  When we connect multiple breakout boards together, we are actually connecting these resistors in parallel to each other, decreasing the total resistance. Even connecting two boards with pull-up resistors of 2.2kΩ would reduce the overall resistance to 1.1kΩ. That would still be fine for a power supply of 3.3V, but would be lower than the minimum value of 1.53kΩ for a VCC of 5V.</p><p>  当我们将多个断路板连接在一起时，我们实际上是将这些电阻彼此平行连接，降低总电阻。即使将两个板连接到2.2kΩ的上拉电阻也会将整体电阻降低到1.1kΩ。对于3.3V的电源仍然可以很好，但VCC为5V的最小值为1.53kΩ。</p><p>  In the best case scenario, using boards with pull-up resistors of 10kΩ, you could connect 10 boards together, resulting in a total pull-up resistance of 1kΩ, which would be fine for a VCC of 3.3V. For a VCC of 5V however, you could connect 6 boards with pull-up resistors of 10kΩ each, resulting in a total resistance of 1.67kΩ.</p><p>  在最佳情况下，使用具有10kΩ的上拉电阻的电路板，可以将10个板连接在一起，导致总上拉电阻为1kΩ，这对于3.3V的VCC可以很好。然而，对于VCC为5V但是，您可以将6个板连接有6个电阻，每个电阻为10kΩ，导致总电阻为1.67kΩ。</p><p>  You can also measure the total resistance on the SCL or SDA line with a multimeter. All you have to do is disconnect the power supply from your circuit and measure the resistance between the SCL pin (or SDA pin) and the VCC pin.</p><p>  您还可以使用万用表测量SCL或SDA线路上的总电阻。您所要做的就是断开电源的电源，并测量SCL引脚（或SDA引脚）和VCC引脚之间的电阻。</p><p>    I hope this article could help you understand the I2C bus a little more. If you want see this tutorial as a YouTube video, just click on the link below.</p><p>    我希望这篇文章可以帮助您了解I2C总线。如果您希望将本教程视为YouTube视频，只需单击下面的链接即可。 </p></div><div id="story_share_this"><div class="sharethis-inline-share-buttons"></div></div><div class="text-break sotry_link page_narrow"><a target="_blank" href="https://www.bluedot.space/tutorials/how-many-devices-can-you-connect-on-i2c-bus/">https://www.bluedot.space/tutorials/how-many-devices-can-you-connect-on-i2c-bus/</a></div><div class="story_tags page_narrow"><button type="button" class="btn btn-light my_tag"><a href="/tag/设备/">#设备</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/connect/">#connect</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/scl/">#scl</a></button></div></div><div class="my_movie_list_item shadow p-3 mb-5 bg-white rounded"><button type="button" class="btn btn-link my_tag"><a href="/tag/web2.0/">#web2.0</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/google/">#google</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/设计/">#设计</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/创意/">#创意</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/摄影/">#摄影</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/图片/">#图片</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/游戏/">#游戏</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/软件/">#软件</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/视频/">#视频</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/手机/">#手机</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/广告/">#广告</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/iphone/">#iphone</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/网站/">#网站</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/免费/">#免费</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/apple/">#apple</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/下载/">#下载</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/windows/">#windows</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/微软/">#微软</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/firefox/">#firefox</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/blog/">#blog</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/音乐/">#音乐</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/苹果/">#苹果</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/博客/">#博客</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/wordpress/">#wordpress</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/恶搞/">#恶搞</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/qq/">#qq</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/艺术/">#艺术</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/web/">#web</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/工具/">#工具</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/分享/">#分享</a></button></div></div></div><div id="my_footer"><div class=""><a href="/tags/">tags</a> <a href="/users/">users</a></div>&copy;2012-2021 diglog.com </div></div></body></html>