<!doctype html><html lang="zh-hans"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>苹果公司允许MacOS Big Sur上的某些网络流量绕过防火墙Apple Lets Some Network Traffic Bypass Firewalls on MacOS Big Sur</title><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"><link rel="stylesheet" href="/img/css.css?random="><link data-rh="true" rel="icon" href="/img/favicon.ico"/><script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?03c1a0f31299b4a2fbb83c34d6beaac9";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script><script data-ad-client="ca-pub-6067137220025946" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script type="text/javascript" src="https://platform-api.sharethis.com/js/sharethis.js#property=5effb96910009800120b8d4d&product=inline-share-buttons" async="async"></script></head><body><div id="my_header"><div class="container"><nav class="navbar navbar-expand-lg"><a class="navbar-brand" href="/"><img alt="diglog" src="/img/logo.v1.gif" class="rounded-sm"></a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarNavAltMarkup"><div class="navbar-nav"></div></div></nav></div></div><div class="container"><div id="my_content"><h1 class="page_narrow">Apple Lets Some Network Traffic Bypass Firewalls on MacOS Big Sur<br/>苹果公司允许MacOS Big Sur上的某些网络流量绕过防火墙</h1><div class="row"><div class="col-lg-12 col-12"><div class="my_story_list_item shadow p-3 mb-5 bg-white rounded"><div class="story_page_pub_time page_narrow">2020-11-22 10:43:51</div><div class="story_img_container"><a href="http://img2.diglog.com/img/2020/11/9d4673f1ae1fd359234dadb83a62dfc4.jpeg"><img src="http://img2.diglog.com/img/2020/11/9d4673f1ae1fd359234dadb83a62dfc4.jpeg" class="img-fluid my_story_img" onerror="this.style.display='none'"></a></div><div class="page_narrow text-break page_content"><p>Firewalls aren’t just for corporate networks. Large numbers of security- or privacy-conscious people also use them to filter or redirect traffic flowing in and out of their computers. Apple recently made a major change to macOS that frustrates these efforts.</p><p>防火墙不仅适用于公司网络。大量具有安全意识或隐私意识的人员还使用它们来过滤或重定向流入和流出计算机的流量。苹果最近对macOS进行了重大更改，这挫败了这些努力。</p><p> Beginning with Big Sur released last week, some 50 Apple-specific apps and processes are no longer routed through firewalls like Little Snitch and Lulu. The undocumented exemption came to light only after Patrick Wardle, a security researcher at a Mac and iOS enterprise developer Jamf, disclosed the change over the weekend.</p><p> 从上周发布的Big Sur开始，大约50个Apple特定的应用和过程不再通过Little Snitch和Lulu等防火墙进行路由。 Mac和iOS企业开发人员Jamf的安全研究员Patrick Wardle在周末披露了这一更改之后，才发现了无证豁免。</p><p> In Big Sur Apple decided to exempt many of its apps from being routed thru the frameworks they now require 3rd-party firewalls to use (LuLu, Little Snitch, etc.) 🧐  Q: Could this be (ab)used by malware to also bypass such firewalls? 🤔  A: Apparently yes, and trivially so 😬😱😭  pic.twitter.com/CCNcnGPFIB</p><p> 在大苏尔，苹果决定免除许多应用程序通过其现在需要使用第三方防火墙（LuLu，Little Snitch等）的框架的路由。🧐问：这是否可能被恶意软件滥用而绕过这样的防火墙？ 🤔-答：显然是的，也很容易-😬😱😭pic.twitter.com/CCNcnGPFIB</p><p>— patrick wardle (@patrickwardle)  November 14, 2020</p><p>-帕特里克·沃德尔（@patrickwardle）2020年11月14日</p><p>  To demonstrate the risks that come with this move, Wardle—a former hacker for the NSA—demonstrated how malware developers could exploit the change to make an end-run around a tried-and-true security measure. He set Lulu to block all outgoing traffic on a Mac running Big Sur and then ran a small programming script that interacted with one of the apps that Apple exempted. The python script had no trouble reaching a command and control server he set up to simulate one commonly used by malware to receive commands and exfiltrate sensitive data.</p><p>  为了证明此举带来的风险，前国家安全局（NSA）黑客沃德尔（Wardle）演示了恶意软件开发人员如何利用此更改以经过实践检验的安全措施进行最终解决。他设置Lulu来阻止运行Big Sur的Mac上的所有传出流量，然后运行一个小型编程脚本，该脚本与Apple豁免的其中一个应用程序进行了交互。 python脚本可以毫不费力地到达他设置的命令和控制服务器，以模拟恶意软件常用的命令和控制服务器，以接收命令并泄露敏感数据。</p><p> “It kindly asked (coerced?) one of the trusted Apple items to generate network traffic to an attacker-controlled server and could (ab)use this to exfiltrate files,” Wardle, referring to the script, told me. “Basically, ‘Hey Mr. Apple Item, can you please send this file to Patrick’s remote server.’ And it would kindly agree. And since the traffic was coming from the trusted item, it would never be routed through the firewall... meaning the firewall is 100% blind.”</p><p>“好心地要求（强迫？）一个受信任的Apple产品来生成到攻击者控制的服务器的网络流量，并且可以（滥用）它来泄露文件，” Wardle提到脚本时告诉我。 “基本上，‘Apple先生，您能把这个文件发送到Patrick的远程服务器吗？’我们会同意的。而且由于流量来自受信任的项目，因此永远不会通过防火墙进行路由……这意味着防火墙是100％盲目的。”</p><p>    Wardle  tweeted a portion of a bug report he submitted to Apple during the Big Sur beta phase. It specifically warns that “essential security tools such as firewalls are ineffective” under the change.</p><p>    Wardle在Twitter上发布了他在Big Sur Beta阶段提交给Apple的错误报告的一部分。它特别警告说，更改后“诸如防火墙之类的基本安全工具无效”。</p><p> Apple has yet to explain the reason behind the change. Firewall misconfigurations are often the source of software not working properly. One possibility is that Apple implemented the move to reduce the number of support requests it receives and make the Mac experience better for people not schooled in setting up effective firewall rules. It’s not unusual for firewalls to exempt their own traffic. Apple may be applying the same rationale.</p><p> 苹果尚未解释这一变化背后的原因。防火墙配置错误通常是导致软件无法正常运行的原因。一种可能性是苹果实施了此举，以减少其收到的支持请求的数量，并使Mac教育给那些没有学历的人们建立有效的防火墙规则。防火墙免除自己的流量并不罕见。苹果可能会采用相同的理由。</p><p> But the inability to override the settings violates a core tenet that people ought to be able to selectively restrict traffic flowing from their own computers. In the event a Mac does become infected, the change also gives hackers a way to bypass what for many is an effective mitigation against such attacks.</p><p> 但是无法覆盖设置违反了一个核心原则，即人们应该能够有选择地限制来自其自己计算机的流量。如果Mac确实受到感染，此更改还为黑客提供了一种绕开许多人可以有效缓解此类攻击的方法。</p><p> “The issue I see is that it opens the door for doing exactly what Patrick demoed... malware authors can use this to sneak data around a firewall,” Thomas Reed, director of Mac and mobile offerings at security firm Malwarebytes, said. “Plus, there’s always the potential that someone may have a legitimate need to block some Apple traffic for some reason, but this takes away that ability without using some kind of hardware network filter outside the Mac.”</p><p> 安全公司Malw​​arebytes的Mac和移动产品部门主管Thomas Reed表示：“我看到的问题是，它确实为Patrick演示的事情打开了大门……恶意软件作者可以使用它来将数据潜入防火墙。” “此外，总有可能出于某种原因某人可能出于某种合法的需要阻止某些Apple流量，但这无需使用Mac外部的某种硬件网络过滤器就可以消除这种能力。”</p><p> People who want to know what apps and processes are exempt can open the macOS terminal and enter  sudo defaults read /System/Library/Frameworks/NetworkExtension.framework/Resources/Info.plist ContentFilterExclusionList.</p><p>想要知道哪些应用程序和进程免税的人可以打开macOS终端并输入sudo默认值，请参阅/System/Library/Frameworks/NetworkExtension.framework/Resources/Info.plist ContentFilterExclusionList。</p><p>  The change came as Apple deprecated macOS kernel extensions, which software developers used to make apps interact directly with the OS. The deprecation included NKEs—short for network kernel extensions—that third-party firewall products used to monitor incoming and outgoing traffic.</p><p>  这项更改是在Apple不赞成使用macOS内核扩展的情况下进行的，该软件开发人员曾经使用过这些扩展来使应用程序直接与OS进行交互。不推荐使用的是NKE（网络内核扩展的缩写），第三方防火墙产品用来监视传入和传出流量。</p><p> In place of NKEs, Apple introduced a new user-mode framework called the  Network Extension Framework. To run on Big Sur, all third-party firewalls that used NKEs had to be rewritten to use the new framework.</p><p> 苹果公司代替NKE，引入了一种新的用户模式框架，称为网络扩展框架。要在Big Sur上运行，必须重写所有使用NKE的第三方防火墙以使用新框架。</p><p> Apple representatives didn’t respond to emailed questions about this change. This post will be updated if they respond later. In the meantime, people who want to override this new exemption will, as Reed noted above, have to rely on a network filter that runs from outside their Mac.</p><p> Apple代表未回复有关此更改的电子邮件问题。如果他们稍后回复，则该帖子将被更新。同时，如上面Reed所述，想要取消这项新豁免的人将不得不依靠从Mac外部运行的网络过滤器。</p></div><div id="story_share_this"><div class="sharethis-inline-share-buttons"></div></div><div class="text-break sotry_link page_narrow"><a target="_blank" href="https://arstechnica.com/gadgets/2020/11/apple-lets-some-big-sur-network-traffic-bypass-firewalls/">https://arstechnica.com/gadgets/2020/11/apple-lets-some-big-sur-network-traffic-bypass-firewalls/</a></div><div class="story_tags page_narrow"><button type="button" class="btn btn-light my_tag"><a href="/tag/苹果/">#苹果</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/apple/">#apple</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/绕过/">#绕过</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/lets/">#lets</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/防火墙/">#防火墙</a></button></div></div><div class="my_movie_list_item shadow p-3 mb-5 bg-white rounded"><button type="button" class="btn btn-link my_tag"><a href="/tag/web2.0/">#web2.0</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/google/">#google</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/设计/">#设计</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/创意/">#创意</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/摄影/">#摄影</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/图片/">#图片</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/游戏/">#游戏</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/软件/">#软件</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/视频/">#视频</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/手机/">#手机</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/广告/">#广告</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/iphone/">#iphone</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/网站/">#网站</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/免费/">#免费</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/下载/">#下载</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/windows/">#windows</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/苹果/">#苹果</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/微软/">#微软</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/apple/">#apple</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/blog/">#blog</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/firefox/">#firefox</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/音乐/">#音乐</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/博客/">#博客</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/wordpress/">#wordpress</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/恶搞/">#恶搞</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/艺术/">#艺术</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/qq/">#qq</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/web/">#web</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/工具/">#工具</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/分享/">#分享</a></button></div></div></div><div id="my_footer"><div class=""><a href="/tags/">tags</a> <a href="/users/">users</a></div>&copy; 2020 diglog.com </div></div></body></html>