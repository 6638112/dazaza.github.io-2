<!doctype html><html lang="zh-hans"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>检查异常：Java最大的错误(2014)</title><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"><link rel="stylesheet" href="/img/css.css?random="><link data-rh="true" rel="icon" href="/img/favicon.ico"/><script data-ad-client="ca-pub-6067137220025946" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script type="text/javascript" src="https://platform-api.sharethis.com/js/sharethis.js#property=5effb96910009800120b8d4d&product=inline-share-buttons" async="async"></script>
<script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?03c1a0f31299b4a2fbb83c34d6beaac9";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script></head><body><div id="my_header"><div class="container"><nav class="navbar navbar-expand-lg"><a class="navbar-brand" href="/"><img alt="diglog" src="/img/logo.v1.gif" class="rounded-sm"></a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarNavAltMarkup"><div class="navbar-nav"></div></div></nav></div></div><div class="container"><div id="my_content"><h1 class="page_narrow">检查异常：Java最大的错误(2014)</h1><div class="row"><div class="col-lg-12 col-12"><div class="my_story_list_item shadow p-3 mb-5 bg-white rounded"><div class="story_page_pub_time page_narrow">2020-09-11 22:44:04</div><div class="page_narrow text-break page_content"><p>倡导者声称，他们确保了从故障中进行检查和恢复。批评者说，“catch”块几乎永远无法从异常中恢复，并且是错误的常见来源。</p><p>同时，Java8和lambdas也在这里。在Java世界中，检查异常是否已经过时了？</p><p>在90年代中期，Sun的詹姆斯·高斯林提出了一种新的语言。</p><p>当时，C++编程要求对每个函数返回进行错误检查。他认为必须有更好的方法，并将“异常”的概念构建到Java中。</p><p>检查异常的目的是在本地标记并强制开发人员处理可能的异常。必须在方法签名上声明或处理检查的异常。</p><p>这是为了鼓励软件可靠性和弹性。有一种意图是从意外情况中“恢复”-成功以外的可预测结果，例如尝试付款时出现的资金不足异常。至于“复苏”到底需要什么，就不那么清楚了。</p><p>Java中还包括运行时异常。由于空指针、数据错误和非法状态/访问可能出现在代码中的任何位置，因此将这些设置为RuntimeException的子类型。</p><p>运行时异常可以在任何地方抛出，不需要声明，而且更加方便。但是用它们来代替是正确的吗？</p><p>这里的关键点是，运行时和检查过的异常在功能上是等价的。如果没有检查过的异常可以做的处理或恢复，那么运行时异常就做不到。</p><p>反对“已检查”异常的最大理由是大多数异常无法修复。简单的事实是，我们不拥有崩溃的代码/子系统。“我们看不到实现，我们不对它负责，也不能修复它。</p><p>特别有问题的是JDBC(SQLException)和RMI for EJB(RemoteException)领域。与按照最初的“检查异常”概念识别可修复的意外情况不同，这些普遍存在的、实际上无法修复的系统可靠性问题被广泛宣布。</p><p>对于任何方法，失败的可能性包括它调用的所有子方法。潜在故障会累积调用树。在方法签名上声明这些不再为开发人员提供特定的本地高亮显示，以查看遍及整个调用树的声明异常。</p><p>大多数EJB开发人员都经历过这种情况-通过层、层或整个代码库，方法上需要声明的异常。调用具有不同异常的方法需要调整数十个方法。</p><p>许多开发人员被告知要捕获低级异常，并将它们作为较高级别(应用程序级)检查异常重新抛出。这需要大量的--每个项目2000个以上--不起作用的“接球”块。</p><p>吞噬异常、隐藏原因、双重记录和返回‘null’/未初始化的数据都变得很常见。大多数项目可以统计出600多个错误编码或完全错误。</p><p>最终，开发人员反抗了大量的“catch”块，而这些块已经成为错误的来源。</p><p>然后我们来看看Java8，它具有新的函数编程和特性--比如lambdas、Streams和函数组合。</p><p>这些功能构建在泛型之上-参数和amp；返回类型是泛化的，因此可以编写执行公共操作的迭代和流操作(forEach、map、flatMap)，而不考虑项目类型。</p><p>在Java中不可能提供流操作(例如，使用声明某些检查异常的lambda的流操作(例如，.Stream.map))，&amp；会将相同的检查异常透明地传递给周围的代码。</p><p>这一直是反对检查异常的要点-所有介入代码，在抛出和接收“catch”块之间，都必须知道异常。</p><p>将其“包装”在RuntimeException中的解决方法隐藏了异常的原始类型-使原始概念中设想的特定于异常的“catch”块变得毫无用处。</p><p>最后，我们可以通过注意Java8中的新“函数接口”没有声明检查异常来概括Java的新理念。</p><p>与早期语言相比，Java中的异常在可靠性和错误处理方面提供了重大优势。Java以C/C++无法实现的方式启用了可靠的服务器和业务软件。</p><p>在最初的形式中，检查的异常是试图处理意外情况，而不是失败。值得称赞的目标是突出具体的可预测点(无法连接、找不到文件等)&确保开发人员处理这些问题。</p><p>最初的概念中从来没有包括的是，强迫宣布一系列无法挽回的系统性失败。这些失败从来都不是正确的，不能被宣布为已检查的异常。</p><p>失败通常在代码中是可能的，EJB、web&amp；Swing/AWT容器已经通过提供最外层的“失败请求”异常处理程序迎合了这种情况。最基本的正确策略是回滚事务&amp；返回错误。</p><p>运行时异常允许对检查的异常进行任何可能的异常处理，但避免了限制性的编码限制。这简化了编码&amp；使其更容易遵循“早抛、晚接”的最佳实践，即在最外层/最高级别处理异常。</p><p>领先的Java框架和影响力现在已经明确地远离了受控异常。Spring、Hibernate和现代Java框架/应用程序供应商只使用运行时异常，这种便利性是它们受欢迎的一个主要因素。</p><p>乔什·布洛赫(Java Collection Framework)、罗德·约翰逊(Rod Johnson)、安德斯·海尔斯伯格(Anders Hejlsberg)(C#之父)、加文·金(Gavin King)和斯蒂芬·科尔伯恩(Stephen Colebourn)(JodaTime)等人物都站出来反对已检查的异常。</p><p>现在，在Java 8中，λ是向前迈出的最基本的一步，这些语言功能将从内部的函数操作中抽象出“控制流”。正如我们已经看到的，这使得检查异常&amp；要求“立即声明或处理”已经过时。</p><p>对于开发人员来说，注意可靠性和诊断可能的故障点(意外情况)(如文件打开、数据库连接等)总是很重要的。如果我们在这一点上提供良好的错误信息，我们将创建自诊断软件-这是工程成就的巅峰。</p><p>但是我们应该用未检查的异常来做这件事，如果我们必须重新抛出，应该总是使用RuntimeException或特定于应用程序的子类。</p><p>正如Stephen Colebourn所说，如果您的项目仍然在使用或倡导检查异常，那么您的技能已经过时了5-10年。Java已经向前看了。</p></div><div id="story_share_this"><div class="sharethis-inline-share-buttons"></div></div><div class="text-break sotry_link page_narrow"><a target="_blank" href="http://literatejava.com/exceptions/checked-exceptions-javas-biggest-mistake/">http://literatejava.com/exceptions/checked-exceptions-javas-biggest-mistake/</a></div><div class="story_tags page_narrow"><button type="button" class="btn btn-light my_tag"><a href="/tag/java/">#java</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/检查/">#检查</a></button></div></div><div class="shadow p-3 mb-5 bg-white rounded clearfix"><div class="container"><div class="row"><div class="col-sm"><div><a target="_blank" href="/story/1023016.html"><img src="http://img2.diglog.com/img/2020/9/thumb_91b0db7db92870f65deeb4ac8255c1b6.png" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1023016.html">Yyyy vs yyyy-Java日期格式化程序伤害我大脑的那一天</a></div><span class="my_story_list_date">2020-9-10 2:59</span></div><div class="col-sm"><div><a target="_blank" href="/story/1022910.html"><img src="http://img2.diglog.com/img/2020/9/thumb_7567076278dd6403933fe078ea0b3715.jpeg" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1022910.html">APPLE][以及用JavaScript和HTML5编写的APPLE//e仿真器</a></div><span class="my_story_list_date">2020-9-9 15:4</span></div><div class="col-sm"><div><a target="_blank" href="/story/1022777.html"><img src="http://img2.diglog.com/img/2020/9/thumb_1d570343149c1ad3519c6bb1698e6b74.png" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1022777.html">JDK(Java)主线开发现在基于GitHub</a></div><span class="my_story_list_date">2020-9-9 0:46</span></div><div class="col-sm"><div><a target="_blank" href="/story/1022762.html"><img src="http://img2.diglog.com/img/2020/9/thumb_952156bea4092119dc024c66aae36808.jpg" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1022762.html">你真的不需要那么多JavaScript[视频]</a></div><span class="my_story_list_date">2020-9-8 23:31</span></div></div></div></div><div class="my_movie_list_item shadow p-3 mb-5 bg-white rounded"><button type="button" class="btn btn-link my_tag"><a href="/tag/web2.0/">#web2.0</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/google/">#google</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/设计/">#设计</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/创意/">#创意</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/摄影/">#摄影</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/游戏/">#游戏</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/图片/">#图片</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/软件/">#软件</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/视频/">#视频</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/手机/">#手机</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/广告/">#广告</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/apple/">#apple</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/iphone/">#iphone</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/网站/">#网站</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/免费/">#免费</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/下载/">#下载</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/windows/">#windows</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/微软/">#微软</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/firefox/">#firefox</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/苹果/">#苹果</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/blog/">#blog</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/音乐/">#音乐</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/博客/">#博客</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/wordpress/">#wordpress</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/恶搞/">#恶搞</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/艺术/">#艺术</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/qq/">#qq</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/web/">#web</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/谷歌/">#谷歌</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/工具/">#工具</a></button></div></div></div><div id="my_footer"><div class=""><a href="/tags/">tags</a> <a href="/users/">users</a></div>&copy;2012-2021 diglog.com </div></div></body></html>