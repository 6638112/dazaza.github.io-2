<!doctype html><html lang="zh-hans"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>谷物：WebasseMbly-First编程语言 Grain: WebAssembly-First Programming Language</title><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"><link rel="stylesheet" href="/img/css.css?random="><link data-rh="true" rel="icon" href="/img/favicon.ico"/><script data-ad-client="ca-pub-6067137220025946" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script type="text/javascript" src="https://platform-api.sharethis.com/js/sharethis.js#property=5effb96910009800120b8d4d&product=inline-share-buttons" async="async"></script>
<script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?03c1a0f31299b4a2fbb83c34d6beaac9";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script></head><body><div id="my_header"><div class="container"><nav class="navbar navbar-expand-lg"><a class="navbar-brand" href="/"><img alt="diglog" src="/img/logo.v1.gif" class="rounded-sm"></a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarNavAltMarkup"><div class="navbar-nav"></div></div></nav></div></div><div class="container"><div id="my_content"><h1 class="page_narrow">Grain: WebAssembly-First Programming Language<br/>谷物：WebasseMbly-First编程语言 </h1><div class="row"><div class="col-lg-12 col-12"><div class="my_story_list_item shadow p-3 mb-5 bg-white rounded"><div class="story_page_pub_time page_narrow">2021-05-07 10:46:45</div><div class="story_img_container"><a href="http://img2.diglog.com/img/2021/5/c07be6588c83605dd8903a646bcbb829.jpg"><img src="http://img2.diglog.com/img/2021/5/c07be6588c83605dd8903a646bcbb829.jpg" class="img-fluid my_story_img" onerror="this.style.display='none'"></a></div><div class="page_narrow text-break page_content"><p>Oscar Spencer recently presented Grain, a  new strongly-typed, high-level language that compiles to WebAssembly. Grain includes functional programming features (e.g., type inference, pattern matching, closures) while allowing mutable variables. Grain also has a standard library with composite data structures (Option, Stack, Result) and system calls (e.g., I/O, process handling).</p><p>奥斯卡斯斯宾塞最近呈现谷物，这是一个新的强大的高级语言，可以编译为webassembly。谷物包括功能编程特征（例如，类型推断，模式匹配，闭包），同时允许变形变量。谷物还有一个标准库，具有复合数据结构（选项，堆栈，结果）和系统调用（例如，I / O，过程处理）。</p><p>  In a talk at the WebAssembly Summit 2021, Spencer went through the main characteristics of Grain, a programming language that he said is made exclusively for WebAssembly, its only compile target.</p><p>  在WebasseMbly Summit 2021的谈话中，Spencer经历了粮食的主要特征，他说的一个编程语言专门用于网页，其唯一的编译目标。</p><p>    Grain aims to modernize innovative features from functional and academic programming languages and bring them to the masses. Many languages have had wonderful ideas, but they have ultimately been dismissed as esoteric or too difficult to learn and, consequently, have struggled to rally a large community around them. Grain hopes to bring new life to these ideas and present them in an accessible form that’s easy to use and understand.</p><p>    粮食旨在从功能和学术编程语言中现代化的创新特征，并将它们带到群众。许多语言都有精彩的想法，但他们最终被视为深奥或太难学习，因此，因此，在他们周围的大型社区努力努力。粮食希望为这些想法带来新的生活，并以一种易于使用和理解的无障碍形式展示它们。</p><p>  Grain is strongly typed (with a typechecker from  OCaml), and its type inference significantly reduces the need for type annotations. Besides the  WebAssembly core data types (e.g.,  i32 becomes  Int32), Grain also provides composite types that are commonly used in high-level typed languages. The   Option type represents the possibility of something being present (with the  Some variant), or not (with the  None variant). The   Result type represents a success case (with the  Ok variant), or an error case (with the  Err variant). The   Stack type represents an immutable stack. Additional types and language syntax support tuples, records, arrays, lists, ranges, characters, strings, sets, maps, queues, and more.</p><p>  谷物被强烈打字（具有来自OCAML的TypeChecker），其类型推断显着降低了对型注释的需求。除了WebasseMbly核心数据类型之外（例如，I32变为INT32），谷物还提供了常用于高级类型语言的复合类型。选项类型表示存在某些存在的可能性（具有某些变体），或不（无变量）。结果类型表示成功案例（具有OK变体），或错误情况（具有错误变量）。堆栈类型表示不可变堆栈。其他类型和语言语法支持元组，记录，阵列，列表，范围，字符，字符串，集，映射，队列等。</p><p>    enum Veggie  { Squash , Cabbage , Broccoli  }  enum Fruit  { Apples , Oranges , Bananas  }   enum Inventory &lt;produce &gt;  {  Crate (produce ) ,  Truckload (produce )  }   let veggieInventory  =  [ Crate (Broccoli ) ,  Truckload (Cabbage ) ]  let fruitInventory  =  [ Crate (Apples ) ,  Truckload (Oranges ) ]</p><p>    enum veggie {南瓜，白菜，西兰花} 枚举水果{苹果，橘子，香蕉}  枚举库存＆lt;生产＆gt; {箱（生产），卡车（生产）}  让veggieinventory = [箱（西兰花），卡车装载（卷心菜）] 让Fruitinventory = [箱子（苹果），卡车装载（橘子）]</p><p>  In the previous code, the data constructor  Crate of the  Inventory enum type is parameterized by the  produce type.</p><p>  在上一个代码中，库存枚举类型的数据构造函数由生成类型参数化。</p><p>    enum Topping  { Cheese , Pepperoni , Peppers , Pineapple  }  enum Menu  {  Pizza (Topping ) ,  Calzone (Topping )  }   let item  =  Calzone (Peppers )   match  (item )  {   Calzone (topping )  =&gt;  {   if  ( checkSpecials (topping ) )  {   print ( &#34;These are half off this week.&#34; )   }  else  {   print ( &#34;No current specials.&#34; )   }   } ,  _  =&gt;  print ( &#34;No current specials.&#34; )  }</p><p>    Enum Topping {奶酪，意大利辣味辣椒，辣椒，菠萝} 枚举菜单{披萨（顶部），Calzone（Topping）}  让项目= Calzone（辣椒）  匹配（项目）{  Calzone（顶部）=＆gt; {  if（检查专业（顶部））{  打印（＆＃34;这是本周的一半。＆＃34;）  }  别的  {  打印（＆＃34;没有目前的特色。＆＃34;）  }  }， _ =＆gt;打印（＆＃34;没有目前的特色。＆＃34;） } </p><p>  In the previous code,  topping is bound to the value of type  Topping used to construct  item of type  Menu.</p><p>在上一个代码中，Topping绑定到用于构建类型菜单项的类型顶部的值。</p><p>    let list  =  [ 1 ,  2 ,  3 ]   match  (list )  {   [ ]  =&gt;  print ( &#34;List contains no elements&#34; ) ,   [_ ]  =&gt;  print ( &#34;List contains one element&#34; ) ,   [_ , _ ]  =&gt;  print ( &#34;List contains two elements&#34; ) ,   [_ , _ , _ ]  =&gt;  print ( &#34;List contains three elements&#34; ) ,  _  =&gt;  print ( &#34;List containes more than 3 elements&#34; )  }</p><p>    Let列表= [1,2,3]  匹配（列表）{  [] =＆gt;打印（＆＃34;列表不包含元素＆＃34;），  [_] =＆gt;打印（＆＃34;列表包含一个元素＆＃34;），  [_，_] =＆gt;打印（＆＃34;列表包含两个元素＆＃34;），  [_，_，_] =＆gt;打印（＆＃34;列表包含三个元素＆＃34;）， _ =＆gt;打印（＆＃34;列表包含超过3个元素＆＃34;） }</p><p>  Functions are a first-class concept in Grain, i.e. functions can be consumed as values. Functions can recursively call themselves. Like in JavaScript, functions are also able to keep a reference of values within their scope (closure).</p><p>  功能是谷物中的一流概念，即函数可以作为值消费。功能可以递归地称为自己。就像在JavaScript中一样，功能也能够在其范围内的值（关闭）。</p><p>  Grain  understands how to print values without developers having to define string representation for values. Grain additionally provides system calls that align with those defined in the  WebAssembly System Interface (WASI). WASI includes APIs for asynchronous I/O, random number generation, access to the current time, and more.</p><p>  谷物了解如何在没有开发人员的情况下打印值，必须定义值的字符串表示。谷物另外提供与Webassembly系统接口（WASI）中定义的系统调整的系统调用。 wasi包括异步I / O，随机数生成，访问当前时间等API，以及更多。</p><p>  Grain programs can be split into modules that can import from —or export to— other Grain modules. Grain modules can also import from foreign functions, provided developers explicitly type the foreign function.</p><p>  可以将谷物程序分成可能导入的模块，从 -  or导出到其他谷物模块。谷物模块也可以从外国功能导入，为开发人员明确键入外函数。</p><p>    Future Grain development should include a better foreign function interface, static linking, support for 64-bit mode, a DOM standard library, macros, and more.</p><p>    未来的谷物开发应包括更好的外函数界面，静态链接，支持64位模式，DOM标准库，宏等。</p><p>  AssemblyScript, which compiles a strict variant of  TypeScript to WebAssembly, also self-describes as  made for WebAssembly and includes a standard library with common composite types (e.g., arrays, dates). Like Grain, AssemblyScript compiles to  WebAssembly using  Binaryen. AssemblyScript strives to give developers low-level control within a higher-level language while remaining mindful of code size. AssemblyScript however  may require more type annotations from developers:</p><p>  组装Blyscript，它编译到Webassembly的标注字体的严格变体，也自描述为为WebasseMbly制造，并包括具有通用复合类型的标准库（例如，数组，日期）。像谷物一样，组装使用Binaryen编译成网主。大会旨在努力在更高级别的语言中为开发人员提供低级控制，同时留下代码大小的正念。但是，AssemblyScript可能需要从开发人员提供更多类型的注释： </p><p>  Compared to TypeScript, type inference in AssemblyScript is limited because the type of each expression must be known in advance. This means that variable and parameter declarations must either have their type annotated or have an initializer.</p><p>与TypeScript相比，组件的型推断是有限的，因为必须提前知道每个表达式的类型。这意味着变量和参数声明必须具有注释或具有初始化程序的类型。</p><p>  The Grain toolchain (e.g., CLI, compiler, runtime, and standard library) is shipped as a single binary. Binaries are available for  MacOS x64,  Linux x64, and  Windows x64. A JavaScript version of the Grain compiler is available for use in platforms where a custom binary is not available.</p><p>  谷物工具链（例如，CLI，编译器，运行时和标准库）作为单个二进制文件运送。二进制文件可用于MacOS X64，Linux X64和Windows X64。谷物编译器的JavaScript版本可用于在不可用自定义二进制文件的平台上使用。</p><p>  The  full talk is available online and contains slides, code samples, and additional detailed explanations. The WebAssembly Summit is a yearly conference about all things WebAssembly. The WebAssembly Summit took place online in April 2021.</p><p>  完整的通话可在线使用，包含幻灯片，代码示例和其他详细说明。 WebasseMbly Summit是一年一度关于Webassembly的所有事情的大会。 WebasseMbly峰会于2021年4月在线进行。</p><p>  Each year, we seek feedback from our readers to help us improve InfoQ.										Would you mind spending 2 minutes to share your feedback in our  short survey?										Your feedback will directly help us continually evolve how we support you.</p><p>  每年，我们寻求读者的反馈帮助我们改善InfoQ。您可以介意2分钟在短期调查中分享您的反馈吗？您的反馈将直接帮助我们不断发展我们如何支持您。</p><p>  A round-up of last week’s content on InfoQ sent out every Tuesday. Join a community of over 250,000 senior developers. 			 View an example</p><p>  最后一周的内容在InfoQ上举行了每周二发出的。加入超过250,000多名高级开发人员的社区。 查看一个例子</p><p>  Select your country              I consent to InfoQ.com handling my data as explained in this  Privacy Notice.</p><p>  选择您的国家/地区，我同意infoq.com处理我的数据，如本隐私声明中所述。 </p></div><div id="story_share_this"><div class="sharethis-inline-share-buttons"></div></div><div class="text-break sotry_link page_narrow"><a target="_blank" href="https://www.infoq.com/news/2021/05/grain-web-assembly-first/">https://www.infoq.com/news/2021/05/grain-web-assembly-first/</a></div><div class="story_tags page_narrow"><button type="button" class="btn btn-light my_tag"><a href="/tag/编程/">#编程</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/类型/">#类型</a></button></div></div><div class="my_movie_list_item shadow p-3 mb-5 bg-white rounded"><button type="button" class="btn btn-link my_tag"><a href="/tag/web2.0/">#web2.0</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/google/">#google</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/设计/">#设计</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/创意/">#创意</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/摄影/">#摄影</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/图片/">#图片</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/游戏/">#游戏</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/软件/">#软件</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/视频/">#视频</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/广告/">#广告</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/手机/">#手机</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/iphone/">#iphone</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/网站/">#网站</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/免费/">#免费</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/下载/">#下载</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/windows/">#windows</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/apple/">#apple</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/微软/">#微软</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/firefox/">#firefox</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/blog/">#blog</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/苹果/">#苹果</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/音乐/">#音乐</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/博客/">#博客</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/wordpress/">#wordpress</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/恶搞/">#恶搞</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/qq/">#qq</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/艺术/">#艺术</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/web/">#web</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/工具/">#工具</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/分享/">#分享</a></button></div></div></div><div id="my_footer"><div class=""><a href="/tags/">tags</a> <a href="/users/">users</a></div>&copy;2012-2021 diglog.com </div></div></body></html>