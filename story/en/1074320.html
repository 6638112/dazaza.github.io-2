<!doctype html><html lang="zh-hans"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>最快的GIF并不存在The Fastest GIF Does Not Exist</title><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"><link rel="stylesheet" href="/img/css.css?random="><link data-rh="true" rel="icon" href="/img/favicon.ico"/><script data-ad-client="ca-pub-6067137220025946" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script type="text/javascript" src="https://platform-api.sharethis.com/js/sharethis.js#property=5effb96910009800120b8d4d&product=inline-share-buttons" async="async"></script>
<script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?03c1a0f31299b4a2fbb83c34d6beaac9";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script></head><body><div id="my_header"><div class="container"><nav class="navbar navbar-expand-lg"><a class="navbar-brand" href="/"><img alt="diglog" src="/img/logo.v1.gif" class="rounded-sm"></a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarNavAltMarkup"><div class="navbar-nav"></div></div></nav></div></div><div class="container"><div id="my_content"><h1 class="page_narrow">The Fastest GIF Does Not Exist<br/>最快的GIF并不存在</h1><div class="row"><div class="col-lg-12 col-12"><div class="my_story_list_item shadow p-3 mb-5 bg-white rounded"><div class="story_page_pub_time page_narrow">2022-02-20 23:30:44</div><div class="page_narrow text-break page_content"><p>2022 - February 19th   *new       You&#39;re trying to create a violently-shaking GIF for comedic purposes ( https://knowyourmeme.com/memes/vibrating-gifs). The GIF editor you&#39;re using lets you set a frame duration / delay, so you set it to the lowest possible value for maximum shakage. But when you view the resulting GIF, it&#39;s playing much slower than intended, and there are definitely GIFs that play faster than this one. What&#39;s going on?</p><p>2022年2月19日*新的你&#39；You’为了喜剧目的，我们试图制作一个剧烈摇晃的GIF（https://knowyourmeme.com/memes/vibrating-gifs).GIF编辑器&#39；re using允许您设置帧持续时间/延迟，因此您可以将其设置为可能的最低值，以获得最大抖动。但当你查看生成的GIF时，它是&#39；它的演奏速度比预期的慢得多，而且肯定有一些GIF演奏得比这个快。什么&#39；怎么了？</p><p> If you&#39;re here because you want to fix your GIF and want the quick answer, the solution is:  set your frame delay to 20ms instead of 10ms. If you want to learn a bit more about GIFs, exactly why this edge case happens, and some thoughts on how to improve things, keep reading!</p><p>如果你&#39；如果你在这里是因为你想修复你的GIF并且想要快速的答案，解决方案是：将你的帧延迟设置为20毫秒而不是10毫秒。如果你想了解更多关于GIF的知识，为什么会发生这种边缘情况，以及如何改进的一些想法，请继续阅读！</p><p> (Disclaimer: If you&#39;re from a distant utopian future where this isn&#39;t a problem any more, a few of the example GIFs in this article won&#39;t make much sense. Otherwise, my condolences, and please disregard this message.)</p><p>（免责声明：如果你来自一个遥远的乌托邦未来，在那里这不再是一个问题，本文中的一些示例GIF就没有多大意义。否则，我表示哀悼，请忽略此消息。）</p><p>   We won&#39;t be going into detail on how a GIF file is structured. For a great breakdown on the bytes that make up a GIF, check out  Matthew Flickinger&#39;s &#34;What&#39;s in a GIF&#34; project.</p><p>我们赢了&#39；I don’我不会详细介绍GIF文件的结构。要了解构成GIF的字节的详细信息，请查看Matthew Flickinger&#39；s&#34；什么&#39；GIF&#34；项目</p><p> In the first version of the GIF format (87a), multiple image frames (of varying size and position) would be overlaid on top of each other to create a single resulting image. Each frame could reference a different 256-colour palette, so an image could be created using more than 256 distinct colours.</p><p>在GIF格式（87a）的第一个版本中，多个图像帧（大小和位置不同）将相互叠加，以创建一个单一的结果图像。每个帧可以参考不同的256色调色板，因此可以使用超过256种不同的颜色创建图像。</p><p> In the current version of the GIF format (89a), transparency and animation features are available. Now before each image frame, an optional &#34;delay&#34; value can be set which determines how long that frame should be shown before moving on to the next one. Specifically,  it&#39;s the number of hundredths of a second to wait before continuing to the next frame. The value can be set from 0 (no delay) to 0xffff (roughly a 10 minute delay).</p><p>在当前版本的GIF格式（89a）中，可以使用透明度和动画功能。现在，在每个图像帧之前，有一个可选的&#34；延误&#34；可以设置一个值，该值决定在进入下一帧之前，该帧应显示多长时间。具体来说，它&#39；s是在继续下一帧之前要等待的百分之一秒数。该值可以设置为0（无延迟）到0xffff（大约10分钟延迟）。</p><p>   What would a delay value of 0 look like?  The spec doesn&#39;t answer the question directly, but mentions two things:</p><p>延迟值0是什么样子？规格没有&#39；我不能直接回答这个问题，但提到了两件事：</p><p> When decoding a GIF file, each image frame should be processed &#34; without delays other than those specified in the control information&#34;.</p><p>在解码GIF文件时，每个图像帧都应该经过处理&#34；除控制信息&#34；中规定的延迟外，无其他延迟；。</p><p> I would take this to mean that any image frames with a delay of 0 should be combined with the previous image frame data, just like how the original 87a GIF format worked. If every image frame in the GIF had a delay of 0, the result would be a static image with the combined data of all the image frames.</p><p>我认为这意味着任何延迟为0的图像帧都应该与之前的图像帧数据相结合，就像最初的87a GIF格式一样。如果GIF中的每个图像帧都有0的延迟，那么结果将是一个包含所有图像帧的组合数据的静态图像。</p><p> Here&#39;s a couple of examples of what GIFs would look like if the spec were followed:</p><p>这里&#39；下面是几个例子，说明如果遵循规范，GIF会是什么样子：</p><p>    (If you&#39;re seeing identical images here - let me know! It means there&#39;s a browser out there that is handling GIFs differently to the big browsers.)</p><p>（如果你在这里看到相同的图片，请告诉我！这意味着有一款浏览器处理GIF的方式与大型浏览器不同。）</p><p>  The problem is, nobody supports 0 delay. That is, none of the programs that you&#39;d typically be viewing GIFs with support it (Firefox, Edge, IE, Chrome, Windows Explorer, Electron apps, Qt apps...).  Anything with a delay of less than 2 (20ms) will be clamped to a higher value. By looking at the various programs&#39; source code, we can build up a picture of why.</p><p>问题是，没有人支持0延迟。也就是说，没有一个项目是你&#39；d通常使用支持它（Firefox、Edge、IE、Chrome、Windows资源管理器、Electron应用程序、Qt应用程序等）查看GIF。延迟小于2（20毫秒）的任何东西都将被钳制为更高的值。通过查看各种节目&#39；源代码，我们可以建立一个为什么的图片。</p><p>             Qt does it to match IE and Firefox behaviour (and to avoid overloading the CPU)</p><p>Qt这样做是为了匹配IE和Firefox的行为（并避免CPU过载）</p><p>  Firefox does it to match IE and Opera behaviour (and to support non-spec-conforming GIFs, and to avoid overloading the CPU)</p><p>Firefox这样做是为了匹配IE和Opera的行为（并支持不符合规范的GIF，避免CPU过载）</p><p> IE 5 does it because Netscape was slow (which caused lots of people to make badly formed GIFs)</p><p>IE 5之所以这么做，是因为网景的速度很慢（这导致很多人制作格式不好的GIF）</p><p> One of the odd things about all these codebases: instead of e.g. clamping a value of 0 or 1 up to 2,  they will instead get pushed all the way up to 10 (100ms). So there&#39;s a sweet spot – set a delay too small and you&#39;ll get a slow GIF. Set the delay juuust a bit higher and you&#39;ll get a much faster GIF.</p><p>所有这些代码库的一个奇怪之处是：它们不是将0或1的值钳制到2，而是一直被推到10（100ms）。因此&#39；这是一个最佳点——将延迟设置得太小，你&#39；我会得到一个慢GIF。把延迟时间调高一点，你&#39；我会得到更快的GIF。</p><p>  If GIF decoding is incorrect where you&#39;re reading this, the above GIFs won&#39;t appear in order of speed.</p><p>如果GIF解码不正确，您&#39；重读这篇文章，上面的GIF赢得了&#39；t按速度顺序出现。</p><p>  You&#39;ll need to enable Javascript to see this section sorry! There&#39;s a slider that lets you see how changing the delay in a GIF file will affect the end results. It&#39;s pretty cool.</p><p>你&#39；我需要启用Javascript才能看到这一部分抱歉！那里&#39；这是一个滑块，可以让你看到更改GIF文件中的延迟将如何影响最终结果。它&#39；很酷。</p><p>  Drag the slider to change the GIF&#39;s delay value. Note how the small delay values produce surprising results.</p><p>拖动滑块以更改GIF&#39；s延迟值。请注意，小延迟值如何产生令人惊讶的结果。</p><p>  It seems the reason for pushing values like 10ms back up to 100ms originates from a requirement to emulate the slowness of Netscape. Qt and Firefox source code comments both want to reduce CPU usage but since a value of 20ms is supported, I think they should just be clamping the value to 20ms instead. Or, don&#39;t clamp the value at all! Modern browsers already render 20ms GIF frames just fine, and I&#39;m not sure the &#34;computers are too slow&#34; argument holds up 30 years later.</p><p>将10ms这样的值推回到100ms，似乎是因为需要模仿网景的缓慢。Qt和Firefox源代码注释都希望减少CPU使用，但由于支持20ms的值，我认为他们应该将该值限制为20ms。或者，唐&#39；不要完全钳制价值观！现代浏览器已经可以渲染20毫秒的GIF帧，而我&#39；我不确定&#34；电脑太慢了&#34；30年后，这场争论仍然成立。</p><p> On top of that, leave the 0-delay frames alone too. Combine them with prior frame content, like the original GIF specification says. If all frames have a 0-delay, show the static image that results from combining all the frames.</p><p>除此之外，也不要使用0延迟帧。将它们与先前的帧内容结合起来，就像最初的GIF规范所说的那样。如果所有帧都有0延迟，则显示合并所有帧后的静态图像。</p><p> My use case was wanting to update two very-small-but-separate areas in a large GIF in a single frame, to reduce file size. Currently, you need to find the rectangular region that covers all changes on the screen for that frame and add that to the GIF, but if you could define multiple frames, and set all but one to a delay of 0, you could create the same effect but with less image data:</p><p>我的用例是想在一帧中更新一个大GIF中两个非常小但独立的区域，以减少文件大小。目前，您需要找到覆盖该帧屏幕上所有更改的矩形区域，并将其添加到GIF中，但如果您可以定义多个帧，并将除一帧外的所有帧设置为0延迟，则可以创建相同的效果，但图像数据较少：</p><p>  A downside to making any changes is that the badly formatted GIFs won&#39;t render any more. I reckon just be bold, like the release of Netscape 2.0:</p><p>进行任何更改的一个缺点是格式不好的GIF赢得了&#39；我不再渲染了。我觉得大胆一点，比如Netscape 2.0的发布：</p><p> &#34;Netscape now conforms to GIF standards: Some GIF creation utilities produce GIF images that do not conform to standards. Such images will display empty outlines in place of the image. These outlines are much larger than the actual images. The images will not be visible at all. To repair these GIF images, content providers can read the offending GIF image into a different GIF utility that conforms to the GIF89a specifications, and save the image again.&#34;</p><p>&#34;Netscape现在符合GIF标准：一些GIF创建实用程序生成的GIF图像不符合标准。这样的图像将显示空轮廓来代替图像。这些轮廓比实际图像大得多。这些图像将完全不可见。要修复这些GIF图像，内容提供商可以将有问题的GIF图像读入另一个符合GIF89a规范的GIF实用程序，然后再次保存图像&#34;</p><p>   I wanted to see what it looked like when Netscape 2.0 rendered a GIF. Here&#39;s the red-square test GIF from above, as rendered (correctly!) in Netscape 2.0 on Windows 95:</p><p>我想看看Netscape 2.0渲染GIF时的样子。这里&#39；这是从上面呈现的红方块测试GIF（正确！）在Windows 95上的Netscape 2.0中：</p><p>  Since we have Netscape available to us, why don&#39;t we have a look at what a 1-delay file actually looks like? Here&#39;s a GIF running at delay = 2 (20ms), for comparison. The results aren&#39;t quite as expected though. It runs very slowly, unless you&#39;re actively moving the mouse (the reason for this is discussed in this  Stack Overflow page):</p><p>既然我们有网景，为什么不&#39；我们来看看一个1延迟文件实际上是什么样子吗？这里&#39；s以延迟=2（20ms）运行的GIF，用于比较。结果是&#39；但这并不像预期的那样。除非你&#39；重新主动移动鼠标（原因在堆栈溢出页面中讨论）：</p><p>  And this is with a delay of 0 - put before the exciting 10ms reveal, for dramatic effect. Look at the speed! I guess the original Netscape doesn&#39;t treat an &#34;all-0-delay&#34; GIF as a single static frame, as the spec might suggest it should. Why the mouse movement isn&#39;t required to speed this case up, I have no idea:</p><p>这是在激动人心的10毫秒展示前延迟0秒，以获得戏剧性的效果。看看速度！我猜最初的网景没有&#39；t治疗&#34；all-0-延迟和#34；GIF作为单个静态帧，正如规范可能建议的那样。为什么鼠标移动不是&#39；我不需要加速这个案子，我不知道：</p><p>     Huh. Slow, and then crashes. I guess this was before we had 144Hz monitors to render that many frames per second. So if even Netscape 2.0 doesn&#39;t display GIFs that fast… does that mean a 10ms GIF has never been perceived in all of history? Netscape crashing is a bit of an ominous sign - who knows what would happen if someone tried too hard to see the fastest GIF. Maybe we shouldn&#39;t update the browsers after all 😅</p><p>呵呵。缓慢，然后崩溃。我猜这是在我们有144Hz监视器每秒渲染那么多帧之前。因此，即使是Netscape 2.0也没有&#39；t显示GIF的速度如此之快……这是否意味着10毫秒GIF在历史上从未出现过？Netscape崩溃是一个不祥的迹象——谁知道如果有人试图看到最快的GIF会发生什么。也许我们不应该&#39；毕竟，我们不能更新浏览器😅</p><p>  No-one renders GIFs to spec, but they should (IMO). For now, set a GIF delay of 2 (20ms) instead of 1 (10ms) to get the fastest-running GIF. If everyone updated their code match the spec, we get these upsides:</p><p>没有人会按照规范来呈现GIF，但他们应该（IMO）。现在，将GIF延迟设置为2（20ms）而不是1（10ms），以获得运行最快的GIF。如果每个人都更新了符合规范的代码，我们会得到以下好处：</p><p>   If you have any comments or feedback, feel free to discuss on Reddit:  Reddit discussion.</p><p>如果您有任何意见或反馈，请随时讨论Reddit:Reddit讨论。</p><p>         Here&#39;s Internet Explorer 5, failing to render the red-squares test GIF correctly. This shows how early it was that programs started going against the spec:</p><p>这里&#39；s Internet Explorer 5未能正确呈现红色方块测试GIF。这表明程序开始违反规范的时间有多早：</p><p>  Here&#39;s Windows XP picture viewer, failing to produce the colourful GIF at all... except for in the thumbnail view:</p><p>这里&#39；的Windows XP图片查看器，完全无法生成彩色GIF。。。除了缩略图视图中的：</p></div><div id="story_share_this"><div class="sharethis-inline-share-buttons"></div></div><div class="story_tags page_narrow"><button type="button" class="btn btn-light my_tag"><a href="/tag/gif/">#gif</a></button></div></div><div class="my_movie_list_item shadow p-3 mb-5 bg-white rounded"><button type="button" class="btn btn-link my_tag"><a href="/tag/web2.0/">#web2.0</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/google/">#google</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/设计/">#设计</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/创意/">#创意</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/摄影/">#摄影</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/图片/">#图片</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/游戏/">#游戏</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/软件/">#软件</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/广告/">#广告</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/视频/">#视频</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/手机/">#手机</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/iphone/">#iphone</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/网站/">#网站</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/免费/">#免费</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/windows/">#windows</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/下载/">#下载</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/微软/">#微软</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/苹果/">#苹果</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/firefox/">#firefox</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/blog/">#blog</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/音乐/">#音乐</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/博客/">#博客</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/apple/">#apple</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/wordpress/">#wordpress</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/恶搞/">#恶搞</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/qq/">#qq</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/谷歌/">#谷歌</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/艺术/">#艺术</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/web/">#web</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/工具/">#工具</a></button></div></div></div><div id="my_footer"><div class=""><a href="/tags/">tags</a> <a href="/users/">users</a></div>&copy;2012-2021 diglog.com </div></div></body></html>