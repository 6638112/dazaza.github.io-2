<!doctype html><html lang="zh-hans"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>StackExchange–关于正在进行的DDoS攻击和阻止Tor出口节点的更新StackExchange – Update on the ongoing DDoS attacks and blocking Tor exit nodes</title><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"><link rel="stylesheet" href="/img/css.css?random="><link data-rh="true" rel="icon" href="/img/favicon.ico"/><script data-ad-client="ca-pub-6067137220025946" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script type="text/javascript" src="https://platform-api.sharethis.com/js/sharethis.js#property=5effb96910009800120b8d4d&product=inline-share-buttons" async="async"></script>
<script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?03c1a0f31299b4a2fbb83c34d6beaac9";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script></head><body><div id="my_header"><div class="container"><nav class="navbar navbar-expand-lg"><a class="navbar-brand" href="/"><img alt="diglog" src="/img/logo.v1.gif" class="rounded-sm"></a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarNavAltMarkup"><div class="navbar-nav"></div></div></nav></div></div><div class="container"><div id="my_content"><h1 class="page_narrow">StackExchange – Update on the ongoing DDoS attacks and blocking Tor exit nodes<br/>StackExchange–关于正在进行的DDoS攻击和阻止Tor出口节点的更新</h1><div class="row"><div class="col-lg-12 col-12"><div class="my_story_list_item shadow p-3 mb-5 bg-white rounded"><div class="story_page_pub_time page_narrow">2022-02-21 11:30:50</div><div class="page_narrow text-break page_content"><p>For the past month, Stack Overflow has been hit by weekly DDoS attacks that progressively grew in size and scope. In each incident, the attacker(s) have been changing their methodology and responding to our countermeasures. Initially, we were able to detect and mitigate the attacks before any performance degradation could be noticed, but the latest attacks ramped up very quickly and the site was brought down before we could react.</p><p>在过去的一个月里，堆栈溢出受到每周DDoS攻击的打击，攻击的规模和范围逐渐扩大。在每一次事件中，攻击者都在改变他们的方法，并对我们的对策做出反应。最初，我们能够在发现任何性能下降之前检测并缓解攻击，但最新的攻击迅速升级，网站在我们做出反应之前就被关闭了。</p><p> While we cannot go into specifics on each attack in order to maintain OPSEC and not tip off the attackers, we can say that each individual attack has been using different IP addresses and targeting different aspects of the site. During an outage, our top priority is always getting the site back up and running. After traffic has been stabilized, we perform a post-mortem for the incident where we assess and improve upon the actions we have taken.</p><p>虽然我们无法深入了解每一次攻击的细节，以便维护OPSEC，而不是向攻击者提供信息，但我们可以说，每一次攻击都使用了不同的IP地址，针对的是网站的不同方面。在停机期间，我们的首要任务始终是让站点恢复运行。交通稳定后，我们会对事件进行尸检，评估并改进我们采取的行动。</p><p> During the outage last Sunday, we noticed that a large amount of the DDoS traffic originated from Tor exit nodes. The decision to block Tor exit nodes did not come lightly; in fact, Teresa, our CTO was on the call when we discussed remediation methods. Due to the persistent nature of the attack and our desire to bring the site back up as fast as possible, we made the decision to block all DDoS traffic endpoints, including these Tor exit nodes.</p><p>在上周日的停机期间，我们注意到大量DDoS流量来自Tor出口节点。阻止Tor出口节点的决定并非易事；事实上，我们讨论补救方法时，我们的首席技术官特蕾莎正在通话。由于攻击的持续性以及我们希望尽快恢复站点的愿望，我们决定阻止所有DDoS流量端点，包括这些Tor出口节点。</p><p> We did not target, nor set out to block all traffic from Tor; that’s not something Stack has ever done. However, due to the shared nature of Tor exit nodes, some of them were also routing DDoS attacks to our sites and were blocked. We have tried removing these blocks between attacks, but this action has resulted in further site outages as DDoS efforts continue to originate from these exit nodes. Unfortunately, blocking the Tor exit nodes also blocks legitimate users from using them. An immediate solution for users who find themselves blocked is to access our site from other IP addresses, via home internet, work internet, or other VPN services.</p><p>我们既没有瞄准目标，也没有打算阻止Tor的所有交通；斯塔克从来没有这么做过。然而，由于Tor出口节点的共享性质，其中一些节点还将DDoS攻击路由到我们的站点，并被阻止。我们已尝试在攻击之间移除这些块，但由于DDoS工作继续源自这些出口节点，此操作已导致进一步的站点中断。不幸的是，阻止Tor出口节点也会阻止合法用户使用它们。对于发现自己被屏蔽的用户，一个直接的解决方案是通过家庭互联网、工作互联网或其他VPN服务从其他IP地址访问我们的网站。</p><p> We are continuing to evaluate the situation and will keep our community updated. Thank you for your patience and understanding.</p><p>我们正在继续评估情况，并将不断更新我们的社区。谢谢你的耐心和理解。</p><p>  You may see Tor access improve over the next few days as we do some testing. The changes may be temporary depending on how everything goes. We will continue to keep everyone updated as the situation evolves.</p><p>在接下来的几天里，随着我们进行一些测试，您可能会看到Tor访问能力有所改善。这些变化可能是暂时的，这取决于一切的进展。随着形势的发展，我们将继续向每个人通报最新情况。</p><p>  There was another DDoS attack that briefly affected the site last night; we were able to test some of the changes we have made, and we are happy to report that none of the DDoS traffic originated from Tor.</p><p>昨晚又有一次DDoS攻击短暂影响了该网站；我们能够测试我们所做的一些更改，我们很高兴地报告，没有任何DDoS流量来自Tor。</p><p>  43  Not that I&#39;m explicitly disagreeing or even impacted by this decision, but your mitigation for legitimate users on Tor using Stack Overflow is...diametrically opposed to why users would leverage Tor in the first place...</p><p>43不是我&#39；我明确表示不同意，甚至受到这个决定的影响，但您对Tor上使用堆栈溢出的合法用户的缓解措施是。。。与用户为什么会首先利用Tor完全相反。。。</p><p>  @Makoto that&#39;s definitely true, and we feel that way also. However the options right now are: block Tor exit nodes, or unblock them and we get DDoS&#39;d / go down every few days. So the answer (at least for now) is obvious unfortunately. A bad actor or actors on the Tor network. :(</p><p>@Makoto那&#39；这绝对是真的，我们也有这种感觉。然而，现在的选项是：阻止出口节点，或取消阻止它们，我们得到DDoS&#39；d/每隔几天下降一次。不幸的是，答案（至少目前）是显而易见的。Tor网络上的一个或多个坏演员：(</p><p>  @Makoto - unfortunately, if Tor is going to be abused like this, then it&#39;s going to suffer the same issue (and potentially the same fate) as open mail relays and many other projects over the years: the legitimate users are going to get shafted as the rest of the world tries to protect themselves from a bunch of bad actors. You see this in most &#39;open to everyone with no restrictions&#39; projects - the bad actors abuse the heck out of a thing to the point that it gets modified till they can&#39;t use it (making it less useful) or it goes away entirely.</p><p>@Makoto——不幸的是，如果Tor会被这样虐待，那么它&#39；多年来，它将面临与开放式邮件中继和许多其他项目相同的问题（可能也是同样的命运）：正当用户将受到欺骗，因为世界其他地方试图保护自己免受一群坏演员的伤害。你在大多数&#39；对所有人开放，不受限制&#39；项目——糟糕的演员滥用一件东西，以至于它被修改到可以修改的程度&#39；不要使用它（让它变得不那么有用），否则它就会完全消失。</p><p>      I had no idea Tor exit nodes aggregated enough bandwidth to make it possible for a serious DDOS attack through them.</p><p>我不知道Tor exit节点聚合了足够的带宽，可以通过它们进行严重的DDOS攻击。</p><p>  We do not want to permanently block Tor exit nodes, there are 1,246 published endpoints:  check.torproject.org/torbulkexitlist. We&#39;re actively working on a solution but can&#39;t make any commitments.</p><p>我们不想永久阻止Tor出口节点，有1246个已发布的端点：检查。托尔项目。组织/出口清单。我们&#39；我们正在积极制定解决方案，但可以&#39；我不做任何承诺。</p><p>  @Haney: No no, it&#39;s like I said - I don&#39;t disagree with it. Blocking Tor exit nodes is a sensible mitigation to prevent DDoS attacks. It&#39;s just that you&#39;re saying to users who use Tor as a part of their OPSEC discipline to do the things that they would never consider doing. No objections at all to the mitigation of DDoS, but let&#39;s be realistic - if someone legitimate only accessed Stack Overflow through Tor, they&#39;re not going to magically shift around their OPSEC just to access this site.</p><p>@哈尼：不，不，它&#39；就像我说的-我不&#39；我不反对。阻止Tor出口节点是防止DDoS攻击的合理缓解措施。它&#39；只是你&#39；对那些使用Tor作为OPSEC规则的一部分的用户来说，要做他们从来没有考虑过的事情。对DDoS的缓解没有任何异议，但让&#39；现实一点——如果某个合法用户只通过Tor访问Stack Overflow，那么他们&#39；我们不会为了访问这个网站而神奇地改变操作安全。</p><p>  Do you have any data about how much legitimate traffic you&#39;ve historically received from Tor users? I&#39;d be curious to know whether this would impact 1% of your users or 0.0001%.</p><p>你有关于你有多少合法流量的数据吗&#39；你曾经收到过Tor用户的来信吗？我&#39；我很想知道这会影响1%的用户还是0.0001%。</p><p>    @cocomac Using Cloudflare would have almost the same effect on Tor users as just blocking Tor entirely; their anti-DDOS wall is a usability nightmare (despite their apparent attempts to mitigate it) and it&#39;s made more than one website completely inaccessible to me. That&#39;s when I&#39;m  not using Tor; I hear it&#39;s worse for Tor users (and completely unusable for Tor users who aren&#39;t using Tor Browser).</p><p>@使用Cloudflare的cocomac对Tor用户的影响几乎与完全屏蔽Tor一样；他们的防DDOS墙是一场可用性噩梦（尽管他们显然试图缓解它），it&#39；它让我无法访问不止一个网站。那&#39；当我&#39；我没有使用Tor；我听到了&#39；这对Tor用户来说更糟糕（对于不使用Tor浏览器的Tor用户来说完全不可用）。</p><p>  What happened to Fastly? They are in front of the Stack Overflow servers right? Won&#39;t they stop it?</p><p>Fastly怎么了？它们在堆栈溢出服务器前面，对吗？韩元&#39；他们为什么不停下来？</p><p>  Just a thought, but would it be possible to block Tor traffic to the .com pages as you are now, but then operate your own .onion Tor link, much like  Facebook does, where Tor users and only Tor users can access Stack pages. Would take some reengineering to get it all to work I imagine, but would be a long term solution to filter Tor traffic so the only damage Tor nodes could do were to itself. Not sure how plausible this actually is in practice though.</p><p>只是一个想法，但是否有可能阻止Tor的交通。com页面就像你现在一样，但是你可以自己操作。洋葱Tor链接，就像Facebook一样，Tor用户和只有Tor用户可以访问堆栈页面。我想，这需要进行一些重新设计才能让一切正常运行，但这将是过滤Tor流量的长期解决方案，因此Tor节点只能对自身造成损害。但不确定这在实践中是否合理。</p><p>  I know at least one real user who&#39;s using SE and contributes - he&#39;s someone very knowledgeable in his field, and uses tor to remain anonymous. He  annoys me, but I think it annoys me more that he got affected as collateral damage</p><p>我认识至少一个真正的用户&#39；s使用SE和贡献——他&#39；他是一个在他的领域非常有知识的人，他用tor来保持匿名。他让我很恼火，但我觉得更让我恼火的是，他受到了附带损害</p><p>  During the last outage when Fastly&#39;s servers were down, Stack Overflow and many other websites were down. During that time, in  Twitter, I saw a  tweet that said that they are going to temporarily route traffic directly to the backend Stack Overflow servers. I guess it was a situation where they didn&#39;t have any other choice.</p><p>在上次大修期间，Fastly#39；s的服务器停机、堆栈溢出和许多其他网站停机。在那段时间里，我在Twitter上看到一条推文，说他们将临时将流量直接路由到后端堆栈溢出服务器。我猜这是一种他们没有&#39；我别无选择。</p><p> Fastly themselves say that they mitigate DDoS attacks in  here. (Maybe it requires a separate plan?). They do not seem to have mitigated the attack to Stack Overflow.</p><p>Fastly自己说，他们在这里抵御DDoS攻击。（也许这需要一个单独的计划？）。它们似乎没有减轻对堆栈溢出的攻击。</p><p> All these things seem to say that the attack was directly launched onto Stack Overflow&#39;s servers&#39; IP addresses (without Fastly being in between).</p><p>所有这些似乎都表明，攻击是直接对堆栈溢出发起的#39；s服务器&#39；IP地址（不需要快速介于两者之间）。</p><p>  8  If you override your DNS resolution to go directly to the Stack Overflow origin IP, it works and you can use the site normally, albeit with a TLS certificate for  teststackoverflow.com. While obscuring the origin IP would be difficult (there are only 512 IPs delegated to SE&#39;s network, AS25791), dropping connections from non-Fastly sources would probably go a long way</p><p>8.如果您覆盖DNS解析，直接转到堆栈溢出源IP，它可以工作，并且您可以正常使用该站点，尽管有teststackoverflow的TLS证书。通用域名格式。虽然隐藏原始IP会很困难（只有512个IP被委托给SE的网络，即AS25791），但从非快速来源断开连接可能会有很长的路要走</p><p>  @Smitop oh no, it seems Stack Exchange&#39;s servers&#39; IP addresses are very exposed. And even some of them can be used to visit the site by changing the &#34;Host:&#34; header... who knows what will happen if the attacker reads your comment</p><p>@哦，不，好像是堆栈交换&#39；s服务器&#39；IP地址非常暴露。甚至其中一些可以通过改变&#34；主持人&#34；标题。。。谁知道如果攻击者看到你的评论会发生什么</p><p>    @EatenbyaGrue obviously. Because Stack Exchange is exposing their IP address of their backend servers. They do not even try to block connections from non-fastly sources. They should fix this</p><p>@很明显是EatenbyaGrue。因为Stack Exchange正在公开其后端服务器的IP地址。他们甚至不试图阻止来自非快速来源的连接。他们应该解决这个问题</p><p>  Just checked on bgpview.io - I really can&#39;t think anything useful except allowing fastly (and some other known) IPs only, but I believe they have a proper team dealing with it. Thanks for all the clarification, best regards (removed my obsolete questions here to keep comments tidy).</p><p>刚刚查看了bgpview。我真的可以&#39；我认为除了只允许fastly（和其他一些已知的）IP之外，没有什么有用的，但我相信他们有一个合适的团队来处理这个问题。感谢所有的澄清，致以最良好的问候（删除我在这里过时的问题，以保持评论整洁）。</p><p>  Perhaps Fastly did mitigate some of it, but the attack was aggressive enough that it still affected SE, and it would have been much worth without them.</p><p>也许Fastly确实减轻了一些影响，但攻击的攻击性足够强，它仍然影响SE，如果没有它们，它将非常有价值。</p><p>  @JasonC if that was the case, who knows what will happen if the attacker attacks directly....</p><p>@JasonC如果是这样，谁知道如果攻击者直接攻击会发生什么。。。。</p><p>  Maybe some attacks on:  1. &#39;5:33 AM 11 Feb 2022&#39;,  2. &#39;~10:30 PM 14 Feb 2022&#39;,  3. &#39;2:19 PM 14 Feb 2022&#39;</p><p>可能是对以下几点的攻击：1&#39;2022年2月11日上午5:33；，2. &#39;~2022年2月14日晚上10:30；，3. &#39;2022年2月14日下午2:19和#39；</p></div><div id="story_share_this"><div class="sharethis-inline-share-buttons"></div></div><div class="story_tags page_narrow"><button type="button" class="btn btn-light my_tag"><a href="/tag/update/">#update</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/tor/">#tor</a></button></div></div><div class="my_movie_list_item shadow p-3 mb-5 bg-white rounded"><button type="button" class="btn btn-link my_tag"><a href="/tag/web2.0/">#web2.0</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/google/">#google</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/设计/">#设计</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/创意/">#创意</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/摄影/">#摄影</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/图片/">#图片</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/游戏/">#游戏</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/软件/">#软件</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/广告/">#广告</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/视频/">#视频</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/手机/">#手机</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/iphone/">#iphone</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/网站/">#网站</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/免费/">#免费</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/windows/">#windows</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/下载/">#下载</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/微软/">#微软</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/苹果/">#苹果</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/firefox/">#firefox</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/blog/">#blog</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/音乐/">#音乐</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/博客/">#博客</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/apple/">#apple</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/wordpress/">#wordpress</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/恶搞/">#恶搞</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/qq/">#qq</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/艺术/">#艺术</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/谷歌/">#谷歌</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/工具/">#工具</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/web/">#web</a></button></div></div></div><div id="my_footer"><div class=""><a href="/tags/">tags</a> <a href="/users/">users</a></div>&copy;2012-2021 diglog.com </div></div></body></html>