<!doctype html><html lang="zh-hans"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>“你永远不应该做的事”(2000)</title><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"><link rel="stylesheet" href="/img/css.css?random="><link data-rh="true" rel="icon" href="/img/favicon.ico"/><script data-ad-client="ca-pub-6067137220025946" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script type="text/javascript" src="https://platform-api.sharethis.com/js/sharethis.js#property=5effb96910009800120b8d4d&product=inline-share-buttons" async="async"></script>
<script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?03c1a0f31299b4a2fbb83c34d6beaac9";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script></head><body><div id="my_header"><div class="container"><nav class="navbar navbar-expand-lg"><a class="navbar-brand" href="/"><img alt="diglog" src="/img/logo.v1.gif" class="rounded-sm"></a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarNavAltMarkup"><div class="navbar-nav"></div></div></nav></div></div><div class="container"><div id="my_content"><h1 class="page_narrow">“你永远不应该做的事”(2000)</h1><div class="row"><div class="col-lg-12 col-12"><div class="my_story_list_item shadow p-3 mb-5 bg-white rounded"><div class="story_page_pub_time page_narrow">2020-07-04 01:57:50</div><div class="story_img_container"><a href="http://img.diglog.com/img/2020/7/d72bc9c7dd1af7ffdbae338f29ea025f.jpg"><img src="http://img.diglog.com/img/2020/7/d72bc9c7dd1af7ffdbae338f29ea025f.jpg" class="img-fluid my_story_img" onerror="this.style.display='none'"></a></div><div class="page_narrow text-break page_content"><p>Netscape 6.0终于进入了它的第一个公开测试版。从来没有5.0版本。上一次发布的主要版本是4.0版，几乎是在三年前发布的。在互联网世界里，三年是非常长的一段时间。在此期间，网景无奈地袖手旁观，因为他们的市场份额直线下降。</p><p>批评他们在两次发行之间等了这么久，我有点自命不凡。他们不是故意这么做的，对吗？</p><p>嗯，是的。是他们干的。他们犯了任何软件公司都会犯的最严重的一个战略错误，从而做到了这一点：</p><p>网景并不是第一家犯这种错误的公司。Borland在收购Arago并试图进入dBASE for Windows时犯了同样的错误，这是一个注定要花费很长时间的项目，以至于Microsoft Access吃了他们的午餐，然后他们再次犯下了同样的错误，从头开始重写Quattro Pro，并以其功能如此之少震惊了人们。微软几乎犯了同样的错误，试图在一个注定失败的名为金字塔的项目中从头开始为Windows重写Word，但该项目被关闭，被扔掉，并被扫地出门。对微软来说幸运的是，他们从未停止在旧代码库上的工作，所以他们有东西可以运送，这使得这只是一场金融灾难，而不是一场战略灾难。</p><p>我们是程序员。程序员在内心深处是架构师，当他们到达一个站点时，他们想做的第一件事就是用推土机把这个地方夷为平地，建造一些宏伟的东西。我们对渐进式的翻新并不感到兴奋：修修补补、改进、种植花坛。</p><p>程序员总是想扔掉代码重新开始，这有一个微妙的原因。原因是他们认为旧的代码一团糟。这里有一个有趣的观察：他们可能是错的。他们认为旧代码一团糟的原因是因为编程的一个基本的基本法则：</p><p>这就是代码重用如此困难的原因。这就是为什么团队中的每个人都喜欢使用不同的函数将字符串拆分成字符串数组。他们编写自己的函数，因为这比弄清楚旧函数是如何工作的更容易、更有趣。</p><p>作为这一公理的推论，您现在几乎可以向任何程序员询问他们正在处理的代码。他们会告诉你：“这是一大堆毛茸茸的乱七八糟的东西。”“没有什么比扔掉它重新开始更好的了。”</p><p>“嗯，”他们说，“看看这个函数。它有两页长！这些东西都不该放在里面！我不知道这些API调用中有一半是用来做什么的。“。</p><p>在Borland新的Windows电子表格发布之前，Borland的多彩创始人菲利普·卡恩(Philippe Kahn)在媒体上被大量引用，吹嘘Quattro Pro将比Microsoft Excel好得多，因为它是从头开始编写的。全新的源代码！就好像源代码生锈了一样。</p><p>认为新代码比旧代码更好的想法显然是荒谬的。已使用旧代码。它已经过测试了。已经发现了很多错误，并且它们已经被修复。这没什么不对的。它不会仅仅坐在你的硬盘上就能发现错误。正好相反，宝贝！软件是不是应该像一辆老式的道奇飞镖，只是放在车库里就生锈了？软件是不是就像泰迪熊一样，如果它不是用全新的材料制作的，那会不会有点恶心？</p><p>返回到两页函数。是的，我知道，这只是一个显示窗口的简单功能，但是它上面长出了一些毛发和东西，没有人知道为什么。好吧，我来告诉你为什么：这些都是错误修复。其中一个修复了南希试图在没有Internet Explorer的计算机上安装该软件时出现的错误。另一个修复了在内存不足的情况下出现的错误。另一个修复了当文件在软盘上，用户从中间拔出磁盘时出现的错误。LoadLibrary调用很难看，但它使代码可以在旧版本的Windows95上运行。</p><p>这些漏洞中的每一个都在现实世界中使用了数周后才被发现。程序员可能花了几天时间在实验室重现错误并修复它。如果它像许多错误一样，修复可能是一行代码，甚至可能是几个字符，但这两个字符花费了大量的工作和时间。</p><p>当您丢弃代码并从头开始时，您就是在丢弃所有的知识。所有这些收集的错误修复。多年的编程工作。</p><p>你正在抛弃你的市场领导地位。你给你的竞争对手送了两三年的礼物，相信我，这在软件年中是很长的一段时间。</p><p>您正在将自己置于极其危险的境地，您将在几年内发布旧版本的代码，完全无法进行任何战略更改或对市场需要的新功能做出反应，因为您没有可发布的代码。你不妨在这段时间内关门营业。</p><p>还有其他选择吗？人们的共识似乎是，旧的Netscape代码库真的很糟糕。嗯，可能很糟糕，但是，你知道吗？它在很多现实世界的计算机系统上都运行得非常好。</p><p>当程序员说他们的代码一团糟(一如既往)时，有三种事情是错误的。</p><p>首先，存在架构问题。代码没有正确分解。网络代码从无到有地弹出自己的对话框；这应该在UI代码中进行处理。这些问题可以通过仔细移动代码、重构和更改接口来解决，一次一个。它们可以由一个程序员仔细地工作并一次全部签入他的更改来完成，这样就不会干扰其他人。即使是相当大的架构更改也可以在不丢弃代码的情况下完成。在Juno项目中，我们花了几个月的时间一度重新设计：只是移动东西，清理它们，创建有意义的基类，并在模块之间创建清晰的接口。但是我们用现有的代码库仔细地做了这件事，并且我们没有引入新的bug或丢弃工作代码。</p><p>程序员认为他们的代码一团糟的第二个原因是效率低下。有传言称，Netscape中的渲染代码速度很慢。但这只会影响项目的一小部分，您可以对其进行优化甚至重写。你不必重写整件事。在对速度进行优化时，1%的工作可以为您带来99%的收益。</p><p>第三，代码可能非常难看。我参与的一个项目实际上有一种称为FuckedString的数据类型。另一个项目开始时使用成员变量以下划线开头的约定，但后来切换到更标准的“m_”。因此，一半的函数以“_”开头，另一半以“m_”开头，这看起来很难看。坦率地说，在Emacs中使用宏可以在5分钟内解决这类问题，而不是从头开始。</p><p>重要的是要记住，当你白手起家时，绝对没有理由相信你会比第一次做得更好。首先，您甚至可能没有开发版本1的相同编程团队，因此您实际上并没有“更多的经验”。您只会再次犯大多数旧错误，并引入一些原始版本中没有的新问题。</p><p>当应用于大规模商业应用时，要扔掉的旧咒语Build One是危险的。如果您正在试验性地编写代码，那么当您想到更好的算法时，可能会想要撕毁您上周编写的函数。那没问题。您可能希望重构一个类以使其更易于使用。这也很好。但扔掉整个程序是危险的愚蠢行为，如果网景真的有一些具有软件行业经验的成年人监督，他们可能就不会这么自食其果了。</p></div><div id="story_share_this"><div class="sharethis-inline-share-buttons"></div></div><div class="text-break sotry_link page_narrow"><a target="_blank" href="https://www.joelonsoftware.com/2000/04/06/things-you-should-never-do-part-i/">https://www.joelonsoftware.com/2000/04/06/things-you-should-never-do-part-i/</a></div><div class="story_tags page_narrow"><button type="button" class="btn btn-light my_tag"><a href="/tag/应该/">#应该</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/代码/">#代码</a></button></div></div><div class="shadow p-3 mb-5 bg-white rounded clearfix"><div class="container"><div class="row"><div class="col-sm"><div><a target="_blank" href="/story/1009561.html"><img src="http://img.diglog.com/img/2020/7/thumb_5eae7cd27e142ebddc80ad3ef0deed7b.jpg" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1009561.html">相框应该被认定为一种艺术形式吗？</a></div><span class="my_story_list_date">2020-7-3 4:9</span></div><div class="col-sm"><div><a target="_blank" href="/story/1009115.html"><img src="http://img.diglog.com/img/2020/7/thumb_b2374af520f454d22ec18d183d0b23e9.png" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1009115.html">
健康课已经过时了，所以Lessonbee想要修复它</a></div><span class="my_story_list_date">2020-7-1 2:37</span></div><div class="col-sm"><div><a target="_blank" href="/story/1008922.html"><img src="http://img.diglog.com/img/2020/6/thumb_e92d8fb96ddaa35e639f1f229333e1f1.png" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1008922.html">非男性黑客新闻指南(2018)</a></div><span class="my_story_list_date">2020-6-30 20:56</span></div><div class="col-sm"><div><a target="_blank" href="/story/1008768.html"><img src="http://img.diglog.com/img/2020/6/thumb_0e7b2ba2e110deee5d432b86ececb736.jpeg" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1008768.html">软件应该设计成经久耐用</a></div><span class="my_story_list_date">2020-6-29 3:23</span></div></div></div></div><div class="my_movie_list_item shadow p-3 mb-5 bg-white rounded"><button type="button" class="btn btn-link my_tag"><a href="/tag/web2.0/">#web2.0</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/google/">#google</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/设计/">#设计</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/创意/">#创意</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/摄影/">#摄影</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/游戏/">#游戏</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/图片/">#图片</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/软件/">#软件</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/视频/">#视频</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/手机/">#手机</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/广告/">#广告</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/apple/">#apple</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/iphone/">#iphone</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/网站/">#网站</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/免费/">#免费</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/下载/">#下载</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/windows/">#windows</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/微软/">#微软</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/firefox/">#firefox</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/苹果/">#苹果</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/blog/">#blog</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/音乐/">#音乐</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/博客/">#博客</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/wordpress/">#wordpress</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/恶搞/">#恶搞</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/艺术/">#艺术</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/qq/">#qq</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/web/">#web</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/谷歌/">#谷歌</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/工具/">#工具</a></button></div></div></div><div id="my_footer"><div class=""><a href="/tags/">tags</a> <a href="/users/">users</a></div>&copy;2012-2021 diglog.com </div></div></body></html>