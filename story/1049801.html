<!doctype html><html lang="zh-hans"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>具有对JSON，YAML，TOML，CSV等的本机支持的替代Shell。 </title><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"><link rel="stylesheet" href="/img/css.css?random="><link data-rh="true" rel="icon" href="/img/favicon.ico"/><script data-ad-client="ca-pub-6067137220025946" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script type="text/javascript" src="https://platform-api.sharethis.com/js/sharethis.js#property=5effb96910009800120b8d4d&product=inline-share-buttons" async="async"></script>
<script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?03c1a0f31299b4a2fbb83c34d6beaac9";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script></head><body><div id="my_header"><div class="container"><nav class="navbar navbar-expand-lg"><a class="navbar-brand" href="/"><img alt="diglog" src="/img/logo.v1.gif" class="rounded-sm"></a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarNavAltMarkup"><div class="navbar-nav"></div></div></nav></div></div><div class="container"><div id="my_content"><h1 class="page_narrow">具有对JSON，YAML，TOML，CSV等的本机支持的替代Shell。 </h1><div class="row"><div class="col-lg-12 col-12"><div class="my_story_list_item shadow p-3 mb-5 bg-white rounded"><div class="story_page_pub_time page_narrow">2021-02-27 22:49:04</div><div class="story_img_container"><a href="http://img2.diglog.com/img/2021/2/071fb34c3bece8fe51fb17c13098a616.jpeg"><img src="http://img2.diglog.com/img/2021/2/071fb34c3bece8fe51fb17c13098a616.jpeg" class="img-fluid my_story_img" onerror="this.style.display='none'"></a></div><div class="page_narrow text-break page_content"><p>murex是一个shell，例如bash / zsh / fish /等。它遵循与POSIX shell（例如Bash）类似的语法，但是支持的高级功能比您通常期望的$ SHELL更高级。</p><p> 它的目的是与传统弹药足够相似，以保留大部分的肌肉记忆，同时又不怕在＆lt; bash-isms＆＃34;处做出重大改变。导致无法阅读，难以维护或不安全的代码。</p><p> murex是为提高DevOps生产力而设计的，因此它不适合您通常在Bash中运行的高性能工作负载（例如，作为并行进程分叉的管道）。</p><p>  更智能地处理错误（例如，try / catch块，错误消息中包含的行号，可选的以红色突出显示的错误等）</p><p> 支持类型化管道-可用于本地处理复杂数据格式（如JSON）。而且还具有完全覆盖甚至忽略类型化数据的功能，因此它也可以与标准UNIX工具一起透明地工作</p><p>     另外，shell的每个方面都易于扩展，检查并可以通过murex自己的软件包管理器进行管理</p><p> 该语言采用相对简单的语法，该语法宽松地基于功能和基于堆栈的编程范例（尽管没有LISP样式的嵌​​套圆括号，这使很多开发人员感到恐惧），同时尽可能地保持与POSIX之类的shell（例如Bash）的兼容性。例如，一个程序结构可能如下所示： </p><p>但是，murex的不同之处在于，尽管管道令牌|支持与现有Shell的兼容性，Murex习惯用法更喜欢-＆gt;用于可读性，因为它清楚地说明了数据流的方向。例如</p><p>  该语言本机支持多种数据类型。例如JSON，YAML，CSV，S-Expression甚至是松散制表的终端输出（例如ps，ls -l）。与处理像Bash这样的传统shell中的简单字节流相比，处理更复杂的数据安排时，这使通过管道传递数据和解析输出更加容易。</p><p>  除了murex精心设计并考虑脚本编写之外，交互式shell本身也围绕生产力而构建。为此，我们编写了自己的readline库。下面是该库的使用示例：</p><p>   语法突出显示（尽管示例中没有太多语法要突出显示）。如果您希望禁用颜色，也可以将其关闭</p><p>  列表视图中的制表符完成（在选择进程名称以杀死在选择时替换了进程ID的位置时可见）</p><p> regex搜索制表符完成建议（在cd和kill中都可见-通过按[CTRL + f]启用）</p><p> 使用$ EDITOR进行行编辑（示例中的vi-通过按[ESC]，然后按[v]启用） </p><p>在将多行数据粘贴到缓冲区中之前，先读取readline的警告，然后将预览选项作为上述警告的一部分使用</p><p>  尽管添加到shell的功能很多，我们仍尝试将＆＃34; magic＆＃34;的数量保持不变。最小化并遵循相当标准的结构，因此语言是可预测的。但是，有些时候魔术会走很长一段路。例如，在管道中管理了murex对不同格式的复杂数据对象的支持，因此在从它们查询数据时，您无需考虑数据格式。</p><p> 打开：file.csv-＆gt; [column_name]＃返回CSV fileopen中的特定列（或行）：file.json-＆gt; [index]＃返回JSON中的特定项目</p><p> 索引函数（[]根据管道数据类型更改其匹配算法，而open根据文件扩展名或MIME类型设置数据类型。</p><p> 有时，您会需要更少的猜测，或者只是想要强迫行为的鲁棒性。在这些情况下，您可以通过广播数据类型来删除魔术层：</p><p> 打开：file.txt-＆gt;转换csv-＆gt; [column_name] open：file.txt-＆gt;转换json-＆gt; [ 指数 ]</p><p> 对数据结构的这种认识还可以在foreach（它将循环遍历数组中的每个索引）和formap（针对复杂对象的键/值迭代）中得到利用。有关这些和其他控制结构的更多详细信息，请参见GUIDE.control-structures。 </p><p>尽管Bash具有全部功能，但到处都是隐藏的陷阱。 murex的目的是要尽可能多地解决这些问题，而又不会失去交互式命令行的灵活性或强大能力。这可以通过几个关键概念来实现：</p><p>  与常规shell相比，最大的突破性变化是默认情况下shell无法扩展globing。相反，这是通过将函数内联为数组来完成的：</p><p>  murex方法的优点是我们现在可以提供遵循相同惯用模式的其他匹配文件系统对象的方法：</p><p> ＃通过regexp patternls -l @ {rx \ .go $}匹配文件＃仅匹配directoryls -l @ {f + d}</p><p>  但是，有时您只需要内联扩展（例如，使用交互式shell时），可以通过@gcommand前缀实现：</p><p>   从可用性的角度以及定义完成规则的角度来看，Murex在命令行自动完成方面采用了稍有不同的方法。</p><p> 受IDE的启发，murex直接在手册页中查询标志以及＆tools＆tooltip＆＃34;。说明。通过JSON定义自定义补全，这意味着更容易定义简单的命令，而复杂的命令仍可以像使用其他shell一样回退到使用动态shell代码。 </p><p>这使得编写完成规则以及使代码更具可读性变得更加容易。 gits自动完成定义的示例：</p><p> private git-branch {＃返回git分支，并从列表中删除当前分支。 [：0]-＆gt; ！match *}自动完成集git {[{＃定义顶级标志＆＃34; Flags＆＃34 ;： [＆＃34; clone＆＃34 ;、＆＃34; init＆＃34 ;、＆＃34; add＆＃ 34;，＆＃34; mv＆＃34;，＆＃34; reset＆＃34;，＆＃34; rm＆＃34;，＆＃34; bisect＆＃34;，＆＃34; grep＆＃34;，＆＃ 34; log＆＃34;，＆＃34;状态，＆＃34;，＆＃34;分支＆＃34;，＆＃34;结帐＆＃34;，＆＃34;提交＆＃34 ;，＆＃34; diff＆＃34 ;、＆＃34; merge＆＃34 ;、＆＃34; rebase＆＃34 ;、＆＃34; tag＆＃34 ;、＆＃34; fetch＆＃34 ;、＆＃34 ; pull＆＃34;，push＆＃34;，stash＆＃34; ]，＃指定这些标志支持的值＆＃34; FlagValues＆＃34 ;： {＆＃34; init＆＃34 ;： [{＆＃34; Flags＆＃34 ;： [＆＃34;-bare＆＃34; ]}]，＆＃34; add＆＃34 ;: [{＆＃34; IncFiles＆＃34 ;: true，＆＃34; AllowMultiple＆＃34 ;: true}]，＆＃34; mv＆＃34 ;: [{ ＆＃34; IncFiles＆＃34 ;: true}]，＆＃34; rm＆＃34 ;: [{＆＃34; IncFiles＆＃34 ;: true，＆＃34; AllowMultiple＆＃34 ;: true}]，＆＃ 34; checkout＆＃34 ;： [{＆＃34; Dynamic＆＃34 ;:（{git-branch}），＆＃34; Flags＆＃34 ;: [＆＃34; -b＆＃34; ]}]，＆＃34; merge＆＃34 ;: [{＆＃34; Dynamic＆＃34 ;:（{git-branch}）}]}}]}}</p><p> murex还支持几种不同样式的完成建议。以适应不同的情况（上面的演示），以及内置的支持功能，可快速轻松地跳转到嵌套目录中的文件：</p><p>   像传统的shell一样，murex在默认情况下也带有错误，并带有使它们静音的选项。但是，对于需要以有用的方式捕获错误的情况，murex也支持更清晰的决策结构：</p><p>   ＃比较两个字符串如果{=`foo` ==`bar`}然后{out：＆＃34;`foo`匹配`bar`＆＃34;}＃检查命令是否成功运行！如果{foobar}然后{err： ＆＃34;`foobar`不能运行＆＃34;}</p><p>  与传统的shell不同，murex的设计是将测试和调试模式嵌入到shell语言中。这意味着您可以针对shell脚本编写测试，作为shell脚本本身的一部分。</p><p>  函数：hello-world {测试：定义示例{＆＃34; StdoutRegex＆＃34 ;:（^ Hello World $）}出来：＆lt; test_example＆gt; ＆＃34; Hello Earth＆＃34;}测试：运行{hello-world} </p><p>Hello Earth状态定义功能行Col. Message [FAILED]示例输出5 9 stdout：regexp与“ Hello Earth＆＃39;不匹配”。</p><p> 如果未启用测试模式，则将跳过任何测试命令而不执行它们，因此您可以在整个函数中自由地包含测试用例，而不必担心会对性能产生影响。</p><p>   测试：单元函数别名{＆＃34; PreBlock＆＃34; :（ {别名ALIAS_UNIT_TEST = example param1 param2 param3}），＆＃34; StdoutRegex＆＃34 ;：＆＃34;（[-_0-9a-zA-Z ] + =＆gt;。*？\ n）+＆＃34 ;,＆＃34; StdoutType＆＃34 ;:＆＃34; str＆＃34 ;,＆＃34; PostBlock＆＃34 ;:（{！alias ALIAS_UNIT_TEST} ）}功能：别名{＃以人类可读的格式运行时输出别名：--aliases-＆gt; formap：名称别名{$ name-＆gt; sprintf：＆＃34;％10s =＆gt; $ {esccli @alias} \ n＆＃34; }-＆gt;强制转换：str} test：运行别名</p><p>  状态定义功能行Col. Message [PASSED]（单位）别名13 1满足所有测试条件</p><p>  首先建议使用GUIDE.syntax，因为它会概述Shell脚本语言的语法和数据类型。</p><p> GUIDE.type-system描述了murex的类型系统。大多数情况下，由于外壳是围绕生产力设计的，因此您无需担心在murex中键入内容。</p><p> 或者，如果您已经是经验丰富的Bash开发人员，则可以阅读快速入门指南GUIDE.quick-start，直接使用murex。 </p><p>您可以通过多种方式将murex加载到系统上。 有关详细信息，请参见安装。  murex大量使用测试和CI / CD，以确保最新版本可以安全使用。  Git预提交和预推送文件的存在是为了帮助开发人员在碰到功能分支之前就发现任何回归错误。  每一次git push都针对数百种不同的测试和种族检测器（在Circle CI中运行）进行了验证。 这些测试运行10次，以消除任何可能的与计时相关的错误。  每次进行开发和掌握的工作都会创建一个新的docker容器lmorg / murex：develop和lmorg / murex：latest（用于master分支）。  然后针对最新容器运行每周自动构建。 这些构建在AWS CodeBuild中运行，它们生成murex.rockswebsite并构建预编译的二进制文件以供下载。 </p></div><div id="story_share_this"><div class="sharethis-inline-share-buttons"></div></div><div class="text-break sotry_link page_narrow"><a target="_blank" href="https://github.com/lmorg/murex">https://github.com/lmorg/murex</a></div><div class="story_tags page_narrow"><button type="button" class="btn btn-light my_tag"><a href="/tag/json/">#json</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/shell/">#shell</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/murex/">#murex</a></button></div></div><div class="shadow p-3 mb-5 bg-white rounded clearfix"><div class="container"><div class="row"><div class="col-sm"><div><a target="_blank" href="/story/1049730.html"><img src="http://img2.diglog.com/img/2021/2/thumb_c49ed71b1bfbe9acd1c6fbf5024dc439.png" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1049730.html">JSON互操作性漏洞探索 </a></div><span class="my_story_list_date">2021-2-27 9:15</span></div><div class="col-sm"><div><a target="_blank" href="/story/1049719.html"><img src="http://img2.diglog.com/img/2021/2/thumb_7362e109f97e60af2fd7fb7fea15fb22.jpeg" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1049719.html">Graphtage：JSON，HTML，YAML，CSV等的语义差异实用程序 </a></div><span class="my_story_list_date">2021-2-27 9:11</span></div><div class="col-sm"><div><a target="_blank" href="/story/1044055.html"><img src="http://img2.diglog.com/img/2021/1/thumb_f0513192985d93ce58e88ed7fc13bf83.png" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1044055.html">使用perf和VizTracer跟踪和可视化Python GIL </a></div><span class="my_story_list_date">2021-1-15 19:54</span></div><div class="col-sm"><div><a target="_blank" href="/story/1042497.html"><img src="http://img2.diglog.com/img/2020/12/thumb_db121d97838dc10dea9ff9a3cf7c6acc.png" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1042497.html">杰森·迪夫 </a></div><span class="my_story_list_date">2020-12-30 8:2</span></div></div></div></div><div class="my_movie_list_item shadow p-3 mb-5 bg-white rounded"><button type="button" class="btn btn-link my_tag"><a href="/tag/web2.0/">#web2.0</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/google/">#google</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/设计/">#设计</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/创意/">#创意</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/摄影/">#摄影</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/游戏/">#游戏</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/图片/">#图片</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/软件/">#软件</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/视频/">#视频</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/手机/">#手机</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/广告/">#广告</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/apple/">#apple</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/iphone/">#iphone</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/网站/">#网站</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/免费/">#免费</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/下载/">#下载</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/windows/">#windows</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/微软/">#微软</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/firefox/">#firefox</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/苹果/">#苹果</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/blog/">#blog</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/音乐/">#音乐</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/博客/">#博客</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/wordpress/">#wordpress</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/恶搞/">#恶搞</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/艺术/">#艺术</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/qq/">#qq</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/web/">#web</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/谷歌/">#谷歌</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/工具/">#工具</a></button></div></div></div><div id="my_footer"><div class=""><a href="/tags/">tags</a> <a href="/users/">users</a></div>&copy;2012-2021 diglog.com </div></div></body></html>