<!doctype html><html lang="zh-hans"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>在2021年开始打字项目 Starting a TypeScript Project in 2021</title><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"><link rel="stylesheet" href="/img/css.css?random="><link data-rh="true" rel="icon" href="/img/favicon.ico"/><script data-ad-client="ca-pub-6067137220025946" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script type="text/javascript" src="https://platform-api.sharethis.com/js/sharethis.js#property=5effb96910009800120b8d4d&product=inline-share-buttons" async="async"></script>
<script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?03c1a0f31299b4a2fbb83c34d6beaac9";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script></head><body><div id="my_header"><div class="container"><nav class="navbar navbar-expand-lg"><a class="navbar-brand" href="/"><img alt="diglog" src="/img/logo.v1.gif" class="rounded-sm"></a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarNavAltMarkup"><div class="navbar-nav"></div></div></nav></div></div><div class="container"><div id="my_content"><h1 class="page_narrow">Starting a TypeScript Project in 2021<br/>在2021年开始打字项目 </h1><div class="row"><div class="col-lg-12 col-12"><div class="my_story_list_item shadow p-3 mb-5 bg-white rounded"><div class="story_page_pub_time page_narrow">2021-04-22 11:38:50</div><div class="story_img_container"><a href="http://img2.diglog.com/img/2021/4/0dd76e77ebcc4facf12966b5f3a5f059.jpg"><img src="http://img2.diglog.com/img/2021/4/0dd76e77ebcc4facf12966b5f3a5f059.jpg" class="img-fluid my_story_img" onerror="this.style.display='none'"></a></div><div class="page_narrow text-break page_content"><p># Create project foldermkdir my-projectcd my-project # Create source folder and filesmkdir srctouch src/main.ts src/main.test.ts src/cli.ts # Create a package.jsonyarn init # Install TypeScript, linter and Jestyarn add -D typescript @types/node ts-nodeyarn add -D eslint @typescript-eslint/parser @typescript-eslint/eslint-pluginyarn add -D jest ts-jest @types/jest # Get a .gitignorewget https://raw.githubusercontent.com/metachris/typescript-boilerplate/master/.gitignore # Get a tsconfig.json with some defaults (adapt as needed)wget https://raw.githubusercontent.com/metachris/typescript-boilerplate/master/tsconfig.json # Alternatively you can create a fresh tsconfig.json (with extensive docstrings)tsc --init # Get a .eslintrc.jswget https://raw.githubusercontent.com/metachris/typescript-boilerplate/master/.eslintrc.js # Get a jest.config.json, for ts-jest to run the tests without a separate typescript compile stepwget https://raw.githubusercontent.com/metachris/typescript-boilerplate/master/jest.config.js # Create a git repo and make the first commitgit initgit add .git commit -am  &#34;initial commit&#34;</p><p>##创建项目FoldermKdir my-prodantcd my-project＃create源文件夹和filesmkdir srctouch src / main.ts src / main.test.ts src / cli.ts＃创建一个package.jsonyarn init＃安装打字，linter和jestyarn添加 - d typescript @ types / node ts-nodeyarn添加-d eslint @ typescript-eslint / parser @ typescript-eslint / eslint-pluginyarn Add -d jest ts-jest @ types / jest＃get a .gitignorewget https：//raw.githubusercontent .com / metachris / typescript-batherplate / master / .gitignore＃获取带有一些默认值的tsconfig.json（根据需要适应）wget https://raw.githubuscript-boilerplate/master/tconfig.json＃或者，您可以创建一个新鲜的tsconfig.json（具有广泛的docstrings）tsc --init＃get a .eslintrc.jswget https://raw.githubusercontent.com/metachris/typescript-boilerplate/master/.eslintrc.js＃get a jest.config.json，对于ts-jest来运行测试，没有单独的打字编译步骤https://raw.githubusercontent.com/metachris/typesript-boilerplate/mas ter / jest.config.js＃创建一个git repo并使第一个commitgit initgit添加.git comput -am＆＃34;初始提交＆＃34;</p><p>   {  &#34;scripts&#34;: {  &#34;cli&#34;:  &#34;ts-node src/cli.ts&#34;,  &#34;test&#34;:  &#34;jest&#34;,  &#34;lint&#34;:  &#34;tslint -c tslint.json &#39;src/**/*.ts&#39;&#34;,  &#34;build&#34;:  &#34;tsc -p tsconfig.json&#34;,  &#34;clean&#34;:  &#34;rm -rf dist build&#34;,  &#34;ts-node&#34;:  &#34;ts-node&#34; }}</p><p>   {＆＃34;脚本＆＃34 ;: {＆＃34; cli＆＃34 ;:＆＃34; ts-node src / cli.ts＆＃34 ;,＆＃34; test＆＃34 ;:＆＃34 ;:＆＃34; JEST＆ ＃34 ;,＆＃34; lint＆＃34 ;:＆＃34; tslint -c tslint.json＆＃39; src / ** / *。Ts＆＃39;＆＃34; build＆＃34; build＆＃34 ;：＆＃34; tsc -p tsconfig.json＆＃34 ;,＆＃34;干净＆＃34 ;:＆＃34; rm -rf dist build＆＃34 ;,＆＃34; ts-node＆＃34 ;:＆ ＃34; ts-node＆＃34; }}</p><p> Now you can run  yarn cli,  yarn test,  yarn lint,  yarn build and  yarn ts-node &lt;filename&gt;.</p><p> 现在，您可以运行纱线CLI，YARN测试，纱线棉绒，纱线构建和纱线TS节点＆lt;文件名和gt ;.</p><p>     import {  greet }  from  &#39;./main&#39; test( &#39;the data is peanut butter&#39;, ()  =&gt; {  expect( 1). toBe( 1)}); test( &#39;greeting&#39;, ()  =&gt; {  expect( greet( &#39;Foo&#39;)). toBe( &#39;Hello Foo&#39;)});</p><p>     从＆＃39导入{read}; ./ main＆＃39;测试（＆＃39;数据是花生酱＆＃39;，（）=＆gt; {期望（1）。tobe（1）}）;测试（＆＃39;问候＆＃39;，（）=＆gt; {期望（＆＃39; foo＆＃39;））。TOBE（＆＃39;你好Foo＆＃39;）}）;</p><p>     esbuild is an extremely fast JavaScript bundler thatcan also compile a  large subset of TypeScript code. You can use it to bundle both for Node.jsas well as for browsers. esbuild is still relatively young and under active / heavy development; see also  esbuild on GitHub.</p><p>     eSbuild是一个非常快的JavaScript Bundler，那个Can还编译了一个大型的打字代码子集。您可以使用它来捆绑Node.jsas以及浏览器。 eSbuild仍然是相对年轻，积极/繁重的发展;另请参阅GitHub上的esbuild。</p><p> Why use  esbuild in addition to  tsc? The TypeScript compiler doesn’t bundle well for browsers (developers usually resort to additional bundlers like webpack, parcel or rollup), and it’s pretty slow.</p><p> 为什么除了TSC之外还要使用esbuild吗？ TypeScript编译器对浏览器没有捆绑（开发人员通常诉诸额外的捆绑包，如WebPack，Parcel或Rollup），并且它非常缓慢。</p><p>    Additionally to  tsc (the TypeScript compiler), you can also bundle code with  esbuild for Node.js like this:</p><p>    此外，要为TSC（TypeScript编译器），您还可以将代码捆绑与eSbuild for node.js： </p><p> # Compile and bundleyarn esbuild src/cli.ts --bundle --platform =node --outfile =dist/esbuild/cli.js # Same, but minify and sourcemapsyarn esbuild src/cli.ts --bundle --platform =node --minify --sourcemap =external --outfile =dist/esbuild/cli.js # Run the bundled outputnode dist/esbuild/cli.js</p><p>#compile和bundleyarn esbuild src / cli.ts -bundle --platform = node --outfile = dist / esbuild / cli.js＃相同，但缩小和sourcemapsyarn esbuild src / cli.ts -bundle -platform = node --minify --sourcemap =外部--outfile = dist / esbuild / cli.js＃运行捆绑的outputnode dist / esbuild / cli.js</p><p>   When building with esbuild, you can use the   --watch option to rebuild whenever a file changed</p><p>   使用eSbuild构建时，可以使用--WATCH选项在更改文件时重建</p><p> esbuild does currently not support building  .d.ts declaration files (see also  this issue). You need to build those with  tsc.</p><p> eSBuild目前不支持Building .ts声明文件（另请参阅此问题）。您需要构建具有TSC的人。</p><p>  You can generate browser compatible modules with bundlers such as  esbuild,  webpack,  parcel and others.</p><p>  您可以使用Bundler生成浏览器兼容模块，例如Esbuild，WebPack，Parcel等。</p><p>  # Bundle for browsersyarn esbuild src/browser.ts --bundle --outfile =dist/esbuild/browser.js # Same, but with minification and sourcemapsyarn esbuild src/browser.ts --bundle --minify --sourcemap =external --outfile =dist/esbuild/browser.js</p><p>  ＃bundle for browsersyarn esbuild src / browser.ts -bundle --outfile = dist / esbuild / brower.js＃相同，但是用缩小和sourcemapsyarn esbuild src / browser.ts -bundle --minify --sourcemap =外部 - -outfile = dist / esbuild / browser.js</p><p>    You can access   window and   document in your code when loaded in a browser. You might want to use this to attach parts of your code to the  window object.</p><p>    在浏览器中加载时，您可以在代码中访问窗口和文档。您可能希望将此用于将代码的部分附加到窗口对象。</p><p>   Create  src/browser.ts as entrypoint for browser builds. There you can attach custom properties to  window like this:</p><p>   创建SRC / Browser.ts作为浏览器构建的入口点。在那里，您可以将自定义属性附加到这样的窗口： </p><p> // Import a function  import {  greet }  from  &#39;./main&#39; // Make it accessible on the window object (window  as  any). greet  =  greet</p><p>//从＆＃39导入函数导入{read}; ./ main＆＃39; //使其在窗口对象（窗口为任何）。问候=问候</p><p>       Let’s publish the latest code to npm, for use with both Node.js and the browser.</p><p>       让我们将最新代码发布到NPM，同时与Node.js和浏览器一起使用。</p><p>   # Build with tsc and esbuildyarn build-all # Update the version and publish to npmyarn publish</p><p>   ＃使用tsc和esbuildyarn build-all＃更新版本并发布到npmyarn发布</p><p> build-all builds the project with both  tsc to get the type definiton files, and  esbuild to build for Node.js and browsers.</p><p> 构建 - 所有都构建了TSC的项目，以获取QuoteIton文件，并为Node.js和浏览器构建esbuild。</p><p>            There are several CDNs which automatically deliver npm projects, like  jsDelivr,  cdnjs,  unpkg.com or  skypack.</p><p>            有几个CDN自动提供NPM项目，如jsdelivr，cdnjs，unpkg.com或skypack。</p><p>        You probably want to run the tests and linter on every code push. Additionaly you might want to build and deploy the docs from CI too.</p><p>        您可能希望在每个代码推动下运行测试和linter。您可能想要构建和部署来自CI的文档。</p><p>   name: Lint and test on: [push, pull_request] jobs:  lint_and_test:  runs-on: ubuntu-latest  strategy:  fail-fast:  false  matrix:  nodejs: [ 10,  12,  14]  steps: -  uses: actions/ [email protected]  # https://github.com/actions/setup-node -  uses: actions/ [email protected]  with:  node-version: ${{ matrix.nodejs }} -  run: yarn install -  run: yarn test -  run: yarn lint -  run: yarn build-all</p><p>   名称：LINT和测试：[推，PULL_REQUEST]作业：Lint_and_test：runs-on：Ubuntu-最新策略：FAIL-FAST：FALSE矩阵：NODEJS：[10,12,14]步骤： - 用途：操作：操作/ [电子邮件保护]＃https://github.com/actions/setup-node  - 用途：操作/ [电子邮件保护]带：node-version：$ {{matrix.nodejs}}  - 运行：yarn安装 - 运行：纱线测试 - 跑：纱线棉绒 - 跑：纱线构建 - 全部 </p><p>   If you want to verify your build / package on various operating systems (Windows, Linux, macOS), you can setup a matrix for a job like this:</p><p>如果您想在各种操作系统（Windows，Linux，MacOS）上验证您的构建/包，您可以为这样的作业设置矩阵：</p><p> jobs:  default-version:  runs-on: ${{ matrix.os }}  strategy:  fail-fast:  false  matrix:  os: [macos-latest, windows-latest, ubuntu-latest]  steps: -  uses: actions/ [email protected] -  uses: actions/ [email protected]  with:  node-version:  12 ...</p><p> 作业：默认版本：runs-on：$ {{matrix.oS}}策略：Fail-Fast：False矩阵：OS：[MacOS-Lault，Windows-MateL，Ubuntu-最新]步骤： - 用途：操作/ [电子邮件保护]  - 用途：操作/ [电子邮件保护]带：node-version：12 ...</p><p>   image: node: 12 cache:  paths: - node_modules/ stages: - test lint-and-test:  stage: test  script: - yarn install - yarn test - yarn lint - yarn build-all</p><p>   图片：节点：12缓存：路径： -  node_modules /阶段： - 测试棉绒和测试：舞台：测试脚本： - 纱线安装 - 纱线测试 - 纱线棉绒 - 纱线构建 - 所有</p><p>   You can auto-generate API documentation from the TypeScript source files using  TypeDoc, which builds on JSDoc syntax. The generated documentation can be published to GitHub / GitLab pages through the CI.</p><p>   您可以使用Typedoc自动生成API文档，该文件在jsdoc语法上构建。生成的文档可以通过CI发布到GitHub / Gitlab页面。</p><p>          This post covered a full TypeScript project setup, with tests, esbuild, bundling for Node.js and browsers,publishing on npm, continuous integration and automatic documentation.</p><p>          这篇文章介绍了一个完整的RoyingScript项目设置，具有测试，esbuild，Node.js和浏览器捆绑，在NPM上发布，持续集成和自动文档。</p><p>       You might be interested in using  Deno instead of Node.js. Deno is a modern V8 runtime with a lot of great features, created by  Ryan Dahl, author of Node.js. It’s still somewhat new and experimental though.</p><p>       您可能有兴趣使用丹诺而不是node.js. Deno是一个现代化的V8运行时，由Node.js的作者Ryan Dahl创建了很大的功能。但它仍然有些新的和实验。</p><p> To bootstrap a full web project, you might want to use  hot module replacement (HMR). This is outside the scope of this post. In the meantime, see the  webpack docs and  parcel docs about HMR.</p><p> 要引导完整的Web项目，您可能希望使用热模块替换（HMR）。这超出了这篇文章的范围。与此同时，请参阅关于HMR的WebPack文档和包裹文档。 </p><p> If you want to target both Node.js and browsers, be aware that several APIs are different, most notably  fetch,  WebSocket,  Buffer.</p><p>如果要针对Node.js和浏览器，请注意，几个API是不同的，最值得注意的是，WebSocket，缓冲区。 </p></div><div id="story_share_this"><div class="sharethis-inline-share-buttons"></div></div><div class="text-break sotry_link page_narrow"><a target="_blank" href="https://www.metachris.com/2021/04/starting-a-typescript-project-in-2021/">https://www.metachris.com/2021/04/starting-a-typescript-project-in-2021/</a></div><div class="story_tags page_narrow"><button type="button" class="btn btn-light my_tag"><a href="/tag/打字/">#打字</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/esbuild/">#esbuild</a></button></div></div><div class="my_movie_list_item shadow p-3 mb-5 bg-white rounded"><button type="button" class="btn btn-link my_tag"><a href="/tag/web2.0/">#web2.0</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/google/">#google</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/设计/">#设计</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/创意/">#创意</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/摄影/">#摄影</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/图片/">#图片</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/游戏/">#游戏</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/软件/">#软件</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/视频/">#视频</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/广告/">#广告</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/手机/">#手机</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/iphone/">#iphone</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/网站/">#网站</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/apple/">#apple</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/windows/">#windows</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/免费/">#免费</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/下载/">#下载</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/微软/">#微软</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/firefox/">#firefox</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/blog/">#blog</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/苹果/">#苹果</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/音乐/">#音乐</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/博客/">#博客</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/wordpress/">#wordpress</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/恶搞/">#恶搞</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/qq/">#qq</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/web/">#web</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/艺术/">#艺术</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/工具/">#工具</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/分享/">#分享</a></button></div></div></div><div id="my_footer"><div class=""><a href="/tags/">tags</a> <a href="/users/">users</a></div>&copy;2012-2021 diglog.com </div></div></body></html>