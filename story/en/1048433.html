<!doctype html><html lang="zh-hans"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>通过CommonName字段指定主机的TLS证书或多或少地消失了 TLS certificates specifying hosts via the CommonName field is more or less gone</title><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"><link rel="stylesheet" href="/img/css.css?random="><link data-rh="true" rel="icon" href="/img/favicon.ico"/><script data-ad-client="ca-pub-6067137220025946" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script type="text/javascript" src="https://platform-api.sharethis.com/js/sharethis.js#property=5effb96910009800120b8d4d&product=inline-share-buttons" async="async"></script>
<script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?03c1a0f31299b4a2fbb83c34d6beaac9";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script></head><body><div id="my_header"><div class="container"><nav class="navbar navbar-expand-lg"><a class="navbar-brand" href="/"><img alt="diglog" src="/img/logo.v1.gif" class="rounded-sm"></a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarNavAltMarkup"><div class="navbar-nav"></div></div></nav></div></div><div class="container"><div id="my_content"><h1 class="page_narrow">TLS certificates specifying hosts via the CommonName field is more or less gone<br/>通过CommonName字段指定主机的TLS证书或多或少地消失了 </h1><div class="row"><div class="col-lg-12 col-12"><div class="my_story_list_item shadow p-3 mb-5 bg-white rounded"><div class="story_page_pub_time page_narrow">2021-02-19 08:59:52</div><div class="page_narrow text-break page_content"><p>TLScertificates for hosts and domains must somehow identify whathostname (or names) they&#39;re for. Historically  there have been twoways to do this. The first way was aspecific sub-field, the  CN or CommonName, of the certificate&#39;soverall  Subject Name. This had the problem that it could onlyhave one name. When people started wanting to have TLS certificatesthat covered more than one name, they invented another mechanism,the  Subject Alternative Name (SAN) extension.</p><p>主机和域的TLOFRIFICES必须以某种方式识别它们＆＃39的Whathostname（或名称）;重新。从历史上看，已经扭动了这一点。第一种方式是证书和＃39的缺陷子字段，CN或Commonmame; Soverall主题名称。这有问题是它只能占用一个名字。当人们开始想要拥有TLS认证时，他们发明了另一个机制，主题替代名称（SAN）扩展。</p><p> As a practical matter, all vaguely modern software that wants toproperly validate TLS certificates has supported (and often preferred)Subject Alternative Names for some time. A great many TLS certificatesin the wild are for multiple hosts and it&#39;s generally unlikely that thehost you&#39;re connecting to is the one name that the system chose to putin the CN field; software that only supports CN cannot validate thoseTLS certificates. As a matter of timing, SANs have been theoreticallymandatory since 2002 and checking only SANs has been theoreticallyrequired since 2011 (which means that since 2011 or earlier, the CN wassupposed to always be one of the SANs).</p><p> 作为一个实际问题，所有想要顶部验证TLS证书的含糊不清的软件都支持（通常是首选）主题替代名称。野外的许多TLS证书都是多个主机和它＆＃39;它通常不太可能，你和＃39;重新连接到系统选择普到CN字段的一个名称;只支持CN的软件无法验证Thosetls证书。由于时间问题，SAN的自2002年以来一直theoreticallymandatory和只的SAN已自2011年theoreticallyrequired（这意味着，自2011年或更早，在CN wassupposed始终是SAN的一个）。</p><p> These days, any remaining support for looking at TLS certificateCommonName to validate TLS certificates is getting more and moreextinct (and more so than I expected when I started writing thisentry). In the browser realm,  Chrome apparently turned it off in58, released in 2017, and thenthrew out the option to check it again in Chrome 65 (from the commenton  my old entry, which was ironicallywritten shortly before Chrome did this). Firefox is said to haveremoved support in version 48, from August of 2016.  Safariapparently stopped looking at CommonName in iOS 13 and macOS 10.15, which I believe datefrom late 2019.  This Go change also talks abouthow browsers removed it in 2019 (&#39;last year&#39; for a mid 2020 change).</p><p> 这些天，对查看TLS CertificateCommonname验证TLS证书的任何剩余支持是越来越多的（除了我开始编写本期时的方式）越来越多的（而不是我的预期）。在浏览器领域中，Chrome显然将其截止，在2017年发布，并在Chrome 65中再次出去选择它（来自我的旧条目的Reviceon，这在Chrome之前很快就搞乱了）。据说Firefox在2016年8月开始，在第48号版本中，Safariappartich在iOS 13和Macos 10.15中查看了Commonmame，我相信2019年底。这更改也会在2019年谈论浏览器删除浏览器（＆＃39;去年＆＃39; 2020年中期的变化）。</p><p> In non-browser TLS code, Go started ignoring CN by default inGo 1.15 (released in August of 2020) and this will be the onlyoption starting in Go 1.17 (to be released in August of 2021),per  here. SinceFirefox doesn&#39;t support CN any more, I assume that  NSS doesn&#39;teither, since NSS is basically Firefox&#39;s underlying TLS implementation.I have no idea what other TLS libraries are doing, but I would expectthat many of them will support CommonName for some time to come; TLSlibraries are historically behind browser practices. Hopefully theyare all following the 2011 requirement to check only SANs when SANs arepresent (which they should always be in public certificates).</p><p> 在非浏览器TLS代码中，通过默认IGO 1.15开始忽略CN（2020年8月发布），这将是从这里开始的1.17（2021年8月份发布）。自从事件不再支持CN，我假设NSS没有，因为NSS基本上是Firefox＆＃39; S潜在的TLS实现。我不知道其他TLS图书馆正在做什么，但我会期待许多人他们将支持普通名称才能到期; TLSLibraries在历史上落后于浏览器实践。希望在2011年要求审视SAN的情况下，他们所有人都在遭到审视时（他们应该始终在公共证书中）。</p><p> Probably TLS certificates will continue to contain CommonName fieldsfor a long time to come. Having a  Subject Name in general iscommon (although apparently not actually required) and the CN is astandard (although not required) part of the Subject Name, so youmight as well throw it in. Even Mozilla and Let&#39;s Encrypt (still)have TLS certificates with CNs. However, since I checked this now,the current  CA/Browser Forum  baselinerequirements(version 1.7.3) allow but don&#39;t require CommonName (section 7.1.4.2.2,which says that it&#39;s &#39;discouraged, but not prohibited&#39;). Given howconservative most Certificate Authorities are, I expect them to beissuing TLS certificates with CommonName fields until they&#39;rerequired to stop.</p><p> 可能TLS证书将继续包含很长一段时间的Commonmame Fields。在一般的iscommon中有一个主题名称（尽管实际上没有实际要求），CN是一个主题名称的标准（虽然不是必需的），所以你也会抛弃它。甚至Mozilla和Let＆＃39;加密（仍然）具有CNS的TLS证书。然而，由于我现在检查了这个，所以当前的CA /浏览器论坛BaselIneRequiredseCeed（1.7.3）允许and＆＃39; t需要commonname（第7.1.4.2.2节，这表明它＆＃39; s＆＃39;气馁，但不禁止＆＃39;）。鉴于大多数证书机构的人员，我希望他们使用Commonmame字段欺骗TLS证书，直到它们＆＃39;重新要求停止。</p><p> (An interested party could scan Certificate Transparency logs to see ifthere were very many issued certificates without CNs. Probably there aresome; someone must have tried it out at some point through an officialCA.)</p><p> （有兴趣的方可以扫描证书透明度日志，看看If是否有很多发布证书，没有CNS。可能有一定是官方的;某人必须在一定程度上通过官方CAS尝试。）</p><p> PS:  no-common-name.badssl.comhas a TLS certificate without a CN, or at least it&#39;s supposed to( via),but the TLS certificate is expired right now as I write this entryso it&#39;s hard to test how client software behaves.  See also,which pointed me to  no-subject.labs.vu.nl,which has a currently valid TLS certificate with no  Subject Name at all.</p><p> ps：no-common-name.badssl.comhas没有cn的tls证书，或者至少是它的tls证书，或者应该是（via）的，但TLS证书现在已经到期，因为我写这个Entryso它＆＃39; s难以测试客户端软件的行为方式。另请参阅，这将我指向no -subject.labs.nl，它具有当前有效的TLS证书，根本没有主题名称。 </p></div><div id="story_share_this"><div class="sharethis-inline-share-buttons"></div></div><div class="text-break sotry_link page_narrow"><a target="_blank" href="https://utcc.utoronto.ca/~cks/space/blog/tech/TLSCertificateCNMostlyGone">https://utcc.utoronto.ca/~cks/space/blog/tech/TLSCertificateCNMostlyGone</a></div><div class="story_tags page_narrow"><button type="button" class="btn btn-light my_tag"><a href="/tag/字段/">#字段</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/tls/">#tls</a></button></div></div><div class="my_movie_list_item shadow p-3 mb-5 bg-white rounded"><button type="button" class="btn btn-link my_tag"><a href="/tag/web2.0/">#web2.0</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/google/">#google</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/设计/">#设计</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/创意/">#创意</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/摄影/">#摄影</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/游戏/">#游戏</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/图片/">#图片</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/软件/">#软件</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/视频/">#视频</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/广告/">#广告</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/手机/">#手机</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/iphone/">#iphone</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/网站/">#网站</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/免费/">#免费</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/下载/">#下载</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/windows/">#windows</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/微软/">#微软</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/苹果/">#苹果</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/firefox/">#firefox</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/blog/">#blog</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/apple/">#apple</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/音乐/">#音乐</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/博客/">#博客</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/wordpress/">#wordpress</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/恶搞/">#恶搞</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/qq/">#qq</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/艺术/">#艺术</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/web/">#web</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/工具/">#工具</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/分享/">#分享</a></button></div></div></div><div id="my_footer"><div class=""><a href="/tags/">tags</a> <a href="/users/">users</a></div>&copy; 2020 diglog.com </div></div></body></html>