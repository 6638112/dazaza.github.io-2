<!doctype html><html lang="zh-hans"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>学习爱一个刚性和不灵活的语言 Learning to Love a Rigid and Inflexible Language</title><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"><link rel="stylesheet" href="/img/css.css?random="><link data-rh="true" rel="icon" href="/img/favicon.ico"/><script data-ad-client="ca-pub-6067137220025946" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script type="text/javascript" src="https://platform-api.sharethis.com/js/sharethis.js#property=5effb96910009800120b8d4d&product=inline-share-buttons" async="async"></script>
<script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?03c1a0f31299b4a2fbb83c34d6beaac9";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script></head><body><div id="my_header"><div class="container"><nav class="navbar navbar-expand-lg"><a class="navbar-brand" href="/"><img alt="diglog" src="/img/logo.v1.gif" class="rounded-sm"></a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarNavAltMarkup"><div class="navbar-nav"></div></div></nav></div></div><div class="container"><div id="my_content"><h1 class="page_narrow">Learning to Love a Rigid and Inflexible Language<br/>学习爱一个刚性和不灵活的语言 </h1><div class="row"><div class="col-lg-12 col-12"><div class="my_story_list_item shadow p-3 mb-5 bg-white rounded"><div class="story_page_pub_time page_narrow">2021-06-19 20:25:59</div><div class="story_img_container"><a href="http://img2.diglog.com/img/2021/6/274903a76d65a3af09b95bba033059c4.jpg"><img src="http://img2.diglog.com/img/2021/6/274903a76d65a3af09b95bba033059c4.jpg" class="img-fluid my_story_img" onerror="this.style.display='none'"></a></div><div class="page_narrow text-break page_content"><p>I am old enough to remember the publication of the Strawman, Woodenman, Tinman, Ironman, and Steelman  specifications for a new computer language in the mid 1970s — the language that became  Ada. A few years later I read C. A. R. Hoare&#39;s Turing Award  speech where, after criticizing the complexity of ALGOL 68, he turned his withering gaze on the new Ada language:</p><p>我已经足够大，以记住1970年代中期的新电脑语言的稻草人，雪橇，锡曼，熨斗和钢铁公司规范的出版物 - 这是一种成为ADA的语言。几年后，我读了C. A. R. HOARE＆＃39;在批评AGLOL 68的复杂性之后，他在新的ADA语言上击败了他的凝视：</p><p>  Do not allow this language in its present state to be used in applications where reliability is critical.... The next rocket to go astray as a result of a programming language error … may be a nuclear warhead exploding over one of our own cities. An unreliable programming language generating unreliable programs constitutes a far greater risk to our environment and to our society than unsafe cars, toxic pesticides, or accidents at nuclear power stations.</p><p>  不要允许这种语言在其目前的状态下用于可靠性至关重要的应用程序中....由于编程语言错误，下一个火箭误入歧途......可能是一个源自我们自己的城市之一的核弹头。产生不可靠的计划的不可靠的编程语言构成了对我们环境的更大风险以及我们的社会而不是核电站的不安全汽车，有毒农药或事故。</p><p>  Having delighted in Hoare’s speech, particularly the fable at the end about the clothes that had no emperor, I overlooked Hoare&#39;s later support for Ada. That is, until a few years ago my view of Ada as a programming language was clear: an inflated, inflexible language useful only in a few legacy military applications, of no use to anyone working with high-performance embedded code.</p><p>  在Hoare的讲话中很高兴，特别是寓言结束了没有皇帝的衣服，我忽略了Haare＆＃39;后来支持ADA。也就是说，直到几年前，我对ADA的看法作为编程语言很清楚：只有在几个遗留的军事应用中只有在几个遗留的军事应用中有用的膨胀，不灵活的语言，对于使用高性能嵌入式代码的任何人都没有用。</p><p>    Until the COVID-19 virus appeared, I used to attend the annual  Safety Critical Systems Symposium in the UK in person. A company called  AdaCore always had a stand at that symposium, and a few Februarys ago I chatted with their representative during a break. My opening  Dunning and Kruger gambit was along the lines of “ I work with high-performance, embedded software, so what you have to offer with Ada is obviously of no use to me”. I may even have ended that with a chuckle.</p><p>    直到Covid-19病毒出现，我曾经亲自参加英国的年度安全关键系统研讨会。一家名为Adacore的公司总是在那个研讨会上待命，同时在休息期间与他们的代表一起聊天。我的开幕式和克鲁格Gambit沿着“我使用高性能，嵌入式软件，所以你所提供的东西显然对我来说显然没有用”。我甚至可能结束那个笑声。</p><p>  Her response was a simple challenge: “ When did you last look at Ada?”</p><p>  她的回答是一个简单的挑战：“你什么时候上次看Ada？”</p><p>  Confessing that my  only look at Ada had been very superficial and some 35 years previously, I was given Quentin Ochem&#39;s   Ada for the C++ or Java Developer,  and John McCormick and Peter Chapin&#39;s    Building High Integrity Applications with SPARK. I read these on the flight back to Canada and, arriving home, experimented with a simple program. The result was enough to put me off Ada for life. I tried to write a “Hello World” program:</p><p>  承认我唯一的看待Ada已经非常肤浅，在此之前有35年，我给了Quentin Ochem＆＃39;在C ++或Java开发人员和John Mccormick和Peter Chapin＆＃39; S的高度完整性应用。我在航班上读到加拿大的航班，到达家，尝试了一个简单的程序。结果足以让我脱离生命。我试图写一个“Hello World”程序：</p><p>  with Ada.Text_IO; use Ada.Text_IO;procedure Main is MyString : String(1 .. 20);begin MyString := &#34;Hello World&#34;; Put_Line(MyString);end Main;</p><p>  与ada.text_io;使用ada.text_io;程序主要是mystring：string（1 .. 20）;开始mystring：=＆＃34;你好世界＆＃34 ;; put_line（mystring）;最终主要; </p><p>  The compiler gave me a warning which, of course, I ignored — real programmers don’t read compiler warnings. When I ran the program, this appeared:</p><p>编译器给了我一个警告，当然，我被忽略了 - 真正的程序员不读取编译器警告。当我运行该程序时，这会出现：</p><p>    My first thought was that I had tried to copy too many characters into MyString and that unlike C&#39;s  strcpy() Ada’s compiler had caught my error. But “Hello World” has only 11 characters, certainly fewer than 20. This was Ada’s strong typing kicking in: “Hello World” is not a 20-character string, and so it cannot be put into MyString.</p><p>    我的第一个想法是我试图将太多字符复制到mystring中，与c＆＃39不同，它的strcpy（）ada的编译器抓住了我的错误。但是“你好世界”只有11个字符，肯定不到20人。这是Ada的强大打字踢：“你好世界”不是一个20个字符的弦，所以它不能进入​​mystring。</p><p>    Working in the world of safety-critical, embedded systems, I was spending a lot of time trying to avoid the pitfalls of the C language: I realised that the teams of people working to define the MISRA-C and SEI CERT C subsets of C were trying to reduce the C language to a safer subset. I was familiar with the supposedly safe subsets of D and Rust, and following the interesting results of my “Hello World” experiment, I thought the time had come for me look seriously at Ada again, and in particular, the SPARK subset.</p><p>    在世界安全关键的嵌入式系统中工作，我花了很多时间试图避免C语言的陷阱：我意识到人们努力定义CAS-C和SEI CERT C的C子集正在尝试将C语言减少到更安全的子集。我熟悉D和Reart的据说安全的子集，并追随我的“你好世界”实验的有趣结果，我以为时，我的时间再次来到ADA，特别是Spark子集。</p><p>  I bought John Barnes’ formidable (949 pages)   Programming in Ada 2012 and, while I didn’t read it cover-to-cover, I started creating programs larger than my first Hello World. Like other programmers who’ve commented to me about Ada, I was exasperated with the compiler—until I came to appreciate that it was protecting me from myself. I also came to realise that Ada is not the dead language I had assumed, not a failed enterprise whose development had stopped in the early 1980s. At the time of writing, the latest versions are Ada 2012 and SPARK 2014, sufficiently recent to be useful today, and not so recent as to be untried.</p><p>  我在2012年的ADA购买了John Barnes的强大（949页）编程，而我没有读取它的封面，我开始创建比我的第一个Hello World更大的程序。像其他程序员一样对我有关ADA的评论，我被编译器激怒了 - 直到我来欣赏它正在保护我。我也意识到ADA不是我所承担的死语言，而不是20世纪80年代初的开发停止的失败企业。在撰写本文时，最新版本是2012年的ADA和Spark 2014，今天充分近期有用，而不是未经证实的。</p><p>  The SPARK subset of Ada allows the correct operation of a program to be proven statically. This capability completed my awakening and brought me to embrace Ada. This occurred when I prepared a small SPARK example for a programming class I was teaching. My intention for this class had been to:</p><p>  ADA的火花子集允许静态证明程序的正确操作。这种能力完成了我的觉醒，让我接受了Ada。当我为我教学的编程类准备了一个小的Spark榜样时发生了这一切。我对这个班的意图是：</p><p>  Run the prover again to demonstrate to the class that the SPARK prover could detect the bug.</p><p>  再次运行箴言以向课程展示Spark Prover可以检测到错误的课程。</p><p>  My program performed a simple calculation, very inefficiently, to find the smallest factor of an integer. It returned the smallest factor and the “other” factor:</p><p>  我的程序执行了简单的计算，非常效率地，找到整数的最小因子。它返回了最小的因素和“其他”因素： </p><p>      Post =&gt; (N = N&#39;Old / Factor) and (N&#39;Old rem Factor = 0) and (for all J in 2 .. Factor - 1 =&gt; N&#39;Old rem J /= 0);</p><p>Post =＆gt; （n = n＆＃39;旧/因子）和（n＆＃39; old rem factor = 0）和（对于所有j在2中为2 .. factor-1 =＆gt; n＆＃39;旧rem j / = 0）;</p><p>  For example, calling SmallestFactor (N, F) with N = 245489 should return N = 31 as the smallest factor and F = 7919 as the “other” factor.</p><p>  例如，调用N = 245489的小型Factor（n，f）应将n = 31作为最小因子返回，并且f = 7919作为“其他”因子。</p><p>  Steps 1 and 2 went well. I wrote the program and tested it with numerous suitable inputs (e.g., 245489) and found it worked correctly—or so it seemed. It was at Step 3 that my eyes were opened. The SPARK prover told me that my program was incorrect; if the input is 9, then the program gives erroneous output:</p><p>  步骤1和2进展顺利。我写了这个程序并用许多合适的输入测试了它（例如，245489），发现它正确工作 - 似乎是它。正是在步骤3，我的眼睛被打开了。 Spark Prover告诉我，我的程序不正确;如果输入为9，则程序提供错误的输出：</p><p>  cannot prove N = N’Old / Factore.g. when Factor = 1 and N = 3 and N’Old = 9</p><p>  不能证明n = n'old / factore.g。当因子= 1和n = 3和n'old = 9时</p><p>  I didn’t need to insert the minor bug! I had inserted it inadvertently, and I had  not found it during testing. The program works perfectly for any input value other than 9. Thanks to Ada and SPARK, I had a far better teaching example than the one I had tried to create.</p><p>  我不需要插入小错误！我无意中插入了它，我在测试期间没有找到它。该程序对于除9以外的任何输入值的工作完全相同。感谢Ada和Spark，我有一个更好的教学例子，而不是我试图创造的。</p><p>  While I was belatedly getting to know Ada, AdaCore popped up again when a joint  BlackBerry QNX and AdaCore customer wanted to use Ada. With my new-found enthusiasm, I became one of the BlackBerry QNX contacts with AdaCore. For some years now the AdaCore compiler and libraries have been available on BlackBerry® QNX® systems.</p><p>  虽然我被姗姗来迟地了解Ada，但是当一个联合黑莓Qnx和骗子客户想要使用ADA时，adacore再次出现。通过我的新发现热情，我成为了与古怪的黑莓QNX联系人之一。现在已经在BlackBerry®QNX®系统上提供了多年的涂抹编译器和库。</p><p>    As I write this, I have a serious Ada program consisting of 19 source code files containing 2,985 comment lines and 6,253 of Ada code open on my desktop. This forms part of a semi-formal verification suite of a new QNX development in progress at the moment. In the past I would have written this program in C or Python. Writing it in Ada has sometimes been infuriating because I turn on all compiler warnings and specify that warnings are to be treated as errors. However, Ada’s characteristics have saved me hours of debugging. Getting a clean compilation takes a little longer, but that is more than compensated by the reduced debugging effort.</p><p>    正如我写这一点，我有一个严肃的ADA程序，包括19个源代码文件，其中包含2,985条评论线和我的桌面上的ADA代码的6,253个。这是在目前正在进行的新QNX开发的半正式验证套件的一部分。在过去，我将在C或Python中写入此程序。在ADA中写作有时候一直在激励，因为我打开所有编译器警告并指定警告将被视为错误。然而，Ada的特点为我节省了几个小时的调试。获取干净的编译需要更长的时间，但这不仅仅是通过减少的调试工作来补偿。 </p><p>  On several occasions I have needed help and have found excellent help from the  Ada group at StackOverflow and from the AdaCore  suppor t desk. My questions have ranged from “what is the more Ada-ish way of doing this?”, to deep questions about race conditions between tasks (the Ada term for “threads”). Answers both from StackOverflow and AdaCore support have always been prompt, professional and polite.</p><p>在若干场合，我需要帮助，并从Stackoverflow和Adacore Suppor T书桌找到了ADA集团的优秀帮助。我的问题从“做了更多的是，是什么样的方式？”，对任务之间的比赛条件（“帖子”的竞争条件）的深刻问题。来自Stackoverflow和adacore支持的答案始终是提示，专业和礼貌的。</p><p>    I very much like a great deal of Ada&#39;s syntactic sugar, for example, being able to break up long integers and floating point values for improved human readability:</p><p>    我非常喜欢ata and＃39; s语法糖，例如，能够分解长整数和浮点值，以改善人类可读性：</p><p>    However, it is Ada’s semantics that are obviously most important. Working with highly-threaded, embedded code, I particularly like Ada’s concept of a “protected variable”, a variable to which access is limited to one thread (“task” in Ada-speak) at a time, and the related support for protected shared buffers used between tasks.</p><p>    但是，它是ADA的语义，显然是最重要的。使用高度线程的嵌入式代码，特别是像ADA的“受保护变量”的概念，一个可访问的变量仅限于一个线程（“在ADA-Speep中的”任务“），以及相关的受保护支持任务之间使用的共享缓冲区。</p><p>  Apart from very short, run-once programs, I must confess that Ada is now my language of choice. I am getting a lot of use out of our Ada compiler.</p><p>  除了很短，跑步的程序之外，我必须承认Ada现在是我的首选语言。我的ADA编译器中我得到了很多用。 </p></div><div id="story_share_this"><div class="sharethis-inline-share-buttons"></div></div><div class="text-break sotry_link page_narrow"><a target="_blank" href="https://devblog.blackberry.com/en/2021/05/learning-to-love-a-rigid-and-inflexible-language">https://devblog.blackberry.com/en/2021/05/learning-to-love-a-rigid-and-inflexible-language</a></div><div class="story_tags page_narrow"><button type="button" class="btn btn-light my_tag"><a href="/tag/学习/">#学习</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/love/">#love</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/ada/">#ada</a></button></div></div><div class="my_movie_list_item shadow p-3 mb-5 bg-white rounded"><button type="button" class="btn btn-link my_tag"><a href="/tag/web2.0/">#web2.0</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/google/">#google</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/设计/">#设计</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/创意/">#创意</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/摄影/">#摄影</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/图片/">#图片</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/游戏/">#游戏</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/软件/">#软件</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/视频/">#视频</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/手机/">#手机</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/广告/">#广告</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/windows/">#windows</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/iphone/">#iphone</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/免费/">#免费</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/网站/">#网站</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/下载/">#下载</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/微软/">#微软</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/blog/">#blog</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/firefox/">#firefox</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/音乐/">#音乐</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/苹果/">#苹果</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/apple/">#apple</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/博客/">#博客</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/wordpress/">#wordpress</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/恶搞/">#恶搞</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/艺术/">#艺术</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/qq/">#qq</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/谷歌/">#谷歌</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/web/">#web</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/工具/">#工具</a></button></div></div></div><div id="my_footer"><div class=""><a href="/tags/">tags</a> <a href="/users/">users</a></div>&copy;2012-2021 diglog.com </div></div></body></html>