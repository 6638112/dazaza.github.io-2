<!doctype html><html lang="zh-hans"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Smoothstep积分 Smoothstep Integral</title><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"><link rel="stylesheet" href="/img/css.css?random="><link data-rh="true" rel="icon" href="/img/favicon.ico"/><script data-ad-client="ca-pub-6067137220025946" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script type="text/javascript" src="https://platform-api.sharethis.com/js/sharethis.js#property=5effb96910009800120b8d4d&product=inline-share-buttons" async="async"></script>
<script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?03c1a0f31299b4a2fbb83c34d6beaac9";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script></head><body><div id="my_header"><div class="container"><nav class="navbar navbar-expand-lg"><a class="navbar-brand" href="/"><img alt="diglog" src="/img/logo.v1.gif" class="rounded-sm"></a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarNavAltMarkup"><div class="navbar-nav"></div></div></nav></div></div><div class="container"><div id="my_content"><h1 class="page_narrow">Smoothstep Integral<br/>Smoothstep积分 </h1><div class="row"><div class="col-lg-12 col-12"><div class="my_story_list_item shadow p-3 mb-5 bg-white rounded"><div class="story_page_pub_time page_narrow">2021-06-25 08:18:04</div><div class="story_img_container"><a href="http://img2.diglog.com/img/2021/6/cab8b40b3c66f3cd2cdfb9915864dfcb.jpg"><img src="http://img2.diglog.com/img/2021/6/cab8b40b3c66f3cd2cdfb9915864dfcb.jpg" class="img-fluid my_story_img" onerror="this.style.display='none'"></a></div><div class="page_narrow text-break page_content"><p>When doing stateless animations we somehow have to describe the final position and orientation of objects in a scene as a function of time, rather than as the result of a simulation process. That means that the concepts of velocity and acceleration are not given explicitly for a position to be computed, but they are rather implicit and a consequence of the position function that we design. And so, sometimes it can get a bit difficult to design a position function that produces a velocity that we desire.    Left, incorrect animation. Right, correct animation. One such case is that of generating a smooth transition between a stationary situation to a motion of constant velocity. We do know that a  smoothstep() function, also known sometimes as EaseInOut(), is a convenient way to smoothly interpolate values or transition between states. So it is natural to imagine that a smoothstep() might need to be involved in the design of such animation. However one has to be careful and smoothstep the right quantity, which can be not obvious to some people. So, let&#39;s have a look:     One approach to the design of our animation function is to notice that what we want is to smoothly interpolate between two velocities - from a speed of zero at the beginning of our animation to a constant velocity. Without loss of generality, let&#39;s assume we want to speed to a speed of 1 unit per second, and that we want this transition between stationary and constant velocity states to last T seconds. Basically    And this is great so far actually. The problem is how to produce a position for our object based on this velocity. One might naively try multiplying velocity by time in order to get position, like this:    This however, does not work - when used in our scene, the object we are wanting to put in motion seems to speed up quickly and then very abruptly and unnaturally decelerate before settling in at constant speed. In the video at the top of the article, on the left side, you can see how the wings of the butterfly, which we are trying to get into motion, seem to slow down before starting to flap in a regular fashion. Certainly, it feels nothing like a smoothstep, and clearly our intuition has failed us here. Plotting the actual position() function over time actually reveals indeed that something went really wrong, and that indeed the slope of our position curve got temporarily stepper than 45 degrees, or 1, which was our target velocity:         So, what was the mistake, why didn&#39;t we get a smooth animation. Well, the problem is that we assumed that position is velocity multiplied by time, and that only works for constant velocities. In general, position is the integral of velocity. So in order to get our position function we need to integrate the smoothstep. Thankfully, since smoothstep is a simple cubic function, integrating it is very easy:     This is just one division (if T is not known in advance) and a few multiplications and additions, and translates to code directly as   float position( float t, in float T ){ if( t&gt;=T ) return t - 0.5*T; float f = t/T; return f*f*f*(T-t*0.5);}</p><p>在执行无状态动画时，我们必须以某种方式描述作为时间的函数的场景中对象的最终位置和方向，而不是模拟过程的结果。这意味着速度和加速度的概念不是明确给出要计算的位置的，但它们是相当隐含的，并且我们设计的位置函数的结果。所以，有时它可以难以设计一种产生我们所希望的速度的位置函数。左，动画不正确。对，正确的动画。一种这样的情况是在恒定速度的运动之间产生平稳过渡。我们确实知道SmoothStep（）函数，也知道有时作为Easeinout（），是平滑地插入状态的方便方式。因此，自然地想象SmoothStep（）可能需要参与这种动画的设计。然而，人们必须要小心和顺利进行正确的数量，这对某些人来说是不明显的。所以，让＆＃39; s看起来一看：我们动画函数的设计的一种方法是注意到我们想要的是在两个速度之间平稳地插值 - 从我们动画开始到恒定速度的速度。不损失一般性，假设我们希望速度为每秒1个单位的速度，并且我们希望在静止和恒定速度状态之间的过渡到持续的T秒。基本上，这实际上很棒。问题是如何基于此速度为我们的对象产生一个位置。一个人可能会天真地尝试乘以速度，以便获得位置，如下所示：这不起作用 - 当在我们的场景中使用时，我们想要放入运动的对象似乎快速加速，然后非常突然地迅速且非常突然突然加快在以恒定速度沉降之前减速。在文章顶部的视频中，在左侧，您可以看到蝴蝶的翅膀是如何进行运动的，似乎在开始以常规时尚的翻盖之前减慢。当然，它感觉不像是Smoothstep，显然我们的直觉在这里失败了。绘制实际位置（）函数随着时间的推移实际上揭示了一些事情真的错了，实际上，我们的位置曲线的斜率比45度，或1，这是我们的目标速度：所以错误，为什么我们得到一个平滑的动画。嗯，问题是我们认为位置是速度乘以时间，并且仅适用于恒定速度。通常，位置是速度的积分。因此，为了获得我们的位置函数，我们需要整合SmoothStep。值得庆幸的是，由于SpandleStep是一个简单的立方体功能，集成了它非常简单：这只是一个划分（如果T未提前知道）和几个乘法和添加，并直接转换为浮动位置（浮动T，IN float t）{if（t＆gt; = t）返回t  -  0.5 * t; float f = t / t;返回f * f * f *（t-t * 0.5）;}</p><p> The graph for this function, now in blue in the picture below, shows indeed a beautiful transition where the slope smoothly goes from zero to one without ever overshooting:     And indeed, when we use it for animation of the wings of the butterfly, shows in the right half of the video at the top of the article, the animation is smooth and just perfect.  You have a running example of the butterfly with the wrong and with the correct position function in Shadertoy:  https://www.shadertoy.com/view/sdBSWc. Also, I use this function often enough that I have added it to my collection of  Useful Little Functions. And lastly, I createad a  1 minute video summary of this article.</p><p> 这个函数的图表现在在下面的图片中，表明了一个美丽的过渡，斜率平滑地从零到一个没有过冲：确实，当我们使用它来动画蝴蝶的翅膀动画时显示在文章顶部的视频的右半部分，动画是平滑的，只是完美。您有一个蝴蝶的拼写示例，错误且在shadeertoy中正确的位置函数：https://www.shadertoy.com/view/sdbswc。此外，我经常使用此功能，以至于我已将其添加到我收集有用的小功能。最后，我创造了这篇文章的1分钟视频摘要。 </p></div><div id="story_share_this"><div class="sharethis-inline-share-buttons"></div></div><div class="text-break sotry_link page_narrow"><a target="_blank" href="https://iquilezles.org/www/articles/smoothstepintegral/smoothstepintegral.htm">https://iquilezles.org/www/articles/smoothstepintegral/smoothstepintegral.htm</a></div><div class="story_tags page_narrow"><button type="button" class="btn btn-light my_tag"><a href="/tag/速度/">#速度</a></button></div></div><div class="my_movie_list_item shadow p-3 mb-5 bg-white rounded"><button type="button" class="btn btn-link my_tag"><a href="/tag/web2.0/">#web2.0</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/google/">#google</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/设计/">#设计</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/创意/">#创意</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/摄影/">#摄影</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/图片/">#图片</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/游戏/">#游戏</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/软件/">#软件</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/手机/">#手机</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/视频/">#视频</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/广告/">#广告</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/windows/">#windows</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/iphone/">#iphone</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/免费/">#免费</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/网站/">#网站</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/下载/">#下载</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/微软/">#微软</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/blog/">#blog</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/firefox/">#firefox</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/音乐/">#音乐</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/苹果/">#苹果</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/apple/">#apple</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/博客/">#博客</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/wordpress/">#wordpress</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/恶搞/">#恶搞</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/艺术/">#艺术</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/qq/">#qq</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/web/">#web</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/谷歌/">#谷歌</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/工具/">#工具</a></button></div></div></div><div id="my_footer"><div class=""><a href="/tags/">tags</a> <a href="/users/">users</a></div>&copy;2012-2021 diglog.com </div></div></body></html>