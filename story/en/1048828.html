<!doctype html><html lang="zh-hans"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>使用Raspberry Pi Zero W和Waveshare SIM7000E Hat构建SMS转发器 Build an SMS Forwarder with Raspberry Pi Zero W and Waveshare SIM7000E Hat</title><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"><link rel="stylesheet" href="/img/css.css?random="><link data-rh="true" rel="icon" href="/img/favicon.ico"/><script data-ad-client="ca-pub-6067137220025946" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script type="text/javascript" src="https://platform-api.sharethis.com/js/sharethis.js#property=5effb96910009800120b8d4d&product=inline-share-buttons" async="async"></script>
<script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?03c1a0f31299b4a2fbb83c34d6beaac9";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script></head><body><div id="my_header"><div class="container"><nav class="navbar navbar-expand-lg"><a class="navbar-brand" href="/"><img alt="diglog" src="/img/logo.v1.gif" class="rounded-sm"></a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarNavAltMarkup"><div class="navbar-nav"></div></div></nav></div></div><div class="container"><div id="my_content"><h1 class="page_narrow">Build an SMS Forwarder with Raspberry Pi Zero W and Waveshare SIM7000E Hat<br/>使用Raspberry Pi Zero W和Waveshare SIM7000E Hat构建SMS转发器 </h1><div class="row"><div class="col-lg-12 col-12"><div class="my_story_list_item shadow p-3 mb-5 bg-white rounded"><div class="story_page_pub_time page_narrow">2021-02-22 01:00:49</div><div class="page_narrow text-break page_content"><p>In this guide, I will explain how to receive SMS messages and forward them to your Telegram account using Raspberry PI Zero W and  Wireshare GSM hat.</p><p>在本指南中，我将说明如何使用Raspberry PI Zero W和Wireshare GSM hat接收SMS消息并将其转发到您的Telegram帐户。</p><p>  Python will be used to read SMS messages and forward them to  Telegram Bot API. Messages will be listened to by  Gammu SMS service and it will trigger the Python script when an SMS message received.</p><p>  Python将用于读取SMS消息并将其转发到Telegram Bot API。 Gammu SMS服务将监听消息，并在收到SMS消息时触发Python脚本。</p><p>   First of all, we have to enable communication between GSM hat and Raspberry PI Zero, run Raspberry Pi Software Configuration Tool (raspi-config);</p><p>   首先，我们必须启用GSM hat和Raspberry PI Zero之间的通信，运行Raspberry Pi软件配置工具（raspi-config）；</p><p>       Exit configuration tool. Now we need to enable UART on raspberry pi. Shutdown and eject SD card to open in another computer. Open /boot/config.txt file, find the below statement and uncomment it to enable the UART. You can directly append it at the end of the file as well.</p><p>       退出配置工具。现在我们需要在树莓派上启用UART。关闭并弹出SD卡以在另一台计算机上打开。打开/boot/config.txt文件，找到以下语句并取消注释以启用UART。您也可以直接将其附加在文件末尾。</p><p>  Now, reboot raspberry pi device and open the console to install Gammu SMS Deamon and Python PiP package installer.</p><p>  现在，重新启动树莓派设备并打开控制台以安装Gammu SMS Deamon和Python PiP软件包安装程序。</p><p>    Note: Version 12.3.0 is the latest version that is compatible with Python 2.7, if you want to use it with Python 3+ version, you can install the latest available version.</p><p>    注意：版本12.3.0是与Python 2.7兼容的最新版本，如果要与Python 3+版本一起使用，则可以安装最新的可用版本。</p><p> Now you need to create a bot in Telegram and obtain a token. Afterwards, start a chat with that bot in your Telegram account and send a test message to your bot. This will help us to identify your chat ID.</p><p> 现在，您需要在Telegram中创建一个机器人并获取令牌。然后，在您的Telegram帐户中与该机器人开始聊天，并向您的机器人发送测试消息。这将帮助我们识别您的聊天ID。 </p><p> Open following URL with you Telegram Bot token and copy the chat ID in the response;</p><p>使用Telegram Bot令牌打开以下URL，并在响应中复制聊天ID；</p><p>    #!/usr/bin/env pythonfrom __future__ import print_functionimport osimport sysimport telegramnumparts = int(os.environ[&#39;DECODED_PARTS&#39;])text = &#39;&#39;# Are there any decoded parts?if numparts == 0: text = os.environ[&#39;SMS_1_TEXT&#39;]# Get all text partselse: for i in range(1, numparts + 1): varname = &#39;DECODED_%d_TEXT&#39; % i if varname in os.environ: text = text + os.environ[varname]# Logprint(&#39;Number %s have sent text: %s&#39; % (os.environ[&#39;SMS_1_NUMBER&#39;], text))#Send by Telegrambot = telegram.Bot(token=&#39;[YOUR-BOT-TOKEN]&#39;)bot.send_message(chat_id=[YOUR CHAT ID], text=os.environ[&#39;SMS_1_NUMBER&#39;].strip() + &#34; | &#34;+ text)</p><p>    ＃！/ usr / bin / env pythonfrom __future__ import print_functionimport osimport sysimport telegramnumparts = int（os.environ [＆＃39; DECODED_PARTS＆＃39;]）text =＆＃39;＆＃39;＃是否有任何解码部分？ numparts == 0：text = os.environ [＆SMS_1_TEXT＆＃39;]＃获取所有文本partelse：对于范围（1，numparts + 1）中的i：varname =＆＃39; DECODED_％d_TEXT＆＃39; ％i，如果os.environ中的varname：text = text + os.environ [varname]＃Logprint（＆＃39; Number％s已发送文本：％s＆＃39;％（os.environ [＆＃39; SMS_1_NUMBER＆＃ 39;]，text））Telegrambot = telegram.Bot（token =＆＃39; [YOUR-BOT-TOKEN]＆＃39;）bot.send_message（chat_id = [YOUR CHAT ID]，text = os。 environ [＆＃39; SMS_1_NUMBER＆＃39;]。strip（）+＆＃34; |＆＃34; +文本）</p><p>   Update Gammu SMS Deamon’s configuration to use GSM hat. Waveshare uses /dev/ttyS0 for communication.</p><p>   更新Gammu SMS Deamon的配置以使用GSM hat。 Waveshare使用/ dev / ttyS0进行通信。</p><p>  Find following lines in the configuration file and update with correct values, for me these values are following;</p><p>  在配置文件中找到以下几行，并使用正确的值进行更新，对我而言，这些值如下：</p><p>  Also, we need to specify the script path to be ran by Gammu so add following line below [smsd] section;</p><p>  另外，我们需要指定Gammu运行的脚本路径，因此在[smsd]部分下面添加以下行；</p><p>     That’s all! You should now able to get your SMS messages to your Telegram account.</p><p>     就这样！现在，您应该可以将SMS消息发送到您的Telegram帐户。 </p></div><div id="story_share_this"><div class="sharethis-inline-share-buttons"></div></div><div class="text-break sotry_link page_narrow"><a target="_blank" href="https://mete.dev/2021/02/21/build-an-sms-forwarder-with-raspberry-pi-zero-w-and-waveshare-sim7000e-hat/">https://mete.dev/2021/02/21/build-an-sms-forwarder-with-raspberry-pi-zero-w-and-waveshare-sim7000e-hat/</a></div><div class="story_tags page_narrow"><button type="button" class="btn btn-light my_tag"><a href="/tag/raspberry/">#raspberry</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/sms/">#sms</a></button></div></div><div class="my_movie_list_item shadow p-3 mb-5 bg-white rounded"><button type="button" class="btn btn-link my_tag"><a href="/tag/web2.0/">#web2.0</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/google/">#google</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/设计/">#设计</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/创意/">#创意</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/摄影/">#摄影</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/图片/">#图片</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/游戏/">#游戏</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/软件/">#软件</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/视频/">#视频</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/手机/">#手机</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/广告/">#广告</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/iphone/">#iphone</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/网站/">#网站</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/免费/">#免费</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/下载/">#下载</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/windows/">#windows</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/微软/">#微软</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/firefox/">#firefox</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/blog/">#blog</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/苹果/">#苹果</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/音乐/">#音乐</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/apple/">#apple</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/博客/">#博客</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/wordpress/">#wordpress</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/恶搞/">#恶搞</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/qq/">#qq</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/艺术/">#艺术</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/web/">#web</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/工具/">#工具</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/分享/">#分享</a></button></div></div></div><div id="my_footer"><div class=""><a href="/tags/">tags</a> <a href="/users/">users</a></div>&copy; 2020 diglog.com </div></div></body></html>