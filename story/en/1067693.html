<!doctype html><html lang="zh-hans"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>茶A.K.A. Tealemetry建设遥测（2018） Building telemetry for tea a.k.a. Tealemetry (2018)</title><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"><link rel="stylesheet" href="/img/css.css?random="><link data-rh="true" rel="icon" href="/img/favicon.ico"/><script data-ad-client="ca-pub-6067137220025946" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script type="text/javascript" src="https://platform-api.sharethis.com/js/sharethis.js#property=5effb96910009800120b8d4d&product=inline-share-buttons" async="async"></script>
<script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?03c1a0f31299b4a2fbb83c34d6beaac9";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script></head><body><div id="my_header"><div class="container"><nav class="navbar navbar-expand-lg"><a class="navbar-brand" href="/"><img alt="diglog" src="/img/logo.v1.gif" class="rounded-sm"></a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarNavAltMarkup"><div class="navbar-nav"></div></div></nav></div></div><div class="container"><div id="my_content"><h1 class="page_narrow">Building telemetry for tea a.k.a. Tealemetry (2018)<br/>茶A.K.A. Tealemetry建设遥测（2018） </h1><div class="row"><div class="col-lg-12 col-12"><div class="my_story_list_item shadow p-3 mb-5 bg-white rounded"><div class="story_page_pub_time page_narrow">2021-06-23 21:15:31</div><div class="page_narrow text-break page_content"><p>As a British person, I admittedly conform to the stereotype of tea consumption, and giving I’ve been consuming tea for most of my life I have gained opinions on all kinds of tea based variables. The biggest one being the acceptable tea drinking temperature.</p><p>作为一名英国人，我允许符合茶食消费的刻板印象，并为我的大部分生命提供茶，我已经获得了各种基于茶的变量的观点。最大的是可接受的茶水饮用温度。</p><p> So the thing is. Black tea (the best tea) needs to be brewed with near boiling water to taste the best. But at the same time this is incompatible with me being able to drink it right away. On top of that because you have to wait for the tea to cool down, it’s easy to forget about it, and then it’s too late:</p><p> 所以事情是。红茶（最好的茶）需要擦拭靠近沸水来味道最好。但与此同时，这与我能够立即喝它的不兼容。最重要的是因为你必须等待茶冷却，很容易忘记它，然后为时已晚：</p><p>  Some people think that drinking tea at 30c or room temperature is acceptable, I think  those people are incorrect. However after missing the acceptable temperature window too many times I decided I need a way to be alerted when the tea is drinkable. I got out my  FLIR camera and confirmed that the heat spread over a freshly brewed cup of tea is even at the bottom of the mug.</p><p>  有些人认为30℃或室温饮用茶是可以接受的，我认为那些人不正确。然而，在缺少可接受的温度窗口后，我决定在茶水饮用时需要一种方式来提醒。我拿出了我的Flir相机，并证实了甚至在杯子底部的新鲜酿造的一杯茶上的热量。</p><p>  This started me thinking. You could design a tea coaster that can read the temperature of the mug sitting on it. So I set out to make a coaster with a slot for a temperature sensor, and under it, space for a ESP8266 as the microcontroller.</p><p>  这开始了我思考。您可以设计茶杯子，可以阅读杯子的温度坐在上面。因此，我旨在制作一个带槽的过山车，用于温度传感器，在它下面，空间为ESP8266作为微控制器。</p><p>    Assembled together it looks like this (minus the ESP8266 being outside of the slot for debugging), the  MLX90616 sensor peeking out from the bottom of the coaster.</p><p>    组装在一起看起来像这样（减去esp8266在调试中的插槽之外），MLX90616传感器从过山车的底部窥视。</p><p>   After that, the ESP8266 setups up a web server that exports metrics about the coaster temperatures in  prometheus format, with exceptional accuracy of 0.02c:</p><p>   之后，ESP8266设置了一个Web服务器，将关于普通格式的过山车温度导出指标，具有出色的精度为0.02c：</p><p> [ben@aura ~]$ curl xxx:9000/metrics# HELP tea_mug_temp The point temp on the coaster.# TYPE tea_mug_temp gaugetea_mug_temp 24.689997# HELP tea_ambient_temp the temp of the sensor.# TYPE tea_ambient_temp gaugetea_ambient_temp 27.490015</p><p> [Ben @ aura〜] $ curl xxx：9000 / metrics＃帮助tea_mug_temp在过山车上的点temp。＃类型tea_mug_temp gaugetea_mug_temp 24.689997＃help tea_ampient_temp传感器的温度。＃类型tee_ambient_temp gaugetea_ambient_temp 27.490015 </p><p> This means I can graph my coaster in grafana and watch the mug get colder over time:</p><p>这意味着我可以在Grafana绘制我的过山车，看着杯子随着时间的推移而变得更冷：</p><p>  I can also then write a alert for when the cup of tea is considered drinkable,   max_over_time is used to ensure that the alert for drinkability is not dismissed by me picking up the mug to drink from it.</p><p>  然后我也可以写一个警报，因为当杯茶被认为是饮酒时，Max_over_time用于确保饮用性的警报并没有被我捡起杯子从中喝酒。</p><p> ALERT teaDrinkable IF (max_over_time(tea_mug_temp[60s]) &gt; 36) and (max_over_time(tea_mug_temp[60s]) &lt; 56) FOR 1s ANNOTATIONS { summary = &#34;The mug on the coaster is now drinkable&#34;, description = &#34;drink it. or not. I&#39;m an alert, not a cop&#34;, }</p><p> 警报TeadRinkable if（max_over_time（tea_mug_temp [60s]）＆gt; 36）和（max_over_time（tea_mug_time（tea_mug_temp [60s]）＆lt; 56）对于1s注释{summary =＆＃34;山雀上的杯子现在饮用＆＃34;，描述=＆＃34;喝它。或不。 i＆＃39; m一个警报，不是cop＆＃34;，}</p><p> For me, my alerts are delivered to a  discord chat room via a alertmanager webhook translator I wrote for alertmanager called  alertmanager-discord</p><p> 对我来说，我的警报通过AlertManager Webhook翻译，我写信给Discord聊天室，我为AlertManager写道，称为AlertManager-Discord</p><p>    Now, arguably you could include a LED to also signal when it’s drinkable so that it’s not dependent on the internet for notifications, but where would be the fun in that? Long live the  internet of shit.</p><p>    现在，可以说明您可以将LED还包含在它饮用时发出信号，以便它不依赖于互联网进行通知，但在那里的乐趣会在哪里？长时间过狗互联网。</p><p> If you want to build your own Tealemetry device, you can find all of the ESP8266 source code and 3D printing models on my github here:  https://github.com/benjojo/Tealemetry</p><p> 如果要构建自己的TealeMetry设备，您可以在此处找到所有esp8266源代码和3D打印模型在这里：https://github.com/benjojo/tealemetry</p><p> If you generally enjoyed this, you may enjoy what is else on the blog! If you want to stay up to date with what I am doing you can either use my blogs  RSS, or follow me on  Twitter</p><p> 如果您普遍享受此，您可以享受博客上的其他内容！如果您想及时了解我正在做的事情，您可以使用我的博客RSS，或者在Twitter上关注我 </p></div><div id="story_share_this"><div class="sharethis-inline-share-buttons"></div></div><div class="text-break sotry_link page_narrow"><a target="_blank" href="https://blog.benjojo.co.uk/post/tealemetry-IOT-tea-coaster">https://blog.benjojo.co.uk/post/tealemetry-IOT-tea-coaster</a></div><div class="story_tags page_narrow"><button type="button" class="btn btn-light my_tag"><a href="/tag/建设/">#建设</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/telemetry/">#telemetry</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/esp8266/">#esp8266</a></button></div></div><div class="my_movie_list_item shadow p-3 mb-5 bg-white rounded"><button type="button" class="btn btn-link my_tag"><a href="/tag/web2.0/">#web2.0</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/google/">#google</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/设计/">#设计</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/创意/">#创意</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/摄影/">#摄影</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/图片/">#图片</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/游戏/">#游戏</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/软件/">#软件</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/手机/">#手机</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/视频/">#视频</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/windows/">#windows</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/广告/">#广告</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/iphone/">#iphone</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/免费/">#免费</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/网站/">#网站</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/下载/">#下载</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/微软/">#微软</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/blog/">#blog</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/firefox/">#firefox</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/音乐/">#音乐</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/苹果/">#苹果</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/博客/">#博客</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/wordpress/">#wordpress</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/apple/">#apple</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/恶搞/">#恶搞</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/qq/">#qq</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/艺术/">#艺术</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/web/">#web</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/谷歌/">#谷歌</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/分享/">#分享</a></button></div></div></div><div id="my_footer"><div class=""><a href="/tags/">tags</a> <a href="/users/">users</a></div>&copy;2012-2021 diglog.com </div></div></body></html>