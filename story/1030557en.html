<!doctype html><html lang="zh-hans"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>在x86裸机上运行的GO单核</title><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"><link rel="stylesheet" href="/img/css.css?random="><link data-rh="true" rel="icon" href="/img/favicon.ico"/><script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?03c1a0f31299b4a2fbb83c34d6beaac9";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script><script data-ad-client="ca-pub-6067137220025946" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script type="text/javascript" src="https://platform-api.sharethis.com/js/sharethis.js#property=5effb96910009800120b8d4d&product=inline-share-buttons" async="async"></script></head><body><div id="my_header"><div class="container"><nav class="navbar navbar-expand-lg"><a class="navbar-brand" href="/"><img alt="diglog" src="/img/logo.v1.gif" class="rounded-sm"></a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarNavAltMarkup"><div class="navbar-nav"></div></div></nav></div></div><div class="container"><div id="my_content"><h1 class="page_narrow">在x86裸机上运行的GO单核</h1><div class="row"><div class="col-lg-12 col-12"><div class="my_story_list_item shadow p-3 mb-5 bg-white rounded"><div class="story_page_pub_time page_narrow">2020-10-22 22:34:39</div><div class="story_img_container"><a href="http://img2.diglog.com/img/2020/10/22639abd7aecff3d0d1b8987017e21a9.png"><img src="http://img2.diglog.com/img/2020/10/22639abd7aecff3d0d1b8987017e21a9.png" class="img-fluid my_story_img" onerror="this.style.display='none'"></a></div><div class="page_narrow text-break page_content"><p>Run a single Go applications on x86 bare metal, written entirely in Go (only a small amount of C and some assembly), support most features of Go (like GC, goroutine) and standard libraries, also come with a network stack that can run most  net based libraries.</p><p>在x86裸机上运行单个围棋应用程序，完全用Go编写(只有少量的C和一些汇编语言)，支持围棋的大多数功能(如GC、Goroutine)和标准库，还附带一个可以运行大多数基于Net的库的网络堆栈。</p><p>  Go&#39;s runtime provides some basic operating system abstractions. Goroutine corresponds to processes and channel corresponds to inter-process communication. In addition, go has its own virtual memory management, so the idea of running Go programs on bare metal was born.</p><p>Go的运行时提供了一些基本的操作系统抽象。Goroutine对应于进程，通道对应于进程间通信。此外，围棋有自己的虚拟内存管理，因此在裸机上运行围棋程序的想法就诞生了。</p><p> It turns out that Go has the ability to manipulate hardware resources, thanks to Go&#39;s controllable memory layout, the ability to directly translate hardware instructions without a virtual machine, and C-like syntax. These all make it possible for Go to write programs that run on bare metal.However, there are also some challenges. Go piling in many instructions to perform coroutine scheduling and memory GC, which brings some troubles in some places that cannot be reentrant, such as interrupt handling and system calls.</p><p>事实证明，得益于Go可控的内存布局、无需虚拟机直接翻译硬件指令的能力以及类似C的语法，Go具有操纵硬件资源的能力。这些都使围棋有可能编写在裸露金属上运行的程序，但也存在一些挑战。GO堆积了许多指令来执行协同程序调度和内存GC，这在某些地方带来了一些无法重入的麻烦，比如中断处理和系统调用。</p><p> In general, using Go to operate hardware is a pleasure. On the one hand, it gave me a deep understanding of Go&#39;s runtime. On the other hand, it also provided an attempt to write the operating system kernel on bare metal in addition to the C language.</p><p>一般来说，使用围棋操作硬件是一种乐趣。一方面，它让我对围棋的运行时间有了深刻的了解。另一方面，除了C语言之外，它还提供了在裸机上编写操作系统内核的尝试。</p><p>               First you need to install gdb, if you are under macos, execute the following command</p><p>首先您需要安装gdb，如果您使用的是MacOS，请执行以下命令。</p><p>   First execute the  make qemu-debug command to let qemu start the gdb server, and then use the debug function of vscode to start a debug session. The debug configuration file of vscode is built into the project.</p><p>首先执行make qemu-debug命令让QEMU启动gdb服务器，然后使用vscode的debug功能启动调试会话。Vscode的调试配置文件内置于项目中。</p><p>    If you want eggos to run on bare metal, it is recommended to use grub as the bootloader.</p><p>如果您希望eggos在裸机上运行，建议使用GRUB作为引导加载程序。</p><p> The multiboot.elf generated after executing the make command is a kernel image conforming to the multiboot specification, which can be directly recognized by grub and booted on a bare metal. The sample configuration file refer to  boot/grub.cfg</p><p>执行make命令后生成的multiboot.elf是符合multiboot规范的内核映像，可以被GRUB直接识别并在裸机上引导。示例配置文件引用boot/grub.cfg。</p><p>      The program still has a lot of bugs, and often loses response or panic. If you are willing to contribute, please submit a PR, thank you!</p><p>该程序仍然有很多错误，并且经常失去响应或恐慌。如果您愿意投稿，请提交公关，谢谢！</p><p>  The birth of my little daughter brought a lot of joy to the family. This project was named after her name  xiao dan dan. My wife and mother also gave me a lot of support and let me update this project in my spare time.  ❤️  ❤️  ❤️</p><p>我小女儿的出生给这个家庭带来了很多欢乐。这个项目是以她的名字小丹丹命名的。我的妻子和母亲也给了我很大的支持，让我在业余时间更新这个项目。❤️</p></div><div id="story_share_this"><div class="sharethis-inline-share-buttons"></div></div><div class="text-break sotry_link page_narrow"><a target="_blank" href="https://github.com/icexin/eggos">https://github.com/icexin/eggos</a></div><div class="story_tags page_narrow"><button type="button" class="btn btn-light my_tag"><a href="/tag/运行/">#运行</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/running/">#running</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/围棋/">#围棋</a></button></div></div><div class="shadow p-3 mb-5 bg-white rounded clearfix"><div class="container"><div class="row"><div class="col-sm"><div><a target="_blank" href="/story/1028795.html"><img src="http://img2.diglog.com/img/2020/10/thumb_3f8b764dbb0d98caf6e52f769d91c3f3.jpg" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1028795.html">
Databricks在第三季度突破了3.5亿美元的运行率，高于一年前的2亿美元</a></div><span class="my_story_list_date">2020-10-14 23:32</span></div><div class="col-sm"><div><a target="_blank" href="/story/1028449.html"><img src="http://img2.diglog.com/img/2020/10/thumb_acdb1ff34e03b248c192db3158ba7f22.jpeg" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1028449.html">无服务器革命已经停滞不前</a></div><span class="my_story_list_date">2020-10-13 20:20</span></div><div class="col-sm"><div><a target="_blank" href="/story/1028272.html"><img src="http://img2.diglog.com/img/2020/10/thumb_73e3d7b13aa0ca1cc14433a7264af5a0.jpeg" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1028272.html">日冕质量异常-在进程中注入位翻转</a></div><span class="my_story_list_date">2020-10-12 21:40</span></div><div class="col-sm"><div><a target="_blank" href="/story/1028111.html"><img src="http://img2.diglog.com/img/2020/10/thumb_c7ecf50ad0d30ec8c055ff8acd80ca55.jpg" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1028111.html">苹果向运行公司网络的白帽黑客支付28.8万美元</a></div><span class="my_story_list_date">2020-10-11 17:10</span></div></div></div></div><div class="my_movie_list_item shadow p-3 mb-5 bg-white rounded"><button type="button" class="btn btn-link my_tag"><a href="/tag/web2.0/">#web2.0</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/google/">#google</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/设计/">#设计</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/游戏/">#游戏</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/创意/">#创意</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/apple/">#apple</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/苹果/">#苹果</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/摄影/">#摄影</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/软件/">#软件</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/美国/">#美国</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/iphone/">#iphone</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/图片/">#图片</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/手机/">#手机</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/视频/">#视频</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/广告/">#广告</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/免费/">#免费</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/谷歌/">#谷歌</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/网站/">#网站</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/windows/">#windows</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/微软/">#微软</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/下载/">#下载</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/firefox/">#firefox</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/音乐/">#音乐</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/linux/">#linux</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/blog/">#blog</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/博客/">#博客</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/程序/">#程序</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/艺术/">#艺术</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/web/">#web</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/wordpress/">#wordpress</a></button></div></div></div><div id="my_footer"><div class=""><a href="/tags/">tags</a> <a href="/users/">users</a></div>&copy; 2020 diglog.com </div></div></body></html>