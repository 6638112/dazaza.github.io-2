<!doctype html><html lang="zh-hans"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>我的新iPhone运行Z3的速度比我的(相当贵的)英特尔台式机快</title><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"><link rel="stylesheet" href="/img/css.css?random="><link data-rh="true" rel="icon" href="/img/favicon.ico"/><script data-ad-client="ca-pub-6067137220025946" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script type="text/javascript" src="https://platform-api.sharethis.com/js/sharethis.js#property=5effb96910009800120b8d4d&product=inline-share-buttons" async="async"></script>
<script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?03c1a0f31299b4a2fbb83c34d6beaac9";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script></head><body><div id="my_header"><div class="container"><nav class="navbar navbar-expand-lg"><a class="navbar-brand" href="/"><img alt="diglog" src="/img/logo.v1.gif" class="rounded-sm"></a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarNavAltMarkup"><div class="navbar-nav"></div></div></nav></div></div><div class="container"><div id="my_content"><h1 class="page_narrow">我的新iPhone运行Z3的速度比我的(相当贵的)英特尔台式机快</h1><div class="row"><div class="col-lg-12 col-12"><div class="my_story_list_item shadow p-3 mb-5 bg-white rounded"><div class="story_page_pub_time page_narrow">2020-08-09 23:02:32</div><div class="page_narrow text-break page_content"><p>有趣的实验：我的新iPhone运行Z3的速度比我的(相当昂贵的)英特尔台式机还快！是时候开始在我的手机pic.twitter.com/9Faz9qNvAI上做我所有的正式方法研究了。</p><p>-James Bornholt(@sidereated)2018年10月31日。</p><p>关于苹果处理器设计团队取得的令人难以置信的进步，以及Mac电脑很快就会使用苹果自己的ARM处理器，我已经看到了一些讨论。这些报告通常会引用一些跨平台基准测试，比如Geekbench，以表明苹果的移动处理器至少和英特尔的笔记本电脑和台式机芯片一样快。但我一直对这些跨平台基准测试(就像其他测试一样)持怀疑态度--它们真的代表了我使用Mac电脑的那种工作负荷吗？</p><p>作为一名正式的方法研究人员，我经常运行的唯一真正的计算密集型工作是SMT解决方案，通常是Z3 SMT解决方案。在这一点上，我花了很多时间了解Z3的性能特征，而且它还有一些基准测试套件无法捕捉到的特性(Z3通常是单线程的)。我最近买了一台新的iPhone XS，配备了苹果最新的A12处理器。所以，在一段拖延的时间里，我决定将Z3交叉编译到iOS，看看是如何实现的。</p><p>交叉编译Z3被证明是非常简单的，只需要修改几行代码；我开源了代码，以便在您自己的iOS设备上运行Z3。为了进行基准测试，我从我最近关于分析符号求值的工作中引出了一些疑问，在每种情况下都提取了Rosette生成的SMT输出。</p><p>作为第一次测试，我将我的iPhone XS与我的一台台式机进行了比较，这台台式机使用的是英特尔酷睿i7-7700K，这是18个月前我们制造这台机器时英特尔卖得最好的消费类台式机芯片。我本以为英特尔芯片会在这里相当轻松地获胜，但事实并非如此：</p><p>在这个23秒的基准测试中，iPhone XS大约快了11%！这是我在推特上提到的结果，但Twitter没有留下太多细微差别，所以我在这里补充一些：</p><p>该基准测试位于SMT的QF_BV片段中，因此Z3使用位爆破和SAT求解来释放它。</p><p>如果基准测试循环运行10次，这个结果相当不错-iPhonecan可以维持这种性能，而且似乎不受热量限制。1也就是说，基准仍然相当短。</p><p>有几个人问我这是否归因于非决定论--也许是由于使用了随机数或其他原因，求解器在不同的平台上采用了不同的路径--但我使用Z3的冗长输出相当彻底地检查了一下，似乎不是这样的。</p><p>这两个系统都运行Z34.8.1，这是我使用Clang编译的，具有相同的优化设置。我也使用Z3的预构建二进制文件(使用GCC)在i7-7700K上进行了测试，但实际上速度较慢。</p><p>这怎么可能呢？i7-7700K是台式CPU；当运行单线程工作负载时，它的功耗约为45瓦，时钟频率为4.5 GHz。相比之下，iPhone没有拔出电源，很可能没有消耗10%的电量，并且运行在(我们认为)2 GHz范围内的某个地方。事实上，在基准测试之后，我查看了iPhone的电池使用报告，报告显示，尽管屏幕显示的时间更短，但Slake的能耗是Z3应用的4倍。</p><p>苹果没有公开足够的信息来了解Z3在iPhone上的表现，但幸运的是，英特尔为他们的台式机处理器提供了足够的信息。我花了一些时间使用VTune来查看在台式机上运行Z3时的瓶颈在哪里。正如Mate Soos观察到的那样，大部分SAT求解时间都花在传播上，这对缓存非常敏感。VTune对此表示同意，并表示Z3在迭代观看的文字时会花费大量时间等待内存。因此，这里性能的关键似乎是成为了。并且与7700K相比，在高速缓存未命中之后似乎具有更好的存储器等待时间。</p><p>为了测试这个诊断是否正确，我做了一个更广泛的实验，收集了我能拿到的所有苹果设备。我还选择了一个速度慢约10倍(即台式机上4分钟)的基准测试，以缓解人们对移动猝发性能的任何担忧。</p><p>以下是我收集的设备的结果，根据它们的发布日期绘制成图表，并相对于Apple A7，这是他们第一个64位定制CPU设计：</p><p>首先要注意的是，i7-7700K台式机处理器在这个不同的、更长的基准上击败了iPhone XS。但iPhone的竞争令人难以置信，介于7700K和它的前身i7-6700K之间，直到不到两年前，i7-6700K还是最快的消费类台式机处理器。</p><p>为了好玩，我还增加了英特尔酷睿M7-6Y75，这是我2016年MacBook的处理器。iPhone XS在运行Z3时比我的笔记本电脑快50%左右。</p><p>这里真正值得注意的是苹果的趋势：Z3基准测试与去年同期相比提高了30%。显然，我们不应该从这个愚蠢的基准测试中得出太多结论，但似乎只需要再重复一到两次这种趋势，苹果CPU就会对我的工作负载产生完全的意义。老实说，我没想到会这么近--现代智能手机架构太不可思议了！</p><p>感谢梅根·考恩(Meghan Cowan)、马克斯·威尔西(Max Willsey)和埃迪·严(Eddie Yan)帮助我追踪更多设备并进行实验。</p><p>麦克斯指出，苹果手机是防水的，所以我可以通过在冰浴中浸泡来检验这一理论，但我花了很多钱买了我的手机，他不会自愿把他的↩。</p><p>我打赌新的iPad Pro的A12X速度会更快，这要归功于平板电脑提供的更大的散热外壳。-↩</p></div><div id="story_share_this"><div class="sharethis-inline-share-buttons"></div></div><div class="text-break sotry_link page_narrow"><a target="_blank" href="https://www.cs.utexas.edu/~bornholt/post/z3-iphone.html">https://www.cs.utexas.edu/~bornholt/post/z3-iphone.html</a></div><div class="story_tags page_narrow"><button type="button" class="btn btn-light my_tag"><a href="/tag/英特尔/">#英特尔</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/iphone/">#iphone</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/runs/">#runs</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/z3/">#z3</a></button></div></div><div class="shadow p-3 mb-5 bg-white rounded clearfix"><div class="container"><div class="row"><div class="col-sm"><div><a target="_blank" href="/story/1016988.html"><img src="http://img.diglog.com/img/2020/8/thumb_e2482f7f4fb2d2b1bc14793c29c6ba31.png" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1016988.html">英特尔、ARM、IBM、AMD处理器易受新的侧通道攻击</a></div><span class="my_story_list_date">2020-8-8 15:34</span></div><div class="col-sm"><div><a target="_blank" href="/story/1016907.html"><img src="http://img.diglog.com/img/2020/8/thumb_3a9519a5338994031b8af9e02c6fa671.jpg" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1016907.html">
温德尔·布鲁克斯辞去英特尔资本总裁一职</a></div><span class="my_story_list_date">2020-8-8 0:39</span></div><div class="col-sm"><div><a target="_blank" href="/story/1016818.html"><img src="http://img.diglog.com/img/2020/8/thumb_74f8fc5e31d7f7c300a8543428d3d3a9.jpg" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1016818.html">英特尔正在调查其超过20 GB的源代码和私人数据泄露事件</a></div><span class="my_story_list_date">2020-8-7 8:8</span></div><div class="col-sm"><div><a target="_blank" href="/story/1016779.html"><img src="http://img.diglog.com/img/2020/8/thumb_beba1f9f4ddf0d6655c565c4da3689e3.png" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1016779.html">英特尔正在调查一起20 GB的文件泄露事件，其中一些是机密文件，可能来自访问其资源和设计中心的内部来源</a></div><span class="my_story_list_date">2020-8-7 6:9</span></div></div></div></div><div class="my_movie_list_item shadow p-3 mb-5 bg-white rounded"><button type="button" class="btn btn-link my_tag"><a href="/tag/web2.0/">#web2.0</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/google/">#google</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/设计/">#设计</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/创意/">#创意</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/摄影/">#摄影</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/游戏/">#游戏</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/图片/">#图片</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/软件/">#软件</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/视频/">#视频</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/手机/">#手机</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/广告/">#广告</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/apple/">#apple</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/iphone/">#iphone</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/网站/">#网站</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/免费/">#免费</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/下载/">#下载</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/windows/">#windows</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/微软/">#微软</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/firefox/">#firefox</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/苹果/">#苹果</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/blog/">#blog</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/音乐/">#音乐</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/博客/">#博客</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/wordpress/">#wordpress</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/恶搞/">#恶搞</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/艺术/">#艺术</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/qq/">#qq</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/web/">#web</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/谷歌/">#谷歌</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/工具/">#工具</a></button></div></div></div><div id="my_footer"><div class=""><a href="/tags/">tags</a> <a href="/users/">users</a></div>&copy;2012-2021 diglog.com </div></div></body></html>