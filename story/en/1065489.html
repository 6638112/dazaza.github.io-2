<!doctype html><html lang="zh-hans"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Rust 1.x似乎并不总是在实践中兼容 Rust 1.x seems to not always be backward compatible in practice</title><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"><link rel="stylesheet" href="/img/css.css?random="><link data-rh="true" rel="icon" href="/img/favicon.ico"/><script data-ad-client="ca-pub-6067137220025946" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script type="text/javascript" src="https://platform-api.sharethis.com/js/sharethis.js#property=5effb96910009800120b8d4d&product=inline-share-buttons" async="async"></script>
<script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?03c1a0f31299b4a2fbb83c34d6beaac9";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script></head><body><div id="my_header"><div class="container"><nav class="navbar navbar-expand-lg"><a class="navbar-brand" href="/"><img alt="diglog" src="/img/logo.v1.gif" class="rounded-sm"></a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarNavAltMarkup"><div class="navbar-nav"></div></div></nav></div></div><div class="container"><div id="my_content"><h1 class="page_narrow">Rust 1.x seems to not always be backward compatible in practice<br/>Rust 1.x似乎并不总是在实践中兼容 </h1><div class="row"><div class="col-lg-12 col-12"><div class="my_story_list_item shadow p-3 mb-5 bg-white rounded"><div class="story_page_pub_time page_narrow">2021-06-13 20:53:41</div><div class="page_narrow text-break page_content"><p>For a long time now, I&#39;ve needed (or at least wanted) to simultaneouslyput a stress load on a test  NFS fileserver and a stress CPU and memory load onanother machine. Back in the old days on Linux, I would have donethis by compiling the Linux kernel repeatedly, but in today&#39;s modernage the Linux kernel isn&#39;t big enough any more; it builds too fastand isn&#39;t big enough. I eventually settled on repeatedly buildingFirefox from source, partly because  it&#39;s something I&#39;m alreadyfamiliar with. Specifically, on one ofour Ubuntu 18.04 LTS machines I wound up building the then currentrelease version of Firefox with a then current Rust version installedinto a custom location with  Rustup. Everythingworked fine for a long time, and then one day I made the mistakeof absently deciding to run &#39; rustup upgrade&#39; on my custom Rustlocation. My Firefox builds immediately blew up with a series of Cargo errorsand then later Rust errors.</p><p>现在很长一段时间，I＆＃39; ve所需（或至少想要）同时在测试NFS文件手册和应力CPU和内存负载时同时进行应力负载。回到Linux上的过去的日子里，我将通过重复编译Linux内核，但在今天的现代化的Linux内核＆＃39; T大的情况下，我会有Donethis。它建立了太快，不够大。我最终从源头反复建立了丰富的福雷维福，部分是因为它＆＃39;我已经熟悉的东西。具体而言，在一个OURBULUTU 18.04 LTS机器上，我卷绕了使用当前RUST版本安装的Firefox的那个CurrentEase版本，其中包含Rustup的自定义位置。一直工作很好，很长一段时间，然后有一天我犯了错误地决定运行＆＃39; Rustup升级＆＃39;在我的自定义rustlocation。我的Firefox立即用一系列货币爆发，然后重新生锈错误。</p><p> I was unable to fix this and restore my Firefox build environmentto a working state. In particular, it appears that older versionsof Firefox (beyond some point I didn&#39;t try to determine precisely)can&#39;t be built with modern versions of Rust and Cargo (which istightly coupled to Rust). You can to some extent patch Cargo.tomlfiles so that Cargo will accept them, but the Rust errors werebeyond my ability to deal with.My eventual solution was to obtain the current Firefox release,the current Rust release, and run Firefox&#39;s own &#39;build a customvirtual environment with all of your build dependencies&#39; script.Someday this too will break, and in the mean time any performancemeasurements from before this transition aren&#39;t compatible withthose after it, since I&#39;m building different things with a differenttoolchain.</p><p> 我无法修复此功能并恢复我的Firefox构建环境以工作状态。特别是，Firefox的旧版本似乎（超出了我没有尝试确定的某个点）＆＃39; T由现代版本的铁锈和货物（这是又与生锈相结合）建造。你可以在某种程度上补丁货物。货物是这样的，所以货物将接受它们，但锈病是我处理的能力。最终解决方案是获取当前的Firefox发布，目前的生锈释放，并运行Firefox＆＃39; s拥有＆＃39;使用所有构建依赖项和＃39构建自定义环境; script.someday这也会破裂，并且在这个转变之前的任何表演的情况下都是在这个转变之前的任何绩效.T在它之后兼容，自从我和＃39; m建立不同的用途的不同东西。</p><p> All of this was very startling to me, especially the Rust compiletime errors. I&#39;m used to Go, where there is a strong commitment tokeeping old Go code building properly even as Go moves forward (butunfortunately less commitment to how the Go equivalent of Cargoworks). Rust is evidently moving more aggressively than that todevelop their language and are willing to invalidate older codeif they feel strongly enough about this. When I am in a bad mood,I feel that means that &#39;Rust 1.x&#39; is not really &#39;1.x&#39; as I wouldconsider it. Either Rust has not really reached 1.0 yet or therehave been a whole series of &#39;2.0&#39;, &#39;3.0&#39; and so on Rust releasesthat are not actually labeled as such.</p><p> 所有这些都对我来说非常令人震惊，特别是铁锈编译错误。我曾经去过，甚至在前进（幸福性地承诺如何对Cargoworks）的情况下，甚至才能正确承诺，甚至正当承诺正确承诺。 Rust显然会剧烈地移动，而不是开发他们的语言，并且愿意使他们对此感觉非常较大的旧的编码。当我心情不好时，我觉得这意味着它＆＃39;生锈1.x＆＃39;不是真的＆＃39; 1.x＆＃39;因为我应该知道它。无论是生锈还没有真正达到1.0然而尚未达到整体系列＆＃39; 2.0＆＃39 ;,＆＃39; 3.0＆＃39;因此，Rust ReleaeSthat实际上并没有如此标记。</p><p> I&#39;m sure that Rust people have a whole series of good explanationsfor why all of this was necessary and why it&#39;s a good thing that Ican no longer build older versions of Firefox (for instance, someof the Rust errors may be for things that were unsafe but notpreviously detected). All I can say is that as an outsider, theresulting experience is not a particularly good one.</p><p> 我肯定的是，铁锈人有一系列的好的解释，为什么所有这一切都是必要的，为什么它和＃39; ican不再建立旧版本的firefox（例如，生锈错误可能是对于不安全但不受欢迎的事情）。我只能说的是，作为一个局外人，Theresulting的经验不是一个特别好的。</p><p> (Rust is not the only language and build environment that cansuffer from this;  C compilers can give you issues if you tellthem to abort on warnings.)</p><p> （Rust不是唯一的语言和构建环境，可以从中获取; C编译器可以在警告中排名才能给您发出问题。） </p></div><div id="story_share_this"><div class="sharethis-inline-share-buttons"></div></div><div class="text-break sotry_link page_narrow"><a target="_blank" href="https://utcc.utoronto.ca/~cks/space/blog/programming/Rust1BackwardIncompatibility">https://utcc.utoronto.ca/~cks/space/blog/programming/Rust1BackwardIncompatibility</a></div><div class="story_tags page_narrow"><button type="button" class="btn btn-light my_tag"><a href="/tag/rust/">#rust</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/在实践中/">#在实践中</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/firefox/">#firefox</a></button></div></div><div class="my_movie_list_item shadow p-3 mb-5 bg-white rounded"><button type="button" class="btn btn-link my_tag"><a href="/tag/web2.0/">#web2.0</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/google/">#google</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/设计/">#设计</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/创意/">#创意</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/摄影/">#摄影</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/游戏/">#游戏</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/图片/">#图片</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/软件/">#软件</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/视频/">#视频</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/手机/">#手机</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/广告/">#广告</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/iphone/">#iphone</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/免费/">#免费</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/网站/">#网站</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/下载/">#下载</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/windows/">#windows</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/微软/">#微软</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/apple/">#apple</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/blog/">#blog</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/firefox/">#firefox</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/苹果/">#苹果</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/音乐/">#音乐</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/博客/">#博客</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/wordpress/">#wordpress</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/恶搞/">#恶搞</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/艺术/">#艺术</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/qq/">#qq</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/web/">#web</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/工具/">#工具</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/分享/">#分享</a></button></div></div></div><div id="my_footer"><div class=""><a href="/tags/">tags</a> <a href="/users/">users</a></div>&copy;2012-2021 diglog.com </div></div></body></html>