<!doctype html><html lang="zh-hans"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>PNG毛刺的艺术</title><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"><link rel="stylesheet" href="/img/css.css?random="><link data-rh="true" rel="icon" href="/img/favicon.ico"/><script data-ad-client="ca-pub-6067137220025946" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script type="text/javascript" src="https://platform-api.sharethis.com/js/sharethis.js#property=5effb96910009800120b8d4d&product=inline-share-buttons" async="async"></script>
<script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?03c1a0f31299b4a2fbb83c34d6beaac9";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script></head><body><div id="my_header"><div class="container"><nav class="navbar navbar-expand-lg"><a class="navbar-brand" href="/"><img alt="diglog" src="/img/logo.v1.gif" class="rounded-sm"></a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarNavAltMarkup"><div class="navbar-nav"></div></div></nav></div></div><div class="container"><div id="my_content"><h1 class="page_narrow">PNG毛刺的艺术</h1><div class="row"><div class="col-lg-12 col-12"><div class="my_story_list_item shadow p-3 mb-5 bg-white rounded"><div class="story_page_pub_time page_narrow">2020-09-19 03:13:34</div><div class="story_img_container"><a href="http://img2.diglog.com/img/2020/9/44fcbcd16015cc7e504e7500f00fbd73.jpg"><img src="http://img2.diglog.com/img/2020/9/44fcbcd16015cc7e504e7500f00fbd73.jpg" class="img-fluid my_story_img" onerror="this.style.display='none'"></a></div><div class="page_narrow text-break page_content"><p>PNG是一种图像格式，从1995年开始就有了发展的历史，至今仍是一种流行的、经久不衰的格式。通常，它以其诸如无损压缩和处理透明像素的能力而闻名。然而，我们不会从一般的角度来看待图像格式，而是考虑如何使其出现故障。当我们从毛刺的角度来看待巴新时，它有什么样的奇特之处呢？</p><p>我们应该首先研究一下CRC32算法的校验和系统。它用于确认损坏的图像，当它检测到图像文件中的损坏时，正常的查看器应用程序拒绝显示该图像文件。因此，不可能使用简单的方法(如使用文本编辑器或二进制编辑器重写部分二进制数据)生成毛刺(您将完全失败)。换句话说，PNG格式很难出错。我们需要根据PNG规范创建毛刺，以避免此故障。这意味着我们必须在解码CRC32之后重写数据，重新计算，并将其附加到编辑后的数据上。</p><p>接下来，我们想看看PNG的转码过程。下面显示的图表是PNG编码流程的简化说明。</p><p>上面显示的四个状态中的每一个都可能是毛刺目标。然而，第一个“原始数据”出现故障与BMP出现故障是一样的，因此从技术上讲，它不是PNG故障(最后，它与应用了“无”过滤器的PNG相同)。我将在下一节中解释这一点)。由于我上面提到的校验和系统，最后的“格式化PNG”故障将不起作用。这意味着当“过滤数据”或“压缩数据”被操纵时，可能会出现PNG故障。我将在下一小节中解释有关筛选器的内容。当“过滤数据”出现故障时，它会显示出独特的效果；看起来像花瓣的图案散布在图像周围。当“过滤的数据”出现毛刺时，过滤器之间的区别就变得清晰起来。另一方面，“压缩数据”毛刺是由它们自己的压缩算法(即Deflate压缩)来添加味道的。它显示出类似于雪噪波图像的效果。</p><p>除了代码转换过程之外，还有其他因素也会影响毛刺的外观，例如透明像素和交错。</p><p>最能表征毛刺外观的因素是被称为滤波器的过程。该滤波器使用一定的算法对每条扫描线的未压缩像素数据进行转换，以提高压缩效率。有五种类型的过滤器，包括称为Sub、Up、Average和Paeth的四种算法，也有None(即不应用过滤器)。PNG图像通常在对每条扫描线应用最合适的滤波器后进行压缩，因此在生成PNG图像时会合并所有五个滤波器。这五个滤波器通常只对压缩效率有贡献，因此无论应用哪个滤波器，输出结果总是相同的。但是，当过滤的数据损坏时，输出结果会出现明显的差异。当图像经过优化并将所有五个滤镜组合在一起时，很难识别滤镜的差异，但当对每条扫描线应用相同的单个滤镜时，当图像出现毛刺时，差异会变得明显。稍后我将展示每个滤镜的不同效果，但当我们仔细观察结果时，我们会了解哪个滤镜导致了PNG的哪一部分美丽的毛刺(是的，它们是美丽的)。</p><p>我在上面展示了两张PNG图像：一张是出现故障之前的图像，另一张是出现故障的图像。这是一个过滤后的数据故障，我在上一节中解释了这一点。原始PNG对应用于每条扫描线的滤镜进行了优化，并且所有五个滤镜都已合并。这一故障揭示了五个过滤器在组合时是如何平衡的。</p><p>上图应用了“无(无过滤器)”，这意味着这是一个原始数据故障。每个像素在此状态下都是独立的，并且与其他像素没有任何关系，因此单个重写字节不会有大范围的影响。</p><p>这是对每条扫描线应用了滤镜“Sub”的毛刺图像。应用Sub算法时，目标像素会通过引用其旁边的像素来重写自身。这就是故障模式向右侧雪崩的原因。</p><p>这是过滤器“向上”。此过滤器类似于Sub，但其参考方向为顶部和底部。</p><p>过滤器“Average”指的是对角线方向。它显示了一条流星般的尾巴，从受损的像素开始。柔和的渐变效果也是该滤波器的特点之一。当应用平均过滤器时，PNG毛刺的结果是缺少毛刺的毛刺，也是PNG毛刺中最微妙的部分。</p><p>与其他滤波器相比，“Paeth”滤波器具有最复杂的算法。它还具有最复杂的毛刺效应。即使是最小的字节重写，该故障也会影响范围很广的区域。PNG毛刺的基调效果就是由这个滤镜造成的；原图中显示的身影保持不变，但同时又被强烈破坏。</p><p>这是我在上一节中称为压缩数据的状态的故障。出现暴风雪效果，很难辨认出图像中的原始身影。很少需要显示滤镜的效果。图像通常会被完全毁掉。</p><p>透明度是一种效果。尤其是滤镜的“平均值”似乎逐渐混合了透明像素。100%的透明像素聚集的处理方式与纯色部分相同。您可以看出滤镜“向上”通常应用于纯色部分。(较新的通用图像格式可能会根据图像是纯色部分还是复杂图像(如照片)来切换其每个部分的压缩方案。使用包含纯色部分的图像来测试毛刺是一种有效的方法。WebP就是一个例子。)。</p><p>使用基于8x8像素的Adam7算法将PNG隔行扫描划分为七个过程。当隔行扫描的PNG出现毛刺时，我们能够直观地观察到该算法。我们还可以确认缝合效果，并且其角度已变得接近平均滤镜(见附录B)。</p><p>与JPEG或其他新的图像格式相比，PNG是一种非常简单的格式。过滤算法就像玩具一样，它的压缩方式和老式的Zip压缩一样。然而，这种简单的图像格式显示的毛刺变化范围之广令人惊讶。我们可能只需要一个例子来解释JPEG故障，但是我们需要许多不同类型的样本来解释什么是PNG故障。PNG是作为GIF的另一种格式开发的。然而，当谈到故障时，GIF是一种太差的格式，无法与PNG相提并论。巴新准备了令人惊讶的丰富结果，这些结果长期以来一直被校验和障碍所掩盖。</p><p>作者在2010年发布了PNG Gitch的一个小脚本。当时，它只是在内部数据出现故障后移除CRC32并将其重新添加回来。从那以后，作者继续重写剧本，并制作改进版本，目的是在自己的作品中使用它，但他决定在2014年制作一个采用他的诀窍的库。结果就是Ruby库PNGlitch问世了。本文中出现的每个毛刺图像都是使用该库制作的。</p><p>附录A说明如何使用PNGlitch库。(用户必须具备一定程度的Ruby语言知识才能理解代码片段示例。)。</p><p>上面的代码也可以用不同的方式编写，如下图所示。</p><p>GLitch方法将压缩和解压缩的数据作为单个字符串实例进行处理。它很方便，但另一方面，内存使用量可能会变得非常大。当内存使用有问题时，用户可以编写使用IO而不是字符串的代码，如下所示。</p><p>PNGlitch.open(&#39；/path/to/your/image.png&#39；)do|png|buf=2**18 png.glitch_as_io do|io|直到io.eof？Do d=io.read(Buf)io.pos-=d.size io.print(d.gsub(/\d/，&#39；x&#39；))end end png.save&#39；/path/to/rupted/image.png&#39；end。</p><p>第一个使用Gitch方法的示例有时会破坏表示筛选器类型的字节，因此它可能会输出某些查看器应用程序无法打开的文件。Each_Scanline方法要安全得多，并且内存使用率也很低。这是一种彻底的方法，但它比毛刺方法需要更多的时间。</p><p>用户可以通过运行下面的命令来确认PNG文件的过滤器类型。在内部，过滤器类型None、Sub、Up、Average和Paeth都由0到4之间的数值表示。</p><p>上面的示例已将每个筛选器类型更改为3(平均值)。CHANGE_FILTER正确应用新的筛选器类型。此处理不会导致出现毛刺，因为过滤器已重新计算，并且PNG将被正确格式化。这也意味着产生的图像在我们的眼睛看来是一样的。</p><p>PNGlitch.open(Infile)do|png|png.each_Scanline DO|Scanline|scanline.change_filter 3 end png.glitch do|data|data.gsub/\d/，&#39；x&#39；x&#39；end png.save outfile1endPNGlitch.open(Infile)do|png|png.each_Scanline do|scanline|scanline.change_filter 4 end png.glitch do|data|data.gsub/\d/，&#39；x&#39；end png.save outfile2end。</p><p>上述两个样本的输出结果完全不同。不同之处在于过滤器。</p><p>我解释的代码示例都是对“筛选数据”状态进行的操作。当用户想要破坏PNGlitch中的“压缩数据”时，他们必须使用GLITCH_AFTER_COMPRESS方法。</p><p>附录B包括正文中未涉及的故障变体列表。这个目录将揭示PNG故障表达式的种类有多广。我将定义3个简单的方法来销毁数据。</p><p>提出了五种类型的滤波器，即：SUB滤波器、UP滤波器、Average滤波器、Paeth滤波器和优化组合滤波器。它还显示了是否存在Alpha、是否隔行扫描以及哪种状态出现故障的120种组合模式。生成脚本显示在末尾。</p><p>需要&#39；pnglitch&#39；count=0infiles=%w(lena.png Lena-alpha.png)infiles。每个都执行|file|alpha=/alpha/=~file[false，true]。每个执行|compress|[false，true]。每个执行|interlace|infile=file if interlace system(&#34；Convert-interlace plan%s tmp.png&#34；%infile)infile=&#39；tmp.png&#39；End[：Optimized，：Sub，：Up，：Average，：Paeth].Each Do|Filter|[：Replace，：Transpose，：Defect].Each Do|Method|Count+=1 PNG=PNGlitch.open infile png.change_all_filter除非filter=：优化选项=[filter.to_s]选项&lt；&lt；&#39；alpha&#39；if alpha选项&lt；&lt；&#39；隔行扫描&#39；if交错选项&lt；&lt；&#39；压缩&#39；如果压缩选项&lt；&lt；method.to_s outfile=&#34；lena-%03d-%s.png&#34；%[count，options.join(&#39；-&#39；)]process=lambda do|data，range|case method When：Replace range do data[rand(data.size)]=&#39；x&#39；结束数据当：转置x=data.size/4 data[0，x]+data[x*2，x]+data[x*1，x]+data[x*3..-1]当：缺陷(范围/5).time do data[rand(data.size)]=&#39；&#39；end data end end除非压缩png.glitch do|data|process.call data，50 end png.glitch_After_compress do|data|process.call data，10 end png.save outfile png.close end endFile.unlink&#39；Tmp.png&#39；</p><p>PNG扫描线由过滤器类型字节和已过滤像素数据的组合组成。故意进行不正确的组合是PNG故障的另一种技术。</p><p>上面的图像是由下面的代码生成的。在PNGlitch中，准备了嫁接方法，以便用户可以将错误的过滤器类型附加到扫描线。</p><p>该技术非常方便，即使对于检查每个滤波器的毛刺效果有多不同也是如此。接下来的五个图像是在不修改扫描线数据的情况下对每条扫描线应用一个特定过滤器类型字节的结果。</p><p>需要&#39；pnglitch&#39；(0..4)。每个DO|Filter|PNGlitch.open(&#39；png.png&#39；)Do|png|png。每个_Scanline DO|line|line。嫁接筛选器结束png.save&#34；png-glitch-grag-#{filter}.png&#34；endend。</p><p>如果实施了不正确的过滤器，会发生什么情况？PNGlitch旨在允许用户自由更改过滤方法，因此用户可以测试在该状态下发生的情况。使用标准过滤方法的普通查看器应用程序正在解码由独特过滤方法编码的PNG图像。这可能会产生算法故障(我不会争论我们是否应该称之为故障)。下面的图像是此类生成的图像的一部分。</p><p>需要&#39；pnglitch&#39；PNGlitch.open(&#39；png.png&#39；)Do|p|p.each_Scanline do|l|l.register_filter_encoder do|data，prev|data.size.times.verse_each do|i|x=data.getbyte(I)v=prev？Prev.getbyte(i-1)：0 data.setbyte(i，(x-v)&amp；0xff)结束数据end p.output&#39；png-不正确-filter01.png&#39；end。</p><p>需要&#39；pnglitch&#39；PNGlitch.open(&#39；png.png&#39；)Do|p|p.Change_All_Filters 4 p.Each_Scanline Do|l|l.register_filter_encoder Do|data，prev|data.size.times.verse_each Do|i|x=data.getbyte(I)v=prev？Prev.getbyte(i-6)：0 data.setbyte(i，(x-v)&amp；0xff)结束数据end p.output&#39；png-不正确-filter02.png&#39；end。</p><p>需要&#39；pnglitch&#39；PNGlitch.open(&#39；png.png&#39；)do|png|png.change_all_filter 4 SAMPLE_SIZE=pNG.SAMPLE_SIZE pNG。Each_Scanline do|l|l.register_filter_encoder do|data，prev|data.size.times.verse_each do|i|x=data.getbyte I is_a_eXist=i&gt；=Sample_Size is_b_eXist=！prep.nil？A=存在吗？Data.getbyte(i-sample_size)：0b=IS_b_EXIST？Prev.getbyte(I)：0c=is_a_eXist&amp；&amp；is_b_eXist？Prev.getbyte(i-sample_size)：0 p=a+b-c pa=(p-a).abs pb=(p-b).abs pc=(p-c).abs pr=pa&lt；=pb&amp；&amp；pa&lt；=pc？A：PB&lt；=PC？B：C数据。setbyte I，(x-pr)&amp；0xfe结束数据结束png.output&#39；png-不正确-filter03.png&#39；end。</p><p>需要&#39；pnglitch&#39；PNGlitch.open(&#39；png.png&#39；)Do|p|p.Change_All_Filters 2 p.Each_Scanline Do|l|l.register_filter_encoder Do|data，prev|data.size.times.verse_each Do|i|x=data.getbyte(I)v=prev？Prev.getbyte(I)：0 data.setbyte(i，(x-v)&amp；0xfe)end data end p.output&#39；png-inright-filter04.png&#39；end。</p><p>后藤武弘的原创摄影、目录上的Lena支持大江真人的日英翻译</p><p>编辑：在本文发表后，我们有机会讨论如何使用Lena图像进行技术演示。这张照片有一段奇怪的历史，让人产生了争议。我们希望读者了解人民的反应和这篇文章的立场为莉娜。Https://github.com/ucnv/pnglitch/pull/2。</p><p>编辑2：本文件被选为第19届日本媒体艺术节艺术部评审团。</p></div><div id="story_share_this"><div class="sharethis-inline-share-buttons"></div></div><div class="text-break sotry_link page_narrow"><a target="_blank" href="https://ucnv.github.io/pnglitch/">https://ucnv.github.io/pnglitch/</a></div><div class="story_tags page_narrow"><button type="button" class="btn btn-light my_tag"><a href="/tag/艺术/">#艺术</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/毛刺/">#毛刺</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/png/">#png</a></button></div></div><div class="shadow p-3 mb-5 bg-white rounded clearfix"><div class="container"><div class="row"><div class="col-sm"><div><a target="_blank" href="/story/1024782.html"><img src="http://img2.diglog.com/img/2020/9/thumb_45e345c28556fec320a8d49b8c0b7d18.png" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1024782.html">视觉艺术家Noelia Towers谈被迫创作</a></div><span class="my_story_list_date">2020-9-18 13:42</span></div><div class="col-sm"><div><a target="_blank" href="/story/1024651.html"><img src="http://img2.diglog.com/img/2020/9/thumb_801f0ca21b3eeb3f85311cbe660fe492.jpg" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1024651.html">令人叹为观止的新艺术家拍卖价</a></div><span class="my_story_list_date">2020-9-18 3:6</span></div><div class="col-sm"><div><a target="_blank" href="/story/1024577.html"><img src="http://img2.diglog.com/img/2020/9/thumb_cf116e749d0a145472e031eb8a6234e1.jpg" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1024577.html">成为超级赢家-斯科特·H·杨(Scott H.Young)谈数据科学播客的艺术家</a></div><span class="my_story_list_date">2020-9-17 22:28</span></div><div class="col-sm"><div><a target="_blank" href="/story/1024481.html"><img src="http://img2.diglog.com/img/2020/9/thumb_a0ebc3cac0977023dda695b00ef36da8.jpg" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1024481.html">
与Phaedra Ellis-Lamkins和Jessica Matthews一起旋转的艺术</a></div><span class="my_story_list_date">2020-9-17 8:37</span></div></div></div></div><div class="my_movie_list_item shadow p-3 mb-5 bg-white rounded"><button type="button" class="btn btn-link my_tag"><a href="/tag/web2.0/">#web2.0</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/google/">#google</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/设计/">#设计</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/创意/">#创意</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/摄影/">#摄影</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/游戏/">#游戏</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/图片/">#图片</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/软件/">#软件</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/视频/">#视频</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/手机/">#手机</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/广告/">#广告</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/apple/">#apple</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/iphone/">#iphone</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/网站/">#网站</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/免费/">#免费</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/下载/">#下载</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/windows/">#windows</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/微软/">#微软</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/firefox/">#firefox</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/苹果/">#苹果</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/blog/">#blog</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/音乐/">#音乐</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/博客/">#博客</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/wordpress/">#wordpress</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/恶搞/">#恶搞</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/艺术/">#艺术</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/qq/">#qq</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/web/">#web</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/谷歌/">#谷歌</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/工具/">#工具</a></button></div></div></div><div id="my_footer"><div class=""><a href="/tags/">tags</a> <a href="/users/">users</a></div>&copy;2012-2021 diglog.com </div></div></body></html>