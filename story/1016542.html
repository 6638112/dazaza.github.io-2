<!doctype html><html lang="zh-hans"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>用WSL和Ubuntu在Windows中构建跨平台的电子应用</title><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"><link rel="stylesheet" href="/img/css.css?random="><link data-rh="true" rel="icon" href="/img/favicon.ico"/><script data-ad-client="ca-pub-6067137220025946" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script type="text/javascript" src="https://platform-api.sharethis.com/js/sharethis.js#property=5effb96910009800120b8d4d&product=inline-share-buttons" async="async"></script>
<script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?03c1a0f31299b4a2fbb83c34d6beaac9";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script></head><body><div id="my_header"><div class="container"><nav class="navbar navbar-expand-lg"><a class="navbar-brand" href="/"><img alt="diglog" src="/img/logo.v1.gif" class="rounded-sm"></a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarNavAltMarkup"><div class="navbar-nav"></div></div></nav></div></div><div class="container"><div id="my_content"><h1 class="page_narrow">用WSL和Ubuntu在Windows中构建跨平台的电子应用</h1><div class="row"><div class="col-lg-12 col-12"><div class="my_story_list_item shadow p-3 mb-5 bg-white rounded"><div class="story_page_pub_time page_narrow">2020-08-06 07:14:50</div><div class="story_img_container"><a href="http://img.diglog.com/img/2020/8/bed37ca51eb41322881badf47b6085e1.jpg"><img src="http://img.diglog.com/img/2020/8/bed37ca51eb41322881badf47b6085e1.jpg" class="img-fluid my_story_img" onerror="this.style.display='none'"></a></div><div class="page_narrow text-break page_content"><p>今年，我们发布了第一个版本的BeeKeeper Studio，这是一个跨平台的SQL编辑器和数据库管理器。它类似于VSCode，但用于SQL。</p><p>BeeKeeper Studio是用Electron构建的，这是一个建立在NodeJS和Chromium之上的跨平台桌面应用开发框架。</p><p>我的大部分BeeKeeper Studio开发工作都是在Ubuntu中完成的，在Windows中本地运行，使用Linux的Windows子系统。</p><p>WSL提供了一个非常棒的技术堆栈，因此在本文中，我将向您展示如何为跨平台开发设置您的WSL2环境。</p><p>WSL，或Windows Subsystem for Linux，是Windows10的官方组件，可以在Windows内部运行完整的Linux版本。</p><p>我一直在使用WSL2，它是今年早些时候在2004年Windows更新中正式发布的。虽然WSL1的文件系统很慢，而且存在一些软件包兼容性问题，但是WSL2是一个成熟的Ubuntu Linux安装，所以所有在Linux上运行的东西都可以在Windows上运行。</p><p>对于本指南，我假设您在WSL2上使用的是Ubuntu18.04或20.04。</p><p>一旦我们安装了WSL2，我们就可以启动它(我还安装了neofetch)。</p><p>再次检查您是否正在运行WSL2，方法是打开Powershell并键入wsl-l-v，如果没有，请使用wsl--set-version Ubuntu-20.04升级。</p><p>这很简单，我们在Ubuntu！让我们只安装一些我们知道我们会需要的东西。</p><p>Sudo apt update#第一次sudo apt安装NodeJS git npm#~200MB的软件包sudo npm install-g纱线#这需要一段时间#yarn要快得多。</p><p>那么让我们做一个快速的电子项目。我认为制作Electron应用程序最简单的方法是使用Vue.js、Vue CLI和Vue Cli Electron Builder插件。我们走吧。</p><p>#电子sudo apt安装libnss3-dev libgdk-picbuf2.0-dev libgtk-3-dev libxss-dev#install vue cli sudo yansglobal add@vue/cli#创建项目所需的系统库。#按照此处的说明创建--Default my_https://cli.vuejs.org/guide/creating-a-project.html#vue-createvue cd my_appvue add e-builder#INSTALL DIRENCES YAN INSTALL#就是这样！！我们有一个功能齐全的选举人应用程序。让我们跑吧：纱线跑电子：发球#什么都不会发生！？应用程序窗口在哪里？#Ubuntu或Windows没有办法显示它！</p><p>此时我们应该可以看到我们的应用程序窗口，但是我们看不到。有何不可？</p><p>开箱即用的WSL2没有用来显示Linux应用程序的窗口管理器，所以我们必须安装一个窗口管理器，并配置WSL2才能使用它。</p><p>希望在未来这将得到开箱即用的支持，在那之前，我们将不得不安装我们自己的。</p><p>我们需要的是X服务器。在线搜索“WSL X服务器”会给出一系列相互矛盾的建议。只需跳过所有这些，安装VcsXsrv即可。是的，我知道这是一个SourceForge链接，帮你自己一个忙，用巧克力安装它。</p><p>还有关于运行整个Linux桌面环境的指南。运行一个完整的桌面环境完全是矫枉过正，完全不符合我们的目的。</p><p>打开VcsXsrv，它将引导您通过三个配置屏幕。下面是对每一个人的选择：</p><p>将您的配置保存在您的主目录中，以便轻松启动，然后启动服务器。您将在系统托盘中看到小X徽标。我们准备好出发了。</p><p>#将以下行添加到~/.bashrc文件：export display=$(cat/etc/Resolution v.conf|grep namerver|awk&#39；{print$2}&#39；)：0 export LIBGL_ALWAYS_INDIRECT=TRUE。</p><p>要测试您是否一切正常，您可以尝试启动一个应用程序。让我们尝试一下基本的x11应用程序，以确保一切正常。</p><p>哦，等等，你们有Hi-DPI屏幕，所有东西看起来都很模糊吗？好的，你应该按照这篇Stackoverflow帖子来停止模糊，或者使用X410来代替vcsXsrv，它支持开箱即用的HiDPI屏幕(但这是一个付费的应用程序)。我只是禁用了vcsXsrv窗口的所有dpi缩放，因为我只有1080个屏幕。</p><p>您将看到一堆构建消息，如果您幸运的话，现在应该可以看到您的Electron应用程序光彩夺目</p><p>你可能会想(和我一样)，你可以只使用你的普通Windows应用程序来与你的新电子代码交互。嗯，你可以，差不多，但是性能很糟糕，就像你在网络驱动器上编辑代码一样(你确实是)。</p><p>最好将您的WSL环境视为一个完全独立的地方，它只是与Windows共存。他们就像两辆并排在高速公路上的汽车。</p><p>使用任何你想要的应用程序的唯一方法是在Linux上运行它。</p><p>就我个人而言，我通常使用Sublime Text和IntelliJ Idea进行代码编辑。因此，我将它们安装到WSL环境中，例如，请参阅Sublime text的Linux说明。</p><p>一个限制是您必须使用终端启动编辑器，对于Sublime，这意味着您要执行subl命令。另一个限制是WSL2目前不支持Snap包，所以请确保您使用Deb或AppImage版本的任何您需要的应用程序。</p><p>这是一张有趣的Windows Sublime屏幕截图，紧挨着Linux Sublime。它们在形状和功能上基本上是一样的，你很难分辨出它们的不同之处。</p><p>不要担心这些应用程序的性能，IntelliJ是一个重量级IDE，它在这种设置下工作得很好。</p><p>VSCode提供了一些独特的东西。你可以为Windows-VSCode安装一个叫做‘Remote-WSL’的扩展。这允许您只使用常规的Windows VSCode。安装后，您可以使用代码在Linux终端中打开一个目录，它将在Windows VSCode中神奇地打开。</p><p>它工作得很好，是一个很棒的展示，展示了未来如何在其他应用程序上实现更深层次的WSL2集成。</p><p>虽然WSL确实很棒，但它仍然是一项早期技术，并不是没有一些怪癖。以下是可能发生的一些情况，以及如何修复它们：</p><p>X Windows在挂起时关闭。是的，如果您挂起笔记本电脑，WSL中的GUI窗口将会消失。这太让人沮丧了。对于崇高文本，只需从终端使用subl重新启动它们。</p><p>HiDPI融合。如果你有一个高DPI的屏幕，你可能需要稍微调整一下，才能让Linux窗口看起来更好看。这是一次性的事情，但仍然需要注意。购买X410可以解决这个问题，微软计划在即将发布的版本中自己解决这个问题。</p><p>独立的防火墙。WSL在其自己的虚拟网络中运行。这意味着它不尊重您的Windows代理或防火墙配置。如果您位于公司防火墙之后，并且尝试apt安装，则会收到错误消息。除了手动确定特定组织的主要防火墙设置之外，这里没有很好的解决方法。</p><p>虚拟机内存增长。如果在WSL中运行一些占用大量内存的进程，Windows可能无法回收它们使用的内存。您应该会在系统监视器中看到vmmem的一个条目，它很少关闭(但确实会打开)。如果它变得太大，您必须重新启动计算机，或者至少重新启动WSL实例。在我写这篇文章的时候，我的内存是4 GB，尽管我已经一周没有重新启动了。您可以使用wsl--Terminate杀死正在运行的WSL进程，然后只需打开一个新的bash shell即可。</p><p>希望你能顺利地用WSL 2在Windows中构建电子应用程序。我发现在Windows下运行Ubuntu是一个梦想，并促使我十年来第一次回到Windows作为我的主要操作系统。</p><p>既然您已经走到了这一步，请查看BeeKeeper Studio，它是未来的开源SQL编辑器和数据库管理器。(希望如此！)</p></div><div id="story_share_this"><div class="sharethis-inline-share-buttons"></div></div><div class="text-break sotry_link page_narrow"><a target="_blank" href="https://www.beekeeperstudio.io/blog/building-electron-windows-ubuntu-wsl2">https://www.beekeeperstudio.io/blog/building-electron-windows-ubuntu-wsl2</a></div><div class="story_tags page_narrow"><button type="button" class="btn btn-light my_tag"><a href="/tag/ubuntu/">#ubuntu</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/windows/">#windows</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/cross/">#cross</a></button></div></div><div class="shadow p-3 mb-5 bg-white rounded clearfix"><div class="container"><div class="row"><div class="col-sm"><div><a target="_blank" href="/story/1015702.html"><img src="http://img.diglog.com/img/2020/8/thumb_2f52f25668fbcec6865d359145763158.jpg" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1015702.html">Mark Shuttleworth谈Ubuntu的受欢迎程度和规范盈利能力</a></div><span class="my_story_list_date">2020-8-2 9:11</span></div><div class="col-sm"><div><a target="_blank" href="/story/1014088.html"><img src="http://img.diglog.com/img/2020/7/thumb_a79be758fb51c90a32e073796f36871f.jpg" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1014088.html">支持Ubuntu Touch的PinePhone上的Wayland和LVGL</a></div><span class="my_story_list_date">2020-7-25 15:27</span></div><div class="col-sm"><div><a target="_blank" href="/story/1012043.html"><img src="http://img.diglog.com/img/2020/7/thumb_398b0d78a174c0c3d2b78b33fe7fcda0.jpg" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1012043.html">Ubuntu将不再跟踪用户安装了哪些软件包</a></div><span class="my_story_list_date">2020-7-15 23:14</span></div><div class="col-sm"><div><a target="_blank" href="/story/1010029.html"><img src="http://img.diglog.com/img/2020/7/thumb_abfaa5bde683d89f4e8c3e179b13ce65.jpeg" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1010029.html">带有基于Ubuntu的“Borealis”功能的Chromebook即将迎来STEAM</a></div><span class="my_story_list_date">2020-7-6 6:51</span></div></div></div></div><div class="my_movie_list_item shadow p-3 mb-5 bg-white rounded"><button type="button" class="btn btn-link my_tag"><a href="/tag/web2.0/">#web2.0</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/google/">#google</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/设计/">#设计</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/创意/">#创意</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/摄影/">#摄影</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/游戏/">#游戏</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/图片/">#图片</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/软件/">#软件</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/视频/">#视频</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/手机/">#手机</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/广告/">#广告</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/apple/">#apple</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/iphone/">#iphone</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/网站/">#网站</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/免费/">#免费</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/下载/">#下载</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/windows/">#windows</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/微软/">#微软</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/firefox/">#firefox</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/苹果/">#苹果</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/blog/">#blog</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/音乐/">#音乐</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/博客/">#博客</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/wordpress/">#wordpress</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/恶搞/">#恶搞</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/艺术/">#艺术</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/qq/">#qq</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/web/">#web</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/谷歌/">#谷歌</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/工具/">#工具</a></button></div></div></div><div id="my_footer"><div class=""><a href="/tags/">tags</a> <a href="/users/">users</a></div>&copy;2012-2021 diglog.com </div></div></body></html>