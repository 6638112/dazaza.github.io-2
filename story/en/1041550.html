<!doctype html><html lang="zh-hans"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>适用于CA的新的开源ACME代理/前端 EJBCA New open source ACME proxy/front end for CAs e.g. EJBCA</title><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"><link rel="stylesheet" href="/img/css.css?random="><link data-rh="true" rel="icon" href="/img/favicon.ico"/><script data-ad-client="ca-pub-6067137220025946" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script type="text/javascript" src="https://platform-api.sharethis.com/js/sharethis.js#property=5effb96910009800120b8d4d&product=inline-share-buttons" async="async"></script>
<script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?03c1a0f31299b4a2fbb83c34d6beaac9";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script></head><body><div id="my_header"><div class="container"><nav class="navbar navbar-expand-lg"><a class="navbar-brand" href="/"><img alt="diglog" src="/img/logo.v1.gif" class="rounded-sm"></a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarNavAltMarkup"><div class="navbar-nav"></div></div></nav></div></div><div class="container"><div id="my_content"><h1 class="page_narrow">New open source ACME proxy/front end for CAs e.g. EJBCA<br/>适用于CA的新的开源ACME代理/前端 EJBCA </h1><div class="row"><div class="col-lg-12 col-12"><div class="my_story_list_item shadow p-3 mb-5 bg-white rounded"><div class="story_page_pub_time page_narrow">2020-12-24 21:23:46</div><div class="story_img_container"><a href="http://img2.diglog.com/img/2020/12/1af736fb4e4974426173cf896edbfe59.png"><img src="http://img2.diglog.com/img/2020/12/1af736fb4e4974426173cf896edbfe59.png" class="img-fluid my_story_img" onerror="this.style.display='none'"></a></div><div class="page_narrow text-break page_content"><p>Serles is a tiny ACME-CA implementation to enhance your existing CertificateAuthority infrastructure. Initially developed to support ACME with the OpenSource version of PrimeKey&#39;s EJBCA&#39;s (ACME support is only available in theEnterprise version), the software is designed for easy adaptation to other PKIsoftware/CAs which provide an API to issue certificates.</p><p>Serles是一个很小的ACME-CA实施，用于增强您现有的CertificateAuthority基础结构。最初开发该软件是为了使用PrimeKey的EJBCA的开放源代码版本支持ACME（ACME支持仅在企业版本中可用），该软件旨在轻松适应其他PKI软件/ CA，后者提供了用于颁发证书的API 。</p><p> We sometimes call it a proxy, as it delegates certificate issuance to yourexisting PKI. From a user point of view serles-acme in combination with an EJBCAinstance can be compared to be something like your own private letsencrypt.</p><p> 我们有时称它为代理，因为它将证书颁发委托给您现有的PKI。从用户的角度来看，可以将serles-acme与EJBCAinstance结合使用，就像是您自己的私有letencrypt。</p><p> If you want to use another PKI project, feel free to implement your ownbackends. Contributions are heavily welcome.</p><p> 如果要使用另一个PKI项目，请随时实现自己的后端。非常欢迎捐款。</p><p>     Serles is intended to automate certificate issuance from your existing CA. Itwill verify the legitimacy of certificate requests, and (if they are), passthem on to a plugin/backend.</p><p>     Serles旨在自动从您现有的CA颁发证书。它将验证证书申请的合法性，并将证书申请（如果有）传递给插件/后端。</p><p> +--------+ +---------+ +---------+| | (1) ---{authentication}--&gt; | | | Backend || Web | (2) ---{order cert}------&gt; | Serles | | (e.g. || Server | &lt;-----{validation}-----(3) | ACME | | EJBCA) || | (4) ---{CSR}-------------&gt; | | (5) ---{CSR}---------&gt; | |+--------+ &lt;-----{certificate}--- (7) +---------+ &lt;--{certificate}-- (6) +---------+</p><p> + -------- + + --------- + + --------- + | | （1）--- {authentication}-＆gt; | | |后端||网页| （2）--- {order cert} ------＆gt; |塞勒斯| | （例如||服务器|＆lt; ----- {验证} -----（3）| ACME | | EJBCA）|| | （4）--- {CSR} -------------＆gt; | | （5）--- {CSR} ---------＆gt; | | + -------- +＆lt; ----- {证书} ---（7）+ --------- +＆lt;-{证书}-（6） + --------- +</p><p> The threat model is  execution inside a (trusted) enterprise network. Yet, carehas been taken when accepting any user data. While there is no userauthentication (i.e. anyone who can access Serles is allowed to ask forcertificates), one may specify to which IP subnets requested domains mustresolve to in order to be granted a certificate.</p><p> 威胁模型是在（受信任的）企业网络内部执行的。但是，在接受任何用户数据时要格外小心。虽然没有用户身份验证（即，任何可以访问Serles的用户都可以要求提供证书），但可以指定所请求域必须解析到哪个IP子网才能获得证书。</p><p>      The configuration file can be set using the  CONFIG environment variable. If itis absent, it is loaded from  /etc/serles.ini. An extensively commentedexample configuration file is included as  config.ini.example. You may copy(and rename) it to the beforementioned location. Serles is compatible with anyWSGI server; please consult your server&#39;s manual for its configuration.</p><p>      可以使用CONFIG环境变量来设置配置文件。如果不存在，则从/etc/serles.ini加载它。包含广泛注释的示例配置文件包含在config.ini.example中。您可以将其复制（并重命名）到上述位置。 Serles与任何WSGI服务器兼容；请查阅您的服务器手册进行配置。 </p><p>   The software ships with one predefined backend, but it is easy to write others.If you do, please send patches!</p><p>该软件附带一个预定义的后端，但是很容易编写其他后端。如果这样做，请发送补丁！</p><p>  subjectDN: The CSR&#39;s Distinguished Name as a string or, if absent, onecreated from the template string in the config file.</p><p>  subjectDN：CSR的专有名称，是字符串，如果不存在，则是从配置文件中的模板字符串创建的。</p><p> subjectAltNames: a list of domain names (as strings) that are to bewritten in the certificate&#39;s SAN extension attributes.</p><p> subjectAltNames：要在证书的SAN扩展属性中写入的域名（作为字符串）的列表。</p><p> email: the email stored in the requesting account (or None).Intended to be passed on to the backend for notification of the client.</p><p> 电子邮件：存储在请求帐户中的电子邮件（或无），旨在传递到后端以通知客户端。</p><p>  on error, the tuple  (None, error_msg), where  error_msg is a string(possibly forwarded from the backend) that describes why the CSR has beenrejected. This is forwarded to the client in a  badCSR problem document.</p><p>  如果出错，则为元组（无，error_msg），其中error_msg是一个字符串（可能从后端转发），该字符串描述了为什么拒绝了CSR。这将在badCSR问题文档中转发给客户端。</p><p> class  SomeBackend:  def  __init__( self,  config):  self. config  =  config  def  sign( self,  csr,  subjectDN,  subjectAltNames,  email):  return  None,  &#34;not implemented&#34;</p><p> class SomeBackend：def __init __（self，config）：self。 config = config def sign（self，csr，subjectDN，subjectAltNames，email）：返回None，＆＃34;未实现＆＃34;</p><p>     All you need is a user that has  permission to issue certificates. Set up aCertificate Authority (e.g. testca), an End Entity Profile (e.g. acmeendentity)and a Certificate Profile (e.g. acmeserverprofile). Set up and enroll a userwith a client certificate which will be used to talk to the API.</p><p>     您所需要的只是一个有权颁发证书的用户。设置证书颁发机构（例如testca），最终实体配置文件（例如acmeendentity）和证书配置文件（例如acmeserverprofile）。使用客户端证书设置和注册用户，该证书将用于与API进行对话。 </p><p> When issuing certificates, the Username and Enrollment Code will be generatedfrom a template. This template can be configured in the config; you can useparameters from the Distinguished Name (from CSR) by wrapping them in curlybrackets.</p><p>颁发证书时，将从模板生成用户名和注册码。可以在config中配置此模板。您可以通过将其包装在花括号中来使用“专有名称”（来自CSR）中的参数。</p><p> If the client sets a contact email, we will pass it on to EJBCA when forwardingthe CSR. EJBCA can then be configured to send notifications for theEndEntityProfile.</p><p> 如果客户设置了联系电子邮件，我们将在转发CSR时将其传递给EJBCA。然后可以将EJBCA配置为发送EndEntityProfile的通知。</p><p>   Dependencies are stated in  setup.py. If the available python-cryptographyversion is less than 3.1, the openssl command line utility (somewhere in $PATH) is required.</p><p>   依赖关系在setup.py中说明。如果可用的python-cryptographyversion小于3.1，则需要openssl命令行实用程序（在$ PATH中的某个位置）。</p><p>   The database is used to hold the state between requests, but once an order hasbeen fulfilled (or rejected), all data relating to it is no longer used (andactually deleted when the order expires, 7 days after its creation). It istherefore sufficient to store this database in-memory. However, this in-memorydatabase is not thread safe. Depending on your requirements, either set database in  config.ini to a on-disk DB, or (when using gunicorn) limitthe number of worker processes and threads to 1.</p><p>   该数据库用于保存两次请求之间的状态，但是一旦满足（或拒绝）了订单，就不再使用与该订单有关的所有数据（在订单到期后的7天之内，实际上将其删除）。因此，将该数据库存储在内存中就足够了。但是，此内存数据库不是线程安全的。根据您的要求，可以将config.ini中的数据库设置为磁盘上的数据库，或者（当使用gunicorn时）将辅助进程和线程的数量限制为1。</p><p> Note that certbot tries to re-use account IDs, so when using an in-memory DBpass  --pre-hook &#39;rm -rf /etc/letsencrypt/accounts&#39; to it, to avoid thisbehaviour.</p><p> 请注意，certbot会尝试重新使用帐户ID，因此，在使用内存DBpass时-钩前rm -rf / etc / letsencrypt / accounts＆＃39;避免这种行为。</p><p> Note that when using the EJBCA backend, you should only allow a singleconnection at a time (i.e. single-threading), since there are concurrencyproblems in the EJBCA software.</p><p> 请注意，在使用EJBCA后端时，由于EJBCA软件中存在并发问题，因此一次仅应允许一个连接（即单线程）。 </p></div><div id="story_share_this"><div class="sharethis-inline-share-buttons"></div></div><div class="text-break sotry_link page_narrow"><a target="_blank" href="https://github.com/dvtirol/serles-acme">https://github.com/dvtirol/serles-acme</a></div><div class="story_tags page_narrow"><button type="button" class="btn btn-light my_tag"><a href="/tag/开源/">#开源</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/acme/">#acme</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/source/">#source</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/证书/">#证书</a></button></div></div><div class="my_movie_list_item shadow p-3 mb-5 bg-white rounded"><button type="button" class="btn btn-link my_tag"><a href="/tag/web2.0/">#web2.0</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/google/">#google</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/设计/">#设计</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/创意/">#创意</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/摄影/">#摄影</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/游戏/">#游戏</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/图片/">#图片</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/软件/">#软件</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/视频/">#视频</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/广告/">#广告</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/手机/">#手机</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/iphone/">#iphone</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/网站/">#网站</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/免费/">#免费</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/下载/">#下载</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/windows/">#windows</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/苹果/">#苹果</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/微软/">#微软</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/apple/">#apple</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/firefox/">#firefox</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/blog/">#blog</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/音乐/">#音乐</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/博客/">#博客</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/wordpress/">#wordpress</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/恶搞/">#恶搞</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/qq/">#qq</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/艺术/">#艺术</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/web/">#web</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/工具/">#工具</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/分享/">#分享</a></button></div></div></div><div id="my_footer"><div class=""><a href="/tags/">tags</a> <a href="/users/">users</a></div>&copy; 2020 diglog.com </div></div></body></html>