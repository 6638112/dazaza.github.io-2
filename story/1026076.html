<!doctype html><html lang="zh-hans"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>关于应用程序签名的令人不安的问题</title><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"><link rel="stylesheet" href="/img/css.css?random="><link data-rh="true" rel="icon" href="/img/favicon.ico"/><script data-ad-client="ca-pub-6067137220025946" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script type="text/javascript" src="https://platform-api.sharethis.com/js/sharethis.js#property=5effb96910009800120b8d4d&product=inline-share-buttons" async="async"></script>
<script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?03c1a0f31299b4a2fbb83c34d6beaac9";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script></head><body><div id="my_header"><div class="container"><nav class="navbar navbar-expand-lg"><a class="navbar-brand" href="/"><img alt="diglog" src="/img/logo.v1.gif" class="rounded-sm"></a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarNavAltMarkup"><div class="navbar-nav"></div></div></nav></div></div><div class="container"><div id="my_content"><h1 class="page_narrow">关于应用程序签名的令人不安的问题</h1><div class="row"><div class="col-lg-12 col-12"><div class="my_story_list_item shadow p-3 mb-5 bg-white rounded"><div class="story_page_pub_time page_narrow">2020-09-24 12:16:03</div><div class="page_narrow text-break page_content"><p>我们打算在2021年下半年要求在Google Play上使用Android App Bundle发布新的应用程序和游戏。</p><p>需要使用Play App Sign才能在Google Play上使用App Bunles发布。</p><p>据我所知，这意味着你可以随心所欲地处理这些APK的内容，包括添加和替换应用程序开发人员提供的原始代码。更糟糕的是，这种对新应用程序的要求感觉就像是最终要求所有开发者选择加入应用程序签名的试运行。</p><p>有些人可能会担心你为了自己的利益而修改应用程序，比如降低与谷歌产品竞争的应用程序的性能，这并不会让我晚上睡不着觉。</p><p>一个由专制政权统治的国家正在压迫少数群体。该政权的领导人告诉谷歌：“为了在我们国家做生意，你需要同意将某些应用程序的修改版本分发给我们选择的人。我们将向您提供更改后的应用程序，并向您提供选择应接收这些更改后应用程序的人员的身份或标准。这一标准可能是有利的，也可能是广泛的，包括我们国家的所有人。“。然后，他们向谷歌提供少数群体领导人的身份，以及下一代端到端(E2E)加密消息应用的修改版本。这些修改后的应用程序通过直接抓取应用程序用户界面的数据并将其发送到受政权控制的服务器来捕获通信，从而绕过加密。谷歌在目标应用发布时向该政权提供了每个版本的目标应用，并以应用审查过程为幌子，推迟了这些版本在Play Store上的发布，这样政权就可以对这些应用进行更改。谷歌签署这些修改过的应用程序-与应用程序来自原始开发者的情况没有什么不同-并将这些修改后的应用程序分发给指定的受害者。</p><p>您可以为国家和少数群体提供您自己的价值观。有很多选择可供选择。</p><p>应用程序签名，以及你即将采取的强制新应用程序签名的举措，都会让你面临这种胁迫。现在，你有“似是而非的否认”--你可以声称某些应用程序根本没有选择加入应用程序签名。您的新要求取消了对您为该要求选择的日期之后的新应用程序的防御。如果你最终强迫所有开发者选择加入App签名，那么这种形式的强制似乎是不可避免的。</p><p>“蜻蜓计划”是一个令人沮丧的执行意图的展示。然而，贵公司内部似乎对“蜻蜓计划”有一些反感，至少在工程师中是这样。</p><p>我希望你们中那些被迫实施这项新政策的人有一个计划，如何阻止这种胁迫或以其他方式防止我的情况发生。如果我们知道那是什么计划就好了，因为这样我们就更容易帮助制定计划了。</p><p>现在，在公开场合，计划似乎是宣称这种情况不会发生。</p><p>未经您的知情和批准，我们不会修改和分发您的应用程序代码。</p><p>如前所述，Play不会在您不知情和未经您批准的情况下修改您的应用程序的功能。</p><p>值得注意的是，这个人用的是“不要”和“将不”…。而不是“不能”和“不能”。</p><p>但是，您会欣然承认您修改了我们提供给您的应用程序捆绑包。例如，同一媒体帖子包括：</p><p>对于作为应用程序包上传的应用程序，我们将通过引入所谓的源码戳来提高安全性。此源元数据通过bundletool插入到应用程序的清单中。</p><p>这种元数据的变化显然已经持续了几年。</p><p>此外，亚马逊在过去十年的大部分时间里一直在做这类事情：</p><p>Amazon使用代码包装您的应用程序，使该应用程序能够与Amazon Appstore客户端进行通信，以收集分析、评估和实施计划策略，并与您共享聚合信息。当您的应用程序开始[执行此操作]时，它将始终与Amazon Appstore客户端通信，Amazon将删除您的签名，并使用对您唯一、不会更改且对您帐户中的所有应用程序都相同的Amazon签名重新签署您的应用程序。</p><p>Google验证并从APK中剥离您的签名，然后使用应用程序签名密钥重新签署APK。</p><p>所以，“不做”而不是“不能”似乎是一种宽容的政策，你似乎有能力做得更多，但你现在却决定不做。</p><p>但是，策略可以在任何时间、任何原因、没有任何警告的情况下更改。或者，就像某个戴深色头盔的人曾经说过的那样：</p><p>因此，一个可能的计划是让您支持“在您不知情和未经批准的情况下不要修改和分发您的应用程序代码”的声明。</p><p>您声称修改代码是不可能的吗？这似乎是可能的，但也许我错过了什么。我希望看到一份技术说明，说明如何在签署APK之前无法更改字节码或资源内容。</p><p>你是否正在寻求立法禁止这种做法？也许你正在与主要国家的立法者合作，禁止这种行为，对参与其中的公司(及其高管)进行适当的惩罚。这可能不仅仅包括应用程序的修改-还可能禁止互联网服务提供商对传输中的网络内容进行的修改，例如不时出现的各种“超级cookie”式的改变。如果这是你的计划，如果有广泛的参与者，包括那些倡导公民自由的组织的参与者，那就太好了。</p><p>也许你的计划是，你真的不需要App Sign for App Bundle，毕竟，仅仅因为你的一名工作人员说App Bundle需要App Signing，并不意味着这一要求将无限期存在。也许在App Bundle命令生效之前，它会有所放松。或者，也许应用程序捆绑包授权本身可能会放松。</p><p>毕竟，应用程序捆绑包不是技术要求。我们分发APK已经十多年了，在那段时间里，死人没有复活，怪兽没有对大城市造成破坏，外星人也没有入侵。</p><p>此外，应用程序捆绑包似乎不是实现您的技术目标所必需的。你的目标是根据设备特性向设备提供正确的应用子集。要做到这一点，你需要从应用捆绑包中生成一个切片化的应用，然后交付几个APK，当这些APK组合在一起时，就可以在没有外来资源和东西的情况下实现应用。我们之所以知道这一点，是因为bundletool允许我们生成那些APK，我们甚至可以自己安装这些APK来演示它们的工作。Bundletool会用我们的签名密钥给他们签名。</p><p>这意味着我们不需要向您发送App Bundle，您就可以享受其中的好处。我们可以向您发送由bundletool创建的签名APK。例如，我们可以将它们压缩成“应用程序分类”，然后将其上传到开发人员控制台，而不是App Bundle。你似乎得到了实现你的技术目标所需的一切，只是没有签约的能力。取而代之的是，我们签署了APK，就像我们今天所做的那样，尽管可能是通过bundletool。</p><p>这并不是说你应该停止提供App Signature，只是说它应该是一个选择，就像你引入它以来一直以来的那样。</p><p>也许这就是你打算如何避免强迫--你可以宣称任何政权想要改变的应用程序仍然是由应用程序的开发者签署的，而不是你。所以：</p><p>您会扩展App Bunles以允许开发人员签名的工件，而不允许应用程序签名吗？考虑到bundletool的现有功能，这似乎是相当微不足道的。但是，如果有什么原因导致看似有效的bundletool输出实际上不起作用，那么…。当然，知道这一点会很好，而且要有足够的细节。</p><p>你会取消App Bundle的要求，无限期允许开发者签名的APK吗？毕竟，是你宣布需要App Bundle的，你可以改变主意。</p><p>也许您可以在签名之前修改应用程序，您需要签名权限的原因是因为您认为将来可能需要修改应用程序，即使您声称现在没有这样做。</p><p>如果是这样的话，我很想知道你们希望我们如何着手做这件事。</p><p>从技术上讲，即使是开发者签署的APK，政权黑客的情况也可能在今天发生。然而，在这种情况下，您不能对更改后的应用程序版本进行签名。因此，监控应用程序使用的签名键的开发人员将能够检测到您分发的是经过更改的应用程序这一事实。此外，风险仅限于新安装的应用程序-任何安装了开发者签名应用程序的现有应用程序的用户都会拒绝安装修改后的应用程序，因为签名密钥不匹配。诚然，我们可以在这里做更多的工作来监控这类攻击，但我们得到了很多“免费”的保护，仅仅是让开发人员签署应用程序就可以了。而且一个政权强迫应用程序开发者要困难得多，因为开发者不分发应用程序，所以每个人都必须得到修改，使它们更有可能被发现。</p><p>但是，使用应用程序签名，我们不能只检查应用程序的签名。签名将是有效的；APK的内容是有问题的，因为您可以根据通过强制应用的要求修改它们。</p><p>问题是，我们无法知道这些是否是Play将分发的实际APK。毕竟，您完全有能力通过浏览器分发一组APK，并将另一组分发给Android设备用户。</p><p>也许您的愿景是，我们将使用散列或其他方法来确认交付给人们的APK是否与浏览器中的APK匹配。言下之意是，这将由我们开发人员决定：</p><p>确认资源管理器APK与bundletool输出匹配，因为我们可以看到bundletool做了什么，并确认它没有做任何恶意的事情；然后。</p><p>发布bundletool/explorer输出的散列，以便安全应用程序(也许还有我们自己的应用程序)可以验证安装的APK是有效的；以及</p><p>这不是不可能的。然而，这是一个相当大的基础设施。</p><p>然而，更重要的是，它回到了这封信第一节概述的根本问题：如果你的计划是想要修改这些应用程序，那么想必有一天你会这么做。因此，现在我们处于这样一种情况：捆绑包输出故意与您发送给人们的内容不匹配。检测更改是不够的-我们需要(以某种方式)确定这些更改是否是恶意的，然后大规模地执行此操作(这排除了手动检查)。</p><p>那么，你希望我们如何真正地“证明”这些APK呢？您希望我们通过什么过程来确认，虽然您对APK进行了更改，但这些更改是有益的而不是有害的？考虑到你可以为一些人修改应用程序，而不是为其他人修改应用程序，你希望我们如何为每个使用这款应用程序的人做这件事呢？</p><p>当App Signature问世时，我担心的是我在这封信中概述的原因。然而，它是选择加入的，所以虽然我会悄悄地引导开发人员避开它，但这就是我所做的一切。现在你对一些应用程序强制要求-而且似乎有能力在未来强制所有人-我认为是时候我们找出如何将对大约25亿Android设备用户的风险降到最低的时候了。</p><p>您的团队需要接受Android应用程序开发培训吗？马克·墨菲已经训练了数百人！多学点！</p></div><div id="story_share_this"><div class="sharethis-inline-share-buttons"></div></div><div class="text-break sotry_link page_narrow"><a target="_blank" href="https://commonsware.com/blog/2020/09/23/uncomfortable-questions-app-signing.html">https://commonsware.com/blog/2020/09/23/uncomfortable-questions-app-signing.html</a></div><div class="story_tags page_narrow"><button type="button" class="btn btn-light my_tag"><a href="/tag/程序/">#程序</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/签名/">#签名</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/questions/">#questions</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/应用程序/">#应用程序</a></button></div></div><div class="shadow p-3 mb-5 bg-white rounded clearfix"><div class="container"><div class="row"><div class="col-sm"><div><a target="_blank" href="/story/1026065.html"><img src="http://img2.diglog.com/img/2020/9/thumb_46dd07abe644c2c56764a747b1bdb35b.jpg" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1026065.html">英国政府创建的接触者追踪应用程序NHS新冠肺炎在英格兰和威尔士推出，苹果和谷歌的暴露通知API</a></div><span class="my_story_list_date">2020-9-24 11:9</span></div><div class="col-sm"><div><a target="_blank" href="/story/1026005.html"><img src="http://img2.diglog.com/img/2020/9/thumb_36ff8d8a0fd83de3b1b63e53a020f444.jpg" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1026005.html">使用Packwerk增强Rails应用程序的模块化</a></div><span class="my_story_list_date">2020-9-24 5:39</span></div><div class="col-sm"><div><a target="_blank" href="/story/1025969.html"><img src="http://img2.diglog.com/img/2020/9/thumb_afea3a3abef4772421ac80307659b1ca.jpg" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1025969.html">
IOS 14发布后，排名前20位的iOS主屏幕定制应用程序安装量达到570万</a></div><span class="my_story_list_date">2020-9-24 2:52</span></div><div class="col-sm"><div><a target="_blank" href="/story/1025940.html"><img src="http://img2.diglog.com/img/2020/9/thumb_fee9b624d6918a4459cf9dc7ae80f077.png" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1025940.html">谷歌将其Ffltter开发工具包扩展到Windows应用程序</a></div><span class="my_story_list_date">2020-9-24 0:48</span></div></div></div></div><div class="my_movie_list_item shadow p-3 mb-5 bg-white rounded"><button type="button" class="btn btn-link my_tag"><a href="/tag/web2.0/">#web2.0</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/google/">#google</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/设计/">#设计</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/创意/">#创意</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/摄影/">#摄影</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/游戏/">#游戏</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/图片/">#图片</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/软件/">#软件</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/视频/">#视频</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/手机/">#手机</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/广告/">#广告</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/apple/">#apple</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/iphone/">#iphone</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/网站/">#网站</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/免费/">#免费</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/下载/">#下载</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/windows/">#windows</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/微软/">#微软</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/firefox/">#firefox</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/苹果/">#苹果</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/blog/">#blog</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/音乐/">#音乐</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/博客/">#博客</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/wordpress/">#wordpress</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/恶搞/">#恶搞</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/艺术/">#艺术</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/qq/">#qq</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/web/">#web</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/谷歌/">#谷歌</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/工具/">#工具</a></button></div></div></div><div id="my_footer"><div class=""><a href="/tags/">tags</a> <a href="/users/">users</a></div>&copy;2012-2021 diglog.com </div></div></body></html>