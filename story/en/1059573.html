<!doctype html><html lang="zh-hans"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>NetBSD Toaster由TS-7200 ARM9 SBC（2016）提供支持 NetBSD Toaster Powered by the TS-7200 ARM9 SBC (2016)</title><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"><link rel="stylesheet" href="/img/css.css?random="><link data-rh="true" rel="icon" href="/img/favicon.ico"/><script data-ad-client="ca-pub-6067137220025946" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script type="text/javascript" src="https://platform-api.sharethis.com/js/sharethis.js#property=5effb96910009800120b8d4d&product=inline-share-buttons" async="async"></script>
<script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?03c1a0f31299b4a2fbb83c34d6beaac9";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script></head><body><div id="my_header"><div class="container"><nav class="navbar navbar-expand-lg"><a class="navbar-brand" href="/"><img alt="diglog" src="/img/logo.v1.gif" class="rounded-sm"></a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarNavAltMarkup"><div class="navbar-nav"></div></div></nav></div></div><div class="container"><div id="my_content"><h1 class="page_narrow">NetBSD Toaster Powered by the TS-7200 ARM9 SBC (2016)<br/>NetBSD Toaster由TS-7200 ARM9 SBC（2016）提供支持 </h1><div class="row"><div class="col-lg-12 col-12"><div class="my_story_list_item shadow p-3 mb-5 bg-white rounded"><div class="story_page_pub_time page_narrow">2021-04-22 11:45:50</div><div class="story_img_container"><a href="http://img2.diglog.com/img/2021/4/502fb53882c5eb2ce9a55894133d98e2.jpg"><img src="http://img2.diglog.com/img/2021/4/502fb53882c5eb2ce9a55894133d98e2.jpg" class="img-fluid my_story_img" onerror="this.style.display='none'"></a></div><div class="page_narrow text-break page_content"><p>It has long been regarded that the UNIX-like OS NetBSD is portable to every type of machine except perhaps your kitchen toaster. Technologic Systems, however, has conquered this last frontier. Using the rugged, embedded  TS-7200 single board computer housed inside the empty space of a standard two slice toaster, Technologic Systems has designed a functional NetBSD controlled toaster.</p><p>只有很久就会认为，类似的UNIX OS NetBSD可以为每种类型的机器提供便携，除了您的厨房烤面包机。然而，技术系统已经征服了这最后的前沿。使用坚固的嵌入式TS-7200单板计算机，该计算机容纳在标准两块烤面包机的空白区域内，技术系统设计了一种功能的NetBSD控制烤面包机。</p><p>   The toaster, which was on display in the NetBSD booth at the LinuxWorld Expo in San Francisco, is as high-tech as they come. This toaster features a 4 line LCD, USB keyboard, 10/100 ethernet port and a RS232 serial port for the external console. The toaster’s internal circuit boards have been bypassed and routed through the CPU board allowing NetBSD complete control over the toaster’s features. A keyboard connects through a USB port on the side of the toaster and the 4×40 LCD displays a NetBSD/toaster login prompt. The burner element is also controlled by the TS-7200 via an internal relay. Unlike previous NetBSD toasters which were nothing more than a glorified PC case-mod, this toaster can actually toast bread!</p><p>   在旧金山Linuxworld Expo的NetBSD展台上展示的烤面包机是他们来的高科技。此烤面包机采用4线LCD，USB键盘，10/100以太网端口和外部控制台的RS232串口。烤面包机的内部电路板已被绕过并通过CPU板路由，允许NetBSD完全控制烤面包机的功能。键盘通过烤面包机侧面的USB端口连接，4×40 LCD显示NetBSD / oTaster登录提示。燃烧器元件也通过内部继电器由TS-7200控制。与以前的NetBSD烤面包机不同，这是一个不仅仅是一种美化的PC案例，这种烤面包机实际上可以吐烤面包！</p><p> NetBSD was ported to the toaster by Jesse Off, an engineer at Technologic Systems. When asked details about the week-long effort, he replied:</p><p> NetBSD在技术系统的工程师中，Jesse Off被杰西关闭了烤面包机。当询问有关一周努力的详细信息时，他回答说：</p><p> NetBSD is well laid out for this type of embedded application development. I was most worried about physical things such as fitting the hardware inside the case and the board being able to survive 60 seconds at a time a half centimeter away from an 800 watt burner element. A regular PC can’t even survive room temperature without heatsinks and fans, and the TS-7200 has neither.</p><p> NetBSD适用于这种类型的嵌入式应用程序开发。我最担心的是物理的东西，如装配在壳体内的硬件，并且电路板能够在一半厘米远离800瓦燃烧器元件的时间内存在60秒。常规PC甚至无法在没有散热器和风扇的情况下存活室温，并且TS-7200也没有。</p><p> The end-design has no thermal issues and will not let the user toast if things start getting close to the temperature margins of the internal components measured by the onboard temperature sensor.</p><p> 最终设计没有热问题，如果事情开始接近由板载温度传感器测量的内部部件的温度边缘，则不会让用户吐司。</p><p>  Well, I’m skewed. I have been a small-time NetBSD developer on and off the last four years. NetBSD’s single, no-frills, high quality source tree is a great starting point for bringing up an embedded application. The API’s have a great power-to-complexity ratio and are coded with great wisdom as well as great intellect. For NetBSD though, being wiser is definitely the greater virtue.</p><p>  好吧，我很偏好。我在过去四年中一直是一个小型的NetBSD开发商。 NetBSD的单身，无褶边，高质量的源树是带来嵌入式应用的一个很好的起点。 API具有巨大的力量与复杂性比率，并以极大的智慧和巨大的智力编码。对于NetBSD而言，聪明人肯定是更大的美德。</p><p> When asked what the point of this exercise was, company president Bob Miller chuckled and had this to say:</p><p> 当被问到这项练习的重点是什么时候，公司总统鲍勃米勒笑了说： </p><p> We’re definitely not planning on going into full production with this! The idea was to follow through on a process most of our customers are using everyday in their own embedded designs using our boards. Though customers are not likely using toasters in their designs, they are likely encountering many of of the same issues such as GPIO control of hardware, custom software design/modification and dealing with tight spaces and high temperatures.</p><p>我们绝对没有计划充分生产！这个想法是通过我们的大多数客户在他们自己的嵌入式设计中使用我们的嵌入式设计的过程。虽然客户不太可能在其设计中使用烤面包机，但他们可能遇到许多同样的问题，例如GPIO控制硬件，定制软件设计/修改和处理紧的空间和高温。</p><p> So what exactly is inside this toaster for a computer to read/control? For one, there is a small magnetic latch that holds your toast down against the spring action after you press down. To engage that latch, one needs to know when the user is pressing the bread into the toaster, which the TS-7200 reads with another sensor. There is a browning level knob (a potentiometer), which is read with an analog converter input. The front panel also contains four bright red LEDs and five push-buttons which appear to the system as a 5-key keyboard. The NetBSD LCD driver presents a standard VT100 text mode console that both the USB keyboard and 5-key front-panel are connected.</p><p> 那么电脑读/控制的粮食店里究竟究竟是什么？对于一个，在按下后，有一个小磁闩锁，禁止击败弹簧动作。为了接合该锁存器，需要知道用户何时将面包按到烤箱中，TS-7200与另一个传感器读取。有一个褐变水平旋钮（电位器），用模拟转换器输入读取。前面板还包含四个明亮的红色LED和五个按钮，该按钮可作为5键键盘。 NetBSD LCD驱动程序介绍了标准VT100文本模式控制台，即连接USB键盘和5键前面板。</p><p>   All peripherals had NetBSD drivers written that allow their manipulation and readback. The interface to toaster hardware uses the     sysctl  API.   sysctl  allowed for the easy coding of the toasting finite state machine as a simple shell script. The four LED’s are configured as PWM style outputs to vary brightness/blink-rate. Temperature is tracked using the TS-7200 onboard TMP124 sensor. This temperature sensor has .0625 °Cdeg;C precision and the kernel driver takes multiple measurements averaged over time to interpolate even higher precision (the sysctl returns millionths of a °Cdeg;C). The browning level knob is a potentiometer connected to channel 0 of the 12-bit MAX197 ADC which returns a number 0 to 4096 to the system also via   sysctl . The five buttons are simple switches that are polled at 64 Hz by NetBSD’s matrix keypad driver. This driver allows for attachment into the system as a standard keyboard using NetBSD’s     wskbd  API. The 4×40 text mode LCD is a raw HD44780 based LCD available at  allelectronics.com. This devices uses the bit-banged hd44780 kernel driver which allows attachment into the system as a standard NetBSD     wsdisplay . The   wsdisplay and   wskbd drivers coalesce in the     wscons  framework to appear to the system as a regular VT100 system console.</p><p>   所有外围设备都有NetBSD驱动程序，允许其操纵和回读。烤面包机硬件的接口使用Sysctl API。 SYSCTL允许轻松编码敬酒有限状态机作为一个简单的shell脚本。四个LED配置为PWM样式输出，以改变亮度/闪烁速率。使用TS-7200车载TMP124传感器进行跟踪温度。该温度传感器具有.0625°Cdeg; C精度，内核驱动器随着时间的推移进行平均时间，以便立即进行更高的精度（Sysctl返回百万个°Cdeg; c）。褐变水平旋钮是连接到12位MAX197 ADC的通道0的电位器，该电位器也通过SYSCTL将0到4096返回到系统。五个按钮是NetBSD矩阵键盘驱动程序在64 Hz轮询的简单交换机。此驱动程序允许使用NetBSD的WSKBD API附加到系统中作为标准键盘。 4×40文本模式LCD是基于HD44780的LCD，可在Allelectronics.com中获得。该设备使用位磁线HD44780内核驱动程序，该驱动程序允许将系统附加到系统中作为标准NetBSD WSDisplay。 WSDisplay和WSKBD驱动程序在WSCONS框架中占用，将系统视为常规VT100系统控制台。</p><p>  A full NetBSD installation is on the 512 MB compact flash attached to the TS-7200. This includes self-hosted compilers, FTP/telnet server, ssh client/server, crypto libraries, kernel/user-level debuggers, and standard UNIX utilities. Apache with PHP is also installed on the TS-7200 and presents some CGI programs to control the LEDs, play music, etc. Since the 4×40 LCD is attached as a generic console, manipulating text files is also reasonably possible using installed text editors, though admittedly using   vi  on a four row text display is not particularly productive.</p><p>  完整的NetBSD安装位于512 MB紧凑型闪光灯上，连接到TS-7200。这包括自主托管编译器，FTP / Telnet Server，SSH客户端/服务器，加密库，内核/用户级调试器和标准UNIX实用程序。使用PHP的Apache也安装在TS-7200上，并提出了一些CGI程序来控制LED，播放音乐等。由于4×40 LCD附加为通用控制台，使用已安装的文本编辑器也可以合理地进行操作文本文件虽然在四行文本显示上允许使用VI的vi并不特别富有成效。</p><p>  The toaster itself uses a single TS-7200 plus TS-DIO24 daughterboard for toaster control. Two 48 mA output pins on the TS-DIO24 directly drive two 5 V relays with 250V/8A contacts. One relay is used to switch 110 V to the burner element and one relay is used to switch 25 VDC to the magnetic latch. 25 VDC is acquired by tapping off some traces on the stock toaster circuit board after the power supply. All traces from the power supply portion of the PCB to the LEDs and buttons were cut and instead attached to the TS-DIO24 and TS-7200 GPIO pins via small jumper wires soldered directly to the components. A separate, small 5 V switching power supply is also placed inside the toaster shell to power the TS-7200, TS-DIO24, and LCD off the same 110 V line that comes in through the toaster shell. The TS-7200’s USB port, DB9 serial console, and ethernet jack are brought out on jacks on the backside of the toaster. The USB port is then used to connect a small PC keyboard to the system which combines with the five key   wskbd  to control the 4×40 LCD display console. USB speakers are attached through the built-in USB hub on the keyboard to allow playing of MP3’s while toasting occurs.</p><p>  烤面包机本身使用单个TS-7200 Plus TS-DIO24子板进行烤面包机控制。 TS-DIO24上的两个48 mA输出引脚直接驱动25 V继电器，250V / 8A触点。一个继电器用于将110V切换到燃烧器元件，并且使用一个继电器用于将25 Vdc切换到磁锁。通过在电源后敲击库存烤盖塔电路板上的一些痕迹来获得25 VDC。从PCB的电源部分到LED和按钮的所有痕量都被切割，而是通过直接焊接到部件的小跳线连接到TS-DIO24和TS-7200 GPIO引脚。一个单独的，小的5 V开关电源也放置在烤面包壳外部，为TS-7200，TS-DIO24和LCD关闭通过烤箱外壳的相同110 V线路。 TS-7200的USB端口，DB9串行控制台和以太网插孔在烤面包机背面的千斤顶上提出。然后使用USB端口将小型PC键盘连接到系统，该系统与五个键WSKBD相结合以控制4×40 LCD显示控制台。 USB扬声器通过键盘上的内置USB集线器连接，以允许播放烤MP3。</p><p> For more information about NetBSD, please  visit the NetBSD website.  See also Jesse’s white paper on  NetBSD/evbarm Support on the TS-7200.</p><p> 有关NetBSD的更多信息，请访问NetBSD网站。另请参阅TS-7200上的NetBSD / EVBARM支持上的Jesse的白皮书。 </p></div><div id="story_share_this"><div class="sharethis-inline-share-buttons"></div></div><div class="text-break sotry_link page_narrow"><a target="_blank" href="https://www.embeddedarm.com/blog/netbsd-toaster-powered-by-the-ts-7200-arm9-sbc/">https://www.embeddedarm.com/blog/netbsd-toaster-powered-by-the-ts-7200-arm9-sbc/</a></div><div class="story_tags page_narrow"><button type="button" class="btn btn-light my_tag"><a href="/tag/toaster/">#toaster</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/netbsd/">#netbsd</a></button></div></div><div class="my_movie_list_item shadow p-3 mb-5 bg-white rounded"><button type="button" class="btn btn-link my_tag"><a href="/tag/web2.0/">#web2.0</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/google/">#google</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/设计/">#设计</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/创意/">#创意</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/摄影/">#摄影</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/图片/">#图片</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/游戏/">#游戏</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/软件/">#软件</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/视频/">#视频</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/广告/">#广告</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/手机/">#手机</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/iphone/">#iphone</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/网站/">#网站</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/apple/">#apple</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/windows/">#windows</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/免费/">#免费</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/下载/">#下载</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/微软/">#微软</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/firefox/">#firefox</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/blog/">#blog</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/苹果/">#苹果</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/音乐/">#音乐</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/博客/">#博客</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/wordpress/">#wordpress</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/恶搞/">#恶搞</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/qq/">#qq</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/web/">#web</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/艺术/">#艺术</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/工具/">#工具</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/分享/">#分享</a></button></div></div></div><div id="my_footer"><div class=""><a href="/tags/">tags</a> <a href="/users/">users</a></div>&copy;2012-2021 diglog.com </div></div></body></html>