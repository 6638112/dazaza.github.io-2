<!doctype html><html lang="zh-hans"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>COBOL和2,020,202.02美元</title><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"><link rel="stylesheet" href="/img/css.css?random="><link data-rh="true" rel="icon" href="/img/favicon.ico"/><script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?03c1a0f31299b4a2fbb83c34d6beaac9";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script><script data-ad-client="ca-pub-6067137220025946" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script type="text/javascript" src="https://platform-api.sharethis.com/js/sharethis.js#property=5effb96910009800120b8d4d&product=inline-share-buttons" async="async"></script></head><body><div id="my_header"><div class="container"><nav class="navbar navbar-expand-lg"><a class="navbar-brand" href="/"><img alt="diglog" src="/img/logo.v1.gif" class="rounded-sm"></a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarNavAltMarkup"><div class="navbar-nav"></div></div></nav></div></div><div class="container"><div id="my_content"><h1 class="page_narrow">COBOL和2,020,202.02美元</h1><div class="row"><div class="col-lg-12 col-12"><div class="my_story_list_item shadow p-3 mb-5 bg-white rounded"><div class="story_page_pub_time page_narrow">2020-11-05 20:04:24</div><div class="story_img_container"><a href="http://img2.diglog.com/img/2020/11/7cf484ceeae6bc7fc2161eddc603cd15.jpg"><img src="http://img2.diglog.com/img/2020/11/7cf484ceeae6bc7fc2161eddc603cd15.jpg" class="img-fluid my_story_img" onerror="this.style.display='none'"></a></div><div class="page_narrow text-break page_content"><p>Over the years, in fact even in the past year or two I would see on the News some person either getting a bill or a check for some ridiculous amount of money that would be in the form $2020202020… .02.</p><p>这些年来，甚至在过去的一两年里，我也会在新闻上看到一些人收到了一张账单或支票，金额高得离谱，其形式就是2020202020美元(…)。.02。</p><p> If you ever see this you know it was (almost certainly) a programming mistake made in COBOL. Most COBOL programmers have made this bonehead mistake and I am no exception.</p><p>如果您曾经看到过这一点，您就知道(几乎可以肯定)这是在COBOL中犯下的编程错误。大多数COBOL程序员都犯过这个愚蠢的错误，我也不例外。</p><p> The problem is caused by the way COBOL programmers typically initialize a record. Given this little program:</p><p>这个问题是由COBOL程序员通常初始化记录的方式引起的。给出这个小程序：</p><p> identification division. program-id. mistake.  data division. working-storage section.  * *** Input record, typically maintained on disk/tape somewhere. 01 dr-datarec. 03 dr-name pic x(20). 03 dr-amount pic s9(7)v99, comp-3. * *** print record, sent to a line printer. 01 dt-detail. 03 dt-name pic x(20). 03 filler pic x. 03 dt-amount pic z,zzz,zz9.99.   procedure division.  move spaces to dr-datarec. move &#34;test&#34; to dr-name. move 100 to dr-amount. move spaces to dt-detail. move dr-name to dt-name. move dr-amount to dt-amount. display dt-detail.  stop run.</p><p>身份鉴定科。Program-id。弄错了。数据部门。工作储存区。*输入记录，通常保存在磁盘/磁带上的某个位置。01 dr-datarec.03 DR-姓名图片x(20)。03 DR-数量图片S9(7)v99，组件-3。*打印记录，发送到行式打印机。01 dt-详细信息。03 dt-姓名图片x(20)。03填充图片x。03 dt-数量图片z，zzz，zz9.99。程序部。将空格移动到DR-datarec。将&#34；test&#34；移至DR-NAME。将100移至DR-AMOUNT。将空间移动到DT-Detail。将DR-Name移至DT-Name。将DR-Amount移动到DT-Amount。显示DT-DETAIL。别跑了。</p><p> In this program, dr-datarec is the input record. Normally it would be coming from disk somewhere. For this simple test, I am creating it by hand.</p><p>在本程序中，dr-datarec是输入记录。正常情况下，它会来自某个磁盘。对于这个简单的测试，我将手工创建它。</p><p> Once the input record is obtained, calculations are done, and the record is then printed using dt-detail.</p><p>一旦获得输入记录，就进行计算，然后使用DT-DETAIL打印记录。</p><p> The problem is in how dr-datarec is created. Note how I move spaces to it to initialize it. This was a common method of initializing a record.</p><p>问题在于dr-datarec是如何创建的。请注意，我是如何向它移动空格以对其进行初始化的。这是初始化记录的常用方法。</p><p> By doing so, all PIC X fields have spaces in them. BUT, all COMP-3 fields are initialized as well, just not to zero. The programmer has to be sure to create valid values for any COMP-3 field. In the test program, this is properly done:</p><p>通过这样做，所有PIC X字段中都有空格。但是，所有的COMP-3字段也被初始化，只是不是零。程序员必须确保为任何COMP-3字段创建有效值。在测试程序中，这是正确完成的：</p><p>      COMP-3 stores digits as 4 bit “nibbles”, so a single space would appear as the digits 20. If you have 9 digits, as dr-amount has, it requires 10 nibbles of storage (9 nibbles for the digits and one for the sign) OR 5 bytes.</p><p>Comp-3将数字存储为4位“半字节”，因此一个空格将显示为数字20。如果您有9个数字，就像DR-Amount那样，它需要10个半字节的存储(9个半字节用于数字，1个半字节用于符号)或5个字节。</p><p> The MOVE SPACES to DR-DATAREC would result in 5 spaces being stored in the field or the hex value of 2020202020. This is interpreted as 2,020,202.02 if you attempt to use the uninitialized variable.</p><p>将空格移动到DR-DATAREC将导致在字段中存储5个空格或十六进制值2020202020。如果您尝试使用未初始化的变量，则会将其解释为2,020,202.02。</p><p>     COBOL 85 introduced the INITIALIZE verb to correct this problem. Rather than moving spaces to the record, you initialize it and it will move spaces to alphanumeric fields and zeros to numeric fields:</p><p>COBOL 85引入了初始化动词来纠正这个问题。不是将空格移动到记录中，而是对其进行初始化，它会将空格移动到字母数字字段，并将零移动到数字字段：</p><p> * move spaces to dr-datarec. initialize dt-detail. move &#34;test&#34; to dr-name. * move 100 to dr-amount.</p><p>*将空格移动到DR-datarec。初始化DT-Detail。将&#34；test&#34；移至DR-NAME。*将100移至DR-AMOUNT。</p><p>   So the next time you see a poor widow charged $2,020,202.02 on their utility bill, you will know exactly how it happened!</p><p>因此，下次当你看到一个贫穷的寡妇在水电费账单上收取2,020,202.02美元的费用时，你就会确切地知道这是怎么回事了！</p></div><div id="story_share_this"><div class="sharethis-inline-share-buttons"></div></div><div class="text-break sotry_link page_narrow"><a target="_blank" href="https://bigdanzblog.wordpress.com/2020/11/03/cobol-and-2020202-02/">https://bigdanzblog.wordpress.com/2020/11/03/cobol-and-2020202-02/</a></div><div class="story_tags page_narrow"><button type="button" class="btn btn-light my_tag"><a href="/tag/cobol/">#cobol</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/dt/">#dt</a></button></div></div><div class="my_movie_list_item shadow p-3 mb-5 bg-white rounded"><button type="button" class="btn btn-link my_tag"><a href="/tag/web2.0/">#web2.0</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/google/">#google</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/设计/">#设计</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/游戏/">#游戏</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/创意/">#创意</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/apple/">#apple</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/苹果/">#苹果</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/摄影/">#摄影</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/软件/">#软件</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/美国/">#美国</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/iphone/">#iphone</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/图片/">#图片</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/手机/">#手机</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/视频/">#视频</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/广告/">#广告</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/免费/">#免费</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/谷歌/">#谷歌</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/网站/">#网站</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/windows/">#windows</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/微软/">#微软</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/下载/">#下载</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/firefox/">#firefox</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/音乐/">#音乐</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/linux/">#linux</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/blog/">#blog</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/博客/">#博客</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/程序/">#程序</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/艺术/">#艺术</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/web/">#web</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/wordpress/">#wordpress</a></button></div></div></div><div id="my_footer"><div class=""><a href="/tags/">tags</a> <a href="/users/">users</a></div>&copy; 2020 diglog.com </div></div></body></html>