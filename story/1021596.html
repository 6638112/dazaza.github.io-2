<!doctype html><html lang="zh-hans"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>RxDB-PouchDB之上的实时数据库</title><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"><link rel="stylesheet" href="/img/css.css?random="><link data-rh="true" rel="icon" href="/img/favicon.ico"/><script data-ad-client="ca-pub-6067137220025946" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script type="text/javascript" src="https://platform-api.sharethis.com/js/sharethis.js#property=5effb96910009800120b8d4d&product=inline-share-buttons" async="async"></script>
<script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?03c1a0f31299b4a2fbb83c34d6beaac9";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script></head><body><div id="my_header"><div class="container"><nav class="navbar navbar-expand-lg"><a class="navbar-brand" href="/"><img alt="diglog" src="/img/logo.v1.gif" class="rounded-sm"></a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarNavAltMarkup"><div class="navbar-nav"></div></div></nav></div></div><div class="container"><div id="my_content"><h1 class="page_narrow">RxDB-PouchDB之上的实时数据库</h1><div class="row"><div class="col-lg-12 col-12"><div class="my_story_list_item shadow p-3 mb-5 bg-white rounded"><div class="story_page_pub_time page_narrow">2020-09-01 21:56:58</div><div class="story_img_container"><a href="http://img2.diglog.com/img/2020/9/394798c664ae70fdd396d807c18a4408.png"><img src="http://img2.diglog.com/img/2020/9/394798c664ae70fdd396d807c18a4408.png" class="img-fluid my_story_img" onerror="this.style.display='none'"></a></div><div class="page_narrow text-break page_content"><p>PermalLink GitHub是5000多万开发人员的家园，他们一起工作，共同托管和审查代码、管理项目和构建软件。</p><p>报名。</p><p>RxDB(反应性数据库的缩写)是一个用于网站、混合应用、电子应用、渐进式Web应用和NodeJS等JavaScript应用的NoSQL数据库。反应式意味着您不仅可以查询当前状态，还可以订阅所有状态更改，如查询结果，甚至文档的单个字段。这对于基于UI的实时应用程序来说是很棒的，因为它使得开发变得容易，并且具有很大的性能优势。为了在客户端和服务器之间复制数据，RxDB提供了与任何CouchDB兼容的端点以及自定义GraphQL端点进行实时复制的模块。</p><p>客户端和服务器之间的复制-数据，兼容PouchDB、CouchDB和IBM Cloudant。还有一个用于GraphQL复制的插件。</p><p>我们对RxDB进行了优化、复查并制作了样板，这样您就可以直接开始将RxDB用于像这样的框架。</p><p>从&#39；rxdb&#39；；const db=await createRxDatabase({name：&#39；heremesdb&#39；，Adapter：&#39；IndexedDB&#39；，密码：&#39；myLongAndStupidPassword&#39；//可选})；//创建数据库等待db导入{createRxDatabase}。Collection({name：&#39；heros&#39；，schema：mySchema})；//创建集合数据库。英雄们。Insert({name：&#39；Bob&#39；})；//插入文档。</p><p>分贝。英雄们。Find()。排序(&#39；名称&#39；)。$//&lt；-返回查询的可观测性。订阅(docs=&gt；{myDomElement.。InnerHTML=docs。MAP(doc=&gt；&39；&lt；li&gt；&#39；+doc.。名称+&39；&lt；/li&gt；&#39；)。Join()；})；</p><p>Const mySchema={标题：&#34；英雄模式&#34；，版本：0，//&lt；-增量版本号描述：&#34；描述一个简单的英雄&#34；，类型：&#34；对象&#34；，属性：{名称：{类型：&#34；字符串&#34；，主要：TRUE//&lt；-这意味着：唯一，必需，字符串，并将用作&#39；_id&#39；}，密码：{type：&#34；string&#34；，}，技能：{type：&#34；array&#34；，maxItems：5，Unique eItems：true，Item：{type：&#34；Object&#34；，属性：{名称：{type：&#34；String&#34；}，损坏：{type：&#34；number&#34；}，必填：[&#34；color&#34；]，加密：[&#34；secret&#34；]//&lt；-表示该字段的值是加密存储的}；</p><p>{&#34；标题&#34；：&#34；我的架构&#34；，&#34；属性&#34；：{&#34；机密&#34；：{&#34；类型&#34；：&#34；字符串&#34；，&#34；加密&#34；：true}}，&#34；加密&#34；：[&#34；机密&#34；]}。</p><p>//这需要IndexedDB适配器RxDB。Plugin(Required(&#39；pouchdb-Adapter-idb&#39；))；//这将创建一个包含IndexedDB-Adapter常量数据库=await RxDB的数据库。创建({name：&#39；mydatabase&#39；，Adapter：&#39；IndexedDB&#39；//您的适配器名称})；</p><p>//导出单个集合const jsonCol=await myCollection。Dump()；//导出整个数据库const jsonDB=await myDatabase。Dump()；//将转储导入集合等待EmptyCollection。Import Dump(Json)；//将转储导入数据库等待EmptyDatabase。Import Dump(Json)；</p><p>MyRxDatabase。WaitForLeadship()。则(()=&gt；{//这将仅在实例成为先导时运行。MySocket=createWebSocket()；})；</p><p>//当您使用大键保存对象时，请等待myCollection。INSERT({firstName：&#39；foo&#39；lastName：&#39；bar&#39；dustidLongKey：5})；//密钥压缩会在内部将其转换为{&#39；|a&#39；：&#39；foo&#39；&#39；|b&#39；：&#39；bar&#39；&#39；|c&#39；：5}//所以压缩版本只有28个字符，而不是46个字符//压缩在内部工作，所以您当然仍然可以通过原始的key.name访问值并运行普通查询。控制台。日志(myDoc.。名字)；//&#39；foo&#39；</p><p>假设您有一个非常大的集合，其中包含许多用户文档。在您的页面上，您希望显示一个包含积分最多且当前已登录的用户的拓扑列表。您可以创建一个查询并订阅它。</p><p>Const query=usersCollection。Find()。其中(&#39；登录&#39；)。EQ(真)。排序(&#39；点&#39；)；查询。$。订阅(用户=&&gt;；{文档。QuerySelector(&#39；Body&#39；)。InnerHTML=用户。Reduce((prev，cur)=&gt；prev+cur.。用户名+&#39；&lt；br/&gt；&#39；，&#39；&#39；)；})；</p><p>正如您可能发现的那样，查询可能需要很长时间才能运行，因为您的集合中有数千个用户。当用户现在注销时，整个查询将在数据库中重新运行，这也需要很长时间。</p><p>但是不能使用EventReduce.Now，当一个用户注销时，它将根据当前结果加上RxChangeEvent计算新结果。这通常可以在内存中完成，而无需向存储引擎发出IO请求。EventReduce不仅适用于订阅的查询，而且当您对同一查询执行多个.exec()&#39；时也是如此。</p></div><div id="story_share_this"><div class="sharethis-inline-share-buttons"></div></div><div class="text-break sotry_link page_narrow"><a target="_blank" href="https://github.com/pubkey/rxdb/blob/master/README.md">https://github.com/pubkey/rxdb/blob/master/README.md</a></div><div class="story_tags page_narrow"><button type="button" class="btn btn-light my_tag"><a href="/tag/数据库/">#数据库</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/database/">#database</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/rxdb/">#rxdb</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/realtime/">#realtime</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/查询/">#查询</a></button></div></div><div class="shadow p-3 mb-5 bg-white rounded clearfix"><div class="container"><div class="row"><div class="col-sm"><div><a target="_blank" href="/story/1021365.html"><img src="http://img.diglog.com/img/2020/8/thumb_d92fc4cbe9f143d5b77f9ea99ed80f42.jpg" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1021365.html">云数据库公司Snowflake首席执行官弗兰克·斯罗特曼(Frank Slotman)的个人资料，他于16个月前受聘，这是他第三次将自己的初创公司上市</a></div><span class="my_story_list_date">2020-8-31 8:38</span></div><div class="col-sm"><div><a target="_blank" href="/story/1020898.html"><img src="http://img.diglog.com/img/2020/8/thumb_518ee73c31831d31b1e85f795878dac6.png" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1020898.html">在GO中测试数据库事务</a></div><span class="my_story_list_date">2020-8-28 18:44</span></div><div class="col-sm"><div><a target="_blank" href="/story/1020498.html"><img src="http://img.diglog.com/img/2020/8/thumb_19555ae77a6b70a04daaf6cb0310c620.gif" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1020498.html">与您的数据对话：一个模型，任何关系数据库</a></div><span class="my_story_list_date">2020-8-27 2:39</span></div><div class="col-sm"><div><a target="_blank" href="/story/1020235.html"><img src="http://img.diglog.com/img/2020/8/thumb_427f4eeeaf7fe3255451f0250bd35622.jpg" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1020235.html">数据库软件初创公司Redis Labs在TCV和贝恩资本风险投资公司(Bain Capital Ventures)的带领下筹集了1亿美元的F系列资金，使其估值达到10亿美元以上，总筹资近2.5亿美元</a></div><span class="my_story_list_date">2020-8-26 3:11</span></div></div></div></div><div class="my_movie_list_item shadow p-3 mb-5 bg-white rounded"><button type="button" class="btn btn-link my_tag"><a href="/tag/web2.0/">#web2.0</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/google/">#google</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/设计/">#设计</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/创意/">#创意</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/摄影/">#摄影</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/游戏/">#游戏</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/图片/">#图片</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/软件/">#软件</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/视频/">#视频</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/手机/">#手机</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/广告/">#广告</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/apple/">#apple</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/iphone/">#iphone</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/网站/">#网站</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/免费/">#免费</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/下载/">#下载</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/windows/">#windows</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/微软/">#微软</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/firefox/">#firefox</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/苹果/">#苹果</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/blog/">#blog</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/音乐/">#音乐</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/博客/">#博客</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/wordpress/">#wordpress</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/恶搞/">#恶搞</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/艺术/">#艺术</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/qq/">#qq</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/web/">#web</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/谷歌/">#谷歌</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/工具/">#工具</a></button></div></div></div><div id="my_footer"><div class=""><a href="/tags/">tags</a> <a href="/users/">users</a></div>&copy;2012-2021 diglog.com </div></div></body></html>