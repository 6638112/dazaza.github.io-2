<!doctype html><html lang="zh-hans"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>更新Git.php.net事件 </title><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"><link rel="stylesheet" href="/img/css.css?random="><link data-rh="true" rel="icon" href="/img/favicon.ico"/><script data-ad-client="ca-pub-6067137220025946" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script type="text/javascript" src="https://platform-api.sharethis.com/js/sharethis.js#property=5effb96910009800120b8d4d&product=inline-share-buttons" async="async"></script>
<script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?03c1a0f31299b4a2fbb83c34d6beaac9";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script></head><body><div id="my_header"><div class="container"><nav class="navbar navbar-expand-lg"><a class="navbar-brand" href="/"><img alt="diglog" src="/img/logo.v1.gif" class="rounded-sm"></a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarNavAltMarkup"><div class="navbar-nav"></div></div></nav></div></div><div class="container"><div id="my_content"><h1 class="page_narrow">更新Git.php.net事件 </h1><div class="row"><div class="col-lg-12 col-12"><div class="my_story_list_item shadow p-3 mb-5 bg-white rounded"><div class="story_page_pub_time page_narrow">2021-04-07 12:04:41</div><div class="page_narrow text-break page_content"><p>我想提供关于Git.php.net安全事件的更新。要简要概括最重要的信息：</p><p> 我们不再相信Git.php.net服务器已被泄露。但是，Master.php.net用户数据库可能已泄露。</p><p>   git.php.net和svn.php.net现在都是只读的，但将暂时可用。</p><p> 以下是更详细地解释发生的事情以及采取的行动。</p><p> 当第一次恶意提交在Rasmus＆＃39下制作;姓名，我的初步反应是恢复改变并撤销Rasmus＆＃39的提交访问;账户，假设这是个人账户妥协。在后智，这个动作没有真正有意义，因为有（当时）没有理由相信推动通过RASMUS＆＃39;特别是账户。任何具有访问PHP-SRC存储库的帐户都可以在错误的名称下执行推送。</p><p> 当第二个恶意提交在我自己的名称下进行时，我审查了我们的GitiTITE安装的日志，以便确定哪个帐户实际用于执行推送。但是，虽然所有相邻的提交都被占了，但没有出现两个恶意提交的Git-Receive-Pack条目，这意味着这两个事项提交完全绕过了Gitolite基础架构。这被解释为服务器妥协的可能证据。</p><p> 不久之后，我们决定停止git.php.net并使github我们的主存储库主机。保留我们自己的Git基础架构在确定妥协的根本原因后，需要设置新的Git.php.net服务器。这将在此期间需要花费大量时间并扰乱PHP开发。对于GitHub的基本迁移可以更快地执行更快，因为大多数存储库已经在那里镜像。在这一点上，无论如何，我们已经经历了大量的发展，我们自己的Git基础设施大多是发行工作流程的安全责任和复杂性，因此制作开关并不是一个艰难的决定。 </p><p>当时我不知道的东西是Git.php.net（故意）支持不仅通过SSH（使用Gitolite基础架构和公钥加密）而推动更改，还支持通过HTTPS来推动更改。后者没有使用gitiTite，而是使用Git-Http-experend在Apache2摘要身份验证，而不是Master.php.net用户数据库。我不确定为什么首先支持基于密码的身份验证，因为它比Pubkey身份验证的安全得多。</p><p> 基于访问日志，我们可以确定使用HTTPS和基于密码的身份验证来推动该提交。相关日志条目的摘录如下所示：</p><p> [删除]  -  RASMUS @ [编辑] [27 / Mar / 2021：19：19：23 -0700]＆＃34; get /push/php-src.git/info/refs?service=git-upload-pack http /1.1&#34; 401 941 [删除]  -  Rasmus @ [重新迁移] [27 / Mar / 2021：19：19：28 -0700]＆＃34; get /push/php-src.git/info/refs?service=git-upload-包http / 1.1＆＃34; 401 941 [编辑]  -  RASMUS [27 / MAR / 2021：20：56：51 -0700]＆＃34; get /push/php-src.git/info/refs?service=git-receive-pack http / 1.1 ＆＃34; 200 125315 [编纂]  -  RASMUS [27 / MAR / 2021：20：58：13 -0700]＆＃34; POST / push/php-src.git/git-receive-pack http / 1.1＆＃34; 200 1080 [redacted]  -  nikita.ppv [28 / mar / 2021：09：09：15 -0700]＆＃34; get /push/php-src.git/info/refs?service=git-upload-pack http /1.1&#34; 401 941 [redacted]  -  nikita.ppv [28 / mar / 2021：09：09：18 -0700]＆＃34; get /push/php-src.git/info/refs?service=git-upload-pack http /1.1&#34; 401 941 [redacted]  -  nikitappv [28 / mar / 2021：09：09：35 -0700]＆＃34; get /push/php-src.git/info/refs?service=git-upload-pack http / 1.1 ＆＃34; 401 941 [redacted]  -  nikitappv [28 / mar / 2021：09：09：36 -0700]＆＃34; get /push/php-src.git/info/refs?service=git-upload-pack http / 1.1 ＆＃34; 401 941 [删除]  -  Nikita [28 / Mar / 2021：09：09：50 -0700]＆＃34; get /push/php-src.git/info/refs?service=git-upload-pack http / 1.1 ＆＃34; 401 941 [删除]  -  Nikita [28 / Mar / 2021：09：09：53 -0700]＆＃34; get /push/php-src.git/info/refs?service=git-upload-pack http / 1.1 ＆＃34; 401 941 [删除]  - 尼克西[28 / Mar / 2021：09：11：31 -0700]＆＃34; get /push/php-src.git/info/refs?service=git-receive-pack http / 1.1 ＆＃34; 401 941 [删除]  - 尼克西[28 / Mar / 2021：09：11：31 -0700]＆＃34; get /push/php-src.git/info/refs?service=git-receive-pack http / 1.1 ＆＃34; 401 941 [删除]  - 尼克西[28 / mar / 2021：09：13：28 -0700]＆＃34; get /push/php-src.git/info/refs?service=git-receive-pack http / 1.1 ＆＃34; 200 123263 [redacted]  -  nikic [28 / mar / 2021：09：13：39 -0700]＆＃34; post /push/php-src.git/git-receive-pack http / 1.1＆＃34; 2000年1079.</p><p> 值得注意的是，攻击者只在用户名下猜测了一些猜测，并在找到正确的用户名后成功验证。虽然我们没有任何特定的证据，但可能的解释是Master.php.net的用户数据库已被泄露，虽然目前尚不清楚为什么攻击者需要在这种情况下猜测用户名。</p><p> Master.php.net系统用于身份验证和各种管理任务，在非常旧的操作系统/ PHP版本上运行非常旧的代码，因此某种脆弱性不会非常令人惊讶。我们已经提出了一些更改以增加该系统的安全性：</p><p> Master.php.net被迁移到新系统（运行PHP 8）并同时重命名为Main.php.net。除此之外，新系统支持TLS 1.2，这意味着您在访问此站点时不再看到TLS版本警告。</p><p> 实现已朝向使用参数化查询移动，更自信地无法发生SQL注入。 </p><p>以前，密码以与HTTP摘要认证兼容的格式存储（基本上是一个普通的MD5哈希），这是Git.php.net和Svn.php.net上的HTTP身份验证所必需的。 由于Git.php.net作为此事件的读取，我们也决定使SVN.PHP.NET读取，从而删除以不安全格式存储密码的需要。 只有一个小少数PECL扩展仍在使用SVN服务器。 以下SVN存储库具有半最近的活动，并已迁移到GitHub：  如果需要额外的迁移或权限调整，请在Nikic@php.net上与我联系。 还请报告您使用main.php.net遇到的任何问题 - 它＆＃39;很可能在迁移期间发生了一些事情。 </p></div><div id="story_share_this"><div class="sharethis-inline-share-buttons"></div></div><div class="text-break sotry_link page_narrow"><a target="_blank" href="https://externals.io/message/113981">https://externals.io/message/113981</a></div><div class="story_tags page_narrow"><button type="button" class="btn btn-light my_tag"><a href="/tag/net/">#net</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/update/">#update</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/git/">#git</a></button></div></div><div class="shadow p-3 mb-5 bg-white rounded clearfix"><div class="container"><div class="row"><div class="col-sm"><div><a target="_blank" href="/story/1054586.html"><img src="http://img2.diglog.com/img/2021/3/thumb_cab25dd010a881ca274f3deccc5d06fe.jpg" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1054586.html">机器人流程自动化软件制造商UIPATH文件在纽约证券交易所上市，报告2012年0221财年607万美元，同比增长81％，净亏损92.3米 </a></div><span class="my_story_list_date">2021-3-26 21:44</span></div><div class="col-sm"><div><a target="_blank" href="/story/1054423.html"><img src="http://img2.diglog.com/img/2021/3/thumb_c866b3bfbc9f9e062a82ee8af6f2e2c2.png" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1054423.html">在.NET 6中的循环对齐 </a></div><span class="my_story_list_date">2021-3-26 20:9</span></div><div class="col-sm"><div><a target="_blank" href="/story/1053601.html"><img src="http://img2.diglog.com/img/2021/3/thumb_1adf2dd760dbf2062d7cce58cf4313bc.png" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1053601.html">恢复美国的网络中立 </a></div><span class="my_story_list_date">2021-3-20 15:47</span></div><div class="col-sm"><div><a target="_blank" href="/story/1053206.html"><img src="http://img2.diglog.com/img/2021/3/thumb_0a77c70983fff07530e6b90b5d0e1418.jpeg" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1053206.html">令人敬畏的.NET性能 </a></div><span class="my_story_list_date">2021-3-18 16:58</span></div></div></div></div><div class="my_movie_list_item shadow p-3 mb-5 bg-white rounded"><button type="button" class="btn btn-link my_tag"><a href="/tag/web2.0/">#web2.0</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/google/">#google</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/设计/">#设计</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/创意/">#创意</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/摄影/">#摄影</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/游戏/">#游戏</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/图片/">#图片</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/软件/">#软件</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/视频/">#视频</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/手机/">#手机</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/广告/">#广告</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/apple/">#apple</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/iphone/">#iphone</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/网站/">#网站</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/免费/">#免费</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/下载/">#下载</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/windows/">#windows</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/微软/">#微软</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/firefox/">#firefox</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/苹果/">#苹果</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/blog/">#blog</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/音乐/">#音乐</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/博客/">#博客</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/wordpress/">#wordpress</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/恶搞/">#恶搞</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/艺术/">#艺术</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/qq/">#qq</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/web/">#web</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/谷歌/">#谷歌</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/工具/">#工具</a></button></div></div></div><div id="my_footer"><div class=""><a href="/tags/">tags</a> <a href="/users/">users</a></div>&copy;2012-2021 diglog.com </div></div></body></html>