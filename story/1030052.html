<!doctype html><html lang="zh-hans"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Python中的模式匹配</title><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"><link rel="stylesheet" href="/img/css.css?random="><link data-rh="true" rel="icon" href="/img/favicon.ico"/><script data-ad-client="ca-pub-6067137220025946" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script type="text/javascript" src="https://platform-api.sharethis.com/js/sharethis.js#property=5effb96910009800120b8d4d&product=inline-share-buttons" async="async"></script>
<script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?03c1a0f31299b4a2fbb83c34d6beaac9";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script></head><body><div id="my_header"><div class="container"><nav class="navbar navbar-expand-lg"><a class="navbar-brand" href="/"><img alt="diglog" src="/img/logo.v1.gif" class="rounded-sm"></a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarNavAltMarkup"><div class="navbar-nav"></div></div></nav></div></div><div class="container"><div id="my_content"><h1 class="page_narrow">Python中的模式匹配</h1><div class="row"><div class="col-lg-12 col-12"><div class="my_story_list_item shadow p-3 mb-5 bg-white rounded"><div class="story_page_pub_time page_narrow">2020-10-20 22:41:15</div><div class="story_img_container"><a href="http://img2.diglog.com/img/2020/10/8e77f040d37fd76761e6b57f203fb02c.jpeg"><img src="http://img2.diglog.com/img/2020/10/8e77f040d37fd76761e6b57f203fb02c.jpeg" class="img-fluid my_story_img" onerror="this.style.display='none'"></a></div><div class="page_narrow text-break page_content"><p>此回购包含问题跟踪器、示例和与PEP 622相关的早期工作：结构模式匹配。PEP本身的更新应在PEPS回购中进行。</p><p>Brandt Bucher编写的完整参考实现可以作为CPython repo的分支获得。这很容易转换为Pull请求。</p><p>对于那些不愿从源代码构建CPython二进制文件的人，请单击本自述文件顶部的按钮。</p><p>Match语句接受表达式，并将其与作为一个或多个CASE块给定的后继字符进行比较。表面上看，这类似于C、Java或JavaScript(许多其他语言)中的switch语句，但功能要强大得多。</p><p>Def http_error(Status)：匹配状态：案例400：返回&#34；错误请求&#34；案例401：返回&#34；未经授权&#34；案例403：返回&#34；禁止&#34；案例404：返回&#34；未找到&#34；案例418：返回&#34；i&#39；m茶壶&#34；案例_：返回&#34；其他&#34；</p><p>注意最后一块：&#34；变量名&#34；_充当通配符，从不会失败。</p><p>#主题为(x，y)元组匹配点：case(0，0)：print(&#34；Origin&#34；)case(0，y)：print(f&#34；Y={y}&#34；)case(x，0)：print(f&#34；x={x}&#34；)case(x，y)：print(f&#34；x={x}，Y={y}&#34；)case_：提高值错误(&#34；不是点&#34；)。</p><p>仔细研究一下那个！第一个模式有两个文字，可以认为是上面显示的文字模式的扩展。但是接下来的两个模式结合了一个文字和一个变量，变量从主题(点)捕获一个值。第四个模式捕获两个值，这使得它在概念上类似于解包赋值(x，y)=point。</p><p>如果使用类来组织数据(例如，数据类)，则可以使用类名后跟类似于构造函数的参数列表，但具有捕获变量的功能：</p><p>从数据类导入DataClass@DataClass类Point：x：int y：int def Where is(Point)：Match Point：Case Point(0，0)：Print(&#34；Origin&#34；)Case Point(0，y)：Print(f&#34；Y={y}&#34；)Case Point(x，0)：Print(f&#34；X={x}&#34；)Case Point()：打印(&#34；其他&#34；)case_：打印(&#34；不是点&#34；)。</p><p>我们也可以使用关键字参数。以下模式等价(并且都将y属性绑定到var变量)：</p><p>模式可以任意嵌套。例如，如果我们有一个入围的点列表，我们可以这样匹配它：</p><p>Match Points：case[]：Print(&#34；No Points&#34；)case[Point(0，0)]：Print(&#34；the Origin&#34；)case[Point(x，y)]：Print(f&#34；Single Point{x}，{y}&34；)case[Point(0，y1)，Point(0，y2)]：Print(f&#34；Y轴上{y1}，{y2}&#34；)两个案例_：打印(&#34；其他&#34；)。</p><p>我们可以在模式中添加IF子句，称为守卫。如果Guard为false，则Match继续尝试下一个CASE块。请注意，值捕获发生在评估保护之前：</p><p>匹配点：案例点(x，y)，如果x==y：打印(f&#34；Y=X at{x}&#34；)案例点(x，y)：打印(f&#34；不在对角线&#34；)。</p><p>与解包赋值一样，元组和列表模式具有完全相同的含义，实际上匹配任意序列。一个重要的例外是它们不匹配迭代器或字符串。(从技术上讲，主题必须是集合的实例。abc.Sequence)。</p><p>序列模式支持通配符：[x，y，*rest]和(x，y，*rest)的工作方式类似于解包赋值中的通配符。*之后的名称也可以是_，因此(x，y，*_)匹配至少两个项的序列，而不绑定其余项。</p><p>映射模式：{&#34；带宽&#34；：b，&#34；延迟&#34；：l}从DICT捕获&#34；带宽&#34；和&#34；延迟&#34；值。与Sequencepatterns不同，额外的键被忽略。还支持通配符**REST。(但是**_会是多余的，所以不允许。)。</p><p>模式可以使用命名常量。这些名称必须用点分隔，以防止它们被解释为捕获变量：</p><p>从枚举导入枚举类颜色(枚举)：红色=0绿色=1蓝色=2匹配颜色：案例颜色。红色：打印(&#34；我看到红色！&#34；)表壳颜色。绿色：打印(草为绿色)表壳颜色。蓝色：印花(#34；I&39；I&I‘我感觉到了忧郁：(&#34；)。</p><p>字面值None、False和True被特殊处理：与主题的比较是使用is完成的。这是：</p><p>类可以通过设置类变量__MATCH_ARGS__来覆盖从位置参数到属性的映射。请参阅PEP中的相关内容。</p></div><div id="story_share_this"><div class="sharethis-inline-share-buttons"></div></div><div class="text-break sotry_link page_narrow"><a target="_blank" href="https://github.com/gvanrossum/patma">https://github.com/gvanrossum/patma</a></div><div class="story_tags page_narrow"><button type="button" class="btn btn-light my_tag"><a href="/tag/python/">#python</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/matching/">#matching</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/模式/">#模式</a></button></div></div><div class="shadow p-3 mb-5 bg-white rounded clearfix"><div class="container"><div class="row"><div class="col-sm"><div><a target="_blank" href="/story/1029860.html"><img src="http://img2.diglog.com/img/2020/10/thumb_ef60e0e0abc843c004ccaf10b95ea086.jpg" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1029860.html">为Ruby、Python、Elixir、Go等提供更好的Git diff输出</a></div><span class="my_story_list_date">2020-10-20 1:43</span></div><div class="col-sm"><div><a target="_blank" href="/story/1029821.html"><img src="http://img2.diglog.com/img/2020/10/thumb_7f70d9555707141de03eda7009b9ad08.png" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1029821.html">剧情片巨蟒奖</a></div><span class="my_story_list_date">2020-10-19 23:21</span></div><div class="col-sm"><div><a target="_blank" href="/story/1029629.html"><img src="http://img2.diglog.com/img/2020/10/thumb_8af277effc06e9143067cab403019153.png" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1029629.html">5个您可能从未听说过的隐藏Python功能</a></div><span class="my_story_list_date">2020-10-19 1:37</span></div><div class="col-sm"><div><a target="_blank" href="/story/1029326.html"><img src="http://img2.diglog.com/img/2020/10/thumb_fe77ea13568cce6a4b192d499ac6c161.jpg" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1029326.html">JPM器官雅典娜有3500万行Python，不会及时更新到Python3</a></div><span class="my_story_list_date">2020-10-17 4:54</span></div></div></div></div><div class="my_movie_list_item shadow p-3 mb-5 bg-white rounded"><button type="button" class="btn btn-link my_tag"><a href="/tag/web2.0/">#web2.0</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/google/">#google</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/设计/">#设计</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/创意/">#创意</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/摄影/">#摄影</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/游戏/">#游戏</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/图片/">#图片</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/软件/">#软件</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/视频/">#视频</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/手机/">#手机</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/广告/">#广告</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/apple/">#apple</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/iphone/">#iphone</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/网站/">#网站</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/免费/">#免费</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/下载/">#下载</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/windows/">#windows</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/微软/">#微软</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/firefox/">#firefox</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/苹果/">#苹果</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/blog/">#blog</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/音乐/">#音乐</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/博客/">#博客</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/wordpress/">#wordpress</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/恶搞/">#恶搞</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/艺术/">#艺术</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/qq/">#qq</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/web/">#web</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/谷歌/">#谷歌</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/工具/">#工具</a></button></div></div></div><div id="my_footer"><div class=""><a href="/tags/">tags</a> <a href="/users/">users</a></div>&copy;2012-2021 diglog.com </div></div></body></html>