<!doctype html><html lang="zh-hans"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Windows 10错误在看到此文件的图标时损坏了您的硬盘 Windows 10 Bug Corrupts Your Hard Drive On Seeing This File's Icon</title><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"><link rel="stylesheet" href="/img/css.css?random="><link data-rh="true" rel="icon" href="/img/favicon.ico"/><script data-ad-client="ca-pub-6067137220025946" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script type="text/javascript" src="https://platform-api.sharethis.com/js/sharethis.js#property=5effb96910009800120b8d4d&product=inline-share-buttons" async="async"></script>
<script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?03c1a0f31299b4a2fbb83c34d6beaac9";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script></head><body><div id="my_header"><div class="container"><nav class="navbar navbar-expand-lg"><a class="navbar-brand" href="/"><img alt="diglog" src="/img/logo.v1.gif" class="rounded-sm"></a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarNavAltMarkup"><div class="navbar-nav"></div></div></nav></div></div><div class="container"><div id="my_content"><h1 class="page_narrow">Windows 10 Bug Corrupts Your Hard Drive On Seeing This File's Icon<br/>Windows 10错误在看到此文件的图标时损坏了您的硬盘 </h1><div class="row"><div class="col-lg-12 col-12"><div class="my_story_list_item shadow p-3 mb-5 bg-white rounded"><div class="story_page_pub_time page_narrow">2021-01-15 20:47:31</div><div class="story_img_container"><a href="http://img2.diglog.com/img/2021/1/fc327fed0b3556597f0a16587fb7b7f9.jpg"><img src="http://img2.diglog.com/img/2021/1/fc327fed0b3556597f0a16587fb7b7f9.jpg" class="img-fluid my_story_img" onerror="this.style.display='none'"></a></div><div class="page_narrow text-break page_content"><p>An unpatched zero-day in Microsoft Windows 10 allows attackers to corrupt an NTFS-formatted hard drive with a one-line command.</p><p>Microsoft Windows 10中未修补的零日漏洞允许攻击者使用单行命令破坏NTFS格式的硬盘。</p><p> In multiple tests by  BleepingComputer, this one-liner can be delivered hidden inside a Windows shortcut file, a ZIP archive, batch files, or various other vectors to trigger hard drive errors that corrupt the filesystem index instantly.</p><p> 在BleepingComputer进行的多次测试中，可以将这种单行代码隐藏在Windows快捷文件，ZIP归档文件，批处理文件或其他各种向量中，以触发硬盘驱动器错误，从而立即破坏文件系统索引。</p><p>  In August 2020, October 2020, and finally this week, infosec researcher  Jonas L drew attention to an NTFS vulnerability impacting Windows 10 that has not been fixed.</p><p>  2020年8月，2020年10月以及本周最后一个星期，信息安全研究员Jonas L提请注意影响Windows 10的尚未修复的NTFS漏洞。</p><p> When exploited, this vulnerability can be triggered by a single-line command to instantly corrupt an NTFS-formatted hard drive, with Windows prompting the user to restart their computer to repair the corrupted disk records.</p><p> 利用此漏洞时，可通过单行命令触发此漏洞，以立即破坏NTFS格式的硬盘驱动器，并通过Windows提示用户重新启动计算机以修复损坏的磁盘记录。</p><p> The researcher told BleepingComputer that the flaw became exploitable starting around Windows 10 build 1803, the Windows 10 April 2018 Update, and continues to work in the latest version.</p><p> 研究人员告诉BleepingComputer，该漏洞从Windows 10 build 1803（Windows 10 April 2018 Update）开始就可以被利用，并且可以在最新版本中继续使用。</p><p> What&#39;s worse is, the vulnerability can be triggered by standard and low privileged user accounts on Windows 10 systems.</p><p> 更糟糕的是，该漏洞可能由Windows 10系统上的标准和低特权用户帐户触发。</p><p>  A drive can become corrupted by merely trying to access the $i30 NTFS attribute on a folder in a certain way.</p><p>  仅以某种方式尝试访问文件夹中的$ i30 NTFS属性，驱动器可能会损坏。 </p><p> *WARNING* Executing the below command on a live system will corrupt the drive and possibly make it inaccessible.  ONLY test this command in a virtual machine that you can restore to an earlier snapshot if the drive becomes corrupted.    *WARNING*</p><p>*警告*在运行中的系统上执行以下命令将损坏驱动器并可能使其无法访问。仅在虚拟机中测试此命令，如果驱动器损坏，您可以将其还原到早期快照。 *警告*</p><p>   The Windows NTFS Index Attribute, or &#39; $i30&#39; string, is an NTFS attribute associated with directories that contains a list of a directory&#39;s files and subfolders. In some cases, the  NTFS Index can also include deleted files and folders, which comes in handy when conducting an incident response or forensics.</p><p>   Windows NTFS索引属性，或＆＃39; $ i30＆＃39;字符串，是与目录关联的NTFS属性，其中包含目录的文件和子文件夹的列表。在某些情况下，NTFS索引还可以包括已删除的文件和文件夹，在执行事件响应或取证时非常方便。</p><p> It is unclear why accessing this attribute corrupts the drive, and Jonas told BleepingComputer that a Registry key that would help diagnose the issue doesn&#39;t work.</p><p> 目前尚不清楚为什么访问此属性会损坏驱动器，乔纳斯告诉BleepingComputer，有助于诊断问题的注册表项不起作用。</p><p> &#39;I have no idea why it corrupts stuff and it would be a lot of work to find out because the reg key that should BSOD on corruption does not work. So, I&#39;ll leave it to the people with the source code,&#39; Jonas told BleepingComputer.</p><p> ＆＃39;我不知道为什么它会破坏内容，并且要找出很多工作，因为应该对破坏进行BSOD的reg密钥不起作用。因此，我将其与源代码一起交给人们，乔纳斯告诉BleepingComputer。</p><p> After running the command in the Windows 10 command prompt and hitting Enter, the user will see an error message stating, &#34;The file or directory is corrupted and unreadable.&#34;</p><p> 在Windows 10命令提示符中运行命令并按Enter后，用户将看到一条错误消息，指出＆＃34;文件或目录已损坏且不可读。</p><p> Windows 10 will immediately begin displaying notifications prompting the user to restart their PC and repair the corrupted disk volume. On reboot,  the Windows check disk utility runs and starts repairing the hard drive, as demonstrated in the video below.</p><p> Windows 10将立即开始显示通知，提示用户重新启动PC并修复损坏的磁盘卷。重新启动后，Windows检查磁盘实用程序将运行并开始修复硬盘驱动器，如以下视频所示。</p><p>  After the drives become corrupted, Windows 10 will generate errors in the Event Log stating that the Master File Table (MFT) for the particular drive contains a corrupted record.</p><p>  驱动器损坏后，Windows 10将在事件日志中生成错误，指出特定驱动器的主文件表（MFT）包含损坏的记录。 </p><p>  BleepingComputer&#39;s tests also show that you can use this command on any drive, not only the C: drive and that drive will subsequently become corrupted.</p><p>BleepingComputer的测试还显示，您可以在任何驱动器上使用此命令，不仅可以在C：驱动器上使用，而且该驱动器随后将损坏。</p><p>  In tests conducted by BleepingComputer , threat actors can use the command maliciously in various PoC exploits.</p><p>  在BleepingComputer进行的测试中，威胁参与者可以在各种PoC攻击中恶意使用该命令。</p><p> One striking finding shared by Jonas with us was that a crafted Windows shortcut file (.url) that had its  icon location set to  C:\:$i30:$bitmap would trigger the vulnerability  even if the user never opened the file!</p><p> Jonas与我们共享的一个惊人发现是，将其图标位置设置为C：\：$ i30：$ bitmap的精制Windows快捷方式文件（.url）会触发漏洞，即使用户从未打开过该文件！</p><p> As observed by BleepingComputer, as soon as this shortcut file is downloaded on a Windows 10 PC, and the user views the folder it is present in, Windows Explorer will attempt to display the file&#39;s icon.</p><p> 如BleepingComputer所观察到的那样，一旦在Windows 10 PC上下载了此快捷方式文件，并且用户查看了该快捷方式文件所在的文件夹，Windows资源管理器就会尝试显示该文件的图标。</p><p> To do this, Windows Explorer would attempt to access the crafted icon path inside the file in the background, thereby corrupting the NTFS hard drive in the process.</p><p> 为此，Windows资源管理器将尝试在后台访问文件内的预制图标路径，从而在此过程中损坏NTFS硬盘驱动器。</p><p> Next, &#34;restart to repair hard drive&#34; notifications start popping up on the Windows PC—all this without the user even having opened or double-clicked on the shortcut file.</p><p> 接下来，＆＃34;重新修复硬盘驱动器＆＃34;通知开始在Windows PC上弹出-所有这一切都无需用户打开或双击快捷方式文件。</p><p>  Creative attackers can also deliver this payload in a variety of ways to the victim.</p><p>  富有创造力的攻击者还可以通过多种方式将这种有效载荷传递给受害者。 </p><p> While the same-origin policy on most browsers would limit such attacks being served from a remote server (e.g., a remote HTML document referencing  file:///C:/:$i30:$bitmap), creative means exist to work around such restrictions.</p><p>虽然大多数浏览器的同源策略会限制从远程服务器提供的此类攻击（例如，引用file：/// C：/：$ i30：$ bitmap的远程HTML文档），但存在创造性的方法来解决此类问题限制。</p><p> The researcher  briefly stated that other vectors could be used to trigger this exploit remotely, such as via crafted HTML pages that embed resources from network shares or shared drives that have references to the offending  $i30 path.</p><p> 研究人员简要指出，可以使用其他向量来远程触发此攻击，例如通过精心制作的HTML页面，这些页面嵌入来自网络共享的资源或共享了引用了有问题的$ i30路径的驱动器。</p><p> In some cases, according to the researcher, it is possible to corrupt the  NTFS Master File Table (MFT).</p><p> 在某些情况下，根据研究人员的说法，有可能损坏NTFS主文件表（MFT）。</p><p>  In  some tests, after the Windows 10 chkdsk utility had &#34;repaired&#34; the hard drive errors on reboot, the contents of the exploit file, in this case, the crafted Windows shortcut with its icon set to  C:\:$i30:$bitmap would be cleared and replaced with empty bytes.</p><p>  在某些测试中，Windows 10的Chkdsk实用程序已修复＆＃34;如果重新启动时出现硬盘错误，则将清除漏洞利用文件的内容，在这种情况下，将清除其图标设置为C：\：$ i30：$ bitmap的精心制作的Windows快捷方式，并替换为空字节。</p><p> This means the crafted Windows shortcut file was enough to pull a one-off attack if this happens.</p><p> 这意味着精心制作的Windows快捷方式文件足以在发生这种情况时对其进行一次一次性攻击。</p><p> Besides, a victim is not likely to download a Windows shortcut ( .url) file from the internet.</p><p> 此外，受害者不太可能从互联网上下载Windows快捷方式（.url）文件。</p><p> To make the attack more realistic and persistent, attackers could trick users into downloading a ZIP archive to deliver the crafted file.</p><p> 为了使攻击更加真实和持久，攻击者可能会诱骗用户下载ZIP归档文件以交付精心制作的文件。 </p><p> An attacker can, for example, sneak in their malicious Windows shortcut file with a large number of legitimate files inside a ZIP archive.</p><p>例如，攻击者可以利用ZIP存档中的大量合法文件，潜入其恶意Windows快捷方式文件。</p><p> Not only is a user more likely to download a ZIP file, but the ZIP file is likely to trigger the exploit every single time it is extracted.</p><p> 不仅用户更有可能下​​载ZIP文件，而且ZIP文件每次提取时都可能触发漏洞利用。</p><p>  This is because the compressed (and possibly encrypted) contents of the ZIP file, including the Windows shortcut, would not trigger the exploit unless extracted.</p><p>  这是因为除非解压缩，否则ZIP文件的压缩（并可能加密）内容（包括Windows快捷方式）将不会触发漏洞利用。</p><p> And even when extracted, the hard drive repairing process would empty the extracted Windows shortcut file without touching the compressed copy present inside the ZIP archive until the user attempts to re-extract the ZIP.</p><p> 甚至在解压缩后，硬盘驱动器修复过程也会清空提取的Windows快捷方式文件，而不会触及ZIP存档中存在的压缩副本，直到用户尝试重新提取ZIP为止。</p><p> According to sources in the infosec community, serious vulnerabilities like these have been known for years and reported to Microsoft earlier but remain unpatched.</p><p> 根据信息安全社区的消息来源，类似的严重漏洞已为人所知多年，并已较早报告给Microsoft，但仍未修复。</p><p> BleepingComputer reached out to Microsoft to learn if they knew of the bug already and if they would fix the bug.</p><p> BleepingComputer与Microsoft联系，以了解他们是否已经知道该错误以及是否会修复该错误。</p><p> “Microsoft has a customer commitment to investigate reported security issues and we will provide updates for impacted devices as soon as possible,” a Microsoft spokesperson told BleepingComputer.</p><p> 微软发言人对BleepingComputer表示：``微软有客户承诺调查已报告的安全问题，我们将尽快为受影响的设备提供更新。'' </p></div><div id="story_share_this"><div class="sharethis-inline-share-buttons"></div></div><div class="text-break sotry_link page_narrow"><a target="_blank" href="https://www.bleepingcomputer.com/news/security/windows-10-bug-corrupts-your-hard-drive-on-seeing-this-files-icon/">https://www.bleepingcomputer.com/news/security/windows-10-bug-corrupts-your-hard-drive-on-seeing-this-files-icon/</a></div><div class="story_tags page_narrow"><button type="button" class="btn btn-light my_tag"><a href="/tag/windows/">#windows</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/硬盘/">#硬盘</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/损坏/">#损坏</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/corrupts/">#corrupts</a></button></div></div><div class="my_movie_list_item shadow p-3 mb-5 bg-white rounded"><button type="button" class="btn btn-link my_tag"><a href="/tag/web2.0/">#web2.0</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/google/">#google</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/设计/">#设计</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/创意/">#创意</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/摄影/">#摄影</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/图片/">#图片</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/游戏/">#游戏</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/软件/">#软件</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/视频/">#视频</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/手机/">#手机</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/广告/">#广告</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/iphone/">#iphone</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/网站/">#网站</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/免费/">#免费</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/下载/">#下载</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/windows/">#windows</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/苹果/">#苹果</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/微软/">#微软</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/apple/">#apple</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/firefox/">#firefox</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/blog/">#blog</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/音乐/">#音乐</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/博客/">#博客</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/wordpress/">#wordpress</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/恶搞/">#恶搞</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/qq/">#qq</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/艺术/">#艺术</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/web/">#web</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/工具/">#工具</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/分享/">#分享</a></button></div></div></div><div id="my_footer"><div class=""><a href="/tags/">tags</a> <a href="/users/">users</a></div>&copy; 2020 diglog.com </div></div></body></html>