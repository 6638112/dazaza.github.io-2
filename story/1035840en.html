<!doctype html><html lang="zh-hans"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>我对Ruby类一无所知What I didn't know about Ruby Classes</title><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"><link rel="stylesheet" href="/img/css.css?random="><link data-rh="true" rel="icon" href="/img/favicon.ico"/><script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?03c1a0f31299b4a2fbb83c34d6beaac9";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script><script data-ad-client="ca-pub-6067137220025946" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script type="text/javascript" src="https://platform-api.sharethis.com/js/sharethis.js#property=5effb96910009800120b8d4d&product=inline-share-buttons" async="async"></script></head><body><div id="my_header"><div class="container"><nav class="navbar navbar-expand-lg"><a class="navbar-brand" href="/"><img alt="diglog" src="/img/logo.v1.gif" class="rounded-sm"></a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarNavAltMarkup"><div class="navbar-nav"></div></div></nav></div></div><div class="container"><div id="my_content"><h1 class="page_narrow">What I didn't know about Ruby Classes<br/>我对Ruby类一无所知</h1><div class="row"><div class="col-lg-12 col-12"><div class="my_story_list_item shadow p-3 mb-5 bg-white rounded"><div class="story_page_pub_time page_narrow">2020-11-22 08:57:28</div><div class="story_img_container"><a href="http://img2.diglog.com/img/2020/11/11c826cfa4b68a0727ed56dfc94a9e82.jpeg"><img src="http://img2.diglog.com/img/2020/11/11c826cfa4b68a0727ed56dfc94a9e82.jpeg" class="img-fluid my_story_img" onerror="this.style.display='none'"></a></div><div class="page_narrow text-break page_content"><p>I’ve always had this feeling that while learning Ruby and Rails, there were tons of little notions that I didn’t really understood. I’m used to write things in order to learn them so here is a series of short articles about what I didn’t know.</p><p>我一直有这样的感觉，在学习Ruby和Rails时，有很多我不太了解的小概念。我习惯于写东西以学习它们，所以这里有一些简短的文章，介绍了我所不了解的内容。</p><p>  The class Class inherits directly from Module, and adds to it all the behavior related to instances. Long story short, Modules are used to add methods to one or several Classes of your app, and Classes are used to managed your objects’ properties.</p><p>  类Class直接从Module继承，并向其添加与实例相关的所有行为。长话短说，模块用于向应用程序的一个或几个类添加方法，而类则用于管理对象的属性。</p><p>  Ps: This dia  gram is very very very minimalist and focus on Class, but Module and Object have a lot of other children.</p><p>  附言：此图非常非常简单，专注于Class，但是Module和Object还有很多其他子元素。</p><p>  In order to see the the ancestor of a Class, you can use the .superclass method :</p><p>  为了查看类的祖先，可以使用.superclass方法：</p><p>  And if you want to see all the superclasses of a particular class, you can use the .ancestors method :</p><p>  如果要查看特定类的所有超类，可以使用.ancestors方法：</p><p>  Here, the array includes all the superclasses of Class and this is what we call the  ancestor chain in ruby.</p><p>在这里，数组包括Class的所有超类，这就是我们所谓的ruby中的祖先链。</p><p>  In Ruby, when you define a new class, you are actually creating an instance of the class Class.</p><p>  在Ruby中，当您定义新类时，实际上是在创建Class类的实例。</p><p>  For example, here, we have just created a new class named Foo, which is an instance of the class Class and we can access to this instance by using the contant Foo. Following this logic, we can see that we could have created Foo like a casual object :</p><p>  例如，在这里，我们刚刚创建了一个名为Foo的新类，它是Class类的实例，我们可以使用竞争的Foo来访问该实例。按照这种逻辑，我们可以看到我们可以像偶然对象一样创建Foo：</p><p>   class MyExample   def say_hello  puts &#39;hello world&#39;  end end &gt;&gt; MyExample.ancestors =&gt; [MyExample, Object, Kernel, BasicObject] &gt;&gt; MyExample.new.say_hello =&gt; hello world &gt;&gt; MyExample.new.say_good_bye =&gt; NoMethodError</p><p>   class MyExample def say_hello将“ hello world”放置在末尾>> MyExample.ancestors => [MyExample，Object，Kernel，BasicObject] >> MyExample.new.say_hello => hello world >> MyExample.new.say_good_bye => NoMethodError</p><p> say_hello : When we call the  say_hello method on an instance of the  MyExample class, Ruby looks through the  MyExample class for a method named  say_hello, it finds it and return the appropriate result.</p><p> say_hello：当我们在MyExample类的实例上调用say_hello方法时，Ruby会在MyExample类中查找名为say_hello的方法，它将找到并返回适当的结果。</p><p> say_good_bye : If I call a  say_good_bye method, ruby will look into  MyExample for this method, it will not find it and then it will goes through the  ancestor chain passing through each parent at a time until  BasicObject to find a method called  say_good_bye.</p><p>say_good_bye：如果我调用say_good_bye方法，ruby将在MyExample中查找该方法，它将找不到它，然后它将一次遍历每个父对象的祖先链，直到BasicObject找到一个名为say_good_bye的方法。</p><p> Because the  say_good_bye method doesn’t exist in the  MyExample class or any of the ancestors, Ruby will return a NoMethodError.</p><p> 由于MyExample类或任何祖先都不存在say_good_bye方法，因此Ruby将返回NoMethodError。</p><p>  Adding a Module’s code to a Class can be done using the include, extend and prepend methods. Let’s focus on the two firsts as they are much more commons.</p><p>  可以使用include，extend和prepend方法将模块的代码添加到Class中。让我们关注两个第一，因为它们比较常见。</p><p>  As the doc says  When a class includes a module, module’s instance methods become available as instance methods of the class.</p><p>  就像医生说的那样，当一个类包含一个模块时，模块的实例方法就可以用作该类的实例方法。</p><p> module RandomModule  def say_thank_you  puts &#39;thank you&#39;   end end class RandomClass    include RandomModule end &gt;&gt; RandomClass.new.say_thank_you =&gt; thank you &gt;&gt; RandomClass.ancestors =&gt; [RandomClass, RandomModule, Object, Kernel, BasicObject]</p><p> 模块RandomModule def say_thank_you表示“谢谢”结束端类RandomClass包括RandomModule结束>> RandomClass.new.say_thank_you =>谢谢>> RandomClass.ancestors => [RandomClass，RandomModule，Object，Kernel，BasicObject]</p><p> Here you can also see that if we check the  ancestor chain of our  RandomClass, the  RandomModule appears !</p><p>在这里，您还可以看到，如果我们检查RandomClass的祖先链，则会显示RandomModule！</p><p> As we saw earlier, when we call the module’s method ( say_thank_you), Ruby will check in our  RandomClass class for the method, it will not find it so Ruby will go through each of the ancestors of the  RandomClass class in order to find the method.</p><p> 如我们先前所见，当我们调用模块的方法（say_thank_you）时，Ruby将在我们的RandomClass类中查找该方法，但找不到它，因此Ruby将遍历RandomClass类的每个祖先以找到该方法。 。</p><p>  I’ve always found obscure the difference between  extend and  include, but they are actually very different : extend adds the module’s method as class methods and not instance methods.</p><p>  我一直发现模糊和扩展和包含之间的区别，但是它们实际上是非常不同的：扩展将模块的方法添加为类方法，而不是实例方法。</p><p> module RandomModule  def say_thank_you  puts &#39;thank you&#39;   end end class RandomClass    extend RandomModule end &gt;&gt; RandomClass.new.say_thank_you =&gt;  NoMethodError &gt;&gt; RandomClass.say_thank_you =&gt; thank you &gt;&gt; RandomClass.ancestors =&gt; [RandomClass, Object, Kernel, BasicObject]</p><p> 模块RandomModule def say_thank_you将'谢谢'结束端类RandomClass扩展RandomModule结束>> RandomClass.new.say_thank_you => NoMethodError >> RandomClass.say_thank_you =>谢谢>> RandomClass.ancestors => [RandomClass，Object，Kernel，BasicObject ]</p><p> As you can see, the module is mixed with our  RandomClass, and it’s methods are not accessible at the instance level (RandomClass.new.method) but at the class level (RandomClass.method).</p><p> 如您所见，该模块与我们的RandomClass混合在一起，并且其方法不能在实例级别（RandomClass.new.method）上访问，而可以在类级别（RandomClass.method）上访问。</p><p>  module RandomModule  def say_thank_you  puts &#39;thank you&#39;   end end class RandomClass end &gt;&gt; RandomClass.new.say_thank_you =&gt;  NoMethodError &gt;&gt; new_instance = RandomClass.new &gt;&gt; new_instance.extend RandomModule &gt;&gt; new_instance.say_thank_you =&gt; thank you</p><p>模块RandomModule def say_thank_you将'谢谢'结束结束类RandomClass结束>> RandomClass.new.say_thank_you => NoMethodError >> new_instance = RandomClass.new >> new_instance.extend RandomModule >> new_instance.say_thank_you =>谢谢</p><p>  It means that you can always add and edit methods of a particular ancestor class. You can do it for classes that you have created yourself or even from classes which are part of Ruby.</p><p>  这意味着您始终可以添加和编辑特定祖先类的方法。您可以对自己创建的类甚至是Ruby的类进行此操作。</p><p> class String   def tell_my_size   self.size  end    def reverse  self.size  end end &gt;&gt; my_string = &#39;hello world&#39;  &gt;&gt; my_string.tell_my_size =&gt; 11 &gt;&gt; my_string.reverse =&gt; 11</p><p> 类字符串def tell_my_size self.size end def反向self.size end end >> my_string ='hello world'>> my_string.tell_my_size => 11 >> my_string.reverse => 11</p><p> We have added a new method to the String class and we have changed the behavior of the reverse method.  Note that it is of course dangerous to override other Classes this way ! Be very careful by doing so and always prefer to edit the existing classes directly.</p><p> 我们在String类中添加了一个新方法，并且更改了reverse方法的行为。注意，用这种方法覆盖其他类当然是危险的！这样做要非常小心，并且总是喜欢直接编辑现有的类。</p><p>  I know there are lots of other concepts around Classes but that’s all for this article, feel free to improve my explanation in the comments, I might add more concepts here in the future 👀</p><p>  我知道课程周围还有很多其他概念，但这仅是本文的内容，请随时在注释中完善我的解释，以后我可能会在此处添加更多概念👀</p><p> 👉 I’am also the maker of  stanza.dev that helps developers to learn coding concepts faster. Feel free to have a look 👨‍💻 👩‍💻</p><p>also我还是stanza.dev的制造商，该公司可帮助开发人员更快地学习编码概念。随意看看👨‍💻 👩‍💻</p></div><div id="story_share_this"><div class="sharethis-inline-share-buttons"></div></div><div class="text-break sotry_link page_narrow"><a target="_blank" href="https://dumas-olivier.medium.com/what-i-didnt-know-about-ruby-classes-9de64ee40d4d">https://dumas-olivier.medium.com/what-i-didnt-know-about-ruby-classes-9de64ee40d4d</a></div><div class="story_tags page_narrow"><button type="button" class="btn btn-light my_tag"><a href="/tag/ruby/">#ruby</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/方法/">#方法</a></button></div></div><div class="my_movie_list_item shadow p-3 mb-5 bg-white rounded"><button type="button" class="btn btn-link my_tag"><a href="/tag/web2.0/">#web2.0</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/google/">#google</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/设计/">#设计</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/创意/">#创意</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/摄影/">#摄影</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/图片/">#图片</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/游戏/">#游戏</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/软件/">#软件</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/视频/">#视频</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/手机/">#手机</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/广告/">#广告</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/iphone/">#iphone</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/网站/">#网站</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/免费/">#免费</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/下载/">#下载</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/windows/">#windows</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/苹果/">#苹果</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/微软/">#微软</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/apple/">#apple</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/blog/">#blog</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/firefox/">#firefox</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/音乐/">#音乐</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/博客/">#博客</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/wordpress/">#wordpress</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/恶搞/">#恶搞</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/艺术/">#艺术</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/qq/">#qq</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/web/">#web</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/工具/">#工具</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/分享/">#分享</a></button></div></div></div><div id="my_footer"><div class=""><a href="/tags/">tags</a> <a href="/users/">users</a></div>&copy; 2020 diglog.com </div></div></body></html>