<!doctype html><html lang="zh-hans"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>ESP8266上的模拟电视台 </title><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"><link rel="stylesheet" href="/img/css.css?random="><link data-rh="true" rel="icon" href="/img/favicon.ico"/><script data-ad-client="ca-pub-6067137220025946" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script type="text/javascript" src="https://platform-api.sharethis.com/js/sharethis.js#property=5effb96910009800120b8d4d&product=inline-share-buttons" async="async"></script>
<script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?03c1a0f31299b4a2fbb83c34d6beaac9";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script></head><body><div id="my_header"><div class="container"><nav class="navbar navbar-expand-lg"><a class="navbar-brand" href="/"><img alt="diglog" src="/img/logo.v1.gif" class="rounded-sm"></a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarNavAltMarkup"><div class="navbar-nav"></div></div></nav></div></div><div class="container"><div id="my_content"><h1 class="page_narrow">ESP8266上的模拟电视台 </h1><div class="row"><div class="col-lg-12 col-12"><div class="my_story_list_item shadow p-3 mb-5 bg-white rounded"><div class="story_page_pub_time page_narrow">2020-12-07 19:03:30</div><div class="story_img_container"><a href="http://img2.diglog.com/img/2020/12/391784ea5c4f5e33c928538802b3e08e.png"><img src="http://img2.diglog.com/img/2020/12/391784ea5c4f5e33c928538802b3e08e.png" class="img-fluid my_story_img" onerror="this.style.display='none'"></a></div><div class="page_narrow text-break page_content"><p>将天线挂在GPIO3 / RX上，将模拟电视调谐到频道3。打开ESP！</p><p>  此方法与esp8266ws2812i2s项目相同的方式使用I2S总线。区别在于它将输出波特率提高到80 MHz。我们设置了DMA缓冲区，并让CPU一次通过一行填充它们。 DMA中断一次填充一个字。 I2S总线将这些缓冲器移出80 MHz！</p><p> 您可能会说，但奈奎斯特说您不能以超过采样率1/2的频率发送或接收频率（在这种情况下为40 MHz）。在一定程度上是对的。有人认为这可能是泛音，但现实中发生的事情却有些陌生。您传输的所有内容实际上都被镜像为采样率（40 MHz）的1/2左右。因此，在80 MHz的位时钟上发送60 MHz会在60和20处产生一个波形。这不是完美的。一些频率高达80 MHz，而另一些则不然。</p><p> 我们将位模式存储在＆＃34; premodulated_table＆＃34;中。数组。它包含各种信号的比特流，例如＆＃34; sync＆＃34;级别或＆＃34; colorbust＆＃34;级别或任何视觉颜色。选择该表的每种颜色的长度为1408位，以便当在80 MHz的频率下一次发送一位时，它等于NTCS色度频率315.0 / 88.0 MHz或3.579545455 MHz的偶数倍。您可以通过精确地采用1408 / 80MHz = 17.6us * 3.579545 MHz = 63个周期来计算。方便地，它也可以算出通道3的亮度中心61.25 MHz的偶数倍。准确地说是17.6us * 61.25 MHz = 1078个周期！当您调制任意频率时，有时周期会变得非常不均匀。</p><p> 为了产生亮度（黑色和白色部分），我们调制61.25 MHz。如果我们生成一个强信号，则它被视为非常暗，而一个弱信号则被视为非常亮。这意味着当我们要发送同步脉冲时，我们将其调制得尽可能大...当我们要调制白色时，我们几乎不会发出任何信号。您会注意到的一件事是点浇。这是因为我们发送的信号太可怕了。色度信号非常脏，并且具有重复的强度模式。当色度排列到1408位宽的重复图案时，屏幕上的像素总数却没有。这将导致创建的图案向下滚动屏幕。</p><p> 为了产生颜色，我们需要在基带以上3.579MHz的色度信号中进行调制。在每行的开头，色度通过发色同步。这也设置了色度的水平。然后，在该行中，我们可以选择＆＃34; color＆＃34;在色度水平上系数较高或较低的系数。这决定了颜色的鲜艳程度。我们可以改变相位来改变颜色。</p><p> 这基本上是一个1位的抖动DAC，工作频率低于奈奎斯特频率，试图同时编码亮度和色彩。不用担心质量太差了。 </p><p>在MayCbTables.h / c中（用于生成/存储行缓冲状态机的表）在（生成/存储吗？）中，用于创建在线信号编码的类似表在synthtables.c中。</p><p> 用于设置DMA传输，在缓冲区为空时重新填充缓冲区以及根据帧缓冲区内容更改应发送哪种行的函数位于ntsc_broadcast.c中。这些功能处理所有调制。这将设置DMA，并在DMA完成一个块（等于一行）时调用一个中断。完成后，它将使用CbTable来决定要调用的函数以填充行。中断将继续执行DMA的下一行。</p><p>  custom_commands.c包含用于NTSC特定方面的自定义命令。使用通用的websockets界面，添加了两个命令。其中包括＆＃34; CO＆＃34;和＆＃34; CV＆＃34;设置操作模式（CO）并允许用户从Web界面（CV）更改调制表。</p><p>  以下演示屏幕可用。除非用户在网络浏览器中禁用此功能，否则它们通常会一个接一个地打勾（10个之后除外）。</p><p>  帧缓冲区复制测试的介绍和完成。当心，长时间运行此屏幕会导致崩溃。</p><p>  Web界面从esp8266ws2812i2s借用了Web界面。接通ESP的电源，连接到它，然后将Web浏览器指向http://192.168.4.1。它具有一个新按钮＆＃34; NTSC。＆＃34;这使您可以选择允许演示在屏幕之间继续进行或冻结在特定屏幕上。您可以指定屏幕。此外，对于RF测试，您可以堵塞一种颜色。每当卡纸设置为0或更高时，它就会关闭所有线条绘制逻辑，并简单地连续输出该颜色。这样可以防止电视机看到它，但是，您可以在其他RF设备上看到它。</p><p> 它还具有一个交互式Javascript Webworker系统，可让您编写代码以产生新的颜色！您可以创建一个新的比特流，当命中特定颜色时将传输该比特流。您可以编辑代码，并且在键入时有效。每次更改时，它都会自动重新启动Webworker。 </p><p>您只应输出-1或+1，因为这是ESP可以输出的全部。 然后，它将在您选择的频率区域上运行带有随机窗口的DFT。 增加DFT窗口，它将增加q（或精度）。 减少，它减少您的q。 这是为了帮助您了解电视等接收器如何真正理解信号，并帮助说明这是多么的古怪。  您可以使用此链接在自己的浏览器中尝试它：http://cnlohr.github.io/channel3/web/page/index.html单击NTSC并转到城镇。  对于所有3D和文本，我使用的是我的＆＃34; rawdraw＆＃34;的新修改版。 3D I＆m的库（http://github.com/cnlohr/rawdraw），使用定点数，单位值为256，低8位是小数部分。 </p></div><div id="story_share_this"><div class="sharethis-inline-share-buttons"></div></div><div class="text-break sotry_link page_narrow"><a target="_blank" href="https://github.com/cnlohr/channel3">https://github.com/cnlohr/channel3</a></div><div class="story_tags page_narrow"><button type="button" class="btn btn-light my_tag"><a href="/tag/模拟/">#模拟</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/tv/">#tv</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/信号/">#信号</a></button></div></div><div class="shadow p-3 mb-5 bg-white rounded clearfix"><div class="container"><div class="row"><div class="col-sm"><div><a target="_blank" href="/story/1038003.html"><img src="http://img2.diglog.com/img/2020/12/thumb_54170c7b87208396b2410f838de3120e.jpg" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1038003.html">我们生活在模拟中吗？ 机会约为50–50 </a></div><span class="my_story_list_date">2020-12-6 12:33</span></div><div class="col-sm"><div><a target="_blank" href="/story/1036504.html"><img src="http://img2.diglog.com/img/2020/11/thumb_cc96e9d8d26ca8bc3ad87b61614c997d.jpg" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1036504.html">计算机芯片可以模拟未来“比物理定律更快”</a></div><span class="my_story_list_date">2020-11-25 17:26</span></div><div class="col-sm"><div><a target="_blank" href="/story/1035943.html"><img src="http://img2.diglog.com/img/2020/11/thumb_fdc123c6d3db103ab198929505a13a24.jpg" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1035943.html">复用模拟分量系统上的卫星广播（1988）[视频]</a></div><span class="my_story_list_date">2020-11-23 0:56</span></div><div class="col-sm"><div><a target="_blank" href="/story/1035055.html"><img src="http://img2.diglog.com/img/2020/11/thumb_431e2b990983268b5d9ef9eecaa335d6.png" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1035055.html">在Clojure中模拟RAM</a></div><span class="my_story_list_date">2020-11-14 9:54</span></div></div></div></div><div class="my_movie_list_item shadow p-3 mb-5 bg-white rounded"><button type="button" class="btn btn-link my_tag"><a href="/tag/web2.0/">#web2.0</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/google/">#google</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/设计/">#设计</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/创意/">#创意</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/摄影/">#摄影</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/游戏/">#游戏</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/图片/">#图片</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/软件/">#软件</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/视频/">#视频</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/手机/">#手机</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/广告/">#广告</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/apple/">#apple</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/iphone/">#iphone</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/网站/">#网站</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/免费/">#免费</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/下载/">#下载</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/windows/">#windows</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/微软/">#微软</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/firefox/">#firefox</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/苹果/">#苹果</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/blog/">#blog</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/音乐/">#音乐</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/博客/">#博客</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/wordpress/">#wordpress</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/恶搞/">#恶搞</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/艺术/">#艺术</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/qq/">#qq</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/web/">#web</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/谷歌/">#谷歌</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/工具/">#工具</a></button></div></div></div><div id="my_footer"><div class=""><a href="/tags/">tags</a> <a href="/users/">users</a></div>&copy;2012-2021 diglog.com </div></div></body></html>