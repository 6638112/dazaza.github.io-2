<!doctype html><html lang="zh-hans"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>安全系统编程为何生锈</title><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"><link rel="stylesheet" href="/img/css.css?random="><link data-rh="true" rel="icon" href="/img/favicon.ico"/><script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?03c1a0f31299b4a2fbb83c34d6beaac9";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script><script data-ad-client="ca-pub-6067137220025946" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script type="text/javascript" src="https://platform-api.sharethis.com/js/sharethis.js#property=5effb96910009800120b8d4d&product=inline-share-buttons" async="async"></script></head><body><div id="my_header"><div class="container"><nav class="navbar navbar-expand-lg"><a class="navbar-brand" href="/"><img alt="diglog" src="/img/logo.v1.gif" class="rounded-sm"></a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarNavAltMarkup"><div class="navbar-nav"></div></div></nav></div></div><div class="container"><div id="my_content"><h1 class="page_narrow">安全系统编程为何生锈</h1><div class="row"><div class="col-lg-12 col-12"><div class="my_story_list_item shadow p-3 mb-5 bg-white rounded"><div class="story_page_pub_time page_narrow">2020-10-24 08:11:23</div><div class="story_img_container"><a href="http://img2.diglog.com/img/2020/10/c95c6640c04b0b64f58812e5c40b98fc.jpg"><img src="http://img2.diglog.com/img/2020/10/c95c6640c04b0b64f58812e5c40b98fc.jpg" class="img-fluid my_story_img" onerror="this.style.display='none'"></a></div><div class="page_narrow text-break page_content"><p>In  this series, we have explored the need for proactive measures to eliminate a class of vulnerabilities and walked through some examples of memory safety issues we’ve found in Microsoft code that could have been avoided with a different language. Now we’ll peek at why we think that  Rust represents the best alternative to C and C++ currently available.</p><p>在本系列中，我们探讨了采取主动措施消除一类漏洞的必要性，并介绍了我们在Microsoft代码中发现的一些使用其他语言本可以避免的内存安全问题的示例。现在，我们将了解为什么我们认为Rust代表了当前可用的C和C++的最佳替代方案。</p><p> First, there are plenty of fantastic memory safe languages already available and widely used inside and outside of Microsoft, including .NET languages like C# or F# and other languages like Swift, Go, and Python. We encourage anyone who is currently using C or C++ to consider whether one of these languages would be appropriate to use instead. We, however, are talking about the need for a safe  systems programming language (i.e., a language that can build systems other software runs on, like OS kernels). Such workloads need the speed and predictable performance that C, C++, and Rust provide. Languages which achieve memory safety through garbage collection are not ideal choices for systems programming because their runtimes can lead to unpredictable performance and unnecessary overhead.</p><p>首先，已经有大量出色的内存安全语言可用，并在Microsoft内外广泛使用，包括.NET语言(如C#或F#)以及其他语言(如SWIFT、GO和Python)。我们鼓励当前使用C或C++的任何人考虑是否适合使用这些语言中的一种。然而，我们谈论的是对安全系统编程语言的需求(即，一种可以构建其他软件运行在其上的系统的语言，如操作系统内核)。这样的工作负载需要C、C++和Rust提供的速度和可预测的性能。通过垃圾收集实现内存安全的语言不是系统编程的理想选择，因为它们的运行时可能导致不可预测的性能和不必要的开销。</p><p>  When thinking about why Rust is a good alternative, it’s good to think about what we can’t afford to give up by switching from C or C++ — namely performance and control. Rust, just like C and C++ has a minimal and optional “runtime”. Rust’s standard library depends on libc for platforms that support it just like C and C++, but the standard library is also optional so running on platforms without an operating system is also possible.</p><p>当思考为什么Rust是一个很好的选择时，最好考虑一下从C或C++切换到我们不能放弃的东西--即性能和控制。就像C和C++一样，Ruust有一个最小且可选的“运行时”。Rust的标准库依赖于像C和C++一样支持它的平台的libc，但是标准库也是可选的，所以也可以在没有操作系统的平台上运行。</p><p> Rust, just like C and C++, also gives the programmer fine-grained control on when and how much memory is allocated allowing the programmer to have a very good idea of exactly how the program will perform every time it is run. What this means forperformance in terms of raw speed, control, and predictability, is that Rust, C,and C++ can be thought of in similar terms.</p><p>与C和C++一样，Rust也为程序员提供了对何时分配内存以及分配多少内存的细粒度控制，从而使程序员能够非常清楚地了解程序每次运行时将如何执行。就原始速度、控制和可预测性而言，这对性能意味着什么，那就是Rust、C和C++可以用类似的术语来考虑。</p><p>  What separates Rustfrom C and C++ is its strong safety guarantees. Unless explicitly opted-out ofthrough usage of the “unsafe” keyword, Rust is completely memory safe, meaningthat the issues we illustrated in the  previouspost are impossible to express. In a future post, we’ll revisit thoseexamples to see how Rust prevents those issues usually without adding anyruntime overhead. As  we’veseen, roughly 70% of the security issues that the MSRC assigns a CVE to arememory safety issues. This means that if that software had been written inRust, 70% of these security issues would most likely have been eliminated. Andwe’re not the only company to  have reported such findings.</p><p>Rust语言与C和C++的不同之处在于其强大的安全性保证。除非明确选择不使用“不安全”关键字，否则Rust是完全内存安全的，这意味着我们在上一篇文章中说明的问题是无法表达的。在以后的帖子中，我们将重温这些示例，看看Rust通常是如何在不增加任何运行时开销的情况下预防这些问题的。正如我们所看到的，MSRC分配给CVE的大约70%的安全问题都是内存安全问题。这意味着如果该软件是用Rust编写的，那么这些安全问题中的70%很可能已经被消除了。我们并不是唯一一家报道过这样的发现的公司。</p><p> In systems programming, sometimes the programmer must perform operations that cannot be statically verified as safe. Rust gives the programmer the tools to wrap these operations in safe abstractions, meaning that what was once relegated to code comments or convention can be statically enforced by the Rust compiler. Furthermore, the memory-unsafe operations must be explicitly marked as such, dramatically reducing the surface area security professionals must scrutinize for memory safety vulnerabilities.</p><p>在系统编程中，有时程序员必须执行无法静态验证为安全的操作。Rust为程序员提供了将这些操作包装在安全抽象中的工具，这意味着曾经归入代码注释或约定的内容可以由Rust编译器静态强制执行。此外，必须明确标记内存不安全操作，从而大大减少安全专业人员必须仔细检查内存安全漏洞的外围应用。</p><p>  While Rust initiallypiqued the interest of the MSRC due to the reasons above, other teams at Microsofthave started adopting Rust for other reasons.</p><p>由于上述原因，Rust最初引起了MSRC的兴趣，而微软的其他团队则出于其他原因开始采用Rust。</p><p> According to an internal survey, the top reason for adoption was “correctness” – an extension of Rust’s safety guarantees that work towards making true the adage “if it compiles, then it works”.</p><p>根据一项内部调查，采用该软件的首要原因是“正确性”--这是拉斯特安全保证的延伸，有助于实现“如果它编译了，那么它就能工作”这句谚语。</p><p> Rust statically enforces many properties of a program beyond memory safety, including null pointer safety and data race safety (i.e., no unsynchronized access of a piece of memory from two or more threads).</p><p>Rust在内存安全之外静态地强制执行程序的许多属性，包括空指针安全和数据竞争安全(即，不从两个或更多线程不同步地访问一块内存)。</p><p> Many teams at Microsoft have found that Rust’s rich type system makes writing expressive programs possible. Concepts like enums with associated data and a powerful trait system further enforce Rust’s goal of making programs as bug-free as possible.</p><p>微软的许多团队都发现，Rust的丰富类型系统使编写富有表现力的程序成为可能。带关联数据的枚举和强大的特征系统等概念进一步强化了Rust使程序尽可能无bug的目标。</p><p> Rust’s existing community is a huge benefit to the language. Much of the power of a language comes from outside of its core through libraries, tooling, and learning materials. While Rust is still a young language, it boasts a healthy ecosystem with an active and open compiler and language development process, and it shows the ability to both promote a strong open source community and to support production users. This gives us more reason to believe the language has a bright future ahead of it.</p><p>Rust现有的社区对这种语言来说是一个巨大的好处。语言的大部分功能来自于其核心之外的库、工具和学习材料。虽然Rust还是一种年轻的语言，但它拥有一个健康的生态系统，拥有活跃和开放的编译器和语言开发过程，它显示了既能促进强大的开源社区，又能支持生产用户的能力。这给了我们更多的理由相信这门语言有一个光明的未来。</p><p> All of this explainsRust’s track record of having topped  Stack Overflow’s list of most lovedlanguages for the past fouryears. While it’s too early to say what Rust adoption looks like at a scale aslarge as Microsoft’s engineering organization, early adoption of Rust hasgenerally been very positive.</p><p>所有这些都解释了Rust在过去四年中荣登Stack Overflow最受欢迎语言排行榜榜首的记录。虽然现在就断言Rust在微软工程组织的规模上是什么样子还为时过早，但Rust的早期采用总体上是非常积极的。</p><p>  We believe Rustchanges the game when it comes to writing safe systems software. Rust providesthe performance and control needed to write low-level systems, while empoweringsoftware developers to write robust, secure programs.</p><p>我们相信，当涉及到编写安全系统软件时，Rust会改变游戏规则。RUST提供编写低级系统所需的性能和控制，同时使软件开发人员能够编写健壮、安全的程序。</p><p> While researchingRust, we found some issues that gave and continue to give us pause. Some ofthese concerns include how to regulate the usage of the “unsafe” superset ofRust at scale, lack of first-class interoperability with C++, andinteroperability with existing Microsoft tooling. We’ll be blogging about manyof these in the future as they do pose challenges for adoption at the scale ofMicrosoft, and we want to involve the Rust and wider software communities inhelping us find solutions that work for everyone.</p><p>在研究锈蚀的过程中，我们发现了一些让我们并将继续犹豫的问题。其中一些问题包括如何规模化地管理“不安全”的Rust超集的使用，缺乏与C++的一流互操作性，以及与现有Microsoft工具的互操作性。我们将在未来的博客中记录其中的许多内容，因为它们确实对微软规模的采用构成了挑战，我们希望让Rust和更广泛的软件社区参与帮助我们找到适用于所有人的解决方案。</p><p> But we’re excitedabout the possibilities. While there are many questions still left to figureout about how Rust fits into the overall Microsoft engineering story, we encourageothers to join us in taking a serious look at the language for their systemsprogramming needs.</p><p>但我们对这些可能性感到兴奋。虽然关于Rust如何适应整个微软工程故事还有很多问题要解决，我们鼓励其他人和我们一起认真研究一下适合他们系统编程需要的语言。</p></div><div id="story_share_this"><div class="sharethis-inline-share-buttons"></div></div><div class="text-break sotry_link page_narrow"><a target="_blank" href="https://msrc-blog.microsoft.com/2019/07/22/why-rust-for-safe-systems-programming/">https://msrc-blog.microsoft.com/2019/07/22/why-rust-for-safe-systems-programming/</a></div><div class="story_tags page_narrow"><button type="button" class="btn btn-light my_tag"><a href="/tag/编程/">#编程</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/rust/">#rust</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/系统/">#系统</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/safe/">#safe</a></button></div></div><div class="shadow p-3 mb-5 bg-white rounded clearfix"><div class="container"><div class="row"><div class="col-sm"><div><a target="_blank" href="/story/1030555.html"><img src="http://img2.diglog.com/img/2020/10/thumb_66677dbb1fb90331051acf350be81b57.png" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1030555.html">循序渐进：增量编程</a></div><span class="my_story_list_date">2020-10-22 22:33</span></div><div class="col-sm"><div><a target="_blank" href="/story/1030394.html"><img src="http://img2.diglog.com/img/2020/10/thumb_2c2bdfa2dc7529c1988bef213a9e80ef.png" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1030394.html">Kite将其AI代码完成从2种扩展到13种编程语言</a></div><span class="my_story_list_date">2020-10-22 9:12</span></div><div class="col-sm"><div><a target="_blank" href="/story/1029787.html"><img src="http://img2.diglog.com/img/2020/10/thumb_e53752bd18d47c7f19ff44e8b34448be.jpg" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1029787.html">如何学习编程：成为软件工程师的路线图</a></div><span class="my_story_list_date">2020-10-19 20:54</span></div><div class="col-sm"><div><a target="_blank" href="/story/1029744.html"><img src="http://img2.diglog.com/img/2020/10/thumb_2b1c3f1133dbde2d6b5698f13be2ca90.png" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1029744.html">克里斯·拉特纳：计算和编程语言的未来[音频]</a></div><span class="my_story_list_date">2020-10-19 15:17</span></div></div></div></div><div class="my_movie_list_item shadow p-3 mb-5 bg-white rounded"><button type="button" class="btn btn-link my_tag"><a href="/tag/web2.0/">#web2.0</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/google/">#google</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/设计/">#设计</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/游戏/">#游戏</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/创意/">#创意</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/apple/">#apple</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/苹果/">#苹果</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/摄影/">#摄影</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/软件/">#软件</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/美国/">#美国</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/iphone/">#iphone</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/图片/">#图片</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/手机/">#手机</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/视频/">#视频</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/广告/">#广告</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/免费/">#免费</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/谷歌/">#谷歌</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/网站/">#网站</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/windows/">#windows</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/微软/">#微软</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/下载/">#下载</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/firefox/">#firefox</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/音乐/">#音乐</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/linux/">#linux</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/blog/">#blog</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/博客/">#博客</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/程序/">#程序</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/艺术/">#艺术</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/web/">#web</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/wordpress/">#wordpress</a></button></div></div></div><div id="my_footer"><div class=""><a href="/tags/">tags</a> <a href="/users/">users</a></div>&copy; 2020 diglog.com </div></div></body></html>