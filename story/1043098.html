<!doctype html><html lang="zh-hans"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>关于复制驱动的编程 </title><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"><link rel="stylesheet" href="/img/css.css?random="><link data-rh="true" rel="icon" href="/img/favicon.ico"/><script data-ad-client="ca-pub-6067137220025946" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script type="text/javascript" src="https://platform-api.sharethis.com/js/sharethis.js#property=5effb96910009800120b8d4d&product=inline-share-buttons" async="async"></script>
<script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?03c1a0f31299b4a2fbb83c34d6beaac9";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script></head><body><div id="my_header"><div class="container"><nav class="navbar navbar-expand-lg"><a class="navbar-brand" href="/"><img alt="diglog" src="/img/logo.v1.gif" class="rounded-sm"></a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarNavAltMarkup"><div class="navbar-nav"></div></div></nav></div></div><div class="container"><div id="my_content"><h1 class="page_narrow">关于复制驱动的编程 </h1><div class="row"><div class="col-lg-12 col-12"><div class="my_story_list_item shadow p-3 mb-5 bg-white rounded"><div class="story_page_pub_time page_narrow">2021-01-04 18:41:41</div><div class="page_narrow text-break page_content"><p>很久以前，有人用“ entha_saava”句柄在Hacker News上发布了这个问题：</p><p> 有知识的人可以解释一下Lisp REPL与Python / Ruby REPL有何不同吗？ REPL驱动的开发的区别点是什么？</p><p> 答案是，存在一种特殊的编程，您可以在运行时通过与之交互来构建程序，并且某些语言和运行时从头开始设计以支持这种编程。</p><p>  为什么不？这就是entha_saava问题的症结所在，对吗？这些repl驱动的编程系统是什么，什么使它们与Python和Ruby以及其他提供arepl的语言不同？</p><p>  repl这个词是缩写，代表read-eval-printloop。该术语来自Lisp的历史。从六十年代开始，使用Lisp的标准方法就是启动语言处理器，在其提示下键入表达式，然后等待它评估表达式并打印结果，然后再提示另一个表达式。阅读，评估，打印。循环。</p><p> 如今，代表们风靡一时。每种语言及其兄弟提供了一个副本。有一个网站repl.it，其目的是提供所有代表。</p><p> 当然，它实际上并没有提供所有代表。具有讽刺意味的是，它没有提供任何规范的repl驱动开发环境：Common Lisp和Smalltalk。 </p><p>这使我们回到entha_saava的问题：如果Common Lisp和Smalltalk是repl驱动的环境，而Python和Ruby不是，那么有什么区别呢？ Lisp和Smalltalk有什么Python和Ruby没有的？</p><p> 他们拥有的是一种语言和运行时系统，它是从头开始设计的，假设您将要通过启动语言引擎并与之交谈，教它如何交互地成为您的程序，并在运行时对其进行更改来开发程序。</p><p> 我已经听到反对意见的提出。我以前见过。是的，每种带有表示语言的语言都可以在其中执行某些操作。显然是这样；如果不是，那么repl将完全无用。</p><p> 能够在repl中执行某些操作不会使引擎成为repl驱动的编程环境。老式的Lisp和Smalltalk环境与众不同的是，您可以在repl中进行所有操作。他们对您的工作没有任何不必要的限制；如果语言和运行时可以做到，那么repl可以做到。</p><p> 例如，您可以通过在repl提示符下评估以下表达式，要求Clozure Common Lisp的当前版本从头开始重建自身：</p><p>   关键不是您要一直这样一直重建CCL。关键是，REPL的功能没有人为限制。可以从代表那里获得开发系统的全部功能。</p><p> 这是我在使用更新的，更少内容的回复时首先要注意的事情之一：我总是遇到无法从代表那里完成的事情。 </p><p>不过，这不仅仅意味着不受限制。正确支持交互式编程意味着该语言及其运行时具有积极的功能，可以在程序运行时对其进行更改。</p><p>  定义一个函数foo，该函数调用尚未定义的其他函数bar。现在调用foo。怎么了？</p><p> 显然，对foo的调用会中断，因为未定义bar。但是当它破裂时会发生什么呢？接下来发生什么？</p><p> 如果您最喜欢的代表是Python或Ruby或其他几十个现代代表，则答案很可能是打印出错误消息并返回其提示。在某些情况下，它可能会崩溃。</p><p>  这个问题的答案是复制驱动程序设计的“差异点”。在老式的Lisp或Smalltalk环境中，foo中的中断会使您陷入中断循环。</p><p> 中断循环是功能齐全的副本，具有主副本的所有工具，但它存在于中断功能的动态环境中。在breakloop中，您可以在挂起的调用堆栈上漫游，并检查每个堆栈帧中按词法可见的所有变量。实际上，您可以检查正在运行的程序中的所有实时数据。</p><p> 此外，您可以编辑程序中的所有实时数据。如果您认为中断是由某个特定变量或字段中的错误值引起的，则可以以交互方式更改它并恢复已暂停的功能。如果现在可以正常工作，那就恭喜！你发现问题了！ </p><p>而且，由于整个语言和开发系统都是可用的，不受限制，因此在repl中，您可以定义缺少的功能栏，恢复foo，并获得明智的结果。</p><p> 实际上，这是Lisp和Smalltalk圈子中众所周知的一种编程风格，您可以在其中定义一个顶级函数，并调用尚未存在的其他函数，然后在产生的中断循环中定义这些函数。当您已经知道应该如何执行程序时，这是一种快速的方法。</p><p> 如果您使用的是老式Lisp或Smalltalk系统，那么这听起来对您来说很明显，但是这种反应并不常见。惊喜更普遍，甚至令人怀疑：有什么收获？</p><p> 要注意的是，您的语言系统的设计人员必须在规划阶段就考虑到该设施。事实发生后，再将其附加在驱动器上，就不会对它造成干扰。 Breakloop需要以交互的方式完全访问整个开发系统，并且将计算及其调用堆栈挂在breakloop的环境中。</p><p> 让我们再举一个旨在支持交互式编程的工具示例。再一次，在您最喜欢的副本中尝试以下操作：</p><p> 定义数据类型。我的意思是一个类，一个结构，一个记录类型-您喜欢的语言支持的任何用户定义的类型。做一些实例。编写一些函数（或方法，过程或任何其他方法）以对其进行操作。</p><p>  您的语言运行时是否注意到类型的定义已更改？是否意识到现有实例具有新定义？当某个东西碰到其中一个时，它会自动重新初始化它以符合新定义吗？或者，如果它不知道该怎么做，它是否会启动一个中断循环并询问您如何处理？ </p><p>如果答案是“是”，则说明您使用的是Lisp或Smalltalk系统。如果答案是“否”，那么您就缺少了REPL驱动的开发中的关键要素。</p><p> 请记住：关键是要以交互方式支持编程。您不希望因为更改了定义而不得不终止程序并从头开始重建程序。真傻添加和更改定义是您的大部分工作！如果您的开发环境将支持交互式开发，则它最好知道在更改某些定义时如何保持程序运行。</p><p> 老式的Lisp和Smalltalk系统知道该怎么做。还有一些其他类型的系统，大多数是较旧的系统，都知道该怎么做。</p><p> 这些不是左领域之外的古怪新想法。他们已经存在了半个世纪。它们为交互式开发中的生产力做出了重大贡献。</p><p>  现在，并不是每个程序员都喜欢这种开发。一些程序员更喜欢将开发视为设计，规划，制作蓝图以及在工作台上组装零件的过程。没什么错。实际上，已经建立了一个数十亿美元的国际产业。</p><p> 但是，如果您更喜欢交互式开发，如果对您来说更自然，那么它可以使您的工作效率大大提高，更不用说工作中的快乐了。</p><p> 具有适当的repl驱动环境的交互式开发是例外。大多数编程是通过其他方式完成的。 </p><p>结果，那里有很多程序员甚至不曾听说过它，甚至不知道它的存在。 我的直觉是，这些程序员中有一部分会喜欢得到良好支持的交互式编程，并且如果他们知道这是什么，他们将从中受益。  也许如果有足够的程序员接触这种编程风格，那么我们将开始看到包含这种编程风格的新工具。 </p></div><div id="story_share_this"><div class="sharethis-inline-share-buttons"></div></div><div class="text-break sotry_link page_narrow"><a target="_blank" href="http://mikelevins.github.io/posts/2020-12-18-repl-driven/">http://mikelevins.github.io/posts/2020-12-18-repl-driven/</a></div><div class="story_tags page_narrow"><button type="button" class="btn btn-light my_tag"><a href="/tag/编程/">#编程</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/驱动/">#驱动</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/driven/">#driven</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/repl/">#repl</a></button></div></div><div class="shadow p-3 mb-5 bg-white rounded clearfix"><div class="container"><div class="row"><div class="col-sm"><div><a target="_blank" href="/story/1042507.html"><img src="http://img2.diglog.com/img/2020/12/thumb_7041d150fa36d7859b84c182cc5453b7.png" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1042507.html">从头开始学习3D计算机图形学编程 </a></div><span class="my_story_list_date">2020-12-30 19:42</span></div><div class="col-sm"><div><a target="_blank" href="/story/1042428.html"><img src="http://img2.diglog.com/img/2020/12/thumb_242536e68901773d70ba63d163290c6d.png" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1042428.html">R中的Lambda.r函数式编程 </a></div><span class="my_story_list_date">2020-12-30 2:10</span></div><div class="col-sm"><div><a target="_blank" href="/story/1042334.html"><img src="http://img2.diglog.com/img/2020/12/thumb_c7fc978b44daba29602b4e0017011bc6.jpg" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1042334.html">Erlang：安静地为WhatsApp和WeChat提供动力的编程语言 </a></div><span class="my_story_list_date">2020-12-29 14:56</span></div><div class="col-sm"><div><a target="_blank" href="/story/1042300.html"><img src="http://img2.diglog.com/img/2020/12/thumb_fda613a8e04cc289031708d3a78cb8a2.png" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1042300.html">教授（编程语言）不幸的部分 </a></div><span class="my_story_list_date">2020-12-29 8:28</span></div></div></div></div><div class="my_movie_list_item shadow p-3 mb-5 bg-white rounded"><button type="button" class="btn btn-link my_tag"><a href="/tag/web2.0/">#web2.0</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/google/">#google</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/设计/">#设计</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/创意/">#创意</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/摄影/">#摄影</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/游戏/">#游戏</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/图片/">#图片</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/软件/">#软件</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/视频/">#视频</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/手机/">#手机</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/广告/">#广告</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/apple/">#apple</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/iphone/">#iphone</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/网站/">#网站</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/免费/">#免费</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/下载/">#下载</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/windows/">#windows</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/微软/">#微软</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/firefox/">#firefox</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/苹果/">#苹果</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/blog/">#blog</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/音乐/">#音乐</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/博客/">#博客</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/wordpress/">#wordpress</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/恶搞/">#恶搞</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/艺术/">#艺术</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/qq/">#qq</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/web/">#web</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/谷歌/">#谷歌</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/工具/">#工具</a></button></div></div></div><div id="my_footer"><div class=""><a href="/tags/">tags</a> <a href="/users/">users</a></div>&copy;2012-2021 diglog.com </div></div></body></html>