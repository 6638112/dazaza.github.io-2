<!doctype html><html lang="zh-hans"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Rga：Ripgrep，但也可以搜索PDF，电子书，Office文档，zip，tar.gz Rga: Ripgrep, but also search in PDFs, E-Books, Office documents, zip, tar.gz</title><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"><link rel="stylesheet" href="/img/css.css?random="><link data-rh="true" rel="icon" href="/img/favicon.ico"/><script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?03c1a0f31299b4a2fbb83c34d6beaac9";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script><script data-ad-client="ca-pub-6067137220025946" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script type="text/javascript" src="https://platform-api.sharethis.com/js/sharethis.js#property=5effb96910009800120b8d4d&product=inline-share-buttons" async="async"></script></head><body><div id="my_header"><div class="container"><nav class="navbar navbar-expand-lg"><a class="navbar-brand" href="/"><img alt="diglog" src="/img/logo.v1.gif" class="rounded-sm"></a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarNavAltMarkup"><div class="navbar-nav"></div></div></nav></div></div><div class="container"><div id="my_content"><h1 class="page_narrow">Rga: Ripgrep, but also search in PDFs, E-Books, Office documents, zip, tar.gz<br/>Rga：Ripgrep，但也可以搜索PDF，电子书，Office文档，zip，tar.gz </h1><div class="row"><div class="col-lg-12 col-12"><div class="my_story_list_item shadow p-3 mb-5 bg-white rounded"><div class="story_page_pub_time page_narrow">2020-12-04 20:42:46</div><div class="page_narrow text-break page_content"><p>rga is a line-oriented search tool that allows you to look for a regex in a multitude of file types. rga wraps the awesome  ripgrep and enables it to search in pdf, docx, sqlite, jpg, zip, tar.*, movie subtitles (mkv, mp4), etc.</p><p>rga是一种面向行的搜索工具，使您可以在多种文件类型中查找正则表达式。 rga封装了很棒的ripgrep，并使其能够搜索pdf，docx，sqlite，jpg，zip，tar。*，电影字幕（mkv，mp4）等。</p><p>    Say you have a large folder of papers or lecture slides, and you can’t remember which one of them mentioned  GRUs. With rga, you can just run this:</p><p>    假设您有一大堆文件或演讲幻灯片，却不记得其中哪一个提到了GRU。使用rga，您可以运行以下命令：</p><p> ~$ rga &#34;GRU&#34; slides/ slides/2016/winter1516_lecture14.pdfPage 34:   GRU LSTMPage 35:   GRU CONVPage 38: - Try out   GRU-RCN! (imo best model) slides/2018/cs231n_2018_ds08.pdfPage 3: ● CNNs, GANs, RNNs, LSTMs,   GRUPage 35: ● 1) temporal pooling 2) RNN (e.g. LSTM,   GRU) slides/2019/cs231n_2019_lecture10.pdfPage 103:   GRU [Learning phrase representations using rnnPage 105: - Common to use LSTM or   GRU</p><p> 〜$ rga＆＃34; GRU＆＃34; slides / slides / 2016 / winter1516_lecture14.pdf第34页：GRU LSTM第35页：GRU CONV第38页：-试试GRU-RCN！ （imo最佳模型）slides / 2018 / cs231n_2018_ds08.pdf第3页：●CNN，GAN，RNN，LSTM，GRU第35页：●1）时间池2）RNN（例如LSTM，GRU）slides / 2019 / cs231n_2019_lecture10.pdf第103页：GRU [使用rnnPage 105学习短语表示形式：-通用使用LSTM或GRU</p><p> and it will recursively find a string in pdfs, including if some of them are zipped up.</p><p> 它将在pdfs中递归地找到一个字符串，包括其中一些是否已压缩。</p><p> You can do mostly the same thing with   pdfgrep -r, but you will miss content in other file types and it will be much slower:</p><p> 您可以使用pdfgrep -r进行几乎相同的操作，但是会丢失其他文件类型的内容，并且速度会慢得多：</p><p>  On the first run rga is mostly faster because of multithreading, but on subsequent runs (with the same files but any regex query) rga will cache the text extraction, so it becomes almost as fast as searching in plain text files. All runs were done with a warm FS cache.</p><p>  第一次运行时，由于多线程，rga的运行速度通常会更快，但是在后续运行中（具有相同的文件，但使用任何正则表达式查询），rga会缓存文本提取，因此它的速度几乎与在纯文本文件中搜索一样快。所有运行都使用温暖的FS缓存完成。</p><p>  rga will recursively descend into archives and match text in every file type it knows.</p><p>  rga将递归地归入存档，并在它知道的每种文件类型中匹配文本。 </p><p>  demo├── greeting.mkv├── hello.odt├── hello.sqlite3└── somearchive.zip ├── dir │   ├── greeting.docx │   └── inner.tar.gz │   └── greeting.pdf └── greeting.epub</p><p>演示├──Greeting.mkv├──hello.odt├──hello.sqlite3└──somearchive.zip├──dir│├──greeting.docx│└──inner.tar.gz│└── .pdf└──greeting.epub</p><p>  ~$ rga &#34;hello&#34; demo/ demo/greeting.mkvmetadata: chapters.chapter.0.tags.title=&#34;Chapter 1:   Hello&#34;00:08.398 --&gt; 00:11.758:   Hello from a movie! demo/hello.odt  Hello from an OpenDocument file! demo/hello.sqlite3tbl: greeting=&#39;  hello&#39;, from=&#39;sqlite database!&#39; demo/somearchive.zipdir/greeting.docx:   Hello from a MS Office document!dir/inner.tar.gz: greeting.pdf: Page 1:   Hello from a PDF!greeting.epub:   Hello from an E-Book!</p><p>  〜$ rga＆＃34; hello＆＃34; demo / demo / greeting.mkvmetadata：chapters.chapter.0.tags.title =＆＃34;第1章：Hello＆＃34; 00：08.398- 00：11.758：你好，电影！ demo / hello.odt您好，来自OpenDocument文件！ demo / hello.sqlite3tbl：greeting =＆＃39;你好，来自== sqlite数据库！＆＃39; demo / somearchive.zipdir / greeting.docx：来自MS Office文档的您好！dir / inner.tar.gz：greeting.pdf：第1页：来自PDF的您好！greeting.epub：来自电子书的您好！</p><p> It can even search jpg / png images and scanned pdfs using OCR, though this is disabled by default since it is not useful that often and pretty slow.</p><p> 它甚至可以使用OCR搜索jpg / png图像和扫描的pdf，尽管默认情况下此功能处于禁用状态，因为它通常没有用，而且速度非常慢。</p><p> ~$ # find screenshot of crates.io~$ rga crates ~/screenshots --rga-adapters=+pdfpages,tesseract screenshots/2019-06-14-19-01-10.png  crates.io I Browse All   Crates Docs vDocumentation Repository Dependent   crates~$ # there it is!</p><p> 〜$＃查找crates.io的屏幕快照〜$ rga板条箱〜/ screenshots --rga-adapters = + pdfpages，tesseract屏幕快照/2019-06-14-19-01-10.png crates.io我浏览所有板条箱文档vDocumentation仓库相关的板条箱〜$＃到了！</p><p>  Linux, Windows and OSX binaries are available in GitHub releases. See  the readme for more information.</p><p>  GitHub版本中提供了Linux，Windows和OSX二进制文件。有关更多信息，请参见自述文件。</p><p>     rga-preproc [fname] will match an  &#34;adapter&#34; to the given file based on either it’s filename or it’s mime type (if  --rga-accurate is given). You can see all adapters currently included in  src/adapters.</p><p>     rga-preproc [fname]将匹配＆＃34; adapter＆＃34;根据文件名或哑剧类型（如果提供了--rga-accurate）添加到给定文件。您可以看到src / adapters中当前包含的所有适配器。</p><p> Some rga adapters run external binaries to do the actual work (such as pandoc or ffmpeg), usually by writing to stdin and reading from stdout. Others use a Rust library or bindings to achieve the same effect (like sqlite or zip).</p><p> 某些rga适配器运行外部二进制文件来完成实际工作（例如pandoc或ffmpeg），通常是通过写stdin并从stdout读取来完成。其他人则使用Rust库或绑定来达到相同的效果（例如sqlite或zip）。 </p><p> To read archives, the  zip and  tar libraries are used, which work fully in a streaming fashion - this means that the RAM usage is low and no data is ever actually extracted to disk!</p><p>要读取存档，将使用zip和tar库，它们以流方式完全工作-这意味着RAM使用率很低，并且实际上没有数据提取到磁盘上！</p><p> Most adapters read the files from a  Read, so they work completely on streamed data (that can come from anywhere including within nested archives).</p><p> 大多数适配器从读取中读取文件，因此它们可以完全处理流数据（可以来自任何地方，包括嵌套存档中的数据）。</p><p> During the extraction, rga-preproc will compress the data with ZSTD to a memory cache while simultaneously writing it uncompressed to stdout. After completion, if the memory cache is smaller than 2MByte, it is written to a  rkv cache. The cache is keyed by (adapter, filename, mtime), so if a file changes it’s content is extracted again.</p><p> 在提取过程中，rga-preproc将使用ZSTD将数据压缩到内存缓存，同时将未压缩的数据写入stdout。完成后，如果内存缓存小于2 MB，则将其写入rkv缓存。缓存由（适配器，文件名，mtime）作为键，因此，如果文件发生更改，则会再次提取其内容。</p><p>  I wanted to add a photograph adapter (based on object classification / detection) for fun, so you can grep for  &#34;mountain&#34; and it will show pictures of mountains, like in Google Photos. It worked with  YOLO, but something more useful and state-of-the art  like this proved very hard to integrate.</p><p>  我想添加一个照片适配器（基于对象分类/检测）来娱乐，所以您可以grep表示＆＃34; mountain＆＃34;它将显示山脉的图片，就像在Google相册中一样。它与YOLO一起使用，但是类似这样的更有用和最新的技术却很难集成。</p><p>   Maybe use a different disk kv-store as a cache instead of rkv, because I had some  weird problems with that. SQLite is great. All other Rust alternatives I could find don’t allow writing from multiple processes.</p><p>   也许使用另一个磁盘kv-store而不是rkv作为缓存，因为我对此有一些奇怪的问题。 SQLite很棒。我发现的所有其他Rust替代方法都不允许从多个进程进行写入。</p><p>  There’s some more (mostly technical) todos in the code I don’t know how to fix. Help wanted.</p><p>  我不知道如何解决的代码中还有其他一些（大多数是技术性的）待办事项。把招工广告。</p><p>  this gist has my proof of concept version of a caching extractor to use ripgrep as a replacement for pdfgrep.</p><p>  这个要点有我的概念证明版本的缓存提取器，可以使用ripgrep代替pdfgrep。 </p><p>  lesspipe is a tool to make  less work with many different file types. Different usecase, but similar in what it does.</p><p>lesspipe是一种减少使用许多不同文件类型的工具。 不同的用例，但用途相似。 </p></div><div id="story_share_this"><div class="sharethis-inline-share-buttons"></div></div><div class="text-break sotry_link page_narrow"><a target="_blank" href="https://phiresky.github.io/blog/2019/rga--ripgrep-for-zip-targz-docx-odt-epub-jpg/">https://phiresky.github.io/blog/2019/rga--ripgrep-for-zip-targz-docx-odt-epub-jpg/</a></div><div class="story_tags page_narrow"><button type="button" class="btn btn-light my_tag"><a href="/tag/ripgrep/">#ripgrep</a></button></div></div><div class="my_movie_list_item shadow p-3 mb-5 bg-white rounded"><button type="button" class="btn btn-link my_tag"><a href="/tag/web2.0/">#web2.0</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/google/">#google</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/设计/">#设计</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/创意/">#创意</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/摄影/">#摄影</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/图片/">#图片</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/游戏/">#游戏</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/软件/">#软件</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/手机/">#手机</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/视频/">#视频</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/广告/">#广告</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/iphone/">#iphone</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/网站/">#网站</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/免费/">#免费</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/下载/">#下载</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/windows/">#windows</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/苹果/">#苹果</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/微软/">#微软</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/apple/">#apple</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/blog/">#blog</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/firefox/">#firefox</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/音乐/">#音乐</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/博客/">#博客</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/wordpress/">#wordpress</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/恶搞/">#恶搞</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/艺术/">#艺术</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/qq/">#qq</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/web/">#web</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/工具/">#工具</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/分享/">#分享</a></button></div></div></div><div id="my_footer"><div class=""><a href="/tags/">tags</a> <a href="/users/">users</a></div>&copy; 2020 diglog.com </div></div></body></html>