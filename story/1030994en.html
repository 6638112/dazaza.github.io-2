<!doctype html><html lang="zh-hans"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>/.bashrc VS-/.profile VS-/.bash_profile</title><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"><link rel="stylesheet" href="/img/css.css?random="><link data-rh="true" rel="icon" href="/img/favicon.ico"/><script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?03c1a0f31299b4a2fbb83c34d6beaac9";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script><script data-ad-client="ca-pub-6067137220025946" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script type="text/javascript" src="https://platform-api.sharethis.com/js/sharethis.js#property=5effb96910009800120b8d4d&product=inline-share-buttons" async="async"></script></head><body><div id="my_header"><div class="container"><nav class="navbar navbar-expand-lg"><a class="navbar-brand" href="/"><img alt="diglog" src="/img/logo.v1.gif" class="rounded-sm"></a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarNavAltMarkup"><div class="navbar-nav"></div></div></nav></div></div><div class="container"><div id="my_content"><h1 class="page_narrow">/.bashrc VS-/.profile VS-/.bash_profile</h1><div class="row"><div class="col-lg-12 col-12"><div class="my_story_list_item shadow p-3 mb-5 bg-white rounded"><div class="story_page_pub_time page_narrow">2020-10-25 03:12:52</div><div class="page_narrow text-break page_content"><p>Sometimes, when I remotely login to some Linux computers or use Docker containers, I would find the shell is plain black and white, which is different from the colorful shell I used to deal with on my local machine. This is sometimes causing me trouble to look for libraries, executables, and folders. Sometimes, some executables could be called directly from a local shell but from a remotely login shell they are not directly callable.</p><p>有时，当我远程登录到一些Linux计算机或使用Docker容器时，我会发现shell是纯黑白的，这与我过去在本地机器上处理的五颜六色的shell不同。这有时会给我查找库、可执行文件和文件夹带来麻烦。有时，某些可执行文件可以直接从本地shell调用，但不能从远程登录shell直接调用。</p><p>  It turns out that the shell is an executable and it is “configured” by special shell scripts such as  ~/.bashrc,  ~/.profile,  ~/.bash_profile. In this blog post, I would like to briefly discuss the differences between these scripts.</p><p>原来，shell是一个可执行文件，它是由特殊的shell脚本(如~/.bashrc、~/.profile、~/.bash_profile)“配置”的。在这篇博客文章中，我想简要讨论一下这些脚本之间的区别。</p><p>  I modify  ~/.bashrc file from time to time, because sometimes I would like to set some environment variables, including  PATH which is an environmental variable in Linux and other Unix-like operating systems that tells the shell which directories to search for executable files. But I have been ignoring its commented block at the beginning for decades.</p><p>我不时修改~/.bashrc文件，因为有时我想设置一些环境变量，包括PATH，它是Linux和其他类似Unix的操作系统中的环境变量，它告诉shell搜索可执行文件的目录。但是几十年来，我一直忽略它最初的注释块。</p><p> $ cat ~/.bashrc # ~/.bashrc: executed by bash(1) for non-login shells.# see /usr/share/doc/bash/examples/startup-files (in the package bash-doc)# for examples...</p><p>$cat~/.bashrc#~/.bashrc：由bash(1)针对非登录shell执行。#参见/usr/share/doc/bash/examples/start-files(在bash-doc包中)#了解示例...。</p><p> This means that in a local shell, and if we use  bash, this shell script will be executed immediately after  bash is executed. There are many other shell executable variants, such as  zsh.  ~/.bashrc is only specific to  bash.</p><p>这意味着在本地shell中，如果我们使用bash，此shell脚本将在执行bash后立即执行。还有许多其他的shell可执行变体，比如zsh。~/.bashrc仅特定于bash。</p><p>  There are many code in the  ~/.bashrc that makes the shell looks colorful. For example,</p><p>在~/.bashrc中有许多代码使shell看起来五颜六色。例如,。</p><p> # enable color support of ls and also add handy aliasesif [ -x /usr/bin/dircolors ]; then test -r ~/.dircolors &amp;&amp; eval &#34;$(dircolors -b ~/.dircolors)&#34; || eval &#34;$(dircolors -b)&#34; alias ls=&#39;ls --color=auto&#39; #alias dir=&#39;dir --color=auto&#39; #alias vdir=&#39;vdir --color=auto&#39; alias grep=&#39;grep --color=auto&#39; alias fgrep=&#39;fgrep --color=auto&#39; alias egrep=&#39;egrep --color=auto&#39;fi</p><p>#启用ls的颜色支持，并添加方便的aliasesif[-x/usr/bin/dircolor]；然后测试-r~/.dircolor&amp；&amp；eval&#34；$(dircolor-b~/.dircolor)&#34；||eval&#34；$(dircolor-b)&#34；alias ls=&#39；ls--color=auto&#39；#alias dir=&#39；dir-color=auto&#39；#alias vdir=&#39；vdir-color=auto&#39；as grep=&#39；grep-color=auto&#39；#alias vdir=&#39；vdir-color=auto&#39；as grep=&#39；grep-color=auto&#39；#alias vdir=&#39；vdir-color=auto&#39；as grep=&#39；grep-color=auto&#39；别名fgrep=--fgrep--color=auto&39；别名egrep=&#39；egrep--color=auto&39；fi。</p><p>  The comment block from  ~/.profile explictly tells us that it will be executed for the login shells. However, if  ~/.bash_profile or  ~/.bash_login exists,  ~/.profile will not be executed.</p><p>来自~/.profile的注释块明确地告诉我们，它将针对登录shell执行。但是，如果存在~/.bash_profile或~/.bash_login，则不会执行~/.profile。</p><p> $ cat ~/.profile # ~/.profile: executed by the command interpreter for login shells.# This file is not read by bash(1), if ~/.bash_profile or ~/.bash_login# exists.# see /usr/share/doc/bash/examples/startup-files for examples.# the files are located in the bash-doc package.# the default umask is set in /etc/profile; for setting the umask# for ssh logins, install and configure the libpam-umask package.#umask 022# if running bashif [ -n &#34;$BASH_VERSION&#34; ]; then # include .bashrc if it exists if [ -f &#34;$HOME/.bashrc&#34; ]; then	. &#34;$HOME/.bashrc&#34; fifi# set PATH so it includes user&#39;s private bin if it existsif [ -d &#34;$HOME/bin&#34; ] ; then PATH=&#34;$HOME/bin:$PATH&#34;fi# set PATH so it includes user&#39;s private bin if it existsif [ -d &#34;$HOME/.local/bin&#34; ] ; then PATH=&#34;$HOME/.local/bin:$PATH&#34;fi</p><p>$cat~/.profile#~/.profile：由登录shell的命令解释程序执行。#如果~/.bash_profile或~/.bash_login#存在，此文件不会被bash(1)读取。#有关示例，请参阅/usr/share/doc/bash/examples/start-files。#这些文件位于bash-doc包中。#默认umask设置在/etc/profile中；要设置ssh登录的umask#，请安装并配置libpam-umask包。#umask 022#如果运行bashif[-n&#34；$BASH_VERSION&#34；]；如果[-f&#34；$HOME/.bashrc&#34；]；则#include.bashrc(如果存在)。&#34；$HOME/.bashrc&#34；FIFI#设置路径，使其包含用户的私有垃圾桶(如果它存在)；则path=&#34；$HOME/bin&#34；则path=&#34；$HOME//bin：$path&#34；fi#设置路径，使其包括用户的私有bin(如果它存在)[-d&#34；$HOME/.local/bin&#34；]；则path=&#34；$HOME/.local/bin：$path&#34；fi。</p><p> The default content of  ~/.profile is simple. Most likely, it inherits whatever there are in the  ~/.bashrc, and adds some user specific executable filepath to the environment variable  PATH. So if there are commands that make the shell looks colorful in the  ~/.bashrc, the login shell should also look colorful.</p><p>~/.profile的默认内容很简单。最有可能的是，它继承~/.bashrc中的所有内容，并将一些特定于用户的可执行文件路径添加到环境变量PATH中。因此，如果~/.bashrc中有使shell看起来五颜六色的命令，那么登录shell也应该看起来五颜六色。</p><p>  Unfortunately, in most of my login trials, the shells were never coloful, and sometimes the environment variables do not match my expectation. This is because there exists a  ~/.bash_profile therefore  ~/.profile or  ~/.bashrc is never executed. Usually the  ~/.bash_profile will be empty, this means that we would not have the environment and appearance as we have in our local shell.</p><p>不幸的是，在我的大多数登录试验中，shell从来都不是丰富多彩的，有时环境变量与我的预期不符。这是因为存在~/.bash_profile，因此不会执行~/.profile或~/.bashrc。通常，~/.bash_profile将为空，这意味着我们不会拥有本地shell中的环境和外观。</p><p>  To make the login shell “back to normal”, we could either delete the  ~/.bash_profile or modify the  ~/.bash_profile by adding some commands like</p><p>要使登录shell“恢复正常”，我们可以删除~/.bash_profile，也可以通过添加一些命令来修改~/.bash_profile，例如。</p><p>   Sometimes, a non-color shell could be helpful. It tells you that are not working in local shell. It could either be a Docker shell or a remote login shell. Knowing what shell we are dealing with, we would be less likely to do dangerous operations. For example, in a Docker shell, we could do almost anything, such as  rm -rf / without sudo, without harming the local system.</p><p>有时，一个非彩色的外壳可能会有帮助。它会告诉您不能在本地shell中工作。它可以是Docker shell，也可以是远程登录shell。知道我们对付的是什么炮弹，我们就不太可能做危险的行动了。例如，在Docker shell中，我们几乎可以做任何事情，比如没有sudo的RM-RF/，而不会损害本地系统。</p></div><div id="story_share_this"><div class="sharethis-inline-share-buttons"></div></div><div class="text-break sotry_link page_narrow"><a target="_blank" href="https://leimao.github.io/blog/bashrc-VS-profile-VS-bash_profile/">https://leimao.github.io/blog/bashrc-VS-profile-VS-bash_profile/</a></div><div class="story_tags page_narrow"><button type="button" class="btn btn-light my_tag"><a href="/tag/profile/">#profile</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/shell/">#shell</a></button></div></div><div class="my_movie_list_item shadow p-3 mb-5 bg-white rounded"><button type="button" class="btn btn-link my_tag"><a href="/tag/web2.0/">#web2.0</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/google/">#google</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/设计/">#设计</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/游戏/">#游戏</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/创意/">#创意</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/apple/">#apple</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/苹果/">#苹果</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/摄影/">#摄影</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/软件/">#软件</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/美国/">#美国</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/iphone/">#iphone</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/图片/">#图片</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/手机/">#手机</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/视频/">#视频</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/广告/">#广告</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/免费/">#免费</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/谷歌/">#谷歌</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/网站/">#网站</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/windows/">#windows</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/微软/">#微软</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/下载/">#下载</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/firefox/">#firefox</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/音乐/">#音乐</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/linux/">#linux</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/blog/">#blog</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/博客/">#博客</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/程序/">#程序</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/艺术/">#艺术</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/web/">#web</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/wordpress/">#wordpress</a></button></div></div></div><div id="my_footer"><div class=""><a href="/tags/">tags</a> <a href="/users/">users</a></div>&copy; 2020 diglog.com </div></div></body></html>