<!doctype html><html lang="zh-hans"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Cloudflare候诊室 </title><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"><link rel="stylesheet" href="/img/css.css?random="><link data-rh="true" rel="icon" href="/img/favicon.ico"/><script data-ad-client="ca-pub-6067137220025946" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script type="text/javascript" src="https://platform-api.sharethis.com/js/sharethis.js#property=5effb96910009800120b8d4d&product=inline-share-buttons" async="async"></script>
<script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?03c1a0f31299b4a2fbb83c34d6beaac9";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script></head><body><div id="my_header"><div class="container"><nav class="navbar navbar-expand-lg"><a class="navbar-brand" href="/"><img alt="diglog" src="/img/logo.v1.gif" class="rounded-sm"></a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarNavAltMarkup"><div class="navbar-nav"></div></div></nav></div></div><div class="container"><div id="my_content"><h1 class="page_narrow">Cloudflare候诊室 </h1><div class="row"><div class="col-lg-12 col-12"><div class="my_story_list_item shadow p-3 mb-5 bg-white rounded"><div class="story_page_pub_time page_narrow">2021-01-23 01:09:47</div><div class="story_img_container"><a href="http://img2.diglog.com/img/2021/1/583dffc56501b433a9df14c0b8f4098b.png"><img src="http://img2.diglog.com/img/2021/1/583dffc56501b433a9df14c0b8f4098b.png" class="img-fluid my_story_img" onerror="this.style.display='none'"></a></div><div class="page_narrow text-break page_content"><p>今天，我们很高兴宣布Cloudflare候诊室！它将首先通过名为Project Fair Shot的新计划向客户提供选择，该计划旨在解决对COVID-19疫苗的大量需求导致约会注册网站出现故障的问题。我们的业务和企业计划的一般可用性将在不久的将来增加。</p><p>  我们大多数人都熟悉候诊室的概念，而很少有人为融入一间候机室而感到兴奋。通常，我们的第一次体验是在医生办公室–是的，您有个约会，但有时医生迟到了（或其中一位患者）。假设医生一次只能看一个人，那么候诊室就是这样，它使病人排队。</p><p> 尽管服务器可以处理比医生更多的并发请求，但它们也可能不堪重负。如果在COVID之前的世界中，如果您曾经尝试购买流行音乐会或活动的门票，则可能是在网上遇到了候诊室。它限制了入站到应用程序的请求，并将这些请求放入虚拟队列。一旦减少了应用程序中的用户数量，就会在应用程序可以处理的定义阈值之内让新用户进入。这样可以保护支持应用程序的原始服务器不会被过多的请求淹没，同时还可以从用户角度确保公平性-系统过载时尝试访问资源的用户不会受到不公平的丢弃并被迫重新连接，希望加入他们的系统。排队的机会。</p><p>  鉴于我们当中没有多少人会很快举行演唱会，为什么Cloudflare现在要这样做？</p><p> 好吧，也许我们不打算去听音乐会，但是COVID-19的二阶效果造成了对等候室的巨大需求。首先，由于社会疏远以及许多营业场所和政府的关闭，客户和市民已经转向在线渠道，这给企业和政府基础设施带来了更大的压力。</p><p> 其次，大流行及其带来的持续后果意味着世界各地的许多人开始依赖十二个月前不需要的资源。具体来说，这些资源通常是与卫生或政府相关的资源，例如失业保险网站。设置了在线基础架构来处理无法预见COVID-19的峰值负载。我们发现与疫苗相关的网站也出现了类似的模式。</p><p> 从历史上看，需要等候室的组织数量很少。大多数在线业务的性质通常涉及到更一致的用户负载，而不是一次全部吸引大量用户。这些组织能够建立自定义的候诊室，并将其深度集成到他们的应用程序中（例如，购买机票）。使用Cloudflare的候机室，无需更改应用程序的任何代码，并且无需编写任何代码即可在几分钟内为任何网站设置候机室。 </p><p>无论您是工程架构师还是业务运营分析师，设置等候室都很简单。我们可以快速简便地确保您的应用程序可靠并受到保护，免受流量意外高峰的影响。我们认为重要的其他功能是自动启用和动态流出。换句话说，当超过阈值时，候机室应自动打开，并且当用户完成应用程序中的任务时，请分配不同大小的用户桶，并在队列中引入新的桶。它应该工作。最后，我们看到了COVID-19对用户和企业（尤其是但不限于医疗卫生和政府部门）产生的重大影响。我们希望提供另一种方式来确保这些应用程序保持可用和正常运行，以便所有用户都能获得所需的照顾，而不会在浏览器中出错。</p><p>  我们在边缘网络和Workers产品之上构建了Waiting Room。通过利用Workers和我们的新的Durable Objects产品，我们可以消除对任何客户编码的需求，并提供无缝的，即用的，开箱即用的产品。最重要的是，我们获得了Workers产品的规模和性能优势，可确保我们维持极低的延迟开销，使呈现给最终用户的估计时间尽可能准确，并且不会让任何用户排队的时间超过所需时间。但是在分散网络中建立集中式系统并非易事。当来自世界各地的应用程序提出请求时，我们需要能够获得对于给定应用程序的入站和出站负载看起来像什么的广泛，准确的视图。</p><p>  这些请求尽管速度很快，但仍需要花费时间才能穿越地球。因此，提出了一个独特的边缘案例。如果网站从北美和欧洲获得了合理的访问量，但是却从南美洲突然出现了巨大的访问量，我们该如何知道何时让用户进入应用程序以及何时进入候机室进行保护呢？源服务器是否过载？</p><p> 多亏了一些聪明的工程技术和我们的Workers产品，我们才能够创建一个几乎可以立即使其与全球需求保持同步的系统，从而使我们能够了解何时应该和不应该将用户排队到候诊室。通过利用我们的全球Anycast网络和200多个数据中心，我们消除了任何单点故障，以保护我们的客户。基础架构还为必须等待少量时间才能在高负载下进入应用程序的最终用户提供了很好的体验。</p><p>   设置等候室非常简单而且非常快捷！在规模的最简单方面，用户只需要填写五个字段：1）等候室的名称，2）主机名（已经在其配置的区域中预先填充了主机名），3）在任何给定时间可以处于应用程序中的总活动用户数； 4）允许进入应用程序的每分钟新用户数； 5）任何给定用户的会话持续时间。无需编码或任何应用程序更改。</p><p>  对于不想添加其他品牌的客户，我们提供使用默认等候室模板的选项。这简化了启动和运行等候室的过程。</p><p>    对于具有更多时间和技术能力的客户，将遵循相同的过程，只是我们为用户提供了完全的自定义功能，以便他们可以为候诊室打上烙印，以确保其与整体产品的外观和风格相匹配。 </p><p>最后，管理不同的候车室非常简单。 使用我们的“管理等候室”表，您可以一目了然地获得哪些房间正在排队，未排队和/或已禁用的完整快照。  我们非常高兴能将候车室的功能交到客户手中，以确保他们继续专注于业务和客户。 请留意即将发布的另一篇博客文章，其中将对我们的企业等候室产品进行重大更新！  Project Fair Shot负载平衡产品新闻更好的互联网COVID-19 </p></div><div id="story_share_this"><div class="sharethis-inline-share-buttons"></div></div><div class="text-break sotry_link page_narrow"><a target="_blank" href="https://blog.cloudflare.com/cloudflare-waiting-room/">https://blog.cloudflare.com/cloudflare-waiting-room/</a></div><div class="story_tags page_narrow"><button type="button" class="btn btn-light my_tag"><a href="/tag/waiting/">#waiting</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/应用程序/">#应用程序</a></button></div></div><div class="my_movie_list_item shadow p-3 mb-5 bg-white rounded"><button type="button" class="btn btn-link my_tag"><a href="/tag/web2.0/">#web2.0</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/google/">#google</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/设计/">#设计</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/创意/">#创意</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/摄影/">#摄影</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/游戏/">#游戏</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/图片/">#图片</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/软件/">#软件</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/视频/">#视频</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/手机/">#手机</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/广告/">#广告</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/apple/">#apple</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/iphone/">#iphone</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/网站/">#网站</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/免费/">#免费</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/下载/">#下载</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/windows/">#windows</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/微软/">#微软</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/firefox/">#firefox</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/苹果/">#苹果</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/blog/">#blog</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/音乐/">#音乐</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/博客/">#博客</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/wordpress/">#wordpress</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/恶搞/">#恶搞</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/艺术/">#艺术</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/qq/">#qq</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/web/">#web</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/谷歌/">#谷歌</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/工具/">#工具</a></button></div></div></div><div id="my_footer"><div class=""><a href="/tags/">tags</a> <a href="/users/">users</a></div>&copy;2012-2021 diglog.com </div></div></body></html>