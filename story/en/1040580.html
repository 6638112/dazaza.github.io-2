<!doctype html><html lang="zh-hans"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>DRY是一个折衷方案 DRY Is a Trade-Off</title><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"><link rel="stylesheet" href="/img/css.css?random="><link data-rh="true" rel="icon" href="/img/favicon.ico"/><script data-ad-client="ca-pub-6067137220025946" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script type="text/javascript" src="https://platform-api.sharethis.com/js/sharethis.js#property=5effb96910009800120b8d4d&product=inline-share-buttons" async="async"></script>
<script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?03c1a0f31299b4a2fbb83c34d6beaac9";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script></head><body><div id="my_header"><div class="container"><nav class="navbar navbar-expand-lg"><a class="navbar-brand" href="/"><img alt="diglog" src="/img/logo.v1.gif" class="rounded-sm"></a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarNavAltMarkup"><div class="navbar-nav"></div></div></nav></div></div><div class="container"><div id="my_content"><h1 class="page_narrow">DRY Is a Trade-Off<br/>DRY是一个折衷方案 </h1><div class="row"><div class="col-lg-12 col-12"><div class="my_story_list_item shadow p-3 mb-5 bg-white rounded"><div class="story_page_pub_time page_narrow">2020-12-19 01:59:33</div><div class="page_narrow text-break page_content"><p>DRY,or Don&#39;t Repeat Yourselfis frequently touted as a principle of software development.&#34;Copy-pasta&#34;is the derisive term applied to a violation of it,tying together the concept of copying codeandpasta as description of software development bad practices(see also spaghetti code).</p><p>DRY或“不要重复自己”经常被吹捧为软件开发的原理。“复制粘贴”是对它的违背的嘲讽性术语，将复制代码和粘贴的概念归纳为软件开发不良做法（另请参见意大利面条代码）。</p><p> It is so uniformly reviled that some people call DRY a&#34;principle&#34;that you should never violate.Indeed, some linters even detect copy-pasteso that it can never sneak into the code.But copy-paste is not a comic-book villain,and DRY does not come bedecked in primary colors to defeat it.</p><p> 如此普遍地受到谴责，以至于有人不应该违反DRY原则，实际上，有些短毛绒甚至检测到复制粘贴，因此它永远不会潜入代码中，但是复制粘贴不是漫画。书中的恶棍，而DRY并没有因为击败它而陷入困境。</p><p> It is worthwhile to know whyDRYstarted out as a principle.In particular,some for some modern software development practices,violating DRY is the right thing to do.</p><p> 值得一提的是为什么要开始使用DRY作为原则。特别是在某些现代软件开发实践中，违反DRY是正确的做法。</p><p> The main problem with  repeating a code chunkis that if a bug is found,there is more than one place where it needs to be fixed.On the surface of it,this seems like a reasonable criticism.All code has bugs,those bugs will be fixed,why not minimize the cost of fixing them?</p><p> 重复执行代码块的主要问题是，如果发现了一个错误，则有多个地方需要修复。在表面上，这似乎是一种合理的批评。所有代码都有错误，这些错误将被修复。固定，为什么不减少固定它们的成本？</p><p>   The alternative to copy-pasting the code is usually to put it in afunction (or procedure, or a subroutine, depending on the language),and call it.This means that when reading through the original caller,it is less clear what the code does.</p><p>   复制粘贴代码的替代方法通常是将其放入函数（或过程，或子例程，具体取决于语言），然后调用它。这意味着在读取原始调用者时，不清楚代码是什么做。</p><p> When you are debugging, this means we need to &#34;Step into&#34; the function.While stepping into, it is non-trivial to check the original variables.If you are doing &#34;print debugging&#34;,this means finding the original source for the function and addingrelevant print statements there.</p><p> 在进行调试时，这意味着我们需要＆＃34;进入＆＃34;进入该功能时，检查原始变量并非易事。如果您正在执行“打印调试”，这意味着找到该功能的原始来源并在其中添加相关的打印语句。</p><p> Especially when DRY is pointed out and reactions are instinctive,the function might have some surprising semantics.For example, mutating contents of local variables is sensiblein code.When you move this code to a function as a part of a straightforwardDRYrefactoring,this means that now a function is mutating its parameters.</p><p> 特别是当指出DRY并且本能地反应时，该函数可能具有一些令人惊讶的语义。例如，对局部变量的内容进行修改在代码中是明智的。当将此代码移至函数中作为直接DRY重构的一部分时，这意味着现在函数正在更改其参数。 </p><p> Even if the code initially was the same in both places,there is no a-priori guarantee that it will stay this way.For example, one of those places might be called frequently,and so would like to avoid logging too many details.The other place is called seldom, and those details areessential to trouble-shooting frequent problems.</p><p>即使两个地方的代码最初都相同，也没有先验的保证会保持这种方式。例如，可能经常调用其​​中一个地方，因此希望避免记录太多细节。其他地方很少被提及，这些细节对于解决常见问题是必不可少的。</p><p> The function that was refactored now has to support an extra parameter:whether to log those details or not.(This parameter might be a boolean, a logging level, or even a logging&#34;object&#34; that has correct levels set up.)</p><p> 现在，重构的函数必须支持一个额外的参数：是否记录这些详细信息（此参数可能是布尔值，日志记录级别，甚至是已设置正确级别的日志记录对象。 ）</p><p> Since usually there is no institutional memory to undothe DRY refactoring,the function might add more and more cases,eventually almost being two functions in one.If the &#34;copy-pasta&#34; was more extensive,it might lead to extensive over-generalization:each place needs a slightly different variation of the functionality.</p><p> 由于通常没有机构内存来取消DRY重构，因此该功能可能会增加越来越多的情况，最终几乎是两个功能合而为一。范围更广，可能导致广泛的过度概括：每个地方都需要稍微不同的功能变化。</p><p> Each modification of the&#34;common&#34;function now requires testing all of its callers.In some situations,this can be subtly non-trivial.</p><p> 现在，对公用功能的每次修改都需要测试其所有调用者。在某些情况下，这可能是微不足道的。</p><p> For example,if the repetition was across different repositories,now updates means updating library versions.The person making the change might not even be aware of all the callers.The callers only find out when a new library version is used in their code.</p><p> 例如，如果重复是在不同的存储库中进行的，则现在的更新意味着更新库的版本。进行更改的人员甚至可能不知道所有调用者。调用者仅会发现何时在其代码中使用了新的库版本。</p><p> When each of those code segments were repeated,ownership and responsibility were trivial.Whoever owned the surrounding code also ownedthe repeated segment.</p><p> 当重复每个代码段时，所有权和责任微不足道。谁拥有周围的代码，谁也拥有重复的段。</p><p> Now that the code has been moved elsewhere,to a&#34;shared&#34;location,ownership can often be muddled.When a bug is found,who is supposed to fix it?What happens if that&#34;bug&#34;is already relied on by another use?</p><p> 现在，代码已移至其他位置，通常可以混淆所有权。当发现错误时，应该由谁来解决？已经被其他用途所依赖？ </p><p> Especially in case with reactive DRY refactoring,there is little effort given to specifying the expectedsemantics of the common code.There might be some tests,but the behavior that is not captured by testsmight still vary.</p><p>尤其是在使用反应式DRY重构的情况下，几乎没有花精力指定通用代码的预期语义。可能会有一些测试，但是测试无法捕获的行为可能会有所不同。 </p></div><div id="story_share_this"><div class="sharethis-inline-share-buttons"></div></div><div class="text-break sotry_link page_narrow"><a target="_blank" href="https://orbifold.xyz/dry-trade-off.html">https://orbifold.xyz/dry-trade-off.html</a></div><div class="story_tags page_narrow"><button type="button" class="btn btn-light my_tag"><a href="/tag/dry/">#dry</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/代码/">#代码</a></button></div></div><div class="my_movie_list_item shadow p-3 mb-5 bg-white rounded"><button type="button" class="btn btn-link my_tag"><a href="/tag/web2.0/">#web2.0</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/google/">#google</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/设计/">#设计</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/创意/">#创意</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/摄影/">#摄影</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/游戏/">#游戏</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/图片/">#图片</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/软件/">#软件</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/视频/">#视频</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/广告/">#广告</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/手机/">#手机</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/iphone/">#iphone</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/网站/">#网站</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/免费/">#免费</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/下载/">#下载</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/windows/">#windows</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/苹果/">#苹果</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/微软/">#微软</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/apple/">#apple</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/firefox/">#firefox</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/blog/">#blog</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/音乐/">#音乐</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/博客/">#博客</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/wordpress/">#wordpress</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/恶搞/">#恶搞</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/qq/">#qq</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/艺术/">#艺术</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/web/">#web</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/工具/">#工具</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/分享/">#分享</a></button></div></div></div><div id="my_footer"><div class=""><a href="/tags/">tags</a> <a href="/users/">users</a></div>&copy; 2020 diglog.com </div></div></body></html>