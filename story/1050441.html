<!doctype html><html lang="zh-hans"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>优雅的Bash条件 </title><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"><link rel="stylesheet" href="/img/css.css?random="><link data-rh="true" rel="icon" href="/img/favicon.ico"/><script data-ad-client="ca-pub-6067137220025946" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script type="text/javascript" src="https://platform-api.sharethis.com/js/sharethis.js#property=5effb96910009800120b8d4d&product=inline-share-buttons" async="async"></script>
<script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?03c1a0f31299b4a2fbb83c34d6beaac9";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script></head><body><div id="my_header"><div class="container"><nav class="navbar navbar-expand-lg"><a class="navbar-brand" href="/"><img alt="diglog" src="/img/logo.v1.gif" class="rounded-sm"></a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarNavAltMarkup"><div class="navbar-nav"></div></div></nav></div></div><div class="container"><div id="my_content"><h1 class="page_narrow">优雅的Bash条件 </h1><div class="row"><div class="col-lg-12 col-12"><div class="my_story_list_item shadow p-3 mb-5 bg-white rounded"><div class="story_page_pub_time page_narrow">2021-03-03 00:52:47</div><div class="page_narrow text-break page_content"><p>if语句是非常基本的东西，不仅在bash中，而且在所有编程中。我看到它们在shell脚本中使用了很多，尽管在很多情况下，它们可以用更优雅的替换。</p><p> 在这篇简短的文章中，我将展示如何代替使用控制运算符。许多人可能对此有所了解，但并没有意识到如何很好地使用它们，这将有助于您将来编写更简洁的Shell脚本。</p><p>      Bash为控制操作员提供了构建命令序列的方法，其中一些是有条件的，并允许根据上次运行命令的成功状态进行逻辑分支。</p><p>    您可能想知道bash如何考虑命令是否成功，这是退出代码的所在。当程序存在时，返回数字状态代码。值0表示程序成功，其他任何值表示程序失败。</p><p> 退出代码通常是隐藏的。上次运行命令的状态存储在？中。变量。您可以通过调用以下内容进行检查：</p><p>  例如，以ls列出通常会返回0，但是如果目录不存在或发生错误，则此值会有所不同。</p><p>         仅当可读性检查表达式为真/成功时，我们才想获取文件，因此我们使用＆amp;＆amp;操作员。 </p><p>echo命令始终以0存在，因此如果第一个表达式为真，则此命令传播到退出位置。</p><p>  如果我们希望打印带有成功消息的配置文件文件内容，或者在读取失败时出现错误消息，我们可以执行以下操作：</p><p>   您可以根据需要设置这些命令序列。对于构建需要执行一系列步骤的安装脚本很有用。您可以为每个步骤定义bash函数，并按以下方式安排安装：</p><p>      [（通常在if语句中使用）不仅仅是shell功能。它是类Unix系统上的二进制文件，通常位于/ usr / bin / [，因此可以在任何地方使用。它返回如果表达式是真实的，则退出代码0。</p><p> 您可以链接多个[expr]＆amp;＆amp; [expr]表达式在一起，它们毕竟是命令。</p><p>  Bash具有参数表达式。您可以使用$ {EDITOR：= nvim}将EDITOR变量设置为nvim（仅当它为空时），因此您甚至不需要条件。</p><p> 大多数其他外壳程序都支持类似的运算符。鱼类用途;和和;或，但现在支持＆amp;＆amp;和||以及现代版本。 </p><p>这些带有控制操作符的命令序列是简单的if语句的绝佳替代方案。 我认为它们看起来更好，并且在条件逻辑方面更具表现力。  但是，不要过度使用它们。 对于更大的语句或高级分支，您应该回到if语句。  我希望本文能激发您通过使用这些运算符使Shell脚本在将来更加优雅。 </p></div><div id="story_share_this"><div class="sharethis-inline-share-buttons"></div></div><div class="text-break sotry_link page_narrow"><a target="_blank" href="https://timvisee.com/blog/elegant-bash-conditionals/">https://timvisee.com/blog/elegant-bash-conditionals/</a></div><div class="story_tags page_narrow"><button type="button" class="btn btn-light my_tag"><a href="/tag/bash/">#bash</a></button></div></div><div class="shadow p-3 mb-5 bg-white rounded clearfix"><div class="container"><div class="row"><div class="col-sm"><div><a target="_blank" href="/story/1050365.html"><img src="http://img2.diglog.com/img/2021/3/thumb_88ddfde0d4b16648b53c0f2bc72a6569.png" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1050365.html">Bash_unit – bash单元测试框架 </a></div><span class="my_story_list_date">2021-3-2 20:13</span></div><div class="col-sm"><div><a target="_blank" href="/story/1043125.html"><img src="http://img2.diglog.com/img/2021/1/thumb_60b3f241acb76ec3ef27a6ba01535f27.png" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1043125.html">纯Bash Clojure-ish CI管道 </a></div><span class="my_story_list_date">2021-1-4 20:27</span></div><div class="col-sm"><div><a target="_blank" href="/story/1039813.html"><img src="http://img2.diglog.com/img/2020/12/thumb_8d2597aac8b586acddb8be18b5f82d19.png" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1039813.html">最小的安全Bash脚本模板 </a></div><span class="my_story_list_date">2020-12-15 19:41</span></div><div class="col-sm"><div><a target="_blank" href="/story/1033986.html"><img src="http://img2.diglog.com/img/2020/11/thumb_a5998791bfaf6fadf5efcd12881d8f6a.png" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1033986.html">噢，我的Bash是一个开源的框架，用于管理您的bash配置</a></div><span class="my_story_list_date">2020-11-9 14:36</span></div></div></div></div><div class="my_movie_list_item shadow p-3 mb-5 bg-white rounded"><button type="button" class="btn btn-link my_tag"><a href="/tag/web2.0/">#web2.0</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/google/">#google</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/设计/">#设计</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/创意/">#创意</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/摄影/">#摄影</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/游戏/">#游戏</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/图片/">#图片</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/软件/">#软件</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/视频/">#视频</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/手机/">#手机</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/广告/">#广告</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/apple/">#apple</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/iphone/">#iphone</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/网站/">#网站</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/免费/">#免费</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/下载/">#下载</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/windows/">#windows</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/微软/">#微软</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/firefox/">#firefox</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/苹果/">#苹果</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/blog/">#blog</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/音乐/">#音乐</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/博客/">#博客</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/wordpress/">#wordpress</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/恶搞/">#恶搞</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/艺术/">#艺术</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/qq/">#qq</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/web/">#web</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/谷歌/">#谷歌</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/工具/">#工具</a></button></div></div></div><div id="my_footer"><div class=""><a href="/tags/">tags</a> <a href="/users/">users</a></div>&copy;2012-2021 diglog.com </div></div></body></html>