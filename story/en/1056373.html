<!doctype html><html lang="zh-hans"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>与Ghidra的Crusader Kings III合法化同性恋婚姻 Legalizing Gay Marriage in Crusader Kings III with Ghidra</title><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"><link rel="stylesheet" href="/img/css.css?random="><link data-rh="true" rel="icon" href="/img/favicon.ico"/><script data-ad-client="ca-pub-6067137220025946" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script type="text/javascript" src="https://platform-api.sharethis.com/js/sharethis.js#property=5effb96910009800120b8d4d&product=inline-share-buttons" async="async"></script>
<script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?03c1a0f31299b4a2fbb83c34d6beaac9";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script></head><body><div id="my_header"><div class="container"><nav class="navbar navbar-expand-lg"><a class="navbar-brand" href="/"><img alt="diglog" src="/img/logo.v1.gif" class="rounded-sm"></a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarNavAltMarkup"><div class="navbar-nav"></div></div></nav></div></div><div class="container"><div id="my_content"><h1 class="page_narrow">Legalizing Gay Marriage in Crusader Kings III with Ghidra<br/>与Ghidra的Crusader Kings III合法化同性恋婚姻 </h1><div class="row"><div class="col-lg-12 col-12"><div class="my_story_list_item shadow p-3 mb-5 bg-white rounded"><div class="story_page_pub_time page_narrow">2021-04-06 06:17:09</div><div class="story_img_container"><a href="http://img2.diglog.com/img/2021/4/e114e9817615bed21b51bd99ff509536.png"><img src="http://img2.diglog.com/img/2021/4/e114e9817615bed21b51bd99ff509536.png" class="img-fluid my_story_img" onerror="this.style.display='none'"></a></div><div class="page_narrow text-break page_content"><p>Crusader Kings III is a pretty impressive game. It’s impressive not only for its official content, but also for its extensive modding tools. Even before its release, I was drawn in by its promises of an  improved modding  experience. Relevant to  this post, I was also impressed by an apparent dedication towards  improved inclusivity.</p><p>Crusader Kings III是一个非常令人印象深刻的游戏。它不仅适用于其官方内容，而且还为其广泛的修改工具令人印象深刻。即使在发布之前，我的承诺在改进的修改体验中被绘制。与这篇文章有关，我对表观致力于改善包容性的表观致力于印象。</p><p> Now while the game does allow the player to re  form a variety of medieval cultures to be accepting of same-sex couples, as of CK3 version 1.3.1 it currently does not allow a reformer to permit same-sex  marriage. That should be fine though; that’s what mods are for!</p><p> 虽然游戏确实允许玩家重新形成各种中世纪文化，接受同性伴侣，因为CK3版本1.3.1它目前不允许改革者允许同性婚姻。那应该没问题;这就是Mods的衣服！</p><p>  An impressive amount of CK3 is implemented in Paradox Interactive’s in-house scripting language (which is kind of like what you’d get if you made a LISP without any parentheses). The game also provides good utilities for players to create, package, and distribute their own scripts on places like the Steam workshop.</p><p>  令人印象深刻的CK3在悖论互动的内部脚本语言中实施（如果您在没有任何括号的情况下造成的Lisp，那么就像你所接受的那样。游戏还为玩家提供了良好的实用程序来创建，包，并在蒸汽研讨会等地方分发自己的脚本。</p><p> Getting two characters to marry (without any fancy conditions) is fairly simple. All you really need is a script like this:</p><p> 获得两个角色要结婚（没有任何奇特状况）是相当简单的。所有你真正需要的是一个这样的脚本：</p><p> do_ye_a_marriage = {  category = interaction_category_friendly  auto_accept = yes  is_shown = { always = yes }  on_auto_accept = {  scope:actor = {  marry = scope:recipient  }  } }</p><p> do_ye_a_marriage = {category = contraction_category_friency_friency_accept = yes is_shown = {always = yes} on_auto_accept = {scope：actor = {marry = scope：procient}}}}}}}}</p><p>   Which when chosen will marry the Duchess of Tuscany with whomever you’re playing as, no questions asked.</p><p>   选择将正在播放的结婚托斯卡纳的公爵夫人与任何人你时，不问任何问题。</p><p>  Creating a mod to marry same-sex characters should be should be pretty simple then. The King of Sweden is unmarried, so you can apply the effect to him and…</p><p>  创建一个mod来嫁给同性角色应该是非常简单的。瑞典国王未婚，所以你可以向他施加效果...... </p><p> … nothing? Well nothing will happen in-game at least. CK3 does keep fairly detailed error logs, which on Windows are usually stored in  C:\Users\&lt;Username&gt;\Documents\Paradox Interactive\Crusader Kings III\logs\error.log . There we will see:</p><p>… 没有什么？什么都不会在游戏中发生。 CK3确实保留了相当详细的错误日志，在Windows上通常存储在C：\ Users \＆lt; \ document \ Paradox Interactive \ Crusader Kings III \ Logs \ Error.log中。我们会看到：</p><p> [jomini_script_system.cpp:169]: Script system error!  Error: marry effect [ Svend Estrid of k_denmark (Internal ID: 15228 - Historical ID 101515) is not allowed to marry Erik Stenkiling of k_sweden (Internal ID: 17969 - Historical ID 100525) ]</p><p> [Jomini_Script_System.cpp：169]：脚本系统错误！错误：结婚效果[k_denmark的svend estrid（内部ID：15228  - 历史纪录的ID 101515）不得嫁给K_SWEDEN的Erik Stenkiling（内部ID：17969  - 历史纪录ID 100525）]</p><p> Unfortunately, it turns out that the game logic to marry two characters is contained in the game binary, not in the scripting files, and the game engine will unilaterally block same sex marriages. This makes trying to marry two same-sex characters in Cruisader Kings 3… an illegal operation.</p><p> 不幸的是，事实证明，游戏逻辑嫁给两个字符的游戏二进制文件，而不是在脚本文件中，而游戏引擎将单方面阻止同伴相同的婚姻。这使得试图在Cruisader Kings 3中嫁给两个同性人物......一个非法运作。</p><p> (Look, it’s not like everything I do is an excuse to make bad puns. Just  most things I do.)</p><p> （看，它不像我所做的一切都是制造坏双关语的借口。只是大多数我所做的事情。）</p><p> This was discovered pretty quickly by modders when the game released. I put together what has become the main  thread asking for change on the official Paradox forums. As time went on, and patches only managed to  make things worse, it became clear from statements both on the forums and off of it that while the concern was noted, fixing the issue would be difficult, and it wasn’t a current priority.</p><p> 当游戏发布时，Modders会发现这很快。我汇总了已成为官方悖论论坛的改变的主题。随着时间的推移，补丁只是设法使事情变得更糟，在论坛和宣布上的陈述中，虽然所关注的问题，但解决这个问题是困难的，而且它不是目前的优先事项。</p><p> Now game modders, being used to taking issues of gameplay into their own hands, can get up to all kinds of things given enough time. I took inspiration from some  recent work on GTA Online, and spent my time engaging in some  light reverse-engineering of the game engine. Out of that, I managed to produce a 390 byte unofficial game patch to bypass the hard-coded restrictions on same-sex marriage and some other effects needed for same-sex partners to adopt children. The response from posting this on the official forums was…</p><p> 现在游戏莫德尔斯，用来将游戏的问题带到自己的手中，可以达到足够的时间的各种各样的东西。我从最近的GTA Online工作中获取了灵感，并花了我的时间从事游戏引擎的一些轻型逆向工程。借鉴了，我设法生产了一个390个字节的非官方游戏补丁，以绕过同性婚姻的硬编码限制以及同性伙伴采用儿童所需的一些其他效果。在官方论坛上发布这一点的回应是......</p><p>  … not what I was hoping for. Concerningly, in addition to the ban and the removal of the patch thread, there’s also been a removal of any posts  mentioning the patch from when it was live, including whole pages from the original request thread.</p><p>  ......不是我希望的。关于禁令和删除补丁线程外，还删除了从实时提及补丁的任何帖子，包括来自原始请求线程的整页。 </p><p> Now, I could try to find some other site that would accept the patch, but there are some downsides to that. The patch that I made was only good for the current Steam version of CK3, on my operating system, with my cpu architecture. But I can give something more portable than that: knowledge!</p><p>现在，我可以尝试找到一些接受补丁的其他网站，但是有一些缺点。我制作的补丁只有我的操作系统上的CK3当前蒸汽版本，我的CPU架构很好。但我可以提供比这更便携的东西：知识！</p><p> So without further ado, lets go through a step-by-step guide to see how anyone with a bit of technical know-how can reverse engineer a game like Crusader Kings 3.</p><p> 因此，无需进一步的ADO，让我们通过一个逐步的指南，看看有人如何有一点技术诀窍，如何逆转工程师像十字架王书3这样的游戏。</p><p> (If you don’t have much technical know-how, or you’re just an impatient modder like me, feel free to skip to the  Quick Fix section near the bottom)</p><p> （如果您没有太多的技术知识，或者您只是像我这样的不耐烦的摩擦，请随时跳到底部附近的快速修复部分）</p><p>   Ghidra is a suite of reverse engineering tools built by the US government’s National Security Agency ̶t̶o̶ ̶h̶a̶c̶k̶ ̶t̶h̶e̶ ̶C̶h̶i̶n̶e̶s̶e̶ ̶w̶i̶t̶h̶. It was open sourced in 2019, and has since enabled curious coders to poke their noses into all sorts of programs.</p><p>   Ghidra是由美国政府国家安全局̶t̶o̶̶h̶a̶c̶k̶̶h̶̶̶̶̶̶̶̶̶s̶e̶̶̶̶̶s̶h̶建造的一套逆向工程工具套件。它在2019年开放了营销，自从使奇怪的编码人员能够戳他们的鼻子进入各种各样的程序。</p><p> I’ll leave the installation instructions to its website, but after opening and clicking through the tutorial greeting, you’ll be met with a window like this:</p><p> 我将把安装说明留给其网站，但在打开并点击教程问候语后，您将与这样的窗口满意：</p><p>  To start you’ll have to go through the formality of starting a new project. This is done from  File -&gt; New Project... . Give your project a name and location and you’re ready to import your game file.</p><p>  开始，您必须通过开始新项目的形式。这是从文件中完成的 - ＆gt;新项目... 。为您的项目提供名称和位置，您已准备好导入您的游戏文件。</p><p> To do that you’ll want to find the location of your  ck3.exe file. Mine is a steam version and can be found in  D:\SteamLibrary\steamapps\common\Crusader Kings III\binaries but you may have to do some hunting to find yours.</p><p> 要做到，您要查找CK3.exe文件的位置。我是一个蒸汽版本，可以在D：\ SteamLibrary \ Seamapps \普通\ Crusader国王III \二进制文件中找到，但你可能需要做一些狩猎来找到你的。 </p><p> Once you’ve found your  ck3.exe file, you can import it through the  File -&gt; Import File... interface. That should leave you looking at something like this:</p><p>一旦找到了CK3.exe文件，您就可以通过文件导入 - ＆gt;导入文件... interface。这应该让你看看这样的东西：</p><p>  On hitting OK and loading your binary, you will be greeted with a report that you can OK through, and a new file in your Active Project pane. Double click that file to start the real fun.</p><p>  在击中确定并加载您的二进制文件，您将被打招呼通过您可以通过的报告以及活动项目窗格中的一个新文件。双击该文件以启动真正的乐趣。</p><p> The interface for Ghidra is intimidating when first encountered, but is pretty straightforward with a little experience. Just remember that if you accidentally exit from a navigation pane, you can usually bring it back with the Windows option on the top-bar.</p><p> Ghidra的界面在第一次遇到时令人生畏，但很简单，有一点经验。只要记住，如果您意外退出导航窗格，您通常可以将其带回顶部条上的Windows选项。</p><p> On opening a binary for the first time, you’ll be prompted to start an analysis:</p><p> 在首次开放二进制时，系统将提示您开始分析：</p><p>  Ghidra can analyze a lot of things about a file. If you’re not sure yet what you’re looking for, the simplest way to proceed it to accept the defaults and hit Analyze. For a binary the size of  ck3.exe, this will take  a while. I left mine running overnight. Once analysis is finished, you’ll want to hit the save button in the upper left if you want any of that analysis to still be there on reopening.</p><p>  Ghidra可以分析很多关于文件的东西。如果您不确定您正在寻找什么，则最简单的方法可以接受默认值并点击分析。对于二进制大小的CK3.exe的大小，这将需要一段时间。我离开了我的跑步过夜。一旦分析完成，如果您希望任何分析仍然在重新开放时，您将希望在左上方的保存按钮。</p><p>  From there the whole world opens up. The hardest part of reverse engineering a particular feature can sometimes be figuring out where to start. Luckily we do have a lead: the very error message that started this. Commonly used text is often stored as a sequence in a program’s file. Text like  Svend Estrid of k_denmark is probably generated dynamically, but text like  is not allowed to marry is likely stored in the file itself.</p><p>  从那里整个世界开放了。逆向工程的最困难的部分特定特征有时可以弄明出从哪里开始。幸运的是，我们确实有一个领导：启动这个的非常错误消息。常用的文本通常在程序文件中存储为序列。像k_denmark的Svend Estrid这样的文本可能是动态生成的，但不允许嫁接的文本可能存储在文件本身中。</p><p> From the menu bar, select  Search -&gt; For Strings... and click Search with default options. From there, you can search for a string of text with the Filter box. Once initialized, this will (slowly) search the game file for any strings that match your filter.</p><p> 从菜单栏中，选择搜索 - ＆gt;对于字符串...并单击“使用默认选项的搜索”。从那里，您可以使用过滤框搜索一串文本。初始化后，这将（慢慢地）搜索游戏文件的任何与过滤器匹配的字符串。 </p><p>  And we’re in luck! Double clicking that line item will bring you to the text string in the Listing pane (in the other window, get used to switching windows).</p><p>我们运气了！双击该行项将带您到列表窗格中的文本字符串（在其他窗口中，用于切换Windows）。</p><p>  This shows some information about our string of text at its location in memory. Now the string itself doesn’t tell us much. We’re more interested in the text  using the string. By right clicking on the highlighted line, you can select  References -&gt; Show References to Address to find those.</p><p>  这将显示一些关于我们在内存中的位置的文本字符串的一些信息。现在字符串本身并没有告诉我们很多。我们对使用字符串的文本更感兴趣。通过右键单击突出显示的行，您可以选择引用 - ＆gt;显示引用地址查找那些。</p><p>  Looks like there are two places referencing it in memory. We may as well start with the first one. Double-click the first line item to go to its location. In your main window, this should open the location in both the Listing and Decompile panes (if you do not have a Decompile pane, you can open one with  Window -&gt; Decompile).</p><p>  看起来有两个地方引用内存中的位置。我们也可以从第一个开始。双击第一行项目以转到其位置。在主窗口中，这应该打开列表和分解窗格中的位置（如果您没有分解窗格，可以使用窗口打开一个 - ＆gt;反编译）。</p><p>  Now there’s a lot of gibberish that gets spit out in the Decompile pane. Games like CK3 are usually made with a programming language like C++, and when distributed developers normally strip the names of functions and variables out of their game files to make those files smaller. To compensate, Ghidra just gives dummy names to most things.</p><p>  现在有很多痛苦的痛苦在反编译窗格中吐出来。像CK3这样的游戏通常用C ++这样的编程语言制作，当分布式开发人员通常剥离他们的游戏文件中的函数和变量的名称，以使这些文件更小。为了补偿，Ghidra只是给大多数事情都有假的名字。</p><p> One interesting thing about reverse-engineering a binary is that you often  don’t need to know what most of that gibberish means. In our case, we can scroll down until we see the line with our string.</p><p> 关于逆向工程的一个有趣的事情是，二进制文件是你经常不需要知道大部分痛苦的手段。在我们的情况下，我们可以向下滚动，直到我们看到与我们的字符串的行。</p><p>  We could examine the function being called by clicking on  FUN_14034cb90 (spoiler, it mostly just prints the error), but we’re more interested in keeping it from running at all. Scrolling up to the top of the if-block this function is in, we see this:</p><p>  我们可以通过单击Fun_14034CB90（Spoorer，它主要只是打印错误）来检查正在调用的功能，但我们更感兴趣地保持其运行。滚动到if-block的顶部此功能已在，我们看到这个：</p><p>  So  cVar2 is the result of the function  FUN_140a1b9c0 , and if that result is zero, the error handling code is triggered. Given that the error is about how two characters can’t marry, it’s a good bet that  lVar7 and  lVar3 are the two characters being checked. If we double-click on  FUN_140a1b9c0 , we can take a look inside of it.</p><p>  因此，CVAR2是函数fun_140a1b9c0的结果，如果该结果为零，则触发错误处理代码。鉴于错误是关于两个角色如何不结婚的问题，它是一个很好的赌注，即LVAR7和LVAR3是被检查的两个字符。如果我们双击fun_140a1b9c0，我们可以看看它的内部。 </p><p> Now this is where some knowledge of C programming really helps. We’re looking for a spot where our input parameters are compared to each other, and a zero is returned. Near the top of the function, I find a block like this:</p><p>现在这是C编程的一些了解真的有帮助。我们正在寻找一个我们的输入参数相互比较的位置，返回零。在函数的顶部附近，我找到了这样的块：</p><p>  This takes our inputs (which we assume are character structures of some kind) and compares the byte at offset  0x124 in each of them. If those bytes are equal, the whole function returns zero. This looks like it  could be comparing character gender, as long as a character’s gender can fit in a single byte (and I know from some playing with  Cheat Engine that it’s actually a single  bit, 0 for male and 1 for female).</p><p>  这将取得我们的输入（我们假设是某种字符结构），并将它们的每个偏移0x124的字节进行比较。如果这些字节相等，则整个函数返回零。这看起来可能是比较角色性别的，只要角色的性别可以适合一个字节（而且我知道从一些玩作用发动机，它实际上是单一的，男性和女性1个。</p><p>  The best way to see if we’re right about our if-statement is to try bypassing it. Clicking on the “if” in the Decompiler pane will bring the Listing pane to the corresponding assembly instruction.</p><p>  看到我们是否正确的最佳方式是我们的if-yex-matemate是尝试绕过它。单击“Decompiler”窗格中的“IF”将将列表窗格带到相应的装配指令。</p><p>  This is as low-down as we can get when examining a binary.  JZ is short for “Jump if Zero”. It takes the result of a previous comparison (in this case our two genders), and jumps to a new position in memory if that comparison results in a zero (which it will if the genders are equal). If we were to follow the black line at the left side of the instruction, it would lead us to some code that makes the function return zero.</p><p>  当检查二进制文件时，这可以降低。 JZ是“跳零跳”的短暂。它需要一个上一个比较（在这种情况下我们的两个是个体），如果该比较导致零（如果致命符相等，则跳转到内存中的新位置。如果我们要遵循指令左侧的黑线，它将导致我们的一些代码，使函数返回零。</p><p> One way to remove an instruction like this is to change where it jumps to. To do this, right click the line in the Listing pane and select  Patch Instruction .</p><p> 删除这样的指令的一种方法是改变它跳转的地方。为此，请右键单击“列表”窗格中的行，然后选择“修补程序指令”。</p><p>  Notice that the jump location now looks a lot like a memory location. If we want our  JZ instruction to never jump, we can change its jump location to the very next line at  140a1ba00 . That way it will end up there whether or not our character genders are equal.</p><p>  请注意，跳跃位置现在看起来很像内存位置。如果我们希望我们的JZ指令永远不会跳转，我们可以将其跳转位置更改为140A1BA00的下一行。这种方式，它将最终是我们的角色的性别等于。</p><p>  Notice that the arrow to the left has changed to the new jump location. Once Ghidra has finished decompiling the function again, the if-statement we were editing should no longer be there.</p><p>  请注意，左侧的箭头已更改为新的跳转位置。一旦Ghidra再次完成了函数，我们编辑的if-stalate应该不再存在。 </p><p>  All of this editing so far has just been within our Ghidra project. If we want to test our change, we need to get it back into the binary. Ghidra has some known issues exporting files in the form we’re using, so we’ll want to make use of a  free script to compensate.</p><p>到目前为止所有这些编辑都刚刚在我们的Ghidra项目中。如果我们想测试我们的更改，我们需要将其恢复到二进制文件中。 Ghidra有一些已知的问题导出我们使用的表单中的文件，因此我们希望利用免费脚本来补偿。</p><p> The official instructions at that link didn’t work for me, so I placed my  SavePatch.py file into my  &lt;Ghidra Installation Directory&gt;\Ghidra\Features\Python\ghidra_scripts\ folder. Once there, you need to  drag select your line of assembly in the Listing pane so that the whole thing is green. Then click on the Script Manager button near the top of the interface:</p><p> 该链接的官方指示对我不起作用，因此我将SavePatch.py​​文件放入我的＆gt; ghidra \ features \ python \ ghidra_scripts \ folder \ folder。在那里，您需要拖动列表窗格中的组件行，以便整个东西是绿色的。然后单击界面顶部附近的脚本管理器按钮：</p><p>  Enter “SavePatch” into the Finder bar and you should see the downloaded script.</p><p>  在Finder Bar中输入“SavePatch”，您应该看到下载的脚本。</p><p>  Double-click on the found line item, and you should be prompted to select a file. Path to the  ck3.exe file that you originally imported and select it (you may wish to copy it somewhere else as a backup first). If all this goes correctly, your game on-disk should be patched with our modified jump instruction.</p><p>  双击找到的行项目，应提示您选择文件。您最初导入并选择它的CK3.exe文件的路径（您可能希望将其另存为备份的其他位置。如果所有这些都正确，您的磁盘游戏应使用已修改的跳转指令进行修补。</p><p> If we jump back in-game and try to  do_ye_a_marriage the king of Sweden again, we…</p><p> 如果我们跳回游戏，试着再次尝试瑞典之王，我们......</p><p> … still get nothing. But we do have a new message in the error log:</p><p> ......仍然没有什么。但我们确实在错误日志中有一个新的消息：</p><p>   It looks like the Paradox developers have some additional checks for their own usage. We can use the same method on this one though.  Search -&gt; For Strings... , filter on “Can only marry characters of different gender”, then on that string  References -&gt; Show References to Address .</p><p>   它看起来像悖论开发人员对自己的使用有一些额外的检查。我们可以在这个上使用相同的方法。搜索 - ＆gt;对于字符串...，过滤“只能嫁给不同性别的字符”，然后就是那个字符串引用 - ＆gt;显示参考地址。 </p><p>  This time there’s only one. Now that we have an idea what to look for, the relevant code in this function is easy to find.</p><p>这次只有一个。既然我们有一个想法要寻找什么，这个函数中的相关代码很容易找到。</p><p>  This is a similar construction to the first one. It compares our two parameters at  0x124 and checks if they’re equal. Selecting our “if” the corresponding assembly looks a little different:</p><p>  这是第一个类似的结构。它将我们的两个参数与0x124进行了比较，并检查它们是否相等。选择我们的“如果”相应的装配看起来有点不同：</p><p>  Our highlighted instruction is a  JNZ or “Jump if Not Zero” instruction, and the arrow is pointing  past our “Can only marry” string. So we want this instruction to  always jump instead of never jump. To do that, once again right-click the highlighted line and select  Patch Instruction . Next change the  JNZ to  JMP , which is the instruction for an unconditional jump.</p><p>  我们突出显示的指令是JNZ或“跳跃，如果不是零”指令，箭头指向我们的“只能嫁给”字符串。所以我们希望这个指令总是跳，而不是永远不会跳。为此，再次右键单击突出显示的行，然后选择“修补程序指令”。接下来将JNZ更改为JMP，这是无条件跳转的指令。</p><p>  To apply to your game, follow the same process of highlight, Script Manager, and select SavePatch.py.</p><p>  要应用于您的游戏，请遵循相同的突出显示，脚本管理器，并选择savepatch.py​​。</p><p>   … we can finally, after all that, get the personal union of Denmark-Sweden that we always knew we wanted.</p><p>   ......毕竟，我们最终可以获得丹麦 - 瑞典的个人联盟，我们始终知道我们想要。</p><p> The patch I originally posted had this change and several others to enable same-sex couples to jointly adopt. They all used the same assembly tricks though.</p><p> 我最初发布的修补程序有这种变化和其他几个能够联合采用的同性伴侣。他们都使用了相同的装配技巧。</p><p>  But is that all these changes do? CK3 has the checks that we removed duplicated in the script files, so the base game shouldn’t see any change at all. I’ve played for a decent amount of time with some simple gay-marriage mods, and so far the only outstanding bug I’ve noticed is this:</p><p>  但这是所有这些变化吗？ CK3具有在脚本文件中删除的检查，因此基本游戏根本不应该看到任何更改。我用一些简单的同性恋婚姻模式玩了一段体面的时间，到目前为止我注意到的唯一出色的错误是这样的： </p><p>  It turns out that the CK3  marry effect doesn’t have a specific check against marrying yourself. Some effects, like  set_father will explicitly prevent a character from becoming their own father, but any given character is always the same gender as themselves, so the gay-marriage block was also serving as the self-marriage block. Any modders will probably want to check for this explicitly in their mods.</p><p>事实证明，CK3嫁给效果并没有针对嫁给自己的特定检查。一些效果，如set_father将明确地阻止角色成为自己的父亲，但任何特定的角色都是与自己同样的性别，因此同性恋汇块也作为自婚块。任何Modders都可能希望在其Mod中明确检查此功能。</p><p>  Even this was pretty stable while I played with it though. Kudos to the CK3 devs, their engine is quite robust.</p><p>  即使这也很稳定，而我播放它。对CK3开发者来说，他们的发动机非常强大。</p><p> (If any CK3 devs do happen to read this, I would recommend a specific check for self-marriage regardless.)</p><p> （如果任何CK3开发人士确实恰好读到这一点，我会建议无论如何地建议对自婚的特定检查。）</p><p>  But what if you  don’t want to start a career reverse-engineering software? Well, if you happen to have the Windows 10 Steam version of CK3 1.3.1, you can open your  ck3.exe file in a  hex  editor of your  choice to make the following changes:</p><p>  但是如果你不想开始职业逆向工程软件怎么办？嗯，如果您碰巧有CK3 1.3.1的Windows 10 Steam版本，您可以在选择的十六进制编辑器中打开CK3.exe文件，以进行以下更改：</p><p>  Which does the same thing, minus all the digging. Do note the “marrying yourself” issue above when making your mods though (or don’t, if you’re a narcissist).</p><p>  这是同样的事情，减去所有的挖掘。在制作mods时，请注意上面的“嫁给自己”问题（或者如果你是一个自恋器）。</p><p>  I know some people will be frustrated with how Paradox has handled this so far. I know I have been. I would ask though that people  please not harass  individual Paradox employees about this. The ones I’ve chatted with have seemed like nice people.</p><p>  我知道一些人将令人沮丧的是，帕拉多到目前为止如何处理。我知道我已经过了。我会问虽然人们请不要骚扰个人悖论。我聊天的那些似乎是好人。 </p></div><div id="story_share_this"><div class="sharethis-inline-share-buttons"></div></div><div class="text-break sotry_link page_narrow"><a target="_blank" href="https://waffleironer.medium.com/legalizing-gay-marriage-in-crusader-kings-iii-with-ghidra-2602e6aa8689">https://waffleironer.medium.com/legalizing-gay-marriage-in-crusader-kings-iii-with-ghidra-2602e6aa8689</a></div><div class="story_tags page_narrow"><button type="button" class="btn btn-light my_tag"><a href="/tag/crusader/">#crusader</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/gay/">#gay</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/游戏/">#游戏</a></button></div></div><div class="my_movie_list_item shadow p-3 mb-5 bg-white rounded"><button type="button" class="btn btn-link my_tag"><a href="/tag/web2.0/">#web2.0</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/google/">#google</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/设计/">#设计</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/创意/">#创意</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/摄影/">#摄影</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/图片/">#图片</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/游戏/">#游戏</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/软件/">#软件</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/视频/">#视频</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/手机/">#手机</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/广告/">#广告</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/iphone/">#iphone</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/网站/">#网站</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/免费/">#免费</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/下载/">#下载</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/windows/">#windows</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/微软/">#微软</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/firefox/">#firefox</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/blog/">#blog</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/音乐/">#音乐</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/apple/">#apple</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/博客/">#博客</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/苹果/">#苹果</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/wordpress/">#wordpress</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/恶搞/">#恶搞</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/qq/">#qq</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/艺术/">#艺术</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/谷歌/">#谷歌</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/web/">#web</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/工具/">#工具</a></button></div></div></div><div id="my_footer"><div class=""><a href="/tags/">tags</a> <a href="/users/">users</a></div>&copy;2012-2021 diglog.com </div></div></body></html>