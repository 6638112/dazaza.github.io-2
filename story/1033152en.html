<!doctype html><html lang="zh-hans"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Google云功能简介</title><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"><link rel="stylesheet" href="/img/css.css?random="><link data-rh="true" rel="icon" href="/img/favicon.ico"/><script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?03c1a0f31299b4a2fbb83c34d6beaac9";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script><script data-ad-client="ca-pub-6067137220025946" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script type="text/javascript" src="https://platform-api.sharethis.com/js/sharethis.js#property=5effb96910009800120b8d4d&product=inline-share-buttons" async="async"></script></head><body><div id="my_header"><div class="container"><nav class="navbar navbar-expand-lg"><a class="navbar-brand" href="/"><img alt="diglog" src="/img/logo.v1.gif" class="rounded-sm"></a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarNavAltMarkup"><div class="navbar-nav"></div></div></nav></div></div><div class="container"><div id="my_content"><h1 class="page_narrow">Google云功能简介</h1><div class="row"><div class="col-lg-12 col-12"><div class="my_story_list_item shadow p-3 mb-5 bg-white rounded"><div class="story_page_pub_time page_narrow">2020-11-04 18:17:33</div><div class="page_narrow text-break page_content"><p>Before we look into how to use Cloud Functions, we should understand some things about it.</p><p>在我们研究如何使用云函数之前，我们应该了解一些有关它的事情。</p><p> Code needs servers to run, so  serverless doesn’t mean there are no servers, it means that we don’t need to manage those servers ourselves.</p><p>代码需要服务器才能运行，因此无服务器并不意味着没有服务器，它意味着我们不需要自己管理这些服务器。</p><p> In a usual server based architecture, we might create a service and deploy it to a machine. This service will be running in the machine all the time waiting for requests. This has the disadvantage that even if there are no requests, the machine would need to be up, and incurring cost.</p><p>在通常的基于服务器的体系结构中，我们可能会创建一个服务并将其部署到一台机器上。此服务将一直在计算机中运行，等待请求。这有一个缺点，即使没有请求，机器也需要启动，并且会产生成本。</p><p> On the other hand, if we use Cloud Functions, we write a service and register it with Google. Google will then listen to the endpoint this service cares about and will only start it when there are requests. If it detects that there haven’t been requests for some time, it will stop the service again.</p><p>另一方面，如果我们使用云函数，我们会编写一个服务并将其注册到Google。然后，Google将监听该服务关心的端点，并仅在有请求时启动它。如果它检测到有一段时间没有请求，它将再次停止该服务。</p><p> While Google Compute Engine instances are billed by time, Cloud Functions are billed by execution time. If a Cloud Function is not being executed, then it is not being billed. This sounds very attractive, but there are draw backs, namely:</p><p>Google Compute Engine实例按时间计费，云函数按执行时间计费。如果云函数没有执行，则不会计费。这听起来很有吸引力，但也有回调，即：</p><p> Running a Compute Engine instance for a full month is most of the time cheaper than having a Cloud Function executing for one month straight. This means that if we need a service to be always doing work, it’s better to get a whole machine for it.</p><p>在大多数情况下，运行一个Compute引擎实例整整一个月比让一个云函数连续执行一个月更便宜。这意味着，如果我们需要一项服务来始终执行工作，最好是为它配备一台整机。</p><p>  Cloud Functions need to warm up. If a Cloud Function hasn’t been used for a while, Google will stop the server that was running it. Next time we get a new request, a new server needs to be started, which takes some time. This will make this first request take long (This time varies a lot, but usually less than 4 seconds)</p><p>云功能需要预热。如果云功能已有一段时间未使用，谷歌将停止运行该功能的服务器。下次我们收到新请求时，需要启动一个新服务器，这需要一些时间。这将使第一个请求花费很长时间(时间变化很大，但通常不到4秒)。</p><p>   To make it easy to work on our Cloud Function, we need a way to run the function from our development machine.</p><p>为了使使用我们的云函数变得容易，我们需要一种从我们的开发机器运行该函数的方法。</p><p>      package  functions import  (	 &#34;net/http&#34;	 &#34;fmt&#34; ) func  DoYouLikeTacos ( w  http . ResponseWriter ,  r  * http . Request )  {	 fmt . Fprint ( w ,  &#34;Of course I like tacos! \n &#34; ) }</p><p>包函数import(&#34；net/http&34；&#34；fmt&#34；)函数DoYouLikeTacos(w http.。ResponseWriter，r*http。请求){fmt。Fprint(w，&#34；我当然喜欢玉米饼！\n&#34；)}。</p><p> To be able to test our functions from our development machine, we need to create a server. Let’s create a file for it:</p><p>为了能够从我们的开发机器上测试我们的功能，我们需要创建一台服务器。让我们为它创建一个文件：</p><p>   package  main import  (  &#34;log&#34;  &#34;context&#34;  &#34;github.com/GoogleCloudPlatform/functions-framework-go/funcframework&#34;  &#34;test.com/functions&#34; ) func  main ()  {  ctx  :=  context . Background ()  // Our function will be executed when a request to /do-you-like-tacos is received  if  err  :=  funcframework . RegisterHTTPFunctionContext (  ctx ,  &#34;/do-you-like-tacos&#34; ,  functions . DoYouLikeTacos );  err  !=  nil  {  log . Fatalf ( &#34;funcframework.RegisterHTTPFunctionContext: %v \n &#34; ,  err )  }  // The server will run on port 8080  port  :=  &#34;8080&#34;  if  err  :=  funcframework . Start ( port );  err  !=  nil  {  log . Fatalf ( &#34;funcframework.Start: %v \n &#34; ,  err )  } }</p><p>程序包主导入(&#34；log&#34；&#34；Context&#34；&#34；github.com/GoogleCloudPlatform/functions-framework-go/funcframework&#34；&#34；test.com/Functions&#34；)func Main(){ctx：=Context。后台()//如果err：=funcframework，则当收到对/do-you-like-tacos的请求时，将执行我们的函数。RegisterHTTPFunctionContext(CTX，&34；/Do-You-Like-Tacos&#34；，Functions.。DoYouLikeTacos)；err！=nil{log.。Fatalf(&#34；funcframework.RegisterHTTPFunctionContext：%v\n&#34；，err)}//如果err：=funcframework，服务器将在端口8080port：=&#34；8080&#34；上运行。Start(Port)；err！=nil{log.。Fatalf(&#34；funcFrawork.Start：%v\n&#34；，err)}}。</p><p>       This example is very simple, but we can have our fucntion do whatever we want.</p><p>这个例子很简单，但是我们可以让我们的函数做任何我们想做的事情。</p><p> We can also add more functions by adding more files and updating our  main.go server. Let’s create another function just to show it.</p><p>我们还可以通过添加更多文件和更新main.go服务器来添加更多功能。让我们创建另一个函数来显示它。</p><p>     if  err  :=  funcframework . RegisterHTTPFunctionContext (  ctx ,  &#34;/thirsty&#34; ,  functions . Thirsty );  err  !=  nil  {  log . Fatalf ( &#34;funcframework.RegisterHTTPFunctionContext: %v \n &#34; ,  err )  }</p><p>如果err：=funcframework。RegisterHTTPFunctionContext(CTX，&#34；/Thirsted&#34；，Functions。口渴)；错误！=零{记录。Fatalf(&#34；funcframework.RegisterHTTPFunctionContext：%v\n&#34；，Err)}。</p><p>      Once we have our functions ready, we want to make them available to the public by deploying them to Google Cloud.</p><p>一旦我们的功能准备就绪，我们希望通过将它们部署到Google Cloud来向公众提供这些功能。</p><p>   This will spit out a bunch of information. The most important part is the URL:</p><p>这会吐出一堆信息。最重要的部分是URL：</p><p>    Let’s take a closer look to the command we used to deploy our function:</p><p>让我们仔细看看我们用来部署函数的命令：</p><p>  DoYouLikeTacos is the name of the function we are deploying. The tool will search the package for a function with that name.</p><p>DoYouLikeTacos是我们正在部署的函数的名称。该工具将在包中搜索具有该名称的函数。</p><p>  --runtime go113 tells google to use Golang 11.3. We can see the available runtimes in the help ( gcloud functions deploy --help)</p><p>--运行时go113告诉Google使用Golang 11.3。我们可以在帮助中看到可用的运行时(gcloud Functions Deploy--help)。</p><p>    --allow-unauthenticated means that the function will be available for everybody without authentication. Note that the function code itself could expect some kind of authentication independently of this flag</p><p>--ALLOW-UNENTIFIATED表示该功能无需身份验证即可供所有人使用。请注意，功能代码本身可以独立于此标志进行某种身份验证。</p><p>  This was a quick introduction to Google Cloud Functions. We learned how to create a function, test it locally and deploy it to Google Cloud.</p><p>这是对Google Cloud函数的快速介绍。我们学习了如何创建函数、在本地测试以及如何将其部署到Google Cloud。</p><p> Complete applications can be built using Cloud Functions, so I’ll explore a little more in another article.</p><p>可以使用云函数构建完整的应用程序，因此我将在另一篇文章中详细介绍。</p><p>  [    architecture     gcp     programming  ]</p><p>[架构-GCP-编程指南]</p></div><div id="story_share_this"><div class="sharethis-inline-share-buttons"></div></div><div class="text-break sotry_link page_narrow"><a target="_blank" href="https://ncona.com/2020/11/introduction-to-google-cloud-functions/">https://ncona.com/2020/11/introduction-to-google-cloud-functions/</a></div><div class="story_tags page_narrow"><button type="button" class="btn btn-light my_tag"><a href="/tag/google/">#google</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/功能/">#功能</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/函数/">#函数</a></button></div></div><div class="shadow p-3 mb-5 bg-white rounded clearfix"><div class="container"><div class="row"><div class="col-sm"><div><a target="_blank" href="/story/1033136.html"><img src="http://img2.diglog.com/img/2020/11/thumb_b67e90f9c06a813de38747c71ccc4e26.jpg" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1033136.html">阿姆鲁·阿瓦达拉(Amr Awadallah)：Cloudera创始人，谷歌副总裁：未来是安东斯</a></div><span class="my_story_list_date">2020-11-4 15:31</span></div><div class="col-sm"><div><a target="_blank" href="/story/1033058.html"><img src="http://img2.diglog.com/img/2020/11/thumb_62ed6b7bf48300151c7134ae4dcce658.jpeg" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1033058.html">Google Play禁止YouTube替代比特流的第三方应用</a></div><span class="my_story_list_date">2020-11-4 6:12</span></div><div class="col-sm"><div><a target="_blank" href="/story/1033046.html"><img src="http://img2.diglog.com/img/2020/11/thumb_016e7ec0afee88314238d0cd07d8ff06.jpg" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1033046.html">谷歌修复了另外两个被活跃利用的Chrome零日</a></div><span class="my_story_list_date">2020-11-4 5:11</span></div><div class="col-sm"><div><a target="_blank" href="/story/1032996.html"><img src="http://img2.diglog.com/img/2020/11/thumb_ea41dcf2705b1faf0b194bffeca434f6.jpg" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1032996.html">谷歌对GitHub：时间到了--这个未修复的“高度严重”安全漏洞影响了开发人员</a></div><span class="my_story_list_date">2020-11-4 0:27</span></div></div></div></div><div class="my_movie_list_item shadow p-3 mb-5 bg-white rounded"><button type="button" class="btn btn-link my_tag"><a href="/tag/web2.0/">#web2.0</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/google/">#google</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/设计/">#设计</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/游戏/">#游戏</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/创意/">#创意</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/apple/">#apple</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/苹果/">#苹果</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/摄影/">#摄影</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/软件/">#软件</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/美国/">#美国</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/iphone/">#iphone</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/图片/">#图片</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/手机/">#手机</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/视频/">#视频</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/广告/">#广告</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/免费/">#免费</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/谷歌/">#谷歌</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/网站/">#网站</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/windows/">#windows</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/微软/">#微软</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/下载/">#下载</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/firefox/">#firefox</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/音乐/">#音乐</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/linux/">#linux</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/blog/">#blog</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/博客/">#博客</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/程序/">#程序</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/艺术/">#艺术</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/web/">#web</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/wordpress/">#wordpress</a></button></div></div></div><div id="my_footer"><div class=""><a href="/tags/">tags</a> <a href="/users/">users</a></div>&copy; 2020 diglog.com </div></div></body></html>