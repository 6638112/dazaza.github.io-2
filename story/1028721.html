<!doctype html><html lang="zh-hans"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>世嘉大师系统架构的实践分析</title><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"><link rel="stylesheet" href="/img/css.css?random="><link data-rh="true" rel="icon" href="/img/favicon.ico"/><script data-ad-client="ca-pub-6067137220025946" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script type="text/javascript" src="https://platform-api.sharethis.com/js/sharethis.js#property=5effb96910009800120b8d4d&product=inline-share-buttons" async="async"></script>
<script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?03c1a0f31299b4a2fbb83c34d6beaac9";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script></head><body><div id="my_header"><div class="container"><nav class="navbar navbar-expand-lg"><a class="navbar-brand" href="/"><img alt="diglog" src="/img/logo.v1.gif" class="rounded-sm"></a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarNavAltMarkup"><div class="navbar-nav"></div></div></nav></div></div><div class="container"><div id="my_content"><h1 class="page_narrow">世嘉大师系统架构的实践分析</h1><div class="row"><div class="col-lg-12 col-12"><div class="my_story_list_item shadow p-3 mb-5 bg-white rounded"><div class="story_page_pub_time page_narrow">2020-10-14 19:40:52</div><div class="story_img_container"><a href="http://img2.diglog.com/img/2020/10/923f2bbf27a5121bf172eb17e0d843b2.png"><img src="http://img2.diglog.com/img/2020/10/923f2bbf27a5121bf172eb17e0d843b2.png" class="img-fluid my_story_img" onerror="this.style.display='none'"></a></div><div class="page_narrow text-break page_content"><p>主人制来自于一长串的继承人。由于世嘉的工程设计，它最初只是一批现成的零部件，现在已经获得了一个新的身份。</p><p>一开始，当我读到世嘉最终推出的不同型号时，我有点困惑，所以下面是为避免进一步混淆而讨论的主要型号的摘要：</p><p>世嘉主控系统(欧洲和美国)：更名为Mark III，配有新外壳、BIOS ROM芯片和不同的墨盒插槽。</p><p>世嘉主控系统(日本)：欧洲/美国主控系统，带有Mark III的墨盒插槽、新的调频芯片和用于“3D眼镜”的插孔端口。但是，它没有重置按钮。</p><p>从现在开始，我将使用术语“主系统”或“短信”来指代所有这些功能，除非涉及到特定型号的独有功能。</p><p>世嘉决定采用功能齐全的Zilog Z80 CPU，运行频率约为3.58 MHz。这是ZX Spectrum和Amstrad CPC等其他机器的热门选择。Z80具有与Intel8080兼容的指令集，但扩展了更多指令。</p><p>文章开头的主板图片显示的是NEC D780C-1 CPU，这只是SEGA将芯片二次外包给不同的制造商，其他版本甚至包括Zilog制造的芯片。但是对于本文来说，谁制造CPU并不重要，因为内部特性保持不变。</p><p>Z80具有16位地址总线，因此CPU可以找到高达64KB的内存。在内存映射中，您会发现8KB的RAM用于一般用途，这被镜像到另一个8KB的块中。最后，还映射了高达48KB的游戏ROM。</p><p>正如您可以从上一段中读到的，在地址空间中只找到主RAM和一些盒式ROM，那么程序如何访问其他组件呢？嗯，与任天堂的Famicom/NES不同，并不是主系统的所有硬件都是使用内存位置映射的。相反，一些外围设备位于I/O空间。</p><p>这是因为Z80系列包含一个称为I/O端口的有趣功能，它使CPU能够与其他硬件通信，而不会耗尽内存地址。为此，有一个单独的地址空间用于“I/O设备”，称为端口，两者共享相同的数据和地址总线。然而，不同之处在于端口分别使用IN和OUT指令读取和写入-与传统的加载/存储指令(LD)相反。</p><p>当执行IN或OUT指令时，Z80设置指向外围设备(例如，键盘)的地址线，标记其IORQ引脚以指示已启动I/O请求，并且还分别标记RD引脚或WR引脚是IN指令还是OUT指令。寻址的外设必须手动检查地址总线和I/O引脚，并执行所需的操作。在IN指令的情况下，CPU将把接收到的值存储在预定义的寄存器中。</p><p>SEGA将CPU与其余组件互连的方式不仅可以访问值，还可以显示/隐藏某些组件，使其不会出现在内存映射中。</p><p>奇怪的是，Game Boy有一个Z80“变种”，完全省略了I/O端口。因此，它必须适合内存映射中的所有内容。</p><p>该控制台的架构与其前身世嘉SG-1000非常相似，因此主系统设法获得了与SG-1000的向后兼容性。不过，这只适用于日本机型，因为其他机型包含不同的墨盒插槽。</p><p>屏幕上的图形是由一种名为视频显示处理器(VDP)的专有芯片产生的。在内部，它与德州仪器TMS9918(在SG-1000中使用)具有相同的设计，但增强了更多功能，我们将在以下部分讨论这些功能。</p><p>VDP旁边连接着16 KB的VRAM，只有VDP才能使用16位数据总线访问该VRAM。如果你再看一遍主板图片，你会注意到RAM和VRAM芯片大致相同，只是VRAM使用的芯片型号以‘20’结尾，延迟较低。</p><p>在主系统中，VRAM包含VDP渲染所需的所有内容(彩色RAM除外)。CPU通过写入VDP的寄存器来填充VRAM，而VDP的寄存器又会将值转发到VRAM。由于VDP是使用I/O端口访问的，因此CPU必须使用IN和OUT指令。</p><p>VDP渲染分辨率高达256x192像素的帧，进一步修订添加了对256x224像素和256x240像素的支持，但是为了保持与所有型号的兼容性，开发人员坚持使用标准分辨率。这种芯片与任天堂的PPU有着相同的工作方式，换句话说，图形是就地渲染的。</p><p>另一方面，VDP有四种不同的操作模式，它们将改变帧的特性(颜色深度和分辨率)：</p><p>模式0至模式III：继承自SG-1000上的TMS9918。包括向后兼容性，尽管任何SMS游戏都可以使用它们。</p><p>模式IV：主系统的本机模式，允许访问VDP的所有最先进功能。为了进行分析，我们将重点放在这一点上！</p><p>现在让我们看看框架是如何一步一步画出来的，为此，我将借用刺猬Sonic的资产。此外，为了便于解释，我将重点介绍世嘉建议的用于组织图形内容的标准内存布局(只需记住，VDP在这方面非常灵活，因此允许游戏对其进行优化)。</p></div><div id="story_share_this"><div class="sharethis-inline-share-buttons"></div></div><div class="text-break sotry_link page_narrow"><a target="_blank" href="https://www.copetti.org/projects/consoles/master-system/">https://www.copetti.org/projects/consoles/master-system/</a></div><div class="story_tags page_narrow"><button type="button" class="btn btn-light my_tag"><a href="/tag/大师/">#大师</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/master/">#master</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/cpu/">#cpu</a></button></div></div><div class="shadow p-3 mb-5 bg-white rounded clearfix"><div class="container"><div class="row"><div class="col-sm"><div><a target="_blank" href="/story/1023732.html"><img src="http://img2.diglog.com/img/2020/9/thumb_acc894ab42df4a30b39fcbc99a9dd3a0.jpg" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1023732.html">Krzysztof KieśLowski关于电影制作的采访(1994年)[视频]</a></div><span class="my_story_list_date">2020-9-14 2:45</span></div><div class="col-sm"><div><a target="_blank" href="/story/1021628.html"><img src="http://img2.diglog.com/img/2020/9/thumb_f361d65413357857d3f40b45b862f585.jpg" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1021628.html">如何学习一切：大师班日记</a></div><span class="my_story_list_date">2020-9-2 3:41</span></div><div class="col-sm"><div><a target="_blank" href="/story/1020647.html"><img src="http://img.diglog.com/img/2020/8/thumb_9f106e34a9091dea7a7c5e3e019b78cf.png" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1020647.html">BBC大师服用类固醇</a></div><span class="my_story_list_date">2020-8-27 18:12</span></div><div class="col-sm"><div><a target="_blank" href="/story/1002521.html"><img src="http://img.diglog.com/img/2020/5/thumb_0e208a4b969ed3501e320004b85de749.jpg" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1002521.html">“假大师的崛起”(2020纪录片)</a></div><span class="my_story_list_date">2020-5-17 21:19</span></div></div></div></div><div class="my_movie_list_item shadow p-3 mb-5 bg-white rounded"><button type="button" class="btn btn-link my_tag"><a href="/tag/web2.0/">#web2.0</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/google/">#google</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/设计/">#设计</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/创意/">#创意</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/摄影/">#摄影</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/游戏/">#游戏</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/图片/">#图片</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/软件/">#软件</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/视频/">#视频</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/手机/">#手机</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/广告/">#广告</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/apple/">#apple</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/iphone/">#iphone</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/网站/">#网站</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/免费/">#免费</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/下载/">#下载</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/windows/">#windows</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/微软/">#微软</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/firefox/">#firefox</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/苹果/">#苹果</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/blog/">#blog</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/音乐/">#音乐</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/博客/">#博客</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/wordpress/">#wordpress</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/恶搞/">#恶搞</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/艺术/">#艺术</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/qq/">#qq</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/web/">#web</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/谷歌/">#谷歌</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/工具/">#工具</a></button></div></div></div><div id="my_footer"><div class=""><a href="/tags/">tags</a> <a href="/users/">users</a></div>&copy;2012-2021 diglog.com </div></div></body></html>