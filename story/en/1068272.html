<!doctype html><html lang="zh-hans"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>为什么文本终端光标对于可访问性很重要 Why the text terminal cursor is important for Accessibility</title><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"><link rel="stylesheet" href="/img/css.css?random="><link data-rh="true" rel="icon" href="/img/favicon.ico"/><script data-ad-client="ca-pub-6067137220025946" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script type="text/javascript" src="https://platform-api.sharethis.com/js/sharethis.js#property=5effb96910009800120b8d4d&product=inline-share-buttons" async="async"></script>
<script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?03c1a0f31299b4a2fbb83c34d6beaac9";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script></head><body><div id="my_header"><div class="container"><nav class="navbar navbar-expand-lg"><a class="navbar-brand" href="/"><img alt="diglog" src="/img/logo.v1.gif" class="rounded-sm"></a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarNavAltMarkup"><div class="navbar-nav"></div></div></nav></div></div><div class="container"><div id="my_content"><h1 class="page_narrow">Why the text terminal cursor is important for Accessibility<br/>为什么文本终端光标对于可访问性很重要 </h1><div class="row"><div class="col-lg-12 col-12"><div class="my_story_list_item shadow p-3 mb-5 bg-white rounded"><div class="story_page_pub_time page_narrow">2021-06-26 01:12:40</div><div class="page_narrow text-break page_content"><p>Most terminal user interfaces can be used by blind users pretty easily. But why is that, actually? After all, the content of a terminal is pretty much unstructured data. A rectangular grid of characters with no extra information except colours. But is that really true?</p><p>大多数终端用户界面可以很容易地使用盲人用户使用。但为什么这么实际上？毕竟，终端的内容非常非结构化数据。除了颜色之外，没有额外信息的字符矩形网格。但真的是真的吗？</p><p> The most important bit of metadata for a terminal screen reader is actually the cursor location. This is the one bit of information that is required to make a unstructured grid of characters surprisingly useful to a person mostly constraint to linear reading.</p><p> 终端屏幕阅读器的最重要元数据实际上是光标位置。这是使令人惊讶的字符网格令人遗憾的是一个人的一个信息，这主要是限制线性读数。</p><p> The terminal cursor acts as the focus. It indicates which part of the screen is currently being edited or selected. For editors, this is a pretty well understood concept. Where the cursor is, the next character will be inserted. However, there is more to a  text-based user interface then just editing fields. And the cursor is not always visible.</p><p> 终端光标充当焦点。它表示目前正在编辑或选择哪个部分屏幕。对于编辑来说，这是一个非常良好的理念。在光标是，下一个字符将插入。但是，基于文本的用户界面等于仅编辑字段。光标并不总是可见的。</p><p>  A while ago, I looked at the  brick terminal UI library for Haskell. When I tried its various  demo programs, I noticed that  my screen reader was reporting the cursor being in the lower right corner of the application when a menu item was selected. I had to manually investigate the screen and look at attributes (colours) to figure out which item in a list was currently selected. Amongst BRLTTY developers, we’ve decided long ago to not work around these issues on the screen reader side, rather try and make use of open source and fix the problems whenever we see them in the wild. Behind the scenes, we have fixed a bunch of frameworks and applications to place the cursor at the locus of focus. So I set out to understand brick internals to fix this.</p><p>  久前，我看过哈克尔的砖码UI库。 When I tried its various  demo programs, I noticed that  my screen reader was reporting the cursor being in the lower right corner of the application when a menu item was selected.我不得不手动调查屏幕并查看属性（颜色）以弄清楚当前选择了列表中的哪个项目。在Brltty开发人员中，我们很久以前就决定了在屏幕阅读器方面不在这些问题上工作，而是尝试使用开源并在野外看到它们时解决问题。在幕后，我们修复了一堆框架和应用程序，将光标放在焦点轨迹处。所以我开始了解砖内的内部，以解决这个问题。</p><p>  brick works different from most TUI frameworks I know. You don’t have a single cursor which you set to a particular location. Rather, all the different components drawn on the screen can declare their own cursor location, and the composition mechansim ultimately chooses which cursor should be used.</p><p>  砖与我所知道的大多数Tui框架不同。您没有您设置为特定位置的单个光标。相反，屏幕上绘制的所有不同组件都可以声明自己的光标位置，并且组合机Mechansim最终选择应该使用哪种光标。</p><p> This, while being pretty flexible, looked fundamentally wrong to me. Why? It doesn’t reflect the reality of a terminal.</p><p> 这一点，虽然是漂亮的灵活性，看起来对我来说根本不错。为什么？它没有反映终端的现实。</p><p>  There is no such thing as “no cursor” in a terminal. The cursor might be hidden, so it is not rendered on the screen. But the cursor still has a location where it sits and waits to print the next output character to the screen. A screen reader will pick that location up, no matter if the cursor is visible or hidden.</p><p>  终端中没有“无光标”这样的东西。光标可能是隐藏的，因此它不会在屏幕上呈现。但是光标仍然有一个位置，它坐在，等待打印到屏幕上的下一个输出字符。无论光标都是可见还是隐藏，屏幕阅读器都将选择该位置。 </p><p>  So after patching brick to declare a cursor when rendering certain list items, checkboxes and radio items, I realized the actual missing bit. brick had no concept of cursor visibility. Rather, if the composition mechansim did not see a cursor declared, it would hide the cursor on-screen and “pretend” there was none. However, as we have learnt above, thats just not true and programs like screen readers actually rely on the cursor location to indicate the locus of fucs.</p><p>因此，在修补砖块后声明一个光标在渲染某些列表项时，复选框和无线电项目，我意识到了实际缺失的位。砖没有光标可见性的概念。相反，如果组合机Mechansim没有看到光标声明，它会隐藏屏幕上的光标，并且“假装”没有。但是，正如我们上面了解到的那样，这不是真实的，类似屏幕阅读器的程序实际上依赖于光标位置来指示FUCS的轨迹。</p><p> Raising this issue with the brick maintainer uncovered the fact that the low level  vty library used by brick to do the actual terminal output did not have a concept of a hidden cursor either. Jonathan fixed this in  vty 5.33.</p><p> 提高这个问题与砖维护者揭示了砖块使用的低级VTY库实际终端输出的事实没有隐藏光标的概念。乔纳森在VTY 5.33中修正了这一点。</p><p>  And since vty 5.33 is now in stack LTS, I thought to myself yesterday it is time to finally  add support for invisible cursors to brick.</p><p>  自从VTY 5.33现在在堆栈LTS中，我昨天想到了自己是时候最终增加了对砖块的隐形游标的支持。</p><p> There is now a new function putCursor which has the same type signature as the already existing  showCursor, but will make sure the cursor is not visible on-screen. This can and should be used to place a cursor at the locus of focus, even if that location is already visually indicated by different attributes.</p><p> 现在有一个新的函数Putcursor，它具有与已现有的showcursor相同的类型签名，但将确保光标在屏幕上不可见。这可以并且应该用来将光标放在焦点轨迹处，即使该位置已经通过不同的属性直观地指示。</p><p> The stock widgets that come with brick should now all be screen reader friendly. If you happen to maintain a brick application which provides a render function to something like  renderList, please consider extending it to use showCursor. Once brick 0.64 is released, you can change to putCursor to clean up the visual appearance of your program.</p><p> 带有砖块的股票小部件现在都应该屏幕读者友好。如果您碰巧维护砖应用程序，该应用程序为渲染列表提供渲染功能，请考虑扩展它以使用ShowCursor。一旦砖0.64发布，您可以改为Putcursor以清理程序的视觉外观。 </p></div><div id="story_share_this"><div class="sharethis-inline-share-buttons"></div></div><div class="text-break sotry_link page_narrow"><a target="_blank" href="https://blind.guru/blog/2021-06-25-brick.html">https://blind.guru/blog/2021-06-25-brick.html</a></div><div class="story_tags page_narrow"><button type="button" class="btn btn-light my_tag"><a href="/tag/终端/">#终端</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/terminal/">#terminal</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/光标/">#光标</a></button></div></div><div class="my_movie_list_item shadow p-3 mb-5 bg-white rounded"><button type="button" class="btn btn-link my_tag"><a href="/tag/web2.0/">#web2.0</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/google/">#google</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/设计/">#设计</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/创意/">#创意</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/摄影/">#摄影</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/图片/">#图片</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/游戏/">#游戏</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/软件/">#软件</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/手机/">#手机</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/视频/">#视频</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/广告/">#广告</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/windows/">#windows</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/iphone/">#iphone</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/免费/">#免费</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/网站/">#网站</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/下载/">#下载</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/微软/">#微软</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/blog/">#blog</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/firefox/">#firefox</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/音乐/">#音乐</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/苹果/">#苹果</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/apple/">#apple</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/博客/">#博客</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/wordpress/">#wordpress</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/恶搞/">#恶搞</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/艺术/">#艺术</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/qq/">#qq</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/web/">#web</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/谷歌/">#谷歌</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/工具/">#工具</a></button></div></div></div><div id="my_footer"><div class=""><a href="/tags/">tags</a> <a href="/users/">users</a></div>&copy;2012-2021 diglog.com </div></div></body></html>