<!doctype html><html lang="zh-hans"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>如何在周末建立十亿美元的音频应用程序 How to build a billion dollar audio app in a weekend</title><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"><link rel="stylesheet" href="/img/css.css?random="><link data-rh="true" rel="icon" href="/img/favicon.ico"/><script data-ad-client="ca-pub-6067137220025946" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script type="text/javascript" src="https://platform-api.sharethis.com/js/sharethis.js#property=5effb96910009800120b8d4d&product=inline-share-buttons" async="async"></script>
<script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?03c1a0f31299b4a2fbb83c34d6beaac9";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script></head><body><div id="my_header"><div class="container"><nav class="navbar navbar-expand-lg"><a class="navbar-brand" href="/"><img alt="diglog" src="/img/logo.v1.gif" class="rounded-sm"></a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarNavAltMarkup"><div class="navbar-nav"></div></div></nav></div></div><div class="container"><div id="my_content"><h1 class="page_narrow">How to build a billion dollar audio app in a weekend<br/>如何在周末建立十亿美元的音频应用程序 </h1><div class="row"><div class="col-lg-12 col-12"><div class="my_story_list_item shadow p-3 mb-5 bg-white rounded"><div class="story_page_pub_time page_narrow">2021-03-11 02:43:33</div><div class="story_img_container"><a href="http://img2.diglog.com/img/2021/3/6605e1c0e32be4aafca20465aee260ad.png"><img src="http://img2.diglog.com/img/2021/3/6605e1c0e32be4aafca20465aee260ad.png" class="img-fluid my_story_img" onerror="this.style.display='none'"></a></div><div class="page_narrow text-break page_content"><p>At Daily, we&#39;re seeing a lot of new interest in audio chat and collaboration apps of all kinds. To support people building these apps, we whipped up sample code for a Clubhouse-like (or, Clubhouse-lite) audio room experience on four platforms: web (React), iOS, Android, and React Native. Feel free to try out the  live demo on the web, or browse the  sample code, then come back and read this post ...</p><p>在日常，我们＆＃39;重新看到了很多关于各种音频聊天和协作应用程序的新兴趣。为了支持构建这些应用程序的人，我们在四个平台上掀起了俱乐部（或，Clubhouse-Lite）音频室体验的示例代码：Web（React），iOS，Android和React Native。随意尝试在网上的现场演示，或浏览示例代码，然后回来阅读这篇文章......</p><p> If you clicked on this article because of the title, you’re (probably) one of a few possible types of person. You’re a thirsty entrepreneur, ready to see how you can unlock the future. Maybe you’re the curious type and the short timeframe caught your attention. Or in the most likely case you, dear reader, are like your humble author. You’re a cynical developer who loves SEO and being hyperbolic. Hopefully, you’re all three of these people! 🦄  Unless you’ve been living under a rock (or perhaps an  Android phone), you have undoubtedly heard about some of these audio communities in the news lately. If you haven’t, may I suggest you enter the  Clubhouse, grab a  Cappuccino, and make a  Quilt? Or you might prefer to take a  Roadtrip to the  Rodeo. To put it bluntly, audio is hot right now,  Musk vs. Putin hot.</p><p> 如果您因标题点击本文，您（可能）是几种可能类型的人之一。你是一个口渴的企业家，准备看看你如何解锁未来。也许你是好奇的类型，短时间框架引起了你的注意。或者在最有可能的情况下，亲爱的读者，就像你谦卑的作者。你是一个喜欢SEO并是双曲的愤世嫉俗的开发人员。希望，你是这些人中的三个！ 🦄除非你在岩石下生活（或者也许是一个Android手机），否则你最近在这个消息中听到了一些这些音频社区。如果你没有，我可以建议你进入俱乐部，抓住一个卡布奇诺咖啡，并制作被子？或者您可能更愿意将路线带到牛仔竞技表演。要钝，音频现在很热，麝香与普京热。</p><p> If you’ll humor me, I’d like to start by talking about how we approached building Party Line to begin with. So many &#34;weekend&#34; projects go astray because they don’t fully define goals and expectations. So that’s where we’ll begin.</p><p> 如果你会幽默我，我想首先谈论我们如何进入建筑党线开始。这么多＆＃34;周末＆＃34;项目误入歧途，因为他们没有完全定义目标和期望。所以这就是我们开始的地方。</p><p> Then we’ll talk about the overall flow of our applications. Creating a consistent experience across four platforms was important to us, so we’ve built 4 different demos with a small backend (two serverless functions). Since they all share similar logic, we’ll walk through that before diving into platform-specifics. In each section we’ll link out to the platform specific code if you want to dig deeper.</p><p> 然后我们将讨论我们应用程序的整体流程。在四个平台上创建一致的体验对我们来说很重要，因此我们已经建立了4个不同的演示，具有小后端（两个无服务器功能）。由于它们都分享了类似的逻辑，我们将在潜入平台上的情况下行走。在每个部分中，如果要深入挖掘，我们将向特定于平台的代码链接。</p><p>   Party Line allows you to create audio chat rooms and invite your friends. They can join you as a speaker or just listen. The best part is that it works in most browsers without installing anything. And if you want to ship mobile apps, we’ve got you covered with iOS, Android, and React Native.</p><p>   派对线允许您创建音频聊天室并邀请您的朋友。他们可以作为扬声器加入你或只是倾听。最好的部分是它在大多数浏览器中工作而不安装任何内容。如果您想运送移动应用程序，我们已经让您覆盖了iOS，Android，并反应了本地。</p><p> Since we wanted to build something in a &#34;weekend&#34;, let’s define our goals and call out assumptions to keep the scope manageable.</p><p> 由于我们想要在A＆＃34中建立一些东西;周末＆＃34;让我们定义我们的目标并呼吁保持范围可管理的假设。</p><p>     Now that we have a sense for our MVP scope, let’s look at the overall architecture, from a Daily API perspective.</p><p>     现在我们对我们的MVP范围有一种感觉，让我们从日常API角度看一下整体架构。 </p><p>  Since Daily is doing the heavy lifting for us, we can focus on how we’re interacting with Daily and build our interfaces (more on that later).</p><p>从每天都为我们进行了沉重的举重，我们可以专注于我们如何每天与我们进行交互并建立我们的界面（更稍后更多）。</p><p>        It’s worth noting that for iOS and Android, we’ll be interacting with the methods and events via a WebView &#34;bridge&#34;. In React and React Native, we can call   daily-js and   react-native-daily-js directly.</p><p>        值得注意的是，对于iOS和Android，我们将通过WebView＆＃34与方法和活动进行交互;桥梁＆＃34;在反应和反应本地，我们可以直接调用Daily-JS和React-Native-JS。</p><p>  We’ve put each of the clients in  one convenient repo for you. You’ll notice four folders, one for each of the clients. You can find the folder for our serverless functions inside  /react/server/functions. Each folder contains its own README with platform specific setup instructions. These should be enough to get everything up and running, but let us know if you’d find detailed, platform-specific posts helpful. Open an Issue, create a PR, or just  ping us any time we can help.</p><p>  我们将每个客户放在一个方便的回购中。您将注意到四个文件夹，每个客户端都是一个。您可以找到内部/ React / Server / Function中的无务函数的文件夹。每个文件夹都包含自己的自述文件，具有平台特定的设置说明。这些应该足以让所有东西都奔跑，但如果您找到了详细的，特定于平台的帖子，请告诉我们。打开一个问题，创建一个PR，或者只是在我们可以提供帮助的情况下平时。</p><p>  In general, React and React Native are the most similar, and the most &#34;idiomatic&#34; in terms of how to build with Daily. Android and iOS are included to show what’s possible via &#34;bridging&#34; data to an invisible WebView. The fact that we’re only playing audio tracks makes this a bit more feasible. We’re actively working on native SDKs for mobile, so we welcome any feedback in this area.</p><p>  通常，反应和反应本地是最相似的，最多的＆＃34;惯用＆＃34;在如何每天建立。包括Android和iOS，以显示通过＆＃34;桥接＆＃34;数据到不可见的WebView。我们只是玩音轨的事实使得这有点可行。我们正在积极研究移动的原生SDK，因此我们欢迎在该领域进行任何反馈。</p><p> Follow along on the platform of your choice, or explore each of them simultaneously to see how to approach a cross platform application.</p><p> 在您选择的平台上关注，或同时探索每个人，以了解如何接近跨平台应用程序。</p><p>  🕸 	(React web app)  ⚛ 	(React Native mobile app(s))  🍏 	(iOS mobile app - Swift)  🤖 	(Android mobile app - Kotlin &amp; Java; we&#39;ll link to the Kotlin examples)  🥅 	(Netlify function - Node)   Whenever you see one of these emoji, it will link to the relevant file or line in the repo. Even the ones above. Try it!</p><p>  🕸（React Web App）⚛（React Native Mobile App（S））🍏（iOS移动应用程序 -  Swift）🤖（Android Mobile App  -  Kotlin＆amp; Java;我们＆＃39; LL链接到Kotlin示例）🥅（NetLify函数 - 节点）每当您看到其中一个emoji时，它将链接到repo中的相关文件或行。即使是上面的那些。试试吧！</p><p> First off, follow the README instructions, and start your dev server. ( 🕸  ⚛  🍏  🤖)</p><p> 首先，按照README说明进行操作，然后启动DEV服务器。 （🕸⚛🍏🤖） </p><p> If you’re one of those read-the-last-page-first types, you can see a working demo  here and follow along that way.</p><p>如果您是那些读--最先前的类型之一，您可以在此处看到工作演示并沿这种方式遵循。</p><p>  The first page you are greeted with is a join/create a page. This is the user’s entry point into your application. Here we made a couple assumptions to keep the scope down. First, there’s no authentication or accounts per se. We take privacy  seriously and you should too. So before you take our scrappy demo and deploy it as a production app, please consider how you’ll handle auth and security in general.</p><p>  您接受打招呼的第一页是一个加入/创建一个页面。这是用户进入您的应用程序的入口点。在这里，我们做了一些假设来保持范围。首先，没有身份验证或账户本身。我们认真对待隐私，你也应该。因此，在您携带的Scrappy演示之前，请将其部署为生产应用程序，请考虑您如何处理验证和安全性。</p><p> Second, if you start a room, you’re the moderator. We accomplish this by creating a  meeting-token which is then used when you  join the call. Moderators have the ability to “promote” other user types, which is why we need a token to identify them, but more on that later.</p><p> 第二，如果你开始一个房间，你就是主持人。我们通过创建一个会议令牌来完成此操作，然后在您加入通话时使用。主持人具有“促进”其他用户类型的能力，这就是为什么我们需要令牌来识别它们，但稍后更多。</p><p> See more on how  create ( 🕸  ⚛  🍏  🤖) and  join ( 🕸  ⚛  🍏  🤖) works in the clients</p><p> 查看更多关于如何创建（🕸⚛🍏🤖）并在客户中加入（🕸⚛🍏🤖）</p><p> On the server(less) side of things, we’ve created  /room ( 🥅) and  /token ( 🥅)  endpoints which call the  / rooms and  / meeting-tokens endpoints respectively. You’ll see those endpoints used in each of the clients. We’re enforcing the 10 minute demo limit here by using the   exp property for rooms and tokens. Feel free to change this in your own application unless you prefer to keep your meetings short and sweet!</p><p> 在事物的服务器（较少）的一侧，我们创建/室（🥅）和/令牌（🥅）端点，分别调用/房间和/会议令牌端点。您将看到每个客户端中使用的那些端点。我们通过使用房间和令牌的Exp Property来执行此处的10分钟演示限制。除非您更愿意保持您的会议短而甜蜜，否则您可以随意更改此申请！</p><p>   Once you create a call, you are presented with the call view ( 🕸  ⚛  🍏  🤖). Here, as a moderator, you have the ability to &#34;promote&#34; listeners to speakers, or moderators. We’re using the  owner property from the  participants object to identify moderators. This gets set when the meeting token you join with has   is_owner set to  true. To simplify how user roles in general work for the purposes of this demo, we’re storing them by appending to the username ( 🕸  ⚛  🍏  🤖). In a production environment, you’ll want a more robust way to enforce the roles, so keep that in mind.</p><p>   创建呼叫后，您将介绍呼叫视图（🕸⚛🍏🤖）。在这里，作为主持人，您可以＆＃34;促进＆＃34;听众或主持人。我们正在使用与会者对象的所有者属性来识别版主服务器。当您加入的会议令牌时，这会设置为true。为了简化一般工作中的用户角色如何为此演示的目的，我们将通过附加到用户名（🕸⚛🍏🤖）来存储它们。在生产环境中，您将希望更强大的方式来强制执行角色，因此请记住这一点。</p><p>   When you use your moderator privileges to promote a speaker, under the hood this is accomplished by calling   sendAppMessage() to let the speaker know they have been promoted. For the promoted participant, who will be a speaker, we call   setUserName(), so that other members will be able to pick up their new role via   participants() and update the UI accordingly in each of the clients.</p><p>   当您使用主持人权限来推广扬声器时，在引擎盖下，这是通过调用sendappmessage（）来完成的，让扬声器知道他们已被推广。对于促销的参与者，谁将成为一个发言人，我们调用setusername（），以便其他成员将能够通过参与者（）来获取新角色并在每个客户端中相应更新UI。 </p><p>   Sometimes conversations can get a little  spirited or maybe someone’s dog has decided they want to participate in the world’s latest social craze. When this happens it’s good as a moderator to be able to mute someone. We accomplish this by calling   updateParticipant() with  setAudio:false ( 🕸  ⚛  🍏  🤖). For privacy reasons, moderators can only mute remote participants. They will have to unmute themselves when things quiet down.   In rare circumstances, muting may not be enough, and you will need to remove someone from the room. We handle this by calling  sendAppMessage and telling the client that needs to leave to exit the room by calling  leave() ( 🕸  ⚛  🍏  🤖).</p><p>有时对话可以得到一点精神，也许有人的狗已经决定他们希望参加世界上最新的社会热潮。当发生这种情况时，它是一个能够静音某人的主持人。通过使用setAudio调用UpdateParticipant（）来完成此操作：FALSE（🕸⚛🍏🤖）。出于隐私原因，主持人只能静音远程参与者。当事情安静下来时，他们将不得不取消静音。在罕见的情况下，静音可能还不够，你需要从房间里删除某人。我们通过调用sendappmessage来处理这一点，并告诉客户需要通过呼叫休假（）（🕸⚛🍏🤖）离开房间退出房间。</p><p>   Because our trust mechanism to identify moderators is a token, when someone gets &#34;promoted&#34; to a moderator they need to rejoin ( 🕸  ⚛  🍏  🤖) with their token so we can give them elevated control of the call. This pattern means they’ll drop out of the call for a second or two before rejoining as a moderator. In a production app you might prefer a smoother transition, which could be accomplished with a different moderator authorization method.</p><p>   因为我们的信任机制识别主持人是一个令牌，当有人获得＆＃34;促销＆＃34;对于一个主持人，他们需要用他们的令牌重新加入（🕸⚛🍏🤖），所以我们可以让他们提高呼叫。此模式意味着在重新加入作为主持人之前，它们将删除呼叫第二或两个。在生产应用程序中，您可能更喜欢更平滑的转换，这可以通过不同的主持人授权方法来完成。</p><p> Another thing you may have noticed is that we ask for device permissions when you join, even if you’re a listener. This allows us to immediately turn on your mic when the time comes, but if you prefer a less invasive approach, you can always rework things so permissions are requested only when you’ve been promoted.</p><p> 您可能已经注意到的另一件事是我们在加入时要求设备权限，即使您是侦听器。这使我们能够立即打开当时的麦克风，但如果您喜欢更少的侵入方法，您可以始终返回事物，只有在您被推广时才请求权限。</p><p> The not-so-secret sauce of the the iOS and Android clients is that they’re loading  daily-js in a &#34;headless&#34; WebView and then interacting with it via a &#34;bridge&#34; ( 🍏  🤖). This is made possible by additions to platform specific WebView implementations which allow the audio tracks to be played off-screen. This works for this audio-only use case because there’s no video layout logic to deal with. We wanted to demonstrate the power of a lightweight integration like this, but rest assured that we’re actively working on fully featured mobile SDKs which we’ll release later this year™.</p><p> iOS和Android客户端的Not-so-secrace酱是他们正在加载Daily-JS在A＆＃34;无头＆＃34; WebView然后通过A＆＃34与它交互;桥梁＆＃34; （🍏🤖）。通过添加到平台特定的WebView实现实现，可以允许播放音频曲目。这适用于此音频使用情况，因为没有用于处理的视频布局逻辑。我们想展示像这样的轻量级集成的力量，但请放心，我们积极研究全功能的移动SDK，我们将稍后发布™。</p><p>  So you’ve now got a flourishing multiplatform audio-only application. But you’re finding that your speakers can get a little carried away and sometimes you want to inject some audience participation. For this reason we’ve added the ability for listeners to raise their hands so they can be promoted to speakers. Since we’ve already &#34;creatively&#34; stored user roles in usernames, why not publicly show when someone raises their hand there as well? To do this, we call   setUserName() and prepend ✋ ( 🕸  ⚛  🍏  🤖). A moderator can then decide to promote, in which case the ✋ will magically disappear. Or a listener can lower their hand if it was &#34;more of a comment than a question&#34;.</p><p>  所以你现在有一个繁荣的多平台音频应用程序。但是你发现你的发言者可以得到一点点带走，有时你想注射一些观众参与。出于这个原因，我们已经增加了倾听者举手的能力，所以他们可以促进发言人。由于我们已经＆＃34;创造性地＆＃34;在用户名中存储的用户角色，为什么不公开显示当有人在那里举起手？为此，我们调用setusername（）和prepend✋（🕸⚛🍏🤖）。然后，主持人可以决定促进，在这种情况下，✋将神奇地消失。或者如果是＆＃34;更多的评论，听众可以降低他们的手。</p><p> So there you have it, a suite of awesome demos that we built in a &#34;weekend&#34; (emphasis on week), but…</p><p> 所以你有它，一套我们建造在A＆＃34的令人敬畏的演示;周末＆＃34; （强调周），但......</p><p>    Now that you’ve got a billion dollar app, don’t forget to create a  deck and go after that hard-won VC money. 🤑</p><p>    现在你有十亿美元的应用程序，别忘了创造一个甲板，并在那里赢得了VC钱。 🤑 </p><p> In all seriousness, communities are only as good as their members. We want to take the guesswork out of the technical communications part of yours so you can focus on building.</p><p>在所有严肃性中，社区都像成员一样好。 我们希望将猜测从您的技术通信部分中脱颖而出，因此您可以专注于建筑物。 </p></div><div id="story_share_this"><div class="sharethis-inline-share-buttons"></div></div><div class="text-break sotry_link page_narrow"><a target="_blank" href="https://www.daily.co/blog/how-to-build-a-billion-dollar-audio-app-in-a-weekend/">https://www.daily.co/blog/how-to-build-a-billion-dollar-audio-app-in-a-weekend/</a></div><div class="story_tags page_narrow"><button type="button" class="btn btn-light my_tag"><a href="/tag/程序/">#程序</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/周末/">#周末</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/billion/">#billion</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/应用程序/">#应用程序</a></button></div></div><div class="my_movie_list_item shadow p-3 mb-5 bg-white rounded"><button type="button" class="btn btn-link my_tag"><a href="/tag/web2.0/">#web2.0</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/google/">#google</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/设计/">#设计</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/创意/">#创意</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/摄影/">#摄影</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/图片/">#图片</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/游戏/">#游戏</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/软件/">#软件</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/手机/">#手机</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/视频/">#视频</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/广告/">#广告</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/iphone/">#iphone</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/网站/">#网站</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/免费/">#免费</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/下载/">#下载</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/windows/">#windows</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/微软/">#微软</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/apple/">#apple</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/firefox/">#firefox</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/blog/">#blog</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/苹果/">#苹果</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/音乐/">#音乐</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/博客/">#博客</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/wordpress/">#wordpress</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/恶搞/">#恶搞</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/qq/">#qq</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/艺术/">#艺术</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/web/">#web</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/谷歌/">#谷歌</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/工具/">#工具</a></button></div></div></div><div id="my_footer"><div class=""><a href="/tags/">tags</a> <a href="/users/">users</a></div>&copy; 2020 diglog.com </div></div></body></html>