<!doctype html><html lang="zh-hans"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>用户力量，而非用户力量：htop及其设计理念 User power, not power users: htop and its design philosophy</title><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"><link rel="stylesheet" href="/img/css.css?random="><link data-rh="true" rel="icon" href="/img/favicon.ico"/><script data-ad-client="ca-pub-6067137220025946" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script type="text/javascript" src="https://platform-api.sharethis.com/js/sharethis.js#property=5effb96910009800120b8d4d&product=inline-share-buttons" async="async"></script>
<script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?03c1a0f31299b4a2fbb83c34d6beaac9";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script></head><body><div id="my_header"><div class="container"><nav class="navbar navbar-expand-lg"><a class="navbar-brand" href="/"><img alt="diglog" src="/img/logo.v1.gif" class="rounded-sm"></a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarNavAltMarkup"><div class="navbar-nav"></div></div></nav></div></div><div class="container"><div id="my_content"><h1 class="page_narrow">User power, not power users: htop and its design philosophy<br/>用户力量，而非用户力量：htop及其设计理念 </h1><div class="row"><div class="col-lg-12 col-12"><div class="my_story_list_item shadow p-3 mb-5 bg-white rounded"><div class="story_page_pub_time page_narrow">2021-01-19 17:39:42</div><div class="page_narrow text-break page_content"><p>This short story is not really about htop, or about the feature request that I’ll use as an illustration, but about what are the core principles that drive the development of a bit of software, down to every last detail. And by “core principles” I really mean it.</p><p>这个简短的故事不是真正关于htop的，也不是我将用来举例说明的功能要求，而是关于驱动一点点软件开发的核心原理，直到每个细节。我所说的“核心原则”是真的。</p><p> When we develop software, we have to make a million decisions. We’re often driven by some unspoken general principles, ranging from our personal aesthetics on the external visuals, to our sense of what makes a good UX in the product behavior, to things such as “where does bloat cross the line” in the engineering internals. In FOSS, we’re often wearing all these hats at the same time.</p><p> 开发软件时，我们必须做出一百万个决定。我们经常受到一些潜规则的驱使，从我们在外部视觉上的个人美学，到我们对产品行为的良好用户体验的理解，到工程学中的“膨胀在哪里”内部。在FOSS中，我们经常同时戴所有这些帽子。</p><p> We don’t always have it clear in our mind what drives those principles, we often “just know”. There’s no better opportunity to assess those principles than when user feedback asks for a change in the behavior. And there’s no better way to explain to yourself why the change “feels wrong” than to put those principles in writing.</p><p> 我们通常并不总是清楚地知道是什么驱使了这些原则。评估这些原则没有比用户反馈要求改变行为更好的机会了。而且，没有比将这些原则书面形式更好地向自己解释为什么这种改变会“感到错误”的方法。</p><p>  I was peeking at the  htop issue tracker as an end-user, which is a refreshing experience, having recently  retired from this FOSS project I started. I spotted a feature request,  asking for a change to make it hide threads by default.</p><p>  作为最终用户，我正在偷看htop问题跟踪器，这是一种令人耳目一新的体验，最近我退出了我开始的这个FOSS项目。我发现了一个功能请求，要求进行更改以使其默认情况下隐藏线程。</p><p>  People casually using htop usually have no idea what userland threads are for. People who actually need to see them can easily enable them via SHIFT+H.</p><p>  随便使用htop的人们通常不知道用户级线程的用途。实际需要查看它们的人可以通过SHIFT + H轻松启用它们。</p><p> With them currently enabled by default, it is very inconvenient to go through the list and see what is running, taking up RAM, CPU usage and whatnot, therefore I think it’d be more user-friendly to not show them by default.</p><p> 由于默认情况下当前启用了这些功能，因此不方便查看列表以查看正在运行的内容，占用的RAM，CPU使用率等信息，因此，我认为不默认显示它们会更加方便用户使用。</p><p> He proceeded to show two screenshots: one with the  default behavior, full of threads (in green) mixed with the processes, and another  with threads disabled.</p><p> 他继续显示两个屏幕快照：一个具有默认行为，充满了进程混合的线程（绿色），另一个具有禁用的线程。 </p><p> When one of the current developers said that it’s easier for the user to figure out how to hide things than for them to discover that something hidden can be shown, the counter-argument was also sensible:</p><p>当前的一位开发人员说，用户想出如何隐藏事物要比让他们发现隐藏的事物更容易发现时，反驳也很明智：</p><p> Htop can also show Disk IO, which can be arguably very useful, but is hidden by default.</p><p> Htop还可以显示Disk IO，可以说非常有用，但是默认情况下是隐藏的。</p><p> At that point, I decided to put my “original author” hat on to explain what was the intent behind the existing behavior. Here’s  what I wrote:</p><p> 那时，我决定戴上“原作者”的帽子，以解释现有行为背后的意图。这是我写的：</p><p>  Hi @C0rn3j, I thought I’d drop by and give a bit of historical background as to what was my motivation for showing threads by default.</p><p>  @ C0rn3j，您好，我以为我会提供一些历史背景，以了解我默认显示线程的动机是什么。</p><p>  Yes! I fully sympathize with this sentiment. And the choice for enabling threads  and painting them green was deliberate.</p><p>  是!我完全赞同这一观点。启用线程并将其涂成绿色的选择是经过深思熟虑的。</p><p> You have no idea how many times I was asked “hey, why are some processes green?” over these 15+ years — and no, it wasn’t annoying: each of these times it was an opportunity to teach someone about threads!</p><p> 您不知道有多少次有人问我：“嘿，为什么有些流程是绿色的？”在这15年以上的时间里，而且没有，这并不烦人：每次，这都是一个向人传授线程的机会！</p><p>  htop was designed to provide a view to what’s going on in the system. If a process is spawning threads like crazy, or if all your cores are overwhelmed because multiple threads of a process are doing work, I think it’s fair to show it to the user, even if they don’t know a thing about threads — or I would say,  especially if they don’t know a thing about threads, otherwise these things would be happening and they wouldn’t even know where to look.</p><p>  htop旨在提供系统中正在发生的情况的视图。如果一个进程正在产生疯狂的线程，或者由于一个进程的多个线程正在工作而使您的所有内核不堪重负，那么我认为将其显示给用户是公平的，即使他们对线程一无所知-或我要说的是，尤其是如果他们对线程一无所知，否则这些事情将会发生，甚至不知道在哪里查找。 </p><p> Htop can also show Disk IO, which can be arguably very useful, but is hidden by default.</p><p>Htop还可以显示Disk IO，可以说非常有用，但是默认情况下是隐藏的。</p><p> One of my last projects when I was still active in htop development was to add tabs to the interface, so that the user would have a more discoverable path for navigating through these additional columns:</p><p> 当我仍然活跃于htop开发时，我的最后一个项目是将选项卡添加到界面，以便用户在这些附加列中导航时，将具有更可发现的路径：</p><p>  This code is in the  next branch of the old repo  https://github.com/hishamhm/htop/ — I think the code for tabs is actually finished (though not super tested); it’s pretty nice, you can click on them or cycle with the Tab key, but the Perf Counters support which I was working on, never really got stable to a point of my liking, and that’s when I got busy with other things and drifted away from development — turns out I enjoy writing interface code a lot more than the systems monitoring part!</p><p>  这段代码在旧仓库的下一个分支https://github.com/hishamhm/htop/中-我认为制表符的代码实际上已经完成了（尽管没有经过超级测试）；很好，您可以单击它们或使用Tab键循环，但是我一直在努力的Perf Counters支持并没有真正稳定到我喜欢的程度，那是当我忙于其他事情并逐渐消失时从开发开始—事实证明，我比系统监视部分更喜欢编写接口代码！</p><p> Anyway, I think that also illustrates the pattern that went into the design: I implemented the entire tabs feature  because I wanted to make IO and Perf Counters more discoverable. I wanted to put that information in front of users faces,  especially for users who don’t know about these things! I considered the fact that I had implemented the entire functionality of iotop inside htop but people didn’t know about it to be a personal failure, and a practical learning experience: adding systems functionality is useless if the UI design doesn’t get it to users’ hands. (And even I didn’t use the IO features because there was no convenient way of using them.)</p><p> 无论如何，我认为这也说明了设计的模式：我实现了整个选项卡功能，因为我想使IO和Perf计数器更易于发现。我想将这些信息摆在用户面前，特别是对于不了解这些事情的用户！我考虑了我已经在htop内实现了iotop的全部功能的事实，但是人们并不知道这是个人的失败，也是一种实际的学习体验：如果UI设计无法实现，则添加系统功能是没有用的用户的手。 （甚至我也没有使用IO功能，因为没有便捷的使用方式。）</p><p> I never wanted to implement a tool for “super advanced Linux power users who know what they doing”, otherwise I would have never spent a full line at the bottom showing F-keys, and I would have spent my time implementing Vim bindings (ugh ;) ) instead of mouse support. I’ve always made a point that  every setting can be settable via the Setup screen, which you can access via F2-Setup (shown at the bottom line!) and which you can control with the keyboard or mouse, no “edit this config file to use this advanced feature for the initiated only” or even “read the man page” (in fact it only has a man page because Debian developers contributed it!).</p><p> 我从来不想为“知道他们在做什么的超高级Linux高级用户”实现工具，否则，我永远不会在底部花整行显示F键，也不会花时间来实现Vim绑定（哦， ;）），而不是鼠标的支持。我一直认为，可以通过“设置”屏幕来设置每个设置，您可以通过F2-Setup（显示在底部！）进行访问，并且可以使用键盘或鼠标进行控制，而无需“编辑此配置”。文件以使用此高级功能仅用于“启动”或什至“读取手册页”（实际上，它只有手册页，因为Debian开发人员提供了它！）。</p><p> I wanted to make a tool that has the power but doesn’t hide it from users, and instead invites users into becoming more powerful. A tool that reaches out its hand and guides them along the way, helping users to educate themselves about what’s happening on the internals of their system, and in this way have more control of it. This is how you hand power to users, not by erecting barriers of initiation or by giving them the bare minimum they need. I reject this dicothomy between “complicated tools for power users” and “stripped-down tools for mere mortals”, the latter being a design paradigm made popular by certain companies and unfortunately copied by so many OSS GUI projects, without realizing what the goals of that paradigm really were, but that’s another rant.</p><p> 我想制作一种功能强大但不会对用户隐藏的工具，而是邀请用户变得更加强大。伸出手来引导他们前进的工具，可帮助用户了解系统内部发生的事情，从而对它进行更多控制。这是您将权力交给用户的方式，而不是通过设置启动障碍或为用户提供所需的最低限度的费用。我拒绝“为电力用户使用的复杂工具”与“为凡人提供的简化工具”之间的二分法，后者是某些公司流行的设计范式，不幸的是，它被许多OSS GUI项目复制，却没有意识到其目标。这个范式确实存在，但这是另一回事。</p><p>  (PS: and to put the point to the proof, I must say that the tabs feature was a much bigger code change than Perf Counters themselves; it included some quite big internal refactors (there’s no “toolkit”, everything is drawn “by hand” by htop) with unfortunately might make it difficult to ressurect that code (or not! who knows?), and of course tabs are user-definable and user-editable!)</p><p>  （PS：为证明这一点，我必须说，选项卡功能比Perf Counters本身的代码更改要大得多；它包含一些相当大的内部重构（没有“工具箱”，所有内容都是“手工绘制的”）。 ”（通过htop）），不幸的是，这可能会使代码难以恢复（或不知道！谁知道？），当然选项卡是用户可定义和用户可编辑的！） </p><p>  The user who proposed the change in the defaults thanked me for the history tidbits and closed the feature request. But in some sense writing this down was probably more enlightening to me than it was for them.</p><p>提议更改默认设置的用户感谢我的历史记录，并关闭了功能请求。但是从某种意义上说，写下这本书对我来说可能比对他们来说更具启发性。</p><p> When I started writing htop, I did not set out to create “an instrument for user empowerment” or any such lofty goal. (All I wanted was to have a top that scrolled and was more forgiving with mistypes than circa-2005 top!) But as I proceeded to write the software, every small decision had to come from somewhere, even if done without much deliberate thought, even if at the time it was just “it felt right”. That’s how your principles start to percolate into the project.</p><p> 当我开始编写htop时，我并未着手创建“增强用户能力的工具”或任何此类崇高的目标。 （我只想拥有一个滚动的顶部，并且比2005年前后的顶部更能容忍错误的输入！）但是当我继续编写该软件时，每个小小的决定都必须来自某个地方，即使这样做没有经过深思熟虑，即使当时只是“感觉正确”。这就是您的原则开始渗透到项目中的方式。</p><p> Over time, the picture I described in that reply above became clear to me. It helped me build practical guidelines, such as “every setting must be UI-accessible”, it helped me prioritize or even reject feature requests based on how much they aligned to those principles, and it helped me build a sense of purpose for the software I was working on.</p><p> 随着时间的流逝，我在上面的回复中描述的图片变得清晰起来。它帮助我建立了实用的准则，例如“每个设置都必须可以通过UI进行访问”，它帮助我根据功能请求与这些原则的匹配程度来确定优先级甚至拒绝了功能请求，并且帮助我建立了软件的目的感我正在努力。</p><p> If you don’t have it clear to yourself what are the principles that are foundational to the software you’re building, I recommend you to give this exercise a try — try to explain why the things in the software are the way they are. There are always principles, even if they are not conscious to you at the moment.</p><p> 如果您不清楚自己要构建的软件的基本原则是什么，我建议您尝试一下本练习-尝试解释软件中的事物为何如此。即使目前尚无意识，总会有一些原则。</p><p> (PS: It would be awesome if some enterprising soul would dig down the tab support code and ressurrect it for htop 3! I don’t plan to do so myself any time soon, but all the necessary bits and pieces are  there!)</p><p> （PS：如果有进取心的人会挖掘选项卡支持代码并将其复活到htop 3，那就太棒了！我不打算自己很快就这样做，但是所有必要的点点滴滴都在那里！） </p></div><div id="story_share_this"><div class="sharethis-inline-share-buttons"></div></div><div class="text-break sotry_link page_narrow"><a target="_blank" href="https://hisham.hm/2020/12/18/user-power-not-power-users-htop-and-its-design-philosophy/">https://hisham.hm/2020/12/18/user-power-not-power-users-htop-and-its-design-philosophy/</a></div><div class="story_tags page_narrow"><button type="button" class="btn btn-light my_tag"><a href="/tag/设计/">#设计</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/力量/">#力量</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/power/">#power</a></button></div></div><div class="my_movie_list_item shadow p-3 mb-5 bg-white rounded"><button type="button" class="btn btn-link my_tag"><a href="/tag/web2.0/">#web2.0</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/google/">#google</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/设计/">#设计</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/创意/">#创意</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/摄影/">#摄影</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/图片/">#图片</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/游戏/">#游戏</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/软件/">#软件</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/手机/">#手机</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/视频/">#视频</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/广告/">#广告</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/iphone/">#iphone</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/网站/">#网站</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/免费/">#免费</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/下载/">#下载</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/windows/">#windows</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/微软/">#微软</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/苹果/">#苹果</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/apple/">#apple</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/firefox/">#firefox</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/blog/">#blog</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/音乐/">#音乐</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/博客/">#博客</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/wordpress/">#wordpress</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/恶搞/">#恶搞</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/qq/">#qq</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/艺术/">#艺术</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/web/">#web</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/工具/">#工具</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/分享/">#分享</a></button></div></div></div><div id="my_footer"><div class=""><a href="/tags/">tags</a> <a href="/users/">users</a></div>&copy; 2020 diglog.com </div></div></body></html>