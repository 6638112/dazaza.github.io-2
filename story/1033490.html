<!doctype html><html lang="zh-hans"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Travis CI的新定价计划给我的开源作品带来了麻烦</title><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"><link rel="stylesheet" href="/img/css.css?random="><link data-rh="true" rel="icon" href="/img/favicon.ico"/><script data-ad-client="ca-pub-6067137220025946" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script type="text/javascript" src="https://platform-api.sharethis.com/js/sharethis.js#property=5effb96910009800120b8d4d&product=inline-share-buttons" async="async"></script>
<script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?03c1a0f31299b4a2fbb83c34d6beaac9";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script></head><body><div id="my_header"><div class="container"><nav class="navbar navbar-expand-lg"><a class="navbar-brand" href="/"><img alt="diglog" src="/img/logo.v1.gif" class="rounded-sm"></a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarNavAltMarkup"><div class="navbar-nav"></div></div></nav></div></div><div class="container"><div id="my_content"><h1 class="page_narrow">Travis CI的新定价计划给我的开源作品带来了麻烦</h1><div class="row"><div class="col-lg-12 col-12"><div class="my_story_list_item shadow p-3 mb-5 bg-white rounded"><div class="story_page_pub_time page_narrow">2020-11-06 08:36:08</div><div class="page_narrow text-break page_content"><p>我刚刚花了6个小时将我的一些开源项目从Travis CI迁移到GitHub Actions，我想我应该暂停一下(这个项目已经进行了12个小时，可能还需要15-20个小时)来记录一些想法。</p><p>我不是那种吹毛求疵的人。在近十年的时间里，Travis CI让我能够构建-并维护-数百个开源项目，并保持了多年。</p><p>我已经为Raspberry Pi、PHP、Python、Drupal、Ansible、Kubernetes、MacOS、iOS、Android、Docker、Arduino等构建了项目。我建造的几乎每一个项目都立即与特拉维斯CI整合在一起。</p><p>如果没有这种测试，没有按计划运行测试的能力，我就会放弃这些项目中的大多数。但有了测试，我能够跟上多年来由位腐烂导致的构建失败，并更容易地审查PR。</p><p>从一开始，Travis CI就是为了与GitHub存储库集成而构建的，并提供免费的开源CI。它一度在黑客新闻(Hacker News)和其他地方因其文化和精神而获得铺天盖地的赞扬。</p><p>但随着时间的推移，其他CI系统变得越来越流行，直到2018年底，GitHub抛出了一个重磅炸弹--GitHub Actions，而Travis CI的前景似乎是这样的：</p><p>现在，为了更好地阐明事情到底在哪里变得越来越糟，我把特拉维斯·CI关于开源版本最重要的时刻整理了一下：</p><p>2012年：特拉维斯CI筹集了1.34亿美元，以支持爱的众筹活动中的业务运营，并推出了私人储存库的付费计划</p><p>2012-2020：我将200多个开源项目库集成到Travis CI测试和构建流程中。</p><p>2020年10月：我把我剩下的大约120条travis-ci.org的回复都移到了travis-ci.com上，这样它们就可以真正运行了。</p><p>2020年11月2日：我注意到我的版本都不工作了。我甚至在看到新的账单计划通知之前就用完了积分。</p><p>请注意，我们还没有赶上时间表的末尾。还有许多其他开源开发者和项目仍在使用Travis-ci.org，他们要么没有时间，要么没有动力迁移到Travis-ci.com(或者最好是其他地方)，每天积压的大量构建工作就证明了这一点：</p><p>那些和我一样，在过去几周里为了摆脱积压的地狱而迁移到Travis-ci.com网站的人现在意识到，在我们的1000分钟试用计划用完后，我们将不得不乞求额外的构建分钟：</p><p>我们将提供开放源码软件会议记录的分配，这些会议记录将根据具体情况进行审查和分配。如果您想申请这些积分，请向Travis CI支持部门提出申请，说明您愿意被考虑获得OSS分配。请包括：</p><p>您的帐户名和VCS提供商希望申请多少积分(构建分钟数)(如果您的积分再次用完，您可以重复此过程以请求更多积分或讨论续订金额)。</p><p>对不起，不过不用了，谢谢。我每天没有足够的时间每隔几天|几周|几个月发一封电子邮件请求额外的构建积分，这样我就可以继续维护我的开源项目了。</p><p>正如我前面所说的，我很感激特拉维斯·CI在过去十年里为我自己的成长和职业生涯带来的加速。还有很多其他服务为开源维护员提供慷慨的服务，我对此表示感谢，并尽我所能(通常是在我力所能及的范围内，在经济上)提供支持。</p><p>我只是担心，就像2015年谷歌(Google)关闭谷歌代码(Google Code)一样，这将对我们中的一些人所依赖、但没有考虑到的规模较小、维护较少的开源项目产生一些连锁影响。</p><p>我个人也知道，整个项目将占用我可以投入到免费开源工作中的大约四周的时间，这意味着在我的开源开发时间中，一个月的时间就会消失得无影无踪。不好玩，也不激励人。</p><p>我很幸运，在GitHub赞助商上有很多支持者，他们帮助我的工作更可持续，但大多数开源维护者要么只有我的一小部分支持，要么根本没有。</p><p>自从2019年1月被收购以来，这件事就一直是不祥之兆--特别是在现有的工程人员被裁掉之后。我已经开始使用GitHub Actions为CI而不是Travis CI构建较新的项目。</p><p>我曾计划在几年的时间里慢慢迁移，因为我的许多旧项目仍然有效，正在使用，但并未积极开发。</p><p>但特拉维斯·CI本月在没有任何事先通知的情况下采取的行动迫使我采取了行动，现在我正在进行一个可能需要2到4周的过程，以尽快将一切从特拉维斯·CI手中移走。在构建失败上拖延一个月会导致堆积如山的小问题，这真的会让我陷入困境。</p><p>不管怎样，我的悲伤故事说够了。我想链接到我用来迁移的一些工具，并展示我是如何自动化一些迁移的，这样您就可以更轻松地完成自己的迁移了！</p><p>我的大多数开源项目都是Ansible角色(我维护的Ansible内容的很大一部分)，为了让它们迁移，我尽可能地自动化。您可以在这期GitHub中看到所有细节：从Travis CI转换为GitHub操作。</p><p>对于每个角色，我都使用这本Ansible剧本来编写新的GitHub操作配置项，并使用模板发布工作流。然后，我调整了所有的值，这样操作就不会在每周的同一时间运行。</p><p>然后我创建了giHub-repo-manager，这是一个简单的小项目，它使用PyGithub在我的所有存储库或部分存储库中进行更改。我使用它将Galaxy_API_KEY密钥添加到我帐户中以Ansible-Role-*开头的所有存储库(对于个人帐户中的存储库，您必须将GitHub操作机密添加到每个存储库-对于组织，您可以创建共享的组织机密...。方便多了！)。</p><p>最后，我手动迁移了Travis CI构建定义中为每个角色定制的一小部分(例如，一些具有一维构建矩阵，一些具有二维构建矩阵，并且它们都具有不同的构建操作系统组合)。</p><p>我已经开始在GitHub操作的基础上构建许多新的项目(包括Ansible和Kubernetes相关的)，甚至还介绍了几次这个过程(例如，使用分子和GitHub操作进行持续的Ansible测试)。本周早些时候的消息让我加快了旧内容的迁移计划，从我有空的时候到现在。</p><p>幸运的是，GitHub Actions几乎做了我在Travis CI中能做的所有事情(到目前为止……。我还有36个独特的回复要做！)，我唯一真正抱怨的是继续出错功能不能替代Travis CI的Allowed_Failures选项。</p><p>还有一些工作要做，我正在努力安排事情的优先顺序，这样我就不会让我最广泛使用的项目(如Drupal VM)在太长时间内没有活动的CI，但至少这个故事不会有一个糟糕的结局。</p></div><div id="story_share_this"><div class="sharethis-inline-share-buttons"></div></div><div class="text-break sotry_link page_narrow"><a target="_blank" href="https://www.jeffgeerling.com/blog/2020/travis-cis-new-pricing-plan-threw-wrench-my-open-source-works">https://www.jeffgeerling.com/blog/2020/travis-cis-new-pricing-plan-threw-wrench-my-open-source-works</a></div><div class="story_tags page_narrow"><button type="button" class="btn btn-light my_tag"><a href="/tag/开源/">#开源</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/ci/">#ci</a></button></div></div><div class="shadow p-3 mb-5 bg-white rounded clearfix"><div class="container"><div class="row"><div class="col-sm"><div><a target="_blank" href="/story/1033283.html"><img src="http://img2.diglog.com/img/2020/11/thumb_c13477f6896e3f061f40791358604777.png" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1033283.html">奇点--一个开源的简单、快速、安全的容器平台</a></div><span class="my_story_list_date">2020-11-5 20:11</span></div><div class="col-sm"><div><a target="_blank" href="/story/1033265.html"><img src="http://img2.diglog.com/img/2020/11/thumb_3c453984327c27da470e63b39ae6fedc.jpg" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1033265.html">我将整个GitHub后端源代码上传到GitHub自己的DMCA repo</a></div><span class="my_story_list_date">2020-11-5 20:2</span></div><div class="col-sm"><div><a target="_blank" href="/story/1033166.html"><img src="http://img2.diglog.com/img/2020/11/thumb_1635a399e3db7920a43578809c11d7a2.png" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1033166.html">开始使用开源安全工具Info Monkey</a></div><span class="my_story_list_date">2020-11-4 20:35</span></div><div class="col-sm"><div><a target="_blank" href="/story/1033069.html"><img src="http://img2.diglog.com/img/2020/11/thumb_39ae786507ecbcef195afbb875512017.jpeg" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1033069.html">Qovery引擎-开源多云部署</a></div><span class="my_story_list_date">2020-11-4 6:57</span></div></div></div></div><div class="my_movie_list_item shadow p-3 mb-5 bg-white rounded"><button type="button" class="btn btn-link my_tag"><a href="/tag/web2.0/">#web2.0</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/google/">#google</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/设计/">#设计</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/创意/">#创意</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/摄影/">#摄影</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/游戏/">#游戏</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/图片/">#图片</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/软件/">#软件</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/视频/">#视频</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/手机/">#手机</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/广告/">#广告</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/apple/">#apple</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/iphone/">#iphone</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/网站/">#网站</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/免费/">#免费</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/下载/">#下载</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/windows/">#windows</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/微软/">#微软</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/firefox/">#firefox</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/苹果/">#苹果</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/blog/">#blog</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/音乐/">#音乐</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/博客/">#博客</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/wordpress/">#wordpress</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/恶搞/">#恶搞</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/艺术/">#艺术</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/qq/">#qq</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/web/">#web</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/谷歌/">#谷歌</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/工具/">#工具</a></button></div></div></div><div id="my_footer"><div class=""><a href="/tags/">tags</a> <a href="/users/">users</a></div>&copy;2012-2021 diglog.com </div></div></body></html>