<!doctype html><html lang="zh-hans"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>带有GitOps的阿帕奇·卡夫卡是什么样子的？</title><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"><link rel="stylesheet" href="/img/css.css?random="><link data-rh="true" rel="icon" href="/img/favicon.ico"/><script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?03c1a0f31299b4a2fbb83c34d6beaac9";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script><script data-ad-client="ca-pub-6067137220025946" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script type="text/javascript" src="https://platform-api.sharethis.com/js/sharethis.js#property=5effb96910009800120b8d4d&product=inline-share-buttons" async="async"></script></head><body><div id="my_header"><div class="container"><nav class="navbar navbar-expand-lg"><a class="navbar-brand" href="/"><img alt="diglog" src="/img/logo.v1.gif" class="rounded-sm"></a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarNavAltMarkup"><div class="navbar-nav"></div></div></nav></div></div><div class="container"><div id="my_content"><h1 class="page_narrow">带有GitOps的阿帕奇·卡夫卡是什么样子的？</h1><div class="row"><div class="col-lg-12 col-12"><div class="my_story_list_item shadow p-3 mb-5 bg-white rounded"><div class="story_page_pub_time page_narrow">2020-10-28 07:16:49</div><div class="story_img_container"><a href="http://img2.diglog.com/img/2020/10/54d6b2022a44c6a696c30786be92bcf6.png"><img src="http://img2.diglog.com/img/2020/10/54d6b2022a44c6a696c30786be92bcf6.png" class="img-fluid my_story_img" onerror="this.style.display='none'"></a></div><div class="page_narrow text-break page_content"><p>Anyone running an Apache Kafka data infrastructure and running on Kubernetes, the chances are you’ve probably nailed defining your infrastructure this way.</p><p>任何运行Apache Kafka数据基础设施并运行在Kubernetes上的人，都有可能以这种方式定义您的基础设施。</p><p> If you’re running on Kubernetes, you’re likely using operators as part of your CI/CD toolchain to automate your deployments.</p><p>如果您在Kubernetes上运行，您可能会使用操作符作为CI/CD工具链的一部分来自动化部署。</p><p> Adopting GitOps is natural evolution, whereby the state of your landscape is managed in Git (or any code repo) with automation systems ensuring the state of a deployment remains consistent with the repo.</p><p>采用GitOps是自然发展，因此您的环境的状态在Git(或任何代码库)中进行管理，自动化系统确保部署的状态与repo保持一致。</p><p> Where we’ve seen a particular lack of maturity and best practices is in managing the application landscape of flows and microservices on technologies such as Kafka and Kubernetes.</p><p>我们发现，在Kafka和Kubernetes等技术上管理流和微服务的应用程序环境方面，尤其缺乏成熟度和最佳实践。</p><p> GitOps is increasingly playing a big part of DataOps. DataOps promotes the accelerated delivery of data products through decentralized data governance, automation, self-service and lowering the skills required to operate data. GitOps brings standardization, governance and automation.</p><p>GitOps在DataOps中扮演着越来越重要的角色。DataOps通过分散的数据管理、自动化、自助服务和降低操作数据所需的技能来促进数据产品的加速交付。GitOps带来了标准化、治理和自动化。</p><p> It’s a subject we’ve spoken about at a few events recently including at Kafka Summit this year and on DevOps.com:</p><p>这是我们最近在一些活动中谈论的话题，包括今年的卡夫卡峰会(Kafka Summit)和DevOps.com：</p><p>    When looking to automate real-time applications following DataOps, we need to be thinking about more than automating the app deployment. We need to define the correct data governance controls as part of the software delivery.</p><p>当我们希望在DataOps之后实现实时应用程序的自动化时，我们需要考虑的不仅仅是自动化应用程序部署。我们需要将正确的数据治理控制定义为软件交付的一部分。</p><p>  Lack of good governance will reduce the accessibility and trust in data and reduce the confidence to use the data downstream. Governance should cover the accessibility, availability, quality, integrity and confidentiality of the data.</p><p>缺乏良好的治理将降低对数据的可及性和信任度，并降低在下游使用数据的信心。治理应涵盖数据的可访问性、可用性、质量、完整性和机密性。</p><p> We want the creator of the App, who best understands the data to be able to define the governance controls as a single package and then have it reviewed by a standard workflow.</p><p>我们希望最了解数据的App创建者能够将治理控件定义为单个包，然后通过标准工作流对其进行审查。</p><p> Example: A data analyst builds their own data-processing application, but they also define the governance and compliance controls required to release it. This puts the app’s performance parameters in their hands - they decide what makes it production-ready and enterprise-grade.</p><p>示例：数据分析师构建他们自己的数据处理应用程序，但他们也定义发布应用程序所需的治理和遵从性控制。这使得应用程序的性能参数掌握在他们手中-他们决定是什么让它成为生产就绪和企业级的。</p><p> When deploying Kafka on Kubernetes, it may look like this: The analyst defines the application logic in some form (such as SQL) and includes:</p><p>在Kubernetes上部署Kafka时，可能是这样的：分析师以某种形式(如SQL)定义应用逻辑，包括：</p><p>   This can then be pushed to Git, managed through your standard Git workflows and a merge request created, triggering a build pipeline to deploy across your different environments.</p><p>然后可以将其推送到Git，通过您的标准Git工作流和创建的合并请求进行管理，从而触发构建管道在您的不同环境中部署。</p><p>  If you’re working with Kafka and doing this, there are two areas we need to consider:</p><p>如果您正在与卡夫卡合作并进行此操作，我们需要考虑两个方面：</p><p>   Lenses provide a full experience for data practitioners (developers, analysts, even business users) to build real-time applications deploying on a Kafka &amp; Kubernetes data platform by ensuring all data is catalogued, made accessible and explorable.</p><p>Lens为数据从业者(开发人员、分析师，甚至商业用户)提供全面的体验，通过确保所有数据都已编目、可访问和可浏览，构建部署在Kafka&amp；Kubernetes数据平台上的实时应用程序。</p><p> The  Lenses CLI client allows your “data landscape” to be exported as declarative configuration.  Here’s for example a YAML file representing an AVRO schema:</p><p>Lens CLI客户端允许将您的“数据景观”导出为声明性配置。例如，下面是一个表示Avro模式的YAML文件：</p><p>            This is the method we see most organizations adopt. Teams will push to Git which will trigger a deploy pipeline in any CI/CD (such as Jenkins) using various APIs in Kafka, Kafka Connect, Kubernetes or wherever you’re running your applications. It also makes it difficult for Jenkins to monitor the desired state and ensure consistency with Git.</p><p>这是我们看到大多数组织采用的方法。团队将使用Kafka、Kafka Connect、Kubernetes或您运行应用程序的任何地方的各种API推送到Git，这将在任何CI/CD(如Jenkins)中触发部署管道。这也使得Jenkins很难监控所需的状态并确保与Git的一致性。</p><p> Of course you also need to open up the firewall to allow Jenkins into your data platform.</p><p>当然，您还需要打开防火墙以允许Jenkins进入您的数据平台。</p><p>   You can use a Kubernetes operator to push the desired state. Jenkins or your CI/CD tool still needs to penetrate the data platform environment, however, which may increase security risk. Then you can use a Kubernetes operator (such as Strimzi’s) to monitor the desired state and apply the state to Kafka via APIs. This method is often used to operate the Kafka infrastructure, scale up Brokers etc. rather than to operate at the data layer (Topics, ACLs etc.)</p><p>您可以使用Kubernetes运算符来推送所需的状态。但是，Jenkins或您的CI/CD工具仍然需要渗透数据平台环境，这可能会增加安全风险。然后，您可以使用Kubernetes运算符(如Strimzi的)来监控所需的状态，并通过API将该状态应用到Kafka。此方法通常用于操作Kafka基础设施、纵向扩展代理等，而不是在数据层(主题、ACL等)操作。</p><p>   Pull methods are still based on an operator pattern, but through watching Git rather than watching Kubernetes.</p><p>Pull方法仍然基于运算符模式，但通过监视Git而不是监视Kubernetes。</p><p>   The operator is a Lenses operator which can run either inside or outside your data platform.  The operator speaks with Lenses which applies the desired state to the data platform including any real-time applications. So for example for anyone using  Lenses Streaming SQL, this would deploy the application over Kubernetes.</p><p>操作员是镜头操作员，可以在您的数据平台内部或外部运行。操作员与镜头对话，镜头将所需状态应用于数据平台，包括任何实时应用程序。例如，对于任何使用镜头流SQL的人来说，这将在Kubernetes上部署应用程序。</p><p> The desired state of course would have been created within a separate Lenses environment and exported as config with the CLI before being pushed into Git.</p><p>当然，所需的状态将在单独的镜头环境中创建，并在推送到Git之前通过CLI导出为config。</p><p> The benefit of this pull deployment approach is it provides a more secure environment by not needing your CI/CD to access your infrastructure, it also ensures your applications are secured, governed and audited in Git with the state actively monitored and the ability to rollback at any time.</p><p>此拉入部署方法的优势在于，通过不需要您的CI/CD来访问您的基础设施，它提供了更安全的环境，它还确保您的应用程序在Git中得到保护、治理和审计，状态受到积极监控，并且能够随时回滚。</p><p> You can practice GitOps in the free  Kafka+Lenses docker developer Box  now.  If you’re interested in an early access to the Lenses Operator: get in touch with us now  by form  or via  Slack.</p><p>您现在可以在免费的Kafka+镜头对接开发箱中练习GitOps。如果您有兴趣及早接触镜头运营商：现在就通过表格或通过Slake与我们联系。</p></div><div id="story_share_this"><div class="sharethis-inline-share-buttons"></div></div><div class="text-break sotry_link page_narrow"><a target="_blank" href="https://lenses.io/blog/2020/09/kafka-gitops-with-dataops/">https://lenses.io/blog/2020/09/kafka-gitops-with-dataops/</a></div><div class="story_tags page_narrow"><button type="button" class="btn btn-light my_tag"><a href="/tag/gitops/">#gitops</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/kafka/">#kafka</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/数据/">#数据</a></button></div></div><div class="my_movie_list_item shadow p-3 mb-5 bg-white rounded"><button type="button" class="btn btn-link my_tag"><a href="/tag/web2.0/">#web2.0</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/google/">#google</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/设计/">#设计</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/游戏/">#游戏</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/创意/">#创意</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/apple/">#apple</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/苹果/">#苹果</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/摄影/">#摄影</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/软件/">#软件</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/美国/">#美国</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/iphone/">#iphone</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/图片/">#图片</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/手机/">#手机</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/视频/">#视频</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/广告/">#广告</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/免费/">#免费</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/谷歌/">#谷歌</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/网站/">#网站</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/windows/">#windows</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/微软/">#微软</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/下载/">#下载</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/firefox/">#firefox</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/音乐/">#音乐</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/linux/">#linux</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/blog/">#blog</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/博客/">#博客</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/程序/">#程序</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/艺术/">#艺术</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/web/">#web</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/wordpress/">#wordpress</a></button></div></div></div><div id="my_footer"><div class=""><a href="/tags/">tags</a> <a href="/users/">users</a></div>&copy; 2020 diglog.com </div></div></body></html>