<!doctype html><html lang="zh-hans"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Windows V0.9 RUDE Rust for Windows v0.9</title><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"><link rel="stylesheet" href="/img/css.css?random="><link data-rh="true" rel="icon" href="/img/favicon.ico"/><script data-ad-client="ca-pub-6067137220025946" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script type="text/javascript" src="https://platform-api.sharethis.com/js/sharethis.js#property=5effb96910009800120b8d4d&product=inline-share-buttons" async="async"></script>
<script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?03c1a0f31299b4a2fbb83c34d6beaac9";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script></head><body><div id="my_header"><div class="container"><nav class="navbar navbar-expand-lg"><a class="navbar-brand" href="/"><img alt="diglog" src="/img/logo.v1.gif" class="rounded-sm"></a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarNavAltMarkup"><div class="navbar-nav"></div></div></nav></div></div><div class="container"><div id="my_content"><h1 class="page_narrow">Rust for Windows v0.9<br/>Windows V0.9 RUDE </h1><div class="row"><div class="col-lg-12 col-12"><div class="my_story_list_item shadow p-3 mb-5 bg-white rounded"><div class="story_page_pub_time page_narrow">2021-05-08 22:42:26</div><div class="story_img_container"><a href="http://img2.diglog.com/img/2021/5/7a53792b19d63d2ee4aeb74637d0edae.jpg"><img src="http://img2.diglog.com/img/2021/5/7a53792b19d63d2ee4aeb74637d0edae.jpg" class="img-fluid my_story_img" onerror="this.style.display='none'"></a></div><div class="page_narrow text-break page_content"><p>Rust for Windows v0.9 has recently been released and includes full consumption support, along with several other updates! With completed consumption support, you can now call any Windows APIs (past, present, and future) using the Rust language projection. Rust developers have access to the entire Windows API surface in a language-idiomatic way, allowing them to easily take advantage of the power and breadth of Windows development.</p><p>Windows V0.9的RUDE最近已发布并包括完全消费支持以及其他几个更新！通过完成的消费支持，您现在可以使用Rust语言投影呼叫任何Windows API（过去，呈现和未来）。 Rust开发人员可以以语言惯用方式访问整个Windows API表面，允许它们轻松利用Windows开发的电源和广度。</p><p> Along with this latest release, we have added new content to Microsoft Docs on   developing with Rust on Windows . There is also a new   Getting Started  video for those who want to dive in! For more information on the project, check out the Rust for Windows   Github repo .</p><p> 随着这个最新版本，我们向Microsoft文档添加了在Windows上使用Rust开发的新内容。对于那些想要潜入的人来说，还有一个新的入门视频！有关项目的更多信息，请查看Windows Github Repo的Rust。</p><p>  We have made great progress since last year’s   Rust/WinRT public preview announcement , with continued improvements and investment in the project. Some of the changes and updates since this last announcement include:</p><p>  自去年的Rust / WinRT公共预览公告以来，我们取得了很大进展，并持续改善和投资项目。自此最后通知以来的一些更改和更新包括：</p><p> Added support for Win32 and COM APIs, unifying the Windows APIs available for consumption via the   windows  crate. The addition of these APIs is enabled by the   win32metadata project .  With this increased coverage and unification of Windows APIs, we changed the name of the project from “Rust/WinRT” to “Rust for Windows”.</p><p> 为Win32和COM API添加了支持，统一通过Windows Crate可用的Windows API。 Win32Metadata项目启用了这些API的添加。随着Windows API的增加和统一，我们将项目的名称从“Rust / WinRT”更改为“Windows Rust”。</p><p> Added several   examples  to the Rust for Windows repo, demonstrating how to call a wide range of Windows APIs (includes Win32, COM, and WinRT APIs).</p><p> 为Windows Revo添加了几个例子，展示了如何调用各种Windows API（包括Win32，COM和WinRT API）。</p><p> The   windows  crate is published on crates.io and is now dual-licensed under MIT or Apache.</p><p> Windows Crate在Crate.IO上发布，现在在麻省理工学院或Apache下双重许可。</p><p>   Many improvements and fixes for Win32 APIs, such as support for array types, a variety of string types, and updated metadata.</p><p>   Win32 API的许多改进和修复，例如对数组类型的支持，各种字符串类型和更新的元数据。 </p><p> Added more natural and idiomatic support for COM interfaces such as with return values, and support for additional APIs involving things like C-style unions and nested types.</p><p>为COM接口添加了更自然和惯用的支持，例如返回值，以及支持涉及C风格的ONIONCE和嵌套类型的额外API。</p><p>  Original API case is   now preserved , which will affect existing code using the windows crate.</p><p>  现在保留原始API案例，这将影响使用Windows Crate的现有代码。</p><p> Transformed QueryInterface-like functions into generic functions, making it safer and more convenient to call many COM-related functions.</p><p> 将QueryInterface函数转换为通用功能，使其更安全，更方便地调用许多相关的功能。</p><p> For more details and a more comprehensive list of updates, look at the   changelog  on the Rust for Windows repo.</p><p> 有关更多详细信息和更全面的更新列表，请查看Windows Repo的Rust上的ChangeLog。</p><p>  We have recently added support for calling Win32 APIs in Rust, so I will walk through a simple example calling the   MessageBox  function. First make sure you have your Rust development environment set up, which you can do by following   these docs . The code for this example can also be found   here .</p><p>  我们最近添加了对ruct中的Win32 API调用Win32 API的支持，因此我将通过一个简单的示例，调用MessageBox函数。首先确保您拥有生锈开发环境，您可以通过遵循这些文档来完成。此处还可以在此处找到此示例的代码。</p><p> To begin, I created a new Rust project by running the following command in a command prompt:</p><p> 首先，我通过在命令提示符下运行以下命令创建了一个新的生锈项目：</p><p>  This creates a new directory with the starter files for my Rust project. Navigate to this new directory, and create a nested bindings crate using the command below to house the generated bindings. By doing this, the build can cache the results of any imported bindings.</p><p>  这将创建一个新目录，其中包含了我的Rust项目的初学文件。导航到此新目录，并使用下面的命令创建嵌套绑定栅格，以将生成的绑定容纳。通过这样做，构建可以缓存任何导入的绑定的结果。 </p><p>    In the outer Cargo.toml file directly under the   message_box  directory, add the following dependency which tells Cargo that it now depends on the newly created bindings library.</p><p>在MaSse_Box目录下直接在外部Cargo.toml文件中，添加以下依赖项，告诉货物现在取决于新创建的绑定库。</p><p>  Now in the Cargo.toml file underneath the   bindings  folder, add the following dependencies to add the windows crate.  This will allow Cargo to download, build, and cache Windows support as a package.</p><p>  现在在绑定文件夹下面的Cargo.Toml文件中，添加以下依赖项以添加Windows Crate。这将允许货物下载，构建和缓存Windows支持作为包。</p><p>  Next, in Visual Studio Code I created a new file directly under the   bindings  folder named build.rs. In this file, use the   windows::build  macro to specify the types that you want to use as shown below. You can list any additional APIs you want to use in this build script. The windows crate will then generate the necessary bindings directly from metadata.</p><p>  接下来，在Visual Studio代码中，我直接在名为build.rs的绑定文件夹下创建了一个新文件。在此文件中，使用Windows :: Build Macro指定要使用的类型，如下所示。您可以列出要在此构建脚本中使用的任何其他API。然后，Windows Crate将直接从元数据生成必要的绑定。</p><p>  Next in the lib.rs file under   bindings/src,  remove the default code and add the following line, which includes the source code generated by  build.rs  .</p><p>  接下来在绑定/ src下的lib.rs文件中，删除默认代码并添加以下行，其中包括build.rs生成的源代码。</p><p>  In the main.rs file, you can now make use of any of the specified Windows APIs. Paste the following code, which creates a message box with a “Hello World” message. Note that any Win32 functions and COM interface methods should be marked   unsafe .</p><p>  在main.rs文件中，您现在可以使用任何指定的Windows API。粘贴以下代码，它创建一个带有“Hello World”消息的消息框。请注意，任何Win32功能和COM接口方法都应标记为不安全。</p><p>  Run   cargo build  and then   cargo run  on a command prompt from the root directory of the sample, and you will see the following output!</p><p>  运行Cargo Build，然后在Sample的根目录中运行Cargo在命令提示符上运行，并且您将看到以下输出！</p><p>   We are excited about all the new improvements and capabilities with the latest Rust for Windows update. Get started today with developing Rust applications on Windows (and for Windows) with the   latest documentation  on Microsoft Docs. For a hands-on tutorial check out this  Getting Started  video created by Kenny Kerr.</p><p>   我们对最新的Windows Update进行了兴奋的所有新的改进和功能。立即开始使用Microsoft文档的最新文档在Windows（和Windows）上开发生锈应用程序。有关实际教程，请查看此入门，由Kenny Kerr创建的视频。 </p><p>   We have made great progress with Rust for Windows over the last year, and we are continuing to invest in the project to make building Windows apps easy for Rust developers. Up next, we are working on Rust   authoring support  both for COM interfaces and WinRT components, so stay tuned. We encourage you to reach out with any issues, feedback, or questions on the Rust for Windows   Github repo !</p><p>在过去的一年里，我们对Windows进行了巨大的进步，我们正在继续投资该项目以使Windows应用程序易于用于生锈开发人员。 接下来，我们正在研究COM接口和WinRT组件的Rust创作支持，因此保持调整。 我们鼓励您与Windows Github Repo的Rust的任何问题，反馈或问题联系到！ </p></div><div id="story_share_this"><div class="sharethis-inline-share-buttons"></div></div><div class="text-break sotry_link page_narrow"><a target="_blank" href="https://blogs.windows.com/windowsdeveloper/2021/05/06/announcing-rust-for-windows-v0-9/">https://blogs.windows.com/windowsdeveloper/2021/05/06/announcing-rust-for-windows-v0-9/</a></div><div class="story_tags page_narrow"><button type="button" class="btn btn-light my_tag"><a href="/tag/rust/">#rust</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/windows/">#windows</a></button></div></div><div class="my_movie_list_item shadow p-3 mb-5 bg-white rounded"><button type="button" class="btn btn-link my_tag"><a href="/tag/web2.0/">#web2.0</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/google/">#google</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/设计/">#设计</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/创意/">#创意</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/摄影/">#摄影</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/图片/">#图片</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/游戏/">#游戏</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/软件/">#软件</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/视频/">#视频</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/广告/">#广告</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/手机/">#手机</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/iphone/">#iphone</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/网站/">#网站</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/免费/">#免费</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/下载/">#下载</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/windows/">#windows</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/apple/">#apple</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/微软/">#微软</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/firefox/">#firefox</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/blog/">#blog</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/苹果/">#苹果</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/音乐/">#音乐</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/博客/">#博客</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/wordpress/">#wordpress</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/恶搞/">#恶搞</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/qq/">#qq</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/艺术/">#艺术</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/web/">#web</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/工具/">#工具</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/分享/">#分享</a></button></div></div></div><div id="my_footer"><div class=""><a href="/tags/">tags</a> <a href="/users/">users</a></div>&copy;2012-2021 diglog.com </div></div></body></html>