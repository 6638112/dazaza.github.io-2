<!doctype html><html lang="zh-hans"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>AWS预先宣布公共容器映像注册表</title><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"><link rel="stylesheet" href="/img/css.css?random="><link data-rh="true" rel="icon" href="/img/favicon.ico"/><script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?03c1a0f31299b4a2fbb83c34d6beaac9";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script><script data-ad-client="ca-pub-6067137220025946" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script type="text/javascript" src="https://platform-api.sharethis.com/js/sharethis.js#property=5effb96910009800120b8d4d&product=inline-share-buttons" async="async"></script></head><body><div id="my_header"><div class="container"><nav class="navbar navbar-expand-lg"><a class="navbar-brand" href="/"><img alt="diglog" src="/img/logo.v1.gif" class="rounded-sm"></a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarNavAltMarkup"><div class="navbar-nav"></div></div></nav></div></div><div class="container"><div id="my_content"><h1 class="page_narrow">AWS预先宣布公共容器映像注册表</h1><div class="row"><div class="col-lg-12 col-12"><div class="my_story_list_item shadow p-3 mb-5 bg-white rounded"><div class="story_page_pub_time page_narrow">2020-11-03 12:05:12</div><div class="story_img_container"><a href="http://img2.diglog.com/img/2020/11/29bc0fc486b086201f2c665e8356e8ca.png"><img src="http://img2.diglog.com/img/2020/11/29bc0fc486b086201f2c665e8356e8ca.png" class="img-fluid my_story_img" onerror="this.style.display='none'"></a></div><div class="page_narrow text-break page_content"><p>Many container customers building applications use common software packages (e.g. operating systems, databases, and application components) that are publicly distributed as container images on  Docker Hub. Docker, Inc. has announced that the Hub service will begin  limiting the rate at which images are pulled under their anonymous and free plans. These limits will  progressively take effect beginning November 2, 2020. Once fully in place, free plan anonymous use will be limited to 100 pulls per six hours, free plan authenticated accounts limited to 200 pulls per six hours, and Pro and Team accounts will not see any rate limits.</p><p>许多构建应用程序的容器客户使用公共软件包(例如操作系统、数据库和应用程序组件)，这些软件包在Docker Hub上作为容器镜像公开分发。Docker，Inc.。宣布Hub服务将开始限制其匿名和免费计划下的图像拉取速率。这些限制将从2020年11月2日起逐步生效。一旦完全到位，免费计划匿名使用将限制为每六小时100拉，免费计划认证帐户限制为每六小时200拉，专业和团队帐户将不会看到任何费率限制。</p><p>  With the introduction of these limits, our customers should expect some of their applications and tools that use public images from Docker Hub to face throttling errors, such as when they build from a parent public image or pull a public image to run. Many of our customers have expressed concern about possible impact, so we are sharing some practical advice for managing Docker Hub’s rate limits, and announcing an upcoming AWS solution.</p><p>随着这些限制的引入，我们的客户应该预料到，他们的一些使用Docker Hub公共映像的应用程序和工具将面临节流错误，例如，当他们从父公共映像构建或拉出公共映像运行时。我们的许多客户都表达了对可能的影响的担忧，因此我们将分享一些关于管理Docker Hub的速率限制的实用建议，并宣布即将推出的AWS解决方案。</p><p>    If customers see impact, the overall approach we recommend is first to  identify public container images in use, then  choose a mitigation approach and take the necessary steps.</p><p>如果客户看到影响，我们建议的总体方法是首先确定正在使用的公共容器映像，然后选择缓解方法并采取必要步骤。</p><p>  You can identify Docker Hub public images by searching for files named  Dockerfile in source code for the  FROM command. If there is no registry URL preceding the image and tag, that image will pull from Docker Hub when it runs. For example,  FROM amazonlinux:latest pulls the latest  amazonlinux version from Docker Hub as the parent image in an application image build. For completeness, also search your container application cluster configurations for public images. We are working on a tool to automate these steps which will make it easier to generate a list of all public images in source repositories, Amazon Elastic Container Service (ECS), and Amazon Elastic Kubernetes Service (EKS) clusters. We’ll update this blog in a few days with more details on this tool including its availability, be sure to check back.</p><p>您可以通过在FROM命令的源代码中搜索名为Dockerfile的文件来识别Docker Hub公共镜像。如果在图像和标签之前没有注册表URL，则该图像在运行时将从Docker Hub拉取。例如，from amazonlinux：Latest从Docker Hub获取最新的amazonlinux版本，作为应用程序映像构建中的父映像。为了完整性，还要在容器应用程序集群配置中搜索公共映像。我们正在开发一种工具来自动执行这些步骤，以便更轻松地生成源存储库、Amazon Elastic Container Service(ECS)和Amazon Elastic Kubernetes Service(EKS)群集中的所有公共映像的列表。我们将在几天内更新此博客，提供有关此工具的更多详细信息，包括其可用性，请务必回来查看。</p><p>  There are two mitigation approaches we recommend.  One, copy public images being used into a private registry such as  Amazon Elastic Container Registry (ECR). Or  two, upgrade to a paid Docker Hub  subscription. Both approaches require switching to an authenticated pull model. ECS customers can follow  these instructions to authenticate task pull requests. Kubernetes customers, including EKS users can follow  these instructions to authenticate worker node or pod pulls. Note that public images copied to ECR may be pulled without additional authentication effort if AWS Identity and Access Management (IAM) prerequisites are in place. IAM prerequisites for authenticated pulls are documented for  ECS here and for  EKS here. Customers also using third-party systems can consult this  Docker link for additional authenticated pull documentation.</p><p>我们推荐两种缓解方法。其一，将正在使用的公共映像复制到私有注册表中，如Amazon Elastic Container Registry(ECR)。或者第二，升级到付费Docker Hub订阅。这两种方法都需要切换到经过身份验证的拉取模型。ECS客户可以按照这些说明对任务拉入请求进行身份验证。Kubernetes客户(包括EKS用户)可以按照以下说明对Worker节点或实例拉取进行身份验证。请注意，如果具备AWS Identity and Access Management(IAM)前提条件，则可以提取复制到ECR的公共映像，而无需额外的身份验证工作。此处记录了ECS和EKS的IAM认证拉取的前提条件。也使用第三方系统的客户可以参考此Docker链接，了解更多经过身份验证的拉取文档。</p><p>    AWS publishes the Amazon ECS agent as a public container image and pre-installs it on all  ECS-optimized Amazon Machine Images (AMIs). Any instances using the ECS-optimized AMIs do not depend on Docker Hub to launch the instance, so customers using these AMIs will not be impacted by Docker Hub’s limitations on pulls of the ECS agent container image. Customers who  update the agent to the latest version using the AWS Console or CLI will also not see rate limit impacts when upgrading, as the upgrade process downloads the latest ECS agent image from Amazon S3 and does not rely on Docker Hub.</p><p>AWS将Amazon ECS代理作为公共容器映像发布，并将其预装在所有经过ECS优化的Amazon机器映像(AMI)上。任何使用ECS优化AMI的实例都不依赖Docker Hub启动实例，因此使用这些AMI的客户不会受到Docker Hub对ECS代理容器镜像拉取限制的影响。使用AWS控制台或CLI将代理更新到最新版本的客户在升级时也不会受到速率限制的影响，因为升级过程会从Amazon S3下载最新的ECS代理映像，并且不依赖Docker Hub。</p><p>  Customers who create their own AMIs for use with ECS, or use third-party AMIs, must  manage installation and upgrades of the ECS agent. These customers can store their own copy of the ECS agent in a private registry (such as ECR) and pull it from there, download it from a public S3 bucket owned by AWS, or pull the image from Docker Hub. Customers downloading the ECS agent from Docker Hub may be subject to Docker Hub rate limits. To mitigate rate limit effects, these customers can take the steps outlined above to manage Docker’s pull rate impact.</p><p>创建自己的AMI以用于ECS或使用第三方AMI的客户必须管理ECS代理的安装和升级。这些客户可以将自己的ECS代理副本存储在私有注册表(如ECR)中，然后从那里提取、从AWS拥有的公共S3存储桶下载，或者从Docker Hub提取映像。从Docker Hub下载ECS代理的客户可能会受到Docker Hub速率限制。为了缓解速率限制影响，这些客户可以采取上述步骤来管理Docker的拉动率影响。</p><p>    All EKS add-on software that is included with EKS clusters is hosted on ECR today and will not be subject to Docker Hub rate limits. EKS-built and maintained projects, such as the AWS Load Balancer Controller include helm charts that reference images on ECR as well. However, manifests for these projects available on GitHub include references to images that are published to Docker Hub. You can check whether you are using a manifest with a Docker Hub image using the steps described in this blog and update to use a chart that references an ECR hosted image. These charts are available in the  EKS Charts GitHub repository.</p><p>目前，EKS群集附带的所有EKS附加软件都托管在ECR上，不受Docker Hub速率限制。EKS构建和维护的项目(如AWS负载均衡器控制器)也包括引用ECR上图像的舵图。但是，GitHub上提供的这些项目的清单包括对发布到Docker Hub的图像的引用。您可以使用本博客中描述的步骤检查是否将清单与Docker Hub映像一起使用，并更新以使用引用ECR托管映像的图表。这些图表位于EKS Charts GitHub存储库中。</p><p>    Today, Amazon Elastic Container Registry (ECR) customers download billions of images each week, enabling them to deploy containers for use in their own applications running on-premises and in AWS. Events like Docker Hub rate limits reinforce the reality that public container images are a critical part of the container software supply chain. Customers have asked us to help make public container images they use as highly available and dependable as their images hosted in ECR.</p><p>如今，Amazon Elastic Container Registry(ECR)客户每周下载数十亿个映像，使他们能够部署容器，以便在其内部运行的应用程序和AWS中使用。诸如Docker Hub费率限制之类的事件强化了这样一个事实，即公共容器映像是容器软件供应链的关键部分。客户要求我们帮助使他们使用的公共容器映像与ECR中托管的映像一样具有高度可用性和可靠性。</p><p>  We have been working for many months to answer this customer ask. Within weeks,  AWS will deliver a new public container registry that will allow developers to share and deploy container images publicly. This new registry will allow developers to store, manage, share, and deploy container images for anyone to discover and download. Developers will be able to use AWS to host both their private and public container images, eliminating the need to use different public websites and registries. Public images will be geo-replicated for reliable availability around the world and offer fast downloads to quickly serve up images on-demand. Anyone (with or without an AWS account) will be able to browse and pull containerized software for use in their own applications. Developers will be able use the new registry to distribute public container images and related files like helm charts and policy configurations for use by any developer.  A new website will allow anyone to browse and search for public container images, view developer provided details, and see pull commands — all without needing to sign in to AWS. AWS-provided public images such as the ECS agent, Amazon CloudWatch agent, and AWS Deep Learning Container images will also be available.</p><p>我们已经花了好几个月的时间来回答这个客户的问题。在几周内，AWS将提供一个新的公共容器注册表，允许开发人员公开共享和部署容器镜像。这个新的注册表将允许开发人员存储、管理、共享和部署容器映像，以供任何人发现和下载。开发者将能够使用AWS来托管他们的私有和公共容器镜像，从而无需使用不同的公共网站和注册中心。公共映像将在全球范围内进行地理复制，以实现可靠的可用性，并提供快速下载以快速按需提供映像。任何人(无论是否拥有AWS帐户)都可以浏览和获取集装箱化软件，以便在自己的应用程序中使用。开发人员将能够使用新的注册表分发公共容器图像和相关文件，如舵图和策略配置，供任何开发人员使用。一个新网站将允许任何人浏览和搜索公共容器图像、查看开发人员提供的详细信息以及查看Pull命令-所有这些都无需登录到AWS。还将提供AWS提供的公共映像，如ECS代理、Amazon CloudWatch代理和AWS Deep Learning Container映像。</p><p>  AWS customers will enjoy a smooth, dependable experience when working with public container images, and with pricing that provides additional value. A developer sharing public images on AWS will get 50 GB of free storage each month and will pay nominal charges after. Anyone who pulls images anonymously will get 500 GB of free data bandwidth each month after which they can sign up or sign in to an AWS account. Simply authenticating with an AWS account increases free data bandwidth up to 5 TB each month when pulling images from the internet. And finally, workloads running in AWS will get unlimited data bandwidth from any region when pulling publicly shared images hosted on AWS.</p><p>AWS客户在使用公共容器镜像时将享受流畅、可靠的体验，并且定价可提供额外价值。在AWS上共享公共图像的开发者每月将获得50 GB的免费存储空间，之后将象征性地支付费用。任何匿名拉取图片的人每月都将获得500 GB的免费数据带宽，之后他们可以注册或登录AWS账户。只需使用AWS帐户进行身份验证，在从互联网提取图像时，每月的免费数据带宽最高可达5 TB。最后，在AWS中运行的工作负载在拉取托管在AWS上的公开共享映像时，将从任何地区获得无限制的数据带宽。</p></div><div id="story_share_this"><div class="sharethis-inline-share-buttons"></div></div><div class="text-break sotry_link page_narrow"><a target="_blank" href="https://aws.amazon.com/blogs/containers/advice-for-customers-dealing-with-docker-hub-rate-limits-and-a-coming-soon-announcement/">https://aws.amazon.com/blogs/containers/advice-for-customers-dealing-with-docker-hub-rate-limits-and-a-coming-soon-announcement/</a></div><div class="story_tags page_narrow"><button type="button" class="btn btn-light my_tag"><a href="/tag/预先/">#预先</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/pre/">#pre</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/映像/">#映像</a></button></div></div><div class="my_movie_list_item shadow p-3 mb-5 bg-white rounded"><button type="button" class="btn btn-link my_tag"><a href="/tag/web2.0/">#web2.0</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/google/">#google</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/设计/">#设计</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/游戏/">#游戏</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/创意/">#创意</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/apple/">#apple</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/苹果/">#苹果</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/摄影/">#摄影</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/软件/">#软件</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/美国/">#美国</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/iphone/">#iphone</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/图片/">#图片</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/手机/">#手机</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/视频/">#视频</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/广告/">#广告</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/免费/">#免费</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/谷歌/">#谷歌</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/网站/">#网站</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/windows/">#windows</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/微软/">#微软</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/下载/">#下载</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/firefox/">#firefox</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/音乐/">#音乐</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/linux/">#linux</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/blog/">#blog</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/博客/">#博客</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/程序/">#程序</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/艺术/">#艺术</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/web/">#web</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/wordpress/">#wordpress</a></button></div></div></div><div id="my_footer"><div class=""><a href="/tags/">tags</a> <a href="/users/">users</a></div>&copy; 2020 diglog.com </div></div></body></html>