<!doctype html><html lang="zh-hans"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>解决功能程序所隐含的时间悖论 </title><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"><link rel="stylesheet" href="/img/css.css?random="><link data-rh="true" rel="icon" href="/img/favicon.ico"/><script data-ad-client="ca-pub-6067137220025946" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script type="text/javascript" src="https://platform-api.sharethis.com/js/sharethis.js#property=5effb96910009800120b8d4d&product=inline-share-buttons" async="async"></script>
<script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?03c1a0f31299b4a2fbb83c34d6beaac9";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script></head><body><div id="my_header"><div class="container"><nav class="navbar navbar-expand-lg"><a class="navbar-brand" href="/"><img alt="diglog" src="/img/logo.v1.gif" class="rounded-sm"></a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarNavAltMarkup"><div class="navbar-nav"></div></div></nav></div></div><div class="container"><div id="my_content"><h1 class="page_narrow">解决功能程序所隐含的时间悖论 </h1><div class="row"><div class="col-lg-12 col-12"><div class="my_story_list_item shadow p-3 mb-5 bg-white rounded"><div class="story_page_pub_time page_narrow">2020-12-28 07:47:28</div><div class="page_narrow text-break page_content"><p>“没有人可以两次穿越同一条河。”因为什么是河？我的意思是，我们喜欢这种物体的想法；就像这件事发生了变化。对？没有河。对？一个时间点那里有水。还有一个时间点，那里还有水。 — Rich Hickey，《我们还在那里吗》，引用赫拉克利特。</p><p> 从用户的角度来看，功能程序可能看起来是有状态的。与上面的功能性ATM程序进行交互，并注意到该程序会记住以前的遭遇。一方面，这不足为奇。我们包括了一个命令层来记住以前的状态。我们没有将程序的状态分解为不同的对象（例如bankAccount和drawingAmount），而是创建了一个全局对象，即store。另一方面，专注于程序的“对象”部分则背离了面向对象的倾向。该程序的必要部分仅仅是用于促进基于另一个的异步计算的构造。甚至可以想象一种编程语言，其中在语言本身中内置了这种构造，从而从程序员的角度隐藏了任何命令式实现。实际上，存在可以编译为JavaScript的语言。 [1]换句话说，它是语法，而不是语义。程序的语义与递归的迭代函数的语义更好地吻合，在离散的步骤i处具有状态S-使用上一次运行的输出运行功能性ATM程序，以产生下一个运行的输入。</p><p> 至少可以这样说，具有功能性，无状态且永恒的内核的程序可以维持状态令人惊讶。环顾房间，公共汽车，公园或任何您发现自己在阅读这句话的地方，您可能会发现“一系列不同的物体”，例如狗，人和树木，“其行为可能随时间而改变”。另一方面，环顾功能正常的ATM程序，找不到可识别的对象。但是，该程序似乎具有与房间中其他任何对象一样的状态。</p><p> 但是，当我们对时间的概念的扩展超出了功能性程序的范围，从而涵盖了我们其余的物理现实时，表面上的“悖论”就消失了。</p><p> 解决此矛盾的一种方法是认识到，用户的时间存在将状态强加于系统上。如果用户可以退出交互并从余额流而不是单个交易的角度进行思考，则系统将显示为无状态-SICP第3.5.5节</p><p> 除了将世界视为其对象的总和，每个对象都随着时间的流逝反映其最新状态之外，我们还可以考虑离散的状态历史。正如我们将功能程序的状态解释为以不连续的步骤S（i）至S（i + 1）移动一样，我们可以将公园中的狗解释为以离散的步骤S（i）至S（i + 1）移动。 ）。</p><p> 考虑视频媒体。对于电影场景，我们可以赋予相同的面向对象语义。角色和无生命的物体会随着时间的流逝而发生转移，相互作用和进化。 </p><p>例如，在播放以上视频时，我们可以得出结论：“一只猫在跳舞”。但是，视频是由静态帧组成的，这些静态帧以不连续的时间间隔按一定顺序缝合在一起。每个帧对应于某个时刻的视频状态，并且这些帧合在一起以时间计价的一系列离散状态。上面选择的媒体是有意的meta。该视频包括一幅由动画书[2]镜像的场景的电视动画，该场景显示了在离散时间间隔内串在一起的静态帧，而动画帧本身在“真实”生活中被一本动画书镜像了，示出了静态帧在同一时间串在一起。离散时间间隔。再次退后一步，注意上面在计算机上播放的gif媒体（如果您的浏览器支持html5，则为mp4）是由静态帧组成的，它们以不连续的时间间隔串在一起。</p><p> 没有什么可以阻止我们再后退一步，并将您的计算机当前位于的真实世界解释为以离散时间间隔串在一起的静态帧。我们可以将普通的面向对象的语义归因于上述gif，从而得出“猫在跳舞”的结论。但是，我们也可以将功能语义归因于结论，即“猫在fᵢ框架上的头顶上方有手臂”。在现实世界的一个公园里，我们可以得出这样的结论：“一条狗在追一只松鼠。”但是，我们也可以得出这样的结论：“在帧f frame上，一只狗在松鼠后面的奔跑运动中。”在这两种情况下，我们都可以确定状态的时间序列，而不是随时间变化的对象。函数式编程范例可以一致地应用于世界和程序。</p><p> 考虑到离散时间的模型，功能程序看起来有状态就不足为奇了。程序的用户可以被视为一系列状态，就像程序本身一样。一系列特定的用户状态，例如，</p><p> U₀：＆＃34;打开此博客文章＆＃34; U₁：“选择20个选项” U2：“点击撤回” ... U（i）：Uᵢ</p><p>  S₀：余额：100，金额：10S₁：余额：100，金额：20 S 2：余额：80，金额：20 ... S（i）：程序（Sᵢ₋₁，Eᵢ）</p><p> 在这两种情况下，静态信息都可能一个接一个地列出。此外，两个列表都可以沿着相同的离散时间轴i绘制。用户交互以特定顺序U（i）进来，针对上一次运行S（i-1）和事件数据E（i）的结果触发程序功能的运行，以产生S（i）。我们的现实可以被视为状态的时序，就像它可以被视为对象的集合一样。正如面向对象的编程对对象进行建模一样，功能编程对状态的时间序列进行建模。当程序和世界都可以看作是“在系统中流动的信息流”时（SICP第3节），世界可以流入程序，而程序又可以回到世界。</p><p>  尽管纯功能的独占使用和用户交互的异步性，但Elm程序却微不足道地成为有状态的！这个计数器程序 </p><p>导入浏览器导入HTML暴露（HTML，按钮，div，文本）导入Html.Event暴露（onClick）main = Browser.sandbox {init = 0，更新=更新，视图=视图} 减量更新消息模型=增量的情况消息-> 模型+ 1减量-> 模型-1视图模型= div [] [按钮[onClick减量] [文本＆＃34;-＆＃34; ]，div [] [文本（String.fromInt模型）]，按钮[onClick增量] [文本＆＃34; +＆＃34; ]  在这里可以看到跟踪计数器状态，即使用户当然可以异步单击计数器按钮。 像JavaScript中的垃圾回收一样，Elm从程序员的角度隐藏了专用于异步脚本之间通信的命令性代码。 ↩︎  有人建议使用一本翻书作为功能编程中状态的一种有价值的心理模型。 </p></div><div id="story_share_this"><div class="sharethis-inline-share-buttons"></div></div><div class="text-break sotry_link page_narrow"><a target="_blank" href="https://softwarefordays.com/post/resolving-the-fp-time-paradox/">https://softwarefordays.com/post/resolving-the-fp-time-paradox/</a></div><div class="story_tags page_narrow"><button type="button" class="btn btn-light my_tag"><a href="/tag/程序/">#程序</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/功能/">#功能</a></button></div></div><div class="shadow p-3 mb-5 bg-white rounded clearfix"><div class="container"><div class="row"><div class="col-sm"><div><a target="_blank" href="/story/1041938.html"><img src="http://img2.diglog.com/img/2020/12/thumb_01ca6d0b0989f388935a4844726edc18.jpg" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1041938.html">Stadia使用Web应用程序绕过Apple关于云游戏应用程序的政策 </a></div><span class="my_story_list_date">2020-12-27 7:32</span></div><div class="col-sm"><div><a target="_blank" href="/story/1041931.html"><img src="http://img2.diglog.com/img/2020/12/thumb_f870fef8540cf66a0830aef0cbf944c4.png" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1041931.html">Überzug：用于在终端上绘制图像的CLI实用程序 </a></div><span class="my_story_list_date">2020-12-27 7:29</span></div><div class="col-sm"><div><a target="_blank" href="/story/1041889.html"><img src="http://img2.diglog.com/img/2020/12/thumb_8c596c7fad34dd2ee7caf328b5401baa.jpg" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1041889.html">您需要多少数学程序设计？ </a></div><span class="my_story_list_date">2020-12-26 18:44</span></div><div class="col-sm"><div><a target="_blank" href="/story/1041580.html"><img src="http://img2.diglog.com/img/2020/12/thumb_80fc4132006e081d47d89a1ac6f05862.jpg" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1041580.html">工人拥有的应用程序可以从Uber和Lyft中拉驱动程序吗？ </a></div><span class="my_story_list_date">2020-12-24 21:38</span></div></div></div></div><div class="my_movie_list_item shadow p-3 mb-5 bg-white rounded"><button type="button" class="btn btn-link my_tag"><a href="/tag/web2.0/">#web2.0</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/google/">#google</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/设计/">#设计</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/创意/">#创意</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/摄影/">#摄影</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/游戏/">#游戏</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/图片/">#图片</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/软件/">#软件</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/视频/">#视频</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/手机/">#手机</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/广告/">#广告</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/apple/">#apple</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/iphone/">#iphone</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/网站/">#网站</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/免费/">#免费</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/下载/">#下载</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/windows/">#windows</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/微软/">#微软</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/firefox/">#firefox</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/苹果/">#苹果</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/blog/">#blog</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/音乐/">#音乐</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/博客/">#博客</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/wordpress/">#wordpress</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/恶搞/">#恶搞</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/艺术/">#艺术</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/qq/">#qq</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/web/">#web</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/谷歌/">#谷歌</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/工具/">#工具</a></button></div></div></div><div id="my_footer"><div class=""><a href="/tags/">tags</a> <a href="/users/">users</a></div>&copy;2012-2021 diglog.com </div></div></body></html>