<!doctype html><html lang="zh-hans"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Go中常量的细微差别；Go不是JavaScript</title><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"><link rel="stylesheet" href="/img/css.css?random="><link data-rh="true" rel="icon" href="/img/favicon.ico"/><script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?03c1a0f31299b4a2fbb83c34d6beaac9";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script><script data-ad-client="ca-pub-6067137220025946" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script type="text/javascript" src="https://platform-api.sharethis.com/js/sharethis.js#property=5effb96910009800120b8d4d&product=inline-share-buttons" async="async"></script></head><body><div id="my_header"><div class="container"><nav class="navbar navbar-expand-lg"><a class="navbar-brand" href="/"><img alt="diglog" src="/img/logo.v1.gif" class="rounded-sm"></a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarNavAltMarkup"><div class="navbar-nav"></div></div></nav></div></div><div class="container"><div id="my_content"><h1 class="page_narrow">Go中常量的细微差别；Go不是JavaScript</h1><div class="row"><div class="col-lg-12 col-12"><div class="my_story_list_item shadow p-3 mb-5 bg-white rounded"><div class="story_page_pub_time page_narrow">2020-11-02 09:22:24</div><div class="story_img_container"><a href="http://img2.diglog.com/img/2020/11/74f1ccfa4249fcc4f7e79edad2d58586.jpg"><img src="http://img2.diglog.com/img/2020/11/74f1ccfa4249fcc4f7e79edad2d58586.jpg" class="img-fluid my_story_img" onerror="this.style.display='none'"></a></div><div class="page_narrow text-break page_content"><p>Constants can be confusing and easy to misuse in Go if you are coming from an untyped language. Let’s take a look at some of the nuanced details of how they work in Go. It’s probably unsurprising, but Go’s constants are almost nothing like JavaScript’s bastardized version of the concept.</p><p>如果您来自一种非类型化语言，则常量在Go中可能会令人困惑，并且很容易被误用。让我们来看看它们在围棋中如何工作的一些细微差别的细节。这可能并不令人惊讶，但Go的常量几乎与JavaScript对该概念的混蛋版本完全不同。</p><p>      Must be able to be assigned at compile time. The value of a const can’t be the result of a runtime calculation.</p><p>必须能够在编译时赋值。常量的值不能是运行时计算的结果。</p><p>   Only work with some types. Arrays, Slices, Maps, Structs, etc… can’t be made constant</p><p>仅适用于某些类型。数组、切片、贴图、结构等…。不能使其成为常量。</p><p>  Can’t be reassigned, but  can change. JavaScript’s constants are extremely misleading. the  const keyword does NOT define a constant value. It defines a constant  reference to a value.</p><p>不能重新分配，但可以改变。JavaScript的常量极具误导性。Const关键字没有定义常量值。它定义对值的常量引用。</p><p> If the constant is a type that has inner workings that change, like an array or object then the inner references can be changed.</p><p>如果常量是具有更改的内部工作方式的类型(如数组或对象)，则可以更改内部引用。</p><p> The takeaway if you are coming from JavaScript is that Go’s constants are just  different. They deal with compile-time values, not immutable naming.</p><p>如果您来自JavaScript，您会得到的结论是Go的常量只是不同而已。它们处理编译时的值，而不是一成不变的命名。</p><p> In Go, constants provide  complete safety in regards to the value they hold. They cannot be computed (making them used less often), but are guaranteed to always reference the same value.</p><p>在围棋中，常量提供关于它们所持有的值的完全安全。它们无法计算(减少了使用频率)，但可以保证始终引用相同的值。</p><p> In JavaScript, all a  const does is ensure that the same name can’t be changed to reference a different variable in the same scope.</p><p>在JavaScript中，const所做的就是确保不能将相同的名称更改为引用相同作用域中的不同变量。</p><p>  Constants in Go must be assigned  before the program runs. All constants are computed and saved when the program compiles using  go build. Constants can rely on the value of other constants, but not on runtime calculations. For example:</p><p>必须在程序运行之前分配GO中的常量。使用GO BUILD编译程序时，将计算并保存所有常量。常量可以依赖于其他常量的值，但不依赖于运行时计算。例如：</p><p>  Works because both values can be known  before the program runs. The following will not work:</p><p>之所以有效，是因为这两个值都可以在程序运行之前知道。以下操作将不起作用：</p><p>  This won’t work because  more relies on a runtime variable,  minutes. Keep in mind that this would work in JavaScript, because the only rule with constants in javascript is that they can’t be reassigned.</p><p>这不会起作用，因为More依赖于运行时变量分钟。请记住，这在JavaScript中是有效的，因为javascript中常量的唯一规则是它们不能被重新赋值。</p><p>  The Go compiler doesn’t need to worry about a constant changing its value, so it can swap every instance of the const with an unchanging number. This makes constants slightly faster.</p><p>Go编译器不需要担心常量改变它的值，因此它可以用不变的数字交换const的每个实例。这使得常量稍微快一些。</p><p>  Numeric constants can be much  larger and have much greater precision than normal variables because they have  arbitrary-precision. When numeric constants are assigned to a variable they must be able to fit the size of the type they are being assigned to. Take a look at the following examples:</p><p>数值常量可以比普通变量大得多，精度也高得多，因为它们具有任意精度。将数值常量分配给变量时，它们必须能够适应要分配到的类型的大小。请看以下例子：</p><p>  The  large number can’t be printed, but we can still use it in a calculation:</p><p>大数字不能打印，但我们仍然可以在计算中使用它：</p><p> fmt.Println(large) // won&#39;t compilesmall := (large / 1e9999) // works as expectedfmt.Println(small) // prints 10</p><p>Fmt.Println(大)//韩元t编译mall：=(Large/1e9999)//按预期工作dfmt.Println(小)//打印10。</p><p> High precision floating point numbers like E can still be used but the high precision is lost when assigned to a  float64 or  float32.</p><p>仍然可以使用像E这样的高精度浮点数，但是当将高精度赋值给Float64或Float32时，高精度就会丢失。</p><p>    Use constants  wherever possible. Why would you want to be able to accidentally mutate a value that you know should never change? Let the compiler save you from yourself, and use constants as much as possible.</p><p>尽可能使用常量。为什么你会想要意外地改变一个你知道永远不应该改变的值呢？让编译器将您从您自己中解救出来，并尽可能多地使用常量。</p><p> You may be familiar with the idea that global variables in programming are a bad idea. Variables should typically belong to the smallest scope possible.</p><p>您可能熟悉这样一种想法，即编程中的全局变量不是一个好主意。变量通常应该属于尽可能小的范围。</p><p> Constants in Go don’t apply to the global variable rule, there is  nothing wrong with declaring global constants. Granted, if the constant is only used in one place, it may make sense to declare it there. The point however remains:  it isn’t dangerous to declare constants globally.</p><p>GO中的常量不适用于全局变量规则，声明全局常量没有错。当然，如果常量只在一个地方使用，那么在那里声明它可能是有意义的。不过，问题仍然存在：在全局范围内声明常量并不危险。</p><p>    Numeric, boolean, and string types can all be made constant. This includes things like runes, floats, integers, and even custom types that are based on valid underlying types. For example:</p><p>数字、布尔和字符串类型都可以设置为常量。这包括诸如符文、浮点数、整数之类的内容，甚至包括基于有效基础类型的自定义类型。例如：</p><p>  Other types like arrays, slices, and maps can not be declared as constant. This makes sense because those types are essentially just pointers, which are addresses of mutable data. However, I have written  another article on the elegant ways to get “effectively constant” slices and maps in Go.</p><p>其他类型(如数组、切片和映射)不能声明为常量。这是有意义的，因为这些类型本质上只是指针，它们是可变数据的地址。然而，我已经写了另一篇文章，关于在围棋中获得“有效恒定”的切片和地图的优雅方法。</p><p> By contrast, in JavaScript,  anything can be made constant. JavaScript arrays can be declared as constant, but it doesn’t stop the programmer from mutating the elements of the array! The only safety JavaScript’s  const provides is that the variable can’t be explicitly reassigned.</p><p>相比之下，在JavaScript中，任何东西都可以成为常量。JavaScript数组可以声明为常量，但这并不能阻止程序员改变数组的元素！JavaScript的const提供的唯一安全性是变量不能被显式重新赋值。</p><p>      An untyped string behaves  mostly like a string. That is, its a string type, but doesn’t have a Go value of type  string. In order to give it the official Go type of string, it must be declared:</p><p>非类型化字符串的行为在很大程度上类似于字符串。也就是说，它是String类型，但没有String类型的go值。为了使其成为字符串的官方GO类型，必须声明：</p></div><div id="story_share_this"><div class="sharethis-inline-share-buttons"></div></div><div class="text-break sotry_link page_narrow"><a target="_blank" href="https://qvault.io/2020/10/22/constants-in-go-vs-javascript-and-when-to-use-them/">https://qvault.io/2020/10/22/constants-in-go-vs-javascript-and-when-to-use-them/</a></div><div class="story_tags page_narrow"><button type="button" class="btn btn-light my_tag"><a href="/tag/java/">#java</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/常量/">#常量</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/nuances/">#nuances</a></button></div></div><div class="shadow p-3 mb-5 bg-white rounded clearfix"><div class="container"><div class="row"><div class="col-sm"><div><a target="_blank" href="/story/1032572.html"><img src="http://img2.diglog.com/img/2020/11/thumb_9b2a7fcceee51585feb5628a787bccaa.jpeg" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1032572.html">打算停止在我的(JavaScript)代码中使用NULL</a></div><span class="my_story_list_date">2020-11-1 10:50</span></div><div class="col-sm"><div><a target="_blank" href="/story/1032482.html"><img src="http://img2.diglog.com/img/2020/10/thumb_443fb78166cd1e98f75aed69f8d85206.jpeg" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1032482.html">Java并发性-了解线程的基础知识</a></div><span class="my_story_list_date">2020-10-31 21:1</span></div><div class="col-sm"><div><a target="_blank" href="/story/1031970.html"><img src="http://img2.diglog.com/img/2020/10/thumb_4d2b600d2de85507ff91c336b79c432a.png" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1031970.html">新兴的JavaScript模式：多个返回值</a></div><span class="my_story_list_date">2020-10-29 18:29</span></div><div class="col-sm"><div><a target="_blank" href="/story/1031619.html"><img src="http://img2.diglog.com/img/2020/10/thumb_99f2142c0124e0d0a756ac05f1257d4d.png" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1031619.html">Eslisp-ECMAScript/JavaScript的S表达式语法，带有类似Lisp的宏</a></div><span class="my_story_list_date">2020-10-28 5:7</span></div></div></div></div><div class="my_movie_list_item shadow p-3 mb-5 bg-white rounded"><button type="button" class="btn btn-link my_tag"><a href="/tag/web2.0/">#web2.0</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/google/">#google</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/设计/">#设计</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/游戏/">#游戏</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/创意/">#创意</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/apple/">#apple</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/苹果/">#苹果</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/摄影/">#摄影</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/软件/">#软件</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/美国/">#美国</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/iphone/">#iphone</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/图片/">#图片</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/手机/">#手机</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/视频/">#视频</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/广告/">#广告</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/免费/">#免费</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/谷歌/">#谷歌</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/网站/">#网站</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/windows/">#windows</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/微软/">#微软</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/下载/">#下载</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/firefox/">#firefox</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/音乐/">#音乐</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/linux/">#linux</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/blog/">#blog</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/博客/">#博客</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/程序/">#程序</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/艺术/">#艺术</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/web/">#web</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/wordpress/">#wordpress</a></button></div></div></div><div id="my_footer"><div class=""><a href="/tags/">tags</a> <a href="/users/">users</a></div>&copy; 2020 diglog.com </div></div></body></html>