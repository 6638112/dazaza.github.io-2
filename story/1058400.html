<!doctype html><html lang="zh-hans"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>数字音频101：从微控制器播放音频 </title><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"><link rel="stylesheet" href="/img/css.css?random="><link data-rh="true" rel="icon" href="/img/favicon.ico"/><script data-ad-client="ca-pub-6067137220025946" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script type="text/javascript" src="https://platform-api.sharethis.com/js/sharethis.js#property=5effb96910009800120b8d4d&product=inline-share-buttons" async="async"></script>
<script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?03c1a0f31299b4a2fbb83c34d6beaac9";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script></head><body><div id="my_header"><div class="container"><nav class="navbar navbar-expand-lg"><a class="navbar-brand" href="/"><img alt="diglog" src="/img/logo.v1.gif" class="rounded-sm"></a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarNavAltMarkup"><div class="navbar-nav"></div></div></nav></div></div><div class="container"><div id="my_content"><h1 class="page_narrow">数字音频101：从微控制器播放音频 </h1><div class="row"><div class="col-lg-12 col-12"><div class="my_story_list_item shadow p-3 mb-5 bg-white rounded"><div class="story_page_pub_time page_narrow">2021-04-15 22:35:01</div><div class="story_img_container"><a href="http://img2.diglog.com/img/2021/4/838559b886bc213cfc5489fdbc48b90c.gif"><img src="http://img2.diglog.com/img/2021/4/838559b886bc213cfc5489fdbc48b90c.gif" class="img-fluid my_story_img" onerror="this.style.display='none'"></a></div><div class="page_narrow text-break page_content"><p>音频编程世界是一个广阔而美丽的。向您的Arduino项目添加音频可以使它们非常有趣。在本文中，我们将深入研究数字音频和amp的一些基本理论;尝试在微控制器上获得简单的音乐输出。</p><p> 理论＆amp;本文中描述的功能不是特定于任何微控制器或开发框架（尽管我使用带KENDRYTE-Standalone-SDK的K210开发板）＆amp;不需要任何音频特定库。</p><p>    那么音频/ und是什么？在最简单的术语中，声音的感觉是由压力波动引起的空气中的振动的结果。</p><p> 扬声器是一种可用于播放音频的简单设备。扬声器具有音圈，永磁体＆amp;锥。当我们通过电力通过音圈时，它充当电磁铁和amp;基于电磁铁的极性，永磁体擦除或吸引音圈。音圈连接到锥体上，因此音圈本身的任何移动使锥体向内拉动或向外推动。锥体的这种运动在其周围的空气中产生压力变化，导致它振动产生声音。这是一个过于简化的解释，但足以让我们去。</p><p>   就像我们刚刚讨论过的那样，音频是我们周围空气的压力变化的结果。这些压力变化可以是空气的压缩或稀疏。扬声器通过快速移动锥体来产生这些压缩和稀疏。锥体的幅度和方向通过改变提供给语音线圈的电压（和匝数电流）而变化。</p><p> 产生的空气的压力变化或传递到扬声器的音圈以产生声音的音频信号可以在基于坐标的图表中表示，如上面的图像中所示，并且称为音频波形。</p><p> 最简单的音频波形本质上是正弦波，表示由正弦函数给出的恒定幅度的周期性振荡的曲线。 </p><p>事实上，单个音符是通过简单的谐波运动产生的恒定频率的正弦管。作为一个例子，这里是“a”的波形：</p><p>  通过添加各个组件笔记的功能，创建了许多复杂的声音。</p><p> 现在让我们看看一些元素＆amp;图表的属性，了解它们如何影响波形产生的声音。</p><p>  正如您在上图所示，正弦音频波形具有以下属性：</p><p> 幅度 - 幅度是从参考线或原点测量波形中的点的高度。幅度的增加导致声音强度的增加。强度增加的声音被认为是更响亮的。</p><p> 频率 - 正弦曲线在自然中重复。循环在一秒钟重复的次数被称为波形的频率，并且在完成一个周期的时间是波形的时段。频率在赫兹（Hz）中测量。每秒一个周期是一个赫兹。频率增加的声音具有更高的间距，而较低频率的声音具有较低的间距。人类只能听到20Hz到20,000Hz（或20 kHz）的声音。</p><p> 波长波长是连续重复波形中的两个相同点之间的距离。波长与频率间接成比例。因此，更高的波长导致较低的音调声音。 </p><p>有更多的属性＆amp;可以在时域中表示的音频波形上进行测量。但为了简单起见，我们将在这里停止它。</p><p>  同时使用电子产品＆amp;数字信号，我们通常使用直流。直流无法切换极性。数字信号只能有两个状态（1  - 高电压）或OFF（0  - 低电压）。一些微控制器已建立在DAC（数字到模拟转换器）中，将数字信号转换为模拟输出。我们也可以依靠外部DAC来做相同但布线DAC可以在微控制器上占用多个GPIO。我们也有几个其他选择。可以使用像AD9833BRMZ这样的可编程任意波形发生器。</p><p>  这再次需要额外的布线和大量附加代码。要保持尽可能简单的东西，我们将使用称为脉冲宽度调制的技术。要了解脉冲宽度调制如何工作，请首先查看数字信号图。</p><p>  在上述图像中，幅度表示数字信号的电压，并且在X轴上表示时间。如上所述，电压的变化几乎是瞬间，并且数字信号只能具有两个状态。</p><p> 通过反复打开和关闭信号，我们可以控制随着时间的推移在线上输出的平均电压。这种信号保持在ON（高/ 1）状态的时间量称为其占空比。通过改变占空比，我们可以改变排出线的平均电压。</p><p> 因此，如果信号保持在（高/ 1）只有50％的时间，那么平均电压或占空比仅为原始电源电压的50％。</p><p> PWM在数字信号处理中有许多用例。出于我们的目的，我们将使用PWM改变为我们主动蜂鸣器或扬声器提供的平均电压。 </p><p>将扬声器或主动蜂鸣器连接到微控制器的电路是一个相当简单的电路。请注意，我正在使用0.5W扬声器，电压要求在1kHz处为1V，阻抗为8Ω。如果您的电压要求较高，则可以使用带有外部电源的晶体管来放大信号。两个图表如下。</p><p>   如前所述，笔记是简单谐波运动的正弦波。以下是第4个Octave上的注释的频率列表。</p><p>  为了在PWM中重新创建上述频率，让我们来看看一些示例代码。</p><p>  以上代码主要是通用的，除了USEEP和GPIOHS_SET_PIN函数调用。您可以使用微控制器SDK特定功能替换这些函数调用以睡眠或延迟微秒（USLEEP）＆amp; GPIO数字控制（GPIOHS_SET_PIN）。上述代码中的这些功能特定于K210（Kendryte-Standalone-SDK）。</p><p> 在上面的代码中，首先，我们将注意频率分配给双变量（Note_frice）。然后，我们计算该频率的每个周期的时段，将周期转换为微秒，并将其存储在另一个双变量（Note_period）中。计算周期的公式是时期（以sec）= 1 /频率（在Hz中）。</p><p> TONT_DURATION只不过是播放音符的持续时间。我们将每个循环的周期添加到总持续时间，并将其与所需持续时间值进行比较。</p><p> 在循环中，我们首先将微控制器上的输出引脚设置为高（1），然后我们等待计算时期的一半。然后将输出引脚设置为低（0），然后再次等待计算时段的一半。这样，我们正在以50％的占空比运营。 </p><p>您刚刚听到的音频是通过使用适当的暂停（由 - ）播放以下注释而生成的。  您可以使用和弦和其他复杂的音频结构进行实验。 使您的Arduino项目更有趣的音频输出！ :)欢呼。 </p></div><div id="story_share_this"><div class="sharethis-inline-share-buttons"></div></div><div class="text-break sotry_link page_narrow"><a target="_blank" href="https://blog.tarkalabs.com/digital-audio-101-playing-audio-from-a-microcontroller-5df1463616c">https://blog.tarkalabs.com/digital-audio-101-playing-audio-from-a-microcontroller-5df1463616c</a></div><div class="story_tags page_narrow"><button type="button" class="btn btn-light my_tag"><a href="/tag/播放/">#播放</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/audio/">#audio</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/音频/">#音频</a></button></div></div><div class="shadow p-3 mb-5 bg-white rounded clearfix"><div class="container"><div class="row"><div class="col-sm"><div><a target="_blank" href="/story/1056105.html"><img src="http://img2.diglog.com/img/2021/4/thumb_ec761b5f0916b440ddd67841dfd5b8a8.png" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1056105.html">音乐符号完成吗？ </a></div><span class="my_story_list_date">2021-4-4 21:3</span></div><div class="col-sm"><div><a target="_blank" href="/story/1055524.html"><img src="http://img2.diglog.com/img/2021/4/thumb_a1ace5f3ac058970197d6e78d75f1483.jpg" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1055524.html">谷歌将限制播放商店上的大多数应用程序，从查看运行Android 11和Newer 5月5日开始的设备上安装了哪些应用程序 </a></div><span class="my_story_list_date">2021-4-1 22:17</span></div><div class="col-sm"><div><a target="_blank" href="/story/1046236.html"><img src="http://img2.diglog.com/img/2021/1/thumb_f372e0bee21357d113a34e7dd71b6732.jpg" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1046236.html">Buckminster Fuller用细长线 </a></div><span class="my_story_list_date">2021-1-28 22:29</span></div><div class="col-sm"><div><a target="_blank" href="/story/1044992.html"><img src="http://img2.diglog.com/img/2021/1/thumb_27c10011e3c4367ab7605adbe0ba0d68.png" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1044992.html">随机播放-忙碌的开发人员的在线编辑器 </a></div><span class="my_story_list_date">2021-1-19 5:55</span></div></div></div></div><div class="my_movie_list_item shadow p-3 mb-5 bg-white rounded"><button type="button" class="btn btn-link my_tag"><a href="/tag/web2.0/">#web2.0</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/google/">#google</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/设计/">#设计</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/创意/">#创意</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/摄影/">#摄影</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/游戏/">#游戏</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/图片/">#图片</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/软件/">#软件</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/视频/">#视频</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/手机/">#手机</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/广告/">#广告</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/apple/">#apple</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/iphone/">#iphone</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/网站/">#网站</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/免费/">#免费</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/下载/">#下载</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/windows/">#windows</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/微软/">#微软</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/firefox/">#firefox</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/苹果/">#苹果</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/blog/">#blog</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/音乐/">#音乐</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/博客/">#博客</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/wordpress/">#wordpress</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/恶搞/">#恶搞</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/艺术/">#艺术</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/qq/">#qq</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/web/">#web</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/谷歌/">#谷歌</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/工具/">#工具</a></button></div></div></div><div id="my_footer"><div class=""><a href="/tags/">tags</a> <a href="/users/">users</a></div>&copy;2012-2021 diglog.com </div></div></body></html>