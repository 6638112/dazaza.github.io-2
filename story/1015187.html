<!doctype html><html lang="zh-hans"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>使用Cloudflare工作人员消除冷启动</title><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"><link rel="stylesheet" href="/img/css.css?random="><link data-rh="true" rel="icon" href="/img/favicon.ico"/><script data-ad-client="ca-pub-6067137220025946" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script type="text/javascript" src="https://platform-api.sharethis.com/js/sharethis.js#property=5effb96910009800120b8d4d&product=inline-share-buttons" async="async"></script>
<script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?03c1a0f31299b4a2fbb83c34d6beaac9";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script></head><body><div id="my_header"><div class="container"><nav class="navbar navbar-expand-lg"><a class="navbar-brand" href="/"><img alt="diglog" src="/img/logo.v1.gif" class="rounded-sm"></a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarNavAltMarkup"><div class="navbar-nav"></div></div></nav></div></div><div class="container"><div id="my_content"><h1 class="page_narrow">使用Cloudflare工作人员消除冷启动</h1><div class="row"><div class="col-lg-12 col-12"><div class="my_story_list_item shadow p-3 mb-5 bg-white rounded"><div class="story_page_pub_time page_narrow">2020-07-30 23:24:42</div><div class="story_img_container"><a href="http://img.diglog.com/img/2020/7/561ce32f9ed6799f6e87ac7f744ec666.png"><img src="http://img.diglog.com/img/2020/7/561ce32f9ed6799f6e87ac7f744ec666.png" class="img-fluid my_story_img" onerror="this.style.display='none'"></a></div><div class="page_narrow text-break page_content"><p>“冷启动”是第一次加载和执行无服务器函数的新副本所需的时间。这是一个既复杂又昂贵的问题。其他无服务器平台会让您选择是忍受执行时间的随机增加，还是通过合成请求来保持函数温暖。冷启动是一种可怕的体验，特别是当无服务器容器可能需要整整几秒钟才能预热的时候。</p><p>与容器不同，Cloudflare Workers使用隔离技术，该技术可在个位数毫秒内测量冷启动。嗯，至少他们是这么做的。今天，我们正在完全消除对冷启动的担忧，通过引入对完全没有冷启动的工人的支持-没错，零。忘了冷启动，热启动，或者...。任何开始，使用Cloudflare Workers，您都可以在全球200多个城市获得始终火爆的原始性能。</p><p>让每个人的函数一直在内存中保持温暖是不切实际的。相反，无服务器提供程序仅在收到第一个请求后才预热函数。然后，在一段时间的不活动之后，功能再次变冷，循环继续。</p><p>对于工人来说，这从来不是什么大问题。与可能花费整整几秒钟为每个功能启动新的集装箱化进程的容器不同，Workers背后的隔离技术允许它在不到5毫秒的时间内预热一个功能。</p><p>冷启动很难看。它们是意想不到的、不可避免的，并且会导致不可预测的代码执行时间。您不应该为了享受无服务器的好处而损害客户的体验。在我们的员工团队和网络团队的共同努力下，我们着手创建一个解决方案，让您再也不用担心冷启动、热启动或预热。</p><p>与Cloudflare的许多功能一样，安全和加密使我们的网络更加智能。由于95%的工作人员请求都是通过HTTPS安全处理的，因此我们设计了一个使用互联网加密协议的解决方案，这对我们很有利。</p><p>在客户端可以发送HTTPS请求之前，它需要与服务器建立安全通道。此过程在TLS或传输层安全协议中称为“握手”。大多数客户端还在该握手中发送主机名(例如cloudflare.com)，这称为SNI或服务器名称指示。服务器接收握手，发回证书，现在允许客户端发送加密的原始请求。</p><p>以前，Worker只有在整个握手过程完成后才会加载和编译，这涉及客户端和服务器之间的两次往返。但是等等，我们想，如果握手中有主机名，为什么要等到整个过程完成后才预加载工作进程呢？由于握手需要一些时间，因此在请求到达之前的等待时间内有机会预热资源。</p><p>在我们的最新优化中，当Cloudflare在TLS协商期间收到第一个数据包“ClientHello”时，我们会提示Worker运行时急于加载该主机名的Worker。握手完成后，工作人员就暖和起来，可以接收请求了。由于加载工作进程只需要5毫秒，而客户端和Cloudflare之间的平均延迟超过5毫秒，因此冷启动为零。一旦从客户端接收到请求，工作器就开始执行代码。</p><p>现在，为了每个人！我们已经向所有工人客户推出了这一优化，并于今天投入生产。不需要额外费用，也不需要更改配置。当您在Cloudflare Workers上构建时，您就构建在一个智能的分布式网络之上，该网络不断突破性能方面的极限。</p><p>目前，这仅适用于部署到“example.com”等“根”主机名的Worker，而不适用于“example.com/path/to/thing”等特定路径。我们计划在未来引入更多可以预加载特定路径的优化。</p><p>我们也认识到，业绩不仅仅是零个冷开始。这就是为什么我们在本周早些时候宣布了“工人解放”测试版的原因。Worker Unbound拥有Worker的简单性和性能，没有限制，只有原始性能。</p><p>配备零冷启动、无CPU限制且网络覆盖200多个城市的员工处于最佳状态，随时可以承担任何严重的工作负载。这就是表演。</p><p>无服务器周无服务器Cloudflare工作人员JavaScript产品新闻</p></div><div id="story_share_this"><div class="sharethis-inline-share-buttons"></div></div><div class="text-break sotry_link page_narrow"><a target="_blank" href="https://blog.cloudflare.com/eliminating-cold-starts-with-cloudflare-workers/">https://blog.cloudflare.com/eliminating-cold-starts-with-cloudflare-workers/</a></div><div class="story_tags page_narrow"><button type="button" class="btn btn-light my_tag"><a href="/tag/cold/">#cold</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/服务器/">#服务器</a></button></div></div><div class="my_movie_list_item shadow p-3 mb-5 bg-white rounded"><button type="button" class="btn btn-link my_tag"><a href="/tag/web2.0/">#web2.0</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/google/">#google</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/设计/">#设计</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/创意/">#创意</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/摄影/">#摄影</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/游戏/">#游戏</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/图片/">#图片</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/软件/">#软件</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/视频/">#视频</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/手机/">#手机</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/广告/">#广告</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/apple/">#apple</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/iphone/">#iphone</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/网站/">#网站</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/免费/">#免费</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/下载/">#下载</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/windows/">#windows</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/微软/">#微软</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/firefox/">#firefox</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/苹果/">#苹果</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/blog/">#blog</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/音乐/">#音乐</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/博客/">#博客</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/wordpress/">#wordpress</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/恶搞/">#恶搞</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/艺术/">#艺术</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/qq/">#qq</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/web/">#web</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/谷歌/">#谷歌</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/工具/">#工具</a></button></div></div></div><div id="my_footer"><div class=""><a href="/tags/">tags</a> <a href="/users/">users</a></div>&copy;2012-2021 diglog.com </div></div></body></html>