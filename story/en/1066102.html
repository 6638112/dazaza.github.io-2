<!doctype html><html lang="zh-hans"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Celo议定书中的股份达成共识和证据 Consensus and Proof of Stake in the Celo Protocol</title><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"><link rel="stylesheet" href="/img/css.css?random="><link data-rh="true" rel="icon" href="/img/favicon.ico"/><script data-ad-client="ca-pub-6067137220025946" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script type="text/javascript" src="https://platform-api.sharethis.com/js/sharethis.js#property=5effb96910009800120b8d4d&product=inline-share-buttons" async="async"></script>
<script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?03c1a0f31299b4a2fbb83c34d6beaac9";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script></head><body><div id="my_header"><div class="container"><nav class="navbar navbar-expand-lg"><a class="navbar-brand" href="/"><img alt="diglog" src="/img/logo.v1.gif" class="rounded-sm"></a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarNavAltMarkup"><div class="navbar-nav"></div></div></nav></div></div><div class="container"><div id="my_content"><h1 class="page_narrow">Consensus and Proof of Stake in the Celo Protocol<br/>Celo议定书中的股份达成共识和证据 </h1><div class="row"><div class="col-lg-12 col-12"><div class="my_story_list_item shadow p-3 mb-5 bg-white rounded"><div class="story_page_pub_time page_narrow">2021-06-16 10:53:42</div><div class="story_img_container"><a href="http://img2.diglog.com/img/2021/6/7cde2418e0e5a873564ef802640713a7.jpeg"><img src="http://img2.diglog.com/img/2021/6/7cde2418e0e5a873564ef802640713a7.jpeg" class="img-fluid my_story_img" onerror="this.style.display='none'"></a></div><div class="page_narrow text-break page_content"><p>How Celo has reimagined Ethereum with Byzantine Fault Tolerance, Proof of Stake and incentives to serve mobile devices</p><p>Celo如何用拜占庭的容错，股权证明和奖励来恢复以太坊，以服务移动设备</p><p>  Celo’s aim is to empower anyone with a smartphone anywhere in the world to have access to financial services, send money to phone numbers, and pay merchants — all on a decentralized platform that is developed and operated by the community. The surface area of the project is vast and to deliver better products sooner we chose to build on some of the crypto community’s best work.</p><p>  Cylo的目标是让世界任何地方的任何人都能获得金融服务，汇款到电话号码，并支付商人的智能手机，并在社区开发和运营的分散平台上汇款。该项目的表面积越来越迅速，更快地提供更好的产品，我们选择建立在一些加密社区的最佳工作中。</p><p> Celo’s blockchain reference implementation is based on  go-ethereum, the Go implementation of the Ethereum protocol. We’re indebted to the Geth community for providing these shoulders to stand on and, while recognizing that Ethereum is an independent project with its own trajectory, we hope to contribute back where we can.</p><p> Cylo的区块链参考实施是基于Go-Ethereum，Go Inversion的Ethereum协议。我们感谢GETH社区，为这些肩膀提供抵销，同时认识到以外的是一个独立的项目，我们希望能够贡献我们所能的贡献。</p><p> The Celo protocol incorporates a number of substantial changes in service of its end users. In this post, we focus on the consensus protocol, the core mechanism that applies new transactions and advances the agreed state of the network, and on Celo’s implementation of Proof of Stake — how it determines which nodes get to participate in consensus.</p><p> Celo协议包含其最终用户服务的许多实质性变化。在这篇文章中，我们专注于共识议定书，采用新交易的核心机制，并提高网络商定的国家，以及获取国际知宪事务的股权证明 - 它如何确定哪些节点参与共识。</p><p>  Like a number of recent crypto projects, Celo is adopting a  Byzantine Fault Tolerant (BFT) consensus algorithm. A well-defined set of  validator nodes broadcast signed messages between themselves in a sequence of steps to reach agreement even when up to a third of the total nodes are offline, faulty or malicious. When a quorum of validators have reached agreement, that decision is final.</p><p>  与最近的最近加密项目一样，Cylo正在采用拜占庭式容错（BFT）共识算法。一系列定义的一组验证器节点在一系列步骤中广播签名消息即使在总节点中的最高三分之一是脱机，有故障或恶意的时间也是如此。当验证者的批准达成协议时，该决定是最终的。</p><p> Most BFT implementations are based on Miguel Castro and Barbara Liskov’s work on  Practical Byzantine Fault Tolerance. Understanding and implementing consensus algorithms is notoriously tough: this is  a good explainer on PBFT. Celo’s is based on an implementation called Istanbul, or IBFT. This is not to be confused with the upcoming Ethereum hard fork also codenamed Istanbul. IBFT was developed by AMIS and  proposed as an extension to Geth but never merged. Variants of IBFT exist in both the  Quorum and  Pantheon clients. We’ve been modifying Istanbul to bring it up to date with the latest Geth releases, fix correctness and liveness issues, and improve its scalability and security. We’ll dive into the details in a subsequent post.</p><p> 大多数BFT实现基于Miguel Castro和Barbara Liskov在实际拜占庭容错上的工作。理解和实施共识算法是臭名昭着的：这是PBFT的良好解释者。 Celo的基于一个名为伊斯坦布尔或IBFT的实施。这并不是与即将到来的Ethereum Hard Fork混淆，也是代号为伊斯坦布尔。 IBFT是由AMI开发的，并提出作为GETH的延伸，但从未合并过。仲裁和万神殿客户都存在IBFT的变体。我们一直在修改伊斯坦布尔，以最新的GETH发布，修复正确性和活力问题，并提高其可扩展性和安全性。我们将潜入后续帖子中的细节。</p><p>  Since the Celo protocol is leveraging Ethereum as the basis for its blockchain, it’s worth explaining why we took the time to move away from the Proof of Work scheme already deployed with Ethereum. (It’s also worth noting that Ethereum 2.0 will eventually  make a similar move!)</p><p>  由于Celo议定书是利用Ethereum作为其区块链的基础，值得解释为什么我们花时间远离已经部署的工作方案证明。 （也值得注意的是，Ethereum 2.0最终会产生类似的举动！） </p><p> In a Proof of Work scheme, nodes compete to solve a computational puzzle that consumes the vast majority of those nodes’ compute power — and entails high electricity usage, too. The chain of blocks accepted as the current state of the network is (more or less) the one that is longest and would cost the most energy to rewrite.</p><p>在工作方案证明中，节点竞争解决计算难题，这些拼图消耗绝大多数节点的计算能力 - 并且也需要高电器使用。接受作为网络当前状态的块链（或多或少）最长并且将花费最多的能量来重写。</p><p> Here, safety comes in numbers. Network security relies on no one organization acquiring a majority of the total “hashing power” and so being able to conduct a  51% attack. This means that users of a Proof of Work network are in effect paying for miners whose presence rarely results in transactions being processed but instead prevents the takeover of the network. The higher the security, the higher the cost and  environmental impact.</p><p> 在这里，安全有数字。网络安全依赖于没有一个组织获取大部分总“散列权”，因此能够进行51％的攻击。这意味着工作网络证明的用户实际上是支付，其存在很少会导致正在处理的事务所处理的矿工，而是防止接管网络。安全性越高，成本和环境影响越高。</p><p> In BFT consensus, validators only do the useful work of building blocks by running transactions and verifying the blocks proposed by each other. This allows the network to deliver higher transaction throughput. The network is secured by having two-thirds of the validators faithfully execute the BFT algorithm: when a quorum is achieved, that block is final.</p><p> 在BFT共识中，Validators仅通过运行事务并验证彼此提出的块来进行构建块的有用工作。这允许网络提供更高的事务吞吐量。通过忠实执行BFT算法的三分之二来保护网络通过忠实地执行BFT算法：当实现仲裁时，该块是最终的。</p><p> The greater capacity of Proof of Stake networks and the need to fund a far smaller pool of hardware means that its operating cost, overall and on a per-transaction basis, is far lower. Importantly, the network can use a fraction of the energy of Proof of Work.</p><p> 股权网络证明的能力越大，需要为更小的硬件资助提供资金的需要意味着其运营成本总体和每次交易的基础远远低。重要的是，网络可以使用工作证明的一小部分。</p><p> Another benefit for new networks is being more secure, sooner. Attackers can and do  rent compute resources to target Proof of Work networks and so only those networks that are most established can effectively  resist 51% attacks. It is a difficult and lengthy process for a new network to get to that point.</p><p> 新网络的另一个好处更加安全。攻击者可以并确实租用计算资源以瞄准工作网络的证明，因此只有最多的网络只能有效地抵抗51％的攻击。新网络达到这一点是一个困难和冗长的过程。</p><p> Proof of Stake also offers immediate finality: almost all transactions complete and are irreversible within seconds, giving a better user experience. Proof of Work schemes have probabilistic finality: since many nodes are competing to mine blocks at the same time, a transaction can be reverted if the block in which it is included then does not end up as part of the longest chain and a conflicting transaction is applied instead: the chance this happens decays with time.</p><p> 股份证明还提供即时最终：几乎所有交易在几秒钟内完成并且在几秒钟内不可逆转，提供更好的用户体验。工作方案证明具有概率的终结：由于许多节点同时竞争挖掘块块，如果其中包含它的块，则可以恢复交易，然后作为最长链的一部分和冲突的事务适用于：随着时间的推移发生这种情况。</p><p>   While the benefits of adopting BFT consensus seem extremely compelling, on its own it does not replace a Proof of Work scheme. BFT protocols rely on an external mechanism to determine the validators that participate in agreement. The algorithms also cannot scale beyond the order of hundreds of validators, and can resist malicious or faulty behavior by at most one third of validators. For these reasons, in an open system where there are many more participants than possible validators, some policy choice must be made to determine how to allocate these privileged roles. Further, admitting each validator has an associated risk: each new validator must be subject to a combination of strong economic incentives and/or trust to ensure the security of the network.</p><p>   虽然采用BFT共识的好处似乎非常引人注目，但它不取代工作计划的证据。 BFT协议依赖于外部机制来确定参与协议的验证器。该算法也不能超过数百个验证器的顺序，并且可以在最多三分之一的验证器中抵制恶意或故障行为。出于这些原因，在有更多参与者的开放系统中，必须进行一些策略选择以确定如何分配这些特权角色。此外，承认每个验证者都有一个相关的风险：每个新验证者必须遵守强大的经济激励措施和/或信任的组合，以确保网络的安全性。 </p><p> ‘Proof of Stake’ schemes are an attempt to align the incentives of validators with those of the network. They overlay consensus algorithms (usually BFT) with mechanisms to hold potential validators’ funds in escrow as a ‘stake’, accept some of those as validators and reward them, while also incentivizing other nodes to detect and prove misbehavior, for which validators will be ‘slashed’ portions of those stakes. Balancing these aspects is challenging to do. Cosmos and Tezos are examples of successful public networks using Proof of Stake.</p><p>“股份证明”计划是试图将验证器的激励与网络的激励对齐。他们将共识算法（通常是BFT）与机制覆盖，以将潜在的验证者资金持有托管中的托管作为“股份”，接受其中一些作为验证者并奖励它们，同时也会激励其他节点来检测和证明错误的验证者'削减'那些赌注的部分。平衡这些方面是挑战的。 Cosmos和Tezos是使用股权证明的成功公共网络的例子。</p><p> This contrasts with the ‘permissionless’ nature of Proof of Work schemes which permit any node to attempt to mine a block without any coordination, and rewards them for successfully doing so. Such schemes require a miner to incur an energy cost up-front, meaning that at the point of mining a block, they have a strong incentive to correctly submit the block to the network. Furthermore the number of miners can change over time and has little impact on the protocol. The underlying currency is redistributed to new miners through block rewards as they participate.</p><p> 这与工作方案证明的“许可”性质形成鲜明对比，这允许任何节点尝试挖掘一个没有任何协调的块，并奖励他们成功这样做。这些方案要求矿工造成能量成本上限，这意味着在挖掘块时，它们具有强大的激励，可以正确地将块提交到网络。此外，矿工人数可以随时间变化，对协议影响很小。根据他们参与，基础货币通过块奖励重新分配给新矿工。</p><p> This leads to the primary criticism of Proof of Stake schemes: that stakes present a barrier to entry to most participants, and this means that they concentrate power and rewards into too few hands, and that they lack a ‘permissionless on-ramp’ in the protocol, depriving new participants of an opportunity to earn currency and get to the point where they could participate as a validator.</p><p> 这导致了对股权证据的主要批判：赌注向大多数参与者进入的障碍，这意味着他们将力量和奖励集中在太少的手中，并且他们缺乏“许可的斜坡上斜坡”议定书，剥夺了新的参与者获得货币的机会，并达到他们作为验证者参加的程度。</p><p>   Of course, applying transactions and validating state updates are only a small part of what a digital payments platform must do. Celo’s focus on providing the best user experience for mobile payments means that the Celo design assumptions differ from other networks, sometimes significantly.</p><p>   当然，应用交易和验证状态更新只是数字付款平台必须执行的一小部分。 Cylo专注于为移动支付提供最佳用户体验意味着Cylo设计假设与其他网络不同，有时显着。</p><p> We anticipate the majority of Celo’s end users will manage their accounts and send payments using a Wallet app on their cell phone. The open source Celo app embeds a “light client” that connects to the network and is optimized for low-power devices and low-bandwidth connections. These light clients need nodes that will answer their requests for account and transaction data and forward new transactions on their behalf. It’s likely that the vast majority of machines in the Celo network will need to fulfil this role.</p><p> 我们预计大多数Cylo的最终用户将管理他们的帐户并在手机上使用钱包应用程序发送付款。开源Celo应用程序将连接到网络的“光客户端”嵌入，并针对低功耗设备和低带宽连接进行了优化。这些轻客户端需要节点，这些节点将为他们的帐户和交易数据的请求和代表他们的新交易。 Celo网络中绝大多数机器可能需要满足这一角色。</p><p>  In Ethereum right now, there are few incentives to run a full node that is not mining.  Few nodes serve light clients, and this results in a poor experience for mobile wallets.</p><p>  在Ethereum，现在很少有激励来运行未挖掘的完整节点。很少有节点为轻型客户提供服务，这导致移动钱包的经验不佳。</p><p> So Celo designed a protocol to incentivize users to operate regular nodes. With Celo, light clients pay a per-transaction fee to full nodes. Clients include in every transaction the address of a node which, when the transaction is processed, receives this fee. Full nodes advertise a minimum fee, and may choose to refuse to process transactions for which it will not receive the fee or it deems the fee insufficient.</p><p> 因此，Celo设计了一种协议，激励用户运行常规节点。与Cylo，Light客户端向全节点支付每笔交易费用。客户端包括在每个事务中都包括节点的地址，当处理事务时，该地址会收取此费用。全节点宣传最低费用，并可选择拒绝处理其不会收取费用的交易，或者它认为不足的费用。 </p><p> While a full node provides other services for which they receive no specific fee, we expect that failing to service these requests will cause clients to seek other full nodes that do, who will then receive fees when they next make a transaction. The model is analogous to a cafe: while you may freeload on their rent, heat, wifi, etc, you’ll likely be required to buy a coffee periodically. Refuse and you might not be so welcome next time.</p><p>虽然一个完整的节点提供了他们没有收到特定费用的其他服务，但我们预计未能维修这些请求将导致客户寻求其他完整节点，然后谁将在下次进行交易时收到费用。该模型类似于咖啡馆：虽然您可以在租金上进行租金，热量，WiFi等，但您可能需要定期购买咖啡。拒绝，下次可能不那么欢迎。</p><p> We anticipate a market emerging where light clients will (automatically in most cases) choose full node peers based on cost, latency, reliability and other factors. An abundance of full nodes geolocated close to their communities will improve app performance and reliability. Since light clients need not trust full nodes, as they can verify their work, it also provides the ‘permissionless on-ramp’ lacking in other Proof of Stake networks.</p><p> 我们预计市场出现的市场，其中轻的客户（在大多数情况下自动）根据成本，延迟，可靠性和其他因素选择完整节点对等体。良好的全节点邻近他们的社区接近他们的社区将提高应用程序性能和可靠性。由于轻客户端不需要信任全节点，因为它们可以验证其工作，它还提供了“许可的On-Ramp”缺乏股权网络的其他证明。</p><p>  As an aside, it also turns out that using BFT consensus allows Celo clients to synchronize dramatically faster than Ethereum, which is very important for devices on poor connections. You can read more about Celo’s  ultralight sync mode here, and we’ll dig in to this in a future post.</p><p>  除了旁边，它还证明，使用BFT共识允许Celo客户端比以外人更快地同步，这对于差的连接上的设备非常重要。您可以在此处阅读有关Celo的UltLight Sync模式的更多信息，我们将在未来的帖子中挖掘它。</p><p>  Celo builds on the Ethereum protocol with the aim of creating a platform that empowers anyone with a smartphone anywhere in the world to have access to financial services. It replaces Ethereum’s use of Proof of Work for securely adding transactions to the ledger with a Byzantine Fault Tolerant consensus algorithm. And it creates a new permissionless on-ramp by creating incentives for full nodes to serve mobile devices.</p><p>  Cylo在Ethereum协议上建立了一个旨在创建一个赋予世界任何地方的任何人的平台，以便获得金融服务的智能手机。它替换了以Ethereum使用工作证明，并通过拜占庭容错共识算法安全地将交易安全添加到分类帐。并且它通过为全节点创建用于服务移动设备的激励来创建新的权限的ON-RAMP。</p><p> In my next post, we dive into the   details of Celo’s Proof of Stake design .</p><p> 在我的下一篇文章中，我们深入了解有关人掌的股份设计证明的细节。</p><p>  If you’re interested in finding out more about operating a node on the Celo network, either a validator or full node, or can see yourself running a validator group, you should absolutely join  The Great Celo Stake Off.</p><p>  如果您有兴趣在Cylo网络上查找有关在Celo网络上操作节点的更多信息，验证器或完整节点，或者可以看到自己运行验证器组，您应该绝对加入大家群。</p><p> We’d also love to hear your thoughts on what we’re building. The design space around mechanisms for validator incentives has many complicated trade-offs and we look forward to working with the community to iterate on this.</p><p> 我们也很乐意听到您对我们建造的内容的看法。验证器激励机制的设计空间有许多复杂的权衡，我们期待与社区合作迭代这一点。 </p><p> You can read more about the Celo Protocol in the  Celo Developer Documentation, and try out Celo on the  Alfajores Testnet. You can ask questions and find answers on the  Celo Forum, or chat with Celo developers on  Discord.</p><p>您可以在Cylo开发人员文档中阅读有关Cylo协议的更多信息，并在AlfaJores TestNet上尝试获取Cylo。 您可以在Cylo论坛上询问问题并找到答案，或与Collo开发商聊天。 </p></div><div id="story_share_this"><div class="sharethis-inline-share-buttons"></div></div><div class="text-break sotry_link page_narrow"><a target="_blank" href="https://medium.com/celoorg/consensus-and-proof-of-stake-in-the-celo-protocol-3ff8eee331f6">https://medium.com/celoorg/consensus-and-proof-of-stake-in-the-celo-protocol-3ff8eee331f6</a></div><div class="story_tags page_narrow"><button type="button" class="btn btn-light my_tag"><a href="/tag/达成/">#达成</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/proof/">#proof</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/节点/">#节点</a></button></div></div><div class="my_movie_list_item shadow p-3 mb-5 bg-white rounded"><button type="button" class="btn btn-link my_tag"><a href="/tag/web2.0/">#web2.0</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/google/">#google</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/设计/">#设计</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/创意/">#创意</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/摄影/">#摄影</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/游戏/">#游戏</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/图片/">#图片</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/软件/">#软件</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/视频/">#视频</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/手机/">#手机</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/广告/">#广告</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/iphone/">#iphone</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/免费/">#免费</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/网站/">#网站</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/下载/">#下载</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/windows/">#windows</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/微软/">#微软</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/apple/">#apple</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/blog/">#blog</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/firefox/">#firefox</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/苹果/">#苹果</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/音乐/">#音乐</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/博客/">#博客</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/wordpress/">#wordpress</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/恶搞/">#恶搞</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/艺术/">#艺术</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/qq/">#qq</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/web/">#web</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/工具/">#工具</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/分享/">#分享</a></button></div></div></div><div id="my_footer"><div class=""><a href="/tags/">tags</a> <a href="/users/">users</a></div>&copy;2012-2021 diglog.com </div></div></body></html>