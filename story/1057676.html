<!doctype html><html lang="zh-hans"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>一流的I / O. </title><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"><link rel="stylesheet" href="/img/css.css?random="><link data-rh="true" rel="icon" href="/img/favicon.ico"/><script data-ad-client="ca-pub-6067137220025946" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script type="text/javascript" src="https://platform-api.sharethis.com/js/sharethis.js#property=5effb96910009800120b8d4d&product=inline-share-buttons" async="async"></script>
<script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?03c1a0f31299b4a2fbb83c34d6beaac9";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script></head><body><div id="my_header"><div class="container"><nav class="navbar navbar-expand-lg"><a class="navbar-brand" href="/"><img alt="diglog" src="/img/logo.v1.gif" class="rounded-sm"></a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarNavAltMarkup"><div class="navbar-nav"></div></div></nav></div></div><div class="container"><div id="my_content"><h1 class="page_narrow">一流的I / O. </h1><div class="row"><div class="col-lg-12 col-12"><div class="my_story_list_item shadow p-3 mb-5 bg-white rounded"><div class="story_page_pub_time page_narrow">2021-04-12 01:22:34</div><div class="page_narrow text-break page_content"><p>纯粹的功能编程是一个巧妙的技巧，可以展示你可以编码突变，但rust是一个甚至是聪明的技巧，可以显示你可以努力突变。</p><p> 特定方面的I＆＃39; D喜欢探索这里是：我们可以将TheObServation应用于I / O吗？</p><p> Haskell还有一个巧妙的技巧，可以在没有突变的情况下做一流的I / O.那么，我们可以在刚刚使用突变的生锈中拥有一流的I / O吗？</p><p>  与Haskell一样，Rust中的一流I / O将意味着I / O WANDO的功能通过可以通过围绕程序传递的值作为参数ORRETURN值：</p><p>  此处的文件是表示resourcethat支持I / O的一类值的示例。但与Haskell不同，而不是使用Monads，这里的文件是Justhas侧面实现的操作，如读写。</p><p> 当然，Rust已经有很多类型的类型，包括在文章库中，具有类型的类型和TCPStream。并且很多RustCode已经遵循这种模式。严格地说，许多运作＆＃39; t＆＃39; t＆amp; mut参考文献，但这些类型概念上使用内部变形性，哪个是I / O独一无二的。</p><p> Haskell的剩余部分具有DRIRD NORN NOT＃39; T在HASKELL中，所有I / O都是通过通过程序传递的值来完成的。随着I / O在其签名中所说的。在Rust中，当一个函数在其签名中的文件参数时，您知道它＆＃39; s使用该文件进行I / O，但是一个＆＃39; t有文件或任何其他I / O类型的函数可能会访问文件。 </p><p>当然，Haskell的Monad也有许多其他用途。此博客帖子刚刚在功能签名中的I / O操作中，这对Howtwo否则造成的offorwode代码交互，以及一体的代码可以重定向另一码。</p><p>  使用全局I / O的代码生锈示例是std :: io :: stdout。 AnyCode可以调用它并获取可以在周围功能中提到它的I / O可以执行I / O的STDOUT值＆＃39; s签名。 STDOUT使用Abuiltin互斥锁，即使许多用例不需要那个，也是一个共同绩效的陷阱。勤奋的用户当然可以使用STDOUTLOCK在某些情况下擦除性能影响，但如果我们完全消除Builtin互斥锁怎么办？</p><p> 如果STDOUT是一个程序将获得一次的价值，那么随后将传递给想要打印的所有功能？使用Rust＆＃39;常用的拥有借款规则，它不需要一个互斥锁，因为许多用例。当然，用户必须在互斥锁或类似的情况下将其显式包装在互斥锁中，而是真正想要分享访问它，就像Rust中的任何其他东西一样。</p><p> IO-Streams Crate有一个实施。 StreamWriter :: STDOUT函数返回一个输出流，该流是不加工的输出流＆＃39;标准输出。它实现了标准的写traitso它＆＃39;它易于使用，它概念上拥有它的资源，所以它不会＆＃39; tneed a buildin互斥锁。</p><p> 在幕后，此功能实际上会获取STDOUTLOMEL以防止STD :: IO :: STDOUT使用与StreamWriter :: STDoutusage的混合混合，以维护其独家所有权假设。</p><p>  作为另一个例子，任何代码都可以执行文件::打开（...）并将其传递一个字符串，以打开进程中的任何文件＆＃39;文件系统命名空间，而不声明ITIN函数签名。</p><p> 这意味着如果您想在outdingdirectory中运行它的代码，那么唯一的方法是创建一个新进程，其中包含一个newfileSystem命名空间。这是一种非常重的操作，无论是款项，也是在可携带性和复杂性方面的重要性。 </p><p>一些码名有一个＆＃34; root＆＃34;通过Inthat的路径是相对于的，这有助于，但并不强制这种外径是相对于根的，或者那条路径不在猪外面的领先......</p><p> CAP-STD Crate具有DIR类型，它表示一个目录，它可以使文件系统访问函数的一流部分＆＃39; s签名，并允许呼叫者为I / O指定不同的目录。而且，它还执行沙箱，确保相对于DIR内的DIRSTAY的路径。</p><p> 文件系统有效地叠放别名变形状态，并且具有相对令人讨厌的同步原语。虽然CAP-STD并不是解决了可能出现的所有问题，它可以是帮助标准生锈成语的管理状态的一个工具。</p><p>    （除了旁边，这种功能可能会恐慌溢出;在如下，我假设＆＃34;纯和＃34;允许恐慌。）</p><p> 启用这种功能已经提出了几次，但是他们没有达到这种语言，部分原因是因为对这些特征的需求往往比其他语言更生锈。从优化器的角度来看，通常可以推断出这个伪装，至少在简单的情况下。</p><p> 从程序员的角度来看，程序员不需要＆＃34;纯＆＃34;要知道无数是否突变，因为在Rust中，这些东西已经被可靠地在签名中。 ＆amp的存在或缺失;具有内部变形性的Mut Ortypes讲述了您需要了解的一切可能会发生突变。因此，大多数＆＃34;纯＆＃34;意味着冗余的信息已经存在：</p><p> ///您是否可以猜测该功能突变？ fn递增（x：＆amp; mut i32）{//你＆＃39;右转！ * x + = 1; } </p><p>签名涵盖的东西是全球变形状态ANDI / O.全球变形状态在Rust中往往比其他语言不那么重要，因为Rust非常强烈地阻止全球变形状态。</p><p> 然而，Rustn＆＃39; T直立禁止全球变形状态，并不是＆＃39; TREALLY劝阻全球I / O，即使在标准库中也存在。</p><p> 所以而不是A＆＃34;纯和＃34;，禁止所有突变，更有趣的提议将是我＆＃39; ll呼叫＆＃34;显式＆＃34;这意味着＆＃34;没有全球性状态或I / O＆＃34;当在没有＆amp的函数上使用时使用签名中的Mut或Interior-Mutable类型，＆＃34;显式＆＃34;会和＃34;纯＆＃34;，可以宣布为＆＃34;纯＆＃34;优化器。然而，＆＃34;显式＆＃34;可以在有变形论点的函数中使用，在那里它会表明那些是唯一突变的东西。</p><p> ///所有突变和I / O都被占了！ fn this_is_explic（f：＆amp;文件，x：＆amp; mut i32） - ＆gt; IO ::结果＆lt;（）＆gt; {writeln！ （f，＆＃34;你好世界＆＃34;）？ ; * x + = 1;好的 （（））}</p><p> ＆＃34;显式＆＃34;财产还可以从能力为导向的安全视角表明缺乏环境权威。</p><p> 添加一个＆＃34;显式＆＃34是有意义的。关键字生锈然后？可能是不是这样的;它可能是rust中的大多数函数都会有资格＆＃34;显式＆＃34;所以将它添加为函数属性会增加很多杂乱。更有符合人体工程学的方法可能是为了提供一种方式声明AllTheir功能是显式的，具有选择单个函数的方法。</p><p> 未来探索的可能方向是使用RustC驱动程序API创建一个可以为此识别语法形式的自定义静态分析工具，然后检查＆＃34;显式＆＃34;函数Don＆＃39; Tachidentally呼叫＆＃34;非显式＆＃34;没有明确覆盖的功能，很多不安全。 </p><p>一流的I / O指向一种思考软件的方式＆＃34;机器＆＃34;它＆＃39;＆＃34;过程＆＃34; 它＆＃39;在aren＆＃39; t的焦点。 代替HOC惯例，用于协调对共享文件系统名称空间的访问或其他过程相关资源，使用First-Class I / O的代码可以通过ValutaRound来管理其I / O资源，类似于它已经使用其他示例资源的I / O资源。  一流的I / O可以是一个有用的概念来普遍应用，例如能力的安全性如何有助于启用共享无线链接。 它可以逐步应用，例如IO-Streams Crateor如何帮助CAP-STD箱子可以帮助各个程序的部分与每个托管齐地地合作。 </p></div><div id="story_share_this"><div class="sharethis-inline-share-buttons"></div></div><div class="text-break sotry_link page_narrow"><a target="_blank" href="https://blog.sunfishcode.online/first-class-io/">https://blog.sunfishcode.online/first-class-io/</a></div><div class="story_tags page_narrow"><button type="button" class="btn btn-light my_tag"><a href="/tag/一流/">#一流</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/class/">#class</a></button></div></div><div class="my_movie_list_item shadow p-3 mb-5 bg-white rounded"><button type="button" class="btn btn-link my_tag"><a href="/tag/web2.0/">#web2.0</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/google/">#google</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/设计/">#设计</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/创意/">#创意</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/摄影/">#摄影</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/游戏/">#游戏</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/图片/">#图片</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/软件/">#软件</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/视频/">#视频</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/手机/">#手机</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/广告/">#广告</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/apple/">#apple</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/iphone/">#iphone</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/网站/">#网站</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/免费/">#免费</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/下载/">#下载</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/windows/">#windows</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/微软/">#微软</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/firefox/">#firefox</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/苹果/">#苹果</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/blog/">#blog</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/音乐/">#音乐</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/博客/">#博客</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/wordpress/">#wordpress</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/恶搞/">#恶搞</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/艺术/">#艺术</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/qq/">#qq</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/web/">#web</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/谷歌/">#谷歌</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/工具/">#工具</a></button></div></div></div><div id="my_footer"><div class=""><a href="/tags/">tags</a> <a href="/users/">users</a></div>&copy;2012-2021 diglog.com </div></div></body></html>