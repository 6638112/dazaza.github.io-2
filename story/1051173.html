<!doctype html><html lang="zh-hans"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>访问纯JavaScript中的设备方向 </title><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"><link rel="stylesheet" href="/img/css.css?random="><link data-rh="true" rel="icon" href="/img/favicon.ico"/><script data-ad-client="ca-pub-6067137220025946" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script type="text/javascript" src="https://platform-api.sharethis.com/js/sharethis.js#property=5effb96910009800120b8d4d&product=inline-share-buttons" async="async"></script>
<script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?03c1a0f31299b4a2fbb83c34d6beaac9";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script></head><body><div id="my_header"><div class="container"><nav class="navbar navbar-expand-lg"><a class="navbar-brand" href="/"><img alt="diglog" src="/img/logo.v1.gif" class="rounded-sm"></a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarNavAltMarkup"><div class="navbar-nav"></div></div></nav></div></div><div class="container"><div id="my_content"><h1 class="page_narrow">访问纯JavaScript中的设备方向 </h1><div class="row"><div class="col-lg-12 col-12"><div class="my_story_list_item shadow p-3 mb-5 bg-white rounded"><div class="story_page_pub_time page_narrow">2021-03-08 00:59:07</div><div class="story_img_container"><a href="http://img2.diglog.com/img/2021/3/1525121c905061e51e9b3da51c1308d7.jpg"><img src="http://img2.diglog.com/img/2021/3/1525121c905061e51e9b3da51c1308d7.jpg" class="img-fluid my_story_img" onerror="this.style.display='none'"></a></div><div class="page_narrow text-break page_content"><p>在JavaScript中，您可以通过侦听DeviceRientation事件来访问您的设备方向数据。它与以下内容一样简单：</p><p> 窗户 。 addeventlistener（＆＃39; leviceorientation＆＃39; speedorientation）;函数手提琴（事件）{const alpha =事件.alpha; const beta =事件.beta; const gamma =事件.gamma; // 做东西... }</p><p>    但！并非每个浏览器都允许您访问没有用户的方向数据＆＃39; s权限。例如，IOS 13 Apple已介绍了RequestPermission方法。必须在用户操作（单击，点击或等效）上触发它。</p><p>  函数onclick（）{if（typefemotionevent .requestpermission ===＆＃39;函数＆＃39;）{//处理iOS 13+设备。 devicemotionevent。 RequestPermission（）。然后（（state）=＆gt; {if（state ===＆＃39;授予＃39;）{window。addeventlistener（＆＃39; devicemotion＆＃39;，spearorientation）;} else {console。错误（＆＃ 39;访问取向的请求被拒绝＆＃39;）;}}）。 catch（控制台.Error）; } else {//处理常规非IOS 13+设备。窗户 。 AddeventListener（＆＃39; devicemotion＆＃39;，spearorientation）; }}</p><p> 尝试在下面打开切换，看看您的设备报告的角度值。</p><p>   如果您＆＃39;使用桌面设备，您可以模仿＆＃34的设备旋转;传感器＆＃34; Dev-Tools中的选项卡：</p><p>  凉爽的！所以现在我们可以访问设备方向，我们甚至可以在浏览器中测试它！ </p><p>我想要采取的最后一步就是想出反应钩子，它将封装对我提取的方向，并使它更容易在反应组件中使用它（就像上面向您展示的角度一样。</p><p>  导入{USECALLBACK，USEEFFECT，USESTATE}从＆＃39; React＆＃39; ; type = {alpha：number | null，beta：数字| NULL，伽玛：号码| null，} type = {方向：loborientation | null，错误：错误| null，请求手柄：（）=＆gt;承诺＆lt;布尔＆gt; ，Revokeacess：（）=＆gt;承诺＆lt;空隙＆gt; ，};导出const imbuseviceorientation =（）：moreedeviceorientationdata =＆gt; {const [错误，setError] = useState（null）; const [方向，setorientation] = usestate（null）; const ondeviceorientation =（事件：deviceorientationEvent）：Void =＆gt; {setorientation（{alpha：事件.alpha，beta：事件.beta，gamma：事件.gamma，}）; }; const revokeaccessasync = async（）：promise＆lt;空隙＆gt; =＆gt; { 窗户 。 RemoveeventListener（＆＃39; Leviceorientation＆＃39;，ondeviceorientation）; Setorientation（NULL）; }; Const RequestAccessAsync = Async（）：promise＆lt;布尔＆gt; =＆gt; {if（！deviceorientationEvent）{setError（＆＃39;您的浏览器不支持设备方向事件＆＃39;））;返回false; }如果（deviceOrientationEvent .requestpermission＆amp;＆amp; typefofemotionevent .requestpermission ===＆＃39;函数＆＃39;）{让许可：permisionstate;尝试{权限=等待deviceorientationEvent。索赔（）;捕获（错误）{setError（错误）;返回false; }如果（许可！==＆＃39;授予＆＃39;）{setError（＆＃39;请求访问设备方向拒绝＆＃39;））;返回false; }  } 窗户 。 AddeventListener（＆＃39; leviceorientation＆＃39;，ondeviceorientation）;返回真; }; Const RequestAccess = USECALLBACK（RequestAccessAsync，[]）; Const RevokeAccess = USECALLBACK（RevokeAccessAsync，[]）; Usefeffect（（）=＆gt; {return（）：void =＆gt; {Revokeaccess（）;};}，[Revokeaccess]）;返回{方向，错误，requestAccess，RevokeAccess，}; };</p><p>  导入从＆＃39反应;反应＆＃39; ;从＆＃39导入切换; ./切换＆＃39; ;从＆＃39导入{mundereviceorientation}; ./ hilderviceorientation＆＃39; ; Const OrientationInfo =（）：反应。 Reactelement =＆gt; {const {方向，RequestAccess，RevokeAccess，Error} = UnderViceOrientation（）; const ontoggle =（togglestate：boolean）：void =＆gt; {const结果= togglestate？ RequestAccess（）：RevokeAccess（）; }; Const OrientationInfo =定向＆amp;＆amp; （ɑ：{取向.alpha}β：{方向.beta}γ：{方向.gamma}）; const ergenElement =错误？ （{错误.message}）：null;返回（{OrientationInfo} {ErroreLement}）; };导出默认方向inInfo;</p><p>  最后，可以访问设备方向，让＆＃39模仿3D空间，通过旋转移动设备，可以从3D透视图中查看对象的可能性。想象一下，你有一个虚拟的购物项目，你想在把它放入篮子之前从不同的角度和侧面看到它。</p><p> 我们将使用一个简单的3D多维数据集，通过使用透视图，透视 - 原点和变换属性使用纯CSS（您可以在CSS-Tricks.com上找到具有样式的完整示例）。</p><p> 在这里，我们走了，这是我们的Gyro-Cube，你应该能够根据您的设备方向看出不同的角度！</p><p>  您可以在Trekhleb.github.io Repo中找到本文（包括Gyro-Cube样式）的所有代码示例。 </p><p>如果您＆＃39;从笔记本电脑阅读文章，在这里＆＃39;演示如何在移动设备上工作：  我希望这个例子对你很有用！ 我也希望您将提出更有趣和更现实的用例，而不是上面的陀螺立方体g快乐编码！ </p></div><div id="story_share_this"><div class="sharethis-inline-share-buttons"></div></div><div class="text-break sotry_link page_narrow"><a target="_blank" href="https://trekhleb.dev/blog/2021/gyro-web/">https://trekhleb.dev/blog/2021/gyro-web/</a></div><div class="story_tags page_narrow"><button type="button" class="btn btn-light my_tag"><a href="/tag/java/">#java</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/设备/">#设备</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/device/">#device</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/方向/">#方向</a></button></div></div><div class="shadow p-3 mb-5 bg-white rounded clearfix"><div class="container"><div class="row"><div class="col-sm"><div><a target="_blank" href="/story/1050938.html"><img src="http://img2.diglog.com/img/2021/3/thumb_fe84bfa92b58fb5cd2740cea1b66bd8f.jpg" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1050938.html">JavaScript-（不是Python-）定义的中性网络？ Deno 1.8支持WebGPU </a></div><span class="my_story_list_date">2021-3-7 9:54</span></div><div class="col-sm"><div><a target="_blank" href="/story/1050378.html"><img src="http://img2.diglog.com/img/2021/3/thumb_6fd8a57b34c4e5a51c7dab781a47cd40.jpeg" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1050378.html">像我这样的反TypeScript“ JavaScript开发人员”如何成为TypeScript迷 </a></div><span class="my_story_list_date">2021-3-2 21:40</span></div><div class="col-sm"><div><a target="_blank" href="/story/1049976.html"><img src="http://img2.diglog.com/img/2021/3/thumb_62d2811e9884847bee91074836281240.png" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1049976.html">JavaScript性能超出捆绑包大小 </a></div><span class="my_story_list_date">2021-3-1 2:11</span></div><div class="col-sm"><div><a target="_blank" href="/story/1048689.html"><img src="http://img2.diglog.com/img/2021/2/thumb_2f22bac6df1d2f1a8b573c1daff492a9.jpeg" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1048689.html">JavaScript中的Turbo Pascal编译器 </a></div><span class="my_story_list_date">2021-2-21 7:57</span></div></div></div></div><div class="my_movie_list_item shadow p-3 mb-5 bg-white rounded"><button type="button" class="btn btn-link my_tag"><a href="/tag/web2.0/">#web2.0</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/google/">#google</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/设计/">#设计</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/创意/">#创意</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/摄影/">#摄影</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/游戏/">#游戏</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/图片/">#图片</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/软件/">#软件</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/视频/">#视频</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/手机/">#手机</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/广告/">#广告</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/apple/">#apple</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/iphone/">#iphone</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/网站/">#网站</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/免费/">#免费</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/下载/">#下载</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/windows/">#windows</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/微软/">#微软</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/firefox/">#firefox</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/苹果/">#苹果</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/blog/">#blog</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/音乐/">#音乐</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/博客/">#博客</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/wordpress/">#wordpress</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/恶搞/">#恶搞</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/艺术/">#艺术</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/qq/">#qq</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/web/">#web</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/谷歌/">#谷歌</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/工具/">#工具</a></button></div></div></div><div id="my_footer"><div class=""><a href="/tags/">tags</a> <a href="/users/">users</a></div>&copy;2012-2021 diglog.com </div></div></body></html>