<!doctype html><html lang="zh-hans"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>“-n%n”在编程语言中到底有什么价值？</title><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"><link rel="stylesheet" href="/img/css.css?random="><link data-rh="true" rel="icon" href="/img/favicon.ico"/><script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?03c1a0f31299b4a2fbb83c34d6beaac9";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script><script data-ad-client="ca-pub-6067137220025946" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script type="text/javascript" src="https://platform-api.sharethis.com/js/sharethis.js#property=5effb96910009800120b8d4d&product=inline-share-buttons" async="async"></script></head><body><div id="my_header"><div class="container"><nav class="navbar navbar-expand-lg"><a class="navbar-brand" href="/"><img alt="diglog" src="/img/logo.v1.gif" class="rounded-sm"></a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarNavAltMarkup"><div class="navbar-nav"></div></div></nav></div></div><div class="container"><div id="my_content"><h1 class="page_narrow">“-n%n”在编程语言中到底有什么价值？</h1><div class="row"><div class="col-lg-12 col-12"><div class="my_story_list_item shadow p-3 mb-5 bg-white rounded"><div class="story_page_pub_time page_narrow">2020-10-29 10:27:44</div><div class="story_img_container"><a href="http://img2.diglog.com/img/2020/10/c72a4bdf84c77ccc3eff0558d5edc17a.jpg"><img src="http://img2.diglog.com/img/2020/10/c72a4bdf84c77ccc3eff0558d5edc17a.jpg" class="img-fluid my_story_img" onerror="this.style.display='none'"></a></div><div class="page_narrow text-break page_content"><p>When coding  efficient algorithms having to do with hashing, random number generations or even cryptography, a common construction is the expression “ -n%n“. My experience has been that it confuses many programmers, so let us examine it further.</p><p>当编码与散列、随机数生成甚至密码术有关的高效算法时，常见的构造是表达式“-n%n”。我的经验是它让许多程序员感到困惑，所以让我们进一步研究它。</p><p>   The percent sign (  %) in this expression refers to the modulo operation. It returns the remainder of the integer division. To simplify the discussion, let us assume that  range is strictly positive since dividing by zero causes problems.</p><p>此表达式中的百分号(%)表示模运算。它返回整数除法的余数。为了简化讨论，让我们假设范围0严格为正，因为除以零会产生问题。</p><p> We should pay attention to the leading minus sign ( –). It is the unary operator that negates a value, and not the subtraction sign. There is a difference between “ -range  % range&#34; and “ 0 -range  % range&#34;. They are not at all equivalent. They will actually give you different values; the latter expression is always zero. And that is because of the priority of operation. The negation operation has precedence on the modulo operation which has precedence on the subtraction operation. Thus you can rewrite “ -range  % range&#34; as “( -range)  % range&#34;. And you can write “ 0 -range  % range&#34; as “ 0 - (range  % range)“.</p><p>我们应该注意前面的减号(-)。求值的是一元运算符，而不是减号。“-RANGE%RANGE&34；”和“0-RANGE%RANGE&34；”之间存在差异。它们一点也不等同。它们实际上会给您不同的值；后一个表达式始终为零。这是因为运营的优先权。求反运算优先于模运算，模运算优先于减法运算。因此，您可以将“-range%range&#34；”重写为“(-range)%range&#34；。您可以将“0-Range%Range&#34；”写为“0-(Range%Range)”。</p><p> When the variable  range is a signed integer, then the expression   -range  % range is zero. In a programming language with only signed integers, like Java, this expression is always zero.</p><p>当变量范围是带符号整数时，表达式-range%range为零。在只包含有符号整数的编程语言(如Java)中，此表达式始终为零。</p><p> So let us assume that the variable  range is an unsigned type, as it is meant to be. In such cases, the expression is generally non-zero.</p><p>因此，让我们假设变量范围是无符号类型，正如它应该是的那样。在这种情况下，表达式通常为非零。</p><p>  When the variable  range is an unsigned type, Visual Studio is likely to be unhappy at the expression  -range. A recent Visual Studio returns the following warning:</p><p>当变量范围是无符号类型时，Visual Studio可能会对表达式范围不满意。最近的Visual Studio返回以下警告：</p><p>  Nevertheless, I believe that it is  a well defined operation in C++, Go and many other programming languages.  Jonathan Adamczewski has a whole blog post on the topic which suggests that the Visual Studio warning is best explained by a historical deviations from the C++ standard from the Microsoft Visual Studio team. (Note that the current Visual Studio team seems committed to the standards going forward.)</p><p>尽管如此，我相信它在C++、Go和许多其他编程语言中都是定义良好的操作。Jonathan Adamczewski有一篇关于这个主题的整篇博客文章，其中建议用Microsoft Visual Studio团队对C++标准的历史偏差来最好地解释Visual Studio警告。(请注意，当前的Visual Studio团队似乎致力于未来的标准。)。</p><p> My favorite definition is that – range is defined by  range + (- range) = 0. That is, it is the value such that when you add it to  range, you get zero. Mathematicians would say that it is the “additive inverse”. In programming languages (like Go and C++) where unsigned integers cannot overflow, then there is always one, and only one, additive inverse to every integer value.</p><p>我最喜欢的定义是-range由range+(-range)=0定义。也就是说，它是这样的值，当您将其添加到Range时，您会得到零。数学家会说它是“加性逆”。在编程语言(如GO和C++)中，无符号整数不能溢出，那么每个整数值总是有且只有一个加法倒数。</p><p> You can define this additive inverse without the unary negation: if  max is the maximum value that you can represent, then you can replace – range by  maximum –  range + 1. Or, maybe more simply, as  (0-range). And indeed,  in the Swift programming language, this particular line was represented as follow:</p><p>您可以定义这个没有一元否定的加法逆：如果max是您可以表示的最大值，那么您可以将-range替换为max-range+1。或者，可能更简单地，定义为(0-range)。事实上，在SWIFT编程语言中，这一特定行表示如下：</p><p>  The Swift language has two subtraction operations, one that is not allowed to overflow (the usual ‘ -‘), and one that is allowed to overflow (‘ &amp;-‘). It is somewhat inconvenient that Swift forces us to write so much code, but we must admit that the result is probably less likely to confuse a good programmer.</p><p>SWIFT语言有两个减法运算，一个不允许溢出(通常的‘-’)，另一个允许溢出(‘&amp；-’)。SWIFT强迫我们编写这么多代码有点不方便，但我们必须承认，结果可能不太可能让优秀的程序员感到困惑。</p><p> To conclude: you can learn a lot just by examining one line of code. To put it another way, programming is a much deeper and complex practice than it seems at first. As I was telling a student of mine yesterday: you are not supposed to read new code and understand it right away all of the time.</p><p>总结：您只需检查一行代码就可以学到很多东西。换句话说，编程是一项比乍看起来更深入、更复杂的实践。正如我昨天告诉我的一个学生的那样：你不应该一直阅读并理解新的代码。</p></div><div id="story_share_this"><div class="sharethis-inline-share-buttons"></div></div><div class="text-break sotry_link page_narrow"><a target="_blank" href="https://lemire.me/blog/2020/10/28/what-the-heck-is-the-value-of-n-n-in-programming-languages/">https://lemire.me/blog/2020/10/28/what-the-heck-is-the-value-of-n-n-in-programming-languages/</a></div><div class="story_tags page_narrow"><button type="button" class="btn btn-light my_tag"><a href="/tag/编程/">#编程</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/编程语言/">#编程语言</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/range/">#range</a></button></div></div><div class="shadow p-3 mb-5 bg-white rounded clearfix"><div class="container"><div class="row"><div class="col-sm"><div><a target="_blank" href="/story/1031435.html"><img src="http://img2.diglog.com/img/2020/10/thumb_855a49b9cf93f54c9ddfea1f410ea8cd.jpg" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1031435.html">C#Designer Torgersen：为什么编程语言仍然如此流行</a></div><span class="my_story_list_date">2020-10-27 18:45</span></div><div class="col-sm"><div><a target="_blank" href="/story/1031303.html"><img src="http://img2.diglog.com/img/2020/10/thumb_a5cc614333fc73576a7516a219d4c10c.jpeg" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1031303.html">一个使用动态编程的很酷的文本对齐工具</a></div><span class="my_story_list_date">2020-10-27 2:41</span></div><div class="col-sm"><div><a target="_blank" href="/story/1031098.html"><img src="http://img2.diglog.com/img/2020/10/thumb_cc2953afaaa8b4e0287395dbd7e10605.png" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1031098.html">您一直错过的反应式编程入门</a></div><span class="my_story_list_date">2020-10-25 23:3</span></div><div class="col-sm"><div><a target="_blank" href="/story/1030894.html"><img src="http://img2.diglog.com/img/2020/10/thumb_c95c6640c04b0b64f58812e5c40b98fc.jpg" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1030894.html">安全系统编程为何生锈</a></div><span class="my_story_list_date">2020-10-24 8:11</span></div></div></div></div><div class="my_movie_list_item shadow p-3 mb-5 bg-white rounded"><button type="button" class="btn btn-link my_tag"><a href="/tag/web2.0/">#web2.0</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/google/">#google</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/设计/">#设计</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/游戏/">#游戏</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/创意/">#创意</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/apple/">#apple</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/苹果/">#苹果</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/摄影/">#摄影</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/软件/">#软件</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/美国/">#美国</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/iphone/">#iphone</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/图片/">#图片</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/手机/">#手机</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/视频/">#视频</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/广告/">#广告</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/免费/">#免费</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/谷歌/">#谷歌</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/网站/">#网站</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/windows/">#windows</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/微软/">#微软</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/下载/">#下载</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/firefox/">#firefox</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/音乐/">#音乐</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/linux/">#linux</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/blog/">#blog</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/博客/">#博客</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/程序/">#程序</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/艺术/">#艺术</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/web/">#web</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/wordpress/">#wordpress</a></button></div></div></div><div id="my_footer"><div class=""><a href="/tags/">tags</a> <a href="/users/">users</a></div>&copy; 2020 diglog.com </div></div></body></html>