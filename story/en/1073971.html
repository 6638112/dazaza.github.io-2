<!doctype html><html lang="zh-hans"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>谁在占用IPv4地址？Who is squatting IPv4 addresses?</title><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"><link rel="stylesheet" href="/img/css.css?random="><link data-rh="true" rel="icon" href="/img/favicon.ico"/><script data-ad-client="ca-pub-6067137220025946" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script type="text/javascript" src="https://platform-api.sharethis.com/js/sharethis.js#property=5effb96910009800120b8d4d&product=inline-share-buttons" async="async"></script>
<script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?03c1a0f31299b4a2fbb83c34d6beaac9";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script></head><body><div id="my_header"><div class="container"><nav class="navbar navbar-expand-lg"><a class="navbar-brand" href="/"><img alt="diglog" src="/img/logo.v1.gif" class="rounded-sm"></a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarNavAltMarkup"><div class="navbar-nav"></div></div></nav></div></div><div class="container"><div id="my_content"><h1 class="page_narrow">Who is squatting IPv4 addresses?<br/>谁在占用IPv4地址？</h1><div class="row"><div class="col-lg-12 col-12"><div class="my_story_list_item shadow p-3 mb-5 bg-white rounded"><div class="story_page_pub_time page_narrow">2022-02-19 00:38:07</div><div class="page_narrow text-break page_content"><p>It’s an established fact on the internet that we have  ran out of IP(v4) addresses, and we are starting to see the pressure on obtaining IPv4 space. For example if you want to get a /24 block from  RIPE NCC when you sign up as a member, then you are currently  looking at a 2 month wait for a recycled IPv4 /24 block.</p><p>互联网上的一个既定事实是，我们已经用完了IP（v4）地址，我们开始看到获取IPv4空间的压力。例如，如果你想在注册成为会员时从成熟的NCC获得一个/24区块，那么你目前正在等待一个回收的IPv4/24区块2个月。</p><p>  The easy thing here is to say, “Well just use IPv6” but well…  We are getting there slowly.</p><p>这里最简单的一件事就是说，“好吧，就用IPv6吧”，但是……我们正在慢慢地实现这一目标。</p><p> But what happens if you have run out of local IPv4 space? Or for some reason the  RFC1918 Private network space is not an option anymore? Some people resort to squatting IP address space!</p><p>但是，如果本地IPv4空间用完了，会发生什么呢？或者出于某种原因，RFC1918专用网络空间不再是一个选项？有些人会占用IP地址空间！</p><p> For the case of this post, I will define IP address squatting as “using IP addresses that are not RFC1918 defined and not your unicast space issued by a RIR”. The first thing that instantly comes to mind is Cloudflare obtained the addresses 1.1.1.1 and 1.0.0.1 to run a DNS resolver on, but had to fight back against a  huge amount of network and home routers squatting on those addresses internally (I do also wonder if the last unicast /24 block has similar issues)</p><p>对于这篇文章，我将IP地址占用定义为“使用未定义RFC1918的IP地址，而不是RIR发布的单播空间”。首先想到的是Cloudflare获得了地址1.1.1.1和1.0.0.1来运行DNS解析程序，但不得不反击大量在内部占用这些地址的网络和家庭路由器（我也不知道最后一个单播/24块是否存在类似问题）</p><p> This problem is not that surprising though, your local friendly sysadmin might be able to tell you of a story where they have caught their colleagues, customers, or  even parents squatting on addresses.</p><p>不过，这个问题并不奇怪，您当地友好的系统管理员可能会告诉您一个故事，在这个故事中，他们抓到了自己的同事、客户，甚至父母蹲在地址上。</p><p> But how big of an issue is this? If only we had a large amount of well known IP address blocks that we can make a safe bet on not being used.</p><p>但这个问题有多大？如果我们有大量众所周知的IP地址块，我们就可以放心地打赌不会被使用。</p><p>  At the start of 2021, the DoD started to announce huge sections of their massive IP block allocations ( around 234000 /24’s worth ) out of  AS8003, and then moved them to  AS749. This was initially suspected to be preparation of an IP sell off, since the cost of v4 addressing has reached impressive highs recently. However later on  the Pentagon said:</p><p>在2021年初，国防部开始宣布从AS800中公布庞大的IP块分配（大约234000/24的价值），然后将它们转移到AS79。最初，人们怀疑这是在准备出售IP，因为v4寻址的成本最近达到了令人印象深刻的高点。然而，五角大楼后来表示：</p><p> &#34; This pilot will assess, evaluate, and prevent unauthorized use of DoD IP address space &#34;</p><p>&#34; 该飞行员将评估、评估并防止未经授权使用国防部IP地址空间&#34；</p><p> To me this reads as, “We don’t want our large IP blocks that are mostly unannounced in the BGP DFZ hijacked by people” and at the same time “We have some people who want to run a massive  darknet“</p><p>对我来说，这意味着，“我们不希望BGP DFZ中大部分未经通知的大型IP块被人劫持”，同时“我们有一些人想要运行一个大规模的黑暗网络”</p><p> Running on these assumptions, we can assume that whatever is announced by AS749 is unused DoD space, and so anything on the internet pointing to those blocks is squatting (either by typo or purpose) to at least some degree (assuming it’s not a DoD site itself)</p><p>基于这些假设，我们可以假设AS749发布的任何内容都是未使用的国防部空间，因此互联网上指向这些区块的任何内容至少在某种程度上是蹲着的（无论是打字错误还是目的）（假设它本身不是国防部网站）</p><p> But how do we know what is pointing to anything on the internet? How do we get massive amounts of DNS Data?</p><p>但是我们怎么知道什么指向互联网上的任何东西呢？我们如何获取大量的DNS数据？</p><p>  There are many ways to get DNS data, You can obtain most TLD’s DNS zone files by  simply asking them, you could use Passive DNS services that obtain their data generally by  tapping users DNS logs, or you could use  Certificate Transparency (CT) logs to extract DNS names out of SSL certs.</p><p>获取DNS数据的方法有很多，你可以通过简单地询问他们来获取大多数TLD的DNS区域文件，你可以使用被动DNS服务，通常通过点击用户DNS日志来获取他们的数据，或者你可以使用证书透明性（CT）日志从SSL证书中提取DNS名称。</p><p> I am already using the CT option for DNS data on  bgp.tools. Approximately every 2 weeks I complete around ~30B DNS queries and compile into a file that is just IP addresses mapping to host names. This allows the website to easily show what DNS records point to an IP address block.</p><p>我已经在bgp上使用了DNS数据的CT选项。工具。大约每两周，我会完成大约30B的DNS查询，并编译成一个文件，该文件只是映射到主机名的IP地址。这使得网站可以轻松显示哪些DNS记录指向IP地址块。</p><p>  There are other tools to look into CT logs too,  Cloudflare run a decent site that shows statistical numbers and graphs and for searching CT logs without downloading them all there is a great utility called  crt.sh that Sectigo operates (A rebranding of Comodo).</p><p>还有其他工具可以查看CT日志，Cloudflare运行了一个不错的站点，显示统计数字和图表，并且可以在不下载CT日志的情况下搜索CT日志，还有一个很棒的实用程序，名为crt。她说Sectigo运营（科摩多的更名）。</p><p> But how do we use this data to figure out cases of IP squatting, especially inside local LANs where we would not generally expect to see public DNS entries pointing to them?</p><p>但是，我们如何利用这些数据来找出IP占用的情况，尤其是在我们通常不希望看到指向它们的公共DNS条目的本地局域网内？</p><p>  Western Digital released a bunch of compact  NAS devices that also have a remote access feature (Hence the “My-Cloud” branding). This allows users to access their devices remotely even if they are outside of the local network that the device is on. However, since it’s generally a requirement to have these kinds of connections be encrypted, WD issues SSL certs for each one of these devices,  Plex and other applications do a similar thing in order to allow secure connections in browsers.</p><p>Western Digital发布了一系列紧凑型NAS设备，这些设备还具有远程访问功能（因此有了“我的云”品牌）。这允许用户远程访问他们的设备，即使他们在设备所在的本地网络之外。然而，由于通常要求对这些类型的连接进行加密，WD会为这些设备中的每一个颁发SSL证书，Plex和其他应用程序也会做类似的事情，以便在浏览器中实现安全连接。</p><p> Using this fact, we can scan for these WD Devices by grepping for the domain that these devices use called  remotewd.com:</p><p>利用这一事实，我们可以通过对这些设备使用的称为remotewd的域进行灰显来扫描这些WD设备。通用域名格式：</p><p> [xxx.bgp.tools] $ pv mega | grep remotewd.com$ &gt; remote-wd20.5GiB 0:00:30 [ 689MiB/s] [============================&gt;] 100% [xxx.bgp.tools] $ wc -l remote-wd2248019 remote-wd[xxx.bgp.tools] $ tail remote-wd223.255.150.74,device-0675828b-2e8c-4be5-96e7-0a595fbae6dc.remotewd.com223.255.150.74,device-9e007f60-c53d-43dd-8743-4ac1a569952e.remotewd.com223.255.156.58,device-190d10b4-2465-4d52-91e1-fc223885a510.remotewd.com223.255.157.74,device-d3a1aa96-f383-467f-a9ae-dfa8b7bfdb81.remotewd.com223.255.255.67,device-local-c3712a54-3c25-442e-90ee-a56c02ad9db4.remotewd.com</p><p>[xxx.bgp.tools]$pv mega | grep remotewd。com$&gt；远程wd20。5GiB 0:00:30[689MiB/s][=====================================&gt；]100%[xxx.bgp.tools]$wc-l remote-wd2248019 remote wd[xxx.bgp.tools]$tail remote-wd223。255.150.74，设备-0675828b-2e8c-4be5-96e7-0a595fbae6dc。remotewd。com223。255.150.74，装置-9e007f60-c53d-43dd-8743-4ac1a569952e。remotewd。com223。255.156.58，装置190d10b4-2465-4d52-91e1-fc223885a510。remotewd。com223。255.157.74，设备-d3a1aa96-f383-467f-a9ae-dfa8b7bfdb81。remotewd。com223。255.255.67，设备-local-c3712a54-3c25-442e-90ee-a56c02ad9db4。remotewd。通用域名格式</p><p> So here we can see that a single MyCloud device has two DNS names.  device-$UUID.remotewd.com and  device-local-$UUID.remotewd.com. The difference is the  device-local one’s map to the local address on the device, and the  device- one’s map to the Internet address (accounting for NAT). Presumably the WD devices are doing a form of automatic port forwarding like  UPNP.</p><p>所以在这里我们可以看到一个MyCloud设备有两个DNS名称。设备-$UUID。remotewd。com和设备本地-$UUID。remotewd。通用域名格式。区别在于设备本地用户到设备本地地址的映射，以及设备-用户到互联网地址的映射（考虑NAT）。据推测，WD设备正在进行一种类似UPNP的自动端口转发。</p><p> The neat thing is that we can find one UUID and use it to grep for both the WAN address and the LAN address of a device:</p><p>最妙的是，我们可以找到一个UUID，并使用它来grep设备的WAN地址和LAN地址：</p><p>  So, great! Now we can write a script to go and find abnormal LAN addresses for these devices. We do this by checking that the local address does not match the internet address, and that the local IP address space is outside of IP ranges defined by  RFC1918.</p><p>太好了！现在我们可以编写一个脚本来查找这些设备的异常LAN地址。我们通过检查本地地址是否与internet地址不匹配，以及本地IP地址空间是否超出RFC1918定义的IP范围来实现这一点。</p><p>  1.0.0.117 = 8ece6a15-2fed-420d-95dd-d920d5666869 is a IP squat?1.0.0.132 = ecd4bff4-01a5-40d6-8e70-cc9e102de492 is a IP squat?...1.1.10.15 = 09a3b350-27a6-45f1-b44d-f152cbcb3e4c is a IP squat?1.1.1.111 = ab7cb7f7-ae9a-4390-a526-99248ac55593 is a IP squat?1.1.1.1 = 4c0fe0e5-8f84-43e4-9cba-b76f9cddb368 is a IP squat?1.1.1.17 = 44836275-6825-4767-8b70-a5e04c4a820e is a IP squat?...2.12.1.6 = cb578ebe-9319-4451-950c-e03ece3549b7 is a IP squat?2.2.2.162 = 971ad945-056c-40b2-9e68-ffa7bed37da8 is a IP squat?2.2.2.249 = f1b13fbb-6297-4ac0-9724-5ce2bbfa9f91 is a IP squat?2.2.2.38 = cf92953b-e625-4bdf-9229-ab3933f18d9b is a IP squat?2.43.1.33 = a26d4b29-4145-48eb-a439-64ca4a6aa9f9 is a IP squat?...4.28.65.10 = b9fd42f2-3491-4775-9d3d-dce4bc89ae5b is a IP squat?4.3.80.8 = ee009944-4054-43fa-a7f7-08927ea86cfb is a IP squat?4.4.4.3 = a5ad8ecd-93b1-4690-b21a-4322cd5e02cb is a IP squat?4.8.19.16 = 733745f3-e9e0-4a7d-abb1-d5cc0aaf0b30 is a IP squat?...5.35.1.156 = f2325dc8-a79e-41e7-bd99-fe30d6afa25a is a IP squat?5.5.1.75 = d69d77c9-181c-441f-af19-c881880534db is a IP squat?...8.34.143.56 = 4fb6a202-98f1-4e98-92ec-9357ecb1c4eb is a IP squat?8.8.8.92 = 78a897cb-48d1-46c0-ba91-66c353bab06c is a IP squat?8.9.80.111 = 28968a74-edc2-42ce-b7d0-5416f958245c is a IP squat?...9.9.52.93 = f4a6f3c1-5c44-4fb5-b96c-7203272cc297 is a IP squat?9.9.9.24 = 10df8b8b-74cb-4230-a236-12105de7173e is a IP squat?9.9.9.38 = 8b9707fa-7b59-49dd-b7a3-4ef5b88659ff is a IP squat?11.0.0.103 = d13da0c6-8e6e-43fb-8109-a35d6b469101 is a IP squat?11.0.0.113 = 55364bcd-389d-4464-aa71-c2fc87dfb2bf is a IP squat?11.0.0.16 = 5502da73-a1dc-4e90-b21c-8d30c76058cf is a IP squat?...99.99.99.91 = f95c5933-eaf9-48ce-a87a-cf9567df305b is a IP squat?100.0.0.100 = 5349507f-d05b-496e-93b5-9766e948b8d2 is a IP squat?100.0.0.10 = 12d38773-813e-49cc-bdd7-48a884fcf829 is a IP squat?...168.190.30.15 = a3f43288-2d34-4764-ba13-65a1e00dded0 is a IP squat?168.192.0.252 = 6a8248c2-9a35-47c7-8061-469faa7adbac is a IP squat?168.192.0.34 = fb2cf7f1-0a3b-42d0-b04d-8d816d69a3bb is a IP squat?168.192.110.102 = 183be2ee-4913-45f2-867f-40c5038f757b is a IP squat?168.192.1.111 = bba93f2f-32d3-41e0-ab98-0c08f6d2b438 is a IP squat?168.192.1.12 = cb1fcb60-a0ff-474a-b8a2-9f6246e5f3d9 is a IP squat?168.200.1.6 = 95e5745c-a102-4ccd-92aa-651eaf0af006 is a IP squat?...192.167.4.118 = a84e8794-cae0-4e9a-ba8a-fce18f7e6a0f is a IP squat?192.167.60.157 = 4d24f693-e9ea-4e70-b945-478a1fdabfb0 is a IP squat?192.169.0.100 = 5f48efb9-a7d4-45d3-8ba3-e4234daff96c is a IP squat?192.169.0.100 = da4b9dc3-6d99-4eb7-a67b-ab244515baf9 is a IP squat?192.169.0.100 = e050a252-9636-4a89-ac2a-02a4acb6bb8a is a IP squat?...193.167.1.38 = 6481ac7d-c5b4-4ba6-ae9e-166a8ff76a15 is a IP squat?193.168.0.178 = 37b18ba6-f01c-4f4d-a08c-48450c6d47af is a IP squat?193.168.100.41 = 0ce6f895-d82a-479e-bd7f-b873418582e7 is a IP squat?...</p><p>1.0.0.117=8ece6a15-2fed-420d-95dd-d920d5666869是IP下蹲吗？1.0.0.132=ECD4BF4-01a5-40d6-8e70-cc9e102de492是IP蹲式？。。。1.1.10.15=09a3b350-27a6-45f1-b44d-F152CB3E4C是否为IP蹲式？1.1.1.111=ab7cb7f7-ae9a-4390-a526-99248ac55593是IP下蹲吗？1.1.1.1=4c0fe0e5-8f84-43e4-9cba-b76f9cddb368是IP下蹲吗？1.1.1.17=44836275-6825-4767-8b70-a5e04c4a820e是IP蹲式？。。。2.12.1.6=cb578ebe-9319-4451-950c-e03ece3549b7是否为IP蹲式？2.2.2.162=971ad945-056c-40b2-9e68-ffa7bed37da8是否为IP蹲式？2.2.2.249=f1b13fbb-6297-4ac0-9724-5ce2bbfa9f91是否为IP蹲式？2.2.2.38=cf92953b-e625-4bdf-9229-ab3933f18d9b是否为IP蹲式？2.43.1.33=a26d4b29-4145-48eb-a439-64ca4a6aa9f9是IP蹲式？。。。4.28.65.10=b9fd42f2-3491-4775-9d3d-dce4bc89ae5b是否为IP蹲式？4.3.80.8=ee009944-4054-43fa-a7f7-08927ea86cfb是IP蹲坐吗？4.4.4.3=a5ad8ecd-93b1-4690-b21a-4322cd5e02cb是否为IP蹲式？4.8.19.16=733745f3-e9e0-4a7d-abb1-d5cc0aaf0b30是IP蹲式？。。。5.35.1.156=f2325dc8-a79e-41e7-bd99-fe30d6afa25a是否为IP蹲式？5.5.1.75=d69d77c9-181c-441f-af19-c881880534db是否为IP蹲式？。。。8.34.143.56=4fb6a202-98f1-4e98-92ec-9357ecb1c4eb是IP蹲坐吗？8.8.8.92=78a897cb-48d1-46c0-ba91-66c353bab06c是否为IP蹲式？8.9.80.111=28968a74-edc2-42ce-b7d0-5416f958245c是IP蹲式？。。。9.9.52.93=f4a6f3c1-5c44-4fb5-b96c-7203272cc297是否为IP蹲式？9.9.9.24=10df8b8b-74cb-4230-a236-12105de7173e是否为IP蹲式？9.9.9.38=8b9707fa-7b59-49dd-b7a3-4ef5b88659ff是否为IP蹲式？11.0.0.103=d13da0c6-8e6e-43fb-8109-a35d6b469101是否为IP蹲式？11.0.0.113=55364bcd-389d-4464-aa71-c2fc87dfb2bf是IP蹲坐吗？11.0.0.16=5502da73-a1dc-4e90-b21c-8d30c76058cf是IP蹲式？。。。99.99.99.91=f95c5933-eaf9-48ce-a87a-cf9567df305b是IP下蹲吗？100.0.0.100=5349507f-d05b-496e-93b5-9766e948b8d2是IP下蹲吗？100.0.0.10=12d38773-813e-49cc-bdd7-48a884fcf829是IP蹲式？。。。168.190.30.15=a3f43288-2d34-4764-ba13-65a1e00dded0是IP下蹲吗？168.192.0.252=6a8248c2-9a35-47c7-8061-469faa7adbac是IP蹲式吗？168.192.0.34=fb2cf7f1-0a3b-42d0-b04d-8d816d69a3bb是IP蹲起吗？168.192.110.102=183be2ee-4913-45f2-867f-40C5038F75B是否为IP蹲式？168.192.1.111=bba93f2f-32d3-41e0-ab98-0c08f6d2b438是IP蹲姿吗？168.192.1.12=cb1fcb60-a0ff-474a-b8a2-9f6246e5f3d9是IP下蹲吗？168.200.1.6=95e5745c-a102-4ccd-92aa-651eaf0af006是IP蹲式？。。。192.167.4.118=a84e8794-cae0-4e9a-ba8a-fce18f7e6a0f是IP下蹲吗？192.167.60.157=4d24f693-e9ea-4e70-b945-478a1fdabfb0是IP下蹲吗？192.169.0.100=5f48efb9-a7d4-45d3-8ba3-e4234daff96c是IP下蹲吗？192.169.0.100=da4b9dc3-6d99-4eb7-a67b-ab244515baf9是IP蹲姿吗？192.169.0.100=e050a252-9636-4a89-ac2a-02a4acb6bb8a是IP蹲式？。。。193.167.1.38=6481ac7d-c5b4-4ba6-ae9e-166a8ff76a15是IP蹲姿吗？193.168.0.178=37b18ba6-f01c-4f4d-a08c-48450c6d47af是IP下蹲吗？193.168.100.41=0ce6f895-d82a-479e-bd7f-b873418582e7是IP蹲式？。。。</p><p> It appears that triplets are popular (IE,  1.1.1.X,  2.2.2.X,  3.3.3.X), and common “fat fingering” of RFC1918 ranges, with  193.168.X.X,  191.168.X.X,  192.186.X.X showing up.</p><p>似乎三胞胎很受欢迎（即1.1.1.X、2.2.2.X、3.3.3.X），RFC1918系列中常见的“脂肪指征”为193.168。X.X，191.168。X.X，192.186。X.X出现了。</p><p> Triplets are likely to collide with popular anycast DNS resolvers, like  Cloudflare’s 1.1.1.1,  Google’s 8.8.8.8,  Quad9’s 9.9.9.9,  UK Government DNS 25.25.25.25,  Freenom’s 80.80.80.80 ,  Quad101,  114dns.com, etc.</p><p>三胞胎可能会与流行的任意广播DNS解析程序发生冲突，比如Cloudflare的1.1.1.1、谷歌的8.8.8.8、Quad9的9.9.9.9、英国政府DNS 25.25.25.25、Freenom的80.80.80、Quad101、114dns。com等等。</p><p> The typos are just unfortunate. But what about possible squats? Well we can look up the announcing ASNs of the IP list using the  bgp.tools bulk lookup API:</p><p>拼写错误真是不幸。但可能的下蹲呢？我们可以使用bgp查找IP列表的ASN。工具批量查找API：</p><p> $ echo &#34;begin&#34; &gt;&gt; lookup-file$ echo &#34;verbose&#34; &gt;&gt; lookup-file$ cat output-sorted.txt | awk &#39;{print $1}&#39; &gt;&gt; lookup-file$ echo &#34;end&#34; &gt;&gt; lookup-file$ cat lookup-file - | nc bgp.tools 43 | tee resolved-list13335 | 1.0.0.117 | 1.0.0.0/24 | US | ARIN | 2010-07-14 | Cloudflare, Inc.13335 | 1.0.0.132 | 1.0.0.0/24 | US | ARIN | 2010-07-14 | Cloudflare, Inc....9644 | 223.61.1.108 | 223.48.0.0/12 | KR | APNIC | 0001-01-01 | SK Telecom$ cat resolved-list | wc -l3585$ cat resolved-list | egrep &#39;^749 &#39; | wc -l171</p><p>$echo和#34；开始&#34&gt&gt；查找文件$echo&#34；冗长&#34&gt&gt；查找文件$cat输出已排序。txt | awk和#39；{打印$1}&#39&gt&gt；查找文件$echo&#34；结束&#34&gt&gt；查找文件$cat查找文件-| nc bgp。工具43 | tee解析-list13335 | 1.0.0.117 | 1.0.0.0/24 |美国| ARIN | 2010-07-14 | Cloudflare，Inc.13335 | 1.0.0.132 | 1.0.0/24 |美国| ARIN | 2010-07-14 | Cloudflare，Inc。。。。9644 | 223.61.1.108 | 223.48.0.0/12 | KR | APNIC | 0001-01-01 | SK Telecom$cat解析列表| wc-l3585$cat解析列表|egrep#39^749 &#39; | wc-l171</p><p> So out of all the suspected IP squats detected using the WD MyCloud data, around 5% of them are on suspected unused DoD space.</p><p>因此，在使用WD MyCloud数据检测到的所有可疑IP占用中，大约5%位于可疑未使用的国防部空间。</p><p> We can also run this in reverse and figure out the most common RFC1918 space that people use:</p><p>我们也可以反过来运行，找出人们使用的最常见的RFC1918空间：</p><p>  But this only covers residential/prosumer markets who would stereotypically purchase a device like this. What about the “proper” server world?</p><p>但这只适用于住宅/消费市场，他们通常会购买这样的设备。那么“合适的”服务器世界呢？</p><p>  AWS Virtual Private Clouds (VPCs) (think of them like network LANs) have a fun feature called  “Interface Endpoints” that allow you to put AWS services (like S3) that would normally only be reachable on public address spaces to appear as local IP addresses in your VPC address space. This is useful since it can remove the need for some servers to have any outbound internet access at all. Assisting in security posture amongst other things.</p><p>AWS虚拟私有云（VPC）（将其视为网络LAN）有一个有趣的功能，称为“接口端点”，允许您将通常只能在公共地址空间上访问的AWS服务（如S3）放在VPC地址空间中显示为本地IP地址。这是很有用的，因为它可以消除一些服务器对任何出站internet访问的需求。除其他事项外，协助安全态势。</p><p> But since people also want to communicate with AWS securely, even inside the presumably high security of AWS VPCs, the new interface endpoint needs an SSL cert and a DNS entry. This is useful since it gives us a clue on who is using what IP addresses inside their VPC’s.</p><p>但由于人们也希望安全地与AWS通信，即使在AWS VPC的高安全性内部，新的接口端点也需要SSL证书和DNS条目。这很有用，因为它为我们提供了一条线索，让我们知道谁在使用VPC中的IP地址。</p><p> $ pv mega | grep vpce- | grep vpce.amazonaws.com &gt; vpc-endpoints$ wc -l vpc-endpoints 234919 vpc-endpoints</p><p>$pv mega | grep vpce-| grep vpce。亚马逊。com&gt；vpc端点$wc-l vpc端点234919 vpc端点</p><p>  We can see that  10.0.0.0/8 and  172.16.0.0/12 are popular picks for VPC addresses. But what about possible squats?</p><p>我们可以看到，10.0.0.0/8和172.16.0.0/12是VPC地址的热门选择。但可能的下蹲呢？</p><p> It’s worth saying now, it’s possible that some of these are not IP Squats and are instead Bring Your Own IP inside of Amazon, or complex Direct Connect setups. But if we see DoD AS749 then we can assume those are cases of IP squatting.</p><p>现在值得一提的是，其中一些可能不是IP占用，而是将您自己的IP带到亚马逊内部，或者是复杂的直接连接设置。但如果我们看到国防部AS749，那么我们可以假设这些都是IP占用的情况。</p><p> $ ./vpc-stats | tee vpc-output | sort -n | head1.100.126.10 ,bucket.vpce-0b3bb7a5b64eb1981-ymxb0boe-eu-west-1b.s3.eu-west-1.vpce.amazonaws.com1.100.126.10 ,bucket.vpce-0b3bb7a5b64eb1981-ymxb0boe.s3.eu-west-1.vpce.amazonaws.com1.2.3.26 ,bucket.vpce-08ed65ca57dce3ab4-i01pkug2-us-gov-west-1b.s3.us-gov-west-1.vpce.amazonaws.com3.230.20.24 ,bucket.vpce-018d369d104a616c8-a0sfaap3.beta.s3.us-east-1.vpce.amazonaws.com4.0.1.68 ,bucket.vpce-0e90ca15c8f461fd9-zl6yishp-ap-northeast-2a.s3.ap-northeast-2.vpce.amazonaws.com4.0.2.137 ,bucket.vpce-0e90ca15c8f461fd9-zl6yishp-ap-northeast-2c.s3.ap-northeast-2.vpce.amazonaws.com...</p><p>$ ./vpc统计| tee vpc输出|排序-n |头1。100.126.10，水桶。vpce-0b3bb7a5b64eb1981-ymxb0boe-eu-west-1b。s3。eu-west-1。vpce。亚马逊。com1。100.126.10，水桶。vpce-0b3bb7a5b64eb1981-ymxb0boe。s3。eu-west-1。vpce。亚马逊。com1。2.3.26，水桶。vpce-08ed65ca57dce3ab4-i01pkug2-us-gov-west-1b。s3。us-gov-west-1。vpce。亚马逊。com3。230.20.24，水桶。vpce-018d369d104a616c8-a0sfaap3。贝塔。s3。美国东部1号。vpce。亚马逊。com4。0.1.68，桶。vpce-0e90ca15c8f461fd9-zl6yishp-ap-northeast-2a。s3。美联社东北2。vpce。亚马逊。com4。0.2.137，桶。vpce-0e90ca15c8f461fd9-zl6yishp-ap-northeast-2c。s3。美联社东北2。vpce。亚马逊。通用域名格式。。。</p><p>  $ cat vpc-ips - | nc bgp.tools 43 | tee vpc-ips-resolved4766 | 1.100.126.10 | 1.96.0.0/12 | KR | APNIC | 0001-01-01 | Korea Telecom0 | 1.2.3.26 | &lt;nil&gt; | | Unknown | 0001-01-01 | ERR_AS_NAME_NOT_FOUND14618 | 3.230.20.24 | 3.224.0.0/12 | US | ARIN | 2005-11-04 | Amazon.com, Inc.3356 | 4.0.1.68 | 4.0.0.0/9 | US | ARIN | 2000-03-10 | Lumen (Level 3)...$ wc -l vpc-ips-resolved 829 vpc-ips-resolved$ cat vpc-ips-resolved | egrep &#39;^749 &#39; | wc -l138</p><p>$cat专有网络IP-| nc bgp。工具43 | tee vpc-ips-resolved4766 | 1.100.126.10 | 1.96.0.0/12 | KR | APNIC | 0001-01-01 |韩国电信0 | 1.2.3.26 |&lt；无&gt；||未知| 0001-01-01 |错误|作为|名字|不|发现14618 | 3.230.20.24 | 3.224.0.0/12 |美国|阿林| 2005-11-04 |亚马逊。com公司3356 | 4.0.1.68 | 4.0.0.0/9 |美国|阿林| 2000-03-10 |流明（三级）wc-l专有网络IP解析829个专有网络IP解析$cat专有网络IP解析| egrep#39^749 &#39; | wc-l138</p><p> Using this limited view inside of VPC Subnets, we can see that over 16% of all of the non-RFC1918 space is suspected squatted DoD space!</p><p>使用VPC子网内部的这一有限视图，我们可以看到，所有非RFC1918空间中有超过16%的空间被怀疑是被占用的国防部空间！</p><p>  As we can see, while the DoD is sitting on some huge volumes of IPv4 space, buying the space off them might require additional work to “clean up” decades of assumptions that it was unlikely to become reachable internet addresses.</p><p>正如我们所见，虽然国防部拥有大量IPv4空间，但从这些空间购买这些空间可能需要额外的工作来“清理”几十年来的假设，即它不太可能成为可访问的互联网地址。</p><p> At the time of writing the market price for an IPv4 address is around 50 USD, this means that assuming AS749 is the DoD’s “spare” blocks then using naive maths the US Department of Defence is sitting on approx 2,997,516,800 USD worth of IP addresses.</p><p>在撰写本文时，IPv4地址的市场价格约为50美元，这意味着假设AS749是国防部的“备用”模块，那么使用简单的数学计算，美国国防部拥有价值约2997516800美元的IP地址。</p><p> That’s quite a lot! Though it’s worth keeping in mind that assuming that the cost of a  F-35 fighter jet is 78M USD, then they could exchange their entire spare IP blocks for “just” 38 F-35’s. Doesn’t really seem like much. Also given how much money countries spend on defence, I can understand why the DoD doesn’t seem to be trying to cash out on their IP space just yet ;)</p><p>太多了！尽管值得记住的是，假设一架F-35战斗机的成本为7800万美元，那么他们可以用全部备用IP块换取“仅”38架F-35。这看起来并不多。另外，考虑到各国在国防上花费了多少钱，我能理解为什么国防部似乎还没有试图利用他们的IP空间来赚钱；）</p><p> An amusing thought really. That the price of a /12 and /13 is around the same as a F-35.</p><p>真是个有趣的想法。a/12和a/13的价格与F-35差不多。</p><p>  If you want to stay up to date with the blog you can use the  RSS feed or you can follow me on  Twitter</p><p>如果你想了解博客的最新信息，可以使用RSS订阅源，也可以在Twitter上关注我</p><p> Also, I&#39;m currently looking for work from March onwards. If you like what I do or think that you could do with some of my bizarre areas of knowledge, please contact me over at workwith@benjojo.co.uk!</p><p>还有，我&#39；我目前正在寻找三月份以后的工作。如果你喜欢我所做的，或者认为你可以利用我的一些奇怪的知识领域，请通过workwith@benjojo.co.uk!</p></div><div id="story_share_this"><div class="sharethis-inline-share-buttons"></div></div><div class="story_tags page_narrow"><button type="button" class="btn btn-light my_tag"><a href="/tag/ipv4/">#ipv4</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/ip/">#ip</a></button></div></div><div class="my_movie_list_item shadow p-3 mb-5 bg-white rounded"><button type="button" class="btn btn-link my_tag"><a href="/tag/web2.0/">#web2.0</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/google/">#google</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/设计/">#设计</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/创意/">#创意</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/摄影/">#摄影</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/图片/">#图片</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/游戏/">#游戏</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/软件/">#软件</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/广告/">#广告</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/视频/">#视频</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/手机/">#手机</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/iphone/">#iphone</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/网站/">#网站</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/免费/">#免费</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/windows/">#windows</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/下载/">#下载</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/微软/">#微软</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/苹果/">#苹果</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/firefox/">#firefox</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/blog/">#blog</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/音乐/">#音乐</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/博客/">#博客</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/apple/">#apple</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/wordpress/">#wordpress</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/恶搞/">#恶搞</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/qq/">#qq</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/艺术/">#艺术</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/谷歌/">#谷歌</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/工具/">#工具</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/web/">#web</a></button></div></div></div><div id="my_footer"><div class=""><a href="/tags/">tags</a> <a href="/users/">users</a></div>&copy;2012-2021 diglog.com </div></div></body></html>