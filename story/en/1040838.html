<!doctype html><html lang="zh-hans"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Windows 10 20H2：ChkDsk会损坏已安装KB4592438的SSD上的文件系统 Windows 10 20H2: ChkDsk damages filesystem on SSDs with KB4592438 installed</title><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"><link rel="stylesheet" href="/img/css.css?random="><link data-rh="true" rel="icon" href="/img/favicon.ico"/><script data-ad-client="ca-pub-6067137220025946" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script type="text/javascript" src="https://platform-api.sharethis.com/js/sharethis.js#property=5effb96910009800120b8d4d&product=inline-share-buttons" async="async"></script>
<script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?03c1a0f31299b4a2fbb83c34d6beaac9";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script></head><body><div id="my_header"><div class="container"><nav class="navbar navbar-expand-lg"><a class="navbar-brand" href="/"><img alt="diglog" src="/img/logo.v1.gif" class="rounded-sm"></a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarNavAltMarkup"><div class="navbar-nav"></div></div></nav></div></div><div class="container"><div id="my_content"><h1 class="page_narrow">Windows 10 20H2: ChkDsk damages filesystem on SSDs with KB4592438 installed<br/>Windows 10 20H2：ChkDsk会损坏已安装KB4592438的SSD上的文件系统 </h1><div class="row"><div class="col-lg-12 col-12"><div class="my_story_list_item shadow p-3 mb-5 bg-white rounded"><div class="story_page_pub_time page_narrow">2020-12-20 10:06:42</div><div class="page_narrow text-break page_content"><p>[ German]In Windows 10 20H2 with installed cumulative update KB4592438, chkdsk causes massive issues. It destroys the file system during a disk check on SSDs, so Windows 10 can’t start after a reboot. Here is some information about the problem and the affected Windows 10 build.</p><p>[德语]在安装了累积更新KB4592438的Windows 10 20H2中，chkdsk引起了严重的问题。它会在对SSD进行磁盘检查时破坏文件系统，因此Windows 10无法在重新启动后启动。以下是有关该问题和受影响的Windows 10版本的一些信息。</p><p>   I’ve been contacted by several German blog readers by email and via comments within my German blog (thanks for that). They all pointing to a strange bug, obviously brought to systems with cumulative update KB4592438.</p><p>   几个德国博客读者已经通过电子邮件和我的德国博客中的评论与我联系（谢谢）。他们都指出了一个奇怪的错误，显然是带到累积更新KB4592438的系统上。</p><p>  The problem was initially described by Nero24 in the German  planet3dnow.de forum (the affected person contacted me via email). In a school, several systems with Windows 10 20H2 already installed should be manually updates to the current update status (Windows and Office updates). The administrator, who did the manual update install, decided to execute the following command after finishing the update installation:</p><p>  该问题最初是由Nero24在德国planet3dnow.de论坛中描述的（受影响的人通过电子邮件与我联系）。在学校中，应手动将已安装Windows 10 20H2的多个系统更新为当前更新状态（Windows和Office更新）。进行手动更新安装的管理员决定在完成更新安装后执行以下命令：</p><p>  The intension is to check the Windows drive for damage and (with the /f switch) immediately perform a repair. In the scenario described above, things went very badly wrong. The affected person had seven systems, that can no longer boot after the file system check including repair. The guy was able to prevent the re-boot from the other computers, after the seventh machine failed.</p><p>  目的是检查Windows驱动器是否损坏，并（使用/ f开关）立即进行维修。在上述情况下，情况非常严重。受影响的人有七个系统，在检查文件系统（包括修复）后，它们将无法再启动。在第七台计算机发生故障之后，该家伙能够阻止从其他计算机重新启动。</p><p>   The blue screen shown in the screenshot above appears with the stop code NTFS File System (it shows a NTFS FILE SYSTEM stop code, see  here for an English version of the BSOD). The affected person was able to observe this on seven computers with Windows 10 20H2. When analyzing the affected disks (SSDs) on a working system, it could be determined that the logical Windows drive on the disk was detected only as a RAW partition. The /f option of chkdsk probably destroyed the NTFS file system.</p><p>   上面的屏幕快照中显示的蓝屏带有停止代码NTFS File System（它显示了NTFS FILE SYSTEM停止代码，请参阅此处以获取BSOD的英文版）。受影响的人能够在装有Windows 10 20H2的七台计算机上观察到此情况。在分析操作系统上的受影响磁盘（SSD）时，可以确定该磁盘上的逻辑Windows驱动器仅被检测为RAW分区。 chkdsk的/ f选项可能破坏了NTFS文件系统。</p><p> Further analysis of the RAW partition with chkdsk in offline mode revealed errors with a corrupted ‘file 9’ and an error in the  BITMAP attribute of the Master File Table. These could be corrected with chkdsk in offline mode. After that, the systems booted again after installing the SSD as a Windows disk in the original PCs.</p><p> 在离线模式下使用chkdsk对RAW分区进行的进一步分析显示，“文件9”已损坏，并且主文件表的BITMAP属性存在错误。可以使用chkdsk在脱机模式下纠正这些问题。之后，在原始PC中将SSD作为Windows磁盘安装后，系统再次启动。</p><p>  In the planet3dnow.de forum, the affected person gives some characteristics of the affected devices. Here is the relevant excerpt:</p><p>  在planet3dnow.de论坛中，受影响的人提供了受影响设备的某些特征。以下是相关摘录： </p><p> They are all Kaveri systems with ASUS A68HM-PLUS motherboard and Kingston SATA SSD running in AHCI mode with the Windows standard AHCI driver. At first I suspected a faulty TRIM behavior in combination with chkdsk and the fact that the system reboots immediately after completion.</p><p>它们都是带有ASUS A68HM-PLUS主板和以Windows标准AHCI驱动程序在AHCI模式下运行的Kingston SATA SSD的Kaveri系统。起初，我怀疑与chkdsk结合使用时，TRIM行为有问题，并且系统完成后立即重新启动。</p><p> But they are not identical SSDs. Most are Kingston A400s with Phison S11 controllers and 2D TLC NANDs, but there was also a Kingston V300 with Sandforce controller and MLC NANDs, which certainly has a completely different TRIM behavior than the Phison-fired ones.</p><p> 但是它们不是完全相同的SSD。大多数是带有Phison S11控制器和2D TLC NAND的金士顿A400，但也有带有Sandforce控制器和MLC NAND的金士顿V300，它的确具有与使用Phison发射的TRIM完全不同的TRIM行为。</p><p> Whether the hardware has an influence is currently unclear. Within my German blog a user reported, that the error didn’t occur on two systems with hard disks, but a 3rd system with a M2.SSD caused the BSOD as expected. The case was summarized on German site planet3dnow.de in  this article. There, the affected person writes that it affects build 19042.685 of Windows 10 20H2. The cumulative update  KB4592438 should be the culprit. The blog reader wrote to me:</p><p> 目前尚不清楚硬件是否有影响。一位用户在我的德语博客中报告说，在两个装有硬盘的系统上均未发生该错误，但是在第三个装有M2.SSD的系统上却出现了BSOD异常。本文在德国站点planet3dnow.de上汇总了此案。那里，受影响的人写道，它影响了Windows 10 20H2的内部版本19042.685。累积更新KB4592438应该是罪魁祸首。博客读者写信给我：</p><p> Have you heard anything similar from your community in this regard? In the forum thread above, we were able to narrow it down quite well where it occurs and where not, but I would still be interested in external observations.</p><p> 您是否从社区听到过类似的消息？在上面的论坛线程中，我们能够很好地将其缩小到发生的位置，而没有发生的位置，但是我仍然会对外部观察感兴趣。</p><p> After publishing the German edition of this blog post, several blog readers confirmed this bug. If you have further insights, please drop a comment. I will try to forward a link to this blog post to Microsoft’s developers.</p><p> 在发布此博客文章的德语版后，几位博客读者确认了此错误。如果您有进一步的见解，请发表评论。我将尝试将此博客文章的链接转发给Microsoft的开发人员。</p><p>  This entry was posted in  issue,  Windows and tagged  issue,  KB4592438,  Update,  Windows 10 20H2. Bookmark the  permalink.</p><p>  此条目已发布在Windows，已标记问题，KB4592438，更新，Windows 10 20H2中。为永久链接添加书签。 </p></div><div id="story_share_this"><div class="sharethis-inline-share-buttons"></div></div><div class="text-break sotry_link page_narrow"><a target="_blank" href="https://borncity.com/win/2020/12/18/windows-10-20h2-chkdsk-damages-file-system-on-ssds-with-update-kb4592438-installed/">https://borncity.com/win/2020/12/18/windows-10-20h2-chkdsk-damages-file-system-on-ssds-with-update-kb4592438-installed/</a></div><div class="story_tags page_narrow"><button type="button" class="btn btn-light my_tag"><a href="/tag/windows/">#windows</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/kb4592438/">#kb4592438</a></button></div></div><div class="my_movie_list_item shadow p-3 mb-5 bg-white rounded"><button type="button" class="btn btn-link my_tag"><a href="/tag/web2.0/">#web2.0</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/google/">#google</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/设计/">#设计</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/创意/">#创意</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/摄影/">#摄影</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/游戏/">#游戏</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/图片/">#图片</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/软件/">#软件</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/视频/">#视频</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/广告/">#广告</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/手机/">#手机</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/iphone/">#iphone</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/网站/">#网站</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/免费/">#免费</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/下载/">#下载</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/windows/">#windows</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/苹果/">#苹果</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/微软/">#微软</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/apple/">#apple</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/firefox/">#firefox</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/blog/">#blog</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/音乐/">#音乐</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/博客/">#博客</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/wordpress/">#wordpress</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/恶搞/">#恶搞</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/qq/">#qq</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/艺术/">#艺术</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/web/">#web</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/工具/">#工具</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/分享/">#分享</a></button></div></div></div><div id="my_footer"><div class=""><a href="/tags/">tags</a> <a href="/users/">users</a></div>&copy; 2020 diglog.com </div></div></body></html>