<!doctype html><html lang="zh-hans"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>自动缓解754M PPS DDoS攻击</title><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"><link rel="stylesheet" href="/img/css.css?random="><link data-rh="true" rel="icon" href="/img/favicon.ico"/><script data-ad-client="ca-pub-6067137220025946" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script type="text/javascript" src="https://platform-api.sharethis.com/js/sharethis.js#property=5effb96910009800120b8d4d&product=inline-share-buttons" async="async"></script>
<script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?03c1a0f31299b4a2fbb83c34d6beaac9";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script></head><body><div id="my_header"><div class="container"><nav class="navbar navbar-expand-lg"><a class="navbar-brand" href="/"><img alt="diglog" src="/img/logo.v1.gif" class="rounded-sm"></a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarNavAltMarkup"><div class="navbar-nav"></div></div></nav></div></div><div class="container"><div id="my_content"><h1 class="page_narrow">自动缓解754M PPS DDoS攻击</h1><div class="row"><div class="col-lg-12 col-12"><div class="my_story_list_item shadow p-3 mb-5 bg-white rounded"><div class="story_page_pub_time page_narrow">2020-07-10 01:07:20</div><div class="story_img_container"><a href="http://img.diglog.com/img/2020/7/b40c59ca729e59c31b208503a09764d6.png"><img src="http://img.diglog.com/img/2020/7/b40c59ca729e59c31b208503a09764d6.png" class="img-fluid my_story_img" onerror="this.style.display='none'"></a></div><div class="page_narrow text-break page_content"><p>6月21日，Cloudflare自动缓解了峰值为7.54亿个数据包/秒的大容量DDoS攻击。这次攻击是从6月18日开始到6月21日结束的一项为期四天的有组织活动的一部分：攻击流量从超过316,000个IP地址发送到一个Cloudflare IP地址，该地址主要用于我们免费计划中的网站。攻击期间没有停机或服务降级的报告，由于我们的非计量式缓解保证，也没有向客户收取任何费用。</p><p>该攻击由我们的全球DDoS检测和缓解系统Gatebot自动检测和处理，无需我们的团队进行任何人工干预。值得注意的是，因为我们的自动化系统能够在没有问题的情况下缓解攻击，所以没有向我们的待命团队发送警报或页面，也没有任何人工参与。</p><p>在这四天里，攻击利用了TCP协议上的三个攻击载体的组合：SYN洪水、ACK洪水和SYN-ACK洪水。攻击活动持续了几个小时，速率超过每秒4亿-6亿个数据包，并多次达到7亿个数据包/秒以上的峰值，最高峰值为7.54亿个数据包/秒。尽管数据包速率高且持续，但我们的edge在攻击期间继续为我们的客户提供服务，而不会对性能造成任何影响。</p><p>每秒比特率较高的攻击旨在通过每秒发送的带宽超过链路所能处理的带宽来使Internet链路饱和。缓解稍微密集的洪水类似于大坝在能力有限的运河中阻挡喷涌的水，只允许一部分水通过。</p><p>在这种情况下，互联网服务提供商可能会阻止或限制超过允许的流量，从而导致试图连接到网站但被服务提供商阻止的合法用户拒绝服务。在其他情况下，链接只是饱和，该连接后面的所有内容都是离线的。</p><p>然而，在这场DDoS战役中，攻击的峰值仅为250Gbps(我是说，仅仅是250Gbps，但如果不是在一些DDoS缓解服务背后，25Tbps就足以使几乎任何东西下线)，所以看起来攻击者并不是有意使我们的互联网链路饱和，可能是因为他们知道我们的全球容量超过了37Tbps。相反，攻击者似乎试图(但失败了)用高达每秒7.54亿个数据包的高数据包速率来攻击我们的路由器和数据中心设备。与冲向大坝的水不同，大量的包裹可以被认为是数百万只蚊子的蜂群，你需要一个接一个地消灭它们。</p><p>根据数据中心中的“最弱链路”，数据包密集型DDoS攻击可能会影响路由器、交换机、Web服务器、防火墙、DDoS缓解设备或任何其他串联使用的设备。通常，较高的数据包速率可能会导致内存缓冲区溢出，从而使路由器无法处理其他数据包。这是因为处理每个数据包需要很小的固定CPU成本，所以如果您可以发送很多小数据包，您就可以阻止Internet连接，不是通过填充它，而是通过使处理连接的硬件不堪重负。</p><p>另一种形式的DDoS攻击是每秒高HTTP请求率的攻击。HTTP请求密集型DDoS攻击旨在通过每秒超过服务器处理能力的HTTP请求来淹没Web服务器的资源。每秒请求率高的DDoS攻击的目标是最大限度地提高服务器的CPU和内存利用率，以使其崩溃或阻止其响应合法请求。请求密集型DDoS攻击允许攻击者生成更少的带宽，而不是位密集型攻击，并且仍然会导致拒绝服务。</p><p>那么我们是如何处理每秒7.54亿个数据包的呢？首先，Cloudflare的网络利用BGP Anycast在我们的数据中心机队中传播全球攻击流量。其次，我们构建了自己的DDoS保护系统，Gatebot和Dosd，它们在Linux内核内丢弃数据包，以最大限度地提高效率，以便处理大量数据包泛滥。第三，我们构建了自己的L4负载均衡器Unimog，它使用我们的设备运行状况和其他各种指标来智能地平衡数据中心内的流量。</p><p>2017年，我们发布了一个博客，介绍了我们的两个DDoS保护系统之一的Gatebot。这个博客的标题是Meet Gatebot-一个可以让我们睡觉的机器人，而这正是这次攻击期间发生的事情。我们的Anycast将攻击面扩展到全球，然后Gatebot在没有人工干预的情况下自动检测并缓解攻击。每个数据中心内的流量都实现了智能负载平衡，以避免使任何一台机器不堪重负。正如博客标题中承诺的那样，攻击高峰实际上发生在我们的伦敦团队睡着的时候。</p><p>那么Gatebot是如何工作的呢？Gatebot对我们在全球200多个地点的每个数据中心的流量进行异步采样。它还可以监控我们客户的源站健康状况。然后，它分析样本以识别可以指示攻击的模式和流量异常。一旦检测到攻击，Gatebot会向边缘数据中心发送缓解指令。</p><p>为了补充Gatebot，去年我们发布了代号为DOSD(拒绝服务守护程序)的新系统，该系统在全球200多个城市的每个数据中心运行。与Gatebot类似，DOSD在单个服务器或数据中心的范围内自主检测并减轻攻击。您可以在我们最近的博客中阅读更多关于DOSD的内容。</p><p>虽然近几个月我们观察到DDoS攻击的规模和持续时间有所减少，但像这样的高度大规模和全球分布的DDoS攻击仍然存在。无论攻击的规模、类型或复杂程度如何，Cloudflare都可以为所有客户和计划级别(包括免费计划)提供非计量DDoS保护。</p><p>DDoS安全Gatebot攻击SYN</p></div><div id="story_share_this"><div class="sharethis-inline-share-buttons"></div></div><div class="text-break sotry_link page_narrow"><a target="_blank" href="https://blog.cloudflare.com/mitigating-a-754-million-pps-ddos-attack-automatically/">https://blog.cloudflare.com/mitigating-a-754-million-pps-ddos-attack-automatically/</a></div><div class="story_tags page_narrow"><button type="button" class="btn btn-light my_tag"><a href="/tag/ddos/">#ddos</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/攻击/">#攻击</a></button></div></div><div class="my_movie_list_item shadow p-3 mb-5 bg-white rounded"><button type="button" class="btn btn-link my_tag"><a href="/tag/web2.0/">#web2.0</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/google/">#google</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/设计/">#设计</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/创意/">#创意</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/摄影/">#摄影</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/游戏/">#游戏</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/图片/">#图片</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/软件/">#软件</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/视频/">#视频</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/手机/">#手机</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/广告/">#广告</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/apple/">#apple</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/iphone/">#iphone</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/网站/">#网站</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/免费/">#免费</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/下载/">#下载</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/windows/">#windows</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/微软/">#微软</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/firefox/">#firefox</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/苹果/">#苹果</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/blog/">#blog</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/音乐/">#音乐</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/博客/">#博客</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/wordpress/">#wordpress</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/恶搞/">#恶搞</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/艺术/">#艺术</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/qq/">#qq</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/web/">#web</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/谷歌/">#谷歌</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/工具/">#工具</a></button></div></div></div><div id="my_footer"><div class=""><a href="/tags/">tags</a> <a href="/users/">users</a></div>&copy;2012-2021 diglog.com </div></div></body></html>