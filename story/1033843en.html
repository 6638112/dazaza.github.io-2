<!doctype html><html lang="zh-hans"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Sintert：用SWIFT编写的适用于MacOS的用户态应用程序授权系统</title><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"><link rel="stylesheet" href="/img/css.css?random="><link data-rh="true" rel="icon" href="/img/favicon.ico"/><script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?03c1a0f31299b4a2fbb83c34d6beaac9";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script><script data-ad-client="ca-pub-6067137220025946" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script type="text/javascript" src="https://platform-api.sharethis.com/js/sharethis.js#property=5effb96910009800120b8d4d&product=inline-share-buttons" async="async"></script></head><body><div id="my_header"><div class="container"><nav class="navbar navbar-expand-lg"><a class="navbar-brand" href="/"><img alt="diglog" src="/img/logo.v1.gif" class="rounded-sm"></a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarNavAltMarkup"><div class="navbar-nav"></div></div></nav></div></div><div class="container"><div id="my_content"><h1 class="page_narrow">Sintert：用SWIFT编写的适用于MacOS的用户态应用程序授权系统</h1><div class="row"><div class="col-lg-12 col-12"><div class="my_story_list_item shadow p-3 mb-5 bg-white rounded"><div class="story_page_pub_time page_narrow">2020-11-08 20:20:21</div><div class="story_img_container"><a href="http://img2.diglog.com/img/2020/11/aa61ee6d247de527fb0441f6f9334bd7.jpeg"><img src="http://img2.diglog.com/img/2020/11/aa61ee6d247de527fb0441f6f9334bd7.jpeg" class="img-fluid my_story_img" onerror="this.style.display='none'"></a></div><div class="page_narrow text-break page_content"><p>Sinter is a 100% user-mode endpoint security agent for macOS 10.15 and above, written in Swift.</p><p>Sintert是适用于MacOS 10.15及更高版本的100%用户模式终端安全代理，使用SWIFT编写。</p><p> Sinter uses the user-mode EndpointSecurity API to subscribe to and receive authorization callbacks from the macOS kernel, for a set of security-relevant event types. The current version of Sinter supports allowing/denying process executions; in future versions we intend to support other types of events such as file, socket, and kernel events.</p><p>Sinterer使用用户模式EndpointSecurity API订阅一组与安全相关的事件类型，并从MacOS内核接收授权回调。Sinter当前版本支持允许/拒绝进程执行；在未来版本中，我们打算支持其他类型的事件，如文件、套接字和内核事件。</p><p> Sinter is a work-in-progress. Feedback is welcome. If you are interested in contributing or sponsoring us to help achieve its potential,  let&#39;s get in touch.</p><p>烧结机是一项正在进行中的工作。欢迎反馈。如果您有兴趣贡献或赞助我们，以帮助实现其潜力，让我们联系。</p><p>      Does not use kernel extensions (which will be officially deprecated in macOS 11 Big Sur)</p><p>不使用内核扩展(MacOS 11 Big Sur将正式弃用内核扩展)。</p><p>    Not an anti-malware or anti-virus. No signature database. Denies only what you tell it to deny, using rules.</p><p>不是反恶意软件或反病毒软件。没有签名数据库。使用规则，只拒绝你告诉它拒绝的内容。</p><p>  The first open-source macOS solution for allowing/denying processes was  Google Santa. We&#39;re fans of Santa, and  have contributed to its codebase in the past. For a long time, however, many in the macOS community have asked for an open-source solution to track and manage  more than just process events.</p><p>第一个允许/拒绝进程的开源MacOS解决方案是Google Santa。我们都是圣诞老人的粉丝，并在过去为其代码库做出了贡献。然而，很长一段时间以来，MacOS社区中的许多人都要求使用开源解决方案来跟踪和管理事件，而不仅仅是流程事件。</p><p> We saw the ideal platform to build such a capability with the EndpointSecurity API in macOS 10.15. Starting from the ground-up around a strictly user-mode API meant that we could attempt a simpler design, and use a modern programming language with safer memory handling and  better performance. Thus, we set out to develop Sinter, short for &#34;Sinter Klausen,&#34; another name for Santa Claus.</p><p>我们看到了使用MacOS10.15中的EndpointSecurity API构建此类功能的理想平台。从头开始使用严格的用户模式API意味着我们可以尝试更简单的设计，并使用内存处理更安全、性能更好的现代编程语言。因此，我们开始开发Sintert，它是SinterKlausen的缩写，是圣诞老人的另一个名字。</p><p>  Download and install the latest version of Sinter using the  pkg installer link from the  Releases page.</p><p>使用Pkg Installer链接从Releases页面下载并安装最新版本的Sinter.</p><p> After installing Sinter, you must enable the &#34;Full Disk Access&#34; permission for  Sinter.app. Do this by opening System Preferences, Security, Privacy tab, Full Disk Access. Check the item for  Sinter.app. If using MDM, you can automatically enable this permission on your endpoints, and no user interaction will be required.</p><p>安装Sinter.app后，您必须启用Sinter.app的完全磁盘访问权限。要执行此操作，请打开系统首选项、安全性、隐私选项卡、全磁盘访问权限。检查Sinter.app的项目。如果使用MDM，您可以在终端上自动启用此权限，无需用户交互。</p><p>  Sinter requires a configuration file to be present at  /etc/sinter/config.json. An example is provided in the source tree at  ./config/config.json:</p><p>Sintert要求/etc/sinter/config.json中有一个配置文件。源代码树中的./config/config.json中提供了一个示例：</p><p> {   &#34;Sinter &#34;: {   &#34;decision_manager &#34;:   &#34;local &#34;,   &#34;logger &#34;:   &#34;filesystem &#34;,   &#34;allow_unsigned_programs &#34;:   &#34;true &#34;,   &#34;allow_invalid_programs &#34;:   &#34;true &#34;,   &#34;allow_unknown_programs &#34;:   &#34;true &#34;,   &#34;allow_expired_auth_requests &#34;:   &#34;true &#34;,   &#34;allow_misplaced_applications &#34;:   &#34;true &#34;,   &#34;config_update_interval &#34;:  600,   &#34;allowed_application_directories &#34;: [   &#34;/bin &#34;,   &#34;/usr/bin &#34;,   &#34;/usr/local/bin &#34;,   &#34;/Applications &#34;,   &#34;/System &#34;,   &#34;/usr/sbin &#34;,   &#34;/usr/libexec &#34;, ], },   &#34;FilesystemLogger &#34;: {   &#34;log_file_path &#34;:   &#34;/var/log/sinter.log &#34;, },   &#34;RemoteDecisionManager &#34;: {   &#34;server_url &#34;:   &#34;https://server_address:port &#34;,   &#34;machine_identifier &#34;:   &#34;identifier &#34;, },   &#34;LocalDecisionManager &#34;: {   &#34;rule_database_path &#34;:   &#34;/etc/sinter/rules.json &#34;, }}</p><p>{&#34；Sinter&#34；：{&#34；Decision_MANAGER&#34；：&#34；LOCAL&#34；，&#34；LOGGER&#34；：&#34；FileSystem&#34；，&#34；ALLOW_UNSIGNED_PROGRAM&#34；：&#34；TRUE&#34；，&#34；ALLOW_INVALID_PROGRAM&#34；：&#34；TRUE&#34；，&#34；ALLOW_UNKNOWN_PROGRAM&#34；：&#34；TRUE&#34；，&#34；ALLOW_EXPIRED_AUTH_REQUESTS&#34；：&#34；TRUE&#34；ALLOW_MISPLAGE_APPLICATIONS&#34；：：&#34；TRUE&#34；，&#34；CONFIG_UPDATE_INTERVAL&#34；：600，&#34；ALLOW_APPLICATION_DIRECTORIES&#34；：[&#34；/bin&#34；，&#34；/usr/bin&#34；，&#34；/usr/local/bin&#34；，&#34；/Applications&#34；，&#34；/system&#34；，&#34；/usr/sbin&#34；，&#34；/usr/libexec&#34；，，]，}，&#34；FilesemLogger&#34；：{&#34；log_file_path&#34；：&。/var/LOG/Stered.log&#34；，}，&#34；远程决策管理器&#34；：{&#34；SERVER_URL&#34；：&#34；https://server_address:port&#34；，&#34；MACHINE_IDENTIFIER&#34；：&#34；IDENTIFIER&#34；，}，&#34；本地决策管理器&#34；：{&#34；RULE_DATABASE_PATH&#34；：&#34；/etc/sinter/rules.json&#34；，}}。</p><p> The decision manager plugin can be selected by changing the  decision_manager value. The  local plugin will enable the  LocalDecisionManager configuration section, pointing Sinter to use the local rule database present at the given path. It is possible to use a Santa-compatible sync-server, by using the  sync-server plugin instead. This enables the  RemoteDecisionManager configuration section, where the server URL and machine identifier can be set.</p><p>可以通过更改Decision_Manager值来选择决策管理器插件。本地插件将启用LocalDecisionManager配置节，指示Sintert使用位于给定路径的本地规则数据库。通过使用同步服务器插件，可以使用与圣诞老人兼容的同步服务器。这将启用RemoteDecisionManager配置节，可以在其中设置服务器URL和计算机标识符。</p><p>    It is possible to configure Sinter to log and optionally deny applications that have not been started from an allowed folder.</p><p>可以将烧结器配置为记录并选择性地拒绝尚未从允许的文件夹启动的应用程序。</p><p> allow_misplaced_applications: If set to true, misplaced applications will only generate a warning. If set to false, any execution that does not starts from a valid path is denied.</p><p>ALLOW_MISPLAGE_APPLICATIONS：如果设置为TRUE，则放错位置的应用程序只会生成警告。如果设置为False，则拒绝任何不是从有效路径开始的执行。</p><p> allowed_application_directories: If non-empty, it will be used to determine if applications are placed in the wrong folder.</p><p>ALLOW_APPLICATION_DIRECTORIES：如果非空，将用于确定应用程序是否放在错误的文件夹中。</p><p>    Modes are not implemented in Sinter, as everything is rule-based. It is possible to implement the monitoring functionality by tweaking the following settings:</p><p>模式不在烧结机中实现，因为一切都是基于规则的。可以通过调整以下设置来实现监控功能：</p><p> allow_expired_auth_requests: the EndpointSecurity API requires Sinter to answer to an authorization requests within an unspecified time frame (typically, less than a minute). Large applications, such as Xcode, will take a considerable amount of time to verify. Those executions are denied by default, and the user is expected to try again once the application has been verified. Setting this configuration to true changes this behavior so that those requests are always allowed.</p><p>ALLOW_EXPIRED_AUTH_REQUESTS：EndpointSecurity API要求Sintert在未指定的时间范围内(通常不到一分钟)响应授权请求。大型应用程序(如Xcode)将需要相当长的时间进行验证。默认情况下，这些执行被拒绝，一旦应用程序通过验证，用户应该重试。将此配置设置为TRUE会更改此行为，以便始终允许这些请求。</p><p>  Rule databases are written in JSON format. Here&#39;s an example database that allows the CMake application bundle from cmake.org:</p><p>规则数据库以JSON格式编写。下面是一个示例数据库，它允许来自cmake.org的CMake应用程序包：</p><p>  Sinter only supports  BINARY rules for now, using either  ALLOWLIST or  DENYLIST policies. The code directory hash value can be taken from the  codesign tool output (example:  codesign -dvvv /Applications/CMake.app). Note that even though the CLI tools can acquire the full SHA256 hash, the Kernel/EndpointSecurity API is limited to the first 20 bytes.</p><p>Sinter目前只支持二进制规则，使用ALLOWLIST或DENYLIST策略。代码目录散列值可以从CoDesign工具输出中获取(例如：CoDesign-dvvv/Applications/CMake.app)。请注意，尽管CLI工具可以获取完整的SHA256散列，但内核/EndpointSecurity API仅限于前20个字节。</p><p>  Building Sinter requires certain code-signing certificates and entitlements that Apple must grant your organization. However, Sinter can still be built from source and run locally on a test system with SIP disabled. For instructions, see the  Sinter wiki.</p><p>构建烧结机需要一定的代码签名证书和权利，苹果必须授予您的组织这些证书和权利。但是，在禁用了SIP的情况下，仍可以从源代码构建Sintert，并在测试系统上本地运行它。有关说明，请参阅SinterWiki。</p><p>  Sinter is licensed and distributed under the AGPLv3 license.  Contact us if you&#39;re looking for an exception to the terms.</p><p>烧结机是在AGPLv3许可下授权和分发的。如果您正在寻找条款的例外情况，请与我们联系。</p></div><div id="story_share_this"><div class="sharethis-inline-share-buttons"></div></div><div class="text-break sotry_link page_narrow"><a target="_blank" href="https://github.com/trailofbits/sinter">https://github.com/trailofbits/sinter</a></div><div class="story_tags page_narrow"><button type="button" class="btn btn-light my_tag"><a href="/tag/程序/">#程序</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/swift/">#swift</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/user/">#user</a></button></div></div><div class="shadow p-3 mb-5 bg-white rounded clearfix"><div class="container"><div class="row"><div class="col-sm"><div><a target="_blank" href="/story/1033802.html"><img src="http://img2.diglog.com/img/2020/11/thumb_dc1fad55ea711afc952976f650d78b78.jpeg" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1033802.html">WinApps：在Linux上运行Windows应用程序，就像它们是原生操作系统的一部分一样</a></div><span class="my_story_list_date">2020-11-8 12:57</span></div><div class="col-sm"><div><a target="_blank" href="/story/1033720.html"><img src="http://img2.diglog.com/img/2020/11/thumb_bba3eb5c8d73b959a4615157fb01dd65.png" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1033720.html">FBI警告称黑客滥用错误配置的SonarQube应用程序从美国政府机构和私人企业窃取源代码仓库</a></div><span class="my_story_list_date">2020-11-8 8:44</span></div><div class="col-sm"><div><a target="_blank" href="/story/1033666.html"><img src="http://img2.diglog.com/img/2020/11/thumb_9222b5228a7e2dd43e62006225cc6c4a.jpg" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1033666.html">Google Photos应用程序中的代码显示，Google将为Google One订户添加新的编辑功能和过滤器</a></div><span class="my_story_list_date">2020-11-7 14:19</span></div><div class="col-sm"><div><a target="_blank" href="/story/1033589.html"><img src="http://img2.diglog.com/img/2020/11/thumb_1e0f11882745c8238e22fe0c5107e4ea.jpg" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1033589.html">使用Syzkaller模糊Linux驱动程序</a></div><span class="my_story_list_date">2020-11-7 11:6</span></div></div></div></div><div class="my_movie_list_item shadow p-3 mb-5 bg-white rounded"><button type="button" class="btn btn-link my_tag"><a href="/tag/web2.0/">#web2.0</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/google/">#google</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/设计/">#设计</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/游戏/">#游戏</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/创意/">#创意</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/apple/">#apple</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/苹果/">#苹果</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/摄影/">#摄影</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/软件/">#软件</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/美国/">#美国</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/iphone/">#iphone</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/图片/">#图片</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/手机/">#手机</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/视频/">#视频</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/广告/">#广告</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/免费/">#免费</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/谷歌/">#谷歌</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/网站/">#网站</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/windows/">#windows</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/微软/">#微软</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/下载/">#下载</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/firefox/">#firefox</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/音乐/">#音乐</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/linux/">#linux</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/blog/">#blog</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/博客/">#博客</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/程序/">#程序</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/艺术/">#艺术</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/web/">#web</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/wordpress/">#wordpress</a></button></div></div></div><div id="my_footer"><div class=""><a href="/tags/">tags</a> <a href="/users/">users</a></div>&copy; 2020 diglog.com </div></div></body></html>