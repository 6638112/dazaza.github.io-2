<!doctype html><html lang="zh-hans"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Raspberry Pi OS添加了Microsoft回购。 不，这不是邪恶的秘密 Raspberry Pi OS added a Microsoft repo. No, it’s not an evil secret</title><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"><link rel="stylesheet" href="/img/css.css?random="><link data-rh="true" rel="icon" href="/img/favicon.ico"/><script data-ad-client="ca-pub-6067137220025946" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script type="text/javascript" src="https://platform-api.sharethis.com/js/sharethis.js#property=5effb96910009800120b8d4d&product=inline-share-buttons" async="async"></script>
<script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?03c1a0f31299b4a2fbb83c34d6beaac9";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script></head><body><div id="my_header"><div class="container"><nav class="navbar navbar-expand-lg"><a class="navbar-brand" href="/"><img alt="diglog" src="/img/logo.v1.gif" class="rounded-sm"></a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarNavAltMarkup"><div class="navbar-nav"></div></div></nav></div></div><div class="container"><div id="my_content"><h1 class="page_narrow">Raspberry Pi OS added a Microsoft repo. No, it’s not an evil secret<br/>Raspberry Pi OS添加了Microsoft回购。 不，这不是邪恶的秘密 </h1><div class="row"><div class="col-lg-12 col-12"><div class="my_story_list_item shadow p-3 mb-5 bg-white rounded"><div class="story_page_pub_time page_narrow">2021-02-09 21:14:02</div><div class="story_img_container"><a href="http://img2.diglog.com/img/2021/2/2878a3683d2dfc0125a8a223daba6d54.png"><img src="http://img2.diglog.com/img/2021/2/2878a3683d2dfc0125a8a223daba6d54.png" class="img-fluid my_story_img" onerror="this.style.display='none'"></a></div><div class="page_narrow text-break page_content"><p>We were recently alerted to something of a tempest in a teapot: when the Raspberry Pi Foundation made it easier to install Microsoft&#39;s Visual Studio Code development environment, some Linux users mistook it for a sort of Mark of the Beast, with concerns being  raised about telemetry and &#34;what Microsoft repo secretly installed without your knowledge.&#34;</p><p>最近，我们收到警告，茶壶里发生了暴风雨：当Raspberry Pi Foundation使安装Microsoft的Visual Studio Code开发环境变得更加容易时，一些Linux用户将其误认为是野兽标记，关于遥测以及Microsoft不知情地秘密安装了什么回购协议。</p><p> It&#39;s true that an update recently pushed to Raspberry Pi OS added a Microsoft repo to Raspberry Pi OS systems—but it&#39;s not true that it added any actual packages whatsoever.</p><p> 确实，最近推送到Raspberry Pi OS的更新将Microsoft存储库添加到Raspberry Pi OS系统，但事实并非如此，它添加了任何实际的软件包。</p><p>   Luckily, my own Raspberry Pi 400 was running Ubuntu, not Raspberry Pi OS, which made it easy to switch back to see what changes occurred in the system. Equally luckily, the Raspberry Pi 400 is almost ideally suited to distro-hopping—all I needed to do to get a pre-update version of Pi OS running was to power my Pi off, swap SD cards from the Ubuntu card I had been using to my old Pi OS card, and then fire it back up. Presto, a pre-update Pi!</p><p>   幸运的是，我自己的Raspberry Pi 400运行的是Ubuntu，而不是Raspberry Pi OS，这使得切换回查看系统中发生的更改变得很容易。同样幸运的是，Raspberry Pi 400几乎非常适合于分散发行版-要运行Pi OS的预更新版本，我需要做的就是关闭我的Pi电源，从我一直使用的Ubuntu卡中交换SD卡到我的旧Pi OS卡，然后重新启动。 Presto，一个预先更新的Pi！</p><p> Next, I made a copy of the entire  /etc/apt/ directory on my Pi 400, with  tar czvf ~/aptbackup.tar.gz /etc/apt. With backup in place, I did  apt update ; apt upgrade -y to apply all the upgrades to my system that it had missed since it was last running Pi OS.</p><p> 接下来，我用tar czvf〜/ aptbackup.tar.gz / etc / apt复制了Pi 400上整个/ etc / apt /目录。备份到位后，我进行了apt更新； apt upgrade -y将自上次运行Pi OS以来遗漏的所有升级应用于我的系统。</p><p> To make a long story short, the only change to my package management was the addition of a single file,  /etc/apt/sources.list.d/vscode.list. That file added a single repository to my sources:  http://packages.microsoft.com/repos/code, with branches  stable and  main. If we look at the actual content of  http://packages.microsoft.com/repos/code, we can see it only contains three packages:  code,  code-exploration, and  code-insiders.</p><p> 长话短说，对我的软件包管理的唯一更改是添加了一个文件/etc/apt/sources.list.d/vscode.list。该文件向我的来源添加了一个存储库：http://packages.microsoft.com/repos/code，分支稳定且主要。如果我们查看http://packages.microsoft.com/repos/code的实际内容，我们可以看到它仅包含三个程序包：代码，代码探索和代码内幕程序。</p><p>    Finally, performing  apt policy code confirms that Visual Studio Code was not actually installed on my system—it&#39;s just  easier to install (and update!) now, since its parent repository is part of my sources list, along with the GPG code verifying the contents of that repository.</p><p>    最后，执行适当的策略代码确认Visual Studio Code并未实际安装在我的系统上-现在更容易安装（和更新！），因为其父存储库与GPG一起是我的源列表的一部分验证该存储库内容的代码。</p><p>  Prior to the Pi Foundation adding Microsoft&#39;s repo for Visual Studio Code to the list,  installing that IDE required some extra, and rather non-Linux-y, steps. You needed to open up a Web browser, go to the Visual Studio Code  download page, and navigate a few more minor hurdles—for example, you need to know that your system wants  deb files and not  rpm, that your Pi needs ARM architecture packages, and finally whether those packages should be  ARM or  ARM64 (which is different for different models of Pi).</p><p>  在Pi Foundation将Microsoft的Visual Studio代码仓库添加到列表中之前，安装该IDE需要一些额外的步骤，而不是非Linux的步骤。您需要打开Web浏览器，转到Visual Studio Code下载页面，并浏览其他一些小障碍-例如，您需要知道系统需要的是deb文件而不是rpm，您的Pi需要ARM体系结构软件包，最后是这些软件包是ARM还是ARM64（对于不同型号的Pi，这是不同的）。 </p><p> Once you had downloaded the hopefully correct version of the Visual Studio Code package, you then needed to locate the downloaded package and execute it—typically, by finding it in File Manager and double-clicking it. Once that was done, you&#39;d need to authenticate as a privileged user, and finally the package (and its dependencies) would begin to download and install themselves on your Pi.</p><p>一旦下载了希望正确的Visual Studio Code程序包版本，然后就需要找到下载的程序包并执行它（通常是在文件管理器中找到它，然后双击它）。完成此操作后，您需要以特权用户身份进行身份验证，最后，程序包（及其依赖项）将开始在Pi上自行下载并安装。</p><p> By contrast, now that the  code repo (and its GPG key) are installed on the system, a user can simply  sudo apt install code. This is a more Unix-like way to do things, it&#39;s considerably simpler, and it can be far more easily performed without a GUI available as well.</p><p> 相比之下，既然代码repo（及其GPG密钥）已安装在系统上，则用户只需将sudo apt安装代码即可。这是一种更类似于Unix的处理方式，它相当简单，而且在没有GUI的情况下也可以轻松执行。</p><p> We can already hear some users grumbling that it wasn&#39;t that hard to install VS Code the old way—and to them, we&#39;d like to point out that the primary purpose of the Raspberry Pi foundation isn&#39;t to provide advanced users with cheap toys, it&#39;s to facilitate computer education by removing roadblocks.</p><p> 我们已经可以听到一些用户抱怨说，以旧的方式安装VS Code并不困难-并且向他们指出，Raspberry Pi Foundation的主要目的不是为了向高级用户提供廉价玩具，它消除了障碍，从而促进了计算机教育。</p><p> The first of those roadblocks, arguably, was of course price—it&#39;s difficult to impossible to get a full-featured, general-purpose computing device for less than it costs to buy a Pi. But the difficulty of getting started with writing code is another of those potential roadblocks—so making it easier to install a very popular IDE is very much in line with the Pi Foundation&#39;s core mission.</p><p> 当然，这些障碍中的第一个障碍当然是价格-很难以低于购买Pi的成本获得功能齐全的通用计算设备。但是，开始编写代码的困难是这些潜在障碍中的另一个障碍-因此，使其易于安装非常流行的IDE非常符合Pi Foundation的核心使命。</p><p>  With Microsoft&#39;s repository for VS Code installed on the system, each time the system checks for updates, the server at  http://packages.microsoft.com gets queries to see if there are any changes to the packages it makes available. If you squint your eyes really tight and hold your mouth just right, you might argue that this constitutes &#34;telemetry&#34;—you touched a Microsoft server, right?</p><p>  在系统上安装了Microsoft VS Code的存储库后，每次系统检查更新时，位于http://packages.microsoft.com的服务器都会获取查询以查看其可用软件包是否有任何更改。如果您tight起眼睛并正确地张着嘴，您可能会争辩说这构成了“遥测” —您接触过Microsoft服务器，对吗？</p><p>    However, this is, in Pi founder Eben Upton&#39;s words, &#34;pretty thin gruel.&#34; The only tool touching that Web server is  apt itself, and it does not reveal anything about the user&#39;s system—it simply checks to see what&#39;s in  /repos/vscode/dists/stable and downloads the appropriate  Contents-*.gz file for your system architecture. On my Pi 400, that&#39;s  Contents-arm64.gz; on older 32-bit Pis, it would be  Contents-armhf.gz.</p><p>    但是，用Pi创始人Eben Upton的话来说，这是很薄的稀饭。唯一与该Web服务器相关的工具本身就是合适的，它不会泄露有关用户系统的任何信息-它只是检查以查看/ repos / vscode / dists / stable中的内容并下载适当的内容-*。gz文件用于您的系统架构。在我的Pi 400上，Contents-arm64.gz;在较旧的32位Pis上，应为Contents-armhf.gz。</p><p> With the Contents file downloaded,  apt then parses it to determine what package versions are available. This data informs  apt&#39;s responses to any user requests to  install a matching package name and also lets it know whether there are newer versions of  installed packages that should be downloaded and put in place after an  apt upgrade or  apt dist-upgrade command. But none of this information is leaked to Microsoft unless the user actually  has installed  code; in that case, Microsoft will know when a newer version of it is downloaded (since that, too, comes from `packages.microsoft.com`).</p><p> 下载目录文件后，apt对其进行解析以确定可用的软件包版本。此数据可告知apt对任何用户安装匹配软件包名称的请求的响应，并让其知道在apt升级或apt dist-upgrade命令之后是否应下载并安装新版本的已安装软件包。 。但是除非用户实际安装了代码，否则这些信息都不会泄露给Microsoft;在这种情况下，Microsoft将知道何时下载其较新版本（因为它也来自“ packages.microsoft.com”）。 </p><p> For the overwhelmingly paranoid, there is one further possibility: if Microsoft were to make packages available in its repo with the same names as packages in the standard  raspbian.raspberripi.org repository specified in  /etc/apt/sources.list, it could override the &#34;real&#34; system packages with others of its own making.</p><p>对于绝大多数的偏执狂，还有另一种可能性：如果Microsoft要在其回购中提供与/etc/apt/sources.list中指定的标准raspbian.raspberripi.org存储库中的软件包同名的软件包，则可以覆盖真实的系统与自己制作的其他程序一起打包。</p><p> However, that would be an incredibly obvious change on Microsoft&#39;s part—one that would be detected almost immediately after the company made it—and would effectively result in the immediate destruction of all the goodwill in the Linux community the company has spent the last  six years painstakingly building. This does not strike us as a reasonable concern.</p><p> 但是，这对Microsoft而言将是一个非常明显的变化，该变化几乎是在公司做出后立即被发现的，并且将有效地导致该公司所花费的Linux社区中的所有善意立即遭到破坏。过去的六年辛苦建设。这并不使我们感到合理的关注。</p><p>   If you&#39;ve gotten this far and you&#39;re still upset that a Microsoft repo is present on your Raspberry Pi system, you have options. The most nuclear option is to ditch Raspberry Pi OS entirely—you can always  run Ubuntu on your Pi, for one example. There are also ready-made vanilla Debian images  available for the Pi, hosted at debian.org itself. But it would be much simpler to just nerf the repository you&#39;re unhappy about in the first place. There are several ways to do that: for example, you can edit or remove the  vscode.list file itself. And if you&#39;re worried about future Pi OS updates putting that file back or undoing your change, you can add an entry to  /etc/hosts making it impossible to contact Microsoft&#39;s repository in the first place:</p><p>   如果您到此为止，但仍然对Raspberry Pi系统上存在Microsoft存储库感到不安，则可以选择。最核心的选择是完全放弃Raspberry Pi操作系统-例如，您始终可以在Pi上运行Ubuntu。在debian.org上也托管了可用于Pi的现成的香草Debian图像。但是，只需要对不满意的存储库一开始就变得更加简单。有几种方法可以这样做：例如，您可以编辑或删除vscode.list文件本身。而且，如果您担心将来的Pi OS更新会将该文件退回或撤消您的更改，则可以在/ etc / hosts中添加一个条目，从而首先无法联系Microsoft的存储库：</p><p>  Presto! If your system attempts to check Microsoft&#39;s repo, it will instead check... itself, which will then fail. Problem solved.</p><p>  快点！如果您的系统尝试检查Microsoft的存储库，它将改为检查...本身，然后将失败。问题解决了。 </p></div><div id="story_share_this"><div class="sharethis-inline-share-buttons"></div></div><div class="text-break sotry_link page_narrow"><a target="_blank" href="https://arstechnica.com/gadgets/2021/02/raspberry-pi-os-added-a-microsoft-repo-no-its-not-an-evil-secret/">https://arstechnica.com/gadgets/2021/02/raspberry-pi-os-added-a-microsoft-repo-no-its-not-an-evil-secret/</a></div><div class="story_tags page_narrow"><button type="button" class="btn btn-light my_tag"><a href="/tag/microsoft/">#microsoft</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/pi/">#pi</a></button></div></div><div class="my_movie_list_item shadow p-3 mb-5 bg-white rounded"><button type="button" class="btn btn-link my_tag"><a href="/tag/web2.0/">#web2.0</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/google/">#google</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/设计/">#设计</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/创意/">#创意</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/摄影/">#摄影</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/游戏/">#游戏</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/图片/">#图片</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/软件/">#软件</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/视频/">#视频</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/广告/">#广告</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/手机/">#手机</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/iphone/">#iphone</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/网站/">#网站</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/免费/">#免费</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/下载/">#下载</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/windows/">#windows</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/微软/">#微软</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/苹果/">#苹果</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/firefox/">#firefox</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/blog/">#blog</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/apple/">#apple</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/音乐/">#音乐</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/博客/">#博客</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/wordpress/">#wordpress</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/恶搞/">#恶搞</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/qq/">#qq</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/艺术/">#艺术</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/web/">#web</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/工具/">#工具</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/分享/">#分享</a></button></div></div></div><div id="my_footer"><div class=""><a href="/tags/">tags</a> <a href="/users/">users</a></div>&copy; 2020 diglog.com </div></div></body></html>