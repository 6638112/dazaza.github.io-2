<!doctype html><html lang="zh-hans"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>MacOS 11引导卷布局</title><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"><link rel="stylesheet" href="/img/css.css?random="><link data-rh="true" rel="icon" href="/img/favicon.ico"/><script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?03c1a0f31299b4a2fbb83c34d6beaac9";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script><script data-ad-client="ca-pub-6067137220025946" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script type="text/javascript" src="https://platform-api.sharethis.com/js/sharethis.js#property=5effb96910009800120b8d4d&product=inline-share-buttons" async="async"></script></head><body><div id="my_header"><div class="container"><nav class="navbar navbar-expand-lg"><a class="navbar-brand" href="/"><img alt="diglog" src="/img/logo.v1.gif" class="rounded-sm"></a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarNavAltMarkup"><div class="navbar-nav"></div></div></nav></div></div><div class="container"><div id="my_content"><h1 class="page_narrow">MacOS 11引导卷布局</h1><div class="row"><div class="col-lg-12 col-12"><div class="my_story_list_item shadow p-3 mb-5 bg-white rounded"><div class="story_page_pub_time page_narrow">2020-11-01 19:59:49</div><div class="story_img_container"><a href="http://img2.diglog.com/img/2020/11/4967f90f5f3f8c4c05535d38aa6156ab.jpg"><img src="http://img2.diglog.com/img/2020/11/4967f90f5f3f8c4c05535d38aa6156ab.jpg" class="img-fluid my_story_img" onerror="this.style.display='none'"></a></div><div class="page_narrow text-break page_content"><p>When you format a disk and install macOS on it, making it a startup or boot volume, it has a standard structure, something that has changed greatly over the last couple of years. This article summarises all you need to know about the layout of APFS boot disks and volumes from High Sierra and Mojave through to Big Sur, running on an Intel Mac at least.</p><p>当您格式化磁盘并在其上安装MacOS，使其成为启动卷或引导卷时，它具有标准结构，这在过去几年中发生了很大变化。本文总结了从High Sierra和Mojave到Big Sur(至少在Intel Mac上运行)的所有APFS引导磁盘和卷的布局。</p><p>   A standard APFS boot disk in High Sierra and Mojave consists of an EFI partition and the main APFS container. Within the latter are a minimum of four APFS volumes:</p><p>High Sierra和Mojave中的标准APFS引导盘由一个EFI分区和主APFS容器组成。后者中至少有四个APFS卷：</p><p> the startup volume, by default on the internal disk named  Macintosh HD, which forms the root of the boot file system,</p><p>默认情况下，启动卷位于名为Macintosh HD的内部磁盘上，该磁盘构成引导文件系统的根。</p><p>   the read-only System volume, by default on the internal disk named  Macintosh HD, which forms the root of the boot file system,</p><p>默认情况下，只读系统卷位于名为Macintosh HD的内部磁盘上，它构成引导文件系统的根。</p><p> the writable Data volume, by default on the internal disk named  Macintosh HD – Data, which is normally hidden from view at /System/Volumes and accessed via firmlinks,</p><p>默认情况下在名为Macintosh HD-DATA的内部磁盘上的可写数据卷，其通常隐藏在/SYSTEM/VOLULES处并且通过固件链接访问，</p><p>  Big Sur goes better than that. The System volume is now the mounted snapshot of a sealed volume known as the Sealed System Volume (SSV):</p><p>大苏尔比这要好得多。系统卷现在是称为密封系统卷(SSV)的密封卷的装载快照：</p><p> the SSV, a mounted snapshot of the read-only System volume named  Macintosh HD, which forms the root of the boot file system,</p><p>SSV是名为Macintosh HD的只读系统卷的已装载快照，它构成引导文件系统的根。</p><p> the writable Data volume, by default on the internal disk named  Macintosh HD – Data, which is normally hidden from view at /System/Volumes and accessed via firmlinks,</p><p>默认情况下在名为Macintosh HD-DATA的内部磁盘上的可写数据卷，其通常隐藏在/SYSTEM/VOLULES处并且通过固件链接访问，</p><p> Note that Apple Silicon Macs don’t use EFI, and therefore may not have EFI partitions at the top level of each disk. That will only become clear when Apple ships its first production systems.</p><p>请注意，Apple Silicon Mac不使用EFI，因此每个磁盘的顶层可能没有EFI分区。只有当苹果推出第一批生产系统时，这一点才会变得明朗。</p><p>  With a single startup volume, High Sierra and Mojave have straightforward layouts of folders from the root /.</p><p>只需一个启动卷，High Sierra和Mojave就可以直接从根目录/开始布局文件夹。</p><p> Catalina and Big Sur (on Intel, at least) divide the major folders between their System and Data volumes. The System volume forms the root /, from which there are multiple firmlinks which join the two volumes into what appears to be a single volume both in the Finder and Terminal. A simplified integrated view of the resulting boot Volume Group is shown below.</p><p>Catalina和Big Sur(至少在英特尔)在他们的系统和数据卷之间划分主文件夹。系统卷形成根/，从根/有多个固件链接，它们将两个卷连接成在Finder和终端中看起来像是单个卷的卷。生成的启动卷组的简化集成视图如下所示。</p><p>   In that diagram, folders which are on the System volume (or SSV) are shown in blue, and those on the Data volume in green. Those in red are firmlinked from the System volume to that folder on the Data volume. This creates the illusion of a single, integrated volume which is actually composed of the two melded together.</p><p>在该图中，系统卷(或SSV)上文件夹显示为蓝色，数据卷上的文件夹显示为绿色。红色部分从系统卷固定链接到数据卷上的该文件夹。这创造了一种单一的、完整的体积的错觉，实际上这两个体积融合在一起。</p><p>  The top-level Applications folder is actually a firmlink to user apps on the Data volume. The Finder melds that with read-only apps installed in macOS at /System/Applications, making bundled and user apps appear to be in a single folder, which they actually aren’t. Try to trash one of the bundled apps like Calculator, or inspect its real path in the Get Info dialog, and that will be apparent.</p><p>顶级应用程序文件夹实际上是指向数据卷上的用户应用程序的固件链接。Finder将这一点与MacOS中安装在/System/Applications下的只读应用程序相结合，使捆绑的应用程序和用户应用程序看起来像是在一个文件夹中，但实际上并非如此。试着丢弃Calculator等捆绑的应用程序，或者在Get Info对话框中检查其真实路径，这将是显而易见的。</p><p> Mutable system files can’t be installed on the read-only System volume, so are normally firmlinked to folders on the Data volume. Among the most important of these are the several folders in /private, and /usr/local in which you can install your own command tools and the like.</p><p>可变系统文件不能安装在只读系统卷上，因此通常固定链接到数据卷上的文件夹。其中最重要的是/private和/usr/local中的几个文件夹，您可以在这些文件夹中安装您自己的命令工具等。</p><p> The Data volume itself is accessible through its mountpoint at /System/Volumes/Data, and contains the contents of the top-level Users folder, with Home folders and more.</p><p>数据卷本身可通过其位于/system/volumes/data的挂载点进行访问，并且包含顶级用户文件夹的内容，以及主文件夹等。</p><p>  Firmlinks are similar in some respects to traditional symbolic links, but are only made between folders, work in both directions, and with a little added magic effectively merge the contents of two linked folders. For example, the /Users directory on the read-only system volume contains some directories in /Shared. As /Users is a firmlink, the directories there are merged with those in the /Users/Shared directory on the writable (Data) volume. Further details about volume groups and the file system magic in Catalina is in  this Carbon Copy Cloner KB article.</p><p>Firmlink在某些方面类似于传统的符号链接，但只在文件夹之间创建，在两个方向上都可以工作，并且稍微增加了一些魔力，就可以有效地合并两个链接文件夹的内容。例如，只读系统卷上的/Users目录包含/Shared中的一些目录。由于/Users是一个固件链接，因此那里的目录将与可写(数据)卷上的/Users/Shared目录中的目录合并。有关卷组和Catalina中的文件系统魔术的更多详细信息，请参阅这篇抄袭克隆知识库文章。</p><p> The current list of system firmlinks taken from /usr/share/firmlinks is: /Applications &lt;-&gt; Applications /Library &lt;-&gt; Library /System/Library/Caches &lt;-&gt; System/Library/Caches /System/Library/Assets &lt;-&gt; System/Library/Assets /System/Library/PreinstalledAssets &lt;-&gt; System/Library/PreinstalledAssets /System/Library/AssetsV2 &lt;-&gt; System/Library/AssetsV2 /System/Library/PreinstalledAssetsV2 &lt;-&gt; System/Library/PreinstalledAssetsV2 /System/Library/CoreServices/CoreTypes.bundle/Contents/Library &lt;-&gt; System/Library/CoreServices/CoreTypes.bundle/Contents/Library /System/Library/Speech &lt;-&gt; System/Library/Speech /Users &lt;-&gt; Users /Volumes &lt;-&gt; Volumes /cores &lt;-&gt; cores /opt &lt;-&gt; opt /private &lt;-&gt; private /usr/local &lt;-&gt; usr/local /usr/libexec/cups &lt;-&gt; usr/libexec/cups /usr/share/snmp &lt;-&gt; usr/share/snmp  in each case shown as the system volume path and the Data volume path which are firmlinked.</p><p>从/usr/Share/Firmlink获取的系统固件链接的当前列表是：/Applications&lt；-&gt；Applications/Library&lt；-&gt；Library/System/Library/Caches&lt；-&gt；System/Library/Cache/System/Library/Assets&lt；-&gt；System/Library/Assets/System/PreinstalledAssets&lt；-&gt；System/Library/AssetsV2&lt；-&gt；System/Library/AssetsV2/System/Library/PreinstalledAssetsV2&lt；-&gt；System/Library/AssetsV2/System/Library/PreinstalledAssetsV2&lt；-&gt；System/Library/AssetsV2/System/Library/PreinstalledAssetsV2&lt；-&gt；系统/库/资产V2/System/Library/PreinstalledAssetsV2&lt；系统/库/预安装资产V2/System/Library/CoreServices/CoreTypes.bundle/Contents/Library&lt；-&gt；System/Library/CoreServices/CoreTypes.bundle/Contents/Library/系统/库/语音&lt；-&gt；系统/库/语音/用户&lt；-&gt；用户/卷/卷/核心--&gt；核心/光学&lt；-&gt；私有/USR/LOCAL&lt；-&gt；USR/LOCAL/USR/libexec/CUPS&lt；-&gt；usr/libexec/cups/usr/share/snmp&lt；-&gt；usr/share/snmp在每种情况下都显示为固定链接的系统卷路径和数据卷路径。</p><p> You can also create your own  synthetic firmlinks, which appear at root volume level and link to folders or symbolic links on the Data volume. These are stored in an /etc/synthetic.conf file, which is documented in  man synthetic.conf. Rich Trouton has published an  excellent tutorial on how to do this. Users who previously had their own custom folders at the root level of the boot volume can use this to create the same effect in Catalina and Big Sur.</p><p>您还可以创建自己的合成固件链接，它们显示在根卷级别，并链接到数据卷上的文件夹或符号链接。这些文件存储在/etc/synthetic.conf文件中，该文件记录在man synthetic.conf中。里奇·特劳顿出版了一本关于如何做到这一点的极好的教程。以前在引导卷的根级别具有自己的自定义文件夹的用户可以使用此选项在Catalina和Big Sur中创建相同的效果。</p><p>  The standard system firmlinks mean that, for most users and most purposes, you shouldn’t have to look anywhere different, or change the paths you use in Terminal. However, if you access anything for which there isn’t a convenient firmlink, you may find that its effective path has now changed – hence these new roadmaps, to help you see where things can now be found.</p><p>标准的系统固件链接意味着，对于大多数用户和大多数目的，您不应该查看任何不同的地方，或者更改您在终端中使用的路径。但是，如果您访问没有方便的固件链接的任何东西，您可能会发现其有效路径现在已经改变-因此有了这些新的路线图，以帮助您了解现在可以找到哪些东西。</p><p> In Terminal, when you want to run a command tool which you installed in the /usr/local/bin directory, you might call it using the command /usr/local/bin/mytool. In Catalina, the firmlink between the /usr/local folder on the System volume takes that path through to the correct folder on the Data volume, so you don’t have to change the path to /System/Volumes/Data/usr/local/bin/mytool.</p><p>在终端中，当您想要运行安装在/usr/local/bin目录中的命令工具时，可以使用命令/usr/local/bin/mytool调用它。在Catalina中，系统卷上的/usr/local文件夹之间的固件链接将该路径连接到数据卷上的正确文件夹，因此您不必更改/system/volumes/data/usr/local/bin/mytool的路径。</p><p> One valuable trick for always using the right path in Terminal is to locate the folder or file in a Finder window, and drag and drop that into the command line. macOS then magically performs any path conversions for you. You may also find my utility  Precize useful, as it gives paths, inode numbers, and a great deal more.</p><p>在终端中始终使用正确路径的一个有价值的技巧是在Finder窗口中找到文件夹或文件，并将其拖放到命令行中。然后，MacOS会神奇地为您执行任何路径转换。您可能还会发现我的工具Precize很有用，因为它给出了路径、inode编号等等。</p><p>  These are full layouts for Catalina, which currently also apply to Big Sur running on Intel Macs.</p><p>这些是Catalina的完整布局，目前也适用于在英特尔Mac上运行的Big Sur。</p></div><div id="story_share_this"><div class="sharethis-inline-share-buttons"></div></div><div class="text-break sotry_link page_narrow"><a target="_blank" href="https://eclecticlight.co/2020/09/16/boot-volume-layout/">https://eclecticlight.co/2020/09/16/boot-volume-layout/</a></div><div class="story_tags page_narrow"><button type="button" class="btn btn-light my_tag"><a href="/tag/macos/">#macos</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/volume/">#volume</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/系统/">#系统</a></button></div></div><div class="my_movie_list_item shadow p-3 mb-5 bg-white rounded"><button type="button" class="btn btn-link my_tag"><a href="/tag/web2.0/">#web2.0</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/google/">#google</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/设计/">#设计</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/游戏/">#游戏</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/创意/">#创意</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/apple/">#apple</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/苹果/">#苹果</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/摄影/">#摄影</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/软件/">#软件</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/美国/">#美国</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/iphone/">#iphone</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/图片/">#图片</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/手机/">#手机</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/视频/">#视频</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/广告/">#广告</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/免费/">#免费</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/谷歌/">#谷歌</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/网站/">#网站</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/windows/">#windows</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/微软/">#微软</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/下载/">#下载</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/firefox/">#firefox</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/音乐/">#音乐</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/linux/">#linux</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/blog/">#blog</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/博客/">#博客</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/程序/">#程序</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/艺术/">#艺术</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/web/">#web</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/wordpress/">#wordpress</a></button></div></div></div><div id="my_footer"><div class=""><a href="/tags/">tags</a> <a href="/users/">users</a></div>&copy; 2020 diglog.com </div></div></body></html>