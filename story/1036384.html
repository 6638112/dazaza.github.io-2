<!doctype html><html lang="zh-hans"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Postgres：包含电池的数据库</title><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"><link rel="stylesheet" href="/img/css.css?random="><link data-rh="true" rel="icon" href="/img/favicon.ico"/><script data-ad-client="ca-pub-6067137220025946" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script type="text/javascript" src="https://platform-api.sharethis.com/js/sharethis.js#property=5effb96910009800120b8d4d&product=inline-share-buttons" async="async"></script>
<script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?03c1a0f31299b4a2fbb83c34d6beaac9";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script></head><body><div id="my_header"><div class="container"><nav class="navbar navbar-expand-lg"><a class="navbar-brand" href="/"><img alt="diglog" src="/img/logo.v1.gif" class="rounded-sm"></a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarNavAltMarkup"><div class="navbar-nav"></div></div></nav></div></div><div class="container"><div id="my_content"><h1 class="page_narrow">Postgres：包含电池的数据库</h1><div class="row"><div class="col-lg-12 col-12"><div class="my_story_list_item shadow p-3 mb-5 bg-white rounded"><div class="story_page_pub_time page_narrow">2020-11-25 03:45:47</div><div class="story_img_container"><a href="http://img2.diglog.com/img/2020/11/fdf84f68e895d220d6c3a71e6410bad8.png"><img src="http://img2.diglog.com/img/2020/11/fdf84f68e895d220d6c3a71e6410bad8.png" class="img-fluid my_story_img" onerror="this.style.display='none'"></a></div><div class="page_narrow text-break page_content"><p>在我工作过的大多数地方，使用的主要语言都不是我自然喜欢的语言。如果您要亲自询问选择的语言，那就是python。我很欣赏这种显式的本性，它通常是可以执行的伪代码，并且具有丰富的库生态系统（尽管如今这是大多数语言）。但是，在我早期使用Django时，我所获得的东西就不胜枚举。如果您不熟悉Django，那么它是使用Python编写的Web应用程序的流行框架。我特别喜欢的是它早期的标语之一：包括电池。</p><p>   就在最近，我在变更日志Podcast上谈论“ Postgres有什么令人兴奋的地方？”我讨论了一段时间，也许可以继续进行下去，其中许多功能都是我们使用Crunchy Bridge构建的功能中的首要考虑因素。通过对事情的反思，我可以看到与我在PostgreSQL的Django中欣赏的东西有很大的相似之处。对我而言，Postgres是包含电池的数据库。那么PostgreSQL框中是什么：</p><p>   对我来说，没有什么比数据更重要。知道我的数据是安全的是非常关键的。无论是我的银行结余还是我的食品订单，当我以某种方式进行交易时，我都想知道其中的数据。我构建的应用程序也是如此，而PostgreSQL在这里一直是可靠且安全的数据库。 Postgres MVCC的核心是一种可靠的方法，可帮助确保交易一致性水平，同时仍可大规模运行。在单个PostgreSQL实例中，每秒数十万个事务确实可以相当容易地管理。</p><p> 多年来，它也不断发展壮大，变得可靠。数据类型占了很大一部分。从表面上看，数据类型似乎并不值得一提，但并非所有数据库都支持您每天在应用程序中使用的类型。只是一些值得注意的：</p><p> 范围类型-尤其适用于需要往返时间的日历，它具有强制执行约束的功能。</p><p> 时间戳-使用任何语言的时间都是很痛苦的事情，带有时区的时间戳使转换变得更加容易，再加上时间间隔，使得像在上一小时注册的用户这样的事情变得微不足道。</p><p> JSONB-多年来，这一功能已经引起了广泛关注，但对于许多人来说，它仍然是新事物。可以使用GIN索引轻松索引的二进制JSON数据类型。</p><p>SQL是数据的通用语言。 SQL源于关系代数和关系演算，这使它成为处理数据的一种经过深思熟虑的语言，即使它并不总是最漂亮的语言。 SQL是数据的标准语言，每个没有SQL的NoSQL数据库最终都会重新创建其SQL版本，因为这是正确的数据答案。</p><p> 在Postgres中，您拥有访问数据的所有标准方式，然后，您还获得了更多的异国情调：</p><p> CTE（公用表表达式）-用于编写更复杂的查询，递归并使SQL可读。</p><p> 窗口功能-非常适合进行分析，例如排序结果，计算中位数和百分位数。</p><p> 函数-Postgres已经提供了大量的函数来执行常见的操作，例如日期数学，解析字符和其他琐碎的事情。</p><p>  这个好朋友拉赫（Rach）在一篇帖子中总结了所有这一切，远胜于我：“ Postgres全文搜索就足够了！” -简单阅读即可。</p><p> 这里更广泛的观点是，如果您有一个现有的应用程序并且要向其中添加搜索，那么在寻求弹性（然后必须将其同步到该系统并维护和支持该系统）之前，请考虑使用一些您已经支持并包含数据-Postgres。</p><p>这本身就是一个整体。 PostGIS是最先进的地理空间开源数据库。它是Postgres的扩展，但我将其与其他扩展放在一个特殊的类中。随着扩展变得越来越先进，从一开始，PostGIS就已经变得非常丰富和先进。 PostGIS拥有自己的社区，该社区与Postgres有点类似，并定期发布扩展的主要版本和次要版本。</p><p> 启用PostGIS（只需创建CREATE EXTENSION postgis;），即可立即获得一个地理空间数据库。它带来了新的数据类型，新的空间谓词，用于查询这些几何并与之交互。您可以走得更远并启用pgRouting，这有助于进行路线规划。希望找出如何优化3个驾驶员的10个食物交付以优化路线和时机的方法吗？ PostGIS可以提供​​帮助。</p><p> 实际上，我们只是结束了马拉松式PostGIS的一天，这一天从东海岸开始，然后在西海岸结束。当天结束后，我们将在不久的将来发布这些演讲，因此，如果您想在直播时获得一些更新，请随时注册。</p><p>  我想我在使用PostGIS时有点混乱。备份一下……扩展是Postgres特有的。就个人而言，这个名字并不能真正传达出他们的力量和价值。扩展程序允许您扩展和更改Postgres的功能，但Postgres所具有的独特之处是。 Postgres具有这些深层次的底层挂钩，使您可以执行诸如添加新数据类型，新功能甚至将挂钩插入查询计划器的操作。</p><p> Postgres附带了一些股票扩展功能，您可能仍需要启用它们，但至少您可以使用它们。 pg_stat_statements是存在的最有用的扩展之一，它是由我的同事Peter Geoghegan在Postgres 9.2中编写和更新的，非常有用。它将使您几乎立即获得30,000英尺的数据库性能视图，而不必深入研究应用程序来了解正在调用的查询。</p><p> 扩展列表很长。 PGXN，即Postgres扩展网络，具有200多个扩展的索引，其中一些已经准备就绪，可以投入生产。所有人可能都值得自己深入研究，但其中一些值得一提的重点是：</p><p> pg_partman-一个扩展，它建立在Postgres中的本地时间分区上，以使处理时间序列数据简单而高效。对我来说，这是一个不错的奖励，它是由Crunchy Data同事维护的。</p><p>pgsql-http-一个简单的扩展，但可能非常有用，它允许您发出http请求。想触发网页挂钩吗？从您的plpsql或plpython调用API？</p><p> zhparser，pgroonga-尽管是两个不同的扩展名，但我将这两个分组在一起。如果您要进行全文搜索，但Postgres原生支持不起作用（日语和中文）。这是你的答案。</p><p> madlib-谁需要一个完整的ETL和数据科学流水线，何时才能在数据所处的位置（在Postgres中）做所有事情。 Madlib从某个周末开始并不是一个新的爱好库，它已有近10年的历史，并且广泛地支持数据科学。朴素的贝叶斯，k均值，草图估计-自2011年1.0版发布以来，所有这些都已经存在。它是Apache基础的一部分，并且会不断发展，并且可以轻松访问Postgres中的数据科学。</p><p> postgres_fdw-外部数据包装器（FDW）是一种有趣的扩展类，它使您可以从Postgres内部查询其他内容（请阅读：另一种Postgres，Redis，Mongo，您为它命名）。如果有任何FDW可以投入生产，则是Postgres本身随附的Postgres。</p><p> Crunchy Bridge（我们的多云PostgreSQL托管服务）的目标很大一部分是利用广泛的扩展生态系统，以便您可以对数据库做更多的事情。</p><p>  8年前，我写了一篇博客文章，解释“为什么Postgres”是您应该考虑使用的数据库。五年后，我发布了具有一些更新的新版本。我什至还没有达到扩展或可插拔存储可能存在的迷人未来。 （想要在Postgres中使用柱状存储...我保证有一天会在这里，也许比您想象的要早）。</p><p> 但是今天，如果您回答的全部都以上，则无需选择Postgres的理由。今天的问题已经真正转移到您不打算使用Postgres的目的上，以及社区如何更好地支持将来在Postgres中发生的事情。</p><p>这是我们处理“松散数据”和我们所相信的内容的核心。作为一个社区，我们如何才能使Postgres成为一个强大的开源数据库，并继续在其中包含更多内容？这就是我们现在已经花费了近十年的时间来帮助人们运行和支持生产PostgreSQL的原因，无论是基于VM的HA设置，还是通过PostgreSQL Operator在Kubernetes上，或者最近在我们的数据库即服务中。</p><p> 当我今天在Django网站上浏览时，我发现“包含电池”已从该框架的主要用途逐渐淡出，因此，我借此机会统领Postgres这个词组，它实际上是一个完整的包含电池的数据库。</p></div><div id="story_share_this"><div class="sharethis-inline-share-buttons"></div></div><div class="text-break sotry_link page_narrow"><a target="_blank" href="https://info.crunchydata.com/blog/postgres-the-batteries-included-database">https://info.crunchydata.com/blog/postgres-the-batteries-included-database</a></div><div class="story_tags page_narrow"><button type="button" class="btn btn-light my_tag"><a href="/tag/数据库/">#数据库</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/database/">#database</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/包含/">#包含</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/batteries/">#batteries</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/postgres/">#postgres</a></button></div></div><div class="shadow p-3 mb-5 bg-white rounded clearfix"><div class="container"><div class="row"><div class="col-sm"><div><a target="_blank" href="/story/1035759.html"><img src="http://img2.diglog.com/img/2020/11/thumb_9adf9c2d008c2329761123f0ef88bc94.png" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1035759.html">PostgREST：适用于任何Postgres数据库的REST API</a></div><span class="my_story_list_date">2020-11-22 1:7</span></div><div class="col-sm"><div><a target="_blank" href="/story/1035268.html"><img src="http://img2.diglog.com/img/2020/11/thumb_65e4461c84483101dd4aeac0181f17a7.jpg" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1035268.html">被错误配置的云数据库暴露的数百万酒店客人的信用卡号码</a></div><span class="my_story_list_date">2020-11-15 19:56</span></div><div class="col-sm"><div><a target="_blank" href="/story/1035164.html"><img src="http://img2.diglog.com/img/2020/11/thumb_e76959b71cbcecb489ae79a4ba531878.png" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1035164.html">Go中的数据库比Rust中的数据库快6倍</a></div><span class="my_story_list_date">2020-11-15 2:34</span></div><div class="col-sm"><div><a target="_blank" href="/story/1034108.html"><img src="http://img2.diglog.com/img/2020/11/thumb_832fc0a64d230261d86c6005ac8567b6.jpg" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1034108.html">使用Istio和FusionAuth将用户数据库和授权从应用程序中分离出来</a></div><span class="my_story_list_date">2020-11-10 2:53</span></div></div></div></div><div class="my_movie_list_item shadow p-3 mb-5 bg-white rounded"><button type="button" class="btn btn-link my_tag"><a href="/tag/web2.0/">#web2.0</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/google/">#google</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/设计/">#设计</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/创意/">#创意</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/摄影/">#摄影</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/游戏/">#游戏</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/图片/">#图片</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/软件/">#软件</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/视频/">#视频</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/手机/">#手机</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/广告/">#广告</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/apple/">#apple</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/iphone/">#iphone</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/网站/">#网站</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/免费/">#免费</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/下载/">#下载</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/windows/">#windows</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/微软/">#微软</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/firefox/">#firefox</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/苹果/">#苹果</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/blog/">#blog</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/音乐/">#音乐</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/博客/">#博客</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/wordpress/">#wordpress</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/恶搞/">#恶搞</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/艺术/">#艺术</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/qq/">#qq</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/web/">#web</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/谷歌/">#谷歌</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/工具/">#工具</a></button></div></div></div><div id="my_footer"><div class=""><a href="/tags/">tags</a> <a href="/users/">users</a></div>&copy;2012-2021 diglog.com </div></div></body></html>