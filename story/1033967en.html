<!doctype html><html lang="zh-hans"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Raspberry PI在ARM上使用VMware ESXi入门</title><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"><link rel="stylesheet" href="/img/css.css?random="><link data-rh="true" rel="icon" href="/img/favicon.ico"/><script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?03c1a0f31299b4a2fbb83c34d6beaac9";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script><script data-ad-client="ca-pub-6067137220025946" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script type="text/javascript" src="https://platform-api.sharethis.com/js/sharethis.js#property=5effb96910009800120b8d4d&product=inline-share-buttons" async="async"></script></head><body><div id="my_header"><div class="container"><nav class="navbar navbar-expand-lg"><a class="navbar-brand" href="/"><img alt="diglog" src="/img/logo.v1.gif" class="rounded-sm"></a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarNavAltMarkup"><div class="navbar-nav"></div></div></nav></div></div><div class="container"><div id="my_content"><h1 class="page_narrow">Raspberry PI在ARM上使用VMware ESXi入门</h1><div class="row"><div class="col-lg-12 col-12"><div class="my_story_list_item shadow p-3 mb-5 bg-white rounded"><div class="story_page_pub_time page_narrow">2020-11-09 10:16:36</div><div class="story_img_container"><a href="http://img2.diglog.com/img/2020/11/e3bd075a969ab36c8f2c233721062856.jpg"><img src="http://img2.diglog.com/img/2020/11/e3bd075a969ab36c8f2c233721062856.jpg" class="img-fluid my_story_img" onerror="this.style.display='none'"></a></div><div class="page_narrow text-break page_content"><p>Last month VMWare released what they have called  ESXi Arm-fling. This new release allows you to install the same ESXi you know and love on an ARM processor. VMWare has certified a few systems for datacenter use. They also have certified it for the Raspberry Pi 4, but only for what they call “Far Edge”.</p><p>上个月，VMWare发布了他们所说的ESXi试水。这一新版本允许您在ARM处理器上安装与您熟悉和喜爱的ESXi相同的ESXi。VMware已经为数据中心使用认证了几个系统。他们还为树莓Pi 4认证了这款手机，但仅限于他们所说的“远缘”(Far Edge)。</p><p> Today we are going to perform the installation on a Raspberry Pi 8GB and do some testing. While we generally feel  ProjectTinyMiniMicro may be a better option for some, there are many enthusiasts who sing the praises of the Raspberry Pi. The Pi has exceptional power efficiency, scalability, and a small footprint.</p><p>今天，我们将在Raspberry PI 8 GB上进行安装，并进行一些测试。虽然我们普遍认为ProjectTinyMiniMicro对一些人来说可能是一个更好的选择，但也有许多爱好者对树莓Pi赞不绝口。PI具有出色的能效、可扩展性和较小的占地面积。</p><p>  Before we continue, it is worth noting that this installation is a little bit different than other Raspberry Pi installations. We will need a total of  three different pieces of storage to complete this installation. You need a microSD card for the firmware, but in this guide that is ALL the microSD card will be used for. Then you will need a USB thumb drive to act as your VMWare installer. Finally, you will need a place to install VMWare to. While it is possible to install it to your microSD card, that is not officially supported. Instead, you want to look at a USB based solution or a network solution such as PXE or iSCSI.</p><p>在我们继续之前，值得注意的是，此安装与其他Raspberry PI安装略有不同。我们总共需要三个不同的存储来完成此安装。固件需要microSD卡，但在本指南中将仅使用microSD卡。然后，您需要一个USB拇指驱动器来充当VMWare安装程序。最后，您需要一个位置来安装VMWare。虽然可以将其安装到您的microSD卡上，但这并不是官方支持的。相反，您希望查看基于USB的解决方案或网络解决方案(如PXE或iSCSI)。</p><p>   You will need to grab the  NOOBS image and burn it to your microSD card if you did not buy a kit with it preinstalled as we had. To do so you can utilize the  Raspberry Pi Imager.</p><p>如果您没有像我们一样购买预装的套件，您需要抓取NOOBS镜像并将其刻录到您的microSD卡中。要做到这一点，你可以使用树莓圆周率成像仪。</p><p> When the NOOBs installer boots up, select the Raspberry Pi OS Lite (32-bit) option. You do not need the full desktop version. We are only using the OS to update the EEPROM and get some other updates out of the way.</p><p>当noobs安装程序启动时，选择Raspberry Pi OS Lite(32位)选项。您不需要完整的桌面版本。我们只是使用操作系统来更新EEPROM，并获得一些其他的更新。</p><p>    After you have completed the EEPROM update, we need to now update the firmware and switch to the community UEFI firmware. First, start by going to the Raspberry Pi  Github page and download the latest firmware. Next, go to pftf’s UEFI  Github page, and download it as well.</p><p>在您完成EEPROM更新之后，我们现在需要更新固件并切换到社区UEFI固件。首先，转到Raspberry Pi Github页面并下载最新固件。接下来，转到pftf的UEFI Github页面，并下载它。</p><p> Safely shutdown your Pi and take the microSD card out. Next, plug your microSD card into a computer and prepare to update the files on it. To get started, we need to format the RECOVERY partition and rename it UEFI:</p><p>安全关闭PI并取出microSD卡。接下来，将microSD卡插入计算机并准备更新其中的文件。开始之前，我们需要格式化恢复分区并将其重命名为UEFI：</p><p>  Next, drag and drop the new files from the  boot folder in the firmware-master onto the  SD card. Start by going to the firmware-master folder and selecting everything. Once completed, you must remove the four files starting with the name “kernel”:</p><p>接下来，将新文件从Firmware-master中的引导文件夹拖放到SD卡上。首先转到Firmware-master文件夹并选择所有内容。完成后，您必须删除以“内核”名称开头的四个文件：</p><p>  Next, do the same thing for the files from the  UEFI firmware. Make sure you  replace/overwrite the files with the updated ones.</p><p>接下来，对UEFI固件中的文件执行相同的操作。确保用更新后的文件替换/覆盖这些文件。</p><p>  Now, open the config.txt file in the UEFI drive. We need to modify it by adding a line</p><p>现在，打开UEFI驱动器中的config.txt文件。我们需要通过添加一行来修改它。</p><p>    To get started you will need to navigate to  VMware’s page for ESXi for ARM. Once there you will need to create an account and download the ISO. You will need to burn this ISO to a separate USB thumb drive. To burn it to the drive, you can utilize  Rufus.</p><p>要开始使用，您需要导航到ESXi for ARM的VMware页面。在此之后，您需要创建一个帐户并下载ISO。您需要将此ISO刻录到单独的USB拇指驱动器。要将其烧录到驱动器中，您可以使用Rufus。</p><p>  After you have burned the ISO to your thumb drive, you need to plug it into your Pi and turn it on. You will see a new UEFI boot menu, press escape, and get into the UEFI to make any changes.</p><p>将ISO刻录到拇指驱动器后，需要将其插入PI并打开它。您将看到一个新的UEFI引导菜单，按Esc键，然后进入UEFI进行任何更改。</p><p> Click on  Device Manager and then click  Limit Ram to 3GB and change it to  Disabled.</p><p>单击设备管理器，然后单击将RAM限制为3 GB并将其更改为禁用。</p><p>  Press  F10 and save the change you made. Exit the UEFI and press  Enter to boot to the USB drive. The system will then boot into the ESXi installer. One option for installing ESXi to an SSD, using something like a  Startech USB3.0 to SATA adapter. Another option is to install it to another USB thumb drive and use iSCSI storage for your VMs.</p><p>按F10并保存您所做的更改。退出UEFI并按Enter键引导至USB驱动器。然后，系统将引导至ESXi安装程序。将ESXi安装到固态硬盘的一种选择是使用类似Startech USB3.0转SATA适配器的设备。另一种选择是将其安装到另一个USB拇指驱动器上，并为您的虚拟机使用iSCSI存储。</p><p>  Select your disk, it has to be one other than the USB installer drive or the microSD card. Once you have selected your disk, the installer will format it and destructively remove all data. You need only to assign a password and installation will begin. When you are done, simply remove the installation media and reboot.</p><p>请选择您的磁盘，它必须是USB安装程序驱动器或microSD卡以外的磁盘。一旦您选择了磁盘，安装程序将对其进行格式化并破坏性地删除所有数据。您只需指定密码，即可开始安装。完成后，只需取出安装介质并重新启动即可。</p><p>  To get started, open a web browser on another computer and point it to the IP of your Pi. Once there, you should see the familiar ESXi home page. For more information on setting up ESXi, please see our  Building a Lab series.</p><p>要开始，请在另一台计算机上打开Web浏览器，并将其指向您的PI的IP。进入该页面后，您应该会看到熟悉的ESXi主页。有关设置ESXi的更多信息，请参阅我们的构建实验室系列。</p><p>  The first step we should do is to add our NTP servers. Go to  Manage then to  System  and finally to  Time and Date. Add some NTP servers, then click on  Services and start the  ntpd service.</p><p>我们应该做的第一步是添加我们的NTP服务器。转到管理，然后转到系统，最后转到时间和日期。添加一些NTP服务器，然后点击服务并启动ntpd服务。</p><p>  If you wanted to add iSCSI storage you can. For my testing, I added a 1TiB iSCSI LUN from my production TrueNAS Core box.</p><p>如果您想要添加iSCSI存储，则可以。在我的测试中，我从我的生产TrueNAS Core盒中添加了一个1TiB iSCSI LUN。</p><p>  Additionally, you can add it to a vCenter just like a normal ESXi host. You simply right-click on a datacenter, press  A dd Host, type your IP address, credentials and select a license.</p><p>此外，您还可以像添加普通ESXi主机一样将其添加到vCenter。您只需右键单击数据中心，按A dd主机，然后键入您的IP地址、凭据并选择许可证。</p><p>  At this point, you are basically ready to get going with the VMware ESXi on Arm Fling using your Raspberry Pi.</p><p>至此，您基本上已经准备好使用Raspberry PI在ARM Fling上使用VMware ESXi了。</p><p>  There are some limitations to this setup, however. As one example, ESXi on Arm cannot run X86 compatible operating systems. As a result, you will not be able to install Windows in the traditional sense. At this time Windows 10 for ARM is not supported. You will be able to install operating systems compiled for Arm, however. As a result, we see Ubuntu Server being a more popular guest OS than Windows Server.</p><p>但是，此设置有一些限制。举个例子，ARM上的ESXi不能运行X86兼容的操作系统。因此，您将无法以传统方式安装Windows。目前不支持Windows 10 for ARM。不过，您将能够安装为ARM编译的操作系统。因此，我们认为Ubuntu Server是比Windows Server更受欢迎的客户操作系统。</p><p> Using ESXi on a Raspberry Pi in conjunction with something like Kubernetes makes for an interesting solution, however. This gives us tinkerers the ability to build an entire three node cluster on a single Raspberry Pi. While I certainly would not suggest doing this in production, it is a fantastic opportunity for learning and development.</p><p>然而，在覆盆子PI上使用ESXi与Kubernetes之类的东西结合使用会是一个有趣的解决方案。这使我们能够在单个Raspberry PI上构建完整的三节点集群。虽然我当然不会建议在生产中这样做，但这是一个学习和发展的绝佳机会。</p><p>  As Patrick stated in his piece  of BBQ and Virtualization, large nodes make sense. With the advent of ESXi on Arm, we get to look at the other side of that picture. If you need a highly available solution for a lightweight application, you can use a cluster of Raspberry Pis to build a vSAN capable of obtaining that goal. Alternatively, if you are new to this world and just trying to learn, having ESXi available gives you access to what is used in the enterprise.</p><p>正如Patrick在他的《BBQ and Virtualization》一文中所说，大型节点是有意义的。随着ESXi在ARM上的出现，我们可以看到这幅图景的另一面。如果您需要针对轻量级应用程序的高可用性解决方案，您可以使用Raspberry PI集群来构建能够实现该目标的VSAN。或者，如果您是这个世界的新手，只是想要学习，拥有ESXi可以让您了解企业中使用的内容。</p><p> One of the coolest possibilities for this platform is for the Raspberry Pi to become a witness node for a cluster in vCenter. If you have two production x86 servers and are planning to build a vSAN, a RaspberryPi can be added as a witness node. This will effectively save you a ton of money by not having to buy a full-blown third server. Using a small node like this in the future can lower both up-front as well as operating costs over time due to the low power consumption. A note of warning, however. That is not an officially supported topology by VMWare, but it is certainly interesting! For those using other virtualization setups such as standard KVM on Linux clusters, this is a great use case as well.</p><p>此平台最酷的可能性之一是让Raspberry PI成为vCenter中群集的见证节点。如果您有两台生产x86服务器，并计划构建一个VSAN，则可以添加一个RaspberryPI作为见证节点。这将有效地为您节省一大笔钱，因为您不必购买功能齐全的第三台服务器。由于低功耗，未来使用这样的小型节点可以降低前期成本和运营成本。然而，请注意这一点。这不是VMWare官方支持的拓扑，但它肯定很有趣！对于那些使用其他虚拟化设置(如Linux集群上的标准KVM)的人来说，这也是一个很好的用例。</p><p>  With Apple switching to Arm, NVIDIA looking to  acquire Arm, and  Cloud Providers looking more at Arm, VMWare has made a strong move here. To be clear, it needed to do this as it was falling behind in the edge. Likewise, VMware is many years behind Amazon AWS in the  DPU architecture but is catching up with  VMware Project Monterey ESXi on Arm on DPU. It may be harder to buy a DPU today to work with ESXi on Arm, but it is relatively low-cost to simply get a Raspberry Pi. I am personally excited to see what happens next.</p><p>随着苹果转向ARM，NVIDIA寻求收购ARM，以及云提供商更多地关注ARM，VMWare在这方面采取了强有力的行动。需要明确的是，它需要这样做，因为它在边缘落后了。同样，VMware在DPU架构上落后Amazon AWS多年，但在DPU上正在追赶ARM上的VMware Project蒙特雷ey ESXi。如今购买DPU与ESXi在ARM上协同工作可能会变得更加困难，但简单地购买树莓PI的成本相对较低。我个人很兴奋地想看看接下来会发生什么。</p></div><div id="story_share_this"><div class="sharethis-inline-share-buttons"></div></div><div class="text-break sotry_link page_narrow"><a target="_blank" href="https://www.servethehome.com/getting-started-with-vmware-esxi-on-arm-with-a-raspberry-pi/">https://www.servethehome.com/getting-started-with-vmware-esxi-on-arm-with-a-raspberry-pi/</a></div><div class="story_tags page_narrow"><button type="button" class="btn btn-light my_tag"><a href="/tag/vmware/">#vmware</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/pi/">#pi</a></button></div></div><div class="my_movie_list_item shadow p-3 mb-5 bg-white rounded"><button type="button" class="btn btn-link my_tag"><a href="/tag/web2.0/">#web2.0</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/google/">#google</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/设计/">#设计</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/游戏/">#游戏</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/创意/">#创意</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/apple/">#apple</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/苹果/">#苹果</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/摄影/">#摄影</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/软件/">#软件</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/美国/">#美国</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/iphone/">#iphone</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/图片/">#图片</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/手机/">#手机</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/视频/">#视频</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/广告/">#广告</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/免费/">#免费</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/谷歌/">#谷歌</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/网站/">#网站</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/windows/">#windows</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/微软/">#微软</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/下载/">#下载</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/firefox/">#firefox</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/音乐/">#音乐</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/linux/">#linux</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/blog/">#blog</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/博客/">#博客</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/程序/">#程序</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/艺术/">#艺术</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/web/">#web</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/wordpress/">#wordpress</a></button></div></div></div><div id="my_footer"><div class=""><a href="/tags/">tags</a> <a href="/users/">users</a></div>&copy; 2020 diglog.com </div></div></body></html>