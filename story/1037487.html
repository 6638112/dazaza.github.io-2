<!doctype html><html lang="zh-hans"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>基准测试：Puppeteer，Selenium，Playwright和WebDriverIO </title><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"><link rel="stylesheet" href="/img/css.css?random="><link data-rh="true" rel="icon" href="/img/favicon.ico"/><script data-ad-client="ca-pub-6067137220025946" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script type="text/javascript" src="https://platform-api.sharethis.com/js/sharethis.js#property=5effb96910009800120b8d4d&product=inline-share-buttons" async="async"></script>
<script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?03c1a0f31299b4a2fbb83c34d6beaac9";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script></head><body><div id="my_header"><div class="container"><nav class="navbar navbar-expand-lg"><a class="navbar-brand" href="/"><img alt="diglog" src="/img/logo.v1.gif" class="rounded-sm"></a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarNavAltMarkup"><div class="navbar-nav"></div></div></nav></div></div><div class="container"><div id="my_content"><h1 class="page_narrow">基准测试：Puppeteer，Selenium，Playwright和WebDriverIO </h1><div class="row"><div class="col-lg-12 col-12"><div class="my_story_list_item shadow p-3 mb-5 bg-white rounded"><div class="story_page_pub_time page_narrow">2020-12-04 20:47:19</div><div class="story_img_container"><a href="http://img2.diglog.com/img/2020/12/c74480d039302a8d38dddc1beb1641d2.png"><img src="http://img2.diglog.com/img/2020/12/c74480d039302a8d38dddc1beb1641d2.png" class="img-fluid my_story_img" onerror="this.style.display='none'"></a></div><div class="page_narrow text-break page_content"><p>当我们决定构建Checkly的浏览器检查时，我们选择使用开源的无头浏览器自动化工具Puppeteer（后来又添加了Playwright）来做到这一点。我们希望通过综合监控和测试来支持用户，让他们知道他们的网站在任何给定时刻是否按预期工作。在我们的案例中，速度是最主要的问题。</p><p> 然而，确定哪种自动化工具通常更快并不容易。因此，我们决定运行自己的基准测试，以查看新手Puppeteer和Playwright如何与经验丰富的WebDriverIO（使用Selenium和DevTools自动化协议）进行比较。</p><p> 我们的基准测试结果还包括一些出乎意料的发现，例如在较短的脚本中Puppeteer的运行速度显着提高，而在较长的场景中，WebDriverIO的变异性超出了预期。请阅读以下内容，以了解有关结果以及我们如何获得它们的更多信息。</p><p>    包括Puppeteer / Playwright和Selenium在内的基准测试几乎是苹果与橘子的比较：这些工具的适用范围大不相同，因此评估它们的任何人都应在考虑速度之前意识到它们的差异。</p><p> 尽管如此，我们大多数人已经与Selenium合作了很多年，我们还是渴望了解这些更新的工具是否确实更快。</p><p> 还需要注意的是，WebDriverIO是具有许多有用功能的高级框架，它可以在后台使用不同的工具来驱动多个浏览器的自动化。</p><p> 尽管如此，我们以前的经验告诉我们，大多数选择JavaScript的Selenium用户都使用WebDriverIO来驱动其自动化脚本，因此我们选择了它而不是其他候选人。我们对测试新的DevTools模式也很感兴趣。 </p><p>对我们来说，另一个重要的目标是，与我们心爱的木偶戏相比，最近在Checkly上增加了支持的Playwright表现如何。</p><p>  如果您想直接获得结果，请随时跳过此部分。我们仍然建议您花些时间仔细研究一下，以便您可以更好地了解结果的确切含义。</p><p>  如果要测试的工具在明显不同的条件下进行测试，则基准测试是无用的。为避免这种情况，我们整理并遵循以下准则：</p><p> 资源奇偶校验：静态时，每项测试都是在同一台计算机上顺序进行的，即在基准测试期间，后台没有繁重的工作量，可能会干扰测量。</p><p> 执行简单：如“入门”中所示运行脚本。每个工具的文档，例如适用于Playwright：节点script.js，并具有最少的添加配置。</p><p> 可比较的脚本：我们努力将用于基准测试的脚本之间的差异最小化。尽管如此，仍必须添加/删除/调整一些指令以实现稳定的执行。</p><p> 最新消息：在发布本文时，我们测试了所有工具的最新可用版本。 </p><p>对于每个基准测试，我们从同一脚本的1000次成功顺序执行中收集了数据。</p><p> 就Selenium基准测试而言，我们的脚本是针对独立服务器运行的，即我们并未像某些框架那样每次运行都从头启动新服务器（即使我们始终使用干净的会话）。我们选择此选项是为了限制执行时间的开销。</p><p> 我们在最新一代的MacBook Pro 16＆＃34;上进行了所有测试。使用以下规格运行macOS Catalina 10.15.7（19H2）：</p><p> 型号标识符：MacBookPro16,1处理器名称：6核心Intel Core i7处理器速度：2.6 GHz处理器数量：1核心总数：6 L2缓存（每个核心）：256 KB L3缓存：12 MB超线程技术：启用内存：16 GB</p><p>  bench-wdio@1.0.0 /用户/ ragog /存储库/基准/脚本/ wdio-selenium├──@ wdio / cli @ 6.9.1├──@ wdio / local-runner @ 6.9.1├──@wdio /mocha-framework@6.8.0├──@ wdio / spec-reporter @ 6.8.1├──@ wdio / sync @ 6.10.0├──chromedriver@87.0.0└──硒独立@ 6.22.1</p><p> 您可以在专用的GitHub存储库中找到我们使用的脚本以及它们产生的单个结果。</p><p>   变异系数（CV）：无单位系数，显示结果相对于平均值的变异性。 </p><p>P95（第95个百分位数）：丢弃按数字排序的一组收集数据的前5％时剩余的最大值。有趣的是要了解非极端但仍然很高的数据点的外观。</p><p>  并行化效率：在自动化工具的上下文中，并行执行非常重要。但是，在这种情况下，我们首先要了解单个脚本的执行速度。</p><p> 非本地环境中的速度：与并行化一样，云执行也是一个重要的话题，不在本文的讨论范围之内。</p><p> 资源使用情况：所需的内存和计算能力可以确定您在哪里以及如何运行脚本。</p><p>   您可以在下面看到我们基准测试的汇总结果。您可以在我们的GitHub存储库中找到完整的数据集。</p><p>  我们的第一个基准测试是针对我们的演示网站的。该网页托管在Heroku上，使用Vue.js构建，并具有小型Express后端。在大多数情况下，实际上并没有从后端获取任何数据，而前端却在利用客户端数据存储。</p><p> 在第一个场景中，执行快速登录过程，我们期望执行时间仅为几秒钟，非常适合突出实际工具之间的启动速度潜在差异。 </p><p>首先引起注意的是Playwright和Puppeteer的平均执行时间之间的巨大差异，后者的执行速度快了近30％，并且表现出较小的变化。这使我们想知道这是否是由于Playwright方面的启动时间更长。我们提出了这个问题和类似的问题，以避免此第一个基准测试的范围不断扩大。</p><p>  第二个惊喜是WebDriverIO运行中显示的总体可变性较低。结果的接近程度也很有趣：该图显示了连续不断地交叉的线，因为在这种情况下，自动化协议似乎并没有在执行时间上产生可观的差异。</p><p>  毫不奇怪的是，在不添加任何高级框架的情况下运行Puppeteer可以帮助我们在此非常短的脚本上节省大量执行时间。</p><p>   以前的经验告诉我们，演示环境与现实世界之间的差异几乎总是被低估了。因此，我们非常希望针对生产应用程序运行基准测试。在这种情况下，我们选择自己的服务器，该服务器运行一个Vue.js前端和一个后端，该后端大量利用AWS。</p><p> 我们运行的脚本看起来很像经典的E2E测试：它登录到Checkly，配置了API检查，保存并立即将其删除。我们期待着这种情况，但是我们每个人对数字看起来都有不同的期望。</p><p>  在这种情况下，Playwright和Puppeteer之间执行时间的差异几乎消失了，前者现在居于首位，并且变异性略低。</p><p>  相应地，较新的工具与两种版本的WebDriverIO之间的差异也较小。值得注意的是，与前一种情况相比，后两者现在产生的结果可变性更高，而Puppeteer和Playwright的表现出较小的变化。 </p><p>有趣的是，我们对此场景的原始测试包括将cookie注入一个全新的会话中，从而能够完全跳过登录过程。后来，由于我们在Selenium方面遇到问题，该方法被放弃了，在装入一定数量的Cookie之后，会话变得无响应。 WebDriverIO可以可靠地处理此问题，但是cookie注入步骤使执行时间的可变性爆炸了，有时似乎挂了五秒钟以上。</p><p>   对结果有疑问吗？运行您自己的基准测试！您可以使用上面共享的基准测试脚本。对设置不满意？随时提交PR，以帮助进行更好的比较。</p><p>  首先，让我们对两种测试方案的工具从最快到最慢进行排名：</p><p>   尽管Puppeteer和Playwright使用类似的API，但Puppeteer在较短的脚本上似乎具有相当大的速度优势（在我们的观察中接近30％）。</p><p> 与Selenium和DevTools WebDriverIO风格相比，Puppeteer和Playwright脚本显示出更快的执行时间（在E2E场景中接近20％）。</p><p>  当运行许多更快的脚本时，如果不需要运行跨浏览器，则可能值得运行Puppeteer以节省时间。在更长的E2E场景中，差异似乎消失了。</p><p> 值得考虑的是，是否可以运行更多的准系统设置，或者是否值得再等待更长的时间来查看结果，这是WebDriverIO添加的工具的便利性。 </p><p>在基准测试中执行时间的波动可能不是什么大问题，但在现实世界中，它们可能会堆积并减慢构建速度。 选择自动化工具时，请记住这一点。  观察双方的进展，我们想知道未来是否会将DevTools带到了最前沿，或者WebDriver是否将继续在浏览器自动化中发挥核心作用。 我们建议密切注意这两种技术。  速度固然重要，但却无法说明一切。 请保持关注，我们在进行新的实用比较时会告诉我们更多有关我们喜欢使用的工具的信息。 </p></div><div id="story_share_this"><div class="sharethis-inline-share-buttons"></div></div><div class="text-break sotry_link page_narrow"><a target="_blank" href="https://blog.checklyhq.com/puppeteer-vs-selenium-vs-playwright-speed-comparison/">https://blog.checklyhq.com/puppeteer-vs-selenium-vs-playwright-speed-comparison/</a></div><div class="story_tags page_narrow"><button type="button" class="btn btn-light my_tag"><a href="/tag/测试/">#测试</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/benchmark/">#benchmark</a></button></div></div><div class="shadow p-3 mb-5 bg-white rounded clearfix"><div class="container"><div class="row"><div class="col-sm"><div><a target="_blank" href="/story/1036730.html"><img src="http://img2.diglog.com/img/2020/11/thumb_93668fa8352a583555a2e556a42abcf7.jpg" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1036730.html">巴西完整的Covid测试数据库和患者PII泄漏（评论翻译）</a></div><span class="my_story_list_date">2020-11-27 0:6</span></div><div class="col-sm"><div><a target="_blank" href="/story/1036452.html"><img src="http://img2.diglog.com/img/2020/11/thumb_020e7d519aeda761c6b60b323895a658.jpg" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1036452.html">SpaceX定位于下周进行星际飞船的首次高空测试飞行</a></div><span class="my_story_list_date">2020-11-25 8:35</span></div><div class="col-sm"><div><a target="_blank" href="/story/1035927.html"><img src="http://img2.diglog.com/img/2020/11/thumb_1b95082227a417008bdcd05980ba71d2.jpg" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1035927.html">伊隆·马斯克（Elon Musk）宣布Covid-19全面恢复，分析师上调特斯拉股票预测</a></div><span class="my_story_list_date">2020-11-22 23:13</span></div><div class="col-sm"><div><a target="_blank" href="/story/1035844.html"><img src="http://img2.diglog.com/img/2020/11/thumb_965b88123f2f13d579c7ba6205d68e29.jpg" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1035844.html">频繁的快速测试可能会在几周内扭转Covid-19的全国性潮流</a></div><span class="my_story_list_date">2020-11-22 9:35</span></div></div></div></div><div class="my_movie_list_item shadow p-3 mb-5 bg-white rounded"><button type="button" class="btn btn-link my_tag"><a href="/tag/web2.0/">#web2.0</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/google/">#google</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/设计/">#设计</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/创意/">#创意</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/摄影/">#摄影</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/游戏/">#游戏</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/图片/">#图片</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/软件/">#软件</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/视频/">#视频</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/手机/">#手机</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/广告/">#广告</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/apple/">#apple</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/iphone/">#iphone</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/网站/">#网站</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/免费/">#免费</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/下载/">#下载</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/windows/">#windows</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/微软/">#微软</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/firefox/">#firefox</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/苹果/">#苹果</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/blog/">#blog</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/音乐/">#音乐</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/博客/">#博客</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/wordpress/">#wordpress</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/恶搞/">#恶搞</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/艺术/">#艺术</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/qq/">#qq</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/web/">#web</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/谷歌/">#谷歌</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/工具/">#工具</a></button></div></div></div><div id="my_footer"><div class=""><a href="/tags/">tags</a> <a href="/users/">users</a></div>&copy;2012-2021 diglog.com </div></div></body></html>