<!doctype html><html lang="zh-hans"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>超频Raspberry PI计算模块4</title><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"><link rel="stylesheet" href="/img/css.css?random="><link data-rh="true" rel="icon" href="/img/favicon.ico"/><script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?03c1a0f31299b4a2fbb83c34d6beaac9";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script><script data-ad-client="ca-pub-6067137220025946" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script type="text/javascript" src="https://platform-api.sharethis.com/js/sharethis.js#property=5effb96910009800120b8d4d&product=inline-share-buttons" async="async"></script></head><body><div id="my_header"><div class="container"><nav class="navbar navbar-expand-lg"><a class="navbar-brand" href="/"><img alt="diglog" src="/img/logo.v1.gif" class="rounded-sm"></a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarNavAltMarkup"><div class="navbar-nav"></div></div></nav></div></div><div class="container"><div id="my_content"><h1 class="page_narrow">超频Raspberry PI计算模块4</h1><div class="row"><div class="col-lg-12 col-12"><div class="my_story_list_item shadow p-3 mb-5 bg-white rounded"><div class="story_page_pub_time page_narrow">2020-10-21 08:42:35</div><div class="page_narrow text-break page_content"><p>People have been overclocking Raspberry Pis since the beginning of time, and the Raspberry Pi 4  is no exception.</p><p>人们从一开始就在给树莓派超频，树莓派4也不例外。</p><p> I wanted to see if the Compute Module 4 (see my  full review here) could handle overclocking the same way, and how fast I could get mine to run without crashing.</p><p>我想看看计算模块4(请看我的完整评论)是否能以同样的方式处理超频，以及我的计算模块能以多快的速度运行而不会崩溃。</p><p> There&#39;s a video version of this blog post, if you&#39;d like to watch that instead:   Raspberry Pi Compute Module 4 OVERCLOCKED.</p><p>这篇博文有一个视频版本，如果你想看的话：覆盆子圆周率计算模块4超频。</p><p> I have a giant  Noctua NF-P12 fan that I can plug right into the J17 4-pin fan connector built into the Compute Module 4 IO Board, and for all these tests I let it run full blast, moving a  lot of air over the board on my desk. Without active cooling, the SoC overheats pretty quickly under load—though you probably don&#39;t need  this much cooling!</p><p>我有一个巨大的夜曲NF-P12风扇，我可以将它直接插入到Compute Module 4 IO板上内置的J17 4针风扇连接器中，在所有这些测试中，我让它全速运行，在我办公桌上的板上移动了大量空气。没有主动冷却，SoC在负载下过热得相当快-尽管你可能不需要这么多的冷却！</p><p>  At some point I&#39;m going to work on a script that controls the fan&#39;s speed using the IO Board&#39;s built-in PWM-enabled fan controller chip which is accessible over I 2C bus 10. But for now it&#39;s full speed ahead!</p><p>在某一时刻，我将编写一个脚本，使用IO板内置的支持PWM的风扇控制器芯片来控制风扇的速度，该芯片可以通过I2C总线10访问。但目前它是全速前进的！</p><p>    I wanted to get a nice, clean 2.0 GHz out of my Compute Module; it&#39;s default clock maxes out at 1.5 GHz, and getting a solid 30% speedup feels pretty good to me—again, assuming an adequate amount of cooling, and a reliable power supply.</p><p>我想从我的计算模块中得到一个漂亮、干净的2.0 GHz；它的默认时钟最大为1.5 GHz，对我来说，获得30%的稳定加速感觉相当不错-再一次，假设有足够的冷却量和可靠的电源。</p><p> So I edited the  /boot/config.txt file, and uncommented the  arm_freq= line. I set that section of the file to contain the following:</p><p>因此，我编辑了/boot/config.txt文件，并取消对arm_freq=行的注释。我将文件的该部分设置为包含以下内容：</p><p>  The  over_voltage allows the Pi to give the SoC a little extra power, required when overclocking the CPU frequency. And the  arm_freq sets a new maximum upper frequency limit. The highest allowed frequency is currently  2147 (2.147 GHz), though I&#39;m not sure why it&#39;s capped at exactly that frequency (the docs and blog posts are mum on that topic).</p><p>过电压允许PI为SoC提供一些额外功率，这在CPU频率超频时是必需的。并且ARM_FREQ设置新的最大频率上限。目前允许的最高频率是2147千兆赫(2.147 GHz)，虽然我不确定为什么它的上限正好是这个频率(关于这个话题的文档和博客文章都是沉默的)。</p><p> You could also set the  gpu_freq= value to up to  750 to boost the GPU clock, but I&#39;m happy with a clean 2.0 GHz and the GPU bits running at their default 500 MHz frequency, so I saved and closed the boot config, then rebooted the Pi with  sudo reboot.</p><p>您也可以将GPU_freq=值设置为最高750以提高GPU时钟，但是我对干净的2.0 GHz和GPU位以其默认的500 MHz频率运行感到满意，所以我保存并关闭了引导配置，然后使用sudo reboot重启了PI。</p><p> Once rebooted, I monitored the frequency as I ran  sudo apt-get update, and confirmed it reached up to 2.0 GHz under load:</p><p>重新启动后，我在运行sudo apt-get update时监视了频率，并确认它在负载下达到了2.0 GHz：</p><p>  Note: If you set an overclock and your Pi fails to boot, you can plug in a keyboard and hold down the  Shift key while booting to disable overclock. Alternatively, pop the boot volume into another computer (or if using a CM4 with eMMC, set it in mass storage mode using  usbboot), and comment out the overclock lines in the  /boot/config.txt file.</p><p>注：如果您设置了超频而PI启动失败，您可以插入键盘并在启动时按住Shift键以禁用超频。或者，将引导卷弹出到另一台计算机(或者，如果将CM4与eMMC配合使用，则使用usbboot将其设置为大容量存储模式)，然后注释掉/boot/config.txt文件中的超频行。</p><p>  I wanted to see how the performance at 2.0 GHz compared to 1.5 GHz, so I ran the same three tests using Phoronix that I did in my initial CM4 review, and here are the results:</p><p>我想看看2.0 GHz和1.5 GHz的性能如何，所以我使用Phoronix运行了与我在最初的CM4评审中相同的三个测试，结果如下：</p><p>  The speedup in each benchmark was almost exactly 28%, which is expected since the clock speed difference between 1.5 and 2.0 GHz is—you guessed it—28%!</p><p>每个基准测试的加速比几乎正好是28%，这是意料之中的，因为1.5 GHz和2.0 GHz之间的时钟速度差是-您猜到了-28%！</p><p> Note: If you want to run the exact same test suite, you can use the same benchmark shell script I used:  pi-general-benchmark.sh.</p><p>注意：如果您想运行完全相同的测试套件，可以使用与我使用的相同的基准测试shell脚本：Pi-General-Benchmark.sh。</p><p>  During the benchmarks, I plotted the temperature by logging it to a CSV file every second with a really simple Python script:</p><p>在基准测试期间，我通过使用一个非常简单的Python脚本每秒将温度记录到CSV文件来绘制温度：</p><p> from gpiozero import CPUTemperaturefrom time import sleep, strftime, timewith open(&#34;/home/pi/cpu_temp.csv&#34;, &#34;a&#34;) as log: while True: cpu = CPUTemperature() log.write(&#34;{0},{1}\n&#34;.format(strftime(&#34;%Y-%m-%d %H:%M:%S&#34;),str(cpu.temperature))) sleep(1)</p><p>从gpioero导入CPUTemperaturefrom time导入睡眠，strftime，time with open(&#34；/home/pi/cpu_temp.csv&#34；，&#34；a&#34；)as log：While True：CPU=CPUTemperature()log.write(&#34；{0}，{1}\n&#34；.format(strftime(&#34；%Y-%m-%d%H：%M：%S&#34；)，str(cpu.temperature))睡眠(1)</p><p> You can save that as  temp_log.py, then run it with  python temp_log.py in Terminal during the benchmarking.</p><p>您可以将其另存为temp_log.py，然后在基准测试期间在终端中使用python temp_log.py运行它。</p><p>   You can see that the temperature never went above 63°C, and I confirmed there was no throttling at any time. The CPU got the hottest during the first three H.264 compression tests, but was able to keep its cool (with the giant Noctua fan) throughout the other two tests, where it hovered around 40°C.</p><p>你可以看到温度从来没有超过63°C，我确认任何时候都没有节流。CPU在前三次H.264压缩测试中温度最高，但在其他两次测试中都能保持冷却(使用巨型夜曲风扇)，徘徊在40°C左右。</p><p> Here&#39;s a thermal image of the entire board when it was under the highest load:</p><p>这是整个电路板在最高负载下的热像：</p><p>  For this thermal image, I put a little kapton tape on top of the SoC so the temperature reading would be more accurate. It was only about two degrees lower than what  vcgencmd measure_temp was reporting.</p><p>对于这张热像仪，我在SoC上放了一条小胶带，这样温度读数会更准确。这只比vcgencmd measure_temp报告的温度低了大约2度。</p><p> Just to test how quickly the Pi would overheat and throttle without any cooling (and no enclosure), I ran the same benchmark and measured the temperature:</p><p>只是为了测试PI在没有任何冷却(和没有外壳)的情况下过热和节流的速度，我运行了相同的基准测试并测量了温度：</p><p>  It only took about 3 minutes before the Pi started throttling the CPU to protect itself from overheating. So active cooling (or at least a massive heatsink) is a hard requirement when overclocking!</p><p>仅用了大约3分钟，PI就开始对CPU进行节流，以保护自己不受过热的影响。所以当超频时，主动冷却(或者至少是一个巨大的散热器)是一个很难的要求！</p><p>  One thing I remembered reading in almost all the posts about the SoC&#39;s overclocking abilities was that overclocking the GPU could also lead to increased performance in other areas besides just graphics rendering.</p><p>我记得在几乎所有关于SoC超频能力的帖子中读到的一件事是，超频GPU除了图形渲染之外，还可以提高其他领域的性能。</p><p> Stretching that idea a bit, I wondered if the CPU clock and performance affected the performance of NVMe storage via the PCIe lane at all—and much to my surprise, it did!</p><p>稍微扩展一下这个想法，我想知道CPU时钟和性能是否会通过PCIe通道影响NVMe存储的性能-令我非常惊讶的是，它确实影响了NVMe存储的性能！</p><p> I re-ran all the disk performance benchmarks from my review with the 2.0 GHz overclock on my  Samsung 970 EVO Plus using  this NGFF PCIe NVMe adapter, and now the numbers for every type of disk operation saw a measurable improvement:</p><p>我使用NGFF PCIe NVMe适配器在我的Samsung 970 EVO Plus上使用2.0 GHz超频重新运行了回顾中的所有磁盘性能基准，现在每种类型的磁盘操作的数字都有了明显的改善：</p><p>  I wanted to make sure the benchmark wasn&#39;t an anomaly, so I ran the same benchmarks (three times per benchmark) two times in each condition (e.g. run all benchmarks with no overclock, then with overclock, then without, etc.), and the numbers were within about 1% margin of error.</p><p>我想确保基准测试不会出现异常，所以我在每种情况下运行了两次相同的基准测试(每个基准测试运行三次)(例如，在没有超频的情况下运行所有基准测试，然后在有超频的情况下运行，然后没有超频运行，依此类推)，这些数字的误差幅度在1%左右。</p><p> So I can say with some authority that if you want to make bleeding-edge NVMe storage  even faster than it already was on the stock Compute Module 4, overclock it to 2.0 GHz and you&#39;ll get an  extra 15% speedup.</p><p>因此，我可以有一定的权威地说，如果您想使尖端的NVMe存储速度比股票计算模块4上的速度更快，将其超频到2.0 GHz，您将获得额外15%的加速。</p><p> I also ran the benchmarks on the same drive over USB, but the results were the same with or without the overclock. That makes sense, since USB 3.0 runs with a different chip controlling the access (in my case, the VL805 inside my  Syba USB 3.0 PCIe card).</p><p>我也通过USB在同一驱动器上运行了基准测试，但无论有没有超频，结果都是一样的。这是有道理的，因为USB3.0使用控制访问的不同芯片运行(在我的例子中，是Syba USB3.0PCIe卡内的VL805)。</p><p>  I think it&#39;s safe to say the Compute Module 4 hardware handles overclocking as well as a Pi 4 model B, which isn&#39;t surprising given that the chips are almost identical (even if the arrangement on the board is slightly more compact).</p><p>我认为可以肯定地说，Compute Module 4硬件处理超频和PI 4型号B一样好，考虑到芯片几乎完全相同(即使电路板上的排列稍微紧凑一些)，这并不令人惊讶。</p><p> And if you want to have the fastest possible storage, you should overclock the CPU—and make sure you have some sort of cooling in place to prevent throttling.</p><p>如果你想要尽可能快的存储，你应该给CPU超频--并确保你有某种冷却装置来防止节流。</p><p> Are there any other things you want me to test on the CM4? I&#39;m planning on testing a few more PCIe cards, including a 1x Nvidia GPU and a 4x Intel NIC, and I&#39;ll definitely share the testing results when I get them!</p><p>您还想让我在CM4上测试其他东西吗？我计划再测试几块PCIe卡，包括1x Nvidia GPU和4x Intel网卡，当我拿到测试结果时，我一定会分享的！</p></div><div id="story_share_this"><div class="sharethis-inline-share-buttons"></div></div><div class="text-break sotry_link page_narrow"><a target="_blank" href="https://www.jeffgeerling.com/blog/2020/overclocking-raspberry-pi-compute-module-4">https://www.jeffgeerling.com/blog/2020/overclocking-raspberry-pi-compute-module-4</a></div><div class="story_tags page_narrow"><button type="button" class="btn btn-light my_tag"><a href="/tag/pi/">#pi</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/raspberry/">#raspberry</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/运行/">#运行</a></button></div></div><div class="shadow p-3 mb-5 bg-white rounded clearfix"><div class="container"><div class="row"><div class="col-sm"><div><a target="_blank" href="/story/1029850.html"><img src="http://img2.diglog.com/img/2020/10/thumb_c202a891060db6f4d7b326eecd5139d2.jpg" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1029850.html">
Raspberry Pi Foundation推出面向工业用户的计算模块4</a></div><span class="my_story_list_date">2020-10-20 0:53</span></div><div class="col-sm"><div><a target="_blank" href="/story/1029769.html"><img src="http://img2.diglog.com/img/2020/10/thumb_2b6ad8c176f8976f889d1f4a26d8f66d.jpg" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1029769.html">新的Raspberry Pi计算模块4回顾和基准</a></div><span class="my_story_list_date">2020-10-19 20:0</span></div><div class="col-sm"><div><a target="_blank" href="/story/1029750.html"><img src="http://img2.diglog.com/img/2020/10/thumb_5edf8f306923dad736540e20cf32e163.jpg" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1029750.html">覆盆子PI计算模块4现已发售，起价25美元</a></div><span class="my_story_list_date">2020-10-19 16:0</span></div><div class="col-sm"><div><a target="_blank" href="/story/1029749.html"><img src="http://img2.diglog.com/img/2020/10/thumb_d5a1117012111ac36f108a1bcd87f2db.png" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1029749.html">新树莓PI计算模块4的Hackaday指南</a></div><span class="my_story_list_date">2020-10-19 15:58</span></div></div></div></div><div class="my_movie_list_item shadow p-3 mb-5 bg-white rounded"><button type="button" class="btn btn-link my_tag"><a href="/tag/web2.0/">#web2.0</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/google/">#google</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/设计/">#设计</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/游戏/">#游戏</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/创意/">#创意</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/apple/">#apple</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/苹果/">#苹果</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/摄影/">#摄影</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/软件/">#软件</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/美国/">#美国</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/iphone/">#iphone</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/图片/">#图片</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/手机/">#手机</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/视频/">#视频</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/广告/">#广告</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/免费/">#免费</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/谷歌/">#谷歌</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/网站/">#网站</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/windows/">#windows</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/微软/">#微软</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/下载/">#下载</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/firefox/">#firefox</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/音乐/">#音乐</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/linux/">#linux</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/blog/">#blog</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/博客/">#博客</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/程序/">#程序</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/艺术/">#艺术</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/web/">#web</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/wordpress/">#wordpress</a></button></div></div></div><div id="my_footer"><div class=""><a href="/tags/">tags</a> <a href="/users/">users</a></div>&copy; 2020 diglog.com </div></div></body></html>