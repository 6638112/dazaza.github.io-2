<!doctype html><html lang="zh-hans"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>这个Slack中断了吗？ 它始于AWS网络错误 That Slack outage this month? It started with an AWS networking error</title><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"><link rel="stylesheet" href="/img/css.css?random="><link data-rh="true" rel="icon" href="/img/favicon.ico"/><script data-ad-client="ca-pub-6067137220025946" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script type="text/javascript" src="https://platform-api.sharethis.com/js/sharethis.js#property=5effb96910009800120b8d4d&product=inline-share-buttons" async="async"></script>
<script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?03c1a0f31299b4a2fbb83c34d6beaac9";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script></head><body><div id="my_header"><div class="container"><nav class="navbar navbar-expand-lg"><a class="navbar-brand" href="/"><img alt="diglog" src="/img/logo.v1.gif" class="rounded-sm"></a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarNavAltMarkup"><div class="navbar-nav"></div></div></nav></div></div><div class="container"><div id="my_content"><h1 class="page_narrow">That Slack outage this month? It started with an AWS networking error<br/>这个Slack中断了吗？ 它始于AWS网络错误 </h1><div class="row"><div class="col-lg-12 col-12"><div class="my_story_list_item shadow p-3 mb-5 bg-white rounded"><div class="story_page_pub_time page_narrow">2021-01-21 12:01:24</div><div class="story_img_container"><a href="http://img2.diglog.com/img/2021/1/2ddd6bb9b34fc2991b56da289c3f5b75.jpg"><img src="http://img2.diglog.com/img/2021/1/2ddd6bb9b34fc2991b56da289c3f5b75.jpg" class="img-fluid my_story_img" onerror="this.style.display='none'"></a></div><div class="page_narrow text-break page_content"><p>The  hours-long outage that kicked off the 2021 working year for Slack customers was the result of a cascading series of problems initially caused by network scaling issues at AWS, Protocol has learned.</p><p>Protocol获悉，Slack客户从2021年开始的数小时停机是一系列最初由AWS的网络扩展问题引起的级联问题的结果。</p><p> According to a root-cause analysis that Slack distributed to customers last week, &#34;around 6:00 a.m. PST we began to experience packet loss between servers caused by a routing problem between network boundaries on the network of our cloud provider.&#34; A source familiar with the issue confirmed that  AWS Transit Gateway did not scale fast enough to accommodate the spike in demand for Slack&#39;s service the morning of Jan. 4, coming off the holiday break.</p><p> 根据Slack上周（PST上午6:00）分发给客户的根本原因分析，我们开始体验到由于云提供商的网络边界之间的路由问题而导致的服务器之间的数据包丢失。 ＃34;一位熟悉该问题的消息人士证实，AWS Transit Gateway的扩展速度不足以适应1月4日上午假期休息期间对Slack服务的需求激增。</p><p> Slack declined to comment beyond confirming the authenticity of the report. AWS declined to comment.</p><p> Slack除了确认报告的真实性外，拒绝发表评论。 AWS拒绝置评。</p><p> Over the next hour, packet loss caused by the networking problems led Slack&#39;s servers to report an increasing number of errors. That forced healthy servers to handle an increasing amount of demand as more and more servers were tagged as &#34;unhealthy&#34; due to their lack of responsiveness, thanks to the networking issues. Slack engineers were not alerted to the problems until around 6:45 a.m. PT.</p><p> 在接下来的一个小时中，由网络问题引起的数据包丢失导致Slack的服务器报告了越来越多的错误。随着越来越多的服务器被标记为“不健康”，这迫使健康服务器处理越来越多的需求。由于网络问题，他们缺乏响应能力。直到太平洋标准时间早上6:45左右，松弛的工程师才意识到这些问题。</p><p>  &#34;By 7:00am PST there were an insufficient number of backend servers to meet our capacity needs,&#34; according to the report, and Slack went down hard across the world.</p><p>  ＆＃34;太平洋标准时间（PST）上午7:00时，后端服务器的数量不足以满足我们的容量需求，＆＃34;根据该报告，Slack在全球范围内遭受重创。</p><p> Slack had a backup reserve of servers ready to go, but began to discover problems with the provisioning service it used to spin up and verify those backup servers, which was not designed to handle the task of trying to get Slack up and running on more than 1,000 servers in a short period of time. It was also unable to debug the issues properly because  its observability service was also affected by the networking issues, according to the report.</p><p> Slack已经准备好要备份的服务器备用资源，但是开始发现它用来启动和验证那些备份服务器的预配服务存在问题，而该服务并非旨在处理试图使Slack正常运行并在多个服务器上运行的任务。短时间内可容纳1,000台服务器。报告还说，它的可观察性服务也受到网络问题的影响，因此也无法正确调试问题。</p><p> Between 7 a.m. PT and roughly 8:15 a.m. PT, AWS increased the capacity of AWS Transit Gateway, and moved Slack from a shared system to a dedicated system, Slack told customers. Once Slack&#39;s problems with its provisioning system were fixed, the new servers found they had stable network connections, and service began to come back to normal over the next hour.</p><p> Slack告诉客户，在太平洋标准时间上午7点至太平洋时间上午8:15之间，AWS增加了AWS Transit Gateway的容量，并将Slack从共享系统迁移到专用系统。解决了Slack的预配系统问题之后，新服务器发现它们具有稳定的网络连接，并且在接下来的一个小时内服务开始恢复正常。 </p><p> In its report, Slack promised customers it would improve several aspects of its architecture over the next few months, starting with a better alert system for packet loss and closer ties between its observability system and its provisioning service. It will also redesign the server-provisioning service to handle a similar type of event and set new rules around how its servers automatically scale in response to demand.</p><p>Slack在其报告中向客户承诺，它将在未来几个月内改进其体系结构的几个方面，首先是针对丢包的更好的警报系统，以及其可观察性系统与供应服务之间的紧密联系。它还将重新设计服务器供应服务，以处理类似类型的事件，并围绕服务器如何根据需求自动扩展设置新的规则。</p><p>  One thing that isn&#39;t yet clear is how folks at AWS coordinated their response to the outage: AWS, after all, is actually a Slack customer, since  the two companies signed a sweeping partnership deal last June. For its part,  Slack signed a five-year deal with AWS in 2018 that appears to cover the majority of its cloud computing needs through 2023.</p><p>  尚不清楚的一件事是，AWS的人员如何协调他们对停机的响应：毕竟，AWS实际上是Slack的客户，因为两家公司去年6月签署了一项全面的合作伙伴协议。就其本身而言，Slack在2018年与AWS签署了一项为期五年的协议，该协议似乎可以满足2023年前其大部分云计算需求。</p><p> Slack has run into problems in the past when a disproportionately large number of people try to log into its service all at once. A similar outage occurred on Halloween in 2017 when a coding error kicked Slack users offline and everybody tried to log back in at the same time. &#34;It&#39;s similar to DDoSing yourself,&#34; former Slack director of infrastructure Julia Grace  told me at the time.</p><p> 过去，当不成比例的大量人试图一次全部登录其服务时，Slack就遇到了问题。类似的中断发生在2017年的万圣节，当时发生了编码错误，导致Slack用户脱机，每个人都尝试同时登录。 ＆＃34;类似于DDoSing自己，＆＃34; Slack前基础架构总监Julia Grace当时告诉我。 </p></div><div id="story_share_this"><div class="sharethis-inline-share-buttons"></div></div><div class="text-break sotry_link page_narrow"><a target="_blank" href="https://www.protocol.com/enterprise/slack-outage-january-aws">https://www.protocol.com/enterprise/slack-outage-january-aws</a></div><div class="story_tags page_narrow"><button type="button" class="btn btn-light my_tag"><a href="/tag/网络/">#网络</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/outage/">#outage</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/slack/">#slack</a></button></div></div><div class="my_movie_list_item shadow p-3 mb-5 bg-white rounded"><button type="button" class="btn btn-link my_tag"><a href="/tag/web2.0/">#web2.0</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/google/">#google</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/设计/">#设计</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/创意/">#创意</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/摄影/">#摄影</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/图片/">#图片</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/游戏/">#游戏</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/软件/">#软件</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/视频/">#视频</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/手机/">#手机</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/广告/">#广告</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/iphone/">#iphone</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/网站/">#网站</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/免费/">#免费</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/下载/">#下载</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/windows/">#windows</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/苹果/">#苹果</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/微软/">#微软</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/apple/">#apple</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/firefox/">#firefox</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/blog/">#blog</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/音乐/">#音乐</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/博客/">#博客</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/wordpress/">#wordpress</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/恶搞/">#恶搞</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/qq/">#qq</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/艺术/">#艺术</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/web/">#web</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/工具/">#工具</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/分享/">#分享</a></button></div></div></div><div id="my_footer"><div class=""><a href="/tags/">tags</a> <a href="/users/">users</a></div>&copy; 2020 diglog.com </div></div></body></html>