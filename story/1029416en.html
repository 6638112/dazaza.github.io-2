<!doctype html><html lang="zh-hans"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>ARM芯片有一个名称中带有JavaScript的指令</title><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"><link rel="stylesheet" href="/img/css.css?random="><link data-rh="true" rel="icon" href="/img/favicon.ico"/><script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?03c1a0f31299b4a2fbb83c34d6beaac9";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script><script data-ad-client="ca-pub-6067137220025946" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script type="text/javascript" src="https://platform-api.sharethis.com/js/sharethis.js#property=5effb96910009800120b8d4d&product=inline-share-buttons" async="async"></script></head><body><div id="my_header"><div class="container"><nav class="navbar navbar-expand-lg"><a class="navbar-brand" href="/"><img alt="diglog" src="/img/logo.v1.gif" class="rounded-sm"></a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarNavAltMarkup"><div class="navbar-nav"></div></div></nav></div></div><div class="container"><div id="my_content"><h1 class="page_narrow">ARM芯片有一个名称中带有JavaScript的指令</h1><div class="row"><div class="col-lg-12 col-12"><div class="my_story_list_item shadow p-3 mb-5 bg-white rounded"><div class="story_page_pub_time page_narrow">2020-10-17 16:59:09</div><div class="story_img_container"><a href="http://img2.diglog.com/img/2020/10/ff0287210796737fd34a6056d629fa7a.png"><img src="http://img2.diglog.com/img/2020/10/ff0287210796737fd34a6056d629fa7a.png" class="img-fluid my_story_img" onerror="this.style.display='none'"></a></div><div class="page_narrow text-break page_content"><p>FJCVTZS is &#34;Floating-point Javascript Convert to Signed fixed-point, rounding toward Zero&#34;. It is supported in Arm v8.3-A chips and later. Which is odd, because you don&#39;t expect to see JavaScript so close to the bare metal.</p><p>FJCVTZS是浮点Javascript转换为有符号定点，四舍五入为零。它在ARM v8.3-A芯片和更高版本中受支持。这很奇怪，因为你没想到JavaScript会离裸机这么近。</p><p> I can find explanations of what the instruction does, but not why it exists.  This thread says &#34;it exists as a single instruction is because JS&#39;s lack of an integer type means certain use cases need this operation obscenely often for no good algorithmic reason.&#34;. That&#39;s plausible but I would like a more detailed understanding.</p><p>我可以找到指令作用的解释，但找不到它存在的原因。这个线程说它是作为一条指令存在的，因为JS&#34；缺少整数类型，这意味着某些用例经常因为没有很好的算法原因而令人讨厌地需要这个操作。这似乎是可能的，但我想要更详细的了解。</p><p>  Supporting that quote: The JavaScript engine has to do this operation (which is called   ToInt32 in the spec) whenver you apply a bitwise operator to a number and at various other times (unless the engine has been able to maintain the number as an integer as an optimization, but in many cases it cannot). –  T.J. Crowder</p><p>支持这句话：每当您对数字应用按位运算符时，JavaScript引擎都必须执行此操作(在规范中称为ToInt32)，并且在其他各种时间(除非引擎能够将数字作为优化保持为整数，但在许多情况下它不能)。--T·J·克劳德(T.J.Crowder)。</p><p>  Note that the crucial difference to the usual  FCVTZS instruction provided for this job is that  FJCVTZS has a different behaviour on overflow. Namely, you always get the least 32 bits whereas  FCVTZS seems to do something different instead if the number doesn&#39;t fit. The correct behaviour of  FJCVTZS seems to be slightly tricky to implement otherwise. –  fuz</p><p>请注意，与为此作业提供的通常FCVTZS指令的关键不同之处在于，FJCVTZS在溢出时具有不同的行为。也就是说，你总是得到最少的32位，而如果数字不合适，FCVTZS似乎会做一些不同的事情。否则，FJCVTZS的正确行为似乎有点难以实现。--米歇尔·福兹。</p><p>  @Tim I agree with TJ, minutes of the meeting are off-topic (and I suppose they&#39;re also restricted then hardly you can have them) but to run JavaScript on an ARM-powered device IS a thing, see  Building IoT devices with JavaScript –  Adriano Repetti</p><p>@Tim我同意TJ的观点，会议记录是离题的(我想它们也受到限制，所以你很难拥有它们)，但在ARM驱动的设备上运行JavaScript是一件事，请参见使用JavaScript构建物联网设备--阿德里亚诺·雷佩蒂(Adriano Repetti)。</p><p>  Try to reword your question so it doesn&#39;t ask for an off site resource but rather an (on site) explanation if you want to avoid having it closed. –  fuz</p><p>试着改写你的问题，这样它就不会要求非现场资源，而是要求(现场)解释，如果你不想让它关闭的话。--米歇尔·福兹。</p><p>    It is because JS uses double precision for the numbers, but if you want to perform operations with bits, the task is nontrivial, so a specific instruction to convert JS double into integer makes the thing easier.</p><p>这是因为JS对数字使用双精度，但是如果您想对位执行操作，这项任务不是微不足道的，所以将JS Double转换为整数的特定指令会让事情变得更容易。</p><p>  In order to add more information regarding fuz&#39;s comment, the differences between  FCVTZS and  FJCVTZS (both of them convert floating point to int) are that in case of overflow,  FJCVTZS value will be 0x80000000 instead of overflowing. Furthermore,  FJCVTZS can generate an exception in order to indicate how the conversion was (i.e. inexact).</p><p>FCVTZS和FJCVTZS(都是将浮点转换为整型)的不同之处在于，如果出现溢出，FJCVTZS的值将是0x80000000，而不是溢出，以便添加更多关于Fuz&#39；注释的信息。此外，FJCVTZS可以生成异常，以指示转换是如何进行的(即不精确)。</p><p>  You should explain why the existing  FCVTZS instruction is insufficient for the task. –  fuz</p><p>您应该解释为什么现有的FCVTZS指令不足以完成任务。--米歇尔·福兹。</p><p>  It&#39;s not insufficient, it&#39;s much SLOWER (let&#39;s say at least 2/3 times) because it requires 10 different instructions to perform the same task. Of course impact on a larger algorithm is MUCH lower than that but when working on a smaller A53 both speed and memory will benefit of this.) Now let&#39;s move this to, for example, V8 compiled for ARM and it will definitely be worthy of some CPU space. –  Adriano Repetti</p><p>这还不够，它的速度要慢得多(比方说至少要慢2/3倍)，因为它需要10条不同的指令来执行相同的任务。当然，对较大的算法的影响远低于此，但当使用较小的A53时，速度和内存都将从中受益。)。现在，让我们把它移到，例如，为ARM编译的V8，它绝对值得一些CPU空间。--阿德里亚诺·雷佩蒂(Adriano Repetti)。</p><p>      By clicking “Post Your Answer”, you agree to our  terms of service,  privacy policy and  cookie policy</p><p>点击“发布您的答案”，即表示您同意我们的服务条款、隐私政策和Cookie政策。</p><p>  Not the answer you&#39;re looking for? Browse other questions tagged       or  ask your own question.</p><p>不是你想要的答案吗？浏览标记的其他问题或提出您自己的问题。</p></div><div id="story_share_this"><div class="sharethis-inline-share-buttons"></div></div><div class="text-break sotry_link page_narrow"><a target="_blank" href="https://stackoverflow.com/questions/50966676/why-do-arm-chips-have-an-instruction-with-javascript-in-the-name-fjcvtzs">https://stackoverflow.com/questions/50966676/why-do-arm-chips-have-an-instruction-with-javascript-in-the-name-fjcvtzs</a></div><div class="story_tags page_narrow"><button type="button" class="btn btn-light my_tag"><a href="/tag/java/">#java</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/芯片/">#芯片</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/chips/">#chips</a></button></div></div><div class="shadow p-3 mb-5 bg-white rounded clearfix"><div class="container"><div class="row"><div class="col-sm"><div><a target="_blank" href="/story/1029327.html"><img src="http://img2.diglog.com/img/2020/10/thumb_3cd67f8c773c5df13d60d9d2e7f8918c.png" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1029327.html">512字节JavaScript的诺基亚Composer</a></div><span class="my_story_list_date">2020-10-17 4:54</span></div><div class="col-sm"><div><a target="_blank" href="/story/1028976.html"><img src="http://img2.diglog.com/img/2020/10/thumb_b434edf8b03f601cb419633506f70479.png" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1028976.html">Espruino：面向微控制器的JavaScript</a></div><span class="my_story_list_date">2020-10-15 22:35</span></div><div class="col-sm"><div><a target="_blank" href="/story/1028224.html"><img src="http://img2.diglog.com/img/2020/10/thumb_7435f494a1e069adaf13503eb261fb94.jpg" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1028224.html">Python正在变得比Java更受欢迎吗？</a></div><span class="my_story_list_date">2020-10-12 7:24</span></div><div class="col-sm"><div><a target="_blank" href="/story/1028163.html"><img src="http://img2.diglog.com/img/2020/10/thumb_d820a15c34fa6622e9fcde97f6466fc7.png" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1028163.html">请停止对外部JavaScript库使用CDN</a></div><span class="my_story_list_date">2020-10-11 21:37</span></div></div></div></div><div class="my_movie_list_item shadow p-3 mb-5 bg-white rounded"><button type="button" class="btn btn-link my_tag"><a href="/tag/web2.0/">#web2.0</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/google/">#google</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/设计/">#设计</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/游戏/">#游戏</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/创意/">#创意</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/apple/">#apple</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/苹果/">#苹果</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/摄影/">#摄影</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/软件/">#软件</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/美国/">#美国</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/iphone/">#iphone</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/图片/">#图片</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/手机/">#手机</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/视频/">#视频</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/广告/">#广告</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/免费/">#免费</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/谷歌/">#谷歌</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/网站/">#网站</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/windows/">#windows</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/微软/">#微软</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/下载/">#下载</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/firefox/">#firefox</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/音乐/">#音乐</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/linux/">#linux</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/blog/">#blog</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/博客/">#博客</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/程序/">#程序</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/艺术/">#艺术</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/web/">#web</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/wordpress/">#wordpress</a></button></div></div></div><div id="my_footer"><div class=""><a href="/tags/">tags</a> <a href="/users/">users</a></div>&copy; 2020 diglog.com </div></div></body></html>