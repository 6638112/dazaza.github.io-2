<!doctype html><html lang="zh-hans"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>DIY船监控系统 DIY Boat Monitoring System</title><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"><link rel="stylesheet" href="/img/css.css?random="><link data-rh="true" rel="icon" href="/img/favicon.ico"/><script data-ad-client="ca-pub-6067137220025946" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script type="text/javascript" src="https://platform-api.sharethis.com/js/sharethis.js#property=5effb96910009800120b8d4d&product=inline-share-buttons" async="async"></script>
<script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?03c1a0f31299b4a2fbb83c34d6beaac9";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script></head><body><div id="my_header"><div class="container"><nav class="navbar navbar-expand-lg"><a class="navbar-brand" href="/"><img alt="diglog" src="/img/logo.v1.gif" class="rounded-sm"></a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarNavAltMarkup"><div class="navbar-nav"></div></div></nav></div></div><div class="container"><div id="my_content"><h1 class="page_narrow">DIY Boat Monitoring System<br/>DIY船监控系统 </h1><div class="row"><div class="col-lg-12 col-12"><div class="my_story_list_item shadow p-3 mb-5 bg-white rounded"><div class="story_page_pub_time page_narrow">2021-05-06 23:41:22</div><div class="page_narrow text-break page_content"><p>Every morning when I get up there is an email ready for me from my boat. I can look at that and see that the main pump did not go on (good), that the small pump ran for it&#39;s usual 5 seconds (also good), that the battery is charged, the shore power is on, and the 12 volt vent fan is on. (all good) These all come to me from the marina WiFi and a module based on the amazing ESP-32. In these few pages I am going to tell you not only how I built it, but I am going to give you information you need to build one yourself. If you do decide to build one, there are some skills you will either need to have, or learn.  HERE are some of them. There is a second version of this project that is being built by a friend in The Netherlands that uses a G2 Cellular network. It is based on the same information I am sharing here and should be completed in the next few months.    This module draws very little power off the battery. It would probably run for a year before draining the battery and by then a typical battery would be dead anyway from self discharge. The unit wakes up every half hour for a fraction of a second if nothing is going on and for a few seconds if it has to send an email. I have it set to send an email at 6AM every morning just so I know the unit itself is working.  There are a couple of things that are unique to my boat and I am sure every boat owner will want something different. That is why I structured the software in a modular fashion so each task has a tab and the main program calls these tasks one after another. Each task can add to the final report and indicate if its report needs to go out right away, or only on the daily status call.  To the right is a copy of one of the emails my boat sent me. It tells me everything is OK. A bit of background. My boat is old and wood and leaks. The main thing I want to know is the conditions of the pumps. I have a large pump that only goes off if the small pump fails or the boat is trying to sink. If the float switch lifts, the monitor wakes up and sends an email alerting me. Otherwise, I run the small pump and monitor how long it stays on. It is an auto pump that normally goes on every 2 1/2 minutes and fails every 4 years. With the monitor, it goes on once a day once it builds up a history of not pumping significant water. Hopefully this will extend its life beyond 4 years. The monitor knows if I take the boat out when I turn on the main boat power and switches the small pump to auto and otherwise stops monitoring. But when the main power is back on, the pump will initially run every half hour and then every hour and then after about a day it will only be running once a day. If sailing opened up the seams and the boat takes more time to seal itself up, the monitor will know and keep running the pump more often to keep up. The other thing that is unique is that I have a very powerful 12 volt fan in the bow to keep the boat dry. But I don&#39;t want that fan running if either the battery gets low or shore power is off. Both these conditions are monitored and if detected the fan is turned off until the situation is corrected. To accomplish these tasks, there are two relays in the module. They are what is called latching relays which means a 20 mS pulse on one line will close the relay and a similar pulse on another line will open it. There is no power draw otherwise. There are two analog to digital converters (ADC) utilized on the ESP32 to measure the two 12 volt batteries.  In the pages that follow I will discuss the following. You can click on any of these to jump to that page or click on NEXT at the bottom to go to the next page.</p><p>每天早上我起床的时候有一封电子邮件从我的船上为我准备好了。我可以看看那个，看主泵没有继续（好），那个小泵跑到它＆＃39;通常5秒（也很好），电池被充电，岸上电源打开，并且12伏通风扇在开启。 （一切都很好）这些都从Marina WiFi和一个基于惊人的ESP-32的模块来到我身边。在这几个页面中，我将不仅告诉您如何建造它，但我将为您提供所需的信息来构建一个。如果您确实决定建立一个，那么您需要有一些技能，要么学习。这里是其中的一些。该项目的第二个版本是由荷兰的朋友建造，该项目在荷兰使用G2蜂窝网络。它基于我在这里分享的相同信息，并应在未来几个月内完成。该模块借出电池电源很少。在排出电池之前，它可能会运行一年，然后通过自我放电无论如何，典型的电池将死亡。如果没有任何事情，如果没有发送电子邮件，该装置将稍微唤醒每半小时的一分的一小部分。我已经设置了每天早上6点发送电子邮件，所以我知道本机本身正在运作。我的船上有几件事是独一无二的，我相信每艘船所有者都会想要一些不同的东西。这就是为什么我以模块化方式构建软件，所以每个任务都有一个标签，主程序陆续调用这些任务。每个任务都可以添加到最终报告，并指出其报告是否需要立即出发，或者仅在日常状态呼叫上。右边是我乘船发给我的一封电子邮件的副本。它告诉我一切都好。有点背景。我的船是旧的和木头和泄漏。我想知道的主要是泵的条件。如果小型泵失败或船正试图沉没，我有一个大型泵。如果浮动开关升降机，监视器唤醒并发送电子邮件警告我。否则，我运行小泵并监视它保持持续时间。它是一款通常每2 1/2分钟的自动泵，每4年一次失效。使用监视器，一旦它建立了不泵送了大量水的历史，它就会每天一次。希望这将延长其生活超过4年。当我打开主船电源并将小型泵切换到自动时，监视器知道我是否拿出船只。但是当主电源重新开始时，泵最初将每半小时运行，然后每小时一次，然后大约一天，它只会每天运行一次。如果帆船打开接缝，船只需要更多的时间来密封自己，监视器会知道并更频繁地运行泵以便跟上。另一件是独一无二的，我在船头上有一个非常强大的12伏风扇，以保持船干燥。但是，如果电池电量低电平或岸电源关闭，我不希望该风扇运行。监控这两个条件，如果检测到风扇关闭，直到纠正情况。要完成这些任务，模块中有两个继电器。它们是所谓的锁存继电器，这意味着在一条线上的20ms脉冲将关闭继电器，并且在另一线上的类似脉冲将打开它。否则没有动力推拉。 ESP32上使用了两个模拟转换器（ADC）以测量两个12伏电池。在遵循的页面中我将讨论以下内容。您可以单击其中的任何一个以跳转到该页面或单击底部的下一页以转到下一页。 </p></div><div id="story_share_this"><div class="sharethis-inline-share-buttons"></div></div><div class="text-break sotry_link page_narrow"><a target="_blank" href="https://l-36.com/DIY-boat-monitoring-system.php">https://l-36.com/DIY-boat-monitoring-system.php</a></div><div class="story_tags page_narrow"><button type="button" class="btn btn-light my_tag"><a href="/tag/监控/">#监控</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/boat/">#boat</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/监视器/">#监视器</a></button></div></div><div class="my_movie_list_item shadow p-3 mb-5 bg-white rounded"><button type="button" class="btn btn-link my_tag"><a href="/tag/web2.0/">#web2.0</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/google/">#google</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/设计/">#设计</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/创意/">#创意</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/摄影/">#摄影</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/图片/">#图片</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/游戏/">#游戏</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/软件/">#软件</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/视频/">#视频</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/广告/">#广告</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/手机/">#手机</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/iphone/">#iphone</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/网站/">#网站</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/免费/">#免费</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/下载/">#下载</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/windows/">#windows</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/apple/">#apple</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/微软/">#微软</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/firefox/">#firefox</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/blog/">#blog</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/苹果/">#苹果</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/音乐/">#音乐</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/博客/">#博客</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/wordpress/">#wordpress</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/恶搞/">#恶搞</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/qq/">#qq</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/艺术/">#艺术</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/web/">#web</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/工具/">#工具</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/分享/">#分享</a></button></div></div></div><div id="my_footer"><div class=""><a href="/tags/">tags</a> <a href="/users/">users</a></div>&copy;2012-2021 diglog.com </div></div></body></html>