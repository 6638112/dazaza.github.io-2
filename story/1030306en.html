<!doctype html><html lang="zh-hans"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Reaction v17.0</title><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"><link rel="stylesheet" href="/img/css.css?random="><link data-rh="true" rel="icon" href="/img/favicon.ico"/><script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?03c1a0f31299b4a2fbb83c34d6beaac9";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script><script data-ad-client="ca-pub-6067137220025946" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script type="text/javascript" src="https://platform-api.sharethis.com/js/sharethis.js#property=5effb96910009800120b8d4d&product=inline-share-buttons" async="async"></script></head><body><div id="my_header"><div class="container"><nav class="navbar navbar-expand-lg"><a class="navbar-brand" href="/"><img alt="diglog" src="/img/logo.v1.gif" class="rounded-sm"></a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarNavAltMarkup"><div class="navbar-nav"></div></div></nav></div></div><div class="container"><div id="my_content"><h1 class="page_narrow">Reaction v17.0</h1><div class="row"><div class="col-lg-12 col-12"><div class="my_story_list_item shadow p-3 mb-5 bg-white rounded"><div class="story_page_pub_time page_narrow">2020-10-21 21:32:01</div><div class="story_img_container"><a href="http://img2.diglog.com/img/2020/10/6d24beff447f24869b2bc45eca6b3503.png"><img src="http://img2.diglog.com/img/2020/10/6d24beff447f24869b2bc45eca6b3503.png" class="img-fluid my_story_img" onerror="this.style.display='none'"></a></div><div class="page_narrow text-break page_content"><p>Today, we are releasing React 17! We’ve written at length about the role of the React 17 release and the changes it contains in  the React 17 RC blog post. This post is a brief summary of it, so if you’ve already read the RC post, you can skip this one.</p><p>今天，我们将发布Reaction 17！我们已经在REACTION 17RC博客文章中详细介绍了REACTION 17版本的作用和它所包含的更改。这篇文章是对它的简要总结，所以如果你已经读过RC文章，你可以跳过这篇文章。</p><p>  The React 17 release is unusual because it doesn’t add any new developer-facing features. Instead, this release is primarily focused on  making it easier to upgrade React itself.</p><p>REACTION 17版本不同寻常，因为它没有添加任何面向开发人员的新功能。相反，此版本主要侧重于简化Reaction本身的升级。</p><p> In particular, React 17 is a “stepping stone” release that makes it safer to embed a tree managed by one version of React inside a tree managed by a different version of React.</p><p>具体地说，Reaction 17是使将由一个版本Reaction管理的树嵌入由不同版本的React管理的树内变得更安全的“垫脚石”版本。</p><p>   React 17 enables gradual React upgrades. When you upgrade from React 15 to 16 (or, this time, from React 16 to 17), you would usually upgrade your whole app at once. This works well for many apps. But it can get increasingly challenging if the codebase was written more than a few years ago and isn’t actively maintained. And while it’s possible to use two versions of React on the page, until React 17 this has been fragile and caused problems with events.</p><p>Reaction 17支持逐步的Reaction升级。当你从RECTION 15升级到16(或者，这一次是从REACTION 16升级到17)时，你通常会一次升级整个应用程序。这对许多应用程序都很有效。但是，如果代码库是在几年前编写的，并且没有积极维护，那么它可能会变得越来越有挑战性。虽然可以在页面上使用两个版本的Reaction，但在Reaction 17之前，这是脆弱的，并且会导致事件问题。</p><p> We’re fixing many of those problems with React 17. This means that  when React 18 and the next future versions come out, you will now have more options. The first option will be to upgrade your whole app at once, like you might have done before. But you will also have an option to upgrade your app piece by piece. For example, you might decide to migrate most of your app to React 18, but keep some lazy-loaded dialog or a subroute on React 17.</p><p>我们正在用Reaction 17解决其中的许多问题，这意味着当Reaction 18和下一个未来版本发布时，你现在将有更多的选择。第一个选择是一次性升级你的整个应用程序，就像你以前可能做的那样。但您也可以选择逐个升级您的应用程序。例如，您可能决定将应用程序的大部分迁移到REACTION 18，但在REACTION 17上保留一些延迟加载的对话框或子路由。</p><p> This doesn’t mean you  have to do gradual upgrades.  For most apps, upgrading all at once is still the best solution. Loading two versions of React — even if one of them is loaded lazily on demand — is still not ideal. However, for larger apps that aren’t actively maintained, this option makes sense to consider, and React 17 lets those apps not get left behind.</p><p>这并不意味着你必须逐步升级。对于大多数应用程序来说，一次性升级仍然是最好的解决方案。加载两个版本的Reaction-即使其中一个是按需延迟加载的-仍然不理想。然而，对于没有积极维护的大型应用程序，考虑这个选项是有意义的，并且REPACTION 17让这些应用程序不会被抛在后面。</p><p> We’ve prepared an  example repository demonstrating how to lazy-load an older version of React if necessary. This demo uses Create React App, but it should be possible to follow a similar approach with any other tool. We welcome demos using other tooling as pull requests.</p><p>我们已经准备了一个示例存储库，演示如何在必要时延迟加载较旧版本的Reaction。本演示使用create Reaction App，但是应该可以使用任何其他工具遵循类似的方法。我们欢迎使用其他工具作为拉式请求的演示。</p><p> We’ve  postponed other changes until after React 17. The goal of this release is to enable gradual upgrades. If upgrading to React 17 were too difficult, it would defeat its purpose.</p><p>我们已经将其他更改推迟到Reaction 17之后。此版本的目标是实现逐步升级。如果升级到Reaction 17太难了，那就违背了它的目的。</p><p>  To enable gradual updates, we’ve needed to make some changes to the React event system. React 17 is a major release because these changes are potentially breaking. You can check out our  versioning FAQ to learn more about our commitment to stability.</p><p>要启用渐进式更新，我们需要对Reaction事件系统进行一些更改。Reaction 17是一个主要版本，因为这些更改可能会造成破坏。您可以查看我们的版本控制常见问题解答，了解更多关于我们对稳定性的承诺。</p><p> In React 17, React will no longer attach event handlers at the  document level under the hood. Instead, it will attach them to the root DOM container into which your React tree is rendered:</p><p>在REACTION 17中，REACT将不再在幕后附加文档级的事件处理程序。相反，它会将它们附加到呈现反应树的根DOM容器中：</p><p>  In React 16 and earlier, React would do  document.addEventListener() for most events. React 17 will call  rootNode.addEventListener() under the hood instead.</p><p>在REACTION 16和更早版本中，REACTION将对大多数事件执行Document.addEventListener()。REACTION 17将在幕后调用rootNode.addEventListener()。</p><p>  We’ve confirmed that  numerous  problems  reported  over  the  years  on  our  issue  tracker related to integrating React with non-React code have been fixed by the new behavior.</p><p>我们已经确认，多年来在我们的问题跟踪器上报告的大量与集成Reaction和非Reaction代码相关的问题已经通过新的行为得到了修复。</p><p> If you run into issues with this change,  here’s a common way to resolve them.</p><p>如果您在此更改中遇到问题，这里有一个解决问题的常用方法。</p><p>  The React 17 RC blog post describes the rest of the breaking changes in React 17.</p><p>REACTION 17RC的博客文章描述了REACTION 17中的其余突破性变化。</p><p> We’ve only had to change fewer than twenty components out of 100,000+ in the Facebook product code to work with these changes, so  we expect that most apps can upgrade to React 17 without too much trouble. Please  tell us if you run into problems.</p><p>我们只需要更改Facebook产品代码中10万+个组件中的不到20个组件就可以处理这些更改，所以我们预计大多数应用程序都可以毫不费力地升级到17个。如果你遇到问题，请告诉我们。</p><p>  React 17 supports the  new JSX transform. We’ve also backported support for it to React 16.14.0, React 15.7.0, and 0.14.10. Note that it is completely opt-in, and you don’t have to use it. The classic JSX transform will keep working, and there are no plans to stop supporting it.</p><p>REACTION 17支持新的JSX转换。我们还支持它响应16.14.0、响应15.7.0和0.14.10。请注意，它完全是选择加入的，您不必使用它。经典的JSX转换将继续工作，并且没有停止支持它的计划。</p><p>  React Native has a separate release schedule. We currently expect the support for React 17 to land in React Native 0.65, but the exact version is subject to change. As always, you can track the release discussions on the React Native Community releases  issue tracker.</p><p>Reaction Native有一个单独的发布时间表。我们目前预计对REACTION 17的支持将在REACTION Native 0.65中落地，但具体版本可能会发生变化。一如既往，您可以在Reaction Native Community发布问题跟踪器上跟踪发布讨论。</p><p>             Stop exposing internals that won’t be needed by React Native Web. ( @necolas in  #18483)</p><p>停止公开Reaction Native Web不需要的内部内容。(@#18483中的Necolas)。</p><p>  Disable  console in the second render pass of DEV mode double render. ( @sebmarkbage in  #18547)</p><p>在DEV模式双渲染的第二个渲染过程中禁用控制台。(#18547中的@sebmarkpage)。</p><p>      Disable  &lt;div hidden /&gt; prerendering in favor of a different future API. ( @acdlite in  #18917)</p><p>禁用&lt；div隐藏/&gt；预渲染以支持不同的未来API。(#18917中的@acdlite)。</p><p>        Fix a bug causing dropped updates in a suspended tree. ( @acdlite in  #18384 and  #18457)</p><p>修复导致挂起树中的更新丢失的错误。(#18384和#18457中的@acdlite)。</p><p>     Fix a bug with inputs that may cause updates to be dropped. ( @jddxf in  #18515 and  @acdlite in  #18535)</p><p>修复可能导致更新丢失的输入错误。(#18515中的@jddxf和#18535中的@acdlite)。</p><p>  Don’t cut off the tail of a SuspenseList if hydrating. ( @sebmarkbage in  #18854)</p><p>如果要补水，不要剪掉悬挂表的尾巴。(#18854中的@sebmarkpage)</p></div><div id="story_share_this"><div class="sharethis-inline-share-buttons"></div></div><div class="text-break sotry_link page_narrow"><a target="_blank" href="https://reactjs.org/blog/2020/10/20/react-v17.html">https://reactjs.org/blog/2020/10/20/react-v17.html</a></div><div class="story_tags page_narrow"><button type="button" class="btn btn-light my_tag"><a href="/tag/reaction/">#reaction</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/react/">#react</a></button></div></div><div class="my_movie_list_item shadow p-3 mb-5 bg-white rounded"><button type="button" class="btn btn-link my_tag"><a href="/tag/web2.0/">#web2.0</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/google/">#google</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/设计/">#设计</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/游戏/">#游戏</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/创意/">#创意</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/apple/">#apple</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/苹果/">#苹果</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/摄影/">#摄影</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/软件/">#软件</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/美国/">#美国</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/iphone/">#iphone</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/图片/">#图片</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/手机/">#手机</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/视频/">#视频</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/广告/">#广告</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/免费/">#免费</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/谷歌/">#谷歌</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/网站/">#网站</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/windows/">#windows</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/微软/">#微软</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/下载/">#下载</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/firefox/">#firefox</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/音乐/">#音乐</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/linux/">#linux</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/blog/">#blog</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/博客/">#博客</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/程序/">#程序</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/艺术/">#艺术</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/web/">#web</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/wordpress/">#wordpress</a></button></div></div></div><div id="my_footer"><div class=""><a href="/tags/">tags</a> <a href="/users/">users</a></div>&copy; 2020 diglog.com </div></div></body></html>