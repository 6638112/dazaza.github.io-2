<!doctype html><html lang="zh-hans"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>YAML中的恐惧与厌恶</title><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"><link rel="stylesheet" href="/img/css.css?random="><link data-rh="true" rel="icon" href="/img/favicon.ico"/><script data-ad-client="ca-pub-6067137220025946" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script type="text/javascript" src="https://platform-api.sharethis.com/js/sharethis.js#property=5effb96910009800120b8d4d&product=inline-share-buttons" async="async"></script>
<script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?03c1a0f31299b4a2fbb83c34d6beaac9";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script></head><body><div id="my_header"><div class="container"><nav class="navbar navbar-expand-lg"><a class="navbar-brand" href="/"><img alt="diglog" src="/img/logo.v1.gif" class="rounded-sm"></a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarNavAltMarkup"><div class="navbar-nav"></div></div></nav></div></div><div class="container"><div id="my_content"><h1 class="page_narrow">YAML中的恐惧与厌恶</h1><div class="row"><div class="col-lg-12 col-12"><div class="my_story_list_item shadow p-3 mb-5 bg-white rounded"><div class="story_page_pub_time page_narrow">2020-10-22 08:56:58</div><div class="story_img_container"><a href="http://img2.diglog.com/img/2020/10/b845304aa3707fc195c9ba3b1247a568.jpg"><img src="http://img2.diglog.com/img/2020/10/b845304aa3707fc195c9ba3b1247a568.jpg" class="img-fluid my_story_img" onerror="this.style.display='none'"></a></div><div class="page_narrow text-break page_content"><p>这篇文章最初是作为DevOps‘ish188的介绍而写的，已经根据反馈进行了修改，并被认为值得作为自己的博客文章分享。</p><p>有一天，当我建议人们查看yq时，我们有点陷入困境，“这个项目的目标是成为yaml文件的jq或sed。”首先，这个项目没有什么问题。我喜欢它，我发现这个工具很有用，仅此而已。但这场伟大的辩论开始于我们的主和救世主YAML。是的，我知道，XML、JSON、YAML、TOML、接下来是一场令人厌倦的老争论。</p><p>让我把水平定在这里。我经常开玩笑说，我是一名“日历驱动的YAML工程师”，多年来一直在使用openShift.tv。但是我不太喜欢YAML。让我给你讲个故事…。</p><p>2012年，我在麦克拉奇互动公司(McClatchy Interactive)工作(在真正黑暗的时期之前)，我喜欢我正在做的系统和安全工作。我们把我们的机器创造归结为有限科学。裸机启动后，您将MAC地址输入到一个数据库文件中，然后离开机器去获取所有所需的打包和代码，以便在我们的基础架构中按照其定义的目的运行。</p><p>CFEngine根据目的对机器进行了相应的配置，并将其放置在网络中，为代码部署做好了准备。DevOps是该公司当时正在拥抱的东西。因此，DevOps Tandem当时没有使用现有的CFEngine基础设施，而是使用Puppet进行代码部署。这个系统一直运行得很好，直到不是这样。基础设施(数据中心的典型IT)和软件部署和配置(开发人员)之间有明显的界限。在我们的案例中，DevOps更多地代表开发团队，而不是运营团队。听起来耳熟吗？</p><p>但是，正如你可以想象的那样，即使所有的自动化都到位了，这仍然是一种让人望而却步的场景。当由于修改代码库而需要安装系统包(例如，需要更新版本的Perl)或使用不同操作系统包的新服务上线时，Puppet现在必须执行CFEngine正在执行的任务：系统管理。我们的想法是建立一个全面的WebOps团队，该团队具有跨职能、精力充沛、技术含量高的特点。DevOps领导向团队下达的第一条法令是，“阅读YAML规范。”我们都跳进了傀儡池，以帮助更好地整合我们的流程和程序。</p><p>“Ugh…”我心里想。“我必须阅读这份写得很糟糕的说明书。”它不是我喜欢读的RFC，但是关于YAML规范的一些事情让我感到难过和沮丧。语法真的很重要。空格真的很重要。我的经历告诉我，死记硬背和让人类看到某些东西的缺失是一项令人难以置信的困难任务。这些都是大多数黑客在侵入系统时所利用的东西。人类找不到东西或记忆东西的能力不如计算机。出于这些原因，我不太喜欢这种非标记语言。</p><p>令我恼火的是，YAML的创建者将目标#1定为“YAML易于被人类阅读”。它是人类可读的，因为您在标量和结构中看到了人类可读的单词，但是YAML有一些令人不快的地方。它是一种自称不是标记语言的标记语言。我坚信，标记语言应该让人类的事情变得更简单，而不是更难(在我看来，XML是标记语言的对立面)。</p><p>在这里，我是DevOps游戏的新手，学习了一些核心的开发人员概念来理解标记语言，其中的关键是两个阿喀琉斯之踵。我也不喜欢和木偶一起工作，因为它太大、太笨重、太笨重了。但是，在这里，我被头朝下推到了这个世界上。不妨好好利用一下。从那以后，我接受了YAML，但这并不意味着我要用YAML格式写我的笔记。</p><p>DevOps，Cloud Native，Open Source，行业新闻，以及由开源专业人士、DevOps领导者和云本地计算基金会(Cloud Native Computing Foundation，CNCF)大使Chris Short汇集的“ISH”。</p><p>我们使用SendinBlue作为我们的营销平台。单击下面提交此表格，即表示您确认您提供的信息将根据其使用条款传输到SendinBlue进行处理。</p><p>近十年后，我看到了YAML同样的令人不快的光芒。它对新人并不友好，就像git不友好一样。库伯内斯几乎滥用了yaml，以至于它成了笑柄。我们也已经坚持了很长一段时间。如果Kubernetes是未来的平台，这意味着我们将使用2009年编写的规范，一直持续到本世纪30年代(可能还会更久)。</p><p>我希望有可能减少替换量。我们需要像yq这样的工具，这一事实确实表明，当涉及到规模化的YAML野兽时，还有一些工作要做。在2009年，当最新版本的YAML规范被编写时，还没有人想到将Pod安全策略应用于遍布世界各地数据中心的大规模Kubernetes部署。将来会有更好的东西出现，我希望采用它不会像采用YAML那样痛苦。</p><p>请记住，将事物与喜欢的事物进行相对比较(YAML与XML或YAML与JSON)完全会打乱初学者的旅程。从新手开始，从那里往前走。YAML不是。Git不是。逐渐地，YAML比XML更好，但与HTML或Markdown(我可以教给高管和孩子们一样的东西)相比，它很糟糕。是的，平衡机器和人类的可读性是很困难的。妥协很糟糕，但在某种程度上，有足够的计算来运行一个进程，以接收100%人类可读的东西，并使其100%机器可读。在同样意义上，计算机已经变得非常容易获得，以至于我们现在几乎所有的HTTP流量都是gzip和加密的，我希望我们可以用系统配置语言做同样的事情。将复杂性从人类转移到代码。计算机在记忆事物和句法语义方面比人类所希望的要好得多。</p><p>在人和机器的可读性之间总是有一个令人愉快的中介。然而，我更愿意在这里看到一种以人为本，80-20的方法，在这种方法中，入门级技能可以解决80%的标记语言用例。在我看来，这才是真正的涅槃。总是会有复杂性，并且需要了解您正在使用的工具。但是，YAML给了我们一个例子，可以也应该有更好的东西。</p></div><div id="story_share_this"><div class="sharethis-inline-share-buttons"></div></div><div class="text-break sotry_link page_narrow"><a target="_blank" href="https://chrisshort.net/fear-and-loathing-in-yaml/">https://chrisshort.net/fear-and-loathing-in-yaml/</a></div><div class="story_tags page_narrow"><button type="button" class="btn btn-light my_tag"><a href="/tag/恐惧/">#恐惧</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/loathing/">#loathing</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/yaml/">#yaml</a></button></div></div><div class="my_movie_list_item shadow p-3 mb-5 bg-white rounded"><button type="button" class="btn btn-link my_tag"><a href="/tag/web2.0/">#web2.0</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/google/">#google</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/设计/">#设计</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/创意/">#创意</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/摄影/">#摄影</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/游戏/">#游戏</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/图片/">#图片</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/软件/">#软件</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/视频/">#视频</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/手机/">#手机</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/广告/">#广告</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/apple/">#apple</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/iphone/">#iphone</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/网站/">#网站</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/免费/">#免费</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/下载/">#下载</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/windows/">#windows</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/微软/">#微软</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/firefox/">#firefox</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/苹果/">#苹果</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/blog/">#blog</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/音乐/">#音乐</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/博客/">#博客</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/wordpress/">#wordpress</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/恶搞/">#恶搞</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/艺术/">#艺术</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/qq/">#qq</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/web/">#web</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/谷歌/">#谷歌</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/工具/">#工具</a></button></div></div></div><div id="my_footer"><div class=""><a href="/tags/">tags</a> <a href="/users/">users</a></div>&copy;2012-2021 diglog.com </div></div></body></html>