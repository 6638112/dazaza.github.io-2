<!doctype html><html lang="zh-hans"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>将Git分支移动到新基地Moving a Git branch to a new base</title><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"><link rel="stylesheet" href="/img/css.css?random="><link data-rh="true" rel="icon" href="/img/favicon.ico"/><script data-ad-client="ca-pub-6067137220025946" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script type="text/javascript" src="https://platform-api.sharethis.com/js/sharethis.js#property=5effb96910009800120b8d4d&product=inline-share-buttons" async="async"></script>
<script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?03c1a0f31299b4a2fbb83c34d6beaac9";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script></head><body><div id="my_header"><div class="container"><nav class="navbar navbar-expand-lg"><a class="navbar-brand" href="/"><img alt="diglog" src="/img/logo.v1.gif" class="rounded-sm"></a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarNavAltMarkup"><div class="navbar-nav"></div></div></nav></div></div><div class="container"><div id="my_content"><h1 class="page_narrow">Moving a Git branch to a new base<br/>将Git分支移动到新基地</h1><div class="row"><div class="col-lg-12 col-12"><div class="my_story_list_item shadow p-3 mb-5 bg-white rounded"><div class="story_page_pub_time page_narrow">2022-02-14 16:44:31</div><div class="page_narrow text-break page_content"><p>Suppose you have some work on a git branch that you started from one branch,and you want to move that work to be based on a different branch, as if you hadstarted from there originally. The git rebase command gives you the tools to doit, but it’s complicated, and I can never remember the details, so I finallyfigured it out and made an alias to do it.</p><p>假设您在一个git分支上有一些工作是从一个分支开始的，您希望将这些工作转移到另一个分支上，就好像您最初是从那里开始的一样。git-rebase命令为您提供了执行此操作的工具，但它很复杂，而且我永远记不住细节，所以我最终对其进行了配置，并使用了一个别名来执行此操作。</p><p> In this post I’ll use an example where I’m working on branch “my-work”, whichI started from “old-home” and I want to move it to “new-home”. My initial statelooks like this:</p><p>在这篇文章中，我将使用一个例子，我正在“我的工作”分支上工作，它从“旧家”开始，我想把它搬到“新家”。我最初的状态是这样的：</p><p> % git log --oneline --decorate --graph --all * a8ab80e (HEAD -&gt; my-work) my work edit 2 * 5f66562 my work edit 1 | * 9682932 (old-home) old-home edit 3 |/ * 98d09e4 old-home edit 2 * a6fa334 old-home edit 1 | * e409e95 (new-home) new-home edit 2 | * 7d3ca09 new-home edit 1 |/ * 1b008d5 (main) main edit 2 * e9152aa main edit 1</p><p>%git日志--一行--装饰--图表--所有*a8ab80e（HEAD-&gt；我的工作）我的工作编辑2*5f66562我的工作编辑1 |*9682932（旧家）旧家编辑3 |/*98d09e4旧家编辑2*a6fa334旧家编辑1 |*e409e95（新家）新家编辑2 |*7d3ca09新家编辑1 |/*1b008d5（主）主编辑2*e9152aa主编辑1</p><p> The git tool to perform a move like this is “git rebase --onto”. The generalform of the command needs three pieces of information, but the third is thebranch to move, which defaults to the current branch, so we can just omit that.The other two items are: where you want to snip the current branch from, andwhere you want to graft it onto. The command looks like this:</p><p>执行这种移动的git工具是“git rebase--On”。命令的一般形式需要三条信息，但第三条是要移动的分支，它默认为当前分支，所以我们可以忽略它。另外两项是：你想从哪里剪断当前的分支，以及你想把它移植到哪里。命令如下所示：</p><p>  In our example, we want to snip the branch from the point where it started onold-home. The “git merge-base” command can tell us the commit where twobranches diverge, so it’s perfect for this:</p><p>在我们的示例中，我们希望从旧家开始的位置剪断分支。“git merge base”命令可以告诉我们两个分支发散的位置，因此它非常适合：</p><p>     % git log --oneline --decorate --graph --all * df22106 (HEAD -&gt; my-work) my work edit 2 * 9ac8707 my work edit 1 * e409e95 (new-home) new-home edit 2 * 7d3ca09 new-home edit 1 | * 9682932 (old-home) old-home edit 3 | * 98d09e4 old-home edit 2 | * a6fa334 old-home edit 1 |/ * 1b008d5 (main) main edit 2 * e9152aa main edit 1</p><p>%git日志--一行--装饰--图表--全部*df22106（HEAD-&gt；我的工作）我的工作编辑2*9ac8707我的工作编辑1*e409e95（新家）新家编辑2*7d3ca09新家编辑1 |*9682932（旧家）旧家编辑3 |*98d09e4旧家编辑2 |*a6fa334旧家编辑1 |/*1B08D5（主）主编辑2*e9152aa主编辑1</p><p>  [alias] movebranch = &#34;!f() { \     : git checkout \     git rebase --onto $2 $(git merge-base $1 @) \ }; f&#34;</p><p>[别名]movebranch=&#34；！f（）{\：git checkout\git rebase--on$2$（git merge base$1@）\}；f&#34；</p><p>    % git log --oneline --decorate --graph --all * df22106 (HEAD -&gt; my-work) my work edit 2 * 9ac8707 my work edit 1 * e409e95 (new-home) new-home edit 2 * 7d3ca09 new-home edit 1 | * 9682932 (old-home) old-home edit 3 | * 98d09e4 old-home edit 2 | * a6fa334 old-home edit 1 |/ * 1b008d5 (main) main edit 2 * e9152aa main edit 1</p><p>%git日志--一行--装饰--图表--全部*df22106（HEAD-&gt；我的工作）我的工作编辑2*9ac8707我的工作编辑1*e409e95（新家）新家编辑2*7d3ca09新家编辑1 |*9682932（旧家）旧家编辑3 |*98d09e4旧家编辑2 |*a6fa334旧家编辑1 |/*1B08D5（主）主编辑2*e9152aa主编辑1</p><p> Thanks for sharing. I feel a bit better about my git frustrations knowing that you struggled to remember how to use it too. :)</p><p>谢谢分享。知道你也很难记住如何使用git，我对git的挫折感觉好了一点。：）</p><p> Name is required. Either email or web are required. Email won&#39;t be displayed and I won&#39;t spam you. Your web site won&#39;t be indexed by search engines.</p><p>姓名是必需的。需要电子邮件或网络。电子邮件赢得&#39；我不会被展示，我赢了&#39；不要给你发垃圾邮件。你的网站赢了&#39；不能被搜索引擎索引。</p></div><div id="story_share_this"><div class="sharethis-inline-share-buttons"></div></div><div class="story_tags page_narrow"><button type="button" class="btn btn-light my_tag"><a href="/tag/分支/">#分支</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/git/">#git</a></button></div></div><div class="my_movie_list_item shadow p-3 mb-5 bg-white rounded"><button type="button" class="btn btn-link my_tag"><a href="/tag/web2.0/">#web2.0</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/google/">#google</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/设计/">#设计</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/创意/">#创意</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/摄影/">#摄影</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/图片/">#图片</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/游戏/">#游戏</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/软件/">#软件</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/广告/">#广告</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/视频/">#视频</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/手机/">#手机</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/iphone/">#iphone</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/网站/">#网站</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/免费/">#免费</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/windows/">#windows</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/下载/">#下载</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/微软/">#微软</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/苹果/">#苹果</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/firefox/">#firefox</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/blog/">#blog</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/音乐/">#音乐</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/博客/">#博客</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/apple/">#apple</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/wordpress/">#wordpress</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/恶搞/">#恶搞</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/qq/">#qq</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/谷歌/">#谷歌</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/艺术/">#艺术</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/web/">#web</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/工具/">#工具</a></button></div></div></div><div id="my_footer"><div class=""><a href="/tags/">tags</a> <a href="/users/">users</a></div>&copy;2012-2021 diglog.com </div></div></body></html>