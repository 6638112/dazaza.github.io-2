<!doctype html><html lang="zh-hans"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>MiniFB：创建用于绘制像素的帧缓冲区的小型跨平台库</title><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"><link rel="stylesheet" href="/img/css.css?random="><link data-rh="true" rel="icon" href="/img/favicon.ico"/><script data-ad-client="ca-pub-6067137220025946" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script type="text/javascript" src="https://platform-api.sharethis.com/js/sharethis.js#property=5effb96910009800120b8d4d&product=inline-share-buttons" async="async"></script>
<script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?03c1a0f31299b4a2fbb83c34d6beaac9";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script></head><body><div id="my_header"><div class="container"><nav class="navbar navbar-expand-lg"><a class="navbar-brand" href="/"><img alt="diglog" src="/img/logo.v1.gif" class="rounded-sm"></a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarNavAltMarkup"><div class="navbar-nav"></div></div></nav></div></div><div class="container"><div id="my_content"><h1 class="page_narrow">MiniFB：创建用于绘制像素的帧缓冲区的小型跨平台库</h1><div class="row"><div class="col-lg-12 col-12"><div class="my_story_list_item shadow p-3 mb-5 bg-white rounded"><div class="story_page_pub_time page_narrow">2020-08-16 14:56:40</div><div class="story_img_container"><a href="http://img.diglog.com/img/2020/8/1382510e003774fc3ff6d6801eddd3dd.jpeg"><img src="http://img.diglog.com/img/2020/8/1382510e003774fc3ff6d6801eddd3dd.jpeg" class="img-fluid my_story_img" onerror="this.style.display='none'"></a></div><div class="page_narrow text-break page_content"><p>MiniFB(Mini FrameBuffer)是一个小型跨平台库，可以轻松地在窗口中渲染(32位)像素。示例是展示其工作原理的最佳方式：</p><p>Struct MFB_WINDOW*WINDOW=MFB_OPEN_EX(&#34；MY DISPLAY&#34；，800,600，WF_SIZABLE)；IF(！Window)返回0；FOR(；；){INT STATE；//TODO：向大小为800*600 STATE=MFB_UPDATE(BUFFER)；IF(STATE&lt；0)Break；}。</p><p>Void active(struct MFB_Window*Window，bool isActive){...}void resize(struct MFB_Window*Window，int width，int Height){...//您还可以选择更改视口大小mfb_set_viewport(window，x，y，width，high)；}void keyboard(struct mfb_window*window，mfb_key key，mfb_key_mod mod，bool isPressed){...//记住如果(key==KB_key_ESCRIDE){mfb_close(Window)；}fprintf(stdout，&#34；%s&&gt;；键盘：键：%s(按下：%d)[key_mod：%x]\n&#34；，WINDOW_TITLE，MFB_GET_KEY_NAME(Key)，isPressed，mod)；}void char_input(struct MFB_Window*Window，unsign int charCode){...}void MICE_BTN(struct MFB_Window*Window，MFB_MOID_BUTTON，MFB_KEY_MOD MOD，bool isPressed){...}//明智地使用此事件。可能发送的频率太高了：void MOUSE_MOVE(struct MFB_Window*Window，int x，int y){...}//鼠标滚轮void MICE_SCROLL(struct MFB_Window*Window，MFB_Key_mod mod，Float deltaX，Float DeltaY){...}struct MFB_Window*Window=mfb_open_ex(&#34；my display&#34；My display&#34；800,600，WF_Resizable)；IF(！window。Mfb_set_resize_callback(窗口，调整大小)；mfb_set_keyboard_callback(窗口，键盘)；mfb_set_char_input_callback(窗口，char_input)；mfb_set_ouse_button_callback(窗口，鼠标_btn)；mfb_set_ouse_move_callback(窗口，鼠标移动)；mfb_set_ouse_scroll_callback(窗口，鼠标_滚动)；</p><p>Bool mfb_is_window_active(struct mfb_window*window)；unsign mfb_get_window_width(struct mfb_window*window)；unsign mfb_get_window_Height(struct mfb_window*window)；int mfb_get_click_x(struct mfb_window*window)；//最后一个鼠标位置X int mfb_get_鼠标_y(struct mfb_get_window*window)。当您调用此函数时，它会重置。FLOAT MFB_GET_MOUSE_SCROLL_Y(struct MFB_Window*Window)；//鼠标轮Y作为总和。当您调用此函数时，它会重置。Const uint8_t*MFB_GET_MOUSE_BUTTON_BUFFER(struct MFB_Window*Window)；//每个按钮一个字节。按(1)，松开0键。(最多8个按钮)const uint8_t*MFB_GET_KEY_BUFFER(struct MFB_Window*Window)；//每个键一个字节。按(1)，松开0键。</p><p>首先，代码使用用于显示数据的MFB_OPEN调用创建窗口，然后由应用程序负责分配缓冲区(必须至少是窗口的大小，并且是32位的)，接下来，当调用MFB_UPDATE函数时，缓冲区将被复制到窗口并显示。目前，如果按下Esc键，MFB_UPDATE将返回-1，但稍后它将支持返回按下按钮的按键代码。有关完整示例，请参见https://github.com/emoon/minifb/blob/master/tests/noise.c。</p><p>MiniFB已经在Windows、MacOSX和Linux上进行了测试，但当然可能会遇到问题，具体取决于您的设置。目前，如果不能创建正确的32位显示，代码将不会执行任何数据转换。</p><p>Struct MFB_TIMER*MFB_TIMER_CREATE()；void mfb_Timer_Destroy(struct MFB_Timer*tmr)；void mfb_Timer_Reset(struct mfb_Timer*tmr)；DOUBLE MFB_TIMER_NOW(struct MFB_TIMER*tmr)；DOUBLE MFB_TIMER_DELTA(struct MFB_TIMER*tmr)；DOUBLE MFB_TIMER_GET_FREQUENCE()；DOUBLE。</p><p>此外，您还可以为应用程序设置目标fps。默认值为每秒60帧。</p><p>这避免了快速处理器中窗口更新过快导致重绘折叠的问题。</p><p>Do{int i；MFB_UPDATE_STATE STATE；//TODO：在缓冲区状态=MFB_UPDATE(WINDOW，g_BUFFER)；IF(STATE！=STATE_OK){WINDOW=0x0；Break；}}While(MFB_WAIT_SYNC(WINDOW))；</p><p>请注意，如果有多个窗口在同一线程上运行，则等待所有这些窗口是没有意义的……。</p><p>MiniFB使用Tundra https://github.com/deplinenoise/tundra作为构建系统，需要按原样构建代码，但如果您希望在自己的代码中直接使用它，则不需要做太多更改。</p><p>假设系统上安装了COCOA和CLANG(下载最新的XCode+安装命令行工具)，然后构建run：tundra2 MacOSX-clang-debug，您应该能够运行噪声示例(t2-output/MacOSX-clang-debug-default/noise)。</p><p>MacOS X Mojave不像预期的那样支持Cocoa框架。出于这个原因，现在您可以切换到Metal API。要启用它，只需编译并定义预处理器宏use_Metal_api即可。</p><p>如果您想通过故事板创建UIWindow，请记住将UIViewController设置为iOSViewController，将UIView设置为iOSView。</p><p>似乎您必须手动将&#tVOS部署目标&#39；设置为小于13。</p><p>似乎您必须在项目&gt；可执行&gt；常规中手动设置&#39；启动屏幕文件&#39；才能获得真实的设备高度。</p><p>一些MiniFB功能在手机上没有意义。iOS的可用功能包括：</p><p>Struct MFB_WINDOW*MFB_OPEN(常量char*title，无符号宽度，无符号高度)；struct MFB_Window*MFB_OPEN_EX(常量char*title，无符号宽度，无符号高度，无符号标志)；//标志忽略mfb_update_state MFB_UPDATE(struct MFB_Window*Window，void*Buffer)；void MFB_CLOSE(struct MFB_Window*Window)；void MFB。Void*mfb_get_user_data(struct mfb_window*window)；bool mfb_set_viewport(struct mfb_window*window，无符号偏移量_x，无符号偏移量_y，无符号宽度，无符号高度)；void mfb_set_ouse_button_callback(struct mfb_window*window，mfb_ouse_button_func callback)；void mfb_set_click_move_callback(struct mfb。Void mfb_set_resize_callback(struct mfb_window*window，mfb_resize_func callback)；unsign mfb_get_window_width(struct mfb_window*window)；unsign mfb_get_window_high(struct mfb_window*window)；int mfb_get_ouse_x(struct mfb_window*window)；//最后一个鼠标位置X int mfb_get_鼠标。</p><p>Struct MFB_TIMER*MFB_TIMER_CREATE(Void)；void mfb_Timer_Destroy(struct MFB_Timer*tmr)；void mfb_Timer_Reset(struct MFB_Timer*tmr)；Double mfb_Timer_now(struct MFB_Timer*tmr)；Double mfb_Timer_Delta(struct MFB_Timer*tmr)；Double mfb_Timer_Get_Frequency(Void)。</p><p>-(BOOL)应用程序：(UIApplication*)应用程序didFinishLaunchingWithOptions：(NSDictionary*)LaunchOptions{if(g_window==0x0){g_width=[UIScreen mainScreen]。边界。大小。Width；g_high=[UIScreen main Screen]。边界。大小。高度；g_Window=MFB_OPEN(&#34；Noise&#34；，g_Width，g_Height)；如果(g_Window！=0x0){g_Buffer=malloc(g_width*g_Height*4)；}}返回YES；}-(void)applicationDidBecomeActive：(UIApplication*)应用程序{mDisplayLink=[CADisplayLink displayLinkWithTarget：Self选择器：@选择器(OnUpdateFrame)]；[mDisplayLink addToRunLoop。}-(Void)application WillTerminate：(UIApplication*)application{[mDisplayLink INVALIATE]；MFB_CLOSE(G_Window)；}-(Void)OnUpdateFrame{if(g_Buffer！=0x0){//做您精彩的渲染工作}MFB_UPDATE_STATE=MFB_UPDATE(g_Window，g_Buffer)；IF(STATE！=STATE_OK){FREE(G_Buffer)；g_Buffer=0x0。</p><p>Visual Studio(2012 Express版已经过测试)构建run所需的工具(使用vcvars32.bat(32位)将设置环境)：tundra2 win32-msvc-debug，您应该能够在t2-output/win32-msvc-debug-default/noise.exe中运行Noise。</p><p>如果使用CMake，将生成Visual Studio项目(2015、2017和2019年已测试)。</p><p>需要安装GCC和x11-dev库。要构建代码，请运行tundra2x11-GCC-DEBUG，您应该能够运行T2-OUTPUT/x11-GCC-DEBUG-DEFAULT/Noise</p></div><div id="story_share_this"><div class="sharethis-inline-share-buttons"></div></div><div class="text-break sotry_link page_narrow"><a target="_blank" href="https://github.com/emoon/minifb">https://github.com/emoon/minifb</a></div><div class="story_tags page_narrow"><button type="button" class="btn btn-light my_tag"><a href="/tag/创建/">#创建</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/small/">#small</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/mfb/">#mfb</a></button></div></div><div class="shadow p-3 mb-5 bg-white rounded clearfix"><div class="container"><div class="row"><div class="col-sm"><div><a target="_blank" href="/story/1018403.html"><img src="http://img.diglog.com/img/2020/8/thumb_1382510e003774fc3ff6d6801eddd3dd.jpeg" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1018403.html">MiniFB：创建用于绘制像素的帧缓冲区的小型跨平台库</a></div><span class="my_story_list_date">2020-8-16 5:35</span></div><div class="col-sm"><div><a target="_blank" href="/story/1017319.html"><img src="http://img.diglog.com/img/2020/8/thumb_ed945ca34bbac407ed202969cf81610d.jpeg" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1017319.html">我在周末创建的MikroOrm v4/w GraphQL示例项目</a></div><span class="my_story_list_date">2020-8-10 19:54</span></div><div class="col-sm"><div><a target="_blank" href="/story/1016093.html"><img src="http://img.diglog.com/img/2020/8/thumb_7a645c7b4f8d7164aaf819c5f1a48ff2.png" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1016093.html">为您创建视频不一定要昂贵或复杂</a></div><span class="my_story_list_date">2020-8-4 11:19</span></div><div class="col-sm"><div><a target="_blank" href="/story/1015225.html"><img src="http://img.diglog.com/img/2020/7/thumb_eaf5e62af6b9db4c9b53818e2043e02c.png" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1015225.html">我录制了100多个Vlog，展示我是如何在4个月内完成2个副业的</a></div><span class="my_story_list_date">2020-7-31 1:7</span></div></div></div></div><div class="my_movie_list_item shadow p-3 mb-5 bg-white rounded"><button type="button" class="btn btn-link my_tag"><a href="/tag/web2.0/">#web2.0</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/google/">#google</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/设计/">#设计</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/创意/">#创意</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/摄影/">#摄影</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/游戏/">#游戏</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/图片/">#图片</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/软件/">#软件</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/视频/">#视频</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/手机/">#手机</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/广告/">#广告</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/apple/">#apple</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/iphone/">#iphone</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/网站/">#网站</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/免费/">#免费</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/下载/">#下载</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/windows/">#windows</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/微软/">#微软</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/firefox/">#firefox</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/苹果/">#苹果</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/blog/">#blog</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/音乐/">#音乐</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/博客/">#博客</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/wordpress/">#wordpress</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/恶搞/">#恶搞</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/艺术/">#艺术</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/qq/">#qq</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/web/">#web</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/谷歌/">#谷歌</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/工具/">#工具</a></button></div></div></div><div id="my_footer"><div class=""><a href="/tags/">tags</a> <a href="/users/">users</a></div>&copy;2012-2021 diglog.com </div></div></body></html>