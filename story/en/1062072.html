<!doctype html><html lang="zh-hans"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>机器学习在CNN Machine Learning at CNN</title><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"><link rel="stylesheet" href="/img/css.css?random="><link data-rh="true" rel="icon" href="/img/favicon.ico"/><script data-ad-client="ca-pub-6067137220025946" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script type="text/javascript" src="https://platform-api.sharethis.com/js/sharethis.js#property=5effb96910009800120b8d4d&product=inline-share-buttons" async="async"></script>
<script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?03c1a0f31299b4a2fbb83c34d6beaac9";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script></head><body><div id="my_header"><div class="container"><nav class="navbar navbar-expand-lg"><a class="navbar-brand" href="/"><img alt="diglog" src="/img/logo.v1.gif" class="rounded-sm"></a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarNavAltMarkup"><div class="navbar-nav"></div></div></nav></div></div><div class="container"><div id="my_content"><h1 class="page_narrow">Machine Learning at CNN<br/>机器学习在CNN </h1><div class="row"><div class="col-lg-12 col-12"><div class="my_story_list_item shadow p-3 mb-5 bg-white rounded"><div class="story_page_pub_time page_narrow">2021-05-12 07:36:25</div><div class="story_img_container"><a href="http://img2.diglog.com/img/2021/5/ad696361ac4c7594b321c97cd7390aee.jpeg"><img src="http://img2.diglog.com/img/2021/5/ad696361ac4c7594b321c97cd7390aee.jpeg" class="img-fluid my_story_img" onerror="this.style.display='none'"></a></div><div class="page_narrow text-break page_content"><p>At CNN, our mission is to inform, engage, and empower the world in a way that is trusted, timely, and transparent. This mission is more critical than ever as we face some of the most challenging times of our generation. As the world is becoming increasingly digital in nature, we are relentlessly focusing our mission to directly connect with our audience, understand what they care about most, and reach them in a way that is most accessible for their lifestyle. Our Data Intelligence team, in particular, leverages data and machine-learning capabilities to build innovative experiences for our audience and provides scalable solutions to CNN’s operations. As the world’s largest digital news destination, we averaged more than 200 million unique global visitors every month of 2020. Our catalog of raw audio and video footage also goes back several decades. Clearly, we have a lot of data!</p><p>在CNN，我们的使命是以信任，及时和透明的方式通知，参与世界。当我们面对我们这一代最具挑战性的时期，这项任务比以往任何时候都更加重要。由于世界变得越来越多的数字，我们无情地将我们的使命集中在与我们的观众直接联系，了解他们最关心的是什么，并以最符合他们的生活方式最可靠的方式到达它们。特别是我们的数据情报团队利用数据和机器学习能力为我们的受众构建创新体验，并为CNN的运营提供可扩展的解决方案。作为世界上最大的数字新闻目的地，我们每月为2020年的每月平均超过2亿个全球游客。我们的原始音频和视频素材目录也恢复了几十年。显然，我们有很多数据！</p><p> Our data science team believes they were able to test twice as many models in Q1 2021 as they did in all of 2020.</p><p> 我们的数据科学团队认为，他们能够在2020年的所有内容中测试Q1 2021中的两倍型号。</p><p> Given the depth of our data and the rapid pace of advancements in machine-learning, there are always far too many interesting ideas to explore than team-members to explore them. ( We’re hiring!) As we’ve grown our team, it’s become increasingly important that our researchers spend their time on the parts of the project that are most valuable to our audience. Our audience is best served when we provide trusted and personalized news to them, and we want our researchers to be able to focus as much of their time as they can on improving that experience. A significant amount of our research experimentation time has typically involved co-ordinating compute jobs and compute clusters, with support from our engineering team.</p><p> 鉴于我们的数据深度和机器学习进步的快速步伐，总是有太多有趣的想法来探索团队成员探索它们。 （我们正在招聘！）正如我们已经增长了我们的团队，我们的研究人员将时间越来越重要，以至于对我们观众最有价值的项目部分。当我们向他们提供信任和个性化新闻时，我们的观众最好服务，我们希望我们的研究人员能够尽可能多地专注于他们可以改善这种体验的时间。我们的研究实验时间通常涉及协调计算工作和计算集群，并支持我们的工程团队。</p><p>  Initially, our process for training a new experimental model was fairly similar to our process for (re)training a production model. This process was optimized for consistently training production models at scale, and did really well at that. Unfortunately, it was not designed for lightweight experimentation, and because of that, the research iteration process was frustratingly slow.</p><p>  最初，我们培训新的实验模型的进程与我们（重新）培训生产模型的过程相当类似。该过程是针对规模持续培训生产模型的优化，并确实如此。不幸的是，它不是为轻质实验设计的，因此，研究迭代过程令人沮丧。</p><p> Partnering with the folks at  Hop Labs, we explored a number of platforms and approaches to streamlining this. The one that most resonated with our team was an open-source project put out by the folks at Netflix: Metaflow. The key concept of Metaflow is the “Flow” which implements a directed acyclic graph (DAG) in Python. This metaphor (that we were already using in our Airflow data pipelines) and the straightforward Python interface meant that it instantly felt familiar to our ML engineers. Additionally, the seamless integration with AWS Batch gave us straightforward and simple scalability options.</p><p> 与Hop Labs的人员合作，我们探索了许多平台和方法来简化这一点。与我们团队最受谐波的那个是由Netflix的人民推出的开源项目：Metaflow。 Metaflow的关键概念是实现Python的定向非循环图（DAG）的“流动”。这个隐喻（我们已经在我们的气流数据管道中使用）和直接的Python接口意味着它立即对我们的ML工程师熟悉。此外，与AWS批处理的无缝集成给了我们简单和简单的可伸缩性选项。</p><p>  A Flow is made up of Steps, each of which can have its own separate dependencies and compute requirements. This allows a researcher to write pure Python and declaratively identify requirements on a granular step level, without having to worry about how those requirements are met. Our ML Ops engineers were able to implement a rich compute substrate that met the security/scalability requirements of CNN, and Metaflow was able to leverage that substrate using AWS Batch to scale up (and spin down) resources dynamically. This allowed our researchers to rapidly iterate with a small set of data locally. Then, when they were confident in their pipelines, they could scale up to larger resources as necessary — all without having to re-write code or manually schedule jobs and compute resources.</p><p>  流量由步骤组成，每个步骤可以具有自己的单独依赖性和计算要求。这允许研究人员编写纯Python并声明地识别粒度步长的要求，而无需担心如何满足这些要求。我们的ML OPS工程师能够实现富裕的计算基板，符合CNN的安全性/可扩展性要求，并且Metaflow能够利用使用AWS批处理的基板动态地扩展（并自旋）资源。这允许我们的研究人员在本地迅速迭代一小组数据。然后，当他们对他们的管道上有信心时，他们可以根据需要扩大到更大的资源 - 所有情况都不需要重写代码或手动计划作业并计算资源。</p><p>  Each run is reproducible by default, and all the code and dependencies are snapshotted to AWS S3 in a way that is transparent to (and effortless for) the researcher.</p><p>  默认情况下，每个运行都可重复，并且所有代码和依赖关系都以对研究人员的（努力为）透明的方式对AWS S3进行快照。 </p><p> While we appreciated all that Metaflow had to offer, it had some specific challenges that we discovered along the way. The first challenge we ran into was that the only official way to stand up Metaflow’s infrastructure was via a single Cloudformation template. This likely is sufficient for many teams, but our policies required us to make changes to the default infrastructure, and the existing template did not lend itself to that. Within CNN’s Data Intelligence team, we use Hashicorp’s Terraform for managing our infrastructure. Part of our engineering effort in adopting Metaflow was rewriting the provided Cloudformation template in highly modular and extensible Terraform. We are pleased to be able to  submit these changes back to the Metaflow community, so hopefully this will not be a challenge for other teams looking to use Metaflow.</p><p>虽然我们感谢Metaflow必须提供的所有措施，但它有一些特定的挑战，我们在此过程中发现。我们遇到的第一个挑战是，唯一的官方官方骑行方式通过单个CloudFormation模板。对于许多团队来说，这可能是足够的，但我们的政策要求我们对默认基础设施进行更改，并且现有模板并没有为此提供归因于此。在CNN的数据智能团队中，我们使用Hashicorp的Terraform来管理我们的基础架构。我们在采用Metaflow方面的一部分工程努力在高度模块化和可扩展的Terraform中重写提供的CloudFormation模板。我们很高兴能够将这些更改提交回Metaflow社区，希望这对其他团队希望使用Metaflow这不会是一个挑战。</p><p>  Another obstacle for our team was that Metaflow uses Conda for package management. This is a natural and reasonable technical choice, that is particularly helpful to snapshot code and dependencies for reproducibility. Nonetheless, a large percentage of our team had not previously used Conda heavily and faced a bit of a learning curve while switching to it. There are also occasional package version mismatches between PyPI and the Conda repositories. We’ve built some internal solutions to partially address these challenges, but remain on the lookout for more comprehensive ways to streamline things here.</p><p>  我们团队的另一个障碍是Metaflow使用Conda进行包裹管理。这是一种自然和合理的技术选择，对快照代码和可重复性的依赖性特别有帮助。尽管如此，我们的队伍中的大量百分比以前没有使用公寓则在切换到它的同时，面临着一点学习曲线。 PYPI和Conda存储库之间还有偶尔的包版本不匹配。我们已经建立了一些内部解决方案，以部分解决这些挑战，但仍然存在更全面的方式来简化这里。</p><p> At this point, we’ve been able to entirely switch over our research experimentation process to rely on this Metaflow-powered workflow and with great success. Our researchers are able to spend more of their time improving their models for our audience, and our engineers are able to provide a rich compute substrate without having to manually manage clusters. As an informal estimate, our data science team believes they were able to test twice as many models in Q1 2021 as they did in all of 2020, with simple experiments that would have taken a week now taking half a day.</p><p> 此时，我们已经能够完全切换我们的研究实验过程，依靠这种Metaflow动力的工作流程，并取得了巨大的成功。我们的研究人员能够花费更多时间为我们的观众改进他们的模型，我们的工程师能够提供丰富的计算基板，而无需手动管理群集。作为一个非正式的估计，我们的数据科学团队认为他们能够在2020年的所有2021季度在2020年所做的型号中测试两倍，因为他们在2020年的所有内容中都有一个简单的实验，现在已经花了一周时间。</p><p> Although not the intention, we were also able to transition a number of production training workloads to this workflow. Our engineering and operations teams appreciate having one less always-on stack to have to maintain, therefore reducing their operational burden and simplifying the surface area of their architecture.</p><p> 虽然不是意图，但我们还能够将一些生产培训工作负载转换为此工作流程。我们的工程和运营团队欣赏具有更少的总是堆栈必须维持，因此降低了他们的运行负担，简化了其架构的表面积。</p><p> The work doesn’t stop though — we’ve kaizen’d this part of the workflow, but that just means we get to focus on the next improvement to the process. We strongly believe in continuously improving the tooling available to our researchers and engineers, so that they can continuously improve the CNN experience for our audience.</p><p> 这项工作并不停止 - 我们已经开始的工作流程，但这只是意味着我们能够专注于对过程的下一步改进。我们强烈地相信不断改进我们的研究人员和工程师的工具，因此他们可以不断提高观众的CNN体​​验。</p><p> If you’re interested in working on a cutting-edge team with broad societal impact (and continuously improving tools!), we’re hiring and would be excited to talk to you.</p><p> 如果您有兴趣在具有广泛的社会影响的尖端团队上工作（并且不断改进工具！），我们正在招聘，并会很高兴与您交谈。</p><p> If you’d like to learn more about this work, please do not hesitate to reach out to  Ankur Kalra or  Kelly Davis.</p><p> 如果您想了解更多有关这项工作的信息，请随时致命地联系到Ankur Kalra或Kelly Davis。 </p><p> Thanks to Deepna Devkar, Gregory Hilston, Roshan Bangera and the rest of the CNN Data Intelligence team for valuable contributions and feedback.</p><p>感谢Deadna Devkar，Gregory Hilston，Roshan Bangera和其他CNN数据智能团队的有价值的贡献和反馈。 </p></div><div id="story_share_this"><div class="sharethis-inline-share-buttons"></div></div><div class="text-break sotry_link page_narrow"><a target="_blank" href="https://medium.com/cnn-digital/accelerating-ml-within-cnn-983f6b7bd2eb">https://medium.com/cnn-digital/accelerating-ml-within-cnn-983f6b7bd2eb</a></div><div class="story_tags page_narrow"><button type="button" class="btn btn-light my_tag"><a href="/tag/学习/">#学习</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/learning/">#learning</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/团队/">#团队</a></button></div></div><div class="my_movie_list_item shadow p-3 mb-5 bg-white rounded"><button type="button" class="btn btn-link my_tag"><a href="/tag/web2.0/">#web2.0</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/google/">#google</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/设计/">#设计</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/创意/">#创意</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/摄影/">#摄影</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/图片/">#图片</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/游戏/">#游戏</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/软件/">#软件</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/视频/">#视频</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/广告/">#广告</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/手机/">#手机</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/iphone/">#iphone</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/网站/">#网站</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/免费/">#免费</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/下载/">#下载</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/windows/">#windows</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/apple/">#apple</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/微软/">#微软</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/firefox/">#firefox</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/blog/">#blog</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/苹果/">#苹果</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/音乐/">#音乐</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/博客/">#博客</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/wordpress/">#wordpress</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/恶搞/">#恶搞</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/qq/">#qq</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/艺术/">#艺术</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/web/">#web</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/工具/">#工具</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/分享/">#分享</a></button></div></div></div><div id="my_footer"><div class=""><a href="/tags/">tags</a> <a href="/users/">users</a></div>&copy;2012-2021 diglog.com </div></div></body></html>