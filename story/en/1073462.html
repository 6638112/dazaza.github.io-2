<!doctype html><html lang="zh-hans"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>我们在$著名的公司转用了$炒作的技术We at $Famous_company Switched to $Hyped_technology</title><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"><link rel="stylesheet" href="/img/css.css?random="><link data-rh="true" rel="icon" href="/img/favicon.ico"/><script data-ad-client="ca-pub-6067137220025946" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script type="text/javascript" src="https://platform-api.sharethis.com/js/sharethis.js#property=5effb96910009800120b8d4d&product=inline-share-buttons" async="async"></script>
<script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?03c1a0f31299b4a2fbb83c34d6beaac9";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script></head><body><div id="my_header"><div class="container"><nav class="navbar navbar-expand-lg"><a class="navbar-brand" href="/"><img alt="diglog" src="/img/logo.v1.gif" class="rounded-sm"></a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarNavAltMarkup"><div class="navbar-nav"></div></div></nav></div></div><div class="container"><div id="my_content"><h1 class="page_narrow">We at $Famous_company Switched to $Hyped_technology<br/>我们在$著名的公司转用了$炒作的技术</h1><div class="row"><div class="col-lg-12 col-12"><div class="my_story_list_item shadow p-3 mb-5 bg-white rounded"><div class="story_page_pub_time page_narrow">2022-02-15 15:44:54</div><div class="page_narrow text-break page_content"><p>When $FAMOUS_COMPANY launched in 2010, it ran on a single server in $TECHBRO_FOUNDER’s garage. Since then, we’ve experienced explosive VC-funded growth and today we have hundreds of millions of daily active users (DAUs) from all around the globe accessing our products from our mobile apps and on $famouscompany.com. We’ve since made a couple of panic-induced changes to our backend to manage our technical debt (usually right after a high-profile outage) to keep our servers from keeling over. Our existing technology stack has served us well for all these years, but as we seek to grow further it’s clear that a complete rewrite of our application is something which will somehow prevent us from losing two billion dollars a year on customer acquisition.</p><p>2010年，$Expective_COMPANY成立时，它在$TECHBRO_创始人车库的一台服务器上运行。从那时起，我们经历了由VC资助的爆炸性增长，今天我们有来自全球各地的数亿日常活跃用户（DAU）通过我们的移动应用程序和著名公司的美元访问我们的产品。通用域名格式。自那以后，我们对后端进行了几次由恐慌引发的更改，以管理我们的技术债务（通常是在一次引人注目的停机之后），防止我们的服务器崩溃。这些年来，我们现有的技术堆栈一直为我们提供良好的服务，但随着我们寻求进一步发展，很明显，完全重写我们的应用程序将以某种方式防止我们在获得客户方面每年损失20亿美元。</p><p>  As we’ve mentioned in previous blog posts, the $FAMOUS_COMPANY backend has historically been developed in $UNREMARKABLE_LANGUAGE and architected on top of $PRACTICAL_OPEN_SOURCE_FRAMEWORK. To suit our unique needs, we designed and open-sourced $AN_ENGINEER_TOOK_A_MYTHOLOGY_CLASS, a highly-available, just-in-time compiler for $UNREMARKABLE_LANGUAGE. Even with our custom runtime, however, we eventually began seeing sporadic spikes in our 99th percentile latency statistics, which grew ever more pronounced as we scaled up to handle our increasing DAU count. Luckily, all of our software is designed from the ground up for introspectability, and using  some BPF scripts we copied from Brendan Gregg’s website our in-house profiling tools $FAMOUS_COMPANY engineers determined that the performance bottlenecks were a result of time spent in the garbage collector.</p><p>正如我们在之前的博客文章中提到的那样，$PROFECTION_COMPANY后端在历史上是用$PROFECTION_语言开发的，并且是在$PROFECTION_开源_框架的基础上构建的。为了满足我们的独特需求，我们设计并开源了$AN_ENGINEER_take_A_history_类，这是一个高度可用的即时编译器，只需$unremarable_语言。然而，即使使用自定义运行时，我们最终也开始在第99百分位延迟统计中看到零星的峰值，随着我们扩大规模以处理不断增加的DAU计数，这种峰值变得越来越明显。幸运的是，我们所有的软件都是为自省而从头开始设计的，使用我们从Brendan Gregg的网站复制的一些BPF脚本，我们的内部分析工具$著名的公司工程师确定性能瓶颈是在垃圾收集器中花费时间的结果。</p><p> Initially, we tried messing with some garbage collector parameters we didn’t really understand, but to our surprise that didn’t magically solve our problems so instead we disabled garbage collection altogether. This increased our memory usage, but our automatic on-demand scaler handled this for us, as the graph below shows:</p><p>起初，我们试图搞乱一些我们并不真正理解的垃圾收集器参数，但出乎意料的是，这并没有神奇地解决我们的问题，所以我们完全禁用了垃圾收集。这增加了我们的内存使用，但我们的自动按需定标器为我们解决了这一问题，如下图所示：</p><p>  Ultimately, however, our decision to switch was driven by our difficulty in hiring new talent for $UNREMARKABLE_LANGUAGE, despite it being taught in dozens of universities across the United States. Our blog posts on $PRACTICAL_OPEN_SOURCE_FRAMEWORK seemed to get fewer upvotes when posted on Reddit as well, cementing our conviction that our technology stack was now legacy code.</p><p>然而，最终，我们之所以决定转学，是因为我们很难用不起眼的_语言聘请新人才，尽管美国各地几十所大学都在教授这种语言。我们在$PRACTICAL_OPEN_SOURCE_FRAMEWORK上发表的博客文章在Reddit上发表时，获得的支持率似乎也更低，这巩固了我们的信念，即我们的技术堆栈现在是遗留代码。</p><p>  We knew we needed to find something that could keep up with us at $FAMOUS_COMPANY scale. We evaluated a number of promising alternatives that we selected and ranked based on the how many bullet points they had on their websites, how often they’d appear on the front page of Hacker News, and a spreadsheet of important language characteristics (performance, efficiency, community, ease-of-use) that we had people in the office fill out.</p><p>我们知道，我们需要找到一些能跟上我们的公司规模的东西。我们评估了一些有希望的替代方案，我们根据他们在网站上的要点数量、他们出现在黑客新闻头版的频率，以及我们让办公室人员填写的重要语言特征（性能、效率、社区、易用性）的电子表格，对这些方案进行了选择和排名。</p><p> As our spreadsheet met strong statistical guarantees of randomness, we were able to reuse it to replace our application’s CSPRNG.</p><p>由于我们的电子表格满足了随机性的强大统计保证，我们能够重用它来取代应用程序的CSPRNG。</p><p> After careful consideration, we settled on rearchitecting our platform to use $FLASHY_LANGUAGE and $HYPED_TECHNOLOGY. Not only is $FLASHY_LANGUAGE popular according to the Stack Overflow developer survey, it’s also cross platform; we’re using it to reimplement our mobile apps as well. Rewriting our core infrastructure was fairly straightforward: as we have more engineers than we could possibly ever need or even know what to do with, we simply put a freeze on handling bug reports and shifted our effort to $HYPED_TECHNOLOGY instead. We originally had some trouble with adapting to some of $FLASHY_LANGUAGE’s quirks, and ran into a couple of bugs with $HYPED_TECHNOLOGY, but overall their powerful new features let us remove some of the complexity that our previous solution had to handle.</p><p>经过仔细考虑，我们决定重新构建我们的平台，使用$FLASHY_语言和$hypod_技术。根据Stack Overflow开发者调查，$FLASHY_语言不仅广受欢迎，而且是跨平台的；我们也在用它来重新实现我们的移动应用。重写我们的核心基础设施相当简单：因为我们拥有的工程师比我们可能需要的更多，甚至不知道该怎么办，我们只是冻结了处理错误报告的工作，并将我们的工作转向了$HYPED_技术。我们最初在适应$FLASHY_语言的一些怪癖方面遇到了一些困难，并在$HYPED_技术上遇到了一些错误，但总体而言，它们强大的新功能让我们消除了以前的解决方案必须处理的一些复杂性。</p><p> Deploying the changes without downtime required some careful planning, but this was also not too difficult: we just hardcoded the status page to not update whenever we pushed new changes, keeping users guessing if our service was up or not. Managing incremental rollout was key: we aggressively A/B tested the new code. Our internal studies showed that gaslighting users by showing them a completely new interface once in a while and then switching back to the old one the next time they loaded a page increases user engagement, so we made sure to implement such a system based on a Medium article we found that had something to do with multi-armed bandits.</p><p>在不停机的情况下部署更改需要一些仔细的规划，但这也不太困难：我们只是硬编码状态页面，以便在推送新更改时不进行更新，让用户猜测我们的服务是否已启动。管理增量部署是关键：我们积极地对新代码进行了A/B测试。我们的内部研究表明，通过偶尔向用户展示一个全新的界面，然后在下次加载页面时切换回旧界面，可以提高用户参与度，因此我们确保基于一篇我们发现与多武装匪徒有关的媒体文章实现这样一个系统。</p><p> With our rewrite now complete and rolled out to all of our customers, we think the effort has been a massive success for us and our team. We have measured our performance and you can see a summary of the results below:</p><p>随着我们的重写工作现已完成并向所有客户推出，我们认为这项工作对我们和我们的团队来说都是巨大的成功。我们已经衡量了我们的绩效，您可以看到以下结果摘要：</p><p>  Every metric that matters to us has increased substantially from the rewrite, and we even identified some that were no longer relevant to us, such as number of bugs, user frustration, and maintenance cost. Today we are making some of the code that we can afford to open source available on our GitHub page. It is useless by itself and is heavily tied to our infrastructure, but you can star it to make us seem more relevant.</p><p>每一个对我们来说重要的指标都在重写后大幅增加，我们甚至发现了一些与我们不再相关的指标，比如错误数量、用户挫折感和维护成本。今天，我们将在GitHub页面上提供一些我们能够负担得起的开源代码。它本身是无用的，而且与我们的基础设施紧密相连，但你可以将其作为明星，让我们看起来更相关。</p><p>  It’s often said that completely rewriting software is fraught with peril, but we at $FAMOUS_COMPANY like to take big bets, and it’s clear that this one has paid off handsomely. While we focused on our backend changes in this blog post, as we mentioned before we are using $FLASHY_LANGUAGE in our mobile apps as well, since we don’t have the resources to write native applications for each platform. Unfortunately  to increase lock-in these rewrites also mean we will be deprecating third-party API access to our services. We know some of our users relied on these interfaces for accessibility reasons, but we at $FAMOUS_COMPANY are dedicated to improving our services for those with disabilities as long as you aren’t using any sort of assistive technologies, which no longer work at all with our apps.</p><p>人们常说，完全重写软件充满了风险，但我们在$PROFIMENT_公司喜欢下大赌注，很明显，这一次得到了丰厚的回报。虽然我们在这篇博文中重点讨论了后端的变化，但正如我们前面提到的，我们在移动应用程序中也使用了$FLASHY_语言，因为我们没有资源为每个平台编写本机应用程序。不幸的是，为了增加锁定，这些重写也意味着我们将拒绝第三方API访问我们的服务。我们知道我们的一些用户出于可访问性的原因依赖这些界面，但我们$PROFIMENT_COMPANY致力于改善我们为残疾人提供的服务，只要您不使用任何辅助技术，这些技术在我们的应用程序中根本不起作用。</p><p> We hope that you internalize our company’s anecdote as some sort of ground truth and show it to your company’s CTO so they too can consider redesigning their architecture like we have done. We know you’ll ignore the fact that you’re not us and we have enough engineers and resources to do whatever we like, but the decision will ruin your startup so it’s not like we’ll see  your blog posts about your experience with $HYPED_TECHNOLOGY anytime soon. If you’re not in a position to influence what your company uses, you can still bring it up for point-scoring the next time a language war comes up.</p><p>我们希望你把我们公司的轶事内化为某种真实的事实，并把它展示给你公司的CTO，这样他们也可以考虑重新设计他们的架构，就像我们已经做过的那样。我们知道你会忽略一个事实，那就是你不是我们，我们有足够的工程师和资源来做我们喜欢做的任何事情，但这个决定会毁掉你的初创公司，所以我们不会很快看到你关于你使用$HYPED_技术的经历的博客帖子。如果你无法影响公司的使用，你仍然可以在下一次出现语言战时提出，以便得分。</p><p> If you’re reading this and are interested in $HYPED_TECHNOLOGY like we are, we are hiring! Be sure to check out our jobs page, where there will be zero positions related to $FLASHY_LANGUAGE.</p><p>如果你正在读这篇文章，并且像我们一样对$HYPED_技术感兴趣，我们正在招聘！一定要查看我们的工作页面，那里将没有与$FLASHY_语言相关的职位。</p><p> Questions? Comments? Corrections? Feel free to reach out to me at  saagar@saagarjha.com; I&#39;d love to hear your thoughts!</p><p>问题？评论？更正？欢迎随时联系我saagar@saagarjha.com; 我&#39；I’我很想听听你的想法！</p></div><div id="story_share_this"><div class="sharethis-inline-share-buttons"></div></div><div class="story_tags page_narrow"><button type="button" class="btn btn-light my_tag"><a href="/tag/转用/">#转用</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/company/">#company</a></button></div></div><div class="my_movie_list_item shadow p-3 mb-5 bg-white rounded"><button type="button" class="btn btn-link my_tag"><a href="/tag/web2.0/">#web2.0</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/google/">#google</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/设计/">#设计</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/创意/">#创意</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/摄影/">#摄影</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/图片/">#图片</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/游戏/">#游戏</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/软件/">#软件</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/广告/">#广告</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/视频/">#视频</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/手机/">#手机</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/iphone/">#iphone</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/网站/">#网站</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/免费/">#免费</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/windows/">#windows</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/下载/">#下载</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/微软/">#微软</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/苹果/">#苹果</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/firefox/">#firefox</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/blog/">#blog</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/音乐/">#音乐</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/博客/">#博客</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/apple/">#apple</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/wordpress/">#wordpress</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/恶搞/">#恶搞</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/qq/">#qq</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/谷歌/">#谷歌</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/艺术/">#艺术</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/web/">#web</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/工具/">#工具</a></button></div></div></div><div id="my_footer"><div class=""><a href="/tags/">tags</a> <a href="/users/">users</a></div>&copy;2012-2021 diglog.com </div></div></body></html>