<!doctype html><html lang="zh-hans"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Lisp 作为 Java 的替代品 (2000)Lisp as an Alternative to Java (2000)</title><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"><link rel="stylesheet" href="/img/css.css?random="><link data-rh="true" rel="icon" href="/img/favicon.ico"/><script data-ad-client="ca-pub-6067137220025946" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script type="text/javascript" src="https://platform-api.sharethis.com/js/sharethis.js#property=5effb96910009800120b8d4d&product=inline-share-buttons" async="async"></script>
<script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?03c1a0f31299b4a2fbb83c34d6beaac9";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script></head><body><div id="my_header"><div class="container"><nav class="navbar navbar-expand-lg"><a class="navbar-brand" href="/"><img alt="diglog" src="/img/logo.v1.gif" class="rounded-sm"></a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarNavAltMarkup"><div class="navbar-nav"></div></div></nav></div></div><div class="container"><div id="my_content"><h1 class="page_narrow">Lisp as an Alternative to Java (2000)<br/>Lisp 作为 Java 的替代品 (2000)</h1><div class="row"><div class="col-lg-12 col-12"><div class="my_story_list_item shadow p-3 mb-5 bg-white rounded"><div class="story_page_pub_time page_narrow">2021-08-03 00:27:29</div><div class="page_narrow text-break page_content"><p>;; Peter Norvig - Programming Challange from Erann Gat:;;  http://www.flownet.com/ron/papers/lisp-java/;; Given a list of words and a list of phone numbers, find all the ways that;; each phone number can be expressed as a list of words.;; Run: (main &#34;word-list-file-name&#34; &#34;phone-number-file-name&#34;)(defvar  *dict* nil &#34;A hash table mapping a phone number (integer) to a list of words from the input dictionary that produce that number.&#34;)(defun  main (&amp;optional (dict &#34;dict&#34;) (nums &#34;nums&#34;) (dict-size 100)) &#34;Read the input file DICT and load it into *dict*. Then for each line in NUMS, print all the translations of the number into a sequence of words, according to the rules of translation.&#34; (setf *dict* (load-dictionary dict dict-size)) (with-open-file (in nums) (loop for num = (read-line in nil) while num do (print-translations num (remove-if-not #&#39;digit-char-p num)))))(defun  print-translations (num digits &amp;optional (start 0) (words nil)) &#34;Print each possible translation of NUM into a string of words. DIGITS must be WORD with non-digits removed. On recursive calls, START is the position in DIGITS at which to look for the next word, and WORDS is the list of words found for (subseq DIGITS 0 START). So if START gets to the end of DIGITS, then we have a solution in WORDS. Otherwise, for every prefix of DIGITS, look in the dictionary for word(s) that map to the value of the prefix (computed incrementally as N), and for each such word try to extend the solution with a recursive call. There are two complications: (1) the rules say that in addition to dictionary words, you can use a single digit in the output, but not two digits in a row. Also (and this seems silly) you can&#39;t have a digit in a place where any word could appear. I handle this with the variable FOUND-WORD; if it is false after the loop, and the most recent word is not a digit, try a recursive call that pushes a digit. (2) The other complication is that the obvious way of mapping strings to integers would map R to 2 and ER to 02, which of course is the same integer as 2. Therefore we prepend a 1 to every number, and R becomes 12 and ER becomes 102.&#34; (if (&gt;= start (length digits)) (format t &#34;~a:~{ ~a~}~%&#34; num (reverse words)) (let ((found-word nil) (n 1)) ; leading zero problem (loop for i from start below (length digits) do (setf n (+ (* 10 n) (nth-digit digits i))) (loop for word in (gethash n *dict*) do (setf found-word t) (print-translations num digits (+ 1 i) (cons word words)))) (when (and (not found-word) (not (numberp (first words)))) (print-translations num digits (+ start 1) (cons (nth-digit digits start) words))))))(defun  load-dictionary (file size) &#34;Create a hashtable from the file of words (one per line). Takes a hint for the initial hashtable size. Each key is the phone number for a word; each value is a list of words with that phone number.&#34; (let ((table (make-hash-table :test #&#39;eql :size size))) (with-open-file (in file) (loop for word = (read-line in nil) while word do (push word (gethash (word-&gt;number word) table)))) table))(defun  word-&gt;number (word) &#34;Translate a word (string) into a phone number, according to the rules.&#34; (let ((n 1)) ; leading zero problem (loop for i from 0 below (length word) for ch = (char word i) do (when (alpha-char-p ch) (setf n (+ (* 10 n) (char-&gt;digit ch))))) n))(defun  nth-digit (digits i) &#34;The i-th element of a character string of digits, as an integer 0 to 9.&#34; (- (char-code (char digits i)) #.(char-code #\0)))(defun  char-&gt;digit (ch) &#34;Convert a character to a digit according to the phone number rules.&#34; (ecase (char-downcase ch) ((#\e) 0) ((#\j #\n #\q) 1) ((#\r #\w #\x) 2) ((#\d #\s #\y) 3) ((#\f #\t) 4) ((#\a #\m) 5) ((#\c #\i #\v) 6) ((#\b #\k #\u) 7) ((#\l #\o #\p) 8) ((#\g #\h #\z) 9)))</p><p>;; Peter Norvig - 来自 Erann Gat 的编程挑战：;; http://www.flownet.com/ron/papers/lisp-java/;;给定一个单词列表和一个电话号码列表，找出所有的方法；；每个电话号码都可以表示为一个单词列表。运行： (main &quot;word-list-file-name&quot; &quot;phone-number-file-name&quot;)(defvar *dict* nil &quot;一个将电话号码（整数）映射到输入字典中的单词列表的哈希表产生那个数字。&quot;)(defun main (&amp;optional (dict &quot;dict&quot;) (nums &quot;nums&quot;) (dict-size 100)) &quot;读取输入文件 DICT 并将其加载到 *dict*。然后对于 NUMS 中的每一行，根据翻译规则，将数字的所有翻译打印成单词序列。” (setf *dict* (load-dictionary dict dict-size)) (with-open-file (in nums) (loop for num = (read-line in nil) while num do (print-translations num (remove-if-not #&#39;digit-char-p num)))))(defun print-translations (num numbers &amp;optional (start 0)) words nil)) &quot;将 NUM 的每个可能的翻译打印成一串单词。DIGITS 必须是删除非数字的 WORD。在递归调用中，START 是 DIGITS 中查找下一个单词的位置，而 WORDS 是为 (subseq DIGITS 0 START) 找到的单词列表。所以如果 START 到达 DI 的结尾GITS，然后我们在 WORDS 中有一个解决方案。否则，对于 DIGITS 的每个前缀，在字典中查找映射到前缀值的单词（增量计算为 N），并且对于每个这样的单词尝试通过递归调用扩展解决方案。有两个并发症：（1）规则说除了字典单词之外，您可以在输出中使用单个数字，但不能连续使用两个数字。另外（这看起来很傻）你不能在一个可以出现任何单词的地方有一个数字。我用变量 FOUND-WORD 处理这个问题；如果循环后为假，并且最近的单词不是数字，请尝试推送数字的递归调用。 (2) 另一个复杂之处是，将字符串映射到整数的显而易见的方法是将 R 映射到 2，将 ER 映射到 02，这当然与 2 是相同的整数。因此我们在每个数字前加一个 1，R 变为 12 并且ER 变成 102。&quot; (if (&gt;= start (length digits)) (format t &quot;~a:~{ ~a~}~%&quot; num (reverse words)) (let ((found-word nil) (n 1 )) ; 前导零问题（循环从下面开始的 i （长度数字） do (setf n (+ (* 10 n) (nth-digit digits i))) (loop for word in (gethash n *dict*) do (setf found-word t) (print-translations num numbers (+ 1 i) (cons word words)))) (when (and (not found-word) (not (numberp (first words)))) (print- translations num numbers (+ start 1) (cons (nth-digit numbers start) words)))))(defun load-dictionary (file size) &quot;从单词文件中创建一个哈希表（每行一个）。需要一个初始哈希表大小的提示。每个键是一个单词的电话号码；每个值是具有该电话号码的单词列表。” ((table (make-hash-table :test #&#39;eql :si ze size))) (with-open-file (in file) (loop for word = (read-line in nil) while word do (push word (gethash (word-&gt;number word) table)))) 表)) (defun word-&gt;number (word) &quot;按照规则将一个单词（字符串）翻译成一个电话号码。&quot; (let ((n 1)) ;前导零问题（循环从 0 下面（长度字）为 ch =（字符字 i）做（当（alpha-char-p ch）（setf n（+（* 10 n）（char-&gt;digit ch）） )))) n))(defun nth-digit (digits i) “数字字符串的第 i 个元素，为 0 到 9 的整数。” (- (char-code (char numbers i)) # .(char-code #\0)))(defun char-&gt;digit (ch) &quot;根据电话号码规则将字符转换为数字。&quot; (ecase (char-downcase ch) ((#\e) 0 ) ((#\j #\n #\q) 1) ((#\r #\w #\x) 2) ((#\d #\s #\y) 3) ((#\f #\ t) 4) ((#\a #\m) 5) ((#\c #\i #\v) 6) ((#\b #\k #\u) 7) ((#\l #\ o #\p) 8) ((#\g #\h #\z) 9)))</p></div><div id="story_share_this"><div class="sharethis-inline-share-buttons"></div></div><div class="text-break sotry_link page_narrow"><a target="_blank" href="http://www.norvig.com/java-lisp.html">http://www.norvig.com/java-lisp.html</a></div><div class="story_tags page_narrow"><button type="button" class="btn btn-light my_tag"><a href="/tag/java/">#java</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/word/">#word</a></button></div></div><div class="my_movie_list_item shadow p-3 mb-5 bg-white rounded"><button type="button" class="btn btn-link my_tag"><a href="/tag/web2.0/">#web2.0</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/google/">#google</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/设计/">#设计</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/创意/">#创意</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/摄影/">#摄影</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/图片/">#图片</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/游戏/">#游戏</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/软件/">#软件</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/视频/">#视频</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/手机/">#手机</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/广告/">#广告</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/iphone/">#iphone</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/网站/">#网站</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/免费/">#免费</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/下载/">#下载</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/windows/">#windows</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/微软/">#微软</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/苹果/">#苹果</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/blog/">#blog</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/firefox/">#firefox</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/apple/">#apple</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/音乐/">#音乐</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/博客/">#博客</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/wordpress/">#wordpress</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/恶搞/">#恶搞</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/qq/">#qq</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/艺术/">#艺术</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/web/">#web</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/工具/">#工具</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/谷歌/">#谷歌</a></button></div></div></div><div id="my_footer"><div class=""><a href="/tags/">tags</a> <a href="/users/">users</a></div>&copy;2012-2021 diglog.com </div></div></body></html>