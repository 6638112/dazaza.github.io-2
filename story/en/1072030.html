<!doctype html><html lang="zh-hans"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Linux Trace Toolkit Next Generation 2.13 促进对内核/用户空间检测命中的快速反应Linux Trace Toolkit Next Generation 2.13 Facilitates Quick Reaction To Kernel/User-space Instrumentation Hits</title><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"><link rel="stylesheet" href="/img/css.css?random="><link data-rh="true" rel="icon" href="/img/favicon.ico"/><script data-ad-client="ca-pub-6067137220025946" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script type="text/javascript" src="https://platform-api.sharethis.com/js/sharethis.js#property=5effb96910009800120b8d4d&product=inline-share-buttons" async="async"></script>
<script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?03c1a0f31299b4a2fbb83c34d6beaac9";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script></head><body><div id="my_header"><div class="container"><nav class="navbar navbar-expand-lg"><a class="navbar-brand" href="/"><img alt="diglog" src="/img/logo.v1.gif" class="rounded-sm"></a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarNavAltMarkup"><div class="navbar-nav"></div></div></nav></div></div><div class="container"><div id="my_content"><h1 class="page_narrow">Linux Trace Toolkit Next Generation 2.13 Facilitates Quick Reaction To Kernel/User-space Instrumentation Hits<br/>Linux Trace Toolkit Next Generation 2.13 促进对内核/用户空间检测命中的快速反应</h1><div class="row"><div class="col-lg-12 col-12"><div class="my_story_list_item shadow p-3 mb-5 bg-white rounded"><div class="story_page_pub_time page_narrow">2021-08-08 06:41:32</div><div class="page_narrow text-break page_content"><p>Mathieu Desnoyers  mathieu.desnoyers at efficios.com    Tue Aug 3 14:40:21 EDT 2021  Hi everyone, Today is the official release of LTTng 2.13 - Nordicité! It is the result ofone year of development from most of the EfficiOS team.The most notable features of this new release are: - Event-rule matches condition triggers and new actions, allowing internal actions or external monitoring applications to quickly react when kernel or user-space instrumentation is hit, - Notification payload capture, allowing external monitoring applications to read elements of the instrumentation payload when instrumentation is hit. - Instrumentation API: vtracef and vtracelog (LTTng-UST), - User space time namespace context (LTTng-UST and LTTng-modules).This release is named after &#34;Nordicité&#34;, the product of a collaboration betweenChamp Libre and Boréale. This farmhouse IPA is brewed with Kveik yeast andQuébec-grown barley, oats and juniper branches. The result is a remarkablefruity hazy golden IPA that offers a balanced touch of resinous and woodsybitterness.Based on the LTTng project&#39;s documented stable releases lifetime, this 2.13release coincides with the end-of-life (EOL) of the LTTng 2.11 release series.Read on for a short description of each of the new features and thelinks to this release.A prettified version of this announcement will be available soon on GitHub: https://github.com/lttng/lttng-tools/releases/tag/v2.13.0Note on LTTng-UST backward compatibility---- soname major version change This release changes the LTTng-UST soname major from 0 to 1. The event notifier (triggers using an event-rule-matches condition) functionality required a significant rework of public data structures which should never have been made public in the first place. Bumping the soname major to 1, will require applications and tracepoint providers to be rebuilt against an updated LTTng-UST to use it. Old applications and tracepoint providers linked against libraries with major soname 0 should be able to co-exist on the same system.- Building probe providers using a C++ compiler requires C++11- API namespaceing The LTTng-UST API is now systematically namespaced under `lttng_ust_*` (e.g `tracepoint()` becomes `lttng_ust_tracepoint()`). However, the non-namespaced names are still exposed to maintain API compatibility.Event-rule matches condition and new actions---Expanding the trigger infrastructure and making it usable through the `lttng`client was the core focus of this release.A trigger is an association between a condition and one or more actions. Whenthe condition associated to a trigger is met, the actions associated to thattrigger are executed. The tracing does not have to be active for the conditionsto be met, and triggers are independent from tracing sessions.Since their introduction as part of LTTng 2.10, new conditions and actions wereadded to make this little-known mechanism more flexible.For instance, before this release, triggers supported the following conditiontypes: - Buffer usage exceeded a given threshold, - Buffer usage went under a configurable threshold, - A session rotation occurred, - A session rotation completed.A _notify_ action could be used to send a notification to a third partyapplications whenever those conditions were met.This made it possible, for instance, to disable certain event rules if thetracing buffers were almost full. It could also be used to wait for sessionrotations to be completed to start processing the resulting trace chunkarchives as part of various post-processing trace analyses.This release introduces a new powerful condition type: event-rule matches.This type of condition is met when the tracer encounters an event matching thegiven even rule. The arguments describing the event rule are the same as thosedescribing the event rules of the `enable-event` command.While this is not intended as a general replacement for the existinghigh-throughput tracing facilities, this makes it possible for an applicationto wait for a very-specific event to occur and take action whenever it occurs.The purpose of event-rule matches triggers is to react quickly to an eventwithout the delay introduced by buffering.For example, the following command will create a trigger that emits anotification whenever the &#39;openat&#39; system call is invoked with the&#39;/etc/passwd&#39; filename argument.$ lttng add-trigger --condition event-rule-matches --type=kernel:syscall --name=&#39;openat&#39; --action notifyNew actions were also introduced as part of this release: - Start session This action causes the LTTng session daemon to start tracing for the session with the given name. If no session with the given name exist at the time the condition is met, nothing is done. - Stop session This action causes the LTTng session daemon to stop tracing for the session with the given name. If no session with the given name exist at the time the condition is met, nothing is done. - Rotate session This action causes the LTTng session daemon to rotate the session with the given name. See lttng-rotate(1) for more information about the session rotation concept. If no session with the given name exist at the time the condition is met, nothing is done. - Snapshot session This action causes the LTTng session daemon to take a snapshot of the session with the given name. See lttng-snapshot(1) for more information about the session snapshot concept. If no session with the given name exist at the time the condition is met, nothing is done.These new actions can also be combined together. For instance, the followingtrigger will stop `my_session`, record a snapshot of `my_session`, and notifyany listening application when &#39;/etc/passwd&#39; is opened:$ lttng add-trigger --condition event-rule-matches --type kernel:syscall --name &#39;openat&#39; --filter &#39;filename == &#34;/etc/passwd&#34;&#39; --action stop-session my_session --action snapshot-session my_session --action notifyFor more information, see the following manual pages: - lttng-add-trigger(1), - lttng-remove-trigger(1), - lttng-list-triggers(1).Notification payload capture---The new event-rule matches condition type also allows &#39;captures&#39;.This allow event record and context fields to be captured when an event-rulematches condition is satisfied.The captured field values are made available in the evaluation object of thenotifications transmitted to listening applications.Capture descriptors can be specified using a syntax reminiscent of the one usedby the filter expressions.The following example will capture a process&#39;s name and the &#39;filename&#39; argumentof all `openat()` system calls:$ lttng add-trigger --condition event-rule-matches --type kernel:syscall --name &#39;openat&#39; --capture &#39;filename&#39; --capture &#39;$ctx.procname&#39; --action notifySee the lttng-add-trigger(1) manual page for more information.vtracef and vtracelog (LTTng-UST)---New versions of the `tracef()` and `tracelog()` tracing helpers acceptingvariable argument lists are introduced as `vtracef()` and `vtracelog()`.See the tracef(3) and tracelog(3) manual pages for more information.Add time namespace context (LTTng-UST and LTTng-modules)---It is now possible to add the time namespace of a process as a context tochannels (`time_ns`) using the `add-context` command.See the time_namespaces(7) manual page for more information.Links---Project website:  https://lttng.orgDownload links: https://lttng.org/files/lttng-tools/lttng-tools-2.13.0.tar.bz2 https://lttng.org/files/lttng-ust/lttng-ust-2.13.0.tar.bz2 https://lttng.org/files/lttng-modules/lttng-modules-2.13.0.tar.bz2GPG signatures: https://lttng.org/files/lttng-tools/lttng-tools-2.13.0.tar.bz2.asc https://lttng.org/files/lttng-ust/lttng-ust-2.13.0.tar.bz2.asc https://lttng.org/files/lttng-modules/lttng-modules-2.13.0.tar.bz2.asc-- Mathieu DesnoyersEfficiOS Inc. http://www.efficios.com</p><p>Mathieu Desnoyers mathieu.desnoyers at efficios.com Tue Aug 3 14:40:21 EDT 2021 大家好，今天正式发布 LTTng 2.13 - Nordicité！这是 EfficiOS 团队大部分人一年开发的结果。这个新版本最显着的特点是： - Event-rule 匹配条件触发器和新动作，允许内部动作或外部监控应用程序在内核或用户时快速做出反应- 空间检测被命中， - 通知负载捕获，允许外部监控应用程序在检测被命中时读取检测负载的元素。 - Instrumentation API：vtracef 和 vtracelog (LTTng-UST)， - 用户空间时间命名空间上下文（LTTng-UST 和 LTTng-modules）。此版本以“Nordicité”命名，这是 Champ Libre 和 Boréale 合作的产物。这种农家 IPA 是用 Kveik 酵母和魁北克种植的大麦、燕麦和杜松枝酿造的。结果是一种非凡的果味朦胧的金色 IPA，提供了树脂和木质苦味的平衡感。基于 LTTng 项目记录的稳定版本生命周期，这个 2.13 版本与 LTTng 2.11 版本系列的生命周期结束 (EOL) 相吻合。阅读有关每个新功能的简短描述以及此版本的链接。此公告的美化版本将很快在 GitHub 上提供：https://github.com/lttng/lttng-tools/releases/tag/v2。 13.0关于 LTTng-UST 向后兼容性的注意事项---- soname 主要版本更改 此版本将 LTTng-UST soname 主要从 0 更改为 1。事件通知程序（使用事件规则匹配条件的触发器）功能需要对一开始就不应该公开的公共数据结构。将 soname 专业设置为 1，将需要针对更新的 LTTng-UST 重建应用程序和跟踪点提供程序以使用它。旧应用程序和跟踪点提供程序链接到具有主要 soname 0 的库应该能够在同一系统上共存。- 使用 C++ 编译器构建探针提供程序需要 C++11- API 命名空间 LTTng-UST API 现在系统地命名为`lttng_ust_*`（例如`tracepoint()` 变成`lttng_ust_tracepoint()`）。然而，非命名空间名称仍然暴露以保持 API 兼容性。事件规则匹配条件和新操作---扩展触发器基础结构并使其通过`lttng`客户端可用是此版本的核心重点。触发器是条件与一个或多个动作之间的关联。当满足与触发器关联的条件时，将执行与该触发器关联的操作。跟踪不必为满足条件而处于活动状态，并且触发器独立于跟踪会话。自从它们作为 LTTng 2.10 的一部分引入以来，添加了新的条件和操作以使这种鲜为人知的机制更加灵活。例如，之前此版本中，触发器支持以下条件类型： - 缓冲区使用量超过给定阈值， - 缓冲区使用量低于可配置阈值， - 发生会话轮换， - 会话轮换完成。 _notify_ 操作可用于向第三方应用程序只要满足这些条件。例如，如果跟踪缓冲区几乎已满，则可以禁用某些事件规则。它还可以用于等待 sessionrotations 完成以开始处理生成的跟踪块存档作为各种后处理跟踪分析的一部分。此版本引入了一种新的强大的条件类型：事件规则匹配。当满足这种条件时跟踪器遇到匹配给定偶数规则的事件。描述事件规则的参数与描述 `enable-event` 命令的事件规则的参数相同。虽然这不是作为现有高吞吐量跟踪工具的一般替代品，这使得应用程序可以等待非常特定的事件发生并在发生时采取行动。事件规则匹配触发器的目的是对事件做出快速反应，而没有缓冲引入的延迟。例如，以下命令将创建一个触发器，每当&#39; openat&#39; 系统调用使用&#39;/etc/passwd&#39; 文件名参数调用。$ lttng add-trigger --condition event-rule-matches --type=kernel:syscall --name=&#39;openat&#39; --action notifyNew actions are还作为此版本的一部分引入： - 启动会话 此操作会导致 LTTng 会话守护程序开始跟踪具有给定名称的会话。如果在满足条件时不存在具有给定名称的会话，则不执行任何操作。 - 停止会话 此操作会导致 LTTng 会话守护程序停止跟踪具有给定名称的会话。如果在满足条件时不存在具有给定名称的会话，则不执行任何操作。 - 轮换会话 此操作会导致 LTTng 会话守护进程轮换具有给定名称的会话。有关会话轮换概念的更多信息，请参阅 lttng-rotate(1)。如果在满足条件时不存在具有给定名称的会话，则不执行任何操作。 - 快照会话 此操作会导致 LTTng 会话守护程序使用给定名称拍摄会话的快照。有关会话快照概念的更多信息，请参阅 lttng-snapshot(1)。如果在满足条件时不存在具有给定名称的会话，则不执行任何操作。这些新操作也可以组合在一起。例如，以下触发器将停止`my_session`，记录`my_session`的快照，并在&#39;/etc/passwd&#39;打开时通知任何监听应用程序：$ lttng add-trigger --condition event-rule-matches --type kernel :syscall --name &#39;openat&#39; --filter &#39;filename == &quot;/etc/passwd&quot;&#39; --action stop-session my_session --action snapshot-session my_session --action notify有关更多信息，请参阅以下手册页：- lttng-add-trigger(1), - lttng-remove-trigger(1), - lttng-list-triggers(1).Notification payload capture---新的事件规则匹配条件类型也允许&#39;捕获&#39;。这个允许在满足事件规则匹配条件时捕获事件记录和上下文字段。捕获的字段值在传输到侦听应用程序的通知的评估对象中可用。捕获描述符可以使用让人想起使用的语法来指定过滤器表达式。以下示例将捕获进程的名称和“fil”所有`openat()`系统调用的ename&#39;参数：$ lttng add-trigger --condition event-rule-matches --type kernel:syscall --name &#39;openat&#39; --capture &#39;filename&#39; --capture &#39;$ctx. procname&#39; --action notify 有关更多信息，请参阅 lttng-add-trigger(1) 手册页。 vtracef 和 vtracelog (LTTng-UST)---`tracef()` 和 `tracelog()` 跟踪助手的新版本接受变量参数列表被引入为 `vtracef()` 和 `vtracelog()`。有关更多信息，请参阅 tracef(3) 和 tracelog(3) 手册页。添加时间命名空间上下文（LTTng-UST 和 LTTng-modules）---现在可以使用 `add-context` 命令将进程的时间命名空间作为上下文添加到通道（`time_ns`）。有关更多信息，请参阅 time_namespaces(7) 手册页。链接---项目网站：https ://lttng.org 下载链接： https://lttng.org/files/lttng-tools/lttng-tools-2.13.0.tar.bz2 https://lttng.org/files/lttng-ust/lttng-ust -2.13.0.tar.bz2 https://lttng.org/files/lttng-modules/lttng-modules-2.13.0.tar.bz2G PG 签名：https://lttng.org/files/lttng-tools/lttng-tools-2.13.0.tar.bz2.asc https://lttng.org/files/lttng-ust/lttng-ust-2.13。 0.tar.bz2.asc https://lttng.org/files/lttng-modules/lttng-modules-2.13.0.tar.bz2.asc-- Mathieu DesnoyersEfficiOS Inc. http://www.efficios.com</p></div><div id="story_share_this"><div class="sharethis-inline-share-buttons"></div></div><div class="text-break sotry_link page_narrow"><a target="_blank" href="https://lists.lttng.org/pipermail/lttng-dev/2021-August/030046.html">https://lists.lttng.org/pipermail/lttng-dev/2021-August/030046.html</a></div><div class="story_tags page_narrow"><button type="button" class="btn btn-light my_tag"><a href="/tag/linux/">#linux</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/trace/">#trace</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/lttng/">#lttng</a></button></div></div><div class="shadow p-3 mb-5 bg-white rounded clearfix"><div class="container"><div class="row"><div class="col-sm"><div><a target="_blank" href="/story/1071750.html"><img src="http://img2.diglog.com/img/2021/8/thumb_4efeb272fe87dbd72c6afab20ece0b96.jpg" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1071750.html">Paragon 正在努力将其 ntfs3 文件系统纳入 Linux 内核</a></div><span class="my_story_list_date">2021-8-6 18:31</span></div><div class="col-sm"><div><a target="_blank" href="/story/1071363.html"><img src="http://img2.diglog.com/img/2021/8/thumb_c992393213534879ff09b3116708a085.png" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1071363.html">配备 Apple M1 和 Linux 的超快速 Thunderbolt NAS</a></div><span class="my_story_list_date">2021-8-5 21:4</span></div><div class="col-sm"><div><a target="_blank" href="/story/1071326.html"><img src="http://img2.diglog.com/img/2021/8/thumb_c0e1be35788304c1f8d3f08471141a59.png" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1071326.html">正确完成 Linux 内核安全</a></div><span class="my_story_list_date">2021-8-5 20:51</span></div><div class="col-sm"><div><a target="_blank" href="/story/1071209.html"><img src="http://img2.diglog.com/img/2021/8/thumb_6f5014a62f347d8303944d67bdbb46d3.png" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1071209.html">Linux 内核模块编程指南（针对 5.x 内核更新）</a></div><span class="my_story_list_date">2021-8-3 0:28</span></div></div></div></div><div class="my_movie_list_item shadow p-3 mb-5 bg-white rounded"><button type="button" class="btn btn-link my_tag"><a href="/tag/web2.0/">#web2.0</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/google/">#google</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/设计/">#设计</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/创意/">#创意</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/摄影/">#摄影</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/图片/">#图片</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/游戏/">#游戏</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/软件/">#软件</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/手机/">#手机</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/视频/">#视频</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/广告/">#广告</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/iphone/">#iphone</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/网站/">#网站</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/免费/">#免费</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/下载/">#下载</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/windows/">#windows</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/微软/">#微软</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/blog/">#blog</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/firefox/">#firefox</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/苹果/">#苹果</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/音乐/">#音乐</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/博客/">#博客</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/apple/">#apple</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/wordpress/">#wordpress</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/恶搞/">#恶搞</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/qq/">#qq</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/艺术/">#艺术</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/web/">#web</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/工具/">#工具</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/谷歌/">#谷歌</a></button></div></div></div><div id="my_footer"><div class=""><a href="/tags/">tags</a> <a href="/users/">users</a></div>&copy;2012-2021 diglog.com </div></div></body></html>