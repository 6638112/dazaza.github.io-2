<!doctype html><html lang="zh-hans"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>SMOOSHGATE FAQ（2018） SmooshGate FAQ (2018)</title><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"><link rel="stylesheet" href="/img/css.css?random="><link data-rh="true" rel="icon" href="/img/favicon.ico"/><script data-ad-client="ca-pub-6067137220025946" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script type="text/javascript" src="https://platform-api.sharethis.com/js/sharethis.js#property=5effb96910009800120b8d4d&product=inline-share-buttons" async="async"></script>
<script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?03c1a0f31299b4a2fbb83c34d6beaac9";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script></head><body><div id="my_header"><div class="container"><nav class="navbar navbar-expand-lg"><a class="navbar-brand" href="/"><img alt="diglog" src="/img/logo.v1.gif" class="rounded-sm"></a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarNavAltMarkup"><div class="navbar-nav"></div></div></nav></div></div><div class="container"><div id="my_content"><h1 class="page_narrow">SmooshGate FAQ (2018)<br/>SMOOSHGATE FAQ（2018） </h1><div class="row"><div class="col-lg-12 col-12"><div class="my_story_list_item shadow p-3 mb-5 bg-white rounded"><div class="story_page_pub_time page_narrow">2021-06-04 02:33:32</div><div class="story_img_container"><a href="http://img2.diglog.com/img/2021/6/665bfd348d7a78912cc2d3e0c6d5fd94.png"><img src="http://img2.diglog.com/img/2021/6/665bfd348d7a78912cc2d3e0c6d5fd94.png" class="img-fluid my_story_img" onerror="this.style.display='none'"></a></div><div class="page_narrow text-break page_content"><p>It&#39;s a wrap for  Chrome Dev Summit 2020! Watch all the sessions at  goo.gle/cds20-sessions now!</p><p>它＆＃39;是Chrome Dev Summit 2020的包裹！立即观看Goo.gle/cds20-sessions的所有会话！</p><p>        A  proposal for a JavaScriptlanguage feature called  Array.prototype.flatten turns out to beWeb-incompatible. Shipping the feature in Firefox Nightly caused  at leastone popular websiteto break. Given that the problematic code is part of the widespread MooToolslibrary, it’s likely that many more websites are affected. (Although MooToolsis not commonly used for new websites in 2018, it used to be very popular andis still present on many production websites.)</p><p>        叫做array.prototype.flatten的JavaScriptLanguage功能的提议将转出Beweb-invatmable。在Firefox中运送该功能，夜间引起了最受欢迎的网站网站休息。鉴于有问题的代码是广泛的MootoolsLibrary的一部分，很可能更多的网站受到影响。 （尽管Mootoolsis在2018年不常用于新网站，但它曾经非常受欢迎Andis仍然存在于许多生产网站上。）</p><p> The proposal author jokingly suggested renaming  flatten to  smoosh toavoid the compatibility issue. The joke was not clear to everyone, somepeople started to incorrectly believe that the new name had already beendecided, and things escalated quickly.</p><p> 该提案作者笑话地建议将扁平化展开变形，以兼容性问题。这个笑话对每个人都不清楚，有些人开始错误地相信新名称已经被认为，事情迅速升级。</p><p>  Array.prototype.flat, originally proposed as  Array.prototype.flatten,flattens arrays recursively up to the specified  depth, which defaultsto  1.</p><p>  array.prototype.flat最初提议为array.prototype.flatten，递归到指定深度的递归达到尺寸的阵列，defaultsto 1。</p><p> // Flatten one level:const array = [1, [2, [3]]];array.flat();// → [1, 2, [3]]// Flatten recursively until the array contains no more nested arrays:array.flat(Infinity);// → [1, 2, 3]</p><p> //展平一个级别：const数组= [1，[2，[2，[3]]]; array.flat（）; //→[1,2，[3]] //递归平整，直到阵列不包含更多嵌套阵列：array.flat（无穷大）; //→[1,2,3]</p><p> Note:  Since the publication of this article,  flatten has been renamed to flat to resolve #SmooshGate. The above example has been updated accordingly,but keep in mind that the original name was  flatten.</p><p> 注意：由于本文的出版以来，展平已被重命名为公寓以解决#smooshgate。上面的示例已经相应地更新，但请记住原始名称是平坦的。</p><p> The same proposal includes  Array.prototype.flatMap, which is like Array.prototype.map except it flattens the result into a new array.</p><p> 相同的提案包括array.prototype.flatmap，它就像array.prototype.map，除了它将结果达到一个新数组。 </p><p> [2, 3, 4].flatMap((x) =&gt; [x, x * 2]);// → [2, 4, 3, 6, 4, 8]</p><p>[2,3,4] .flatmap（（x）=＆gt; [x，x * 2]）; //→[2,4,3,6,4,8]</p><p>    MooTools’  flatten implementation differs from the proposed standard.However, this is not the problem! When browsers ship Array.prototype.flatten natively, MooTools overrides the nativeimplementation. This ensures that code relying on the MooTools behaviorworks as intended regardless of whether native  flatten is available.So far, so good!</p><p>    Mootools的扁平实现与所提出的标准不同。但是，这不是问题！当浏览器运输array.ProTotype.flatten当然，Mootools覆盖了您的大量抄本。这可确保代码依赖于Mootools的行为，如拟是可用的原生平坦。所以，如此之好！</p><p> Unfortunately, something else then happens. MooTools copies over all itscustom array methods to  Elements.prototype (where  Elements is aMooTools-specific API):</p><p> 不幸的是，别的东西发生了。 Mootools副本拷贝到Elements.Prototype（其中元素是特定于AmoocoOools的API）：</p><p>  for- in iterates over “enumerable” properties, which doesn’t includenative methods like  Array.prototype.sort, but it does includeregularly-assigned properties like  Array.prototype.foo = whatever. But —and here’s the kicker — if you overwrite a non-enumerable property, e.g. Array.prototype.sort = whatever, it remains non-enumerable.</p><p>  for-在“枚举”属性上迭代，这不包含array.prototype.sort等方法，但它确实包括array.prototype.foo =无论如何。但是 - 这是踢球者 - 如果你覆盖了不符合不符合的财产，例如， array.prototype.sort =无论如何，它仍然是不可识别的。</p><p> Currently,  Array.prototype.flatten = mooToolsFlattenImplementation createsan enumerable  flatten property, so it’s later copied to  Elements. But ifbrowsers ship a native version of  flatten, it becomes non-enumerable, and isn’t copied to  Elements.  Any code relying on MooTools’ Elements.prototype.flatten is now broken.</p><p> 目前，Array.ProTotype.flatten = mootoolsflattenimplementation createSan枚举扁平属性，因此它后来复制到元素。但是，ifbrowsers发货扁平的本机版本，它变得不可识别，而不是复制到元素。任何代码依赖于Mootools的元素.Prototype.flatten现在被打破了。</p><p> Although it seems like changing the native  Array.prototype.flatten to beenumerable would fix the problem, it would likely cause even morecompatibility issues. Every website relying on  for- in to iterate overan array (which is a bad practice, but it happens) would then suddenly getan additional loop iteration for the  flatten property.</p><p> 虽然似乎更改原生阵列.prototype.flatten才能解决问题，但它可能会导致莫会代表性的问题。每个网站依赖于迭代迭代rowan数组（这是一个糟糕的做法，但它发生）然后突然突然扼杀扁平性的循环迭代。</p><p> The bigger underlying problem here is modifying built-in objects. Extendingnative prototypes is generally accepted as a bad practice nowadays, as itdoesn’t compose nicely with other libraries and third-party code. Don’t modifyobjects you don’t own!</p><p> 这里更大的潜在问题正在修改内置对象。现在，Extending的原型通常被接受为现在的糟糕练习，因为它与其他图书馆和第三方代码没有很好地组成。不要修改您自己不拥有的！ </p><p>  In 1996, before CSS became widespread, and long before “HTML5” became athing,  the Space Jamwebsite went live. Today, the website still worksthe same way it did 22 years ago.</p><p>在1996年，在CSS普遍存在之前，在“HTML5”之前很久就成了了余下，空间Jamwebsite就活着。今天，该网站仍然在22年前的方式工作。</p><p> How did that happen? Did someone maintain that website for all these years,updating it every time browser vendors shipped a new feature?</p><p> 那是怎么发生的？这些年来，有人维持该网站，每次浏览器供应商都会更新它的新功能吗？</p><p> As it turns out, “don’t break the Web” is the number one  designprinciplefor HTML, CSS, JavaScript, and any other standard that’s widely used on theWeb. If shipping a new browser feature causes existing websites to stopworking, that’s bad for  everyone:</p><p> 事实证明，“不要打破网络”是用于HTML，CSS，JavaScript和Web中广泛使用的任何其他标准的数字普遍设计。如果运送新的浏览器功能会导致现有的网站已停止，对每个人都不糟糕：</p><p> the website owners went from having a perfectly-working website to anon-functional one without them changing anything;</p><p> 网站所有者从一个完美的工作网站上才能在没有他们改变任何东西的情况下向Anon-uniforal的网站上;</p><p> browser vendors shipping the new feature lose market share, due to usersswitching browsers after noticing “it works in browser X”;</p><p> 浏览器供应商运送新功能丢失市场份额，由于用户开关浏览器在注意到“它在浏览器X中工作”;</p><p> once the compatibility issue is known, other browser vendors refuse to shipit. The feature specification does not match reality ( “nothing but a workof fiction”),which is bad for the standardization process.</p><p> 一旦兼容性问题是已知的，其他浏览器供应商拒绝出货。该特征规范与现实不匹配（“除非是一个虚构的工作”），这对标准化过程不利。</p><p> Sure, in retrospect MooTools did the wrong thing — but breaking the webdoesn’t punish them, it punishes users. These users do not know what a mootool is. Alternatively, we can find another solution, and users can continueto use the web. The choice is easy to make.</p><p> 当然，在回想下，Mootools做错了什么 - 但打破了网站没有惩罚他们，惩罚用户。这些用户不知道Mootool是什么。或者，我们可以找到另一种解决方案，用户可以继续使用Web。选择很容易。 </p><p>  It depends. In rare cases,  bad features can be removed fromthe Web. Even just figuringout whether it’s  possible to remove a feature is a very tricky effort,requiring extensive telemetry to quantify how many web pages would have theirbehavior changed. But when the feature is sufficiently insecure, is harmful tousers, or is used very rarely, this can be done.</p><p>这取决于。在极少数情况下，可以从网上移除不良功能。甚至只是umitture才能删除功能是一种非常棘手的努力，需要广泛的遥测来量化有多少网页将有异步的变化。但是，当特征充分不安全时，有害衰退是有害的，或者很少使用，这可以完成。</p><p> &lt;applet&gt;,  &lt;keygen&gt;, and  showModalDialog() are allexamples of bad APIs that were successfully removed from the Web Platform.</p><p> ＆lt; applet＆gt;，＆lt; keygen＆gt;，showmodaldialog（）是从Web平台成功删除的坏API的allexample。</p><p>  Patching MooTools so that it no longer extends built-in objects is a goodidea. However, it doesn’t solve the problem at hand. Even if MooTools wereto release a patched version, all existing websites using it would have toupdate for the compatibility problem to go away.</p><p>  修补Mootools，以便它不再延伸内置对象是一个Guididea。但是，它并不能解手。即使Mootools Wereto发布了一个修补的版本，所有现有的网站都将有兼容性问题的副本。</p><p>  In a perfect world, MooTools would release a patch, and every single websiteusing MooTools would magically be updated the next day. Problem solved,right?!</p><p>  在一个完美的世界中，Mootools将释放一个补丁，每一个网站mootools都会在第二天似乎可以更新。问题解决了，对吧？！</p><p> Unfortunately, this is unrealistic. Even if someone were to somehow identifythe full set of affected websites, manage to find contact information foreach and every one of them, successfully reach out to all the website owners,and convince them all to perform the update (which might mean refactoringtheir entire code base), the entire process would take years, at best.</p><p> 不幸的是，这是不现实的。即使某人以某种方式识别完整的受影响的网站，也可以查找联系人信息foreach和它们中的每一个，成功地联系到所有网站所有者，并说服他们所有人来执行更新（这可能意味着重构TheIr的整个代码基础），整个过程需要数年，最佳。</p><p> Keep in mind that many of these websites are old and likely unmaintained.Even if the maintainer is still around, it’s possible they’re not ahighly-skilled web developer like yourself. We can’t expect everyone to goand change their 8-year-old website because of a web compatibility issue.</p><p> 请记住，这些网站中的许多网站都是旧的并且可能没有幻想。即使维护者仍然存在，他们可能是他们不是熟练的Web开发人员。由于网络兼容性问题，我们无法指望每个人都会逐渐改变8岁的网站。</p><p>   #SmooshGate caused some to believe that “TC39 wants to rename  flatten to smoosh”, but it was an in-joke that wasn’t well-communicated externally.Major decisions like renaming a proposal are not taken lightly, are not takenby a single person, and are definitely not taken overnight based on a singleGitHub comment.</p><p>   #smooshgate导致一些人相信“tc39想要重命名扁平浮动”，但这是一个互相沟通的互动沟通。像重命名一个提案的决定没有轻，没有被剥夺一个人，并且绝对不是基于床单评论的一夜之间。 </p><p> TC39 operates on  a clear stagingprocess for feature proposals.ECMAScript proposals and any major changes to them (including methodrenaming) are discussed during TC39 meetings, and need to be approved by theentire committee before they become official. In the case of Array.prototype.flatten, the proposal has already gone through severalstages of agreement, all the way up to Stage 3, indicating the feature isready to be implemented in Web browsers. It’s common for additional specissues to come up during implementation. In this case, the most importantfeedback came  after trying to ship it: the feature, in its current state,breaks the Web. Hard-to-predict issues like these are part of the reason whythe TC39 process doesn’t just end once browsers ship a feature.</p><p>TC39在明确的StageProcess上运作，适用于特征预言.CMAcript提案，并在TC39会议期间讨论了对他们的任何重大变更（包括方法），并且需要在他们成为官方的委员会之前获得委员会的批准。在Array.Prototype.flatten的情况下，该提案已经经过了同意的几个故事，一直到3阶段，表示在Web浏览器中实现的功能。在实施期间提出额外的说明是常见的。在这种情况下，尝试运送它之后最重要的是：该功能在其当前状态删除网络。难以预测的问题，如这些问题是TC39过程不仅结束一旦浏览器发货了一个特征的一部分原因。</p><p> TC39 operates on consensus, meaning the committee has to agree on any newchanges. Even if  smoosh had been a serious suggestion, it seems likely thata committee member would object to it in favor of a more common name like compact or  chain.</p><p> TC39经营共识，这意味着委员会必须就任何纽换达成一致。即使Smoosh是一个严肃的建议，似乎也可能对象反对它有利于更常见的名字，如紧凑或链条。</p><p> The renaming from  flatten to  smoosh (even if it hadn’t been a joke) hasnever been discussed at a TC39 meeting. As such, the official TC39 stance onthis topic is currently unknown. No single individual can speak on behalf ofall of TC39 until consensus is reached at the next meeting.</p><p> 在TC39会议上讨论了从平坦到Smoosh（即使没有笑话）的重命名。因此，官方TC39姿势目前未知。没有单身人士可以代表TC39发言，直到下次会议达成共识。</p><p> TC39 meetings are generally attended by people with highly diversebackgrounds: some have years of programming language design experience,others work on a browser or JavaScript engine, and an increasing number ofattendants are there to represent the JavaScript developer community.</p><p> TC39会议通常由具有高度多样化的人参加：有些人有多年的编程语言设计经验，其他人在浏览器或JavaScript引擎上工作，并且越来越多的ofantendants是表示JavaScript开发人员社区的。</p><p>    rss_feed Subscribe to our  RSS or  Atom feed and get the latest  updates in your favorite feed reader!</p><p>    RSS_FEED订阅我们的RSS或ATOM Feed，并在您最喜欢的饲料阅读器中获取最新更新！ </p></div><div id="story_share_this"><div class="sharethis-inline-share-buttons"></div></div><div class="text-break sotry_link page_narrow"><a target="_blank" href="https://developers.google.com/web/updates/2018/03/smooshgate">https://developers.google.com/web/updates/2018/03/smooshgate</a></div><div class="story_tags page_narrow"><button type="button" class="btn btn-light my_tag"><a href="/tag/网站/">#网站</a></button></div></div><div class="my_movie_list_item shadow p-3 mb-5 bg-white rounded"><button type="button" class="btn btn-link my_tag"><a href="/tag/web2.0/">#web2.0</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/google/">#google</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/设计/">#设计</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/创意/">#创意</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/摄影/">#摄影</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/游戏/">#游戏</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/图片/">#图片</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/软件/">#软件</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/视频/">#视频</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/手机/">#手机</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/广告/">#广告</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/apple/">#apple</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/iphone/">#iphone</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/网站/">#网站</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/免费/">#免费</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/下载/">#下载</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/windows/">#windows</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/微软/">#微软</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/firefox/">#firefox</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/苹果/">#苹果</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/blog/">#blog</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/音乐/">#音乐</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/博客/">#博客</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/wordpress/">#wordpress</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/恶搞/">#恶搞</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/艺术/">#艺术</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/qq/">#qq</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/web/">#web</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/谷歌/">#谷歌</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/工具/">#工具</a></button></div></div></div><div id="my_footer"><div class=""><a href="/tags/">tags</a> <a href="/users/">users</a></div>&copy;2012-2021 diglog.com </div></div></body></html>