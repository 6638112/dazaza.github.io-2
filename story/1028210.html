<!doctype html><html lang="zh-hans"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>CSV阅读器基准：Julia阅读CSV的速度比Python和R快10-20倍</title><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"><link rel="stylesheet" href="/img/css.css?random="><link data-rh="true" rel="icon" href="/img/favicon.ico"/><script data-ad-client="ca-pub-6067137220025946" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script type="text/javascript" src="https://platform-api.sharethis.com/js/sharethis.js#property=5effb96910009800120b8d4d&product=inline-share-buttons" async="async"></script>
<script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?03c1a0f31299b4a2fbb83c34d6beaac9";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script></head><body><div id="my_header"><div class="container"><nav class="navbar navbar-expand-lg"><a class="navbar-brand" href="/"><img alt="diglog" src="/img/logo.v1.gif" class="rounded-sm"></a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarNavAltMarkup"><div class="navbar-nav"></div></div></nav></div></div><div class="container"><div id="my_content"><h1 class="page_narrow">CSV阅读器基准：Julia阅读CSV的速度比Python和R快10-20倍</h1><div class="row"><div class="col-lg-12 col-12"><div class="my_story_list_item shadow p-3 mb-5 bg-white rounded"><div class="story_page_pub_time page_narrow">2020-10-12 07:11:31</div><div class="story_img_container"><a href="http://img2.diglog.com/img/2020/10/9f6f6fa763b64246c0bbfc3bb35b29cc.png"><img src="http://img2.diglog.com/img/2020/10/9f6f6fa763b64246c0bbfc3bb35b29cc.png" class="img-fluid my_story_img" onerror="this.style.display='none'"></a></div><div class="page_narrow text-break page_content"><p>任何数据分析工作流程中的第一个任务就是简单地读取数据，这绝对必须快速有效地完成，这样才能开始更有趣的工作。在许多行业和领域，CSV文件格式是存储和共享表格数据的王道。快速可靠地加载CSV至关重要，它必须能够很好地扩展到各种文件大小、数据类型和形状。这篇文章比较了在三个不同的CSV解析器上读取8个不同的真实世界数据集的性能：R的Fread、Pandas的Read_CSV和Julia的CSV.jl。每一个解析器分别被选为R、Python和Julia的“同类最佳”CSV解析器。</p><p>这三个工具都强大地支持加载各种可能缺少值的数据类型，但只有Fread(R)和CSV.jl(Julia)支持多线程-Pandas只支持单线程CSV加载。Julia的CSV.jl还有一个独特之处，那就是它是唯一一个完全用高级语言实现的工具，而不是用C实现的，并且是从R/Python包装而来的。(Pandas确实有一个功能稍强的Python原生解析器，它的速度要慢得多，而且几乎所有READ_CSV的使用都默认使用Cengine。)。因此，这里的CSV.jl基准测试不仅表示在Julia中加载数据的速度，而且还指示在分析中使用的后续Julia代码中可能出现的各种性能。</p><p>以下基准测试显示，即使在单核上，Julia的CSV.jl也比Pandas快1.5到5倍；在启用多线程的情况下，它与R的Read_CSV一样快，甚至更快。用于基准测试的工具有针对Julia的BenchmarkTools.jl、针对R的MicroBenchmarkmark和针对Python的timeit。</p><p>让我们从一些同类数据集开始，即在所有列中都具有相同类型数据的数据集。本节中的数据集partfrom股价数据集派生自此基准站点。性能指标是线程数量从1增加到20时加载数据集所花费的时间。由于Pandas不支持多线程，因此所有内核计数都会全面报告单线程速度。</p><p>统一浮点数据集：第一个数据集包含以100万行和20列排列的浮点值。熊猫加载这个文件需要232毫秒。单线程data.table比CSV.jl快1.6倍。使用多线程时，CSV.jl表现最好，速度是data.table的两倍多。在没有多线程的情况下，CSV.jl比Pandas快1.5倍，而在多线程的情况下，CSV.jl的速度大约是Pandas的11倍。</p><p>统一字符串数据集(I)：此数据集包含所有列中的字符串值，具有100万行和20列。熊猫需要546毫秒来加载文件。对于R，添加线程似乎不会带来任何性能提升。单线程CSV.jl比data.table快2.5倍。在10个线程的情况下，它大约比data.table快14倍。</p><p>均匀字符串数据集(II)：此数据集的维度与上一数据集的维度相同。但是，每列也都有缺失值。熊猫需要300毫秒。在没有线程的情况下，CSV.jl比R快1.2倍，有线程时大约快5倍。</p><p>此数据集包含5,000万行和5列，大小为2.5 GB。AAPL股票有开盘价、高价、低价和收盘价。包含价格的四列是浮点值，还有一个日期列。</p><p>单线程CSV.jl大约比R的Fread from mdata.table快1.5倍。在多线程的情况下，CSV.jl大约快22倍！熊猫的Read_CSV阅读需要34秒，比R和Julia都慢。</p><p>混合数据集：此数据集有10k行和200列。列包含、字符串、浮点数、日期时间和缺失值。Pand需要大约400毫秒来加载此数据集。在没有线程的情况下，CSV.jl的速度是R的2倍，10线程的速度大约是R的10倍。</p><p>现在，让我们看看更广泛的数据集。Kaggle的这个抵押贷款风险数据集是一个混合类型的数据集，有356k行和2190列，列是异构的，具有String、Int、Float和Missing类型的值。熊猫需要119秒才能读入这个数据集。单线程Fread大约比CSV.jl快两倍。然而，在线程更多的情况下，Julia要么和R一样快，要么稍微快一点。</p><p>宽数据集：这是一个相当宽的数据集，有1000行和20,000列。数据集包含字符串和Int值。Pandasta读取数据集需要7.3秒。在这种情况下，单个theradeddata.table大约比CSV.jl快5倍。由于线程更多，CSV.jl与data.table竞争。在使用data.table的情况下，增加线程数量似乎不会带来任何性能提升。</p><p>Fannie Mae收购数据集：该数据集可以从Fannie Mae网站下载，该数据集有400万行和25列，值类型为Int、String、Float和Missing。</p><p>单线程data.table比CSV.jl快1.25倍。但是，CSV.jl的性能随着线程的增多而不断提高。使用多线程时，CSV.jl的速度大约是原来的4倍。</p><p>在所有8个数据集中，Julia的CSV.jl总是比Pandas快，并且在多线程的情况下，它与R的data.table竞争。</p><p>系统信息：执行基准测试的系统规格如下</p><p>$uname-aLinux南极5.6.0-CUSTOM+#1 SMP Mon Apr 6 00：47：33 EDT 2020 x86_64 GNU/Linux。</p><p>$lscpuArchitecture：x86_64CPU操作模式：32位，64位字节顺序：小端CPU：40个在线CPU列表：0-39个每核线程数：2个每插槽核数：10个插槽：2个NUMA节点：2个供应商ID：GenuineIntelCPU系列：6型号：85型号：85型号：英特尔(R)至强(R)银色4114 CPU@2.20GZ步进：4CPU MHz：800.225 CPU最大MHz：300000 CPU min MHz：800.0000BogoMIPS：440000虚拟化：VT-xL1d高速缓存：32KL1高速缓存：1024KL3高速缓存：14080Knode0 CPU(秒)：0-100.25CPU MHz：3000.0000CPU min MHz：800.0000BogoMIPS：440000虚拟化：VT-xL1d高速缓存：32KL1高速缓存：1024KL3高速缓存：14080Knode0 CPU(秒)：0-100.25CPU MHz：300000 CPU MIPS：440000虚拟化：VT-xL1d高速缓存：32KL1高速缓存：1024KL3高速缓存：14080Knode0 CPU。9，20-29个NUMA节点1个CPU：10-19，30-39。</p><p>$free-h可用的可用空闲共享缓冲区/缓存总数内存：62G 3.3G 6.3G 352K 52G 58G斯瓦普：59G 3.2G 56G</p></div><div id="story_share_this"><div class="sharethis-inline-share-buttons"></div></div><div class="text-break sotry_link page_narrow"><a target="_blank" href="https://juliacomputing.com/blog/2020/06/22/fast-csv.html">https://juliacomputing.com/blog/2020/06/22/fast-csv.html</a></div><div class="story_tags page_narrow"><button type="button" class="btn btn-light my_tag"><a href="/tag/python/">#python</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/julia/">#julia</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/csv/">#csv</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/reader/">#reader</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/数据/">#数据</a></button></div></div><div class="shadow p-3 mb-5 bg-white rounded clearfix"><div class="container"><div class="row"><div class="col-sm"><div><a target="_blank" href="/story/1028072.html"><img src="http://img2.diglog.com/img/2020/10/thumb_3a471c198f24e912d5d706116095c899.jpg" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1028072.html">新的Python3.9给语言功能带来了“重大变化”</a></div><span class="my_story_list_date">2020-10-11 16:54</span></div><div class="col-sm"><div><a target="_blank" href="/story/1027941.html"><img src="http://img2.diglog.com/img/2020/10/thumb_839c9b23f6a2842cc0e45923bebbdac8.jpeg" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1027941.html">Py：Python代码，它可以无怨无悔地获取它的依赖项</a></div><span class="my_story_list_date">2020-10-11 15:46</span></div><div class="col-sm"><div><a target="_blank" href="/story/1027148.html"><img src="http://img2.diglog.com/img/2020/9/thumb_1d027de3942bb4b54b9f372cd049cbe1.png" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1027148.html">面向儿童的Python：面向儿童的综合Python开发教程</a></div><span class="my_story_list_date">2020-9-30 6:6</span></div><div class="col-sm"><div><a target="_blank" href="/story/1026638.html"><img src="http://img2.diglog.com/img/2020/9/thumb_fe91cb30bc33cb735570c6a0f4872739.jpg" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1026638.html">Python开发人员构建了一个Raspberry PI，向无人机飞行员发出警报</a></div><span class="my_story_list_date">2020-9-27 4:57</span></div></div></div></div><div class="my_movie_list_item shadow p-3 mb-5 bg-white rounded"><button type="button" class="btn btn-link my_tag"><a href="/tag/web2.0/">#web2.0</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/google/">#google</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/设计/">#设计</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/创意/">#创意</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/摄影/">#摄影</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/游戏/">#游戏</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/图片/">#图片</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/软件/">#软件</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/视频/">#视频</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/手机/">#手机</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/广告/">#广告</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/apple/">#apple</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/iphone/">#iphone</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/网站/">#网站</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/免费/">#免费</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/下载/">#下载</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/windows/">#windows</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/微软/">#微软</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/firefox/">#firefox</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/苹果/">#苹果</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/blog/">#blog</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/音乐/">#音乐</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/博客/">#博客</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/wordpress/">#wordpress</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/恶搞/">#恶搞</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/艺术/">#艺术</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/qq/">#qq</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/web/">#web</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/谷歌/">#谷歌</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/工具/">#工具</a></button></div></div></div><div id="my_footer"><div class=""><a href="/tags/">tags</a> <a href="/users/">users</a></div>&copy;2012-2021 diglog.com </div></div></body></html>