<!doctype html><html lang="zh-hans"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>首先优化简单性</title><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"><link rel="stylesheet" href="/img/css.css?random="><link data-rh="true" rel="icon" href="/img/favicon.ico"/><script data-ad-client="ca-pub-6067137220025946" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script type="text/javascript" src="https://platform-api.sharethis.com/js/sharethis.js#property=5effb96910009800120b8d4d&product=inline-share-buttons" async="async"></script>
<script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?03c1a0f31299b4a2fbb83c34d6beaac9";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script></head><body><div id="my_header"><div class="container"><nav class="navbar navbar-expand-lg"><a class="navbar-brand" href="/"><img alt="diglog" src="/img/logo.v1.gif" class="rounded-sm"></a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarNavAltMarkup"><div class="navbar-nav"></div></div></nav></div></div><div class="container"><div id="my_content"><h1 class="page_narrow">首先优化简单性</h1><div class="row"><div class="col-lg-12 col-12"><div class="my_story_list_item shadow p-3 mb-5 bg-white rounded"><div class="story_page_pub_time page_narrow">2022-02-25 17:32:42</div><div class="page_narrow text-break page_content"><p>在开发软件时，我们不可能对所有东西都进行优化，所以我们需要从一些东西开始，这些东西应该是简单的代码和简单的体系结构。例如，为了在JavaScript中过度优化速度，我们可能会向后编写For循环，从而损害可读性。</p><p>我认为我们应该首先优化简单性，只在必要时对复杂的内存、速度和抽象进行更改。</p><p>如果它速度慢但可读性好，我可以把它写得快。如果它坏了但可读，我可以让它工作。如果这是不可能理解的，那么我必须花几个小时试图理解这个讨厌的东西首先应该做什么。</p><p>工作、可读的软件应该是代码的“MVP”。在易于理解的代码中发现瓶颈是很容易的。如果必要的话，这段缓慢的代码可以优化速度。</p><p>在某些情况下，事先认真对待速度是有道理的。例如，选择项目使用哪种语言或框架是一个不能轻易撤销或更改的决定。如果您选择了错误的语言或框架，即使在当时看来这是一个简单的选择，我可以向您保证，将所有功能重写到一个新的堆栈中绝不简单。</p><p>例如，试图用Ruby on Rails编写一个现代PC游戏是一件蠢事。</p><p>你需要Redis吗？你真的需要Redis吗？可能不会。对于web API，在第一次迭代时省略缓存。大多数服务器不需要内存缓存来有效地为用户服务。当速度开始成为问题时，如果可能的话，在服务器本身上实现内存缓存。就整体系统复杂性而言，唯一比代码依赖性更糟糕的是基础设施依赖性。</p><p>只有在没有更简单的选项时，才能添加新的数据库、缓存系统、队列服务器或NPM模块。</p><p>编写可重用函数没有错，大多数编写良好的函数都是可重用的，不会增加任何不必要的复杂性。然而，我经常看到开发人员过度概括问题，损害可读性。</p><p>如果应用程序中目前只有一个地方调用函数，那么不要担心让该函数成为其自身最通用的版本。例如，假设我的Go API中有一些验证中间件：</p><p>输入apiParams struct{OrgID string UserID string}func validateParams（参数apiParams）error{if params.OrgID==&#34；&#34；{返回错误。新建（&#34；需要OrgID&#34；）}如果参数为。UserID==&#34&#34; {返回错误。新建（&#34；需要用户ID&#34；）}返回零}</p><p>这确实是一个有用的功能，但我对干燥的渴望可能会促使我做以下事情：</p><p>键入apiParams struct{OrgID string UserID string}func validateParams（参数接口{}）error{dat，:=json.Marshal（参数）mapParams:=map[string]string{}json。对k，v:=范围映射参数{if v=&#34；&#34；{返回fmt.Errorf（&#34；%s未找到&#34；，k）}返回nil}</p><p>我们已经成功地使代码更加抽象，现在任何函数都可以传入任何结构来检查公共字段是否存在！问题是，我还添加了新的边缘案例，这些案例在各种情况下肯定会产生bug。例如，如果一个整数被传递到我的函数中呢？</p><p>代码就这么简单，我们没有理由推广它。当我们最终被迫创建一个更广泛的抽象时，我们将有更多关于如何构建一个好的抽象的信息。</p><p>亲吻&gt；干的如果使用得当，干代码将比以前更简单，我不认为这些经验法则存在直接竞争。</p></div><div id="story_share_this"><div class="sharethis-inline-share-buttons"></div></div><div class="story_tags page_narrow"><button type="button" class="btn btn-light my_tag"><a href="/tag/优化/">#优化</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/optimize/">#optimize</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/可能/">#可能</a></button></div></div><div class="my_movie_list_item shadow p-3 mb-5 bg-white rounded"><button type="button" class="btn btn-link my_tag"><a href="/tag/web2.0/">#web2.0</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/google/">#google</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/设计/">#设计</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/创意/">#创意</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/摄影/">#摄影</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/图片/">#图片</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/游戏/">#游戏</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/软件/">#软件</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/广告/">#广告</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/视频/">#视频</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/手机/">#手机</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/iphone/">#iphone</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/网站/">#网站</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/免费/">#免费</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/windows/">#windows</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/下载/">#下载</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/微软/">#微软</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/苹果/">#苹果</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/firefox/">#firefox</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/blog/">#blog</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/音乐/">#音乐</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/博客/">#博客</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/apple/">#apple</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/wordpress/">#wordpress</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/恶搞/">#恶搞</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/qq/">#qq</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/艺术/">#艺术</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/谷歌/">#谷歌</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/工具/">#工具</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/web/">#web</a></button></div></div></div><div id="my_footer"><div class=""><a href="/tags/">tags</a> <a href="/users/">users</a></div>&copy;2012-2021 diglog.com </div></div></body></html>