<!doctype html><html lang="zh-hans"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>关于康威定律和软件堆栈的思考</title><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"><link rel="stylesheet" href="/img/css.css?random="><link data-rh="true" rel="icon" href="/img/favicon.ico"/><script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?03c1a0f31299b4a2fbb83c34d6beaac9";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script><script data-ad-client="ca-pub-6067137220025946" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script type="text/javascript" src="https://platform-api.sharethis.com/js/sharethis.js#property=5effb96910009800120b8d4d&product=inline-share-buttons" async="async"></script></head><body><div id="my_header"><div class="container"><nav class="navbar navbar-expand-lg"><a class="navbar-brand" href="/"><img alt="diglog" src="/img/logo.v1.gif" class="rounded-sm"></a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarNavAltMarkup"><div class="navbar-nav"></div></div></nav></div></div><div class="container"><div id="my_content"><h1 class="page_narrow">关于康威定律和软件堆栈的思考</h1><div class="row"><div class="col-lg-12 col-12"><div class="my_story_list_item shadow p-3 mb-5 bg-white rounded"><div class="story_page_pub_time page_narrow">2020-10-18 01:52:56</div><div class="page_narrow text-break page_content"><p>I’ve been talking to a lot of people in different layers of the stack during myfunemployment. I wanted to share one of the problems I’ve been thinking aboutand maybe you can think of some clever solutions to solve it.</p><p>在我找工作的过程中，我和很多不同层次的人谈过话。我想分享我一直在思考的一个问题，也许你可以想出一些聪明的解决方案来解决它。</p><p> Conway’s Law states “organizations which design systems … are constrainedto produce designs which are copies of the communication structures of theseorganizations.”</p><p>康威定律规定“设计系统…的组织。被限制为设计是这些组织的交流结构的复制品。“。</p><p> If you were to apply Conway’s Law to all the layers of the software stack andopen source software you’d see a problem:  There is not sufficientcommunication between the various layers of software.</p><p>如果您将康威定律应用于软件堆栈和开放源码软件的所有层，您会发现一个问题：各层软件之间没有足够的通信。</p><p>  I’ve met a bunch of hardware engineers and I’ve made a point about asking eachof them how they feel about using a single chip for multiple users. Thisis, of course, the use case of the cloud. All of the hardware engineers eitherlaugh or are horrified and the resounding reaction is “you’d be crazy to thinkhardware was ever intended to be used for isolating multiple users safely.”Spectre and Meltdown proved this was true as well. Speculative execution wasa feature intended to make processors faster but was never thought about interms of the vector of hacking something running multi-tenant compute,like a cloud provider. Seems like the software and hardware layers shouldbetter communicate…</p><p>我见过一群硬件工程师，我特意问了他们每个人对使用一块芯片供多个用户使用有何感想。当然，这就是云的用例。所有的硬件工程师要么大笑，要么惊恐，响亮的反应是“你疯了，以为硬件是用来安全地隔离多个用户的。”“幽灵党”和“熔毁”也证明了这一点。投机性执行是一个旨在提高处理器速度的功能，但从来没有考虑过黑客攻击运行多租户计算的东西的矢量，比如云提供商。看起来软件层和硬件层应该更好地沟通…。</p><p> That’s just one example, let’s reverse the interaction. I’ve talked to a bunchof firmware and kernel engineers and they’d all love if the firmware from chipvendors did less complexity. For instance, it seems like a unanimous vote amongfirmware and kernel engineers that CPU vendors should not include runtimeservices or SMM with their firmware. Open source firmware and kernel developerswould rather handle those problems at their layer of the stack. All the complexityin the firmware leads to overlooked bugs and odd behavior that can’t becontrolled or debugged from the kernel developers layer and/or user space. Not to mention,a lot of CPU vendors firmware is proprietary so it’s really hard to know ifa bug is truly a firmware bug.</p><p>这只是一个例子，让我们反转一下交互。我和一群固件和内核工程师谈过，他们都希望来自芯片供应商的固件复杂度更低。例如，固件和内核工程师似乎一致投票认为CPU供应商不应该在他们的固件中包含运行时服务或SMM。开源固件和内核开发者更愿意在他们的堆栈层次上处理这些问题。固件中的所有复杂性都会导致被忽视的错误和奇怪的行为，这些错误和行为不能从内核开发人员层和/或用户空间进行控制或调试。更不用说，很多CPU供应商的固件都是专有的，所以很难知道IFA bug是否真的是固件bug。</p><p> Another example would be the  hack of SoftLayer. Hackers modified thefirmware on the BMC from a bare metal host the cloud provider was offering.This shows another mistake in having blinders on and not being consciousof the other layers of the stack and the entire system.</p><p>另一个例子是SoftLayer的黑客攻击。黑客从云提供商提供的裸机主机上修改了BMC上的固件，这表明了另一个错误，那就是对堆栈的其他层和整个系统视而不见，没有意识到这一点。</p><p> Let’s move up the stack a bit to something I personally have experienced.I worked a lot on container runtimes. I also have worked on kubernetes.I was horrified to find people are running multi-tenant kubernetes clusterswith multiple customers processes, aka for isolating untrusted processes. The architecture of kubernetes isjust  not designed for this.</p><p>让我们往上移一点，看看我个人经历过的东西。我在容器运行时方面做了很多工作。我还从事kubernetes方面的工作，我惊恐地发现人们正在运行具有多个客户进程的多租户Kubernetes集群，也就是用于隔离不受信任的进程。Kubernetes的架构不是为此而设计的。</p><p> A common miscommunication is the “window dressing.” For example, there is afeature in kubernetes that prevents exec-ing intocontainers. This is implemented by merely preventing theAPI call in kubernetes. If a person has access to a cluster there are about 4 dozen differentways I can think of to exec into a container and bypass this “feature” andkubernetes entirely. Usingsaid “security feature” in kubernetes alone is not sufficient for security in any respect.This is a common pattern.</p><p>一种常见的误解是“装点门面”。例如，Kubernetes中有一种特性阻止向容器内执行。这只需阻止Kubernetes中的API调用即可实现。如果一个人可以访问集群，我可以想到大约40种不同的方法来执行到一个容器中，并完全绕过这个“特性”和kubernetes。说仅仅使用Kubernetes中的“安全功能”在任何方面都不足以保证安全，这是一种常见的模式。</p><p> All these problems are not small by any means. They are miscommunicationsat various layers of the stack. They are people thinking an interface orfeature is secure when it is merely a window dressing that can be bypassed withjust a bit more knowledge about the stack. I really like the advice Lea Kissner gave:“take the long view, not just the broad view.” We should do this more oftenwhen building systems.</p><p>所有这些问题决不是小问题。它们在堆栈的各个层都有沟通错误。他们认为界面或功能是安全的，因为它只是一个装点门面的东西，只需多了解一点关于堆栈的知识就可以绕过它。我真的很喜欢莉亚·基斯纳给出的建议：“要着眼长远，而不只是放眼全局。”在构建系统时，我们应该更多地这样做。</p><p> The thought I’ve been noodling on is: how do we solve this? Is this somethinga code hosting provider like GitHub should fix? But, that excludes all theprojects that are not on that platform. How do we promote better communicationbetween layers of the stack? How can we automate some of this away? Or isthe answer simply, own all the layers of the stack yourself?</p><p>我一直在琢磨的想法是：我们如何解决这个问题？这是像GitHub这样的代码托管提供商应该解决的问题吗？但是，这不包括所有不在该平台上的项目。我们如何促进堆栈各层之间更好的通信？我们怎样才能使其中的一些内容自动化呢？或者答案很简单，自己拥有堆栈的所有层？</p></div><div id="story_share_this"><div class="sharethis-inline-share-buttons"></div></div><div class="text-break sotry_link page_narrow"><a target="_blank" href="https://blog.jessfraz.com/post/thoughts-on-conways-law-and-the-software-stack/">https://blog.jessfraz.com/post/thoughts-on-conways-law-and-the-software-stack/</a></div><div class="story_tags page_narrow"><button type="button" class="btn btn-light my_tag"><a href="/tag/软件/">#软件</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/定律/">#定律</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/conway/">#conway</a></button></div></div><div class="shadow p-3 mb-5 bg-white rounded clearfix"><div class="container"><div class="row"><div class="col-sm"><div><a target="_blank" href="/story/1029375.html"><img src="http://img2.diglog.com/img/2020/10/thumb_5f335330e5e4f3b58d6ed98b80634cc5.png" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1029375.html">如何不损坏您的软件定义无线电</a></div><span class="my_story_list_date">2020-10-17 10:26</span></div><div class="col-sm"><div><a target="_blank" href="/story/1029352.html"><img src="http://img2.diglog.com/img/2020/10/thumb_fbc0aaface1fa94594d239ce656a2594.png" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1029352.html">软件公司亿万富翁首席执行官因涉嫌20亿美元逃税计划被起诉|ZDNet</a></div><span class="my_story_list_date">2020-10-17 6:50</span></div><div class="col-sm"><div><a target="_blank" href="/story/1029313.html"><img src="http://img2.diglog.com/img/2020/10/thumb_8f12306762145e46db7ac0b2cf307abb.png" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1029313.html">谷歌表示，它在2017年缓解了2.54Tbps的DDoS攻击，这是迄今已知的最大规模的攻击</a></div><span class="my_story_list_date">2020-10-17 4:14</span></div><div class="col-sm"><div><a target="_blank" href="/story/1029291.html"><img src="http://img2.diglog.com/img/2020/10/thumb_cdc56ec6813c1a5969264a4028df77cd.jpg" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1029291.html">NanoAdbloker/NanoDefender现在是恶意软件</a></div><span class="my_story_list_date">2020-10-17 2:26</span></div></div></div></div><div class="my_movie_list_item shadow p-3 mb-5 bg-white rounded"><button type="button" class="btn btn-link my_tag"><a href="/tag/web2.0/">#web2.0</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/google/">#google</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/设计/">#设计</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/游戏/">#游戏</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/创意/">#创意</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/apple/">#apple</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/苹果/">#苹果</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/摄影/">#摄影</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/软件/">#软件</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/美国/">#美国</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/iphone/">#iphone</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/图片/">#图片</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/手机/">#手机</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/视频/">#视频</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/广告/">#广告</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/免费/">#免费</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/谷歌/">#谷歌</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/网站/">#网站</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/windows/">#windows</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/微软/">#微软</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/下载/">#下载</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/firefox/">#firefox</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/音乐/">#音乐</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/linux/">#linux</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/blog/">#blog</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/博客/">#博客</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/程序/">#程序</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/艺术/">#艺术</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/web/">#web</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/wordpress/">#wordpress</a></button></div></div></div><div id="my_footer"><div class=""><a href="/tags/">tags</a> <a href="/users/">users</a></div>&copy; 2020 diglog.com </div></div></body></html>