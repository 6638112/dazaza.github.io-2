<!doctype html><html lang="zh-hans"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>使用W64Devkit的Windows应用程序开发指南 A guide to Windows application development using w64devkit</title><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"><link rel="stylesheet" href="/img/css.css?random="><link data-rh="true" rel="icon" href="/img/favicon.ico"/><script data-ad-client="ca-pub-6067137220025946" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script type="text/javascript" src="https://platform-api.sharethis.com/js/sharethis.js#property=5effb96910009800120b8d4d&product=inline-share-buttons" async="async"></script>
<script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?03c1a0f31299b4a2fbb83c34d6beaac9";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script></head><body><div id="my_header"><div class="container"><nav class="navbar navbar-expand-lg"><a class="navbar-brand" href="/"><img alt="diglog" src="/img/logo.v1.gif" class="rounded-sm"></a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarNavAltMarkup"><div class="navbar-nav"></div></div></nav></div></div><div class="container"><div id="my_content"><h1 class="page_narrow">A guide to Windows application development using w64devkit<br/>使用W64Devkit的Windows应用程序开发指南 </h1><div class="row"><div class="col-lg-12 col-12"><div class="my_story_list_item shadow p-3 mb-5 bg-white rounded"><div class="story_page_pub_time page_narrow">2021-03-12 00:42:49</div><div class="page_narrow text-break page_content"><p>There’s a trend of building services where a monolithic application isbetter suited, or using JavaScript and Python then being stumped by theirtroublesome deployment story. This leads to solutions like  bundling anentire web browser with an application, or using containers tocircumscribe  a sprawling dependency tree made of mystery meat.</p><p>建筑服务的趋势，在单片应用程序中，适合单片应用程序，或者使用JavaScript和Python然后被他们的Ortome部署故事困扰。这导致与应用程序的捆绑万维网浏览器相同的解决方案，或者使用容器Tocircumscribe由神秘肉制成的庞大依赖树。</p><p> My  small development distribution for Windows,  w64devkit,is my own little way of pushing back against this trend where it affectsme most. Following in the footsteps of projects like  Handmade Heroand  Making a Video Game from Scratch, this is my guide tono-nonsense software development using my development kit. It’s anoverview of the tooling and development workflow, and I’ve tried not toassume too much knowledge of the reader. Being a guide rather than manual,it is incomplete on its own, and I link to substantial external resourcesto fill in the gaps. The guide is capped with a small game I wroteentirely using my development kit, serving as a demonstration of whatsorts of things are not only possible, but quite reasonably attainable.</p><p> 我的小型开发分配W64Devkit，是我自己的小路，抵御这一趋势的趋势。以下在手工队长的项目的脚步之下，从头开始制作视频游戏，这是我的导游使用我的开发套件的Tono-Fonsense软件开发。它是工具和开发工作流程的anoverview，而且我试过没有绘制读者的太多了解。作为指导而不是手动，它是不完整的，我链接到大量外部resourcesto填补空白。该指南用一款我用我的开发套件编写的小型游戏封装，用作物品的演示不仅可能，而且相当合理地达到。</p><p>  Of course you cannot use the development kit if you don’t have it yet. Goto the  releases section and download the latest release. It will bea .zip file named  w64devkit-x.y.z.zip where  x.y.z is the version.</p><p>  当然，如果您还没有，则无法使用开发套件。转到版本部分并下载最新版本。它将bec .zip文件名为w64devkit-x.y.z.zip的文件，其中x.y.z是版本。</p><p> You will need to unzip the development kit before using it. Windows hasbuilt-in support for .zip files, so you can either right-click to access“Extract All…” or navigate into it as a folder then drag-and-drop the w64devkit directory somewhere outside the .zip file. It doesn’t carewhere it’s unzipped (aka it’s “portable”), so put it where ever isconvenient: your desktop, user profile directory, a thumb drive, etc. Youcan move it later if you change your mind just so long as you’re notactively running it. If you decide you don’t need it anymore then deleteit.</p><p> 您需要在使用之前解压缩开发套件。 Windows Hasbuilt-in支持.zip文件，因此您可以右键单击以访问“Extract All ...”或作为文件夹导航，然后拖动到.zip文件外部的某处W64Devkit目录。它没有腐蚀它被解压缩（又名是“便携式”），所以把它放在哪里是谁的谁，你的桌面，用户配置文件目录，拇指驱动器等。如果你改变你的思想，你稍后再像你一样改变你的思想重新术外运行它。如果您决定不再需要它，然后删除。</p><p>  There is an  activate.bat in the unzipped  w64devkit directory. This isthe easiest way to enter the development environment, and will not requiresystem configuration changes. This batch file puts the kit’s programs inthe  PATH environment variable then runs a Bourne shell — the standardunix shell. Aside from the text editor, this is the primary interface fordeveloping software. In time you may even extend this environment withyour own tools.</p><p>  在解压缩的W64DEVKIT目录中有一个激活.bat。这是进入开发环境的最简单方法，不会要求要求更改。此批处理文件将套件的程序置于路径环境变量，然后运行Bourne shell  - 标准箱shell。除了文本编辑器之外，这是福利软件的主要接口。及时，您甚至可以使用自己的工具扩展此环境。</p><p> If you want an additional “terminal” window, run  activate.bat again. Ifyou use it a lot, you may want to create a shortcut and even pin it toyour task bar.</p><p> 如果您想要另一个“终端”窗口，请再次运行Activate.bat。如果您使用它很多，您可能想要创建快捷方式甚至PIN IT Toyour Task Bar。</p><p> Whether on Windows or unix-like systems, when you type a command into thesystem shell it uses the  PATH environment variable to locate the actualprogram to run for that command. In practice, the  PATH variable is aconcatenation of multiple directories, and the shell searches thesedirectories in order. On unix-like systems,  PATH elements are separatedby colons. However, Windows uses colons to delimit drive letters, so its PATH elements are separated by semicolons.</p><p> 无论是在Windows还是UNIX的系统上，当您键入命令中的命令时，它将使用Path环境变量来定位实际应用程序以为该命令运行。在实践中，路径变量是多个目录的焦点，并且shell按顺序搜索到的主导。在类似UNIX的系统上，路径元素是分离的不计的。但是，Windows使用冒号来分隔驱动器字母，因此其路径元素由分号分隔。 </p><p>  For more advanced users: Rather than use  activate.bat, you could “Editenvironment variables for your account” and manually add w64devkit’s  bindirectory to your  PATH, making the tools generally available everywhereon your system. If you’ve gone this route, you can start a Bourne shell atany time with  sh -l. (The  -l option requests a login shell.)</p><p>对于更高级用户而不是使用Activate.bat，您可以将“您的帐户编辑环境变量”并手动将W64Devkit的Bindirectorcy添加到您的路径中，使得在系统中通常可用的工具。如果您已经走了这条路，可以使用SH -L开始一个伯恩壳。 （-l选项请求登录shell。）</p><p> Also borrowed from the unix world is the concept of a  home directory,specified by the  HOME environment variable. By default this will be youruser profile directory, typically  C:/Users/$USER. Login shells alwaysstart in the home directory. This directory is often indicated by tilde( ~), and many programs automatically expand a leading tilde to the homedirectory.</p><p> 还从UNIX World借来是由家庭环境变量指定的主目录的概念。默认情况下，这将是您的配置文件目录，通常是C：/用户/ $用户。登录shells alwordstart在主目录中。此目录通常由TILDE（〜）表示，并且许多程序会自动将领先的波浪扩展到主典。</p><p>  The shell is a command interpreter. It’s named such because  it wasoriginally a  shell around the operating system kernel — the userinterface to the kernel. Your system’s graphical interface — WindowsExplorer, or  Explorer.exe — is really just a kind of shell, too. Thatshell is oriented around the mouse and graphics. This is fine for sometasks, but a keyboard-oriented command shell is far better suited fordevelopment tasks. It’s more efficient, but more importantly its featuresare composable: Complex operations and processes can be  constructedfrom simple, easy-to-understand tools. Embrace it!</p><p>  shell是命令解释器。它被命名为这样，因为它围绕操作系统内核周围的shell  - 内核的UsterInterface。您的系统的图形界面 -  WindowSexplorer或Explorer.exe  - 真的只是一种壳牌。那个屏蔽围绕着鼠标和图形。这一切都很好，但是一个键盘导向的命令shell远远更适合开发任务。它更有效率，但更重要的是它的功能可编程：复杂的操作和流程可以构建起来简单，易于理解的工具。接受它！</p><p> In the shell you can navigate between directories with  cd, makedirectories with  mkdir, remove files with  rm, regular expression textsearches with  grep, etc. Run  busybox to see a listing of the availablestandard commands. Unfortunately there are no manual pages, but you canaccess basic usage information for any command with  busybox CMD --help.</p><p> 在shell中，您可以在带CD的目录之间导航Mkdir的Makedir传输，用RM删除文件，与Grep等的RM，正则表达式TextSearches。运行BusyBox，以查看可用性的列表。遗憾的是，没有手动页面，但您可以使用BusyBox CMD  -  Help的任何命令CanAccess基本使用信息。</p><p> Windows’ standard command shell is  cmd.exe. Unfortunately this shell isterrible and exists mostly for legacy compatibility. For users whoregularly need a shell, the intended replacement is PowerShell. It’s asignificant improvement, but 1) it’s still mediocre, 2) sticking to POSIXshell conventions significantly improves build portability, 3) unix toolknowledge is transferable to basically every other operating system.</p><p> Windows'Standard命令shell是cmd.exe。不幸的是，这个shell很不当，主要存在于遗留兼容性。对于用户正常需要壳牌，预期的替代是PowerShell。它的改善和1）它仍然是平庸，2）坚持PosixShell惯例显着提高了构建便携性，3）UNIX Toolknowledge可转移到基本上是每种其他操作系统。</p><p> Unix’s standard shell was the Bourne shell,  sh. The shells in use todayare Bourne shell clones with a superset of its features. The most popularinteractive shells are Bash and Zsh. On Linux, dash (Debian Almquistshell) has become popular for non-interactive use (scripting). The shellincluded with w64devkit is the BusyBox fork of the Almquist shell ( ash),closely related to dash. The Almquist shell has almost no non-interactivefeatures beyond the standard Bourne shell, and so as far as scripts areconcerned can be regarded as a plain Bourne shell clone. That’s why Itypically refer to it by the name  sh.</p><p> Unix的标准壳是Bourne Shell，Sh。使用当今Bourne Shell克隆的壳体具有超级特性。最受欢迎的内容壳是Bash和Zsh。在Linux上，Dash（Debian Almquistshell）已经成为非交互式使用（脚本）的流行。使用W64Devkit的shellIncluded是Almquist Shell（Ash）的BusyBox叉，与DASH密切相关。 Almquist Shell几乎没有超越标准Bourne Shell的非互动性，因此，由于剧本所需的脚本可以被视为普通的Bourne壳克隆。这就是为什么ITYP上由名称SH引用它。</p><p> However, BusyBox’s Almquist shell has interactive features much like Bash,and Bash users should be quite comfortable. It’s not just tab-completionbut a slew of Emacs-like keybindings:</p><p> 但是，BusyBox的Almquist Shell具有与Bash相同的交互功能，而Bash用户应该非常舒适。这不仅仅是标签 - 完成了一系列类似的eMacs键盘： </p><p>  Take special note of Ctrl-r, which is the most important and powerfulshortcut of the bunch. Frequent use is a good habit. Don’t mash the uparrow to search through the command history.</p><p>采用Ctrl-R的特殊记录，这是群体最重要和最强大的挑战。频繁使用是一种很好的习惯。不要捣碎Uprarrow以通过命令历史搜索。</p><p> Special note for Cygwin and MSYS2 users: the shell is aware of Windowspaths and does not present a virtual unix file system scheme. This hasimportant consequences for scripting, both good and bad. The shell evensupports backslash as a directory separator, though you should of courseprefer forward slashes.</p><p> CygWin和MSYS2用户的特殊注释：shell了解WindowsPath，并未呈现虚拟UNIX文件系统方案。这种对脚本的后果，两者都好坏。 shell evensupports反斜杠作为目录分隔符，尽管您应该是prenfer forward slashes。</p><p>  Login shells ( -l) evaluate the contents of  ~/.profile on startup. Thisis your chance to customize the shell configuration, such as settingenvironment variables or defining aliases and functions. For instance, ifyou wanted the prompt to show the working directory in green you’d set PS1 in your  ~/.profile:</p><p>  登录shell（-l）评估启动时〜/ .profile的内容。此目的是自定义shell配置的机会，例如设置环境变量或定义别名和函数。例如，如果您希望提示以绿色显示工作目录，您将在〜/ .profile中设置ps1：</p><p>  If you find yourself using the same command sequences or set of optionsagain and again, you might consider putting those commands into a script,and then installing that script somewhere on your  PATH so that you canrun it as a new command. First make a directory to hold your scripts, sayin  ~/bin:</p><p>  如果您发现自己使用相同的命令序列或一组选项作用，则可能会考虑将这些命令放入脚本，然后将该脚本安装在路径上的某个位置，以便您将其作为新命令。首先制作一个目录来保存您的脚本，Sayin〜/ bin：</p><p>    If you don’t want to start a fresh shell to try it out, then load the newconfiguration in your current shell:</p><p>    如果您不想启动一个新鲜的shell来试用它，请加载当前shell中的新配置：</p><p>  Suppose you keep getting the  tar switches mixed up and you’d like tojust have an  untar command that does the right thing. Create a filenamed  untar or  untar.sh in  ~/bin with these contents:</p><p>  假设您继续将焦油交换机混在一起，您希望您有一个untar命令做正确的事情。使用以下内容创建〜/ bin中的文件名的Untar或Untar.sh：</p><p>   To learn more about Bourne shell scripting, the POSIX  shell commandlanguage specification is a good reference. All of the featureslisted in that document are available to your shell scripts.</p><p>   要了解有关Bourne Shell Scripting的更多信息，POSIX shell commandlanguage规范是一个很好的参考。该文档中的所有功能都可供Shell脚本使用。 </p><p>  The development kit includes the powerful and popular text editor Vim. It takes effort to learn, but is well worth the investment.It’s packed with features, but since you only need a small number of themon a regular basis it’s not as daunting as it might appear. Using Vimeffectively, you will write and edit text so much more quickly thanbefore. That includes not just code, but prose: READMEs, documentation,etc.</p><p>开发套件包括强大而流行的文本编辑器Vim。它需要努力学习，但值得投资。它的功能包装了，但由于您只需要少量的主题定期，它并不像它出现的那样令人生畏。使用VimeFFectively，您将更快地编写和编辑文本。这不仅包括代码，而且包括散文：阅读员，文档等。</p><p> (The catch: Non-modal editing will forever feel frustratingly inefficient.That’s not because you will become unpracticed at it, or even have troublecode switching between input styles, but because you’ll now be aware howbad it is. Ignorance is bliss.)</p><p> （Catch：非模态编辑将永远感到沮丧地效率低下。这不是因为您将在IT中毫不卑鄙，甚至在输入风格之间有疑难码码，但由于您现在要意识到它是哈巴德。）</p><p> Vim includes its own tutorial for absolute beginners which you can accesswith the  vimtutor command. It will run in the console window and guideyou through the basics in about half an hour. Do not be afraid to returnto the tutorial at any time since this is the stuff you need to know byheart.</p><p> Vim包含您自己的Tutorial，您可以访问vimtutor命令的绝对初学者。它将在控制台窗口中运行，并通过大约半小时的基础通过基础运行。不要害怕在任何时候返回教程，因为这是你需要知道的东西。</p><p> When it comes time to actually use Vim to write code, you can continuewriting code via the terminal interface ( vim), or you can run thegraphical interface ( gvim). The latter is recommended since it has somenice quality-of-life features, but it’s not strictly necessary. Whenstarting the GUI, put an ampersand ( &amp;) on the command so that it runs inthe background. For instance this brings up the editor with two files openbut leaves the shell running in the foreground so you can continue usingit while you edit:</p><p> 当实际使用Vim来编写代码时，您可以通过终端接口（Vim）继续码，或者您可以运行Thraphical接口（GVIM）。后者被推荐，因为它有精美的生活质量特征，但它并不严格必要。当启动GUI时，将AMPERSAND（＆amp;）放在命令上，以便它运行背景。例如，这会带上两个文件OpenBut的编辑器离开前台运行的shell，以便在编辑时继续使用：</p><p>  Vim’s defaults are good but imperfect. Before getting started withactually editing code you should establish at least the following minimalconfiguration in  ~/_vimrc. (To understand these better, use  :help tojump the built-in documentation.)</p><p>  Vim的默认值很好但不完善。在入门之前，在开始致法的代码之前，您应该至少在〜/ _vimrc中建立以下最少的配置。 （要更好地理解这些，请使用：帮助Tojump内置文档。）</p><p>  The graphical interface defaults to a white background. Many people(including me) prefer “dark mode” when editing code, so inverting this issimply a matter of choosing a dark color scheme. Vim comes with a handfulof color schemes, around half of which have dark backgrounds. Use :colorscheme to change it, and put it in your  ~/_vimrc to persist it.</p><p>  图形界面默认为白色背景。在编辑代码时，许多人（包括ME）更喜欢“暗模式”，因此反转这一时尚选择了选择深色方案的问题。 Vim配有令人毛的颜色方案，其中大约有一半有黑色背景。使用：ColorScheme更改它，并将其放入〜/ _vimrc以保持它。</p><p>  The default graphical interface includes a menu bar and tool bar. Thereare better ways to accomplish all these operations, none of which requiretouching the mouse, so consider removing all that junk:</p><p>  默认的图形界面包括菜单栏和工具栏。这是更好的方法来完成所有这些操作，其中没有任何要求鼠标，因此请考虑删除所有垃圾： </p><p>  Finally, since the development kit is oriented around C and C++, here’s myown entire Vim configuration for C which makes it obey my own style:</p><p>最后，由于开发套件围绕C和C ++导向，这里是C的Myown整个Vim配置，这使得它遵守自己的风格：</p><p>  Once you’re comfortable with the basics, the best next step is to read  Practical Vim: Edit Text at the Speed of Thought by Drew Neil.It’s an opinionated guide to Vim that instills good habits. If you wantsomething cost-free to whet your appetite, check out   Seven habits ofeffective text editing.</p><p>  一旦你对基础知识感到满意，下一步就是阅读实用Vim：以德鲁尼尔的思考的速度编辑文本。它是一个纯粹的vim的一种自由习惯的指南。如果您持续无需享受您的胃口，请查看七种习惯的文本编辑。</p><p>  We’ve established a shell and text editor. Next is the developmentworkflow for writing an actual application. Ultimately you will invoke acompiler from within Vim, which will parse compiler messages and take youdirectly to the parts of your source code that need attention. Before weget that far, let’s start with the basics.</p><p>  我们建立了shell和文本编辑器。接下来是用于编写实际应用程序的开发工作。最终，您将在Vim内调用Acompiler，这将解析编译器消息并对需要注意的源代码的部分来解析。在WEGET之前，让我们从基础开始。</p><p> The classic example is the “hello world” program, which we’ll suppose isin a file called  hello.c:</p><p> 经典榜样是“Hello World”程序，我们假设ISIN一个名为Hello.c的文件：</p><p>  While this development kit provides a version of the GNU compiler,  gcc,this guide mostly speaks of it in terms of the generic unix C compilername,  cc. Unix-like systems install  cc as an alias for the system’sdefault C compiler, and w64devkit is no exception.</p><p>  虽然此开发套件提供了GNU编译器，GCC的版本，但本指南主要通过通用UNIX C Compilername，CC来讲述它。 UNIX的系统将CC安装为System'Sdefault C编译器的别名，并且W64Devkit也不例外。</p><p>  This command creates  hello.exe from  hello.c. Since this is not (yet?)on your  PATH, you must invoke it via a path name (i.e. the command mustinclude a slash), since otherwise the shell will search for it via the PATH variable. Typically this means putting  ./ in front of the programname, meaning “run the program in the current directory”. As a convenienceyou do not need to include the  .exe extension:</p><p>  此命令从hello.c中创建Hello.exe。由于这不是（尚未？）在路径上，必须通过路径名（即命令必须必须斜杠）调用它，因为否则shell将通过路径变量搜索它。通常这意味着在ProgramName前面放置./表示“在当前目录中运行程序”。作为一个方便，您不需要包含.exe扩展名：</p><p>  Unlike the  untar shell script from before, this  hello.exe is entirelyindependent of w64devkit. You can share it with anyone running Windows andthey’ll be able to execute it. There’s a little bit of runtime embedded inthe executable, but the bulk of the runtime is in the operating systemitself. I want to highlight this point because  most programming languagesdon’t work like this, or at least doing so is unnatural with lots ofcompromises. The users of your software do not need to install a runtimeor other supporting software. They just run the executable you give them!</p><p>  与从以前的Untar shell脚本不同，这个hello.exe是w64devkit的完全独立。您可以与运行Windows的人分享它，并且能够执行它。可执行文件有一点点运行时嵌入的嵌入式，但大部分运行时都在操作系统中。我想突出这一点，因为大多数编程语言没有这样的编程，或者至少这样做是不自然的，很多人都是不自然的。您的软件用户无需安装运行频率其他支持软件。他们只是运行你给他们的可执行文件！ </p><p> That executable is probably pretty small, less than 50kB — basically amiracle by today’s standards. Sure, it’s hardly doing anything right now,but you can add a whole lot more functionality without that executablegetting much bigger. In fact, it’s entirely unoptimized right now andcould be even smaller. Passing the  -Os flag tells the compiler tooptimize for size and  -s flag tells the linker to strip out unneededinformation.</p><p>可执行文件可能很小，小于50kb  - 基本上是当今标准的amiracle。当然，现在几乎没有做任何事情，但是你可以在没有该执行的情况下添加更多功能的功能。事实上，它现在完全没有优化，并且可以更小。传递--OS标志告诉编译器以优化大小和-s标志告诉链接器删除不必要的信息。</p><p>  That cuts the program down to around a third of its previous size. Ifnecessary you can still do even better than this, but that’s outside thescope of this guide.</p><p>  将程序减少到其前一大小的三分之一。如果你仍然可以做得好，但这在本指南的外面。</p><p> So far the program could still be valid enough to compile but containobvious mistakes. The compiler can warn about many of these mistakes, andso it’s always worth enabling these warnings. This requires two flags: -Wall (“all” warnings) and  -Wextra (extra warnings).</p><p> 到目前为止，该计划仍然足以编制但却是占有的错误。编译器可以警告许多这些错误，而且它总是值得支持这些警告。这需要两个标志：-WALL（“所有”警告）和 - 乌克拉（额外的警告）。</p><p>  When you’re working on a program, you often don’t want optimizationenabled since it makes it more difficult to debug. However, some warningsaren’t fired unless optimization is enabled. Fortunately there’s anoptimization level to resolve this,  -Og (optimize for debugging).Combine this with  -g to embed debug information in the program. Thiswill be handy later.</p><p>  当您在程序上工作时，您往往不希望优化，因为它使得调试更加困难。但是，除非启用优化，否则未解雇一些警告。幸运的是，有一个optimization级别来解决这个问题，-og（优化调试）.combine与-g嵌入程序中的调试信息。稍后，这会很方便。</p><p>  These are the compiler flags you typically want to enable while developingyour software. When you distribute it, you’d use either  -Os -s (optimizefor size) or  -O3 -s (optimize for speed).</p><p>  这些是您通常想要在发展中型日志性软件时启用的编译器标志。分发时，您可以使用-os -s（优化尺寸）或-o3 -s（优化速度）。</p><p>  I mentioned running the compiler from Vim. This isn’t done directly butvia special build script called a Makefile. You invoke the  make programfrom Vim, which invokes the compiler as above. The simplest Makefile wouldlook like this, in a file literally named  Makefile:</p><p>  我提到从Vim运行编译器。这不是直接完成的，但是叫做makefile的特殊构建脚本。您可以调用vim的make程序，该程序调用上面的编译器。像这样的最简单的makefile wapslook，在字面上命名的makefile中：</p><p>  This tells  make that the file named  hello.exe is derived from anotherfile called  hello.c, and the tab-indented line is the recipe for doingso. Running the  make command will run the compiler command if and onlyif  hello.c is newer than  hello.exe.</p><p>  这告诉这让名为Hello.exe的文件来自另一个名为hello.c的文件，而选项卡缩进线是Toingso的配方。运行Make命令将运行Compiler命令（仅if hello.c）才会比hello.exe更新。 </p><p> To run  make from Vim, use the  :make command inside Vim. It will notonly run  make but also capture its output in an internal buffer calledthe  quickfix list. If there is any warning or error, Vim will jump toit. Use  :cn (next) and  :cp (prev) to move between issues and correctthem, or  :cc to re-display the current issue. When you’re done fixingthe issues, run  :make again to start the cycle over.</p><p>要从Vim运行make，请使用：make命令在Vim内。它会不会运行，但也会在称为QuickFix列表的内部缓冲区中捕获其输出。如果有任何警告或错误，Vim将跳转。使用：CN（下一个）和：CP（上一页）在问题和更正的问题之间移动，或：CC重新显示当前问题。当您完成修复问题时，运行：再次达到循环。</p><p> Try that now by changing the printed message and recompiling from withinVim. Intentionally create an error (bad syntax, too many arguments, etc.)and see what happens.</p><p> 现在尝试通过更改打印的消息并从Inhevim重新编译来尝试。故意创建一个错误（不良语法，太多的参数等）并查看会发生什么。</p><p> Makefiles are a powerful and conventional way to build C and C++ software.Since the development kit includes the standard set of unix utilities,it’s very easy to write portable Makefiles that work across a variety aoperating systems and environments. Your software isn’t necessarily tiedto Windows just because you’re using a Windows-based developmentenvironment. If you want to learn how Makefiles work and how to use themeffectively, read   A Tutorial on Portable Makefiles. From here onI’ll assume you’ve read that tutorial.</p><p> Makefiles是构建C和C ++软件的功能强大且传统的方法.SINCE开发套件包括标准的UNIX实用程序，非常容易编写跨越Aoperating系统和环境的便携式Makefiles。您的软件不一定是以Windows连接的，因为您正在使用基于Windows的开发环境。如果您想了解Makefiles如何工作以及如何使用无效，请阅读Portable Makefiles上的教程。从这里开始，我会假设你已经阅读了这一教程。</p><p>  .POSIX : CC  = cc CFLAGS  =  -Wall  -Wextra  -Og  -g LDFLAGS  = LDLIBS  = EXE  = .exe hello$(EXE) :  hello.c  $(CC)  $(CFLAGS)  $(LDFLAGS)  -o  $@  hello.c  $(LDLIBS)</p><p>  .posix：cc = cc cflags = -wall -wextra -og -g ldflags = ldlibs = exe = .exe hello $（exe）：hello.c $（cc）$（cflags）$（ldflags）-o $ @ hello .c $（ldlibs）</p><p>   This is very much a Windows-first style of Makefile, but still allows itto be comfortably used on other systems. On Linux this  make invocationstrips away the  .exe extension:</p><p>   这是一个非常多的Windows第一风格Makefile，但仍然允许它舒适地使用其他系统。在Linux上，这使得invocationstrips远离.exe扩展名：</p><p>  For a Windows-second Makefile, remove the line with  EXE = .exe. Thisallows  EXE to come from the environment. So, for instance, I alreadydefine the  EXE environment variable in my w64devkit  ~/.profile:</p><p>  对于Windows-second makefile，用EXE = .exe删除该行。这一切都来自环境。因此，例如，我已经在我的w64devkit〜/ .profile中删除了exe环境变量：</p><p>  On Linux running  make does the right thing, as does running  make onWindows. No special configuration required.</p><p>  在Linux上运行make做正确的事情，正如运行make onwindows一样。无需特殊配置。 </p><p> If my software is truly limited to Windows, I’m likely still interested insupporting cross-compilation. A common convention for GNU toolchains is a CROSS Makefile macro. For example:</p><p>如果我的软件真正限于Windows，我仍然很感兴趣地掩盖交叉编译。 GNU Toolchains的一个常见公约是一个横跨makefile宏。例如：</p><p> .POSIX : CROSS  = CC  =  $(CROSS)gcc CFLAGS  =  -Wall  -Wextra  -Og  -g LDFLAGS  = LDLIBS  = hello.exe :  hello.c  $(CC)  $(CFLAGS)  $(LDFLAGS)  -o  $@  hello.c  $(LDLIBS)</p><p> .posix：cross = cc = $（cross）gcc cflags = -wall -wextra -og -g ldflags = ldlibs = hello.exe：hello.c $（cc）$（cflags）$（ldflags）-o $ @ hello .c $（ldlibs）</p><p> On Windows I just run  make, but on Linux I’d set  CROSS appropriately.</p><p> 在Windows上，我刚刚运行make，但在Linux上，我会恰当地设置交叉。</p><p>   What happens if you’re working on a larger program and you need to jump tothe definition of a function, macro, or variable? It would be tedious touse  grep all the time to find definitions. The development kit includesa solid implementation of  ctags for building a  tags database lists thelocations for various kinds of definitions, and Vim knows how to read thisdatabase. Most often you’ll want to run it recursively like so:</p><p>   如果您正在进行更大的程序，并且需要跳过函数，宏或变量的定义，则会发生什么？一直在寻找定义，这将是繁琐的淘汰。开发套件包括用于构建标签数据库的CTAG的实体实现，列出各种定义的Thelocations，Vim知道如何读取该模式。最常常你想要递归地运行它：</p><p>   With the cursor over an identifier, press  CTRL-] to jump to a definitionfor that name. Use  :tn and  :tp to move between different definitions(e.g. when the name is overloaded). Or if you have a tag in mind ratherthan a name listed in the buffer, use the  :tag command to jump by name.Vim maintains a tag stack and jump list for going back and forth, like thebackward and forward buttons in a browser.</p><p>   使用标识符上的光标，按Ctrl-]跳转到该名称的定义。使用：tn和：tp在不同的定义之间移动（例如，当名称过载时）。或者如果您在缓冲区中列出的名称，则使用标记，使用：tag命令用name跳转.vim维护标签堆栈和跳转列表以便以浏览器中的Hadbackward和转发按钮保持标记堆栈和跳转列表。</p><p>  I had mentioned that the  -g option embeds extra information in theexecutable. This is for debuggers, and the development kit includes theGNU Debugger,  gdb, to help you debug your programs. The most common wayto use the debugger is to invoke your program directly from it:</p><p>  我已经提到-g选项在另外的情况下嵌入额外信息。这是为调试器，开发套件包括GDB，GDB，帮助您调试程序。最常用的方法使用调试器是直接从中调用您的程序：</p><p>  From here you can set breakpoints and such, then run the program with start or  run, then  step through it line by line. See   Beej’s QuickGuide to GDB for a guide.</p><p>  从这里您可以设置断点，然后使用“开始”或“运行”程序，然后按行顺列步骤。将Beej的QuickGuide咨询到GDB的指南。 </p><p>  So far this guide hasn’t actually assumed any C knowledge. One of the bestways to learn C is by reading the highly-regarded   The C ProgrammingLanguage and doing the exercises. Alternatively, cost-free optionsare   Beej’s Guide to C Programming and   Modern C (moreadvanced). You can use the development kit to go through any of these.</p><p>到目前为止，本指南实际上并没有承担任何C知识。学习C的一个人之一是通过阅读高度考虑的C编程语程并进行练习。或者，无成本的选择是BEEJ的C编程和现代C（MoreadVanced）指南。您可以使用开发套件来完成其中任何一个。</p><p> I’ve focused on C, but everything above also applies to C++. To learn C++  A Tour of C++ is a safe bet.</p><p> 我专注于C，但上面的一切也适用于C ++。为了学习C ++，C ++之旅是一个安全的赌注。</p><p>  To illustrate how much you can do with nothing beyond than this 76MBdevelopment kit, here’s a taste in the form of a weekend project: an Asteroids Clone for Windows.</p><p>  为了说明你可以做多少，而不是这个76mbdevelopment套件，这是一个周末项目形式的品味：窗户的小行星克隆。</p><p>  The development kit doesn’t include Git so you’d need to install itseparately in order to clone the repository, but you could at least skipthat and download a .zip snapshot of the source. It has no third-partydependencies yet it includes hardware-accelerated graphics, real-timesound mixing, and gamepad input. Building a larger and more complex gameis much less about tooling and more about time and skill. That’s what Imean about w64devkit being  (almost) everything you need.</p><p>  开发套件不包括Git，因此您需要何时安装才能克隆存储库，但您至少可以跳过并下载源的.zip快照。它没有第三方竞争，但它包括硬件加速的图形，实时混音和游戏表输入。建立一个更大，更复杂的游戏，更少关于工具，更多关于时间和技巧。这就是关于w64devkit的内容（几乎）你需要的一切。</p><p>      Have a comment on this article? Start a discussion in my  public inbox by sending an email to   ~skeeto/public-inbox@lists.sr.ht    [ mailing list etiquette] , or see  existing discussions.</p><p>      对这篇文章有评论吗？通过向~skeeto/public-inbox@lists.sr.ht [邮件列表礼仪]发送电子邮件，或查看现有讨论，在我的公共收件箱中开始讨论。 </p></div><div id="story_share_this"><div class="sharethis-inline-share-buttons"></div></div><div class="text-break sotry_link page_narrow"><a target="_blank" href="https://nullprogram.com/blog/2021/03/11/">https://nullprogram.com/blog/2021/03/11/</a></div><div class="story_tags page_narrow"><button type="button" class="btn btn-light my_tag"><a href="/tag/程序/">#程序</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/开发/">#开发</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/windows/">#windows</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/w64devkit/">#w64devkit</a></button></div></div><div class="my_movie_list_item shadow p-3 mb-5 bg-white rounded"><button type="button" class="btn btn-link my_tag"><a href="/tag/web2.0/">#web2.0</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/google/">#google</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/设计/">#设计</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/创意/">#创意</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/摄影/">#摄影</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/图片/">#图片</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/游戏/">#游戏</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/软件/">#软件</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/手机/">#手机</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/视频/">#视频</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/广告/">#广告</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/iphone/">#iphone</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/网站/">#网站</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/免费/">#免费</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/下载/">#下载</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/windows/">#windows</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/微软/">#微软</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/apple/">#apple</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/firefox/">#firefox</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/blog/">#blog</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/苹果/">#苹果</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/音乐/">#音乐</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/博客/">#博客</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/wordpress/">#wordpress</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/恶搞/">#恶搞</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/qq/">#qq</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/艺术/">#艺术</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/web/">#web</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/谷歌/">#谷歌</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/工具/">#工具</a></button></div></div></div><div id="my_footer"><div class=""><a href="/tags/">tags</a> <a href="/users/">users</a></div>&copy; 2020 diglog.com </div></div></body></html>