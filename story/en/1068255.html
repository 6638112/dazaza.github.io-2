<!doctype html><html lang="zh-hans"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>分布式Web的名称解析器 A Name Resolver for the Distributed Web</title><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"><link rel="stylesheet" href="/img/css.css?random="><link data-rh="true" rel="icon" href="/img/favicon.ico"/><script data-ad-client="ca-pub-6067137220025946" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script type="text/javascript" src="https://platform-api.sharethis.com/js/sharethis.js#property=5effb96910009800120b8d4d&product=inline-share-buttons" async="async"></script>
<script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?03c1a0f31299b4a2fbb83c34d6beaac9";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script></head><body><div id="my_header"><div class="container"><nav class="navbar navbar-expand-lg"><a class="navbar-brand" href="/"><img alt="diglog" src="/img/logo.v1.gif" class="rounded-sm"></a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarNavAltMarkup"><div class="navbar-nav"></div></div></nav></div></div><div class="container"><div id="my_content"><h1 class="page_narrow">A Name Resolver for the Distributed Web<br/>分布式Web的名称解析器 </h1><div class="row"><div class="col-lg-12 col-12"><div class="my_story_list_item shadow p-3 mb-5 bg-white rounded"><div class="story_page_pub_time page_narrow">2021-06-25 23:41:38</div><div class="story_img_container"><a href="http://img2.diglog.com/img/2021/6/46a936441eae0e5d70839bcff09effb2.png"><img src="http://img2.diglog.com/img/2021/6/46a936441eae0e5d70839bcff09effb2.png" class="img-fluid my_story_img" onerror="this.style.display='none'"></a></div><div class="page_narrow text-break page_content"><p>The Domain Name System (DNS) matches names to resources. Instead of typing 104.18.26.46 to access the Cloudflare Blog, you type blog.cloudflare.com and, using DNS, the domain name resolves to 104.18.26.46, the Cloudflare Blog IP address.</p><p>域名系统（DNS）将名称与资源匹配。而不是键入104.18.26.46访问CloudFlare博客，键入Blog.CloudFlare.com，并使用DNS，域名解析为104.18.26.46，CloudFlare博客IP地址。</p><p> Similarly, distributed systems such as Ethereum and IPFS rely on a naming system to be usable. DNS could be used, but its resolvers’ attributes run contrary to properties valued in distributed Web (dWeb) systems. Namely, dWeb resolvers ideally provide (i) locally verifiable data, (ii) built-in history, and (iii) have no single trust anchor.</p><p> 类似地，分布式系统，例如以外um和IPFS依赖于可用的命名系统。可以使用DNS，但其解析器的属性运行与分布式Web（DWeb）系统中的属性相反。即，DWEB Resolvers理想地提供（i）本地可验证的数据，（ii）内置历史，（iii）没有单个信任锚。</p><p> At Cloudflare Research, we have been exploring alternative ways to resolve queries to responses that align with these attributes. We are proud to announce a new resolver for the Distributed Web, where IPFS content indexed by the  Ethereum Name Service (ENS) can be accessed.</p><p> 在CloudFlare Research，我们一直探索替代方法来解决与这些属性对齐的响应的查询。我们很自豪地宣布分布式Web的新型解析器，其中可以访问以Ethereum名称服务（ENS）索引的IPFS内容。</p><p> To discover how it has been built, and how you can use it today, read on.</p><p> 要了解它是如何构建的，以及如何使用它，请阅读。</p><p>   The InterPlanetary FileSystem (IPFS) is a peer-to-peer network for storing content on a distributed file system. It is composed of a set of computers called nodes that store and relay content using a common addressing system.</p><p>   行星际文件系统（IPF）是一个对等网络，用于在分布式文件系统上存储内容。它由一组名为节点的一组计算机组成，使用公共寻址系统存储和中继内容。</p><p> This addressing system relies on the use of  Content IDentifiers (CID). CIDs are self-describing identifiers, because the identifier is derived from the content itself. For example, QmXoypizjW3WknFiJnKLwHCnL72vedxjQkDDP1mXWo6uco is the CID version 0 (CIDv0) of the  wikipedia-on ipfs homepage.</p><p> 该寻址系统依赖于使用内容标识符（CID）。 CID是自描述的标识符，因为标识符源自内容本身。例如，qmxoypizjw3wknfijnklwhcnl72vedxjqkddp1mxwo6uco是wikipedia-on IPFS主页的CID版本0（CIDV0）。</p><p> To understand why a CID is defined as self-describing, we can look at its binary representation. For QmXoypizjW3WknFiJnKLwHCnL72vedxjQkDDP1mXWo6uco, the CID looks like the following:</p><p> 要理解为什么CID被定义为自我描述，我们可以查看其二进制表示。对于qmxoypizjw3wknfijnklwhcnl72vedxjqkddp1mxwo6uco，cid看起来如下： </p><p>  The first is the algorithm used to generate the CID (sha2-256 in this case); then comes the length of the encoded content (32 for a sha2-256 hash), and finally the content itself. When referring to the  multicodec table, it is possible to understand how the content is encoded.</p><p>第一个是用于生成CID的算法（在这种情况下SHA2-256）;然后是编码内容的长度（32为SHA2-256哈希），最后是内容本身。当参考Multicodec表时，可以了解如何编码内容。</p><p>  This encoding mechanism is useful, because it creates a unique and upgradable content-addressing system across multiple protocols.</p><p>  这种编码机制很有用，因为它跨多个协议创建了唯一和可升级的内容寻址系统。</p><p>   Ethereum is an account-based blockchain with smart contract capabilities. Being account-based, each account is associated with addresses and these can be modified by operations grouped in blocks and sealed by Ethereum’s consensus algorithm, Proof-of-Work.</p><p>   Ethereum是一个基于帐户区块链，具有智能合同能力。基于帐户，每个帐户都与地址相关联，可以通过在块中分组的操作来修改这些帐户，并通过Ethereum共识算法密封，操作验证。</p><p> There are two categories of accounts: user accounts and contract accounts. User accounts are controlled by a private key, which is used to sign transactions from the account. Contract accounts hold bytecode, which is executed by the network when a transaction is sent to their account. A transaction can include both funds and data, allowing for rich interaction between accounts.</p><p> 有两类帐户：用户帐户和合同帐户。用户帐户由私钥控制，用于从帐户中签署事务。合同账户持有字节码，当事务发送到帐户时由网络执行。交易可以包括资金和数据，允许在账户之间丰富的交互。</p><p> When a transaction is created, it gets verified by each node on the network. For a transaction between two user accounts, the verification consists of checking the origin account signature. When the transaction is between a user and a smart contract, every node runs the smart contract bytecode on the Ethereum Virtual Machine (EVM). Therefore, all nodes perform the same suite of operations and end up in the same state. If one actor is malicious, nodes will not add its contribution. Since nodes have diverse ownership, they have an incentive to not cheat.</p><p> 创建事务时，网络上的每个节点会验证。对于两个用户帐户之间的事务，验证包括检查原始帐户签名。当交易在用户和智能合同之间时，每个节点都在Ethereum虚拟机（EVM）上运行智能合同字节码。因此，所有节点都执行相同的操作套件并以相同的状态结束。如果一个演员是恶意的，则节点不会增加其贡献。由于节点拥有不同的所有权，因此他们有一个动力不作弊。</p><p>  As you may have noticed, while a CID describes a piece of content, it doesn&#39;t describe where to find it. In fact, the CID describes the content, but not its location on the network. The location of the file would be retrieved by a query made to an IPFS node.</p><p>  正如您可能已经注意到的那样，当CID描述一段内容时，它就在＆＃39; t描述了在哪里找到它。实际上，CID描述了内容，而不是其在网络上的位置。将通过对IPFS节点所做的查询检索文件的位置。</p><p> An IPFS URL (Unified Resource Locator) looks like this:  ipfs://QmXoypizjW3WknFiJnKLwHCnL72vedxjQkDDP1mXWo6uco. Accessing this URL means retrieving  QmXoypizjW3WknFiJnKLwHCnL72vedxjQkDDP1mXWo6uco using the IPFS protocol, denoted by ipfs://. However, typing such a URL is quite error-prone. Also, these URLs are not very human-friendly, because there is no good way to remember such long strings. To get around this issue, you can use DNSLink. DNSLink is a way of specifying IPFS CIDs within a DNS TXT record. For instance,  wikipedia on ipfs has the following TXT record</p><p> IPFS URL（Unified Resource Locator）如下所示：IPFS：// qmxoypizjw3wknfijnklwhcnl72vedxjqkddp1mxwo6uco。访问此URL意味着使用IPFS协议检索qmxoypizjw3wksfijnklwhcnl72vedxjqkddp1mxwo6uco，由IPFS协议表示：//。但是，键入此类URL非常出错。此外，这些URL不是非常人性化的，因为没有好方法来记住这么长的弦。要解决此问题，您可以使用DNSLink。 DNSLink是一种在DNS TXT记录中指定IPFS CID的方式。例如，IPF上的维基百科有以下TXT记录 </p><p>   In addition, its A record points to an IPFS gateway. This means that, when you access en.wikipedia-on-ipfs.org, your request is directed to an IPFS HTTP Gateway, which then looks out for the CID using your domain TXT record, and returns the content associated to this CID using the IPFS network.</p><p>此外，它是IPFS网关的记录点。这意味着，当您访问en.wikipedia-on-ipfs.org时，您的请求将被引导到IPFS HTTP网关，然后使用域TXT记录查找CID，并返回与此CID关联的内容使用IPFS网络。</p><p> This is trading ease-of-access against security. The web browser of the user doesn&#39;t verify the integrity of the content served. This could be because the browser does not implement IPFS or because it has no way of validating domain signature —  DNSSEC. We wrote about this issue in our previous blog post on  End-to-End Integrity.</p><p> 这是对安全性的交易易用性。用户的Web浏览器并不验证所服务的内容的完整性。这可能是因为浏览器没有实现IPF，或者因为它没有验证域名签名 -  DNSSEC。我们在我们之前的博客文章中写了关于此问题的关于端到端完整性。</p><p>  DNS simplifies referring to IP addresses, in the same way that postal addresses are a way of referring to geolocation data, and contacts in your mobile phone abstract phone numbers. All these systems provide a human-readable format and reduce the error rate of an operation.</p><p>  DNS简化了IP地址，以与邮政地址相同的方式是指地理位置数据的方式，以及手机抽象电话号码中的联系人。所有这些系统都提供人类可读格式并降低操作的错误率。</p><p> To verify these data, the trusted anchors, or “sources of truth”, are:</p><p> 要验证这些数据，可信锚或“真相源”是：</p><p> The government registry for postal addresses. In the UK, addresses  are handled by cities, boroughs and local councils.</p><p> 政府注册处邮寄地址。在英国，地址由城市，自治市镇和地方议会处理。</p><p>  An account is identified by its address. An address starts with &#34;0x&#34; and is followed by 20 bytes ( ref 4.1 Ethereum yellow paper), for example: 0xf10326c1c6884b094e03d616cc8c7b920e3f73e0. This is not very readable, and can be pretty scary when transactions are not reversible and one can easily mistype a single  character.</p><p>  帐户由其地址标识。地址始于＆＃34; 0x＆＃34;然后是20个字节（Ref 4.1 Ethereum黄色纸），例如：0xF10326C1C6884B094E03D616CC8C7B920E3F73E0。这不是很可读，当事务不可逆转时，可以很可怕，并且可以轻松地屏蔽单个字符。</p><p> A first mitigation strategy was to introduce a new notation to capitalise some letters based on the hash of the address 0xF10326C1c6884b094E03d616Cc8c7b920E3F73E0. This can help detect mistype, but it is still not readable. If I have to send a transaction to a friend, I have no way of confirming she hasn&#39;t mistyped the address.</p><p> 第一缓解策略是引入一个新的符号，以基于地址0xF10326C1C684B094003D616CC8C7B920E3F73E0的散列来利用一些字母。这有助于检测错误，但仍然无法读取。如果我必须向朋友发送交易，我无法确认她没有错过地址。 </p><p> The  Ethereum Name Service (ENS) was created to tackle this issue. It is a system capable of turning human-readable names, referred to as domains, to blockchain addresses. For instance, the domain  privacy-pass.eth points to the Ethereum address 0xF10326C1c6884b094E03d616Cc8c7b920E3F73E0.</p><p>Etereum名称服务（ex）是创建的，以解决此问题。它是一种能够将人类可读名称转换为域的系统，以阻止地址。例如，域隐私 -  PASS.eth指向Ethereum地址0xF10326C1C6884B094E03D616CC8C7B920E3F73E0。</p><p>  A registry is a smart contract that maintains a list of domains and some information about each domain: the domain owner and the domain resolver. The owner is the account allowed to manage the domain. They can create subdomains and change ownership of their domain, as well as modify the resolver associated with their domain.</p><p>  注册表是一个智能合同，维护一个域列表以及有关每个域的一些信息：域所有者和域解析器。所有者是允许管理域的帐户。它们可以创建子域和更改其域的所有权，以及修改与其域关联的解析器。</p><p> Resolvers are responsible for keeping records. For instance, Public Resolver is a smart contract capable of associating not only a name to blockchain addresses, but also a name to an IPFS content identifier. The resolver address is stored in a registry. Users then contact the registry to retrieve the resolver associated with the name.</p><p> Resolvers负责保存记录。例如，公共解析器是一个智能合同，其不仅可以将名称与区块链接相关联，还可以将名称与IPFS内容标识符相关联。解析器地址存储在注册表中。用户然后联系注册表以检索与名称关联的解析器。</p><p> Consider a user, Alice, who has direct access to the Ethereum state. The flow goes as follows: Alice would like to get Privacy Pass’s Ethereum address, for which the domain is privacy-pass.eth. She looks for privacy-pass.eth in the ENS Registry and figures out the resolver for privacy-pass.eth is at 0x1234... . She now looks for the address of privacy-pass.eth at the resolver address, which turns out to be 0xf10326c....</p><p> 考虑一位用户，Alice，他可以直接进入以外态。流程如下：爱丽丝想要获取隐私通行证的Etereum地址，域名是隐私通行证。她在ENS注册表中寻找隐私通行证，并找出了隐私 -  Pass.eth的解析程序.eth是0x1234 ......她现在在解析器地址寻找隐私范围的地址，结果是0xF10326C ....</p><p>  Accessing the IPFS content identifier for privacy-pass.eth works in a similar way. The resolver is the same, only the accessed data is different — Alice calls a different method from the smart contract.</p><p>  访问IPFS内容标识符以以类似的方式获得隐私PASS.ETH的工作。解析器是相同的，只有访问的数据是不同的 -  Alice调用来自智能合同的不同方法。</p><p>   The goal was to be able to use this new way of indexing IPFS content directly from your web browser. However, accessing the ENS registry requires access to the Ethereum state. To get access to IPFS, you would also need to access the IPFS network.</p><p>   目标是能够直接从Web浏览器使用这种新的索引IPFS内容的方式。但是，访问ENS注册表需要访问Etereum状态。要访问IPFS，您还需要访问IPFS网络。</p><p> To tackle this, we are going to use Cloudflare’s Distributed Web Gateway. Cloudflare operates both an Ethereum Gateway and an IPFS Gateway, respectively available at cloudflare-eth.com and cloudflare-ipfs.com.</p><p> 为了解决这个问题，我们将使用CloudFlare的分布式Web网关。 CloudFlare在CloudFlare-eth.com和CloudFlare-IPFS.com上运行了Etereum Gateway和IPFS网关。 </p><p>  The  first version of EthLink was built by Jim McDonald and is operated by True Name LTD at eth.link. Starting from next week, eth.link will transition to use the Cloudflare Distributed Web Resolver. To that end, we have built EthLink on top of Cloudflare Workers. This is a proxy to IPFS. It proxies all ENS registered domains when .link is appended. For instance, privacy-pass.eth should render the Privacy Pass homepage. From your web browser,  https://privacy-pass.eth.link does it.</p><p>Ethlink的第一个版本是由Jim McDonald建造的，由Eth.Link的True Name Ltd运营。从下周开始，eth.link将转换为使用CloudFlare分布式Web Resormer。为此，我们在CloudFlare工人之上建立了ethlink。这是IPF的代理。它在附加时代理所有ENS注册域。例如，Privacy-Pass.eth应该呈现隐私传递主页。从您的Web浏览器，https://privacy-pass.eth.link做到了。</p><p> The resolution is done at the Cloudflare edge using a Cloudflare Worker. Cloudflare Workers allows JavaScript code to be run on Cloudflare infrastructure, eliminating the need to maintain a server and increasing the reliability of the service. In addition, it follows Service Workers API, so results returned from the resolver can be checked by end users if needed.</p><p> 分辨率在Cloudflare边缘使用CloudFlare工人完成。 CloudFlare Worker允许在CloudFlare基础架构上运行JavaScript代码，从而消除了维护服务器并提高服务的可靠性。此外，它跟随服务工作者API，因此如果需要，可以通过最终用户检查从解析器返回的结果。</p><p> To do this, we setup a wildcard DNS record for *.eth.link to be proxied through Cloudflare and handled by a Cloudflare Worker.  When a user Alice accesses  privacy-pass.eth.link, the worker first gets the CID of the CID to be retrieved from Ethereum. Then, it requests the content matching this CID to IPFS, and returns it to Alice.</p><p> 为此，我们为* ..eth.link设置了通配符DNS记录，以通过CloudFlare代理并由CloudFlare工人处理。当用户Alice访问Privacy-paria.eth.Link时，工作人员首先获取要从Ethereum检索的CID的CID。然后，它请求将此CID与IPF匹配的内容，并将其返回给Alice。</p><p>  All parts can be run locally. The worker can be run in a service Worker, and the Ethereum Gateway can point to both a local Ethereum node and the IPFS gateway provided by IPFS Companion. It means that while Cloudflare provides resolution-as-a-service, none of the components has to be trusted.</p><p>  所有部件都可以在本地运行。工作人员可以在服务工作者中运行，而Ethereum网关可以指向IPFS伴侣提供的本地Etereum节点和IPFS网关。这意味着虽然CloudFlare提供了分辨率 -  AS-A-Service，但都不是必须信任的。</p><p>  So  are we distributed yet? No, but we are getting closer, building bridges between emerging technologies and current web infrastructure. By providing a gateway dedicated to the distributed web, we hope to make these services more accessible to everyone.</p><p>  所以我们分发了吗？不，但我们正在靠近新兴技术和当前的Web基础架构之间的建筑桥梁。通过提供专用于分布式Web的网关，我们希望每个人都可以将这些服务更能访问。</p><p> We thank the ENS team for their support of a new resolver on expanding the distributed web. The ENS team has been running a similar service at  https://eth.link. On January 18th, they will switch  https://eth.link to using our new service.</p><p> 我们感谢ENS团队支持扩展分布式Web的新型解析器。 ENS团队在HTTPS://eth.Link运行类似的服务。 1月18日，他们将切换https://eth.link以使用我们的新服务。</p><p> These services benefit from the added speed and security of the Cloudflare Worker platform, while paving the way to run distributed protocols in browsers.</p><p> 这些服务受益于CloudFlare Worker平台的额外速度和安全性，同时铺平了在浏览器中运行分布式协议的方式。 </p><p>  Research  IPFS  Ethereum  Distributed Web</p><p>研究IPFS Evereum分布式Web </p></div><div id="story_share_this"><div class="sharethis-inline-share-buttons"></div></div><div class="text-break sotry_link page_narrow"><a target="_blank" href="https://blog.cloudflare.com/cloudflare-distributed-web-resolver/">https://blog.cloudflare.com/cloudflare-distributed-web-resolver/</a></div><div class="story_tags page_narrow"><button type="button" class="btn btn-light my_tag"><a href="/tag/web/">#web</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/ipfs/">#ipfs</a></button></div></div><div class="my_movie_list_item shadow p-3 mb-5 bg-white rounded"><button type="button" class="btn btn-link my_tag"><a href="/tag/web2.0/">#web2.0</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/google/">#google</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/设计/">#设计</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/创意/">#创意</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/摄影/">#摄影</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/图片/">#图片</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/游戏/">#游戏</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/软件/">#软件</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/手机/">#手机</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/视频/">#视频</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/广告/">#广告</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/windows/">#windows</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/iphone/">#iphone</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/免费/">#免费</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/网站/">#网站</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/下载/">#下载</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/微软/">#微软</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/blog/">#blog</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/firefox/">#firefox</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/音乐/">#音乐</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/苹果/">#苹果</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/apple/">#apple</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/博客/">#博客</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/wordpress/">#wordpress</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/恶搞/">#恶搞</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/艺术/">#艺术</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/qq/">#qq</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/web/">#web</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/谷歌/">#谷歌</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/工具/">#工具</a></button></div></div></div><div id="my_footer"><div class=""><a href="/tags/">tags</a> <a href="/users/">users</a></div>&copy;2012-2021 diglog.com </div></div></body></html>