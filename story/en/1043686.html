<!doctype html><html lang="zh-hans"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>自定义属性为状态 Custom Properties as State</title><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"><link rel="stylesheet" href="/img/css.css?random="><link data-rh="true" rel="icon" href="/img/favicon.ico"/><script data-ad-client="ca-pub-6067137220025946" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script type="text/javascript" src="https://platform-api.sharethis.com/js/sharethis.js#property=5effb96910009800120b8d4d&product=inline-share-buttons" async="async"></script>
<script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?03c1a0f31299b4a2fbb83c34d6beaac9";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script></head><body><div id="my_header"><div class="container"><nav class="navbar navbar-expand-lg"><a class="navbar-brand" href="/"><img alt="diglog" src="/img/logo.v1.gif" class="rounded-sm"></a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarNavAltMarkup"><div class="navbar-nav"></div></div></nav></div></div><div class="container"><div id="my_content"><h1 class="page_narrow">Custom Properties as State<br/>自定义属性为状态 </h1><div class="row"><div class="col-lg-12 col-12"><div class="my_story_list_item shadow p-3 mb-5 bg-white rounded"><div class="story_page_pub_time page_narrow">2021-01-09 14:14:23</div><div class="story_img_container"><a href="http://img2.diglog.com/img/2021/1/679bbcb4958c874f253b32bb168e9274.jpg"><img src="http://img2.diglog.com/img/2021/1/679bbcb4958c874f253b32bb168e9274.jpg" class="img-fluid my_story_img" onerror="this.style.display='none'"></a></div><div class="page_narrow text-break page_content"><p>Here’s a  fun idea from James Stanley:  a CSS file (that presumably updates daily) containing CSS custom properties for “seasonal” colors (e.g. spring is greens, fall is oranges). You’d then use the values to theme your site, knowing that those colors change slightly from day to day.</p><p>这是詹姆斯·斯坦利（James Stanley）的一个有趣的想法：一个CSS文件（可能每天更新），其中包含针对“季节性”颜色（例如，春天是绿色，秋天是橙色）的CSS自定义属性。然后，您会知道这些颜色每天都会略有变化，然后使用这些值来为您的网站设置主题。</p><p>    I think it would be more fun if the CSS file provided was  just the custom properties and not the opinionated other styles (like what sets the body background and such). That way you could implement the colors any way you choose without any side effects.</p><p>    我认为，如果提供的CSS文件只是自定义属性，而不是自以为是的其他样式（例如，设置主体背景等的样式），那会更好玩。这样，您可以选择任何方式实现颜色，而不会产生任何副作用。</p><p>  This makes me think that a CDN-hosted CSS file like this could have  other useful stuff, like today’s date for usage in pseudo content, or other special time-sensitive stuff. Maybe the phase of the moon? Sports scores?! Soup of the day?!</p><p>  这让我认为，像这样的CDN托管的CSS文件可能还有其他有用的东西，例如今天在伪内容中使用的日期，或其他对时间敏感的东西。也许是月相？体育比分？今日例汤？！</p><p> /* &lt;div class=&#34;soup&#34;&gt;The soup of the day is: &lt;/div&gt; */.soup::after { content: var(--soupOfTheDay); /* lol kinda */}</p><p> / *＆lt; div class =＆＃34; soup＆＃34;＆gt;当天的汤是：＆lt; / div＆gt; * /。soup :: after {content：var（-soupOfTheDay）; / *大声笑* /}</p><p> It’s almost like a data API that is tremendously easy to use. Pseudo content is even accessible content these days — but you can’t select the text of pseudo-elements, so don’t read this as an actual endorsement of using CSS as a content API.</p><p> 它几乎就像一个易于使用的数据API。如今，伪内容甚至是可访问的内容-但是您无法选择伪元素的文本，因此，请勿将其理解为将CSS用作内容API的实际认可。</p><p>  Will Boyd just blogged about  what is possible to put in a custom property. They are tremendously flexible. Just about anything is a valid custom property value and then the usage tends to behave just how you think it will.</p><p>  威尔·博伊德（Will Boyd）刚刚写了一篇博客，介绍了可以在自定义属性中添加的内容。它们非常灵活。几乎任何东西都是有效的自定义属性值，然后用法往往会按照您的想法行事。</p><p> body { /* totally fine */ --rgba: rgba(255, 0, 0, 0.1); background: var(--rgba); /* totally fine */ --rgba: 255, 0, 0, 0.1; background: rgba(var(--rgba)); /* totally fine */ --rgb: 255 0 0; --a: 0.1; background: rgb(var(--rgb) / var(--a));}body::after { /* totally fine */ --song: &#34;I need quotes to be pseudo content \A and can&#39;t have line breaks without this weird hack \A but still fairly permissive (💧💧💧) &#34;; content: var(--song); white-space: pre;}</p><p> body {/ *完全正确* / --rgba：rgba（255，0，0，0.1）;背景：var（-rgba）; / *完全可以* / --rgba：255，0，0，0.1;背景：rgba（var（-rgba））; / *完全可以* / --rgb：255 0 0; --a：0.1;背景：rgb（var（-rgb）/ var（-a））;} body ::之后{/ *完全好* /-歌曲：＆＃34;我需要引号是伪内容\ A并且可以＆ ＃39;没有这种奇怪的破解\ A的换行符，但仍然相当宽松（still）＆＃34 ;;内容：var（-song）;空格：前置；} </p><p>   Bram points out this “basic” state-flipping quality that a custom property can pull off:</p><p>Bram指出了自定义属性可以实现的“基本”状态翻转质量：</p><p> :root { --is-big: 0;}.is-big { --is-big: 1;}.block { padding: calc( 25px * var(--is-big) + 10px * (1 - var(--is-big)) ); border-width: calc( 3px * var(--is-big) + 1px * (1 - var(--is-big)) );}</p><p> ：root {---is-big：0;}。is-big {--is-big：1;}。block {padding：calc（25px * var（-is-big）+ 10px *（1-var （-大）））;边框宽度：calc（3px * var（-is-big）+ 1px *（1-var（-is-big）））;}</p><p> Add a couple of scoops of complexity and you get  The Raven (media queries with custom properties).</p><p> 添加一些复杂性，您将获得The Raven（带有自定义属性的媒体查询）。</p><p> I’d absolutely love to see something happen in CSS to make this easier. Using CSS custom properties for generic state would be amazing. We could apply arbitrary styles when the UI is in arbitrary states! Think of how useful media queries are now, or that container queries will be, but compounded because it’s arbitrary state, not just state that those things expose.</p><p> 我绝对希望看到CSS中发生了一些事情，以使此操作更容易。将CSS自定义属性用于一般状态将是惊人的。当UI处于任意状态时，我们可以应用任意样式！想一想现在的媒体查询有多有用，或者说容器查询将有用，但是由于它是任意状态，而不仅仅是陈述那些事情暴露在外，因此变得更加复杂。</p><p> Bram covered that as well, mentioning what Lea Verou called  “higher level custom properties”:</p><p> Bram也谈到了这一点，并提到了Lea Verou所说的“高级定制属性”：</p><p> /* Theoretical! */.square { width: 2vw; padding: 0.25vw; aspect-ratio: 1/1; @if (var(--size) = big) { width: 16vw; padding: 1vw; }}.my-input { @if(var(--pill) = on) { border-radius: 999px; }}</p><p> / *理论上！ * /。square {宽度：2vw;填充：0.25vw;长宽比：1/1； @if（var（-size）= big）{width：16vw;填充：1vw; }}。my-input {@if（var（-pill）= on）{border-radius：999px; }}</p><p>  Will calls them “CSS variables” which is  super common and understandable. You’ll read (and I have written) sentences often that are like “CSS variables (a.k.a CSS Custom Properties)” or “CSS Custom Properties (a.k.a CSS Variables.” Šime Vidas recently  noted there is a rather correct way to refer to these things:  --this-part is the custom property and  var(--this-part) is the variable, which comes right from usage in the  spec.</p><p>  将它们称为“ CSS变量”，这是非常常见且可以理解的。您会经常阅读（并且我已经写过）类似于“ CSS变量（aka CSS定制属性）”或“ CSS定制属性（aka CSS变量）”的句子。ŠimeVidas最近指出，有一种相当正确的方式来引用这些句子事情：--this-part是自定义属性，而var（-this-part）是变量，它直接来自规范中的用法。 </p><p>  I’m reminded of  this Vue proposal. I’m not sure if it went anywhere, but the idea is that the state of a component would  automatically be exposed as CSS custom properties.</p><p>我想起了这个Vue提案。我不确定它是否在任何地方，但其想法是组件的状态会自动显示为CSS自定义属性。</p><p> &lt;template&gt; &lt;div class=&#34;text&#34;&gt;Hello&lt;/div&gt;&lt;/template&gt;&lt;script&gt;export default { data() { return { color: &#39;red&#39; } }}&lt;/script&gt;&lt;style vars=&#34;{ color }&#34;&gt;.text { color: var(--color);}&lt;/style&gt;</p><p> ＆lt;模板＆gt; ＆lt; div class =＆＃34; text＆＃34;＆quot; Hello＆lt; / div＆gt;＆lt; / template＆gt;＆lt; script＆gt;导出默认{data（）{return {color：＆＃39; red＆＃39; }}}＆lt; / script＆gt;＆lt; style vars =＆＃34; {color}＆＃34;＆gt; .text {color：var（-color）;}＆lt; / style＆gt;</p><p> By virtue of having  color as part of the state of this component, then  --color is available as state to the CSS of this component. I think that’s a great idea.</p><p> 由于将颜色作为该组件状态的一部分，因此--color可用作该组件CSS的状态。我认为这是个好主意。</p><p> What if every time you used  useState in React, CSS custom properties were put on the  :root and were updated automatically. For example, if you did this:</p><p> 如果每次您在React中使用useState时，CSS自定义属性都放在：root上并自动更新，该怎么办？例如，如果您这样做：</p><p> import React, { useState } from &#39;https://cdn.skypack.dev/ [email protected]^16.13.1&#39;;import ReactDOM from &#39;https://cdn.skypack.dev/ [email protected]^16.13.1&#39;;const App = () =&gt; { const [ activeColor, setActiveColor ] = useState(&#34;red&#34;); return( &lt;div className=&#34;box&#34;&gt; &lt;h1&gt;Active Color: {activeColor}&lt;/h1&gt; &lt;button onClick={() =&gt; {setActiveColor(&#34;red&#34;)}}&gt;red&lt;/button&gt; &lt;button onClick={() =&gt; {setActiveColor(&#34;blue&#34;)}}&gt;blue&lt;/button&gt; &lt;/div&gt; );}ReactDOM.render(&lt;App /&gt;,document.getElementById(&#34;root&#34;))</p><p> 从＆＃39; https：//cdn.skypack.dev/ [受电子邮件保护] ^ 16.13.1＆＃39 ;;从＆＃39; https：//cdn.skypack.dev/导入ReactDOM导入React，{useState} [受电子邮件保护] ^ 16.13.1＆＃39; const App =（）=＆gt; {const [activeColor，setActiveColor] = useState（＆＃34; red＆＃34;）; return（＆lt; div className =＆＃34; box＆＃34;＆gt; h1＆gt;有效色：{activeColor}＆lt; / h1＆gt;＆lt; button onClick = {（）=＆gt; {setActiveColor（＆＃34;红色＆＃34;）}}＆gt;红色＆lt; / button＆gt;＆lt; button onClick = {（）=＆gt; {setActiveColor（＆＃34; blue＆＃34;）}}＆gt;蓝色＆lt; / button＆gt;＆lt; / div＆gt ;）;} ReactDOM.render（＆lt; App /&gt;,document.getElementById(&#34;root&#34;））</p><p>   Because the state automatically mapped itself to a custom property. Someone should make a  useStateWithCustomProperties hook or something to do that.  #freeidea</p><p>   因为状态自动将其自身映射到自定义属性。有人应该制作一个useStateWithCustomProperties钩子或类似的东西。 #freeidea</p><p> Libraries like React and Vue are for building UI. I think it makes a lot of sense that the state that they manage is automatically exposed to CSS.</p><p> 像React和Vue这样的库都用于构建UI。我认为他们管理的状态自动暴露给CSS很有意义。 </p><p>  Speaking of state that CSS should know about, I’ve seen quite a few demos that do fun stuff by mapping over things, like the current mouse position or scroll position, over to CSS. I don’t think it’s entirely unreasonable to ask for that data to be natively exposed to CSS. We already have the concept of environment variables, like  env(safe-area-inset-top), and I could see that being used to expose page state, like  env(page-scroll-percentage) or  env(mouseY).</p><p>说到CSS应该知道的状态，我已经看了很多演示，它们通过将诸如当前鼠标位置或滚动位置之类的内容映射到CSS上来有趣。 我认为要求将这些数据本地暴露给CSS并非完全没有道理。 我们已经有了环境变量的概念，例如env（safe-area-inset-top），我可以看到它被用来暴露页面状态，例如env（page-scroll-percentage）或env（mouseY）。 </p></div><div id="story_share_this"><div class="sharethis-inline-share-buttons"></div></div><div class="text-break sotry_link page_narrow"><a target="_blank" href="https://css-tricks.com/custom-properties-as-state/">https://css-tricks.com/custom-properties-as-state/</a></div><div class="story_tags page_narrow"><button type="button" class="btn btn-light my_tag"><a href="/tag/属性/">#属性</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/css/">#css</a></button></div></div><div class="my_movie_list_item shadow p-3 mb-5 bg-white rounded"><button type="button" class="btn btn-link my_tag"><a href="/tag/web2.0/">#web2.0</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/google/">#google</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/设计/">#设计</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/创意/">#创意</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/摄影/">#摄影</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/图片/">#图片</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/游戏/">#游戏</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/软件/">#软件</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/视频/">#视频</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/手机/">#手机</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/广告/">#广告</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/iphone/">#iphone</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/网站/">#网站</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/免费/">#免费</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/下载/">#下载</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/windows/">#windows</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/微软/">#微软</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/苹果/">#苹果</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/apple/">#apple</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/firefox/">#firefox</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/blog/">#blog</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/音乐/">#音乐</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/博客/">#博客</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/wordpress/">#wordpress</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/恶搞/">#恶搞</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/qq/">#qq</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/艺术/">#艺术</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/web/">#web</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/工具/">#工具</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/分享/">#分享</a></button></div></div></div><div id="my_footer"><div class=""><a href="/tags/">tags</a> <a href="/users/">users</a></div>&copy; 2020 diglog.com </div></div></body></html>