<!doctype html><html lang="zh-hans"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Consoleme：AWS权限和访问的中央控制平面 ConsoleMe: A Central Control Plane for AWS Permissions and Access</title><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"><link rel="stylesheet" href="/img/css.css?random="><link data-rh="true" rel="icon" href="/img/favicon.ico"/><script data-ad-client="ca-pub-6067137220025946" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script type="text/javascript" src="https://platform-api.sharethis.com/js/sharethis.js#property=5effb96910009800120b8d4d&product=inline-share-buttons" async="async"></script>
<script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?03c1a0f31299b4a2fbb83c34d6beaac9";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script></head><body><div id="my_header"><div class="container"><nav class="navbar navbar-expand-lg"><a class="navbar-brand" href="/"><img alt="diglog" src="/img/logo.v1.gif" class="rounded-sm"></a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarNavAltMarkup"><div class="navbar-nav"></div></div></nav></div></div><div class="container"><div id="my_content"><h1 class="page_narrow">ConsoleMe: A Central Control Plane for AWS Permissions and Access<br/>Consoleme：AWS权限和访问的中央控制平面 </h1><div class="row"><div class="col-lg-12 col-12"><div class="my_story_list_item shadow p-3 mb-5 bg-white rounded"><div class="story_page_pub_time page_narrow">2021-03-11 23:50:35</div><div class="story_img_container"><a href="http://img2.diglog.com/img/2021/3/d3f0459df99878033754ad082e0dfd9b.png"><img src="http://img2.diglog.com/img/2021/3/d3f0459df99878033754ad082e0dfd9b.png" class="img-fluid my_story_img" onerror="this.style.display='none'"></a></div><div class="page_narrow text-break page_content"><p>At AWS re:Invent 2020, we open sourced two new tools for managing multi-account AWS permissions and access. We’re very excited to bring you  ConsoleMe (pronounced:  kuhn-soul-mee), and its CLI utility,  Weep (pun intended)!</p><p>在AWS RE：发明2020中，我们开设了一种用于管理多个帐户AWS权限和访问的新工具。我们非常兴奋地带给你合作（发音：Kuhn-Soul-Mee）及其Cli效用，哭泣（双关语）！</p><p>   Growth in the cloud has exploded, and it is now easier than ever to create infrastructure on the fly. Groups beyond software engineering teams are standing up their own systems and automation. This is an amazing movement providing numerous opportunities for product innovation, but managing this growth has introduced a support burden of ensuring proper security authentication &amp; authorization, cloud hygiene, and scalable processes.</p><p>   云中的成长已爆炸，现在比以往任何时候都更容易创建基础设施。超越软件工程团队的团体正站立自己的系统和自动化。这是一个惊人的运动，为产品创新提供了许多机会，但管理这一增长引入了确保适当的安全认证和amp的支持负担;授权，云卫生和可扩展过程。</p><p> At many companies, managing cloud hygiene and security usually falls under the infrastructure or security teams. They are the one-stop-shop for cloud permissions and access. As the company scales, this centralized and manual management approach falls over, becoming impractical for both operations teams and their users.</p><p> 在许多公司，管理云卫生和安全通常属于基础设施或安全团队。它们是云许可和访问的一站式商店。随着公司的规模，这种集中式和手动管理方法跌倒，对操作团队及其用户来说变得不切实际。</p><p> This happened for us at Netflix. Our Cloud Infrastructure Security team is the arbiter of AWS permissions, handling numerous requests from Netflix employees for cloud permissions and access. Our historical approach of helping Netflix internal cloud users looks something like this:</p><p> 这发生在Netflix上。我们的云基础架构安全团队是AWS权限的仲裁器，处理Netflix员工的许多请求，用于云权限和访问。我们帮助Netflix内部云用户的历史方法看起来像这样：</p><p> We clarify what the user needs, and why. Risks are analyzed, and we make suggestions of better approaches if applicable.</p><p> 我们澄清用户需求，为什么。对风险进行了分析，我们提出了更好的方法，如果适用。</p><p>  We log into the AWS account with the applicable IAM role and manipulate the policy</p><p>  我们使用适用的IAM角色登录AWS帐户并操纵该政策</p><p> If the request involves a cross-account resource, we log out of the AWS account, log in to the account with the resource, and manipulate the resource policy</p><p> 如果请求涉及跨帐户资源，我们会退出AWS帐户，以资源登录帐户，并操作资源策略 </p><p>   We play a game of  permission whack-a-mole (Steps 3–7) until we resolve all of the user’s issues</p><p>在我们解析所有用户的问题之前，我们扮演一个权限的游戏（步骤3-7）</p><p>   At Netflix, we’re firm believers in empowering our employees and providing low-friction systems that allow users to get their jobs done in a safe way. By integrating best practices such as least privilege into an IAM pipeline, we transitioned the security team from being gatekeepers of the cloud into cloud development accelerators.</p><p>   在Netflix，我们是坚定的信徒在赋予员工，并提供低摩擦系统，让用户以安全的方式获得工作。通过将诸如最低权限的最佳实践集成到IAM管道中，我们将安全团队从云的网守转换为云开发加速器。</p><p>  ConsoleMe is a self-service tool for AWS that provides an easier way of managing permissions and access across multiple accounts, while encouraging least-privilege permissions. Users can use the following features:</p><p>  Consoleme是AWS的自助式工具，可提供跨多个帐户管理权限和访问的更简单的方法，同时鼓励最少权限权限。用户可以使用以下功能：</p><p>    Check out the  demos in our documentation, give ConsoleMe a test ride by logging in to our  demo site (Requires a Google account), then  try it locally with your own account.</p><p>    在我们的文档中查看演示，通过登录我们的演示网站（需要Google帐户）来提供Consoleme测试骑行，然后使用自己的帐户在本地尝试。</p><p>   ConsoleMe allows users to access the AWS console through the use of temporary IAM role credentials. After the user authenticates, ConsoleMe determines which roles they’re authorized to access based on their identity and group memberships.</p><p>   Consoleme允许用户通过使用临时IAM角色凭据访问AWS控制台。在用户身份验证之后，Consoleme确定其授权根据其标识和组成员资格访问哪种角色。</p><p> ConsoleMe generates an authorization mapping that is used to determine which users/groups are allowed to access a given IAM role. This mapping can be generated through  role tags that indicate which users/groups are allowed to retrieve credentials for the role, ConsoleMe’s  Dynamic Configuration, or through an organization’s custom logic. ( docs).</p><p> Consoleme生成授权映射，用于确定允许哪些用户/组访问给定的IAM角色。可以通过角色标签生成此映射，该角色标签指示允许哪些用户/组检索角色的凭据，Consoleme的动态配置或通过组织的自定义逻辑。 （文件）。</p><p> Users have a number of ways they can log in to the AWS console. The simplest way is by browsing to ConsoleMe and clicking on the desired role via the web interface. They can also use URL parameters to log into a particular role, access a specific region, AWS service, or AWS resource without having to navigate around ConsoleMe’s web interface.</p><p> 用户有许多方法可以登录AWS控制台。最简单的方法是通过浏览到Consoleme并通过Web界面单击所需的角色。它们还可以使用URL参数登录特定角色，访问特定区域，AWS服务或AWS资源，而无需在Consoleme的Web界面周围导航。 </p><p> At Netflix, we’ve seen users integrate ConsoleMe with productivity tools like  Alfred, chat bots, and custom browser search engines.</p><p>在Netflix，我们已经看到了用户将Consoleme与Alfred，Chat Bots和自定义浏览器搜索引擎等生产力工具集成。</p><p>   Weep is ConsoleMe’s CLI utility. It retrieves temporary (1-hour) AWS credentials from ConsoleMe, and offers a number of different ways to serve them locally. Weep can automatically refresh credentials. This ensures that long-lived AWS actions are successful (Like an s3:GetObject action taking longer than an hour). Weep can also transparently perform nested AssumeRole calls, and serve the assumed role credentials to the local user. Credentials are discoverable by the AWS CLI and AWS SDKs through the  default credential provider chain.</p><p>   哭泣是Consoleme的CLI实用程序。它从Consoleme检索临时（1小时）AWS凭据，并提供了许多不同的方式来在本地服务。 Weev可以自动刷新凭据。这可确保长期寿命的AWS操作成功（如S3：GetObject Action，需要超过一个小时）。 Weev还可以透明地执行嵌套的假设呼叫，并为本地用户提供假定的角色凭据。 AWS CLI和AWS SDKS通过默认凭据提供程序链可发现凭据。</p><p>  Users no longer need to worry about the IAM JSON permissions syntax. They can simply search for their role and choose the permissions they need. ConsoleMe will generate an IAM policy and, if required, cross-account resource policies that are applicable to the request. Users can modify the generated policy if they desire, and then submit for approval.</p><p>  用户不再需要担心IAM JSON权限语法。他们可以简单地搜索其角色并选择所需的权限。 Consoleme将生成IAM策略，如果需要，如果需要，适用于请求的跨帐户资源策略。如果他们希望，用户可以修改生成的策略，然后提交批准。</p><p>   Automatic approval of low-risk permission requests, governed by ConsoleMe’s configuration and powered by  Zelkova</p><p>   自动批准低风险许可要求，由Consoleme配置和由Zelkova提供支持</p><p>  ConsoleMe’s self-service wizard has reduced our response time in servicing access requests, provided more consistency in our IAM policies, and simplified AWS permissions for our users.</p><p>  Consoleme的自助服务向导减少了我们在维修访问请求中的响应时间，在我们的IAM策略中提供了更一致性，并为用户简化了AWS权限。</p><p>   ConsoleMe offers a native policy editor for popular resource types. Administrators use it to manage permissions and tags for common resource types. End-users can manipulate a resource and submit policy change requests.</p><p>   Consoleme为流行的资源类型提供了本机策略编辑器。管理员使用它来管理常用资源类型的权限和标记。最终用户可以操纵资源并提交策略更改请求。</p><p>    Today, ConsoleMe supports a small number of popular resource types. We’d love your help with adding support for new resource types. Reach out to us on  Discord or better yet, create an issue or submit a pull request on  GitHub.</p><p>    今天，Consoleme支持少量流行的资源类型。我们希望您的帮助添加对新资源类型的支持。尚未与我们联系，或者更好地联系，创建一个问题或在Github上提交拉动请求。 </p><p>   ConsoleMe provides a centralized, filterable view of your  most critical cloud resources, synchronized from AWS Config. It allows users to quickly find an AWS resource across all of the accounts within an organization.</p><p>Consoleme提供了从AWS Config中同步的最关键的云资源的集中式，可译的视图。它允许用户在组织内的所有帐户中快速查找AWS资源。</p><p> For resource types that ConsoleMe doesn’t have native policy editors for, ConsoleMe provides a link that will both log users into the AWS console and redirect them to the appropriate resource.</p><p> 对于Consoleme没有本机策略编辑器的资源类型，Consoleme提供了将用户登录到AWS控制台的链接并将其重定向到适当的资源。</p><p>    ConsoleMe makes it easy for cloud administrators to create or clone new IAM roles across multiple AWS accounts. We created this feature because we found ourselves in the AWS Console copying and pasting various policies by hand.</p><p>    Consoleme使云管理员可以轻松地在多个AWS帐户中创建或克隆新的IAM角色。我们创建了这个功能，因为我们发现自己在AWS控制台中用手复制和粘贴各种策略。</p><p> The clone feature can copy one or more of the following to a new role:</p><p> 克隆功能可以将以下一个或多个复制到新角色：</p><p>    At Netflix, we use  IAM roles instead of IAM users because roles do not allow long-lived, static credentials. IAM user credentials are more vulnerable to accidental exposure, difficult to rotate, and generally harder to secure.</p><p>    在Netflix，我们使用IAM角色而不是IAM用户，因为角色不允许长期静态凭据。 IAM用户凭据更容易受到意外曝光，难以旋转，并且通常更难确保。</p><p> In addition, we prefer using  inline policies instead of managed policies for our IAM roles because it’s easier to enforce least-privilege as inline policies are specific to an IAM role while managed policies can be attached to multiple roles. It’s hard to remove permissions from shared managed policies because some roles may be using permissions from the policy that other roles are not.</p><p> 此外，我们更倾向于为我们的IAM角色使用内联策略而不是托管策略，因为它更容易强制执行最少的权限，因为内联策略特定于IAM角色，而托管策略可以附加到多个角色。难以删除共享托管策略的权限，因为某些角色可能是源自策略的权限而不是其他角色。</p><p> We use ConsoleMe in conjunction with  RepoKid to remove unused permissions, and then to make the process of requesting them back as painless as possible.</p><p> 我们使用Consoleme与Repokid一起删除未使用的权限，然后使其尽可能无痛地请求它们。 </p><p>  ConsoleMe is available on  GitHub (Give us a ★!). You can try out ConsoleMe using Docker. A  quick start guide is available in our documentation.</p><p>Conoleme在GitHub上提供（给我们一个★！）。您可以使用Docker尝试Consoleme。我们的文档中提供了一个快速入门指南。</p><p> ConsoleMe has  example Terraform files that you can reference when you’re ready to deploy.</p><p> Consoleme在准备部署时可以引用示例Terraform文件。</p><p>  ConsoleMe still has a long way to go, and we could use your help. ConsoleMe and Weep work great for us here at Netflix, and we want them to work great for everyone else too. The best way to get started is to read through the documentation and code, install ConsoleMe, and take a look at our  open issues to see what work needs to be done, or submit issues yourself.</p><p>  Consoleme还有很长的路要走，我们可以使用你的帮助。 Consoleme和Weep在Netflix的美国伟大工作，我们希望他们也为其他人工作。开始的最佳方法是阅读文档和代码，安装Consoleme，并查看我们的开放问题，以查看需要做些什么工作，或者自己提交问题。</p><p> Not a coder or an IAM expert? No problem. We have a lot of  documentation that could use proofreading and clarifying to make it more approachable.</p><p> 不是编码器或IAM专家？没问题。我们有很多文档可以使用校对和澄清，使其更加平衡。</p><p>  Also,  we’re hiring! If you’re interested in these sorts of problems, take a look at  https://jobs.netflix.com/teams/security, and apply.</p><p>  此外，我们正在招聘！如果您对这些问题感兴趣，请查看https://jobs.netflix.com/teams/security，并应用。</p><p>  Over the last couple of years, we’ve battle tested ConsoleMe and have added features to scale it with our needs at Netflix. We’ve now brought ConsoleMe out in the open. As companies adopt ConsoleMe, we want to continue growing it to address the unique challenges of large-scale cloud permissions management that many of us face.</p><p>  在过去的几年里，我们对测试的合作进行了战斗，并增加了在Netflix的需求中扩展的功能。我们现在在公开赛中带来了Consoleme。随着公司通过合作社，我们希望继续越来越多地解决大型云许可管理的独特挑战，我们的许多人面临。</p><p> We have a lot of plans for the future of ConsoleMe. Many of these goals are ambitious, and we can’t do it without your support. If any of these excite you, please reach out to us on our  Discord channel or submit feature enhancements on  GitHub.</p><p> 我们有很多计划未来合作。这些目标中的许多目标都是雄心勃勃的，而且没有你的支持，我们不能这样做。如果其中任何一个激励您，请在我们的Discord频道上与我们联系，或在Github上提交功能增强功能。 </p><p>   AWS permissions can be hard to debug with opaque Access Denied errors. We aim to simplify and automate the debugging process. This might include exposing and connecting information from the following sources:</p><p>AWS权限可能难以使用不透明访问拒绝错误调试。我们的目标是简化和自动化调试过程。这可能包括从以下来源中公开和连接信息：</p><p>  Ideally, users would be able to ask ConsoleMe whether an IAM role can take a specific action on a given resource. If not, ConsoleMe would provide an explanation and context about any policies that are preventing the action.</p><p>  理想情况下，用户将能够询问Consolem IAM角色是否可以对给定资源采取特定操作。如果没有，Consoleme将为有关防止行动的任何政策提供解释和背景。</p><p>  We plan to add features supporting the creation and management of team roles. Team roles are IAM roles that an entire team has access to. These roles can be propagated across multiple accounts, and can have differing permissions on each account. A simplified management interface will make it easy to create, request, or modify a team role.</p><p>  我们计划添加支持团队角色创建和管理的功能。团队角色是整个团队可以访问的IAM角色。这些角色可以跨多个帐户传播，并且可以对每个帐户具有不同的权限。简化的管理界面将使您可以轻松地创建，请求或修改团队角色。</p><p>  ConsoleMe only supports cross-account policy generation for a subset of resource types. We hope to expand this in the future and make generated policies as accurate as possible by adding awareness of permission boundaries and service control policies.</p><p>  Consoleme仅支持资源类型子集的跨帐户策略生成。我们希望通过增加许可边界和服务控制策略，将来扩展这一点，并尽可能准确地制定生成的政策。</p><p>  Cloud administrators should have the option to no longer manage and review all policy requests. If ConsoleMe has context on the owner of a resource, and is able to determine that the policy is within a set of defined safety limits, policy requests should be routed to the owners of the resources affected by the policy.</p><p>  Cloud Administrators应该可以选择不再管理和查看所有策略请求。如果CONSOLEM对资源所有者有上下文，并且能够确定策略在一组定义的安全限制内，则应将策略请求路由到受策略影响的资源的所有者。</p><p>  On occasion, we need to rollback policy changes that either break an IAM role or prevent new functionality from working. ConsoleMe should allow users to revert a role to an older snapshot.</p><p>  有时，我们需要回滚策略更改，即打破IAM角色或防止新功能工作。 Consoleme应该允许用户恢复旧快照的角色。</p><p>       We would like to give a special thanks to Srinath Kuruvadi, Jay Dhulia, the Cloud Infrastructure Security Team at Netflix, the Infosec team at Netflix, and our AWS partners.</p><p>       我们想特别感谢Srinath Kuruvadi，Jay Dhulia，Netflix的云基础设施安全团队，Netflix的Infosec团队以及我们的AWS合作伙伴。 </p></div><div id="story_share_this"><div class="sharethis-inline-share-buttons"></div></div><div class="text-break sotry_link page_narrow"><a target="_blank" href="https://netflixtechblog.com/consoleme-a-central-control-plane-for-aws-permissions-and-access-fd09afdd60a8">https://netflixtechblog.com/consoleme-a-central-control-plane-for-aws-permissions-and-access-fd09afdd60a8</a></div><div class="story_tags page_narrow"><button type="button" class="btn btn-light my_tag"><a href="/tag/aws/">#aws</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/central/">#central</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/consoleme/">#consoleme</a></button></div></div><div class="my_movie_list_item shadow p-3 mb-5 bg-white rounded"><button type="button" class="btn btn-link my_tag"><a href="/tag/web2.0/">#web2.0</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/google/">#google</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/设计/">#设计</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/创意/">#创意</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/摄影/">#摄影</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/图片/">#图片</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/游戏/">#游戏</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/软件/">#软件</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/手机/">#手机</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/视频/">#视频</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/广告/">#广告</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/iphone/">#iphone</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/网站/">#网站</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/免费/">#免费</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/下载/">#下载</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/windows/">#windows</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/微软/">#微软</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/apple/">#apple</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/firefox/">#firefox</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/blog/">#blog</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/苹果/">#苹果</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/音乐/">#音乐</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/博客/">#博客</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/wordpress/">#wordpress</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/恶搞/">#恶搞</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/qq/">#qq</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/艺术/">#艺术</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/web/">#web</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/谷歌/">#谷歌</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/工具/">#工具</a></button></div></div></div><div id="my_footer"><div class=""><a href="/tags/">tags</a> <a href="/users/">users</a></div>&copy; 2020 diglog.com </div></div></body></html>