<!doctype html><html lang="zh-hans"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Python语言峰会：PEP 654  - 异常组和除外 Python Language Summit: PEP 654 – Exception Groups and Except</title><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"><link rel="stylesheet" href="/img/css.css?random="><link data-rh="true" rel="icon" href="/img/favicon.ico"/><script data-ad-client="ca-pub-6067137220025946" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script type="text/javascript" src="https://platform-api.sharethis.com/js/sharethis.js#property=5effb96910009800120b8d4d&product=inline-share-buttons" async="async"></script>
<script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?03c1a0f31299b4a2fbb83c34d6beaac9";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script></head><body><div id="my_header"><div class="container"><nav class="navbar navbar-expand-lg"><a class="navbar-brand" href="/"><img alt="diglog" src="/img/logo.v1.gif" class="rounded-sm"></a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarNavAltMarkup"><div class="navbar-nav"></div></div></nav></div></div><div class="container"><div id="my_content"><h1 class="page_narrow">Python Language Summit: PEP 654 – Exception Groups and Except<br/>Python语言峰会：PEP 654  - 异常组和除外 </h1><div class="row"><div class="col-lg-12 col-12"><div class="my_story_list_item shadow p-3 mb-5 bg-white rounded"><div class="story_page_pub_time page_narrow">2021-05-16 18:27:59</div><div class="story_img_container"><a href="http://img2.diglog.com/img/2021/5/14193c10017f414292cbfe7a15c2fb77.png"><img src="http://img2.diglog.com/img/2021/5/14193c10017f414292cbfe7a15c2fb77.png" class="img-fluid my_story_img" onerror="this.style.display='none'"></a></div><div class="page_narrow text-break page_content"><p>PEP 654 was authored by Irit Katriel, Yury Selivanov, and       Guido van Rossum. This PEP is currently at the draft stage. The authors shared what it is, why we need it, and which ideas they rejected.</p><p>PEP 654由Irit Katriel，Yury Selivanov和Guido Van Rossum作着。此PEP目前正在草稿阶段。作者分享了它，为什么我们需要它，以及他们拒绝的想法。</p><p>  The purpose of this PEP is to help Python users handle unrelated exceptions. Right now, if you&#39;re dealing with several unrelated exceptions, you can:</p><p>  此PEP的目的是帮助Python用户处理无关的异常。现在，如果你＆＃39;重新处理几个不相关的异常，你可以：</p><p>  Return a list of exceptions instead of raising them, in which case they become error codes rather than exceptions, so you can&#39;t handle them with exception-handling mechanisms</p><p>  返回一个例外，而不是提高它们，在这种情况下，它们成为错误代码而不是例外，因此您可以使用异常处理机制处理它们</p><p> Wrap the list of exceptions in a wrapper exception and use it as a list of error codes, which still             can&#39;t be handled with exception-handling mechanisms</p><p> 在包装器异常中包装例外列表，并将其用作错误代码列表，其仍然可以用例外处理机制处理。</p><p> Each  except* clause will be executed once, at most. Each leaf exception will be handled by one  except* clause, at most.</p><p> 除了*子句之外，他们最多可以执行一次。每个叶例异常都将由其中一个除外，最多。</p><p> In the discussions about the PEP that have happened so far, there were no major objections to these ideas, but there are still disagreements about how to represent an exception group. Exception groups can be nested, and each exception has its own metadata:</p><p> 在迄今为止发生的PEP的讨论中，对这些想法没有重大反对，但仍有关于如何代表一个例外组的分歧。异常组可以嵌套，每个异常都有自己的元数据：</p><p>   Originally, the authors thought that they could make exception groups iterable, but that wasn&#39;t the best option because metadata has to be preserved. Their solution was to use a  .split() operation to take a condition on a leaf and copy the metadata:</p><p>   最初，作者认为他们可以使例外群体迭代，但那不是最好的选择，因为必须保留元数据。他们的解决方案是使用.split（）操作在叶子上拍摄条件并复制元数据： </p><p>      There are some differences between operational errors and control flow errors that you need to take into account when you&#39;re dealing with exceptions:</p><p>运行错误与控制流错误之间存在一些差异，您需要考虑到＆＃39;重新处理例外时：</p><p>    In  Example 1, there is a clearly defined operation with a straightforward error. But in  Example 2, there are concurrent tasks that could contain any number of lines of code, so you don&#39;t know what caused the  KeyError. In this case, handling one  KeyError could potentially be useful for logging, but it isn&#39;t helpful otherwise. But there are other exceptions that it could make more sense to handle:</p><p>    在示例1中，存在具有直接误差的明确定义的操作。但在示例2中，有一个并发任务可以包含任何数量的代码，所以你不知道是什么导致的keyerror。在这种情况下，处理一个KeyError可能是有用的对日志记录，但它是＆＃39; t否则有用。但还有其他例外情况可以更加有意义地处理：</p><p>                It&#39;s important to understand the differences between operational errors and control flow errors, as they relate to  try-except statements:  Operational errors are typically handled right where they happen and work well with  try-except statements.</p><p>                重要的是要了解操作错误和控制流错误之间的差异，因为它们与尝试除外的差异：操作错误通常在他们发生的情况下处理并使用除外语句进行良好。</p><p> Control flow errors are essentially signals, and the current semantics of the  try-except statement doesn&#39;t handle them adequately.</p><p> 控制流误差基本上是信号，并且当前的试论语句的语义并不适用于它们。</p><p> Before   asyncio, it wasn&#39;t as big of a problem that there weren&#39;t advanced mechanisms to react to these kinds of control flow errors, but now it&#39;s more important that we have a better way to deal with these sorts of issues.  asyncio.gather() is an unusual API because it has two entirely different operation modes controlled by one keyword argument,  return_exceptions:</p><p> 在异步之前，它不是那么大的问题，即在那里的问题和＃39; t进出了这些类型的控制流错误的机制，但现在它更重要的是我们有更好的处理方式有了这些问题。 Asyncio.gather（）是一个不寻常的API，因为它具有由一个关键字参数控制的两个完全不同的操作模式，return_exceptions：</p><p>        The problem with this API is that, if an error happens, you still wait for all of the tasks to complete. In addition, you can&#39;t use  try-except to handle the exceptions but instead have to unpack        the results of those tasks and manually check them, which can be cumbersome.     If one tasks fails, then all other tasks will be cancelled. Users of  asyncio have been requesting this kind of solution, but it needed a new way of dealing with exceptions and was part of the inspiration behind PEP 654.</p><p>        此API的问题是，如果发生错误，则仍然等待所有任务要完成。此外，您可以＆＃39; t使用试验除了处理例外，而是必须解压缩这些任务的结果并手动检查它们，这可能是麻烦的。如果一个任务失败，那么将取消所有其他任务。 Asyncio的用户一直要求这种解决方案，但它需要一种处理例外的新方法，并且是PEP 654背后的灵感的一部分。</p><p>  Whether or not exception groups should be iterable is still an open question. For that to work, tracebacks would need to be concatenated, with shared parts copied, which isn&#39;t very efficient. But iteration isn&#39;t usually the right approach for working with exception groups anyway. A potential compromise could be to have an iteration utility in  traceback.py.</p><p>  异常组是否应该是迭代仍然是一个开放的问题。为此工作，需要将追溯进行连接，共享部分复制，这是非常有效的。但是迭代是＆＃39; T通常是使用异常组的正确方法。潜在的妥协可以是在Traceback.py中具有迭代实用程序。 </p><p> The authors considered teaching  except to handle exception groups instead of adding  except*, but there would be too many bakwards compatibility problems. They also thought about using an  except* clause on one exception at a time. Backwards compatibility issues wouldn&#39;t apply there, but this would essentially be iteration, which wouldn&#39;t help.</p><p>除了处理异常组而不是添加*之外，作者认为教学除外，但是Bakwards兼容性问题会有太多。 他们还考虑了一次使用除外*条款。 向后兼容性问题＆＃39; t在那里申请，但这将基本上是迭代，这将不会帮助。 </p></div><div id="story_share_this"><div class="sharethis-inline-share-buttons"></div></div><div class="text-break sotry_link page_narrow"><a target="_blank" href="https://pyfound.blogspot.com/2021/05/the-2021-python-language-summit-pep-654.html">https://pyfound.blogspot.com/2021/05/the-2021-python-language-summit-pep-654.html</a></div><div class="story_tags page_narrow"><button type="button" class="btn btn-light my_tag"><a href="/tag/python/">#python</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/语言/">#语言</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/language/">#language</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/例外/">#例外</a></button></div></div><div class="my_movie_list_item shadow p-3 mb-5 bg-white rounded"><button type="button" class="btn btn-link my_tag"><a href="/tag/web2.0/">#web2.0</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/google/">#google</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/设计/">#设计</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/创意/">#创意</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/摄影/">#摄影</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/游戏/">#游戏</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/图片/">#图片</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/软件/">#软件</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/视频/">#视频</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/手机/">#手机</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/广告/">#广告</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/apple/">#apple</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/iphone/">#iphone</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/网站/">#网站</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/免费/">#免费</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/下载/">#下载</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/windows/">#windows</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/微软/">#微软</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/firefox/">#firefox</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/苹果/">#苹果</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/blog/">#blog</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/音乐/">#音乐</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/博客/">#博客</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/wordpress/">#wordpress</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/恶搞/">#恶搞</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/艺术/">#艺术</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/qq/">#qq</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/web/">#web</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/谷歌/">#谷歌</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/工具/">#工具</a></button></div></div></div><div id="my_footer"><div class=""><a href="/tags/">tags</a> <a href="/users/">users</a></div>&copy;2012-2021 diglog.com </div></div></body></html>