<!doctype html><html lang="zh-hans"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Docker和Python Docker and Python</title><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"><link rel="stylesheet" href="/img/css.css?random="><link data-rh="true" rel="icon" href="/img/favicon.ico"/><script data-ad-client="ca-pub-6067137220025946" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script type="text/javascript" src="https://platform-api.sharethis.com/js/sharethis.js#property=5effb96910009800120b8d4d&product=inline-share-buttons" async="async"></script>
<script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?03c1a0f31299b4a2fbb83c34d6beaac9";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script></head><body><div id="my_header"><div class="container"><nav class="navbar navbar-expand-lg"><a class="navbar-brand" href="/"><img alt="diglog" src="/img/logo.v1.gif" class="rounded-sm"></a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarNavAltMarkup"><div class="navbar-nav"></div></div></nav></div></div><div class="container"><div id="my_content"><h1 class="page_narrow">Docker and Python<br/>Docker和Python </h1><div class="row"><div class="col-lg-12 col-12"><div class="my_story_list_item shadow p-3 mb-5 bg-white rounded"><div class="story_page_pub_time page_narrow">2020-12-28 07:04:54</div><div class="page_narrow text-break page_content"><p>When we develop more than one python project, we need to configure our development environment with the dependencies of all the projects. This becomes even more complicated when there are many people on the development of the project.To do this, you need to create a development environment that is isolated from the others. We can do this thanks to  docker containers.</p><p>当我们开发多个python项目时，我们需要使用所有项目的依赖项来配置我们的开发环境。当项目开发中有很多人时，这变得更加复杂。为此，您需要创建一个与其他人隔离的开发环境。感谢docker容器，我们可以做到这一点。</p><p>   pydk├─── requirements.txt└─── src └─── server.py</p><p>   pydk├───requirements.txt└───src└───server.py</p><p> We now think that our project may depend on some external libraries, such as  Flask. Let’s prepare a file called  requirements.txt with a line inside it:  Flask==1.1.2</p><p> 现在，我们认为我们的项目可能依赖于某些外部库，例如Flask。让我们准备一个名为requirements.txt的文件，其中包含一行：Flask == 1.1.2</p><p>   Now, we can run and continue to develop this project locally, but if we had other projects with requirements that would conflict, we would break this or other projects.So, let’s see how we can isolate this project inside a container that is the same for all the developers who are going to develop.</p><p>   现在，我们可以在本地运行并继续开发该项目，但是如果我们有其他需求冲突的项目，那么我们将破坏该项目或其他项目，因此，让我们看看如何在相同的容器中隔离该项目对于所有将要开发的开发人员。</p><p>  Now we need to create a  Dockerfile ( pydk/Dockerfile) that contains suitable instructions to build our container so that it can execute our python code.</p><p>  现在我们需要创建一个Dockerfile（pydk / Dockerfile），其中包含合适的指令来构建我们的容器，以便它可以执行我们的python代码。</p><p> # base image   FROM  python:3.9    # working directory in the container   WORKDIR  /pydk    # copy the dependencies file to the working directory   COPY requirements.txt .    # install dependencies   RUN pip install -r requirements.txt    # copy the content of the local src directory to the working directory   COPY src/ .    # command to run on container start   CMD  [  &#34;python&#34; ,  &#34;./server.py&#34;  ]</p><p> ＃来自python：3.9的基本映像＃容器WORKDIR / pydk中的工作目录＃将依赖项文件复制到工作目录COPY requirements.txt中。 ＃安装依赖项RUN pip install -r requirements.txt＃将本地src目录的内容复制到工作目录COPY src /中。 ＃在容器启动CMD [＆＃34; python＆＃34; ，＆＃34; ./ server.py＆＃34; ]</p><p> Now we run the command to build our image. When docker builder kicks in, you can see all the steps we wrote in our dockerfile:</p><p> 现在，我们运行命令来构建映像。当docker builder启动时，您可以看到我们在dockerfile中编写的所有步骤： </p><p> $ docker build -t mypy .Sending build context to Docker daemon 4.608kBStep 1/6 : FROM python:3.93.9: Pulling from library/python6c33745f49b4: Pull complete ef072fc32a84: Pull complete c0afb8e68e0b: Pull complete d599c07d28e6: Pull complete f2ecc74db11a: Pull complete 26856d31ce86: Pull complete a463ae07b5f3: Pull complete 54f24c50f14e: Pull complete 168ee6df05fe: Pull complete Digest: sha256:39c16d1a064c0239939d4ed52923b736c25b389e6ea439d5652b8fc9564ede76Status: Downloaded newer image for python:3.9 ---&gt; d1eef6fb8dbeStep 2/6 : WORKDIR /pydk ---&gt; Running in ab2f8923ad12Removing intermediate container ab2f8923ad12 ---&gt; bad3fb87e418Step 3/6 : COPY requirements.txt . ---&gt; eade175d7095Step 4/6 : RUN pip install -r requirements.txt ---&gt; Running in de2b7fcd2c6dCollecting Flask==1.1.2 Downloading Flask-1.1.2-py2.py3-none-any.whl (94 kB)Collecting click&gt;=5.1 Downloading click-7.1.2-py2.py3-none-any.whl (82 kB)Collecting itsdangerous&gt;=0.24 Downloading itsdangerous-1.1.0-py2.py3-none-any.whl (16 kB)Collecting Jinja2&gt;=2.10.1 Downloading Jinja2-2.11.2-py2.py3-none-any.whl (125 kB)Collecting MarkupSafe&gt;=0.23 Downloading MarkupSafe-1.1.1.tar.gz (19 kB)Collecting Werkzeug&gt;=0.15 Downloading Werkzeug-1.0.1-py2.py3-none-any.whl (298 kB)Building wheels for collected packages: MarkupSafe Building wheel for MarkupSafe (setup.py): started Building wheel for MarkupSafe (setup.py): finished with status &#39;done&#39; Created wheel for MarkupSafe: filename=MarkupSafe-1.1.1-cp39-cp39-linux_x86_64.whl size=32240 sha256=6fbda6c15fe2abefc6c8f4ec2ac66c421b1cf997c1a53a532a39bbebc8083860 Stored in directory: /root/.cache/pip/wheels/e0/19/6f/6ba857621f50dc08e084312746ed3ebc14211ba30037d5e44eSuccessfully built MarkupSafeInstalling collected packages: MarkupSafe, Werkzeug, Jinja2, itsdangerous, click, FlaskSuccessfully installed Flask-1.1.2 Jinja2-2.11.2 MarkupSafe-1.1.1 Werkzeug-1.0.1 click-7.1.2 itsdangerous-1.1.0Removing intermediate container de2b7fcd2c6d ---&gt; 595ceaa19d29Step 5/6 : COPY src/ . ---&gt; 98294355a272Step 6/6 : CMD [ &#34;python&#34;, &#34;./server.py&#34; ] ---&gt; Running in 1fb2a61f97ceRemoving intermediate container 1fb2a61f97ce ---&gt; 09fd1053a1c1Successfully built 09fd1053a1c1Successfully tagged mypy:latest</p><p>$ docker build -t mypy。将构建上下文发送到Docker守护进程4.608kB步骤1/6：从python：3.93.9：从库/ python6c33745f49b4中提取：拉完整ef072fc32a84：拉完整c0afb8e68e0b：拉完整d599c07d28e6：拉完整f2ecc74db11a：拉完整26856d31ce86：拉取完整a463ae07b5f3：拉取完整54f24c50f14e：拉取完整168ee6df05fe：拉取完整摘录：sha256：39c16d1a064c0239939d4ed52923b736c25b389e6ea439d5652b8fc9564ede76状态：已下载--3.9的更新图像d1eef6fb8dbe步骤2/6：WORKDIR / pydk->在ab2f8923ad12中运行删除中间容器ab2f8923ad12 --- bad3fb87e418第3/6步：COPY requirements.txt。 ---＆gt; eade175d7095步骤4/6：运行pip install -r requirements.txt ---＆gt;在de2b7fcd2c6d中运行收集Flask == 1.1.2下载Flask-1.1.2-py2.py3-none-any.whl（94 kB）收集click＆gt; = 5.1下载click-7.1.2-py2.py3-none-any.whl （82 kB）收集其危险＆gt; = 0.24下载其危险-1.1.0-py2.py3-none-any.whl（16 kB）收集Jinja2> = 2.10.1下载Jinja2-2.11.2-py2.py3-none-any .whl（125 kB）正在收集MarkupSafe＆gt; = 0.23下载MarkupSafe-1.1.1.tar.gz（19 kB）正在收集Werkzeug＆gt; = 0.15下载Werkzeug-1.0.1-py2.py3-none-any.whl（298 kB）用于收集的包裹的构建轮：MarkupSafe用于MarkupSafe的构建轮（setup.py）：已启动用于MarkupSafe的构建轮（setup.py）：状态为＆d39; done＆＃39;完成为MarkupSafe创建的滚轮：filename = MarkupSafe-1.1.1-cp39-cp39-linux_x86_64.whl size = 32240 sha256 = 6fbda6c15fe2abefc6c8f4ec2ac66c421b1cf997c1a53a532a39bbebc8083860存放在目录中：/root/.cache/pip/fc04e/e4/6/19/e00e00f6e7e7e7e7e7e7e7e7e7e7e7e4e/e/email软件包：MarkupSafe，Werkzeug，Jinja2，其危险，单击，Flask成功安装Flask-1.1.2 Jinja2-2.11.2 MarkupSafe-1.1.1 Werkzeug-1.0.1 click-7.1.2 itsdangerous-1.1.0删除中间容器de2b7fcd2c6d --- ＆gt; 595ceaa19d29步骤5/6：COPY src /。 ---＆gt; 98294355a272步骤6/6：CMD [＆＃34; python＆＃34 ;,＆＃34; ./ server.py＆＃34; ] ---＆gt;在1fb2a61f97ce中运行删除中间容器1fb2a61f97ce ---> 09fd1053a1c1成功构建09fd1053a1c1成功标记了mypy：latest</p><p>  $ docker imagesREPOSITORY TAG IMAGE ID CREATED SIZEmypy latest 09fd1053a1c1 15 minutes ago 896MBpython 3.9 d1eef6fb8dbe 8 days ago 885MB</p><p>  $ docker imagesREPOSITORY TAG IMAGE ID CREATED SIZEmypy最新09fd1053a1c1 15分钟前896MBpython 3.9 d1eef6fb8dbe 8天前885MB</p><p>   $ docker run -d -p 5000:5000 mypy487c215ec0cc2b44c1612c0aadbd3f1f47c32a0b29273da3dabf77351717852c$ docker psCONTAINER ID IMAGE COMMAND CREATED STATUS PORTS NAMES487c215ec0cc mypy &#34;python ./server.py&#34; 28 seconds ago Up 27 seconds 0.0.0.0:5000-&gt;5000/tcp crazy_hermann$ curl http://localhost:5000Hello docker!</p><p>   $ docker run -d -p 5000：5000 mypy487c215ec0cc2b44c1612c0aadbd3f1f47c32a0b29273da3dabf77351717852c $ docker psCONTAINER ID图像命令创建的状态端口名称S487c215ec0cc mypy＆＃34＆python; /。 28秒前向上27秒0.0.0.0:5000-&gt;5000/tcp crazy_hermann $ curl http：// localhost：5000</p><p>  We have created a small development environment for  python application. Now, we can connect to our image and continue the development of the application without affecting our local environment.</p><p>  我们为python应用程序创建了一个小型开发环境。现在，我们可以连接到我们的映像并继续开发应用程序，而不会影响我们的本地环境。 </p></div><div id="story_share_this"><div class="sharethis-inline-share-buttons"></div></div><div class="text-break sotry_link page_narrow"><a target="_blank" href="https://matteoguadrini.github.io/posts/containerized-python-development/">https://matteoguadrini.github.io/posts/containerized-python-development/</a></div><div class="story_tags page_narrow"><button type="button" class="btn btn-light my_tag"><a href="/tag/docker/">#docker</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/python/">#python</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/项目/">#项目</a></button></div></div><div class="my_movie_list_item shadow p-3 mb-5 bg-white rounded"><button type="button" class="btn btn-link my_tag"><a href="/tag/web2.0/">#web2.0</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/google/">#google</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/设计/">#设计</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/创意/">#创意</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/摄影/">#摄影</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/游戏/">#游戏</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/图片/">#图片</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/软件/">#软件</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/视频/">#视频</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/手机/">#手机</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/广告/">#广告</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/iphone/">#iphone</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/网站/">#网站</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/免费/">#免费</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/windows/">#windows</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/下载/">#下载</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/苹果/">#苹果</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/微软/">#微软</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/apple/">#apple</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/firefox/">#firefox</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/blog/">#blog</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/音乐/">#音乐</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/博客/">#博客</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/wordpress/">#wordpress</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/恶搞/">#恶搞</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/qq/">#qq</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/艺术/">#艺术</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/web/">#web</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/工具/">#工具</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/分享/">#分享</a></button></div></div></div><div id="my_footer"><div class=""><a href="/tags/">tags</a> <a href="/users/">users</a></div>&copy; 2020 diglog.com </div></div></body></html>