<!doctype html><html lang="zh-hans"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>为什么Google Cloud UI这么慢？ Why is the Google Cloud UI so slow?</title><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"><link rel="stylesheet" href="/img/css.css?random="><link data-rh="true" rel="icon" href="/img/favicon.ico"/><script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?03c1a0f31299b4a2fbb83c34d6beaac9";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script><script data-ad-client="ca-pub-6067137220025946" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script type="text/javascript" src="https://platform-api.sharethis.com/js/sharethis.js#property=5effb96910009800120b8d4d&product=inline-share-buttons" async="async"></script></head><body><div id="my_header"><div class="container"><nav class="navbar navbar-expand-lg"><a class="navbar-brand" href="/"><img alt="diglog" src="/img/logo.v1.gif" class="rounded-sm"></a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarNavAltMarkup"><div class="navbar-nav"></div></div></nav></div></div><div class="container"><div id="my_content"><h1 class="page_narrow">Why is the Google Cloud UI so slow?<br/>为什么Google Cloud UI这么慢？ </h1><div class="row"><div class="col-lg-12 col-12"><div class="my_story_list_item shadow p-3 mb-5 bg-white rounded"><div class="story_page_pub_time page_narrow">2020-12-09 22:03:22</div><div class="story_img_container"><a href="http://img2.diglog.com/img/2020/12/1aff2a377fa6e12937faaf493b6ef9a2.png"><img src="http://img2.diglog.com/img/2020/12/1aff2a377fa6e12937faaf493b6ef9a2.png" class="img-fluid my_story_img" onerror="this.style.display='none'"></a></div><div class="page_narrow text-break page_content"><p>Here are some metrics I collected on a high-end 2018 MacBook Pro on a UK-based Gigabit internet connection.</p><p>这是我在英国的千兆互联网连接上的高端2018 MacBook Pro上收集的一些指标。</p><p>  Download size is the compressed size, JavaScript size is uncompressed. Main Content is the time when e.g. the Cloud Functions become visible, Fully Loaded is when no more changes are made to the UI.</p><p>  下载大小是压缩大小，JavaScript大小是未压缩的。主要内容是指例如当“云功能”变为可见时，即“完全加载”是指无需对UI进行任何更改。</p><p>  We can see that each page loads over 15 MB of JavaScript code. A look at the performance timeline in Chrome DevTools confirms that running this code is the primary cause of the poor page performance.</p><p>  我们可以看到每个页面加载了超过15 MB的JavaScript代码。查看Chrome DevTools中的性能时间表可以确认，运行此代码是导致页面性能不佳的主要原因。</p><p>  This article will take a closer look at the page load process of the Google Cloud Functions page, and examine how it could be sped up.</p><p>  本文将详细介绍Google Cloud Functions页面的页面加载过程，并研究如何加快加载速度。</p><p> You can use these strategies to investigate and improve the performance of the apps you&#39;re working on.</p><p> 您可以使用这些策略来调查并改善正在使用的应用程序的性能。</p><p>  The initial HTML request is very fast and only takes about 150ms. It contains an embedded SVG spinner that shows while the first chunk of JavaScript code is loading.</p><p>  最初的HTML请求非常快，只需要150毫秒。它包含一个嵌入式SVG微调器，该微调器显示JavaScript代码的第一块正在加载的时间。</p><p>     These files don&#39;t take too long to download, but running the code freezes the UI for a while. The spinner SVG becomes stuck at this point, until it&#39;s replaced by a skeleton UI for Google Cloud Console page.</p><p>     这些文件的下载时间不会太长，但是运行代码会使UI冻结一段时间。此时，微调框SVG停滞不前，直到被Google Cloud Console页面的框架UI取代为止。 </p><p>   Initialization – the browser runs module initialization code, i.e. code that runs when loading a module rather than when calling one of its functions</p><p>初始化-浏览器运行模块初始化代码，即在加载模块而不是调用其功能之一时运行的代码</p><p> For the whole Google Cloud page, just parsing the source code takes 250ms, and compilation takes another 750ms (not including the 113 ms spent on &#34;Compile Script&#34;).</p><p> 对于整个Google Cloud页面，仅解析源代码就需要250毫秒，而编译又需要750毫秒（不包括在＆＃34; Compile Script＆＃34;上花费的113毫秒）。</p><p>       Once the generic Google Cloud UI is rendered the page starts loading 18 additional JavaScript files with an overall size of 1.5 MB.</p><p>       呈现通用Google Cloud UI后，页面将开始加载18个其他JavaScript文件，总大小为1.5 MB。</p><p> Making a lot of separate requests isn&#39;t actually a problem though – it can improve performance by increasing the likelinhood of cache hits, and splitting up bundles makes it easy to load only necessary code.</p><p> 但是，发出大量单独的请求实际上不是问题-它可以通过增加缓存命中率的可能性来提高性能，并且拆分捆绑包可以轻松地仅加载必需的代码。</p><p> After loading the first set up bundles the app starts making fetch requests and loads 3 more bundles at a total size of 6 MB.</p><p> 加载第一个设置的捆绑包后，应用程序开始发出提取请求，并再加载3个捆绑包，总大小为6 MB。</p><p> When loading the page on my normal network the requests all kind of blurred together and it was hard to see which requests were sequential. So this screenshot shows the request chart on a throttled connection.</p><p> 当在我的普通网络上加载页面时，所有请求都模糊在一起，很难看到哪些请求是顺序的。因此，此屏幕截图显示了受限制的连接上的请求图表。</p><p>   The request loading the list of Cloud Functions takes about 700ms. But it doesn&#39;t start as soon as the bundles are loaded, in part because there&#39;s a  testIamPermissions request that needs to finish first.</p><p>   加载云功能列表的请求大约需要700毫秒。但它不会在捆绑包加载后立即开始，部分原因是有一个testIamPermissions请求需要首先完成。 </p><p> As a result the CPU ends up being idle for half a second – this time could be used better if the request started sooner.</p><p>结果是CPU最终闲置了半秒钟-如果请求提早开始，这次可以更好地使用。</p><p>  Finally the app re-renders and we get the list of Cloud Functions we wanted to see.</p><p>  最终，该应用重新渲染，我们得到了我们想要查看的云功能列表。</p><p>   Chrome DevTools has a code coverage tool tracks which parts of the code actually run on the current page. This can help identify code that doesn&#39;t have to be loaded.</p><p>   Chrome DevTools具有一个代码覆盖率工具，可跟踪哪些代码部分实际在当前页面上运行。这可以帮助识别不必加载的代码。</p><p> The Cloud Functions page runs 53% of the JavaScript code it downloads. This is actually a bit disappointing, as it means that even if only necessary code is loaded it would still only cut the total JavaScript size of the page in half.</p><p> “云功能”页面运行其下载的JavaScript代码的53％。这实际上有点令人失望，因为这意味着即使仅加载必要的代码，它仍只会将页面的JavaScript总大小减少一半。</p><p>   A good amount of the code actually consists of configuration objects. For example, this 200 KB object with 4997 keys.</p><p>   实际上，大量代码由配置对象组成。例如，此200 KB对象具有4997个密钥。</p><p>  Loading this as a JSON string with  JSON.parse could be faster, as JSON is simpler to parse than a JavaScript object. This would be easy to do, but might not result in a huge performance improvement.</p><p>  使用JSON.parse将其作为JSON字符串加载可能会更快，因为JSON比JavaScript对象更易于解析。这将很容易做到，但可能不会带来巨大的性能提升。</p><p> Ideally the app wouldn&#39;t need to load the full list on the client, but this would be harder to implement.</p><p> 理想情况下，该应用无需在客户端上加载完整列表，但这将很难实现。 </p><p>  The 200KB JSON object above is actually included in two of the JavaScript bundles. Breaking it out and reusing it would save download and processing time.</p><p>上面的200KB JSON对象实际上包含在两个JavaScript捆绑包中。分解并重新使用它可以节省下载和处理时间。</p><p>    The Google Cloud page loads a large initial JavaScript bundle. The longer it takes to load and initialize this code, the longer it takes to load page-specific code and to render the list of Cloud Functions the user wants to see.</p><p>    Google云端页面会加载大型的初始JavaScript包。加载和初始化此代码所花费的时间越长，加载特定于页面的代码并呈现用户想要查看的Cloud Functions列表所花费的时间就越长。</p><p> But the initial bundle also contains secondary content, like the complex navigation sidebar. This menu becomes functional before the main page content is loaded, but it should only be loaded after the primary content.</p><p> 但是初始捆绑包还包含次要内容，例如复杂的导航侧栏。在加载主页内容之前，此菜单将起作用，但应仅在主要内容之后加载。</p><p>  Google Cloud already does this in some cases. For example, the page initially renders a simpler version of the header and then loads more complex features later on.</p><p>  在某些情况下，Google Cloud已经做到了这一点。例如，页面最初呈现标题的简单版本，然后在以后加载更复杂的功能。</p><p>   While the performance of static pages tends to be dominated by render-blocking network requests, single-page apps are often blocked by JavaScript execution or loading account data.</p><p>   尽管静态页面的性能通常由阻止渲染的网络请求所控制，但单页面应用程序通常会被JavaScript执行或加载帐户数据阻止。</p><p> Downloading large amounts of code can hurt performance on slow connections, but due to compression and caching CPU processing often has a greater impact.</p><p> 下载大量代码可能会影响慢速连接时的性能，但是由于压缩和缓存，CPU处理通常会产生更大的影响。</p><p> Why is the Google Cloud UI so slow? This article looks at the performance of a large JavaScript application and explores how it could be made faster. https://t.co/HSHhCXYQCi</p><p> 为什么Google Cloud UI这么慢？本文研究了大型JavaScript应用程序的性能，并探讨了如何使其更快地运行。 https://t.co/HSHhCXYQCi </p><p>— DebugBear (@DebugBear)  December 9, 2020</p><p>-DebugBear（@DebugBear）2020年12月9日 </p></div><div id="story_share_this"><div class="sharethis-inline-share-buttons"></div></div><div class="text-break sotry_link page_narrow"><a target="_blank" href="https://www.debugbear.com/blog/slow-google-cloud-ui">https://www.debugbear.com/blog/slow-google-cloud-ui</a></div><div class="story_tags page_narrow"><button type="button" class="btn btn-light my_tag"><a href="/tag/google/">#google</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/cloud/">#cloud</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/加载/">#加载</a></button></div></div><div class="shadow p-3 mb-5 bg-white rounded clearfix"><div class="container"><div class="row"><div class="col-sm"><div><a target="_blank" href="/story/1038613.html"><img src="http://img2.diglog.com/img/2020/12/thumb_c63f58f3327f27a0628f09a148a0938c.jpg" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1038613.html">Firebolt通过新的数据仓库方法筹集了3700万美元来收购Snowflake，Amazon和Google </a></div><span class="my_story_list_date">2020-12-9 20:36</span></div><div class="col-sm"><div><a target="_blank" href="/story/1038612.html"><img src="http://img2.diglog.com/img/2020/12/thumb_d3bb3d24931af8e88adbe3dfb418ec84.jpg" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1038612.html">Google悄悄收购了英国初创公司Dataform，该公司帮助企业管理数据仓库 </a></div><span class="my_story_list_date">2020-12-9 20:35</span></div><div class="col-sm"><div><a target="_blank" href="/story/1038605.html"><img src="http://img2.diglog.com/img/2020/12/thumb_ae616d610039a275cc6834f41d733cae.png" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1038605.html">谷歌表示将向外部开发者开放其开源的Fuchsia OS，这是该项目的首次正式公告 </a></div><span class="my_story_list_date">2020-12-9 20:13</span></div><div class="col-sm"><div><a target="_blank" href="/story/1038473.html"><img src="http://img2.diglog.com/img/2020/12/thumb_30caed82dce55f5fdbcac6d520a89614.png" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1038473.html">Google宣布推出“看说话”（Look to Speak），这是一个针对Android的实验性项目，可通过选择眼睛中的短语来帮助语音和运动障碍用户 </a></div><span class="my_story_list_date">2020-12-9 3:58</span></div></div></div></div><div class="my_movie_list_item shadow p-3 mb-5 bg-white rounded"><button type="button" class="btn btn-link my_tag"><a href="/tag/web2.0/">#web2.0</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/google/">#google</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/设计/">#设计</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/创意/">#创意</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/摄影/">#摄影</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/图片/">#图片</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/游戏/">#游戏</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/软件/">#软件</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/手机/">#手机</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/视频/">#视频</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/广告/">#广告</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/iphone/">#iphone</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/网站/">#网站</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/免费/">#免费</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/下载/">#下载</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/windows/">#windows</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/苹果/">#苹果</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/微软/">#微软</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/apple/">#apple</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/blog/">#blog</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/firefox/">#firefox</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/音乐/">#音乐</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/博客/">#博客</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/wordpress/">#wordpress</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/恶搞/">#恶搞</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/艺术/">#艺术</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/qq/">#qq</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/web/">#web</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/工具/">#工具</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/分享/">#分享</a></button></div></div></div><div id="my_footer"><div class=""><a href="/tags/">tags</a> <a href="/users/">users</a></div>&copy; 2020 diglog.com </div></div></body></html>