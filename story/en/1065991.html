<!doctype html><html lang="zh-hans"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>关于代码中的评论 On Comments in Code</title><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"><link rel="stylesheet" href="/img/css.css?random="><link data-rh="true" rel="icon" href="/img/favicon.ico"/><script data-ad-client="ca-pub-6067137220025946" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script type="text/javascript" src="https://platform-api.sharethis.com/js/sharethis.js#property=5effb96910009800120b8d4d&product=inline-share-buttons" async="async"></script>
<script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?03c1a0f31299b4a2fbb83c34d6beaac9";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script></head><body><div id="my_header"><div class="container"><nav class="navbar navbar-expand-lg"><a class="navbar-brand" href="/"><img alt="diglog" src="/img/logo.v1.gif" class="rounded-sm"></a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarNavAltMarkup"><div class="navbar-nav"></div></div></nav></div></div><div class="container"><div id="my_content"><h1 class="page_narrow">On Comments in Code<br/>关于代码中的评论 </h1><div class="row"><div class="col-lg-12 col-12"><div class="my_story_list_item shadow p-3 mb-5 bg-white rounded"><div class="story_page_pub_time page_narrow">2021-06-16 02:47:14</div><div class="story_img_container"><a href="http://img2.diglog.com/img/2021/6/f99987566fe3275f56ce83716ede2d36.png"><img src="http://img2.diglog.com/img/2021/6/f99987566fe3275f56ce83716ede2d36.png" class="img-fluid my_story_img" onerror="this.style.display='none'"></a></div><div class="page_narrow text-break page_content"><p>I used to think that I didn’t need comments if I wrote self-documenting code. However, I have realized that I  do write comments, and that I find them really useful. To see how many comments I write, and what kind they are, I wrote a script to analyze my git commits from the last six years. In total, seven percent of my committed lines contained a comment. This blog post has details on what constitutes good and bad comments, as well as more statistics from my script.</p><p>如果我写了自我记录代码，我曾经认为我不需要评论。但是，我已经意识到我做评论，我发现它们真的很有用。要查看我写的评论，以及他们是什么样的，我写了一个脚本来分析过去六年的Git提交。总共有7％的承诺行包含了评论。此博客文章有关于什么构成好的和坏评论的详细信息，以及我脚本的更多统计数据。</p><p>   Part of the reason I was skeptical of comments was the prevalence of Javadoc-style comments. This style of commenting exists in other languages as well. Here is an example in Python that I just made up, but which is representative of this style:</p><p>   我对评论持怀疑态度的一部分是javadoc风格评论的普遍性。这种评论风格也存在于其他语言中。这是我刚刚组成的Python中的一个例子，但这是这种风格的代表：</p><p>  The problem with most of these comments is that they convey very little information. Often it is just a repetition of the method name and parameter names in a few more words. These comments may be useful for API:s exposed externally, but in an application where you have access to all the source code, they are mostly useless. If you wonder what the method does, or what the valid input range for a parameter is, you are better off just reading the code to see what it does. These types of comment take up a lot of space without providing much value.</p><p>  大多数这些评论的问题是它们传达了很少的信息。通常，它只是重复了一些单词的方法名称和参数名称。这些评论可能对API有用：S外部暴露，但在您可以访问所有源代码的应用程序中，它们大多是无用的。如果您想知道该方法所做的，或者参数的有效输入范围是什么，您只需阅读代码即可查看它所的代码。这些类型的评论占用了很多空间而不提供大量价值。</p><p>  Instead of writing Javadoc comments, you are better off making the best possible use of method names and variable names. Each name you use can help explain what the computation is about and how it is done. One good reason for writing many small methods instead of one large method is that you have more places to use descriptive names, something I have written about  here.</p><p>  您可以更好地使用方法名称和变量名称，而不是编写Javadoc评论，而不是编写Javadoc评论。您使用的每个名称都可以帮助解释计算是什么以及它的完成方式。写出许多小方法而不是一个大型方法的一个好理由是您有更多的地方使用描述性名称，我写的东西。</p><p>  Writing self-documenting code will get you a long way. However, there are times when having more information is useful. For example, the comment on the use of dialling zones in the code below:</p><p>  编写自我记录代码会让您获得很长的路要走。但是，有更多信息时的时间很有用。例如，关于在下面的代码中使用拨号区域的注释：</p><p>    Often the advice given is “ Comment the Why, not the What“. While this probably covers most of my comments, it is not how I think about when to comment. Instead, I tend to write a comment when there is something particularly tricky, either in the domain or in how the implementation is done.</p><p>    经常给出的建议是“评论为什么，而不是什么”。虽然这可能涵盖了大部分评论，但这不是我如何考虑何时发表评论。相反，当在域中或如何完成实现时，我倾向于在何时存在特别棘手。</p><p> The standard advice from the “no comments are needed”-crowd (which I used to belong to) is to rewrite the code so you don’t need to comment it. This is however not always possible. Sometimes the domain is just too complex. Sometimes the effort to rewrite the code would be too much compared to adding a comment.</p><p> “无注释所需的”标准建议--CROWD（我曾经属于哪种）是重写代码，以便您不需要发表评论。然而，这并不总是可能的。有时域名太复杂。有时重写代码的努力将与添加评论进行比较太多。 </p><p> Another complaint about comments is that they will get out of sync with the code, thus hindering your understanding of the code rather than helping it. While this sometimes happens, it has not been a big problem for me. In almost all cases I analyzed, the comments were still valid. They have also been very useful. Every time I came across one of my comments like these, I was happy I wrote it. It doesn’t take long to forget some of the details and nuances of the problem you are solving, and having the comment there with some extra context and explanation has been great.</p><p>另一个关于评论的投诉是，他们将与代码失去同步，从而阻碍了对代码的理解而不是帮助它。虽然这有时会发生这种情况，但它对我来说并不是一个大问题。在几乎所有分析的情况下，评论仍然有效。他们也非常有用。每当我遇到我这样的评论之一时，我很高兴我写了它。忘记您正在解决的问题的一些细节和细微差别并不需要很长时间，并在那里有一些额外的背景和解释的评论很大。</p><p>  Sometimes you get a comment “for free” if you are logging an explanatory message. In the example below, the log statement explains what has happened, so there is no need for a comment.</p><p>  有时，如果您正在记录解释性消息，您会收到评论“免费”。在下面的示例中，日志语句解释了发生了什么，因此无需注释。</p><p>   When I first thought about checking how many comments all of my commits contained, I thought it would be enough with a one-liner like this to find the comments in all my Python commits (I only comment using #):</p><p>   当我第一次考虑检查所有提交的评论时，我认为这将足够了，一个衬里这样的单行可以在我的所有Python提交中找到评论（我只使用＃的评论）：</p><p>  However, I soon realized that I wanted more details. I wanted to differentiate between end-of-line comments and whole line comments. I also wanted to find out how many “comment blocks” (consecutive lines of comments) I had. I also decided to exclude test files from the analysis. Plus, I want to be sure to exclude any commented-out code that happened to be there (there were unfortunately a few such cases). In the end I wrote a python-script to do the analysis. The input for the script was the output of  git log --author=Henrik -p .</p><p>  但是，我很快意识到我想要更多细节。我想区分线尾注释和整个线条评论。我也想了解我有多少“评论块”（连续评论线）。我还决定从分析中排除测试文件。此外，我希望一定要排除发生在那里的任何注释的代码（遗憾的是，这样的这种情况）。最后我写了一个python脚本来进行分析。脚本的输入是Git Log --Author = Henrik -P的输出。</p><p> From the output I saw that 1299 out of 17817 added lines of mine contained comments. There were 161 end-of-line comments, and 464 single line comments. The longest comment block was 11 lines, and there were 96 cases of comment blocks that had 3 or more consecutive lines.</p><p> 从输出中，我看到的，在17817年中，矿的1299分中含有的评论。有161个终端的评论，464个单行评论。最长的评论块是11行，并且有96个评论块有3个或更多连续行。</p><p>  I used to think that writing well-named functions would mean no comments were needed. However, looking at what I actually did, I noticed that I tended to add comments in tricky or unintuitive parts of the code. Every time I come back to those parts of the program, I am happy I made the effort to add a comment – they have been very helpful!</p><p>  我曾经认为写出命名优势的函数意味着没有必要的评论。然而，看着我实际所做的事情，我注意到我倾向于在代码的棘手或不完整的部分中添加评论。每次我回到该计划的那些部分时，我很高兴我努力添加评论 - 他们一直很有帮助！ </p></div><div id="story_share_this"><div class="sharethis-inline-share-buttons"></div></div><div class="text-break sotry_link page_narrow"><a target="_blank" href="https://henrikwarne.com/2021/06/15/on-comments-in-code/">https://henrikwarne.com/2021/06/15/on-comments-in-code/</a></div><div class="story_tags page_narrow"><button type="button" class="btn btn-light my_tag"><a href="/tag/代码/">#代码</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/comments/">#comments</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/评论/">#评论</a></button></div></div><div class="my_movie_list_item shadow p-3 mb-5 bg-white rounded"><button type="button" class="btn btn-link my_tag"><a href="/tag/web2.0/">#web2.0</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/google/">#google</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/设计/">#设计</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/创意/">#创意</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/摄影/">#摄影</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/游戏/">#游戏</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/图片/">#图片</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/软件/">#软件</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/视频/">#视频</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/手机/">#手机</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/广告/">#广告</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/iphone/">#iphone</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/免费/">#免费</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/网站/">#网站</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/下载/">#下载</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/windows/">#windows</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/微软/">#微软</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/apple/">#apple</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/blog/">#blog</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/firefox/">#firefox</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/苹果/">#苹果</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/音乐/">#音乐</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/博客/">#博客</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/wordpress/">#wordpress</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/恶搞/">#恶搞</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/艺术/">#艺术</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/qq/">#qq</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/web/">#web</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/工具/">#工具</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/分享/">#分享</a></button></div></div></div><div id="my_footer"><div class=""><a href="/tags/">tags</a> <a href="/users/">users</a></div>&copy;2012-2021 diglog.com </div></div></body></html>