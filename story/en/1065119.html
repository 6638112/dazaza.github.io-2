<!doctype html><html lang="zh-hans"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Post Mostem：缓存配置不正确曝光个人信息 Post Mortem: Incorrect Cache Configuration Exposes Personal Information</title><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"><link rel="stylesheet" href="/img/css.css?random="><link data-rh="true" rel="icon" href="/img/favicon.ico"/><script data-ad-client="ca-pub-6067137220025946" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script type="text/javascript" src="https://platform-api.sharethis.com/js/sharethis.js#property=5effb96910009800120b8d4d&product=inline-share-buttons" async="async"></script>
<script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?03c1a0f31299b4a2fbb83c34d6beaac9";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script></head><body><div id="my_header"><div class="container"><nav class="navbar navbar-expand-lg"><a class="navbar-brand" href="/"><img alt="diglog" src="/img/logo.v1.gif" class="rounded-sm"></a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarNavAltMarkup"><div class="navbar-nav"></div></div></nav></div></div><div class="container"><div id="my_content"><h1 class="page_narrow">Post Mortem: Incorrect Cache Configuration Exposes Personal Information<br/>Post Mostem：缓存配置不正确曝光个人信息 </h1><div class="row"><div class="col-lg-12 col-12"><div class="my_story_list_item shadow p-3 mb-5 bg-white rounded"><div class="story_page_pub_time page_narrow">2021-06-11 21:02:19</div><div class="story_img_container"><a href="http://img2.diglog.com/img/2021/6/b69cbe05c0bdb594113e4fa68a2b1c08.png"><img src="http://img2.diglog.com/img/2021/6/b69cbe05c0bdb594113e4fa68a2b1c08.png" class="img-fluid my_story_img" onerror="this.style.display='none'"></a></div><div class="page_narrow text-break page_content"><p>Millions of users rely on Klarna to keep their personal information safe. Security and the protection of personal information is our highest priority. We have numerous safeguards in place to protect against information leaks. Despite this, on May 27 2021, a number of our users saw some of their information exposed to other users.</p><p>数百万用户依靠Klarna保持个人信息安全。安全性和个人信息的保护是我们的最高优先级。我们有许多保障措施，以防止信息泄漏。尽管如此，在2021年5月27日，我们的许多用户看到了他们暴露于其他用户的一些信息。</p><p> The root cause of this incident is detailed below. To summarize, one of our development teams made a configuration update which included an unintentional change to how information is cached between our backend and our app. The result of this configuration error was that information belonging to different users were cached and visible to other users. We detected that something was wrong within 9 minutes, and identified the cause and disabled the app within 31 minutes.</p><p> 此事件的根本原因如下所述。总而言之，我们的一个开发团队提供了一个配置更新，其中包括如何在我们的后端和我们的应用程序之间缓存信息的无意变更。此配置错误的结果是属于不同用户的信息被其他用户缓存并可见。我们检测到9分钟内出现问题，并在31分钟内确定了该应用程序并禁用了应用程序。</p><p> In addition to mitigating the current incident, we have implemented a number of changes to prevent recurrence and reduce the impact of this type of issue, and continue to work on additional safeguards to protect personal information.</p><p> 除了减轻当前事件外，我们还实施了一些变化，以防止复发并减少这种类型的问题的影响，并继续工作额外的保障措施来保护个人信息。</p><p>   2021-05-27 11:01 We identified the situation as extremely serious, raised it as a critical incident and escalated it to senior management</p><p>   11:01我们将这种情况确定为极其严重，将其提出作为一个批判性事件，并将其升级为高级管理层</p><p> 2021-05-27 11:15-11:20 We disabled app features known to be affected by the incident to prevent further information leaks</p><p> 2021-05-27 11：15-11：20我们禁用的应用程序特征已知受事件影响，以防止进一步的信息泄漏</p><p> 2021-05-27 11:18 We identified the configuration update as the probable root cause and reverted the update</p><p> 2021-05-27 11:18我们将配置更新标识为可能的根本原因并恢复了更新</p><p>  On May 27, Klarna experienced a configuration error causing Klarna app users to see some of each other’s information.</p><p>  5月27日，Klarna经历了导致Klarna App用户的配置错误，以查看彼此的一些信息。 </p><p>  As soon as we got reports of issues, we assembled an incident management team that represented all relevant parts of the Klarna development organization. They immediately started to evaluate all recent changes made to our production environment. One of the first updates identified as a potential cause was a change to our Content Delivery Network (CDN) configuration.</p><p>一旦我们收到问题的报告，我们就会组装一个事件管理团队，代表了Klarna发展组织的所有相关部分。他们立即开始评估对我们的生产环境所做的所有最新变化。标识为潜在原因的第一个更新之一是对我们内容传递网络（CDN）配置的更改。</p><p>  Verified in logs that calls to our backend had been cached in an unexpected way during the time period.</p><p>  在时间段内以意想不到的方式验证了对我们后端调用的日志中验证。</p><p> Consulting documentation and experts, it was clear that the cache change would without a doubt result in the observed erroneous behavior.</p><p> 咨询文件和专家，很明显缓存变化毫无疑问导致观察到的错误行为。</p><p> This had us conclude that the CDN configuration update was the root cause, and the actions we took during the afternoon were based on that now confirmed hypothesis.</p><p> 这让我们得出结论，CDN配置更新是根本原因，我们在下午在下午采取的行动是基于现在确认的假设。</p><p>  A Klarna team had prepared a CDN configuration update as part of a project that aimed to improve the visibility for the user of where a particular device / account was used.</p><p>  Klarna团队已准备好CDN配置更新作为项目的一部分，该项目旨在提高使用特定设备/帐户的用户的用户的可见性。</p><p> This configuration change had been written by an authorized engineer in one team, consulting but misinterpreting vendor documentation. The change was then reviewed by three other authorized engineers in three separate teams, according to normal processes. None of them spotted the mistake in the configuration update.</p><p> 此配置更改由一个团队中的授权工程师编写，咨询但误解供应商文档。然后，根据正常流程，三个其他授权工程师在三个单独的团队中审查了这一变化。他们都没有发现配置更新中的错误。</p><p> Automated tests did not cover verifying the cache configuration. The configuration change was an unintended side effect and part of a larger change.</p><p> 自动测试没有覆盖验证缓存配置。配置变化是一个意外的副作用，部分更大的变化。 </p><p> The change had been deployed into an internal testing environment on May 17, and had been part of validation tests numerous times between May 17 and May 27. No erroneous behavior had been observed in the test environment.</p><p>5月17日，该更改已部署到内部测试环境中，并且在5月17日至5月27日之间核算测试的一部分。在测试环境中没有观察到错误的行为。</p><p> Our app is configured specifically to avoid inadvertent caching through the use of cache control directives found in the HTTP standard (no-cache, no-store, must-revalidate). However, the CDN configuration can at times override the app configuration. This would normally not lead to an information leak since additional protections including user-specific cache keys are enforced. The inadvertent cache configuration update unfortunately disabled those protections.</p><p> 我们的应用程序专门配置为避免通过使用HTTP标准中找到的缓存控制指令（无缓存，无存储，必须重新验证）而无意中缓存。但是，CDN配置有时可以覆盖应用程序配置。这通常不会导致信息泄漏，因为强制执行包括用户特定的缓存密钥的附加保护。不幸的是，无意的缓存配置更新禁用这些保护。</p><p> On Friday morning, May 28, based on the confirmed root cause, we deployed a new test specifically designed to check for this issue in our test environment. This test did provoke the same error, but intermittently and only after an extended period of time. This explains why our automated testing had not detected this error.</p><p> 5月28日星期五早上，根据确认的根本原因，我们部署了一个专门设计用于检查我们测试环境中的此问题的新测试。此测试确实引起了相同的错误，但间歇性地且仅在延长的时间段内才能。这解释了为什么我们的自动化测试尚未检测到此错误。</p><p> The engineers working on this update were experienced, consulted documentation and did follow established processes. The error was hard to detect in a testing environment due to reasons outlined above. All remediations will therefore have to address this from a process standpoint.</p><p> 在此更新上工作的工程师均经验丰富，咨询了文件，并遵循既定流程。由于上述原因，由于上述原因，错误难以检测到测试环境中。因此，所有补救措施都必须从过程的角度来解决这一点。</p><p>  We have numerous safeguards in place to protect personal information. Even so, keeping these safeguards strong requires continuous improvement and optimization. We have identified areas of improvement that reduce the risk and impact of similar incidents in the future.</p><p>  我们有许多保障措施来保护个人信息。即便如此，保持这些保障措施强大需要持续改进和优化。我们已经确定了改进领域，以降低未来类似事件的风险和影响。</p><p> Additional monitoring and anomaly detection processes have been implemented. These will allow us to react to unexpected changes even faster. We have also introduced several changes to ensure that cache configurations are handled with extra care. To address this, we have added several new restrictions and warnings when making configuration changes, which will force additional review before committing similar changes in the future.</p><p> 已经实施了额外的监测和异常检测过程。这些将使我们能够更快地反应意外变化。我们还介绍了几种更改，以确保通过额外的护理处理缓存配置。为了解决这个问题，我们在进行配置更改时增加了几个新的限制和警告，这将在提交未来类似的变化之前强制审查。</p><p> We will also implement additional checks in the app to validate responses from our backend. This will help prevent information disclosure, as well as mitigate the effect of unexpected changes in the environment.</p><p> 我们还将在应用程序中实施额外的检查，以验证我们的后端的响应。这将有助于防止信息披露，并减轻环境变化对环境的影响。 </p><p> We take the protection of our users’ personal information very seriously and sincerely regret that this incident ever occurred. We will do everything we can to learn from this experience while working tirelessly to regain our customers’ trust.</p><p>我们非常认真对待用户个人信息，真诚地遗憾地遗憾地遗憾。 我们将尽一切我们可以从这种经历中学习，同时孜孜不倦地努力恢复客户的信任。 </p></div><div id="story_share_this"><div class="sharethis-inline-share-buttons"></div></div><div class="text-break sotry_link page_narrow"><a target="_blank" href="https://www.klarna.com/us/blog/detailed-incident-report-incorrect-cache-configuration-leading-to-klarna-app-exposing-personal-information/">https://www.klarna.com/us/blog/detailed-incident-report-incorrect-cache-configuration-leading-to-klarna-app-exposing-personal-information/</a></div><div class="story_tags page_narrow"><button type="button" class="btn btn-light my_tag"><a href="/tag/缓存/">#缓存</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/mostem/">#mostem</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/mortem/">#mortem</a></button></div></div><div class="my_movie_list_item shadow p-3 mb-5 bg-white rounded"><button type="button" class="btn btn-link my_tag"><a href="/tag/web2.0/">#web2.0</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/google/">#google</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/设计/">#设计</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/创意/">#创意</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/摄影/">#摄影</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/游戏/">#游戏</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/图片/">#图片</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/软件/">#软件</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/视频/">#视频</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/手机/">#手机</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/广告/">#广告</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/iphone/">#iphone</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/免费/">#免费</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/网站/">#网站</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/下载/">#下载</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/windows/">#windows</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/微软/">#微软</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/apple/">#apple</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/blog/">#blog</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/firefox/">#firefox</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/苹果/">#苹果</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/音乐/">#音乐</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/博客/">#博客</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/wordpress/">#wordpress</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/恶搞/">#恶搞</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/艺术/">#艺术</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/qq/">#qq</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/web/">#web</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/工具/">#工具</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/分享/">#分享</a></button></div></div></div><div id="my_footer"><div class=""><a href="/tags/">tags</a> <a href="/users/">users</a></div>&copy;2012-2021 diglog.com </div></div></body></html>