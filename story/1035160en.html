<!doctype html><html lang="zh-hans"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>对经典的MK4116 16K位DRAM芯片进行逆向工程</title><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"><link rel="stylesheet" href="/img/css.css?random="><link data-rh="true" rel="icon" href="/img/favicon.ico"/><script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?03c1a0f31299b4a2fbb83c34d6beaac9";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script><script data-ad-client="ca-pub-6067137220025946" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script type="text/javascript" src="https://platform-api.sharethis.com/js/sharethis.js#property=5effb96910009800120b8d4d&product=inline-share-buttons" async="async"></script></head><body><div id="my_header"><div class="container"><nav class="navbar navbar-expand-lg"><a class="navbar-brand" href="/"><img alt="diglog" src="/img/logo.v1.gif" class="rounded-sm"></a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarNavAltMarkup"><div class="navbar-nav"></div></div></nav></div></div><div class="container"><div id="my_content"><h1 class="page_narrow">对经典的MK4116 16K位DRAM芯片进行逆向工程</h1><div class="row"><div class="col-lg-12 col-12"><div class="my_story_list_item shadow p-3 mb-5 bg-white rounded"><div class="story_page_pub_time page_narrow">2020-11-15 01:53:10</div><div class="story_img_container"><a href="http://img2.diglog.com/img/2020/11/12daea173208e336e4da0bc216649283.jpeg"><img src="http://img2.diglog.com/img/2020/11/12daea173208e336e4da0bc216649283.jpeg" class="img-fluid my_story_img" onerror="this.style.display='none'"></a></div><div class="page_narrow text-break page_content"><p>Back in the late 1970s, the most popular memory chip was Mostek&#39;s MK4116, holding a whopping (for the time) 16 kilobits.It provided storage for computers such as the Apple II, TRS-80, ZX Spectrum, Commodore PET, IBM PC, and Xerox Alto  as well as video games such as Defender and Missile Command.To see how the chip is implemented I opened one up and reverse-engineered it.I expected the circuitry to be similar to other chips of the era, using standard NMOS gates, but it was muchmore complex than I expected, built from low-power  dynamic logic.The MK4116 also used advanced manufacturing processes to fit 16,384 high-density memory cells on the chip.  1  2</p><p>早在20世纪70年代末，最流行的存储芯片就是Mostek&39；MK4116，当时的存储容量高达16千位。它为Apple II、TRS-80、ZX Spectrum、Commodore PET、IBM PC和Xerox Alto等计算机以及视频游戏(如防御者和导弹指挥部)提供存储。为了了解芯片是如何实现的，我打开了一个芯片，并对其进行了反向工程。我本以为电路会类似于那个时代的其他芯片，使用标准的NMOS门，但它比我想象的要复杂得多。1%2。</p><p> I created the die photo below from multiple microscope images.The white lines are the metal wiring on top of the chip, while the silicon underneath appears dark red.The two large rectangular regions are the 16,384 memorycells, arranged as a 128×128 matrix split in two.In between the two memory arrays are the amplifiers and selection circuits.The control and interface circuitry is at the left and right, connected to the external pins via tiny bond wires.</p><p>我根据多张显微镜图像制作了下面的芯片照片。白线是芯片顶部的金属布线，而下面的硅显示为暗红色。两个大的矩形区域是16,384个存储单元，排列成一个128×128的矩阵，一分为二。在两个存储阵列之间是放大器和选择电路。控制和接口电路在左右两边，通过微小的焊线连接到外部引脚。</p><p>  In dynamic RAM, each bit is stored in a capacitorwith the bit&#39;s value, 0 or 1, represented by the voltage on the capacitor.  3The advantage of dynamic RAM is that each memory cell is very small, so a lot of data can be stored on one chip.  4The downside of dynamic RAM is that the charge on a capacitor leaks away after a few milliseconds.To avoid losing data, dynamic RAM must be constantly refreshed: bits are read from the capacitors, amplified, and then written backto the capacitors. For the MK4116, all the data must be refreshed every two milliseconds.</p><p>在动态RAM中，每个位都存储在电容中，位的值0或1由电容器上的电压表示。3动态RAM的优点是每个存储单元非常小，因此可以在一个芯片上存储大量数据。4动态RAM的缺点是电容器上的电荷在几毫秒后就会泄漏。为了避免丢失数据，动态RAM必须不断刷新：从电容器读取位，放大，然后写回电容器。对于MK4116，所有数据必须每隔两毫秒刷新一次。</p><p> The diagram below illustrates four of the 16,384 memory cells.Each memory cell has a capacitor, along with a transistor that connects the capacitor to the associated bit line.To read or write data, a row select line is energized, turning on the transistors in that row.The row&#39;s capacitors are connected to the bit lines, allowing the bits in that row to be accessed.</p><p>下图显示了16,384个存储单元中的4个。每个存储单元都有一个电容器，以及一个将电容器连接到相关位线的晶体管。为了读取或写入数据，需要给行选择线通电，使该行中的晶体管导通。行的电容器连接到位线，允许访问该行中的位。</p><p>  One of Mostek&#39;s key innovations was to multiplex the address pins.  6Earlier memory chips used a separate pin for each address bit; as memory sizes increased, so did the number of address pins.This forced Intel&#39;s  4096-bit memory chip, for instance, to use a large, more costly 22-pin package.  5Mostek cut the number of address pins in half by using each address pin twice, first for a &#34;row&#34; address, and then a &#34;column&#34; address.This approach became the industry standard, allowing memory chips to fit into inexpensive 16-pin packages.</p><p>Mostek的关键创新之一是多路复用地址引脚。6早期的内存芯片对每个地址位使用单独的管脚；随着内存大小的增加，地址管脚的数量也随之增加。例如，这迫使英特尔的4096位内存芯片使用更大、更昂贵的22管脚封装。5Mostek将每个地址引脚使用两次，将地址引脚数量减半，第一次是针对行地址，然后是列地址。这一方法成为行业标准，使存储芯片可以放入廉价的16针封装中。</p><p> Externally, the chip stores a single bit for 16,384 different addresses. (Typically, eight of these chips were used in parallel to store bytes.)Internally, however, the chip is implemented as a 128×128 matrix of storage cells.The row address selects a row of 128 cells  7 and then the column address selects one of these 128 cells to read or write.  8Meanwhile, the entire row of 128 cells is refreshed by amplifying the signals and storing them back in the capacitors.</p><p>在外部，该芯片存储16,384个不同地址的单个位。(通常，这些芯片中的8个被并行使用来存储字节。)然而，在内部，芯片被实现为128×128个存储单元的矩阵。行地址选择128个单元7的行，然后列地址选择这128个单元中的一个进行读或写。同时，通过放大信号并将它们存储回电容器来刷新整行128个单元。</p><p> The 4116 die with key blocks labeled. Most of the memory cell area has been cut out.</p><p>4116的模具上标有密钥块。大部分存储单元区都被切割掉了。</p><p> The die image above is labeled with the main functional blocks.  9The chip&#39;s 16 pins are labeled around the perimeter,  10 including the seven address pins (A0-A6).The Row Address Strobe pin (RAS) is used to indicate the row address is ready, while the Column Address Strobe pin (CAS)indicates that the column address is ready.The two memory arrays are in the center; I&#39;ve cut out most of the cells to keep the diagram compact.The column select circuitry and sense amplifiers are between the two memory arrays.At the right, the row decode circuitry selects a row based on the address pins, while the column address circuitrybuffers the address for the column select circuitry.At the left, the clock circuits generate the chip&#39;s timing pulses, triggered by the RAS, CAS, and WRITE pins.Finally, the Data Out and Data In pins provide access to the selected data bit.</p><p>上面的芯片图像标有主要功能块。芯片的16个引脚被标记在周边，10个引脚包括7个地址引脚(A0-A6)。行地址选通引脚(RAS)用于指示行地址已准备好，而列地址选通引脚(CAS)用于指示列地址已准备好。两个存储器阵列位于中央；I&#39；为了保持图的紧凑，我们去掉了大部分单元。列选择电路和读出放大器位于两个存储器阵列之间。在右边，行译码电路根据地址引脚选择行，而列地址电路缓冲列选择电路的地址。在左边，时钟电路产生芯片的定时脉冲，由RAS、CAS和写入引脚触发。最后，数据输出和数据在引脚中提供访问</p><p>  The key to the DRAM chip is the memory storage cell, designed to be as compact as possible.The highly magnified photo below shows some of the storage cells, densely packed together.It&#39;s a bit hard to visualize what&#39;s going on because the chip is constructed from multiple layers.The bottom layer is the grayish silicon die.On top of the silicon are two layers of polysilicon, a special type of deposited silicon used for transistor gates,capacitors, and wiring.The top layer of the chip is the metal wiring, which was removed for this photo.The photo shows three bit lines in the silicon, with bulb-shaped storage cells connected on either side.Vertical strips of polysilicon (poly 1) over the storage cells implement capacitors: the silicon forms the lower plate, while the polysilicon forms the upper plate.The second layer of polysilicon (poly 2) is arranged in diagonal regions to implement the selection transistors, wheresquare notches in the poly 1 layer allow the poly 2 layer to approach the silicon.</p><p>DRAM芯片的关键是存储器存储单元，设计得尽可能紧凑。下面这张高度放大的照片显示了一些存储单元，它们密集地堆积在一起。很难想象是什么东西。这是因为芯片是由多层构成的。最底层是灰色的硅晶片。在硅片的顶部是两层多晶硅，这是一种用于晶体管栅极、电容器和布线的特殊类型的淀积硅。芯片的顶层是金属布线，在这张照片中去掉了金属布线。照片显示了硅片中的三条位线，两边都连接着灯泡状的存储单元。存储单元上方的垂直多晶硅条带(Poly1)实现了电容器：硅形成了较低的电容层。而多晶硅形成上平板。第二层多晶硅(多晶硅2)设置在对角区域以实现选择晶体管，其中多晶硅1层中的方形凹槽允许多晶硅2层接近硅。</p><p>  The cross-section diagram below shows the three-dimensional, layered structure of a memory cell.At the bottom is the silicon (brown); the bit line (dark brown) is made from doped silicon.Above the silicon are the two polysilicon layers (red) and the metal layer (purple), separated by insulating silicon dioxide (gray).At the far left, the poly 1 layer and underlying silicon form a capacitor.In between the capacitor and the bit line, the poly 2 layer forms the gate of the transistor. At the left, the poly 2 layeris connected to the metal of the word line, which turns the transistor on, connecting the capacitor to the bit line.</p><p>下面的截面图显示了存储单元的三维分层结构。底部是硅(棕色)；位线(深棕色)是由掺杂的硅制成的。硅的旁边是由绝缘二氧化硅(灰色)隔开的两层多晶硅层(红色)和金属层(紫色)。在最左边，多晶硅1层和下面的硅形成电容。在电容器和位线之间，多晶硅2层形成晶体管的栅极。在左边，多晶硅2层连接到字线的金属，使晶体管导通，将电容器连接到位线。</p><p> Cross-section structure of a storage cell. Based on  16K—The new generation dynamic RAM.</p><p>存储单元的横截面结构。基于16K-新一代动态RAM。</p><p> The diagram below illustrates how bits are addressed in the storage matrix. The arrangement is someone confusing because columns of cells are offset and interlocked like zippers.A row select line is connected to the centers of diagonal poly 2 regions, so each region controls two transistorson neighboring bit lines.(For instance, in the upper left, the poly region connected to row select 0 forms transistors 0A and 0B.)The result is that each row select line activates 128 cells, one for each bit line in a staggered arrangement.</p><p>下图说明了如何在存储矩阵中寻址比特。这种排列有些令人困惑，因为单元列像拉链一样错开和互锁。行选择线连接到对角线Poly2区域的中心，因此每个区域控制相邻位线上的两个晶体管。(例如，在左上角，连接到行选择0的多晶区形成晶体管0A和0B。)结果是，每条行选择线激活128个单元，交错排列中的每条位线对应一个单元。(例如，在左上角，连接到行选择0的多晶区形成晶体管0A和0B。)结果是，每条行选择线激活128个单元，每个单元对应一个交错排列的位线。</p><p> Arrangement of bits in the matrix. The transistors are labeled according to their corresponding row and bit line.</p><p>矩阵中位的排列。根据其对应的行线和位线来标记晶体管。</p><p>  A key feature of the MK4116 memory chip is that it uses almost no power when it is sitting idle.Although it consumes 462 milliwatts when active, it uses just 20 milliwatts in standby mode.Although low-power circuitry is straightforward to build with modern CMOS technology, the 4116 used earlier NMOS transistors.Most NMOS integrated circuits constructed logic gates with load transistors, a simple technique with the disadvantage ofwasting power.Instead, the MK4116 memory chip uses dynamic logic, which is considerably more complex but saves power while idle.</p><p>MK4116存储芯片的一个主要特点是，它在空闲时几乎不耗电。虽然它在激活时消耗462毫瓦，但在待机模式下只消耗20毫瓦。虽然低功耗电路是用现代CMOS技术直接构建的，但4116使用早期的NMOS晶体管。大多数NMOS集成电路用负载晶体管构建逻辑门，这是一种简单的技术，缺点是浪费功率。相反，MK4116存储芯片使用的是早期的NMOS晶体管。MK4116存储芯片使用的是负载晶体管，这是一种简单的技术，但它的缺点是浪费功率。MK4116的存储芯片在待机模式下只消耗20毫瓦的功率。虽然低功耗电路很容易用现代CMOS技术建造，但4116使用的是早期的NMOS晶体管。</p><p> A typical dynamic logic gate (below) operates in two phases.In the first phase, a clock signal turns on the upper transistor, precharging the output to +12 volts, the &#34;1&#34; state.The upper transistor then turns off, but the output remains high due to the capacitance of the wire.In the second phase, the lower transistors can pull the output low.In particular, if either input is 1, the corresponding transistor turns on and pulls the output low,so the circuit implements a NOR gate.This circuit doesn&#39;t consume any static power, just a small current to charge the wire capacitance when switching.(The inputs must be carefully timed so they don&#39;t overlap with the precharge clock.)The use of dynamic circuitry makes the 4116 much more complex than it would be otherwise since the gates are controlledby clock signals, which need to be generated.</p><p>典型的动态逻辑门(下图)分两个阶段运行。在第一阶段，时钟信号打开上三极管，将输出预充电到+12伏，即状态。然后，上三极管关闭，但由于导线的电容，输出保持高。在第二阶段，下三极管可以拉低输出。特别是，如果输入为1，相应的三极管打开并拉低输出，因此电路实现了或非门。不消耗任何静态电源，只需很小的电流就可以在切换时给导线电容充电。(输入必须仔细计时，以免与预充电时钟重叠。)动态电路的使用使4116比不使用动态电路要复杂得多，因为栅极是由时钟信号控制的，而时钟信号需要产生。</p><p>   The purpose of the row-select circuitry is to decode the 7 address bits and energize the corresponding row select line(out of 128) to read one row of memory.In the first step, 32 5-input NOR gates decode address bits A0 through A4.These NOR gates are implemented in the compact circuit shown below.Each NOR gate takes a different combination of non-inverted and inverted address bits and matches a particular 5-bit address.These NOR gates use dynamic logic, first pulled high and then discharged to ground, except for the selected address whichremains high.Next, each NOR output is split into four, based on A5 and A6.The result is that one of 128 row select lines is activated, turning on the transistors for that row in the matrix.</p><p>在第一步中，32个5输入NOR门解码地址位A0到A4。这些NOR门在下面所示的紧凑电路中实现。每个NOR门采用不同的非反相和反相地址位的组合，并且匹配特定的5位地址。这些NOR门使用动态逻辑，首先拉高，然后放电到地，除了。基于A5和A6，结果是128条行选择线中的一条被激活，打开矩阵中该行的晶体管。</p><p> The NOR gates are implemented in several compact blocks; one block of three NOR gates is shown below.Each NOR gate is a horizontal stripe of doped silicon, with ground above and below it.Each NOR gate has transistors (pink stripes) connected to ground alternating above and below it.A transistor will pull the NOR gate low if the connected address line is high.The precharge transistors at the left pull the NOR gates to +12 volts, while the output control transistors control theflow of the decoded outputs to the rest of the circuitry.</p><p>NOR门是在几个紧凑的模块中实现的；下面显示了一个由三个NOR门组成的块。每个NOR门都是一条掺杂硅的水平条带，上面和下面都有地。每个NOR门都有晶体管(粉红色条)交替地连接到它上面和下面。如果连接的地址线是高的，晶体管将NOR门拉低。左边的预充电晶体管将NOR门拉到+12伏，而输出控制晶体管控制解码输出到电路其余部分的流动。</p><p> Three NOR gates in the row decoder. The vertical yellow strips indicate metal wiring, removed for this photo.</p><p>行解码器中有三个或非门。垂直的黄色条带表示金属布线，在这张照片中去掉了。</p><p> The small greenish blobs at the end of a transistor gate (pink stripe) are connections (vias) between a transistor gate and anaddress line.The address lines are represented as vertical yellow stripes (since the metal layer was removed).Note that each transistor gate has an address line at the right and the inverted address line at the left; thus, theNOR gates all have the same basic layout, but with the contacts changed to match a particular address.For instance, the upper NOR gate has transistors connected to A0, A2, A1, A3, and A4, so it will be active for address 00000;any other address will pull it low.</p><p>位于晶体管栅极末端的小的绿色斑点(粉色条纹)是晶体管栅极和地址线之间的连接(通孔)。地址线被表示为垂直的黄色条纹(因为金属层被移除)。请注意，每个晶体管栅极在右边有一条地址线，而反转的地址线在左边；因此，Thenor门都具有相同的基本布局，但是触点被改变以匹配特定的地址。例如，上面的NOR门具有连接到A0、A2、。</p><p>  The sense amplifiers are one of the most challenging parts of designing a memory chip.The job of the sense amplifier is to take the tiny voltage from a capacitor and amplify it intoa binary 0 or 1. The challenge is that even though 12 volts is stored in a capacitor, the signal from the capacitor is very small, is only 100 millivolts or so.(Because the bit line is much larger than the tiny memory cell capacitor,the capacitor causes a very small voltage swing.)  12It is critically important for the sense amplifier to operate accurately, even in the presence of noise or voltagefluctuations, because any error will corrupt the data.The sense amplifier circuit must also be compact and low power since there are 128 sense amplifiers.</p><p>读出放大器是存储芯片设计中最具挑战性的部分之一。读出放大器的工作是从电容器获取微小电压，并将其放大为二进制0或1。挑战在于，即使电容器中存储了12伏的电压，来自电容器的信号也非常小，只有100毫伏左右。(因为位线比微小的存储单元电容器大得多，所以电容器产生的电压摆动非常小。)12读出放大器的准确工作至关重要，即使在。因为任何错误都会破坏数据。由于有128个读出放大器，读出放大器电路也必须紧凑和低功耗。</p><p> The 128 sense amplifiers are in the middle of the die, between the upper and lower memory arrays.</p><p>128个读出放大器位于芯片的中间，在上部和下部存储器阵列之间。</p><p> The chip&#39;s 128 sense amplifiers, one for each column, are located between the two memory arrays as shown above.During a read, 128 values in a row are accessed in parallel and amplified by the sense amplifiers.These 128 values are then written back to refresh the values in the capacitor.For a write operation, one of the bits is updated with the new value before they are written back.</p><p>如上所述，芯片的128个读出放大器(每列一个)位于两个存储器阵列之间。在读取过程中，一行中的128个值被并行访问，并被读出放大器放大。然后，这128个值被写回以刷新电容中的值。对于写操作，其中一个位在被写回之前被更新为新值。</p><p>  Each sense amplifier (above) is a very simple circuit. It takes two inputs and compares them, pulling the lower one to 0.  13It is built from two  cross-coupled transistors, each trying to pull the other one low.Whichever transistor has the higher voltage to start with will &#34;win&#34;, forcing the other side low.  14The sense amplifier is sensitive to very small voltage differentials, allowing it to distinguish the small signals from astorage cell.</p><p>每个读出放大器(上图)都是一个非常简单的电路。它接受两个输入并对它们进行比较，将较低的一个拉到0。它是由两个交叉耦合的晶体管组成的，每个晶体管都试图拉低另一个晶体管。无论哪个晶体管一开始的电压较高，都会迫使另一个晶体管降低电压。14读出放大器对非常小的电压差很敏感，使其能够区分存储单元中的小信号。</p><p> Locating the sense amplifiers between the two memory arrays isn&#39;t arbitrary, but the key to their operation:this is the &#34;divided bit line&#34; architecture introduced in 1972.The idea is that one input to the sense amp is the voltage from the desired memory cell, while the other input isa threshold voltage from a &#34;dummy cell&#34; in the opposite memory array.Dummy cells are constructed and precharged like real memory cells except the capacitor is half-sized, so they provide a voltage midway between a 0 bit and a 1 bit.  3If the voltage from the real memory cell is lower, the sense amp outputs a 0, and if higher, it outputs a 1.</p><p>将读出放大器放置在两个存储阵列之间并不是任意的，而是它们运行的关键：这是1972年引入的分割位线架构。其想法是，读出放大器的一个输入是来自所需存储单元的电压，而另一个输入是来自相反存储阵列中的虚拟单元的阈值电压。虚拟单元的构造和预充电与真实存储单元一样，只是电容器的大小是一半，所以它们提供了中间的电压。3如果来自实际存储单元的电压较低，则读出放大器输出0，如果较高，则输出1。</p><p> Dummy cells provide the threshold voltage for deciding if a bit is 0 or 1. The dummy cells are located at the top and bottom of the memory arrays. They are on the same bit lines as real memory cells.</p><p>虚拟单元提供阈值电压，用于确定位是0还是1。虚拟单元位于存储器阵列的顶部和底部。它们位于与真实存储单元相同的位线上。</p><p> The dummy cells are located on the edges of the memory arrays, as shown above.They consist of capacitors and transistors (similar to real memory cells), but with a separate line to charge them.The advantage of the dummy cell approach is that manufacturing differences or fluctuations during operation will (hopefully)affect the real cells and dummy cells equally, so the voltage from the dummy cell will remain at the correct level todistinguish beween a 0 and a 1.Address bit A0 controls which half of the array provides real data to the bit lines and which half connects dummy cellsto the bit lines.</p><p>虚拟单元方法的优点在于，在操作期间制造差异或波动将(希望)同等地影响真实单元和虚拟单元，因此来自虚拟单元的电压将保持在正确的电平以区分0和1。地址位A0控制阵列的哪一半向位线提供真实数据，以及哪一半连接虚拟单元。虚拟单元方法的优点在于，在操作期间制造差异或波动将(希望)同等地影响真实单元和虚拟单元，因此来自虚拟单元的电压将保持在正确的电平，以区分0和1。地址位A0控制阵列的哪一半向位线提供真实数据，以及哪一半连接虚拟单元。地址位A0控制阵列的哪一半向位线提供真实数据，以及哪一半连接虚拟单元。地址位A0控制阵列的哪一半向位线提供真实数据，以及哪一半连接虚拟单元。</p><p>  The purpose of the column select circuitry is to select one column out of the 128-bit row; this is the bit that isread or written.Each column select circuit is twice as wide as a memory cell, so they only decode one of 64 columns.The result is thattwo bits are selected at a time, and circuitry elsewhere selects one of the two bits.Like the row select circuitry, the column select circuitry is implemented by numerous NOR gates, each matchingone address.For column select address bits A0 through A5 select one of 64 lines, selecting two columns at a time.These two bit lines are connected to data lines transmitting the signals to the I/O circuitry.(Since the bit lines for the upper and lower halves of the matrix are separate, there are actually four bitlines selected by the column select circuit.)As with the row select circuitry, dynamic logic is used, controlled by various timing signals.Note that each NOR gate is physically split into two parts with the sense amp in the middle.</p><p>列选择电路的目的是从128位行中选择一列；每一列选择电路的宽度是存储单元的两倍，所以它们只解码64列中的一列。结果是一次选择两个位，而别处的电路选择两个位中的一个。与行选择电路一样，列选择电路由多个或非门实现，每个或非门匹配一个地址。对于列选择地址位A0到A5，选择64条线中的一条，一次选择两列。这两条位线连接在一起。对于行选择电路，列选择电路由多个或非门实现，每个或非门匹配一个地址。对于列选择地址位A0到A5，选择64条线中的一条，一次选择两列。这两条位线被连接。列选择电路实际上选择了四条位线。)与行选择电路一样，使用由各种定时信号控制的动态逻辑。注意，每个NOR门在物理上被分成两个部分，读出放大器在中间。</p><p>   The schematic below shows how the column decoder works with the sense amplifier. The diagram shows two bit lines and the top half of the column decoder and sense circuitry; it is mirrored for the lower array.At the top, the sense precharge circuit pulls all the bit lines high.At the bottom, the sense amplifiers amplify and refresh the signals as explained above.The column decoder matches a particular 6-bit address, so one of the 64 decoders will activate the associated sense selectcircuit, connecting the chip&#39;s I/O circuitry to four bit lines (two from the upper memory array as shown here and two from the lower memory array).</p><p>下面的示意图显示了列解码器如何与读出放大器一起工作。该图显示了两条位线以及列解码器和读出电路的上半部分；它被镜像到较低的阵列。在顶部，读出预充电电路将所有位线拉高。在底部，读出放大器如上所述地放大和刷新信号。列解码器匹配特定的6位地址，因此64个解码器中的一个将激活相关的读出选择电路，将芯片的I/O电路连接到四条位线(两条)。列解码器与特定的6位地址相匹配，因此64个解码器中的一个将激活相关的感测选择电路，将芯片的I/O电路连接到四条位线(两条。</p><p>  At this point, four bit lines have been selected for use and their signals are passed to the input/output circuitry;the column select circuitry only decoded 1-of-64, while there are 128 columns, and each half of the array has separatebit lines.Column address bit A6 provides the final selection between the two columns.The selected bit is sent to the data-out pin for a read.For a write, the value on the data-in pin is sent back through the appropriate wire to overwrite the value in thesense amplifier.This circuitry is implemented using dynamic logic and latches, controlled by various timing signals.Much of the circuitry is duplicated, with one copy for the upper half of the memory array and one copy for the lowerhalf.Row address bit A0 distinguishes which half of the matrix is active and which half is providing dummy data).(Note that row address bit A0 was already used to select a particular row, but the circuitry has &#34;lost track&#34;of which was the real row and which was the dummy row, so it must make the selection again.)</p><p>在这一点上，已经选择了四条位线供使用，并且它们的信号被传递到输入/输出电路；列选择电路只解码64位中的1位，而有128列，阵列的每一半都有独立的位线。列地址位A6提供两列之间的最终选择。所选位被送到数据输出管脚进行读取。对于写入，数据输入管脚上的值通过适当的导线送回以覆盖读出放大器中的值。该电路由动态逻辑和锁存器实现，并由各种时序信号控制。在许多情况下，数据输入管脚上的值被送回数据输出管脚，以覆盖读出放大器中的值。该电路使用动态逻辑和锁存器来实现，并受各种时序信号的控制。行地址位A0区分矩阵的哪一半是活动的，哪一半是提供伪数据的)。(注意，行地址位A0已经用于选择特定行，但是电路具有&#34；(丢失了其中真实行和虚拟行的跟踪，因此它必须重新进行选择。)？</p><p>  The chip requires many timing signals for the various steps in a memory operations.The memory chip doesn&#39;t use an external clock, unlike a CPU, but generates its own timing signals internally.The diagram below illustrates the clock generators, using buffers to create a delay between eachsuccessive clock output.The first set of timing signals is triggered by the row-access strobe (RAS), indicating that the computer has put the rowaddress on the address pins.The next set of timing signals is triggered by the column-access strobe (CAS), indicating the column address is on theaddress pins. Other timing signals are triggered by the WRITE pin.</p><p>芯片在内存操作中的各个步骤需要许多计时信号。与CPU不同，内存芯片不使用外部时钟，而是在内部生成自己的计时信号。下图说明了时钟生成器，使用缓冲器在每次连续的时钟输出之间创建延迟。第一组计时信号由行存取选通脉冲(RAS)触发，表示计算机已将行地址放在地址引脚上。下一组计时信号由列存取选通脉冲(CAS)触发，指示。其他定时信号由写入引脚触发。</p><p>  The real clock circuitry is much more complex than the diagram indicates, consisting of dozens of transistors in multiple chains, feeding back in complex ways to shape the pulses.(Among other things, using dynamic logic requires each buffer to have both an input that pulls it high and an input that pulls it low, forming almost a circular problem.)These gates are mostly built from large transistors, as shown below, to provide enough current to drive the circuitry,and to increase the gate delay sufficiently.The clock circuitry also uses many capacitors, probably  bootstrap loads to pull signals up sharper.I&#39;m not going to describe the clocks in detail since it&#39;s a complicated mess.</p><p>实际的时钟电路比图中显示的要复杂得多，由多个链上的几十个晶体管组成，以复杂的方式反馈以整形脉冲。(此外，使用动态逻辑要求每个缓冲器既有一个将其拉高的输入端，也有一个将其拉低的输入端，这几乎形成了一个圆形问题)。这些门大多由大晶体管组成，如下所示，以提供足够的电流来驱动电路，并充分增加栅极延迟。时钟电路还使用许多电容器，很可能是Boo型电容器。这些门主要由大晶体管组成，如下所示，以提供足够的电流来驱动电路，并充分增加栅极延迟。时钟电路还使用许多电容器，可能是Boo。我不打算详细描述这些钟，因为它是一个复杂的乱七八糟的东西。</p><p>   The chip uses surprisingly complex circuits for the address pins and the data input pin.Mostek&#39;s earlier memory chip had problems due to noise margins on the inputs, so the MK4116 uses a complex circuitan analog threshold, capacitor drive, and multiple controls and latches.</p><p>该芯片的地址管脚和数据输入管脚使用了复杂得令人惊讶的电路。Mostek早期的存储芯片由于INP上的噪声容限而出现了问题</p><p> The diagram below shows the threshold generation circuit, which generates a 1.5-volt reference. It uses many tiny transistors in series to generate the voltage level.Conceptually, it is similar to a resistor divider between power and ground to produce an output voltage.However, resistors are both power-hungry and difficult to build in integrated circuits, so transistors are used instead.Since this circuit is always active, the designers needed to minimize its current; this was achieved by using manytransistors in series.</p><p>下图显示了产生1.5V基准电压的阈值产生电路。它使用许多微小的晶体管串联来产生电压电平。概念上，它类似于电源和地之间的电阻分配器来产生输出电压。但是，电阻器既耗电又难于在集成电路中构建，所以使用晶体管来代替。由于这个电路总是有效的，所以设计者需要最小化它的电流；这是通过串联许多晶体管来实现的。</p><p> The voltage reference used for the address pins. (×18 indicates 18 transistors in series, for instance.)</p><p>用于地址引脚的基准电压源。(例如，×18表示串联18个晶体管。)。</p><p> The voltage on the input pin and the threshold voltage are fed into a differential amplifier/comparator, conceptually similar to the sense amplifiers.Each side tries to pull the other side low, ending up with a 1 for the &#34;winning&#34; side and 0 for the &#34;losing&#34; side.Thus, the input is converted into a binary value.The result from the comparator is stored in a latch.Multiple timing signals gate the input signal, precharge the circuitry, and control the latch.</p><p>输入引脚上的电压和阈值电压被送入差动放大器/比较器，概念上类似于读出放大器。每一端都试图拉低另一端，结果是胜方为1，输方为0。因此，输入被转换为二进制值。比较器的结果存储在锁存器中。多个定时信号选通输入信号，对电路预充电，并控制锁存器。</p><p> The data-in circuitry: the pin, latch circuit, and voltage reference. This circuitry is in the lower-left corner of the die.</p><p>数据输入电路：引脚、锁存电路和基准电压源。该电路位于芯片的左下角。</p><p> The photo above shows the input circuit for the data-in pin. Next to the pin&#39;s bond wire is the threshold circuit and latch; the two capacitorsare the large rectangles of metal.The voltage reference circuit is next; the data-in voltage reference is similar to the address voltage reference described above.(I left the metal layer on for this photo; the polysilicon and silicon underneath is obscuredby the oxide layer.)</p><p>上图显示了数据输入引脚的输入电路。引脚焊线旁边是阈值电路和锁存；这两个电容器是金属的大矩形。下一个是电压基准电路；数据输入基准电压源类似于上面描述的地址基准电压源。(为了这张照片，我让金属层开着；下面的多晶硅和硅被氧化层遮挡住了。)(为了拍摄这张照片，我让金属层开着；下面的多晶硅和硅片被氧化层遮住了。)(为了拍摄这张照片，我让金属层开着；下面的多晶硅和硅被氧化层遮住了。)。</p><p>  This memory chip was much more complex than I expected.I studied a  simple Intel memory chip earlier so Iassumed this DRAM would be larger but not much more complicated.Instead, the MK4116 has complex circuitry with over 1000 transistors controlling it,in addition to the 16,384 transistors for the memory cells and about 1500 transistors for the column selects and sense amps.A cause of the complexity is that the design needed to optimize multiple axes: density, speed, and power efficiency.  16</p><p>这个存储芯片比我预想的要复杂得多。我之前研究了一个简单的Intel存储芯片，所以我认为这个DRAM会更大，但不会太复杂。相反，MK4116拥有复杂的电路，有超过1000个晶体管控制它，此外还有16384个用于存储单元的晶体管和大约1500个用于列选择和读出放大器的晶体管。复杂性的一个原因是设计需要优化多个轴：密度、速度和功率效率。16个。</p><p> The table below shows that each generation of DRAM chips required substantial technological changes and new developments.Memory designers don&#39;t justsit around waiting for Moore&#39;s Law to increase the memory capacity; they have to constantly develop new techniques becauseDRAM storage cells are fundamentally analog.Fortunately, DRAM designers have continued to solve memory scaling problems;16-gigabyte DRAMs  recently went into production,an amazing factor of a million larger than the 16-kilobyte M</p><p>下表显示，每一代DRAM芯片都需要实质性的技术变革和新的发展。存储器设计者不能坐等摩尔定律来增加存储器容量；他们必须不断开发新技术，因为DRAM存储单元基本上是相似的。幸运的是，DRAM设计者继续解决存储器扩展问题；16G的DRAM最近投入生产，比16千字节的MRAM高出100万倍，令人惊叹。</p><p>......</p><p>.</p></div><div id="story_share_this"><div class="sharethis-inline-share-buttons"></div></div><div class="text-break sotry_link page_narrow"><a target="_blank" href="http://www.righto.com/2020/11/reverse-engineering-classic-mk4116-16.html">http://www.righto.com/2020/11/reverse-engineering-classic-mk4116-16.html</a></div><div class="story_tags page_narrow"><button type="button" class="btn btn-light my_tag"><a href="/tag/逆向工程/">#逆向工程</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/芯片/">#芯片</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/dram/">#dram</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/电路/">#电路</a></button></div></div><div class="shadow p-3 mb-5 bg-white rounded clearfix"><div class="container"><div class="row"><div class="col-sm"><div><a target="_blank" href="/story/1035029.html"><img src="http://img2.diglog.com/img/2020/11/thumb_5fab045da87c9889b82a4bedf9fe1cbe.png" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1035029.html">Rehex-逆向工程师的十六进制编辑器</a></div><span class="my_story_list_date">2020-11-14 9:5</span></div><div class="col-sm"><div><a target="_blank" href="/story/1034995.html"><img src="http://img2.diglog.com/img/2020/11/thumb_d76cfaec5b1ce4b6d8f955ea9d3dfc66.jpg" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1034995.html">逆向工程中的心理战</a></div><span class="my_story_list_date">2020-11-14 8:57</span></div><div class="col-sm"><div><a target="_blank" href="/story/1033948.html"><img src="http://img2.diglog.com/img/2020/11/thumb_1a2a6e6cee6739506e0c8d6c85e8616a.jpeg" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1033948.html">对Intel 8008处理器中的超前进位电路进行逆向工程</a></div><span class="my_story_list_date">2020-11-9 7:41</span></div><div class="col-sm"><div><a target="_blank" href="/story/1033946.html"><img src="http://img2.diglog.com/img/2020/11/thumb_1a2a6e6cee6739506e0c8d6c85e8616a.jpeg" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1033946.html">对Intel 8008处理器中的超前进位电路进行逆向工程</a></div><span class="my_story_list_date">2020-11-9 7:41</span></div></div></div></div><div class="my_movie_list_item shadow p-3 mb-5 bg-white rounded"><button type="button" class="btn btn-link my_tag"><a href="/tag/web2.0/">#web2.0</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/google/">#google</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/设计/">#设计</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/游戏/">#游戏</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/创意/">#创意</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/apple/">#apple</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/苹果/">#苹果</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/摄影/">#摄影</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/软件/">#软件</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/美国/">#美国</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/iphone/">#iphone</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/图片/">#图片</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/手机/">#手机</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/视频/">#视频</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/广告/">#广告</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/免费/">#免费</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/谷歌/">#谷歌</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/网站/">#网站</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/windows/">#windows</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/微软/">#微软</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/下载/">#下载</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/firefox/">#firefox</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/音乐/">#音乐</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/linux/">#linux</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/blog/">#blog</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/博客/">#博客</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/程序/">#程序</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/艺术/">#艺术</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/web/">#web</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/wordpress/">#wordpress</a></button></div></div></div><div id="my_footer"><div class=""><a href="/tags/">tags</a> <a href="/users/">users</a></div>&copy; 2020 diglog.com </div></div></body></html>