<!doctype html><html lang="zh-hans"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>了解围棋中的本地界面设计</title><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"><link rel="stylesheet" href="/img/css.css?random="><link data-rh="true" rel="icon" href="/img/favicon.ico"/><script data-ad-client="ca-pub-6067137220025946" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script type="text/javascript" src="https://platform-api.sharethis.com/js/sharethis.js#property=5effb96910009800120b8d4d&product=inline-share-buttons" async="async"></script>
<script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?03c1a0f31299b4a2fbb83c34d6beaac9";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script></head><body><div id="my_header"><div class="container"><nav class="navbar navbar-expand-lg"><a class="navbar-brand" href="/"><img alt="diglog" src="/img/logo.v1.gif" class="rounded-sm"></a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarNavAltMarkup"><div class="navbar-nav"></div></div></nav></div></div><div class="container"><div id="my_content"><h1 class="page_narrow">了解围棋中的本地界面设计</h1><div class="row"><div class="col-lg-12 col-12"><div class="my_story_list_item shadow p-3 mb-5 bg-white rounded"><div class="story_page_pub_time page_narrow">2020-07-04 00:54:31</div><div class="story_img_container"><a href="http://img.diglog.com/img/2020/7/bb0aaa1ccebe7f46095c62359006fe92.jpeg"><img src="http://img.diglog.com/img/2020/7/bb0aaa1ccebe7f46095c62359006fe92.jpeg" class="img-fluid my_story_img" onerror="this.style.display='none'"></a></div><div class="page_narrow text-break page_content"><p>甚至不要看代码。先看看这个。你要按照非常具体的顺序来看代码，心里要有非常具体的东西，所以不要作弊！</p><p>人们对接口包或某种可共享接口的渴望并不少见。这通常是你在其他语言中处理界面的方式，这也是我开始做事情的方式，当我搬到Go的时候。</p><p>这在纸面上是有意义的。Dry(不要重复自己)指示您应该将公共代码移动到公共区域以供重用。如果你有很多东西需要使用这个界面，你为什么不用呢？</p><p>这个示例包含几个包含一些简单代码的超级基本软件包，重要的不是运行它们时它们实际做了什么，重要的是它们是如何构建的，以及您从高层次上阅读它们可以理解它们什么。</p><p>这些包包含一些处理用户的功能和一个计分器-用户，可用于某种排行榜。也许是游戏，也许是社交网络，也许是美宝莲。无关紧要。您可以从数据库中获取用户信息、奖励积分和顶级用户。此外，您还可以向用户发送通知，可能会为他们提供代码或促销/奖励等信息。</p><p>db包处理所有实际的数据库命令。它完全是模拟的，因为实现并不重要。您可以想象在这里编写一些实际的数据库访问代码。</p><p>通知包负责向用户发送通知。也许它是一个电子邮件，一个推送通知；再说一次，实现在这里并不重要。请注意，内部代码会做一些很酷的事情。</p><p>处理程序包包含一些构建HTTP处理程序的函数，然后可以在服务器中使用这些处理程序。我没有深入到真正实现服务器的程度，但这在这里应该不重要。在这种情况下，我们只需要db包。</p><p>排行榜软件包有一些功能，可以抓取顶级用户并向他们发送通知。这不是特别令人兴奋，但足以需要数据库和通知。</p><p>cmd中有一个基本的主干。请转到cmd来演示如何将数据库和通知实例传递给处理程序和排行板比特。</p><p>你还没看代码，对吧？太棒了。我就知道我可以信任你。</p><p>假设你刚刚被雇佣，一个叫埃弗特拉斯的混蛋留下了一些优雅的代码，你现在负责维护和添加功能。这就是你现在的生活。祝贺你。</p><p>所以你第一天坐在办公桌前，然后.。你从哪里开始呢？</p><p>我要问你的第一个问题是：你会先看哪一个套餐？</p><p>如果没有文档，检查main.go可能是个不错的选择。然后，您会看到正在使用的主要包，以及处理程序和排行榜似乎是如何使用数据库和传递给它们的通知来做一些高级工作的。</p><p>在这一点上，我强烈认为你应该进入操纵者或排行榜。直接进入数据库或通知不会告诉你系统做了什么，只会告诉你它是如何与一些较低级别的资源交互的。</p><p>我们选排行榜吧，因为我喜欢。好的，您现在可以查看代码了。到这儿来。</p><p>等等，什么？您看到传入了一个数据库和一个通知实例，这是什么？</p><p>乔伊，就是这样。因为这个函数准确地告诉您让排行榜正常工作需要哪些功能！</p><p>键入TopUserGetter interface{GetTopUsers(CTX上下文。context，count int)([]*db.。User，Error)}键入TopScoreNotifier接口{NotifyTopScore(CTX上下文。Context，id String，Score int)Error}Funcc New(topUserGetter TopUserGetter，topScoreNotifier TopScoreNotifier)*Leaderboard{//.}。</p><p>想象一下，如果一个叛逆的C#编码器提供了一些IDB接口，其中包含50个不同的函数签名，但所有需要的排行榜都是这个。你怎么知道的？你必须仔细检查所有的代码和跟踪使用了哪些调用。一点也不好玩。如果最初的目的是让LeaderBoard只用于建筑目的，但IDB上有这个简洁的AwardPoints功能，并且有使用它的诱惑力，由此产生的公关会让高级开发人员哭泣，因为他们根本就不是这个意思。现在谁才是那个混蛋呢？</p><p>关键是，这些界面本身就是文档。它们确切地告诉您排行榜需要对外部世界做什么，这对于保持代码的整洁和极大地减少维护项目所需的部落知识是非常棒的。</p><p>当您编写代码并积极维护它时，很容易将某些代码正在做的事情视为理所当然。但是，您应该经常后退一步，考虑一下对于以前从未接触过您的代码的人来说，您的代码是什么样子的。每当你手头上有工具可以减轻进来的人的精神负担时，使用它们可能是个好主意。</p><p>看到这个模拟有多简单了吗？当我们只需要模拟更大整体中的一小部分时，模拟本身是完全可管理的，并且使我们可以很容易地清晰地设置我们想要测试的任何场景。</p><p>等等，我听到你说。如果我们的接口包还包括用于测试目的的模拟实现，该怎么办？那样的话，我们就不需要重写任何嘲弄了！美洲开发银行万岁！</p><p>起初，这听起来完全合理，是的。问题是，嘲弄将很快开始增长，增长。因为不同的包需要设置特定的测试场景，所以您将开始添加奇怪的配置，以便在模拟中以某种方式进行设置。然后突然你意识到你的模拟已经变得足够复杂，需要它自己的测试，因为调整一些东西突然破坏了依赖于模拟的实际测试，而且.。嗯。我已经走上那条路了，从我的错误中吸取教训。</p><p>像这样的小的、瘦的、自给自足的嘲弄最终可能会在某种程度上被复制，而这并不总是像你所能做到的那样枯燥。但考虑一下权衡。</p><p>现在您已经重新考虑了自包含接口，现在来看一下代码的其余部分。我到处都加了评论，想对你说教，别担心。操控是很好的下一步。</p><p>当您开始查看数据库代码时，请注意其中有一些其他软件包尚未使用的Stuffin。你不需要知道数据库可以做所有这些事情。您只需担心这些包需要db来做什么。这种心态使您可以创建更独立、更易于理解的代码。</p><p>Go接口不像C#或Java接口那样工作。它们允许您非常清楚地声明所需的依赖关系，这带来了一些您可以从其他语言中轻松获得的巨大好处。不要做一个干巴巴的狂热者来对抗这件事。拥抱它吧！</p></div><div id="story_share_this"><div class="sharethis-inline-share-buttons"></div></div><div class="text-break sotry_link page_narrow"><a target="_blank" href="https://github.com/Evertras/go-interface-examples/tree/master/local-interfaces">https://github.com/Evertras/go-interface-examples/tree/master/local-interfaces</a></div><div class="story_tags page_narrow"><button type="button" class="btn btn-light my_tag"><a href="/tag/设计/">#设计</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/了解/">#了解</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/local/">#local</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/代码/">#代码</a></button></div></div><div class="shadow p-3 mb-5 bg-white rounded clearfix"><div class="container"><div class="row"><div class="col-sm"><div><a target="_blank" href="/story/1009640.html"><img src="http://img.diglog.com/img/2020/7/thumb_25443bc7201698aa4e68158f3eadc20c.png" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1009640.html">微软宣布新的Windows 10开始菜单设计，更新了Alt-Tab</a></div><span class="my_story_list_date">2020-7-3 18:16</span></div><div class="col-sm"><div><a target="_blank" href="/story/1009447.html"><img src="http://img.diglog.com/img/2020/7/thumb_99e5aee66303065c97b732cc0dd1a03e.jpeg" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1009447.html">书评：软件设计哲学</a></div><span class="my_story_list_date">2020-7-2 17:35</span></div><div class="col-sm"><div><a target="_blank" href="/story/1009384.html"><img src="http://img.diglog.com/img/2020/7/thumb_a3aa24356e347e5db9d222a2b07dfaa3.jpg" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1009384.html">俄罗斯人设计了一个绝妙的老虎机作弊-赌场没有修复</a></div><span class="my_story_list_date">2020-7-2 6:28</span></div><div class="col-sm"><div><a target="_blank" href="/story/1009095.html"><img src="http://img.diglog.com/img/2020/7/thumb_35754e31ec80760c693026ff99c5fb91.png" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1009095.html">复制。它正在雇佣前端、全堆栈和设计人员来彻底改变计算</a></div><span class="my_story_list_date">2020-7-1 1:14</span></div></div></div></div><div class="my_movie_list_item shadow p-3 mb-5 bg-white rounded"><button type="button" class="btn btn-link my_tag"><a href="/tag/web2.0/">#web2.0</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/google/">#google</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/设计/">#设计</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/创意/">#创意</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/摄影/">#摄影</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/游戏/">#游戏</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/图片/">#图片</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/软件/">#软件</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/视频/">#视频</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/手机/">#手机</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/广告/">#广告</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/apple/">#apple</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/iphone/">#iphone</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/网站/">#网站</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/免费/">#免费</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/下载/">#下载</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/windows/">#windows</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/微软/">#微软</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/firefox/">#firefox</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/苹果/">#苹果</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/blog/">#blog</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/音乐/">#音乐</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/博客/">#博客</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/wordpress/">#wordpress</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/恶搞/">#恶搞</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/艺术/">#艺术</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/qq/">#qq</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/web/">#web</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/谷歌/">#谷歌</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/工具/">#工具</a></button></div></div></div><div id="my_footer"><div class=""><a href="/tags/">tags</a> <a href="/users/">users</a></div>&copy;2012-2021 diglog.com </div></div></body></html>