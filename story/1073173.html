<!doctype html><html lang="zh-hans"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>菱形状态（编程语言）</title><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"><link rel="stylesheet" href="/img/css.css?random="><link data-rh="true" rel="icon" href="/img/favicon.ico"/><script data-ad-client="ca-pub-6067137220025946" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script type="text/javascript" src="https://platform-api.sharethis.com/js/sharethis.js#property=5effb96910009800120b8d4d&product=inline-share-buttons" async="async"></script>
<script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?03c1a0f31299b4a2fbb83c34d6beaac9";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script></head><body><div id="my_header"><div class="container"><nav class="navbar navbar-expand-lg"><a class="navbar-brand" href="/"><img alt="diglog" src="/img/logo.v1.gif" class="rounded-sm"></a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarNavAltMarkup"><div class="navbar-nav"></div></div></nav></div></div><div class="container"><div id="my_content"><h1 class="page_narrow">菱形状态（编程语言）</h1><div class="row"><div class="col-lg-12 col-12"><div class="my_story_list_item shadow p-3 mb-5 bg-white rounded"><div class="story_page_pub_time page_narrow">2022-02-14 22:55:29</div><div class="page_narrow text-break page_content"><p>如今，Racket向用户承诺了面向语言的编程。但这个承诺有一个限制：如果你想构建一个宏可扩展语言，你的语言必须使用S表达式。这种限制是不公平的，因为告诉用户“你可以构建任何你想要的可扩展语言，只要它使用S表达式”，就像亨利福特告诉T型车买家“你的车可以是你想要的任何颜色，只要是黑色的。”我们想用一种新的编程语言来解除这个限制，同时借此机会改进Racktin向后不兼容的方式。</p><p>Rhombus是一个在Racket平台上构建宏可扩展通用编程语言的实验，该语言使用传统的表面语法和改进的库。</p><p>所谓“宏可扩展”，我们的意思是菱形用户应该能够扩展菱形的语法，就像Racket用户可以扩展Racket的语法一样。复杂的语法扩展，如对象和类系统、静态类型检查器和模式匹配，应该作为库来实现，同时仍然为其他语言中这些功能的用户提供熟悉的表面语法。</p><p>我们所说的“常规表面语法”是指对广泛使用的编程语言的用户以及熟悉基本数学符号的新手来说都是常规的。这导致我们面临以下限制：</p><p>函数调用被写成一个函数表达式，后跟一个用逗号分隔的参数列表，比如f（x，y，z）</p><p>额外的括号可以自由地用于分组和消除歧义，例如（1+2）*3，而不引入新的结构或语义。</p><p>句法形式是通过邻接而不是严格的层次结构连接起来的。例如do{}while（）和x，其中y=z。这是一种“中缀”，比算术更广泛。</p><p>所谓“改进的库”，我们的意思是菱形不应该受制于Racket的向后兼容性约束。Rhombus应该可以自由创新，为其他语言中越来越常见的功能提供新的标准库，例如genericcollections、流处理和异步编程。</p><p>“在Racket平台之上”，我们的意思是，菱形应该像其他任何东西一样是一个#lang，用户应该可以将Hombus代码和库与普通Racket代码和库进行无缝组合。我们现在的处境</p><p>一些表面语法提案已经被头脑风暴，提案分为两大类：</p><p>类C的表面语法，使用大括号和分号**来表达一般结构。杰伊的C-表情符合这一类。</p><p>类似Python的表面语法，使用冒号和缩进来传达一般结构。Jay的lexprs和Matthew的灌木丛公证就属于这一类。</p><p>另外，还有一个问题，表面语法应该负责多少语法分组，而有多少分组取决于宏系统。有三种选择：</p><p>surface语法负责所有分组。这正是传统的S表达式所处的大致位置，很多Lisp都放松了S表达式对一切的约束，让宏创建隐式分组，这已经够尴尬的了。例如，Clojure的letform基于邻接性隐式地对绑定表达式对分组，如（let[x1y2]（+xy））。Racket的关键字参数是放松此约束的类似实例。C表达式倾向于使用具有此属性的“常规表面语法”。</p><p>surface语法不负责分组。这会产生一种类似Forth的语法，其中程序只是一个简单的发音序列。这不符合我们的“常规表面语法”要求。</p><p>表面语法负责一些分组，但不是全部。这要求解析器理解程序的绑定和扩展宏，以获得程序结构的完整图片。以这种方式将令牌流的解析与宏扩展交织在一起称为enforestation，它允许宏扩展传统语言的语法。Honu研究语言是这项技术的先驱。</p><p>我们决定采用类似Python的带Enforestation的表面语法，特别是灌木状符号，作为第一个推进到下一个原型阶段的建议。这可能不是菱形项目的最终方向，但这是我们目前优先考虑的方向。我们是基于以下因素做出这一决定的：</p><p>缩进敏感度a la Python的优点是，屏幕上的可视分组与解析分组相匹配，但它也为运算符和标识符驱动的上下文敏感解析留下了大量空间。</p><p>Matthew尝试了几次实验，发现Python风格的符号最容易使用，到目前为止，他一直是primaryRhombus的实现者。</p><p>在这个阶段，对表面语法做出“正确”的决定并不是我们的目标。我们仍处于菱形项目的原型阶段。我们的目标是指出设计领域的领域，深入了解未来的挑战。因此，我们计划下一步围绕灌木丛公证建立一种语言。我们不相信灌木丛符号是完美的。尽管如此，我们相信，通过使用灌木符号构建一种工作编程语言所获得的理解将帮助我们进一步完善灌木符号。这对于确定哪些表面语法值得探索也至关重要。</p><p>要构建一门语言，我们需要编写库。我们可以研究的图书馆分为两大类：通用图书馆和专用图书馆。通用库是定义许多其他库（如类系统、并发抽象或泛型集合）的API所必需的。特殊用途的库特定于一个狭窄（但实际有用）的领域，例如文本解析或定理证明。特殊用途库更充分地利用了特定领域的语言，因此它们将让我们很好地了解Strubbery标记法与复杂DSL的配合情况。</p><p>图书馆是新的菱形贡献者加入的绝佳场所！我们仍处于早期阶段，因此探索同一问题领域的多种方法是有价值的。有各种各样的方向需要探索。以下是我们已经在不同程度上考虑的一些建议，但我们鼓励更多的建议。</p><p>菱形应该为通用集合提供公共数据结构，例如列表、集合、地图，以及用于对不同种类集合进行抽象的工具。拉克特的单态收集方式一直是一个长期的抱怨，这是少数几个社区几乎普遍同意需要改进的领域之一。</p><p>Rhombus应该提供更好、更统一的系统来定义新的数据类型和接口，而不是Racket当前的结构、类、泛型和结构类型属性的混乱。这里有很大的空间来利用灌木丛符号，尤其是如果我们要构建某种点转换器协议供宏使用的话。</p><p>注释、类型和契约。Racket的运行时契约和Typed Racket的静态类型处于动态静态正确性谱的两个极端。菱形能否占据更方便用户的中间地带？</p><p>多语言涂鸦。如果我们希望菱形库和Racket库能够无缝地互操作，我们需要一种Scribble到translatelibrary文档的方法，用于不同的表面语法。在sourcedocumentation中，这里可能也值得探索。</p></div><div id="story_share_this"><div class="sharethis-inline-share-buttons"></div></div><div class="story_tags page_narrow"><button type="button" class="btn btn-light my_tag"><a href="/tag/编程/">#编程</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/状态/">#状态</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/rhombus/">#rhombus</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/语法/">#语法</a></button></div></div><div class="shadow p-3 mb-5 bg-white rounded clearfix"><div class="container"><div class="row"><div class="col-sm"><div><a target="_blank" href="/story/1072691.html"><img src="http://img2.diglog.com/img/2022/1/thumb_b58074652294a48d1a9ab650eb0c3285.jpg" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1072691.html">C ++中的无分支编程 - 联邦派对 -  CPPCON 2021</a></div><span class="my_story_list_date">2022-1-11 8:13</span></div><div class="col-sm"><div><a target="_blank" href="/story/1072598.html"><img src="http://img2.diglog.com/img/2022/1/thumb_242abf39635cbe25fc7dda03c5ff364f.jpeg" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1072598.html">停止编程语言</a></div><span class="my_story_list_date">2022-1-10 17:19</span></div><div class="col-sm"><div><a target="_blank" href="/story/1071984.html"><img src="http://img2.diglog.com/img/2021/8/thumb_ca744160e92e40965bdb02694fdc4c53.png" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1071984.html">Redmonk 对编程语言的研究，结合 GitHub 和 Stack Overflow 的数据，显示 Java 与 Python 并列第二，而 JavaScript 仍然位居榜首</a></div><span class="my_story_list_date">2021-8-7 22:59</span></div><div class="col-sm"><div><a target="_blank" href="/story/1071637.html"><img src="http://img2.diglog.com/img/2021/8/thumb_7cf484ceeae6bc7fc2161eddc603cd15.jpg" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1071637.html">参数化编程——面向对象及超越的等式方法</a></div><span class="my_story_list_date">2021-8-6 5:41</span></div></div></div></div><div class="my_movie_list_item shadow p-3 mb-5 bg-white rounded"><button type="button" class="btn btn-link my_tag"><a href="/tag/web2.0/">#web2.0</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/google/">#google</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/设计/">#设计</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/创意/">#创意</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/摄影/">#摄影</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/图片/">#图片</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/游戏/">#游戏</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/软件/">#软件</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/视频/">#视频</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/手机/">#手机</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/广告/">#广告</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/iphone/">#iphone</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/网站/">#网站</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/免费/">#免费</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/下载/">#下载</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/windows/">#windows</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/微软/">#微软</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/苹果/">#苹果</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/blog/">#blog</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/firefox/">#firefox</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/apple/">#apple</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/音乐/">#音乐</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/博客/">#博客</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/wordpress/">#wordpress</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/恶搞/">#恶搞</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/qq/">#qq</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/艺术/">#艺术</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/web/">#web</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/工具/">#工具</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/分享/">#分享</a></button></div></div></div><div id="my_footer"><div class=""><a href="/tags/">tags</a> <a href="/users/">users</a></div>&copy;2012-2021 diglog.com </div></div></body></html>