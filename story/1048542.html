<!doctype html><html lang="zh-hans"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Flutter中的离线语音识别：否Siri，否Google和否，不是STT </title><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"><link rel="stylesheet" href="/img/css.css?random="><link data-rh="true" rel="icon" href="/img/favicon.ico"/><script data-ad-client="ca-pub-6067137220025946" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script type="text/javascript" src="https://platform-api.sharethis.com/js/sharethis.js#property=5effb96910009800120b8d4d&product=inline-share-buttons" async="async"></script>
<script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?03c1a0f31299b4a2fbb83c34d6beaac9";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script></head><body><div id="my_header"><div class="container"><nav class="navbar navbar-expand-lg"><a class="navbar-brand" href="/"><img alt="diglog" src="/img/logo.v1.gif" class="rounded-sm"></a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarNavAltMarkup"><div class="navbar-nav"></div></div></nav></div></div><div class="container"><div id="my_content"><h1 class="page_narrow">Flutter中的离线语音识别：否Siri，否Google和否，不是STT </h1><div class="row"><div class="col-lg-12 col-12"><div class="my_story_list_item shadow p-3 mb-5 bg-white rounded"><div class="story_page_pub_time page_narrow">2021-02-19 23:50:32</div><div class="story_img_container"><a href="http://img2.diglog.com/img/2021/2/2f2f72d0bb098d70fa2f52eabe4ce2a6.png"><img src="http://img2.diglog.com/img/2021/2/2f2f72d0bb098d70fa2f52eabe4ce2a6.png" class="img-fluid my_story_img" onerror="this.style.display='none'"></a></div><div class="page_narrow text-break page_content"><p>我无需告诉您有关免提移动应用在21世纪的重要性。我要告诉您的是，将其添加到Flutter项目中比想象的要容易。 Picovoice最近发布了一系列Flutter软件包，使您可以在公园散步时将脱机语音命令添加到您的移动应用程序中。不，是认真的-做完之后，您将有时间在公园里散步。</p><p> 在本教程中，我从去年无处不在的#flutterclock挑战中汲取了一些灵感，并创建了一个简单的时钟应用。 Clock应用程序是特定于域的语音控制的理想平台（即，它具有定义的命令和参数列表）。我们不需要时钟就可以理解英语的范围来为明天设置警报，我们当然也不需要将麦克风音频发送到空中的大型计算机来了解我们的意图-让我们保持简单和私人的。免提模式也是时钟应用程序的一个非常有用的补充。您可能想在双手占据厨房时设置计时器，或者在锻炼过程中启动秒表。</p><p>   尽管我以Flutter Clock挑战为灵感，但我还是决定不以实际项目为起点，因为我不想使用太多代码，并且要添加很多代码。相反，我从头开始，想到了Android Clock应用程序。</p><p>  UI非常简单：使用底部导航栏在三个不同的小部件之间切换。至于背后的代码，骨干网是一个定期功能，可更新我们的时钟并检查任何活动的警报和计时器。</p><p>   现在我们有了一个简单的时钟应用程序，让我们继续前进，看看如何向其添加离线语音AI。对于此项目，我们将需要该应用程序理解一组命令，但我们还需要一个唤醒词来告知应用程序何时收听命令。 Picovoice Platform Flutter SDK将为我们提供所需的一切，因此，通过将其添加到项目的pubspec.yaml文件中进行导入。</p><p>  接下来，我们将使用PicovoiceManager类捕获音频并将其传递到Picovoice平台。</p><p>  这里需要解压缩两件事-在构造函数中，我们为PicovoiceManager提供了两个文件和两个回调。 keywordPath和_wakeWordCallback都与豪猪唤醒词引擎相关联-平台中始终侦听特定触发短语的部分。至于contextPath和_inferenceCallback，它们与Rhino语音转意图引擎有关，后者将尝试对唤醒字后面的命令进行解密。如果我们此时尝试启动该应用程序，由于缺少关键字和上下文文件，Picovoice将无法初始化-这是我们的下一个任务。现在，让我们转到Picovoice控制台，为我们的应用创建自定义唤醒词和命令上下文。 </p><p>Picovoice控制台为我们提供了创建符合我们需求并在所需平台上工作的语音界面所需的所有工具。当前，您可以注册一个免费的个人帐户或开始试用该企业帐户的30天。在本教程中，我们将创建一个自定义命令上下文，该上下文可以工作并针对Android和iOS进行培训。</p><p> 要创建自定义上下文，我们将单击Rhino选项卡，创建一个空上下文，然后使用内置编辑器来设计命令界面。我们的目标是创建一个简单的语法，供我们的时钟应用程序用来控制该应用程序。上下文将包含一组意图和位置。意图实际上是我们的命令短语-在我们的情况下，它们将包括诸如setTimer和setAlarm之类的项。另一方面，您可以将插槽视为变量。例如，我们的上下文将包含一个名为day的广告位，其值从“星期一”到“星期日”，“今天”和“明天”。在我们的上下文中，意图表达的示例如下：</p><p>  括号中的单词是可选的，带有美元符号的文本是我们创建的广告位。</p><p>  至于我们的口号，我们可以使用任何一种根据Apache 2.0许可免费向公众发布的Porcupine模型。您可以在豪猪Github存储库中找到这些免费的唤醒词文件。如果您想创建自定义唤醒词，则需要注册一个Enterprise控制台帐户。</p><p> 现在我们有了所需的文件，我们可以将它们引入Flutter项目并开始为我们的应用启用语音功能。</p><p>  在本文的前面，我们看到PicovoiceManager的构造函数采用了一个keywordPath和一个contextPath — keywordPath指的是豪猪模型文件的文件路径（.ppn文件扩展名），而contextPath指的是Rhino模型的文件路径。文件（.rhn文件扩展名）。现在我们有了这些必需的文件，我们将它们放入Flutter项目的asset文件夹中，并将它们作为资产添加到pubspec.yaml文件中。</p><p>  传统上，非媒体资产很难在跨平台应用程序中加载，但是幸运的是Flutter拥有资产束，我们可以使用path_provider包从中读取并提取到本地目录中。现在，我们将从前面的_initPicovoice函数中添加此文件逻辑和一些平台检测： </p><p>如果您现在启动应用程序，PicocoiceManager将初始化并开始流式传输音频。如果您尝试说唤醒词，然后从上下文中的任何命令，您将看到它们打印到调试控制台。虽然这一切都很好，但我们需要这些语音控制实际控制现在的应用程序！</p><p>  从我们的_wakecallback和_InferenceCallback中的打印命令，您可以开始制定我们要添加的代码，以解析我们将从PicociceManager接收的对象。好消息是，关键词是一个简单的切换开关，推动是一个结构化的地图对象，具有已知键，如下所示：</p><p>  这与我们必须解析完全未知和非结构化的字符串的语音到文本方法的显着对比。填写这些功能后，我们有回调，看起来像以下内容：</p><p>  如您所见，唤醒词回调只是将UI状态更改为侦听; Picovoice在内部管理豪猪和犀牛之间的交换机。在我们的应用程序的情况下，这将转动麦克风蓝，让用户知道他们可以向应用程序发出命令。</p><p> 推断需要一些附加逻辑来将推理对象转换为命令。首先，我们检查推理引擎是否理解语音短语作为其上下文中存在的命令。如果据了解，我们需要确定要执行哪个目的，然后将插槽（即命令变量）传递给相关的应用程序方法。例如，_settimer函数拍摄插槽并将它们转换为定时器持续时间：</p><p>  一旦我们填充了所有控制功能，我们应该具有完全免提和跨平台的颤动时钟，如以下视频所示：</p><p>  希望你喜欢这个教程！随时浏览并重用此处的源代码。通过访问我们的网站，GitHub或Developer文档来了解有关Picocoice和我们技术的更多信息。 </p></div><div id="story_share_this"><div class="sharethis-inline-share-buttons"></div></div><div class="text-break sotry_link page_narrow"><a target="_blank" href="https://medium.com/picovoice/offline-speech-recognition-in-flutter-no-siri-no-google-and-no-its-not-speech-to-text-c960180e9239">https://medium.com/picovoice/offline-speech-recognition-in-flutter-no-siri-no-google-and-no-its-not-speech-to-text-c960180e9239</a></div><div class="story_tags page_narrow"><button type="button" class="btn btn-light my_tag"><a href="/tag/google/">#google</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/flutter/">#flutter</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/语音/">#语音</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/speech/">#speech</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/命令/">#命令</a></button></div></div><div class="shadow p-3 mb-5 bg-white rounded clearfix"><div class="container"><div class="row"><div class="col-sm"><div><a target="_blank" href="/story/1048519.html"><img src="http://img2.diglog.com/img/2021/2/thumb_0c0d2ded69aacddb66deddf5b666f30a.jpeg" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1048519.html">与Facebook，Google进行谈判时，Bill允许美国发布商进行合作 </a></div><span class="my_story_list_date">2021-2-19 21:10</span></div><div class="col-sm"><div><a target="_blank" href="/story/1048374.html"><img src="http://img2.diglog.com/img/2021/2/thumb_90430a88c68500e7d4782bf7bfb8a207.jpg" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1048374.html">Google将Apple TV应用程序添加到其最新的带有Google TV的Chromecast设备中，并已在具有Google TV的Sony和TCL智能电视上提供 </a></div><span class="my_story_list_date">2021-2-19 5:2</span></div><div class="col-sm"><div><a target="_blank" href="/story/1048345.html"><img src="http://img2.diglog.com/img/2021/2/thumb_238df043d1bbff7b88f7eb4495266506.jpg" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1048345.html">Google有了新的负责任的AI主管 </a></div><span class="my_story_list_date">2021-2-19 3:39</span></div><div class="col-sm"><div><a target="_blank" href="/story/1048327.html"><img src="http://img2.diglog.com/img/2021/2/thumb_5e614eb8f54649698980c38c918967e1.jpg" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1048327.html">从Chromecast开始，Apple TV +进入Google TV设备 </a></div><span class="my_story_list_date">2021-2-19 2:38</span></div></div></div></div><div class="my_movie_list_item shadow p-3 mb-5 bg-white rounded"><button type="button" class="btn btn-link my_tag"><a href="/tag/web2.0/">#web2.0</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/google/">#google</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/设计/">#设计</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/创意/">#创意</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/摄影/">#摄影</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/游戏/">#游戏</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/图片/">#图片</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/软件/">#软件</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/视频/">#视频</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/手机/">#手机</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/广告/">#广告</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/apple/">#apple</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/iphone/">#iphone</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/网站/">#网站</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/免费/">#免费</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/下载/">#下载</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/windows/">#windows</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/微软/">#微软</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/firefox/">#firefox</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/苹果/">#苹果</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/blog/">#blog</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/音乐/">#音乐</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/博客/">#博客</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/wordpress/">#wordpress</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/恶搞/">#恶搞</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/艺术/">#艺术</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/qq/">#qq</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/web/">#web</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/谷歌/">#谷歌</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/工具/">#工具</a></button></div></div></div><div id="my_footer"><div class=""><a href="/tags/">tags</a> <a href="/users/">users</a></div>&copy;2012-2021 diglog.com </div></div></body></html>