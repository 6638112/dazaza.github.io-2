<!doctype html><html lang="zh-hans"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>占位符-SQLite支持的离线粗略地理编码器</title><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"><link rel="stylesheet" href="/img/css.css?random="><link data-rh="true" rel="icon" href="/img/favicon.ico"/><script data-ad-client="ca-pub-6067137220025946" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script type="text/javascript" src="https://platform-api.sharethis.com/js/sharethis.js#property=5effb96910009800120b8d4d&product=inline-share-buttons" async="async"></script>
<script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?03c1a0f31299b4a2fbb83c34d6beaac9";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script></head><body><div id="my_header"><div class="container"><nav class="navbar navbar-expand-lg"><a class="navbar-brand" href="/"><img alt="diglog" src="/img/logo.v1.gif" class="rounded-sm"></a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarNavAltMarkup"><div class="navbar-nav"></div></div></nav></div></div><div class="container"><div id="my_content"><h1 class="page_narrow">占位符-SQLite支持的离线粗略地理编码器</h1><div class="row"><div class="col-lg-12 col-12"><div class="my_story_list_item shadow p-3 mb-5 bg-white rounded"><div class="story_page_pub_time page_narrow">2020-08-22 01:03:36</div><div class="story_img_container"><a href="http://img.diglog.com/img/2020/8/6aec3c01bdb97a80257aacb585512ae1.png"><img src="http://img.diglog.com/img/2020/8/6aec3c01bdb97a80257aacb585512ae1.png" class="img-fluid my_story_img" onerror="this.style.display='none'"></a></div><div class="page_narrow text-break page_content"><p>Pelias是一个由开放数据提供支持的全球地点搜索引擎。它将地址和地名转换为地理坐标，并将地理坐标转换为地点和地址。使用Pelias，您可以将用户的位置搜索转换为可操作的地理数据，并将您的地理数据转换为真实位置。我们认为开放数据、开放源码和开放战略在堆栈的任何部分都胜过专有解决方案，我们希望确保我们提供的服务符合这一愿景。我们相信，只有当社区能够融入真正有代表性的本地知识时，开放的地理编码器才能长期改进。此存储库提供运行您自己的粗略地理编码器所需的所有代码和地理数据。</p><p>请阅读我们的带有Docker的(几乎)一行粗略地理编码器的博客文章，以获得快速入门指南，并查看我们的演示。</p><p>该服务旨在作为Pelias Gecoder的一部分运行，但是可以很容易地独立运行，因为它没有外部依赖。</p><p>该引擎接受非结构化输入文本，如中性湾北悉尼、新南威尔士州，并尝试推断用户所指的地理区域。</p><p>人类(熟悉澳大利亚地理)能够快速扫描文本并确定有3个不同的象征组：中性海湾、北悉尼和新南威尔士州。</p><p>该引擎使用与我们大脑类似的技术，扫描文本，在学习术语的字典中循环，然后尝试建立逻辑符号组。</p><p>一旦建立了令牌组，就使用约简算法来确保令牌组在地理环境中是逻辑的。我们不想退还纽约市这样的条款，所以我们只需要在名为“法兰西”的地方退还名为“NYC&39；”的东西就行了。(译者注：这句话的意思是：“我们不想退还像”NYC France“这样的条款，所以我们只需要在”法兰西“这样的地方退还名为”NYC&39；“的东西。)。</p><p>引擎从最右边的组开始，向左工作，确保令牌组表示包含在之前的令牌组中的地理实体。重复此过程，直到用完所有组，或者返回0个结果。</p><p>然后返回最佳估计，或者作为一组表示这些地区的ID的整数，或者作为还包含人口计数等附加信息的JSON结构。</p><p>数据来源于WhosonFirst项目，该项目还包括地名的不同语言翻译。</p><p>占位符支持搜索和检索不同语言的令牌，还支持同义词和缩写。</p><p>该引擎包括基本的语言检测算法，该算法试图检测从右到左的语言以及以从大到小的格式书写其地址的语言。然后，它将反转这些令牌，以将它们重新排序为从次要到主要的排序。</p><p>$npm run cli--San fran&&gt;PEIAS-PLACEHOLDER@1.0.0 cli&&gt;node cmd/cli.js&#34；San&#34；；Fran&#34；San francorts：3MS-85922583 Locality San Francisco。</p><p>占位符服务将绑定到的网络地址。默认为当前Node.js的默认值，即当前侦听0.0.0.0(所有接口)。有关详细信息，请参阅Node.js Net文档。</p><p>服务器现在应该正在运行，您应该能够访问http API：</p><p>/parser/search端点接受？lang=xxx属性，该属性可用于改变返回数据的语言。</p><p>/parser/search返回的文档包含名为languageDefaulted的布尔属性，该属性指示服务是否能够找到您请求的语言的翻译(False)或是否返回默认语言(True)。</p><p>Parser/findbyid端点还接受？lang=xxx属性，如果翻译存在，该属性将返回选定的lang，否则返回所有翻译。</p><p>该演示还可以通过在URL锚中提供语言代码来提供不同语言的响应：</p><p>/parser/search端点接受？placeType=xxx参数，该参数可用于控制返回的记录的placeType。</p><p>该API没有提供任何性能优势，它只是一个根据白名单进行过滤的便捷API。</p><p>您可以使用逗号分隔多个Placetype，例如？placeType=xxx，yyy，这些将作为OR条件进行匹配。例如：(xxx或yyy)。</p><p>#All Matching Results Search？Text=卢森堡#Only Return Matching Country recordssearch?text=luxemburg&amp；placetype=country#Return Matching Country or Region recordssearch?text=luxemburg&amp；placetype=country，Region。</p><p>Parser/search端点接受一个？mode=live参数对，该参数对可用于启用自动完成风格的API。</p><p>在此模式下，每个输入文本的最终令牌被视为不完整，这意味着用户可能只键入了令牌的一部分。</p><p>默认匹配策略使用谱系表来确保令牌对表示有效的子代-父代关系。这确保了像法国伦敦这样的查询不匹配，因为谱系表中没有将这两个地方链接在一起的条目。</p><p>在某些情况下，更可取的做法是采用一种匹配策略，即考虑具有匹配名称的地理上邻近的地方，即使这种关系不明确地存在于谱系表中。</p><p>例如，法国巴塞尔将返回瑞士巴塞尔。这对于处理用户输入错误以及谱系表中的错误和遗漏非常有用。</p><p>在上面的示例中，法国巴塞尔的匹配只是因为巴塞尔的边界框与法国的边界框重叠，并且不存在法国巴塞尔的其他有效条目。</p><p>什么是附近的定义是可配置的，次要项(左标记)的BBox被扩展一个阈值(该阈值被添加或减去到每个BBox顶点)。</p><p>默认情况下，阈值设置为0.2(度)，可以通过环境变量RTREE_THRESHOLD指定0到1之间的任何浮点值。</p><p>小于0的设置将完全禁用rtree功能。禁用rtree将导致附近的查询，如法国巴塞尔返回法国，而不是瑞士巴塞尔。</p><p>占位符&&gt;伦敦on-101735809 Locality伦敦占位符&&gt;搜索伦敦on-101735809 Locality伦敦占位符&&gt;标记化悉尼新南威尔士[[&#39；悉尼；，&39；新南威尔士]]占位符&&gt;Token Kelburn[85772991]占位符&&gt;id 85772991{名称：&#39；凯尔本&39；，位置类型：&#39；邻里&。，血统：{大陆id：102191583，国家id：85633345，县id：102079339，地点id：101915529，邻里id：85772991，地区id：85687233}，姓名：{eng：[&#39；kelburn&#39；]}}。</p><p>虽然占位符可以作为独立的应用程序使用，也可以与其他地理软件/搜索引擎一起使用，但它是为Pelias地理编码器设计的。</p><p>要将占位符服务连接到Pelias API，请使用占位符在其上运行的端口配置Pelias配置文件。</p><p>Whosonfirst项目是作为Geojson文件分发的，因此为了加快开发速度，我们首先将相关数据提取到一个文件中：data/wof.tract。</p><p>以下命令将迭代WOF_DIR路径下的所有Geojson文件，将相关属性提取到文件data/wof.tract中。</p><p>此过程可能需要30-60分钟来运行并消耗约350MB的磁盘空间，您只需运行此命令一次，或者在更新本地的Whosonfirst-data文件时运行此命令。</p><p>构建最新的Docker映像，并从我们的持续集成渠道自动推送到Docker Hub</p></div><div id="story_share_this"><div class="sharethis-inline-share-buttons"></div></div><div class="text-break sotry_link page_narrow"><a target="_blank" href="https://github.com/pelias/placeholder">https://github.com/pelias/placeholder</a></div><div class="story_tags page_narrow"><button type="button" class="btn btn-light my_tag"><a href="/tag/sqlite/">#sqlite</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/地理/">#地理</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/offline/">#offline</a></button></div></div><div class="shadow p-3 mb-5 bg-white rounded clearfix"><div class="container"><div class="row"><div class="col-sm"><div><a target="_blank" href="/story/1009995.html"><img src="http://img.diglog.com/img/2020/7/thumb_32e37b91a23db8109095af1514044686.jpeg" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1009995.html">Simpleton，一个从UDP到SQLite的简单工具</a></div><span class="my_story_list_date">2020-7-6 4:29</span></div><div class="col-sm"><div><a target="_blank" href="/story/1006822.html"><img src="http://img.diglog.com/img/2020/6/thumb_8f8c5b1332820c7c0c8de312535c9593.png" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1006822.html">一种面向SQLite的Jupyter内核</a></div><span class="my_story_list_date">2020-6-17 0:14</span></div><div class="col-sm"><div><a target="_blank" href="/story/1006434.html"><img src="http://img.diglog.com/img/2020/6/thumb_0afa365aa6fefea5db5b7c52877985b4.jpg" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1006434.html">使用SQLite从*选择Code_Execution From*；</a></div><span class="my_story_list_date">2020-6-14 1:12</span></div><div class="col-sm"><div><a target="_blank" href="/story/1003458.html"><img src="http://img.diglog.com/img/2020/5/thumb_14171a5347be41b5d0afb282b90a6222.png" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1003458.html">DuckDB，SQLite for Analytics</a></div><span class="my_story_list_date">2020-5-24 7:20</span></div></div></div></div><div class="my_movie_list_item shadow p-3 mb-5 bg-white rounded"><button type="button" class="btn btn-link my_tag"><a href="/tag/web2.0/">#web2.0</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/google/">#google</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/设计/">#设计</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/创意/">#创意</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/摄影/">#摄影</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/游戏/">#游戏</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/图片/">#图片</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/软件/">#软件</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/视频/">#视频</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/手机/">#手机</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/广告/">#广告</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/apple/">#apple</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/iphone/">#iphone</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/网站/">#网站</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/免费/">#免费</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/下载/">#下载</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/windows/">#windows</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/微软/">#微软</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/firefox/">#firefox</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/苹果/">#苹果</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/blog/">#blog</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/音乐/">#音乐</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/博客/">#博客</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/wordpress/">#wordpress</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/恶搞/">#恶搞</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/艺术/">#艺术</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/qq/">#qq</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/web/">#web</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/谷歌/">#谷歌</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/工具/">#工具</a></button></div></div></div><div id="my_footer"><div class=""><a href="/tags/">tags</a> <a href="/users/">users</a></div>&copy;2012-2021 diglog.com </div></div></body></html>