<!doctype html><html lang="zh-hans"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>键入要继续操作的确切计算机数量</title><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"><link rel="stylesheet" href="/img/css.css?random="><link data-rh="true" rel="icon" href="/img/favicon.ico"/><script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?03c1a0f31299b4a2fbb83c34d6beaac9";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script><script data-ad-client="ca-pub-6067137220025946" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script type="text/javascript" src="https://platform-api.sharethis.com/js/sharethis.js#property=5effb96910009800120b8d4d&product=inline-share-buttons" async="async"></script></head><body><div id="my_header"><div class="container"><nav class="navbar navbar-expand-lg"><a class="navbar-brand" href="/"><img alt="diglog" src="/img/logo.v1.gif" class="rounded-sm"></a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarNavAltMarkup"><div class="navbar-nav"></div></div></nav></div></div><div class="container"><div id="my_content"><h1 class="page_narrow">键入要继续操作的确切计算机数量</h1><div class="row"><div class="col-lg-12 col-12"><div class="my_story_list_item shadow p-3 mb-5 bg-white rounded"><div class="story_page_pub_time page_narrow">2020-10-28 03:14:58</div><div class="page_narrow text-break page_content"><p>I&#39;ve worked at a few places that had a large number of Linux boxes. I&#39;m talking about well over a million. When you have that many cats which need herding, sometimes you have to do things to big groups of them at once. Once in a while, you even have to touch all of them at once.</p><p>我曾在几个拥有大量Linux系统的地方工作过。我说的是远远超过一百万的。当你有那么多需要放牧的猫时，有时你必须立即对一大群猫做点什么。偶尔，你甚至需要一次触摸所有的东西。</p><p> It&#39;s been my experience that companies which possess such massive fleets tend to create tooling which will let them do exactly that. These tools have different names, but the gist of it is about the same: ssh in as root, run some command, and maybe return the exit code and/or output.</p><p>我的经验是，拥有如此庞大船队的公司往往会制造工具，让他们做到这一点。这些工具的名称不同，但其要点大致相同：以root身份使用SSH登录，运行一些命令，并可能返回退出代码和/或输出。</p><p> For certain situations, this is exactly what is needed to put out a fire, and that&#39;s when you&#39;re thankful it exists.</p><p>在某些情况下，这正是扑灭大火所需要的，而这正是你庆幸它存在的时候。</p><p> This post, however, is not about that. This post is about the other side of the coin which is where someone uses one of these tools and  creates a problem. Maybe they decide to roll out a &#34;flag flip&#34; this way instead of using best practices (tests, canaries, percentage rollouts, that kind of thing). Perhaps they decide to push a new binary to every machine at once and so they all drop out at the same time, leaving no capacity to run the actual site.</p><p>然而，这篇帖子并不是关于这个的。这篇帖子是关于硬币的另一面，在那里有人使用了这些工具之一，并制造了一个问题。也许他们决定以这种方式推出翻转旗帜，而不是使用最佳实践(测试、金丝雀、百分比推出，诸如此类)。也许他们决定一次将一个新的二进制文件推送到每台机器上，因此他们同时退出，没有能力运行实际的站点。</p><p> There&#39;s something I&#39;ve asked people to put into their tools to prevent certain kinds of disasters. It&#39;s intended to address the specific situation where someone runs the command and targets far too many machines. Maybe they wanted to touch a rack of test hosts (40 or so), but accidentally selected  all of them.</p><p>我已经要求人们把一些东西放进他们的工具中，以防止某些类型的灾难。它的目的是解决某些特定情况，即有人运行命令并以太多的计算机为目标。也许他们想触摸一架测试主机(40台左右)，但却意外地选择了所有主机。</p><p>  My request is simple enough: if you&#39;re going to generate a confirmation prompt as a sanity check, *don&#39;t* make it a Y/N type of thing. Instead, ask them to read a number and plug it back in.</p><p>我的要求很简单：如果您要生成确认提示作为健全性检查，*不要将其设置为Y/N类型。取而代之的是，让他们读一个数字，然后把它插回去。</p><p>  Blah blah blah 123456 machines will be affected by this. Proceed? Enter number of machines to confirm:</p><p>胡说八道，123456台机器将受此影响。继续吗？输入要确认的计算机数量：</p><p> Your options are then to type in exactly &#34;123456&#34; to let it go, or anything else to abort.</p><p>然后，您的选择是准确地键入123456&34；以放手，或者键入任何其他内容以中止。</p><p> The idea is to force you to take in that number through your usual input devices (I&#39;d say eyes, but some people are using text-to-speech stuff or similar, and they count too), chew on it with your wetware, and then feed it back into the computer somehow. Adding a few extra steps like this will hopefully activate enough of your brain to make you stop short before blowing off your entire leg with a giant foot-gun.</p><p>这个想法是迫使你通过你常用的输入设备(我会说眼睛，但有些人正在使用文本到语音的东西或类似的东西，他们也算在内)输入这个数字，用你的湿器咀嚼它，然后以某种方式将它反馈到电脑中。增加几个这样的额外步骤有望激活你足够的大脑，让你在用巨型脚枪炸掉你的整条腿之前停下来。</p><p> Of course, if you run into this a lot and you actually intend to hit that many machines, someone might start cutting and pasting the number. In that case, I would say that you&#39;re using that tool far too often, and should take a look at changing the way things are done to avoid having to rely on it this much.</p><p>当然，如果您经常遇到这种情况，并且您实际上打算使用那么多机器，那么可能会有人开始剪切和粘贴数字。在这种情况下，我会说您使用该工具的频率太高了，应该考虑一下改变做事的方式，以避免不得不如此依赖它。</p><p> Now, reality being what it is, &#34;stop using it&#34; might not be easily done in a given company. If that&#39;s what&#39;s going on, then it might be interesting to split up the number a bit so it can&#39;t just be pasted in and has to make a round-trip through the human doing the work.</p><p>现在，现实就是这样，在一家特定的公司里，停止使用它可能不是一件容易的事。如果这就是正在进行的事情，那么稍微拆分一下数字可能会很有趣，这样它就不会被粘贴进去，不得不在做这项工作的人之间来回往返了一遍。</p><p> This might be as simple as printing the number with your locale&#39;s version of numerical separators, like &#34;123,456&#34; or &#34;123.456&#34; or &#34;123 456&#34; or whatever else you might use where you are. The trick is then to NOT accept that as input, but instead demand that they remove the separator and jam it in as just digits.</p><p>这可能很简单，只需用您所在地区的数字分隔符(如123,456&34；或123.456&34；或123#34；123,456&34；或您可能使用的任何其他分隔符)打印数字即可。然后，诀窍是不接受它作为输入，而是要求他们移除分隔符，并将其作为数字插入。</p><p> Blah blah blah 123,456 machines will be affected. Proceed? Enter number of machines to confirm: 123456OK! Continuing.</p><p>胡说八道123,456台机器将受到影响。继续吗？输入要确认的机器数量：123456确定！还在继续。</p><p> I&#39;ve seen this technique save people on multiple occasions, and share it here in the hopes it helps others. If you&#39;re designing something rather powerful, consider making it safe this way.</p><p>我在多个场合见过这种技术救人，并在这里分享，希望它能帮助他人。如果你正在设计一些相当强大的东西，可以考虑让它变得安全。</p><p> Just think: the numbers come off the screen, leap into the person, bounce around the inside of their head, and go back into the computer. Nothing but net.</p><p>试想一下：数字从屏幕上跳出来，跳到人身上，在他们的脑袋里跳来跳去，然后回到电脑里。除了网什么都没有。</p></div><div id="story_share_this"><div class="sharethis-inline-share-buttons"></div></div><div class="text-break sotry_link page_narrow"><a target="_blank" href="https://rachelbythebay.com/w/2020/10/26/num/">https://rachelbythebay.com/w/2020/10/26/num/</a></div><div class="story_tags page_narrow"><button type="button" class="btn btn-light my_tag"><a href="/tag/继续/">#继续</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/exact/">#exact</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/数字/">#数字</a></button></div></div><div class="my_movie_list_item shadow p-3 mb-5 bg-white rounded"><button type="button" class="btn btn-link my_tag"><a href="/tag/web2.0/">#web2.0</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/google/">#google</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/设计/">#设计</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/游戏/">#游戏</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/创意/">#创意</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/apple/">#apple</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/苹果/">#苹果</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/摄影/">#摄影</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/软件/">#软件</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/美国/">#美国</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/iphone/">#iphone</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/图片/">#图片</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/手机/">#手机</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/视频/">#视频</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/广告/">#广告</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/免费/">#免费</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/谷歌/">#谷歌</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/网站/">#网站</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/windows/">#windows</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/微软/">#微软</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/下载/">#下载</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/firefox/">#firefox</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/音乐/">#音乐</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/linux/">#linux</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/blog/">#blog</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/博客/">#博客</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/程序/">#程序</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/艺术/">#艺术</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/web/">#web</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/wordpress/">#wordpress</a></button></div></div></div><div id="my_footer"><div class=""><a href="/tags/">tags</a> <a href="/users/">users</a></div>&copy; 2020 diglog.com </div></div></body></html>