<!doctype html><html lang="zh-hans"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Quake III Arena，K3和Raspberry PiQuake III Arena, K3s and a Raspberry Pi</title><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"><link rel="stylesheet" href="/img/css.css?random="><link data-rh="true" rel="icon" href="/img/favicon.ico"/><script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?03c1a0f31299b4a2fbb83c34d6beaac9";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script><script data-ad-client="ca-pub-6067137220025946" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script type="text/javascript" src="https://platform-api.sharethis.com/js/sharethis.js#property=5effb96910009800120b8d4d&product=inline-share-buttons" async="async"></script></head><body><div id="my_header"><div class="container"><nav class="navbar navbar-expand-lg"><a class="navbar-brand" href="/"><img alt="diglog" src="/img/logo.v1.gif" class="rounded-sm"></a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarNavAltMarkup"><div class="navbar-nav"></div></div></nav></div></div><div class="container"><div id="my_content"><h1 class="page_narrow">Quake III Arena, K3s and a Raspberry Pi<br/>Quake III Arena，K3和Raspberry Pi</h1><div class="row"><div class="col-lg-12 col-12"><div class="my_story_list_item shadow p-3 mb-5 bg-white rounded"><div class="story_page_pub_time page_narrow">2020-11-27 06:55:48</div><div class="story_img_container"><a href="http://img2.diglog.com/img/2020/11/00013460568f9ae8c4d45e6579be8975.png"><img src="http://img2.diglog.com/img/2020/11/00013460568f9ae8c4d45e6579be8975.png" class="img-fluid my_story_img" onerror="this.style.display='none'"></a></div><div class="page_narrow text-break page_content"><p>Friday afternoon team project running  @quake on  @kubernetesio turned into Saturday morning getting it running with  @Linkerd . Thanks  @CapitalOneTech for  https://t.co/YP0jRynOi1  pic.twitter.com/juxIEsuH7R</p><p>周五下午在@kubernetesio上运行@quake的团队项目变成了周六上午，通过@Linkerd使其运行。感谢@CapitalOneTech提供https://t.co/YP0jRynOi1 pic.twitter.com/juxIEsuH7R</p><p>— Chris Campbell (@ChrsCmpbl)  November 21, 2020</p><p>-克里斯·坎贝尔（@ChrsCmpbl）2020年11月21日</p><p>  Years ago, I spent (and lost) so much time playing this fast-paced game with friends and foes, and now it is brought into the world of containers and Kubernetes with   QuakeKube by  Capital One Tech.</p><p>  几年前，我花了很多时间（和浪费了）与朋友和敌人一起玩这个快节奏的游戏，现在，Capital One Tech用QuakeKube将它带入了容器和Kubernetes的世界。</p><p> QuakeKube is a Kubernetes-ified version of   QuakeJS  that runs a dedicated   Quake 3  server in a Kubernetes Deployment, and then allow clients to connect via QuakeJS in the browser.</p><p> QuakeKube是QuakeJS的Kubernetes认证版本，可在Kubernetes部署中运行专用的Quake 3服务器，然后允许客户端通过浏览器中的QuakeJS连接。</p><p> Of course, I couldn’t wait to give it a try, especially after reading the documentation, saying:</p><p> 当然，我迫不及待想尝试一下，尤其是在阅读了文档之后，说：</p><p> Container images are being cross-compiled with   Docker Buildx  so it can run on hardware with different architectures and operating systems. Currently, it is building for  linux/amd64 and  linux/arm64.</p><p> 容器映像正在与Docker Buildx交叉编译，因此它可以在具有不同架构和操作系统的硬件上运行。当前，它正在为linux / amd64和linux / arm64构建。</p><p> ARM64 support! Great, it means I can run it on one of my Raspberry Pis!</p><p> 支持ARM64！太好了，这意味着我可以在我的Raspberry Pi上运行它！</p><p>  Most of the work is already done by others, so with the proper tools and projects, it will take you only a few minutes to get everything up and running.</p><p>大多数工作已经由其他人完成，因此使用适当的工具和项目，仅需几分钟即可启动并运行所有内容。</p><p>  k3sup, a light-weight utility to get from zero to KUBECONFIG with k3s on any local or remote VM.</p><p>  k3sup，一种轻量级实用程序，可在任何本地或远程VM上使用k3从零到KUBECONFIG。</p><p> arkade, a simple Golang CLI with strongly-typed flags to install charts and apps to your cluster in one command.</p><p> arkade，一个简单的Golang CLI，带有强类型标志，可通过一个命令将图表和应用程序安装到您的集群中。</p><p>    After the installation of k3s on the Raspberry Pi, k3sup also downloads the required kubeconfig file in your current working directory. Make sure to configure  kubectl to use this config file:</p><p>    在Raspberry Pi上安装k3后，k3sup还将在当前工作目录中下载所需的kubeconfig文件。确保将kubectl配置为使用此配置文件：</p><p>    The inlets-operator will create an inlets exit-node on DigitalOcean, giving the LoadBalancer services in the private k3s cluster a public IP address.</p><p>    入口操作员将在DigitalOcean上创建一个入口出口节点，为私有k3s群集中的LoadBalancer服务提供一个公共IP地址。</p><p> As clients connect to the server via QuakeJS in the browser with websockets, the OSS version of inlets will do just fine. If you want to have better support for TLS etc, I can highly recommend having a look at inlets PRO version.</p><p> 当客户端使用Websocket通过浏览器中的QuakeJS连接到服务器时，OSS版本的入口将正常运行。如果您希望对TLS等有更好的支持，我强烈建议您看一看inserts PRO版本。</p><p> Finally, take the example yaml file from the QuakeKube GitHub repository and make the appropriate changes. The service should be updated to a LoadBalancer instead of type NodePort, and of course you can change the configuration to tweak the game preferences to your own needs.</p><p> 最后，从QuakeKube GitHub存储库中获取示例yaml文件，并进行适当的更改。该服务应更新为LoadBalancer而不是NodePort类型，并且您当然可以更改配置以根据自己的需要调整游戏首选项。</p><p>  apiVersion: apps/v1kind: Deploymentmetadata: name: quakejsspec: selector: matchLabels: run: quakejs replicas:  1 template: metadata: labels: run: quakejs annotations: prometheus.io/scrape:  &#39;true&#39; prometheus.io/port:  &#39;8080&#39; spec: containers: - command: - q3 - server - --config=/config/config.yaml - --content-server=http://localhost: 9090 - --agree-eula image: docker.io/criticalstack/quake:v1. 0.5 name: server ports: - containerPort:  8080 readinessProbe: tcpSocket: port:  8080 initialDelaySeconds:  15 periodSeconds:  5 volumeMounts: - name: quake3-server-config mountPath: /config - name: quake3-content mountPath: /assets - command: - q3 - content - --seed-content-url=http://content.quakejs.com image: docker.io/criticalstack/quake:v1. 0.5 name: content-server ports: - containerPort:  9090 volumeMounts: - name: quake3-content mountPath: /assets volumes: - name: quake3-server-config configMap: name: quake3-server-config - name: quake3-content emptyDir: {}---apiVersion: v1kind: Servicemetadata: name: quakejsspec: type: LoadBalancer selector: run: quakejs ports: - port:  80 targetPort:  8080 name: http---apiVersion: v1kind: ConfigMapmetadata: name: quake3-server-configdata: config.yaml:  |  fragLimit: 25 timeLimit: 15m bot: minPlayers:  3 game: motd:  &#34;Welcome to Critical Stack&#34; type: FreeForAll forceRespawn:  false inactivity: 10m quadFactor:  3 weaponRespawn:  3 server: hostname:  &#34;quakekube&#34; maxClients:  12 password:  &#34;changeme&#34; commands: - addbot sarge  2 maps: - name: q3dm7 type: FreeForAll timeLimit: 10m - name: q3dm17 type: FreeForAll - name: q3wctf1 type: CaptureTheFlag captureLimit:  8 - name: q3tourney2 type: Tournament - name: q3wctf3 type: CaptureTheFlag captureLimit:  8 - name: ztn3tourney1 type: Tournament</p><p>apiVersion：apps / v1kind：Deploymentmetadata：名称：quakejsspec：选择器：matchLabels：运行：quakejs副本：1模板：元数据：标签：运行：quakejs注释：prometheus.io/scrape：'true'prometheus.io/port：'8080 '规范：容器：-命令：-q3-服务器---config = / config / config.yaml---content-server = http：// localhost：9090---agree-eula映像：docker.io/criticalstack / quake：v1。 0.5名称：服务器端口：-容器端口：8080准备就绪探针：tcpSocket：端口：8080 initialDelaySeconds：15 periodSeconds：5 volumeMounts：-名称：quake3-server-config mountPath：/ config-名称：quake3-content mountPath：/ assets-命令： -第3季度-内容---seed-content-url = http：//content.quakejs.com图片：docker.io/criticalstack/quake:v1。 0.5名称：内容服务器端口：-containerPort：9090 volumeMounts：-名称：quake3-content mountPath：/ assets卷：-名称：quake3-server-config configMap：名称：quake3-server-config-名称：quake3-content emptyDir ：{} --- apiVersion：v1kind：Servicemetadata：名称：quakejsspec：类型：LoadBalancer选择器：运行：quakejs端口：-端口：80 targetPort：8080名称：http --- apiVersion：v1kind：ConfigMapmetadata：名称：quake3-server -configdata：config.yaml：| fragLimit：25时间限制：15m bot：minPlayers：3游戏：motd：“ Welcome to Critical Stack”类型：FreeForAll forceRespawn：错误，不活跃：10m quadFactor：3武器Respawn：3服务器：主机名：“ quakekube” maxClients：12密码：“ changeme “命令：-addbot sarge 2映射：-名称：q3dm7类型：FreeForAll timeLimit：10m-名称：q3dm17类型：FreeForAll-名称：q3wctf1类型：CaptureTheFlag captureLimit：8-名称：q3tourney2类型：Tournament-名称：q3wctf3类型：CaptureTheFlag captureLimit：8-名称：ztn3tourney1类型：Tournament</p><p>    $ kubectl get pods,serviceNAME READY STATUS RESTARTS AGEpod/inlets-operator-76fb794578-s2fg4  1/1 Running  0 147mpod/quakejs-tunnel-client-6f7c986dfc-mdt5w  1/1 Running  0 50spod/quakejs-786cc496b-g7b7n  2/2 Running  0 80sNAME TYPE CLUSTER-IP EXTERNAL-IP PORT (S ) AGEservice/kubernetes ClusterIP  10.43.0.1 &lt;none&gt;  443/TCP 152mservice/quakejs LoadBalancer  10.43.46.33  143.110.174.204,143.110.174.204  80:32116/TCP 80s</p><p>    $ kubectl get pods，serviceNAME就绪状态重新启动AGEpod / inlets-operator-76fb794578-s2fg4 1/1正在运行0 147mpod / quakejs-tunnel-client-6f7c986dfc-mdt5w 1/1正在运行0 50spod / quakejs-786cc496b-g7b7n 2/2 0 80s名称类型群集IP外部IP端口（S）AGE服务/ kubernetes ClusterIP 10.43.0.1  443 / TCP 152mservice / quakejs LoadBalancer 10.43.46.33 143.110.174.204,143.110.174.204 80：32116 / TCP 80s</p><p> And that’s it! Open up your favourite browser, load the application and start fraggin’!</p><p> 就是这样！打开您喜欢的浏览器，加载应用程序，然后开始整理！”！</p></div><div id="story_share_this"><div class="sharethis-inline-share-buttons"></div></div><div class="text-break sotry_link page_narrow"><a target="_blank" href="https://johansiebens.dev/posts/2020/11/quake-iii-arena-k3s-and-a-raspberry-pi/">https://johansiebens.dev/posts/2020/11/quake-iii-arena-k3s-and-a-raspberry-pi/</a></div><div class="story_tags page_narrow"><button type="button" class="btn btn-light my_tag"><a href="/tag/iii/">#iii</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/名称/">#名称</a></button></div></div><div class="my_movie_list_item shadow p-3 mb-5 bg-white rounded"><button type="button" class="btn btn-link my_tag"><a href="/tag/web2.0/">#web2.0</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/google/">#google</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/设计/">#设计</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/创意/">#创意</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/摄影/">#摄影</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/图片/">#图片</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/游戏/">#游戏</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/软件/">#软件</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/手机/">#手机</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/视频/">#视频</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/广告/">#广告</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/iphone/">#iphone</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/网站/">#网站</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/免费/">#免费</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/下载/">#下载</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/windows/">#windows</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/苹果/">#苹果</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/微软/">#微软</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/apple/">#apple</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/blog/">#blog</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/firefox/">#firefox</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/音乐/">#音乐</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/博客/">#博客</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/wordpress/">#wordpress</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/恶搞/">#恶搞</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/艺术/">#艺术</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/qq/">#qq</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/web/">#web</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/工具/">#工具</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/分享/">#分享</a></button></div></div></div><div id="my_footer"><div class=""><a href="/tags/">tags</a> <a href="/users/">users</a></div>&copy; 2020 diglog.com </div></div></body></html>