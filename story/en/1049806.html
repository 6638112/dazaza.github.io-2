<!doctype html><html lang="zh-hans"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>用Python创建巧合 Creating Serendipity with Python</title><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"><link rel="stylesheet" href="/img/css.css?random="><link data-rh="true" rel="icon" href="/img/favicon.ico"/><script data-ad-client="ca-pub-6067137220025946" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script type="text/javascript" src="https://platform-api.sharethis.com/js/sharethis.js#property=5effb96910009800120b8d4d&product=inline-share-buttons" async="async"></script>
<script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?03c1a0f31299b4a2fbb83c34d6beaac9";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script></head><body><div id="my_header"><div class="container"><nav class="navbar navbar-expand-lg"><a class="navbar-brand" href="/"><img alt="diglog" src="/img/logo.v1.gif" class="rounded-sm"></a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarNavAltMarkup"><div class="navbar-nav"></div></div></nav></div></div><div class="container"><div id="my_content"><h1 class="page_narrow">Creating Serendipity with Python<br/>用Python创建巧合 </h1><div class="row"><div class="col-lg-12 col-12"><div class="my_story_list_item shadow p-3 mb-5 bg-white rounded"><div class="story_page_pub_time page_narrow">2021-02-27 23:05:55</div><div class="story_img_container"><a href="http://img2.diglog.com/img/2021/2/fde82f3dd8c5c224a0d6cc7512604481.png"><img src="http://img2.diglog.com/img/2021/2/fde82f3dd8c5c224a0d6cc7512604481.png" class="img-fluid my_story_img" onerror="this.style.display='none'"></a></div><div class="page_narrow text-break page_content"><p>We&#39;ve been experimenting with breaking up employees into random groups (of size 4) and setting up video hangouts between them. We&#39;re doing this to replace the serendipitous meetings that sometimes occur around coffee machines, in lunch lines or while waiting for the printer. And also, we just want people to get to know each other.</p><p>我们一直在尝试将员工分成几组（大小为4），并在他们之间建立视频环聊。我们这样做是为了取代有时在咖啡机周围，午餐时段或等待打印机时发生的偶然会议。而且，我们只希望人们彼此了解。</p><p> Which lead to me writing some code. The core of which is  divide n elements into groups of at least size g minimizing the size of each group. So, suppose an office has 15 employees in it then it would be divided into three groups of sizes 5, 5, 5; if an office had 16 employees it would be 4, 4, 4, 4; if it had 17 employees it would be 4, 4, 4, 5 and so on.</p><p> 这导致我写了一些代码。其核心是将n个元素分成至少大小为g的组，以最小化每个组的大小。因此，假设一个办公室有15名员工，那么它将分为大小5、5、5的三组；如果办公室有16名员工，则为4、4、4、4；如果它有17名员工，则为4，4，4，5，依此类推。</p><p>  groups = [g] * (n//g) for e in range(0, n % g): groups[e % len(groups)] += 1</p><p>  组= [g] *（n // g），范围为e（0，n％g）：组[e len（组）] + = 1</p><p> The first line creates  n//g ( // is integer division) entries of size  g (for example, if  g == 4 and  n == 17 then  groups == [4, 4, 4, 4]). The  for loop deals with the &#39;left over&#39; parts that don&#39;t divide exactly into groups of size  g. If  g == 4 and  n == 17 then there will be one left over element to add to one of the existing  [4, 4, 4, 4] groups resulting in  [5, 4, 4, 4].</p><p> 第一行创建大小为g的n // g（//是整数除法）条目（例如，如果g == 4且n == 17，则组== [4，4，4，4]）。 for循环处理剩余的＆＃39;不会完全分为大小为g的组的部分。如果g == 4且n == 17，那么将剩下一个元素添加到现有的[4、4、4、4、4]组之一中，从而得到[5、4、4、4]。</p><p> The  e % len(groups) is needed because it&#39;s possible that there are more elements left over after dividing into equal sized groups than there are entries in  groups. For example, if  g == 4 and  n == 11 then  groups is initially set to  [4, 4] with three left over elements that have to be distributed into just two entries in  groups.</p><p> 之所以需要e％len（groups），是因为在分成相等大小的组之后，剩下的元素可能比组中的条目还多。例如，如果g == 4且n == 11，则组最初设置为[4，4]，其中三个剩余元素必须仅分布到组中的两个条目中。</p><p> So, that code works and here&#39;s the output for various sizes of  n (and  g == 4):</p><p> 因此，该代码有效，这是n的各种大小（和g == 4）的输出：</p><p> 4 [4] 5 [5] 6 [6] 7 [7] 8 [4, 4] 9 [5, 4] 10 [5, 5] 11 [6, 5] 12 [4, 4, 4] 13 [5, 4, 4] 14 [5, 5, 4] 15 [5, 5, 5] 16 [4, 4, 4, 4] 17 [5, 4, 4, 4]</p><p> 4 [4] 5 [5] 6 [6] 7 [7] 8 [4，4] 9 [5，4] 10 [5，5] 11 [6，5] 12 [4，4，4] 13 [ 5，4，4] 14 [5，5，4] 15 [5，5，5] 16 [4，4，4，4] 17 [5，4，4，4] </p><p> But the code irritated me because I felt there must be a simple formula to work out how many elements should be in each group. After noodling on this problem I decided to do something that&#39;s often helpful... make the problem simple and naive, or, at least, the solution simple and naive, and so I wrote this code:</p><p>但是代码使我很恼火，因为我觉得必须有一个简单的公式来计算每个组中应该包含多少个元素。在解决了这个问题之后，我决定做一些通常有帮助的事情……使问题变得简单而幼稚，或者至少使解决方案变得简单而幼稚，所以我编写了这段代码：</p><p>  This is a really simple implementation. I don&#39;t like it because it loops  n times but it helps visualize something. Imagine that  g == 4 and  n == 17. This loop &#39;fills up&#39; each entry in  groups like this (each square is an entry in  groups and numbers in the squares are values of  i for which that entry was incremented by the loop).</p><p>  这是一个非常简单的实现。我不喜欢它，因为它可以循环n次，但可以帮助可视化某些东西。假设g == 4和n == 17。像这样的组中的每个条目（每个正方形都是组中的一个条目，正方形中的数字是该值通过循环递增的i的值）。</p><p>  So groups ends up being  [5, 4, 4, 4].  What this helps see is that the number of times  groups[i] is incremented depends on the number of times the  for loop &#39;loops around&#39; on the  ith element. And that&#39;s something that&#39;s easy to calculate without looping.</p><p>  因此，组最终为[5、4、4、4]。这有助于看到组[i]增加的次数取决于for循环＆＃39;循环＆＃39;的次数。在第ith个元素上。这很容易计算而不会循环。</p><p>   And to me that is more satisfying.  n//g is the size of  groups which makes the loop update each entry in  groups once. Each entry is set to  1 + max(0, n-(i+1))//(n//g). You can think of this as follows:  1. The  1 is the first element to be dropped into each entry in  groups.  2.  max(0, n-(i+1)) is the number of elements left over once you&#39;ve placed  1 in each of the elements of  groups up to position  i. It&#39;s divided by  n//g to work out how many times the process of sharing out elements (see the naive loop above) will loop around.</p><p>   对我来说，这更令人满意。 n // g是组的大小，它使循环一次更新组中的每个条目。每个条目设置为1 + max（0，n-（i + 1））//（n // g）。您可以这样认为：1. 1是要放入组中每个条目的第一个元素。 2. max（0，n-（i + 1））是在组中每​​个元素中放置1到位置i时剩余的元素数。用n // g除以计算出共享元素的过程（请参阅上面的朴素循环）将循环多少次。</p><p> If #2 there isn&#39;t clear, consider the image above and imagine we are computing  groups[0] ( n == 17 and  g == 4). We place  1 in  groups[0] leaving 16 elements to share out. If you naively shared them out you&#39;d loop around four times and thus need to add 16/4 elements to  groups[0]making it 5.  Move on to  groups[1] and place a  1 in it. Now there are 15 elements to share out, that&#39;s 15/4 (which is 3 in integer division) and so you place 4 in  groups[1]. And so on...</p><p> 如果＃2不清楚，请考虑上图，并假设我们正在计算groups [0]（n == 17和g == 4）。我们将1分组[0]，剩下16个元素可以共享。如果您天真地将它们共享出去，则需要循环四次，因此需要将16/4个元素添加到groups [0]中，使其成为5。移至groups [1]并在其中放置一个1。现在共有15个元素可供共享，即15/4（整数除法中为3），因此您将4个元素分组[1]。等等...</p><p> And that solution pleases me most. It succinctly creates  groups in one shot. Of course, I might have over thought this... and others might think the other solutions are clearer or more maintainable.</p><p> 该解决方案使我最满意。简洁地创建一组。当然，我可能已经考虑过了……其他人可能认为其他解决方案更清晰或更可维护。</p><p>  Python</p><p>  Python </p></div><div id="story_share_this"><div class="sharethis-inline-share-buttons"></div></div><div class="text-break sotry_link page_narrow"><a target="_blank" href="https://blog.cloudflare.com/creating-serendipity-with-python/">https://blog.cloudflare.com/creating-serendipity-with-python/</a></div><div class="story_tags page_narrow"><button type="button" class="btn btn-light my_tag"><a href="/tag/python/">#python</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/创建/">#创建</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/元素/">#元素</a></button></div></div><div class="my_movie_list_item shadow p-3 mb-5 bg-white rounded"><button type="button" class="btn btn-link my_tag"><a href="/tag/web2.0/">#web2.0</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/google/">#google</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/设计/">#设计</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/创意/">#创意</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/摄影/">#摄影</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/图片/">#图片</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/游戏/">#游戏</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/软件/">#软件</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/视频/">#视频</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/手机/">#手机</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/广告/">#广告</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/iphone/">#iphone</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/网站/">#网站</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/免费/">#免费</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/下载/">#下载</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/windows/">#windows</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/微软/">#微软</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/blog/">#blog</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/firefox/">#firefox</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/apple/">#apple</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/音乐/">#音乐</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/苹果/">#苹果</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/博客/">#博客</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/wordpress/">#wordpress</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/恶搞/">#恶搞</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/艺术/">#艺术</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/qq/">#qq</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/web/">#web</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/工具/">#工具</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/分享/">#分享</a></button></div></div></div><div id="my_footer"><div class=""><a href="/tags/">tags</a> <a href="/users/">users</a></div>&copy; 2020 diglog.com </div></div></body></html>