<!doctype html><html lang="zh-hans"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>MiniZork：功能冒险 MiniZork: A Functional Adventure</title><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"><link rel="stylesheet" href="/img/css.css?random="><link data-rh="true" rel="icon" href="/img/favicon.ico"/><script data-ad-client="ca-pub-6067137220025946" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script type="text/javascript" src="https://platform-api.sharethis.com/js/sharethis.js#property=5effb96910009800120b8d4d&product=inline-share-buttons" async="async"></script>
<script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?03c1a0f31299b4a2fbb83c34d6beaac9";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script></head><body><div id="my_header"><div class="container"><nav class="navbar navbar-expand-lg"><a class="navbar-brand" href="/"><img alt="diglog" src="/img/logo.v1.gif" class="rounded-sm"></a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarNavAltMarkup"><div class="navbar-nav"></div></div></nav></div></div><div class="container"><div id="my_content"><h1 class="page_narrow">MiniZork: A Functional Adventure<br/>MiniZork：功能冒险 </h1><div class="row"><div class="col-lg-12 col-12"><div class="my_story_list_item shadow p-3 mb-5 bg-white rounded"><div class="story_page_pub_time page_narrow">2021-02-06 20:25:01</div><div class="story_img_container"><a href="http://img2.diglog.com/img/2021/2/5c9fe7d5c4b31f86a0f4cec6d580bce3.png"><img src="http://img2.diglog.com/img/2021/2/5c9fe7d5c4b31f86a0f4cec6d580bce3.png" class="img-fluid my_story_img" onerror="this.style.display='none'"></a></div><div class="page_narrow text-break page_content"><p>One of the first video games I played was called  Scott Adams Adventure Games. At least according to what I could glean on the Internet. It was delivered with the computer that my father had bought in the very first days of personal computing, a time as old as World War II was for me at the time. This game was a variation on  Zork, a minimalist game invented at MIT. Truly minimalist... There was no image, just text, and you walked around the game writing commands in English, the majority of which sent back cryptic messages like: &#34;I don&#39;t understand&#34;. Worse, my knowledge of English at the time was rudimentary and I spent more time in the dictionary looking up vocabulary than playing. At least in the beginning...</p><p>我玩过的第一批视频游戏之一叫做Scott Scotts Adventure Games。至少根据我在互联网上搜集到的信息。它是随父亲在个人计算的第一天就购买的计算机一起提供的，当时这对我来说就像第二次世界大战一样古老。该游戏是麻省理工学院发明的极简主义游戏Zork的变体。真正的极简主义者……没有图像，只有文字，您走来走去用英语编写游戏命令，其中大多数命令都发回了一些隐秘的消息，例如：“我听不懂”。更糟糕的是，当时我的英语知识很初级，而且我在词典中花费的时间多于玩游戏。至少在一开始...</p><p> However,  Scott Adams Adventure Games, despite its archaic form, may have unconsciously influenced my interests: I spent a good part of my career writing Natural Language Processing (NLP) software.</p><p> 但是，斯科特·亚当斯冒险游戏（Scott Adams Adventure Games）尽管过时，但可能不自觉地影响了我的兴趣：我在职业生涯中花费了大量时间来编写自然语言处理（NLP）软件。</p><p> The sadism of video game designers can have terrifying effects afterwards. We can never say it enough. If further proof were needed, one need only look at the strange status of this game in geek culture: Sheldon, for example, plays  Zork in one of the episodes of  season 4 of Big Bang Theory. He quickly loses his temper, very quickly...</p><p> 视频游戏设计师的虐待狂之后可能会产生可怕的影响。我们永远不能说够。如果需要进一步的证据，则只需要看看这款游戏在怪胎文化中的奇怪地位即可：例如，谢尔顿（Sheldon）在《大爆炸理论》第4季的其中一集中扮演Zork。他很快发脾气，很快。</p><p> However, the mechanics of this game offers a unique opportunity to introduce some of the most interesting aspects of  functional programming...</p><p> 但是，这款游戏的机制为您提供了一个独特的机会，来介绍函数式编程的一些最有趣的方面...</p><p>      You can even debug the game directly by placing &#34;breakpoints&#34; with  ctrl-b. Then just execute the code with:  Ctrl-X d to enter the debugger.</p><p>      您甚至可以通过放置＆＃34; breakpoints＆＃34;来直接调试游戏。用ctrl-b。然后只需使用以下代码执行代码：Ctrl-X d进入调试器。</p><p>  The game consists of a 3x3 grid in which you can move around. Each square is associated with a description in the dictionary:  castlemap.</p><p>  游戏包含一个3x3的网格，您可以在其中移动。每个方块都与字典中的描述相关联：Castlemap。</p><p> ( setq castlemap {   &#34;1:1 &#34;:  &#34;You stand in front of a gate. &#34;   &#34;1:2 &#34;:  &#34;... &#34;   &#34;1:0 &#34;:  &#34;... &#34;   &#34;2:1 &#34;:  &#34;... &#34;   &#34;0:0 &#34;:  &#34;... &#34;   &#34;0:2 &#34;:  &#34;... &#34;   &#34;2:0 &#34;:  &#34;... &#34;   &#34;2:2 &#34;:  &#34;... &#34; })</p><p> （setq castlemap {＆＃34; 1：1＆＃34 ;:＆＃34;您站在大门前。＆＃34;＆＃34; 1：2＆＃34 ;:＆＃34;。 。＆＃34;＆＃34; ...＆＃34;＆＃34; 2：1＆＃34 ;:＆＃34; ...＆＃34 ;＆＃34：0＆＃34 ;:＆＃34; ...＆＃34; 0：2＆＃34 ;:＆＃34; ...＆＃34;＆＃34 ; 2：0＆＃34 ;:＆＃34; ...＆＃34;＆＃34; 2：2＆＃34 ;:＆＃34; ...＆＃34;}） </p><p> Each time you move in the grid, the game displays the corresponding description. There are a multitude of dictionaries and lists to record the objects present in the boxes, the dangers that await the traveler or the valid directions to go from one point to another.</p><p>每次您在网格中移动时，游戏都会显示相应的描述。有大量的词典和列表来记录框中出现的物体，等待旅行者的危险或从一个点到另一个点的有效方向。</p><p>  The game board is therefore limited to a few text descriptions that will be used for each move in the grid.</p><p>  因此，游戏板仅限于一些文字说明，这些文字说明将用于网格中的每一步。</p><p>  Finally, let&#39;s note that dictionary declaration is an interesting case of  lazy evaluation. Indeed,  LispE does not create a dictionary when it encounters a static definition but the sequence of commands to build it .</p><p>  最后，让我们注意字典声明是一个惰性求值的有趣案例。的确，当LispE遇到静态定义时，它不会创建字典，而是会生成该字典的命令序列。</p><p> ( defun  test(s) ( setq s { 1:x   &#34;a &#34;:   &#34;b &#34;}))  ; is compiled in the following form:( defun  test(s) ( setq s (key (key)  1 x)   &#34;a &#34;   &#34;b &#34;))</p><p> （defun test（s）（setq s {1：x＆＃34; a＆＃34 ;:＆＃34; b＆＃34;}））;以以下形式编译：（defun test（（setq s（key（key）1 x）＆＃34; a＆＃34;＆＃34; b＆＃34;））</p><p> key d k returns  nil or the value stored for key  k in dictionary  d.</p><p> 键d k返回nil或字典d中为键k存储的值。</p><p> key d k v initializes the dictionary  d with the key  k and the value  v and returns  d.</p><p> 键d k v用键k和值v初始化字典d并返回d。</p><p> In this way, the dictionary is only created on call, when the need arises. In fact, the &#34;{}&#34; are only syntactic sugar to make dictionaries easier to handle, as nested calls of  key have the unfortunate tendency to quickly become unreadable .</p><p> 这样，仅在需要时才在调用时创建字典。实际上，＆＃34; {}＆＃34;仅是使字典更易于使用的语法糖，因为不幸的是，键的嵌套调用往往会很快变得难以理解。 </p><p>  It is clear that the above description is not very original. On a Yawn Scale (YS) of 1 to 10, we approach 7 without any problem. Indeed, the difficulty is to analyze a command such as:  go west and to deduce that it is a direction. In the same way, we also want to be able to say:  take the stone and deduce that it is a matter of picking up an object on the ground.</p><p>显然，以上描述不是很原始。在1到10的哈欠标度（YS）上，我们可以毫无问题地接近7。确实，困难在于分析诸如以下的命令：往西走并推断出这是一个方向。同样，我们也想说：拿石头，推论这是在地面上捡起物体的问题。</p><p>  We are going to base all actions on the joint use of  Data Types and  Pattern Matching Functions, with a hint of  map and filter.</p><p>  我们将所有操作都基于数据类型和模式匹配功能的结合使用，并带有映射和过滤器提示。</p><p>  Input is done via the  input function which returns the string typed on the keyboard. The result is stored in the variable  dialog ( YS=6).</p><p>  通过输入函数完成输入，该函数返回在键盘上键入的字符串。结果存储在变量对话框中（YS = 6）。</p><p>  ( setq dialog (+ (upper (at dialog  0)) (lower (extract dialog  1 (size dialog))))) ( setq commands (map (\(x) (select (key synonyms x) x)) (split dialog   &#34;  &#34;)))   ; we transform each of our strings into atoms, for match sake   ; we remove useless words: the, a etc... ( setq commands (filter (\(x) ( not (key stopwords x))) (map &#39;atom commands))))</p><p>  （setq对话框（+（上（在对话框0））（下（提取对话框1（大小对话框））））））（setq命令（map（\（x）（select（关键同义词x）x）））（分割对话框＆＃34;＆＃34;）））为了匹配，我们将每个字符串转换为原子；我们删除了无用的单词：the，a ...（setq命令（filter（\（x）（不是（key stopwords x）））（map＆＃39; atom命令））））</p><p> The first line takes our command:  get the stone to turn it into:  Get the stone. In other words, we put the string in lowercase and we put the first letter in uppercase.</p><p> 第一行接受我们的命令：拿石头变成它：拿石头。换句话说，我们将字符串小写，将第一个字母大写。</p><p> The dialogue is then cut along spaces. We then check for each word if there is a synonym. The word  Get has a synonym (see the  synonyms dictionary in the code) which turns out to be the word  Take.</p><p> 对话然后沿着空格切开。然后，我们检查每个单词是否有同义词。单词Get具有一个同义词（请参阅代码中的同义词词典），该单词实际上是单词Take。</p><p>  The last line transforms this  string list into a  list of atoms, from which useless words ( stopwords) are removed.</p><p>  最后一行将字符串列表转换为原子列表，从中删除无用的单词（停用词）。 </p><p> Note the combination of  filter and  map which allows in two lines of code to replace words by their synonyms, to transform each of them into an atom and to remove those that are considered redundant. Finally, note the use of  (\(x)...) which is a more compact way of writing  (lambda(x)...).</p><p>请注意，filter和map的组合允许在两行代码中用其同义词替换单词，将每个单词转换为一个原子，并删除那些被认为多余的单词。最后，请注意使用（\（x）...），这是一种更紧凑的编写方式（lambda（x）...）。</p><p>   maybe is an instruction that could make you think of a  try/catch (YS=5). The instructions are executed in sequence, if one of them triggers an error, then the last line is executed:</p><p>   也许是一条使您想到尝试/抓住（YS = 5）的指令。指令按顺序执行，如果其中一个触发错误，则执行最后一行：</p><p>  Remember that  commands is a list of atoms which in this context will be evaluated as a data type. If this evaluation fails, we will display a random message from the list of error messages.</p><p>  请记住，命令是原子的列表，在这种情况下，原子将被视为数据类型。如果评估失败，我们将显示错误消息列表中的随机消息。</p><p>    (data [Move atom_] [Break atom_ atom_] [Open atom_ atom_] [Kill atom_ atom_] [Take atom_] [Drop atom_])</p><p>    （数据[移动原子_] [中断原子_] [打开原子_] [杀死原子_] [取原子] [拖放原子]）</p><p> These are the valid actions in the game... Note that the previous work consists in  matching these definitions with the text that the player has written. The synonyms and empty word filters have no other objective than to establish this correspondence.</p><p> 这些是游戏中的有效动作...请注意，先前的工作在于将这些定义与玩家​​编写的文本进行匹配。同义词和空单词过滤器除了建立这种对应关系外没有其他目的。</p><p> Moreover, we can then benefit from an intrinsic verification of the user declarations... If the sentence contains one word too many or too few, the system can immediately return an error message based on these declarations.</p><p> 此外，我们然后可以从用户声明的内在验证中受益……如果句子中包含一个单词太多或太少，则系统可以根据这些声明立即返回错误消息。</p><p> Thus,  maybe takes all its meaning. If the sentence does not correspond to one of the statements allowed here, an error message is immediately returned.</p><p> 因此，也许具有所有意义。如果该句子与此处允许的语句之一不符，则会立即返回错误消息。 </p><p>  But for the mechanics to be complete, one element is missing. We have shown how an utterance can be transformed into a data structure.</p><p>但是要使机制完整，就缺少一个要素。我们已经展示了话语如何可以转换为数据结构。</p><p>    (defpat action ([Take x] ) ...)  ; We can obviously define in advance the atoms we are looking for.  ; direction = north, south, west, east(defpat action ([Move &#39;north] ) ...)(defpat action ([Move &#39;south] ) ...)(defpat action ([Move &#39;west] ) ...)(defpat action ([Move &#39;east] ) ...)</p><p>    （defpat action（[Take x]）...）;我们显然可以预先定义我们要寻找的原子。 ;方向=北，南，西，东（defpat action（[Move＆＃39; north]）...）（defpat action（[Move＆＃39; south]）...）（defpat action（[Move＆＃39; ＃39; west]）...）（defpat action（[Move＆＃39; east]）...）</p><p> Thus, the  (action commands) call consists in choosing the function that corresponds to the data structure obtained after processing the player&#39;s command.</p><p> 因此，（动作命令）调用在于选择与处理播放器的命令之后获得的数据结构相对应的功能。</p><p> If  commands is not a valid data type, a first error message will be returned and caught by  maybe.</p><p> 如果命令不是有效的数据类型，则可能会返回并捕获第一条错误消息。</p><p>   It is important to note that the granularity of these different functions can vary depending on whether one wants to have a general or very fine-grain definition of the arguments. It is therefore quite simple to enrich the game mechanics with additional functions, and this in a rather robust way. Indeed, the alternative is to place cascades of  if in your functions, which can eventually have uncontrollable side effects, especially if you want to test many particular combinations of values. Unless, of course, you want to offer your code as a sacrifice to the  Great Spaghetti Monster.</p><p>   重要的是要注意，这些不同函数的粒度可能会有所不同，具体取决于是否要对参数进行常规或非常细粒度的定义。因此，用附加功能丰富游戏机制非常简单，而且这相当健壮。的确，替代方法是在函数中放置if的级联，最终可能会产生无法控制的副作用，尤其是当您要测试值的许多特定组合时。当然，除非您想将代码作为牺牲品献给Great Spaghetti Monster。</p><p> Thus, adding new  Data Types and thus new  Pattern Functions is done completely independently from the rest of the code, which ensures a form of stability that a cascade of  if or  switch can hardly offer, especially if they are at the heart of the game mechanics.</p><p> 因此，添加新的数据类型和新的图案功能完全独立于其余代码，从而确保了if或switch难以提供的稳定形式，尤其是在它们是游戏机制的核心的情况下。</p><p>  As can be seen, this code benefits from a joint use of data structures and pattern functions. Thus, syntax checking is covered by the simple declaration of data structures. As for execution, it consists in providing an  action function that takes these data structures as arguments.</p><p>  可以看出，该代码受益于数据结构和模式函数的联合使用。因此，语法检查由简单的数据结构声明覆盖。至于执行，它包括提供一个将这些数据结构作为参数的动作函数。 </p></div><div id="story_share_this"><div class="sharethis-inline-share-buttons"></div></div><div class="text-break sotry_link page_narrow"><a target="_blank" href="https://github.com/naver/lispe/wiki/8.-Mini-Zork:-A-functional-adventure">https://github.com/naver/lispe/wiki/8.-Mini-Zork:-A-functional-adventure</a></div><div class="story_tags page_narrow"><button type="button" class="btn btn-light my_tag"><a href="/tag/功能/">#功能</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/游戏/">#游戏</a></button></div></div><div class="my_movie_list_item shadow p-3 mb-5 bg-white rounded"><button type="button" class="btn btn-link my_tag"><a href="/tag/web2.0/">#web2.0</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/google/">#google</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/设计/">#设计</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/创意/">#创意</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/摄影/">#摄影</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/游戏/">#游戏</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/图片/">#图片</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/软件/">#软件</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/视频/">#视频</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/手机/">#手机</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/广告/">#广告</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/iphone/">#iphone</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/网站/">#网站</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/免费/">#免费</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/下载/">#下载</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/windows/">#windows</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/微软/">#微软</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/苹果/">#苹果</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/apple/">#apple</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/blog/">#blog</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/firefox/">#firefox</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/音乐/">#音乐</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/博客/">#博客</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/wordpress/">#wordpress</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/恶搞/">#恶搞</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/qq/">#qq</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/艺术/">#艺术</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/web/">#web</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/工具/">#工具</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/分享/">#分享</a></button></div></div></div><div id="my_footer"><div class=""><a href="/tags/">tags</a> <a href="/users/">users</a></div>&copy; 2020 diglog.com </div></div></body></html>