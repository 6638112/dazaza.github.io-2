<!doctype html><html lang="zh-hans"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>小米浏览器是间谍软件吗？ 是的，他们是（2020） </title><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"><link rel="stylesheet" href="/img/css.css?random="><link data-rh="true" rel="icon" href="/img/favicon.ico"/><script data-ad-client="ca-pub-6067137220025946" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script type="text/javascript" src="https://platform-api.sharethis.com/js/sharethis.js#property=5effb96910009800120b8d4d&product=inline-share-buttons" async="async"></script>
<script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?03c1a0f31299b4a2fbb83c34d6beaac9";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script></head><body><div id="my_header"><div class="container"><nav class="navbar navbar-expand-lg"><a class="navbar-brand" href="/"><img alt="diglog" src="/img/logo.v1.gif" class="rounded-sm"></a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarNavAltMarkup"><div class="navbar-nav"></div></div></nav></div></div><div class="container"><div id="my_content"><h1 class="page_narrow">小米浏览器是间谍软件吗？ 是的，他们是（2020） </h1><div class="row"><div class="col-lg-12 col-12"><div class="my_story_list_item shadow p-3 mb-5 bg-white rounded"><div class="story_page_pub_time page_narrow">2021-03-02 03:22:40</div><div class="story_img_container"><a href="http://img2.diglog.com/img/2021/3/3f92b179a7fcc129f878f37a1ec1eca9.png"><img src="http://img2.diglog.com/img/2021/3/3f92b179a7fcc129f878f37a1ec1eca9.png" class="img-fluid my_story_img" onerror="this.style.display='none'"></a></div><div class="page_narrow text-break page_content"><p>万一您错过了它，在小米手机上预装了《福布斯》关于Mi Browser Pro和Mint Browser的文章。该文章指责小米泄露了所有访问过的网站的历史记录。另一方面，小米指责福布斯歪曲事实。他们声称数据收集遵循最佳做法，数据本身经过汇总和匿名处理，与用户身份没有任何关系。</p><p>  如果您关注我的博客已有一段时间，那么您可能会发现这种说法很熟悉。在发现用户从事间谍活动之后，浏览器供应商从附加商店中提取了扩展程序，这几乎与Avast的通信方式完全相同。最后，我得到了证明，如果您允许我轻描淡写，他们的数据匿名化尝试只会取得一定程度的成功。</p><p> 鉴于《福布斯》的文章和所涉及的安全研究人员似乎都没有提供任何技术细节，所以我想自己看看。我反编译了Mint Browser 3.4.0并寻找了线索。这不是最新版本，以防万一小米已经对《福布斯》的文章进行了修改以编写代码。更新（2020-05-08）：如果不需要技术说明，则较新的文章将概述此问题。</p><p> 免责声明：我认为这是我第一次分析较大的Android应用程序，因此请耐心等待。即使全局看起来似乎很清楚，我也可能会误解一件事或另一件事。另外，我的结论完全基于代码分析，我从未见过这种浏览器的实际应用。</p><p>   《福布斯》（Forbes）文章解释说，数据正在传输到Sensors Analytics后端。然后，小米文章提供了重要的线索：sa.api.intl.miui.com是此后端的主机名。然后，他们继续说明小米所拥有的服务器而不是第三方。但是他们只是在试图分散我们的注意力：如果将来自浏览器的敏感数据发送到该服务器，我为什么要关心谁拥有它？</p><p> 我们在类miui.globalbrowser.common_business.g.i中找到了该服务器名称（是的，某些软件包和类名称已被修改）。在一些初始化代码中使用了它：</p><p>  查找A.e，原来是国家/地区代码。因此，这里的i.a静态成员最终保留了端点URL，并填写了用户的国家/地区代码。该类在类的初始化函数中使用： </p><p>公共无效a（最终上下文c）{SensorsDataAPI。 sharedInstance（this。c = c，i。a，this。d）; SensorsDataAPI。 sharedInstance（）。标识（com.xiaomi.misatistic.sdk.e.a（this.c））;这 。 C （）;这 。 d（）;这 。 e（）;这 。 b（）; }</p><p> Sensors Analytics API是公共的，因此我们可以查找SensorsDataAPI类，并了解到第一个sharedInstance（）调用创建了一个实例并设置了其服务器URL。接下来的行调用identify（）为此实例设置一个“匿名ID”，该匿名ID将与每个数据点一起发送，稍后再介绍。</p><p> 对this.c（）的调用也值得一提，因为这将设置一系列附加属性，每个请求都将发送这些附加属性：</p><p> public void c（）{final JSONObject jsonObject = new JSONObject（）; jsonObject。 put（＆＃34; uuid＆＃34;，（Object）com。xiaomi。misatistic。sdk e.a（this.c））; int n; if（H.f（miui.globalbrowser.common.a.a（）））{n = 1; } else {n = 0; } jsonObject。放置（＆＃34; internet_status＆＃34;，n）; jsonObject。放（＆＃34; platform＆＃34;，（Object）＆＃34; AndroidApp＆＃34;）; jsonObject。 put（＆＃34; miui_version＆＃34;，（Object）Build $ VERSION。INCREMENTAL）;最终字符串e = A。 e; a（e）; jsonObject。放（＆＃34; miui_region＆＃34;，（Object）e）; jsonObject。放（＆＃34; system_language＆＃34;，（Object）A。b）; SensorsDataAPI。 sharedInstance（this .c）。 registerSuperProperties（jsonObject）; }</p><p> 为了以防万一，我们有作为uuid参数发送的相同“匿名ID”。此外，正在发送常规版本，区域，语言数据。</p><p> 对我来说，弄清楚该类是从哪里初始化的并不是很简单。结果来自类miui.globalbrowser.common_business.g.b：</p><p> 公共静态无效a（final String s，final Map＆lt; String，String＆gt; map）{a（s，map，true）; } public static void a（final String s，final Map＆lt; String，String＆gt; map，final boolean b）{if（b）{i。一种 （）。 a（s，map）; } miui。全球浏览器。 common_business。 G 。 d。一种 （）。 a（s，map）; } </p><p>因此，miui.globalbrowser.common_business.g.b.a（）调用将默认将第三个参数设置为true。此调用访问单例miui.globalbrowser.common_business.gi实例（如果不存在，将创建该实例），并使其实际跟踪事件（s是此处的事件名称，map是除了默认值之外还发送的参数）那些）。额外的miui.globalbrowser.common_business.g.d.a（）调用触发了我未调查的MiStatistics分析框架。</p><p> 就是这样。现在，我们必须找到在代码miui.globalbrowser.common_business.g.b类中使用的位置以及接收的数据。所有这些数据都将定期发送到Sensors后端。</p><p>  查找com.xiaomi.mistatistic.sdk.e.a（）最终会产生与小米博客文章中引用的代码非常接近的ID生成代码：</p><p> 公共静态字符串d（最终Context上下文）{if（！TextUtils.isEmpty（（CharSequence）y.g））{返回y。 G ;最终的long currentTimeMillis = System。 currentTimeMillis（）;最终字符串a = L。 a（context，＆＃34; anonymous_id＆＃34;，＆＃34;＆＃34;）;最后的长a2 = L。 a（context，＆＃34; aigt＆＃34;，0 L）;最后的长a3 = L。 a（context，＆＃34; anonymous_ei＆＃34;，7776000000 L）; if（！TextUtils.isEmpty（（CharSequence）a）＆amp;＆amp; currentTimeMillis-a2＆lt; a3）{y。 g = a; }其他{L。 b（context，＆＃34; anonymous_id＆＃34;，y。g = UUID。randomUUID（）。toString（））; } L。 c（context，＆＃34; aigt＆＃34;，currentTimeMillis）;返回y。 G ; }</p><p> L.a（）调用正在从带有fallback的context.getSharedPreferences（）中检索一个值。 L.b（）和L.c（）调用将在其中存储一个值。因此，小米试图告诉我们：“看，ID是随机生成的，与用户没有任何关系。并且每90天更新一次！”</p><p> 即使对于随机生成的ID，现在90天也是一个相当长的时间间隔。有了足够的数据点，应该很容易从中推断出用户的身份。但是还有另一个问题。看到那个喜好了吗？它的价值是什么？</p><p> 这里的意图似乎是aigt是生成ID的时间戳。因此，如果该时间戳记与当前时间偏离的时间超过了77.76亿毫秒（90天），那么将生成一个新的ID。但是，此实现有很多问题，它将在每次调用时更新aigt，而不是仅在生成新ID时更新。因此，唯一会生成新ID的情况是：90天未调用此方法，这意味着浏览器在90天未启动。而且这种情况不太可能发生，因此必须考虑将此ID永久化。 </p><p>如果还不够，那就另当别论了。如果您再次查看SensorsDataAPI类，您将看到当登录ID不可用时，“匿名ID”仅是一个备用。此处的登录ID是什么？我们会在miui.globalbrowser.common_business.g.i类中找到它：</p><p> public void b（）{最终帐户a = miui。全球浏览器。常见的 。 C 。 b。 a（this。c）; if（a！= null＆amp;！TextUtils.isEmpty（（CharSequence）a.name））{SensorsDataAPI。 sharedInstance（）。登录名（。名称）; }}</p><p> 这就是它的样子：一个小米帐户ID。因此，如果用户登录到浏览器，则跟踪数据将连接到其小米帐户。而且该链接至少链接到用户的电子邮件地址，也可能链接到其他标识参数。</p><p>  如上所述，我们需要查看调用miui.globalbrowser.common_business.g.b类方法的位置。通常，这些对于产品分析来说是非常典型的，例如：</p><p> 最终HashMap＆lt;字符串，字符串＆gt; hashMap =新的HashMap＆lt;字符串，字符串＆gt;（）; if（例如。getCause（）！= null）{hashMap。 put（＆＃34; cause＆＃34 ;，例如，getCause（）。toString（））； } miui。全球浏览器。 common_business。 G 。 b。一个（＆＃34; rv_crashed＆＃34;，hashMap）;</p><p> 因此发生了崩溃，并通知了供应商有关此问题的信息。在其他地方，数据表明已打开用户界面的特定元素，这对于改进产品也是非常有用的信息。然后在com.miui.org.chromium.chrome.browser.webview.k类中有以下内容：</p><p> public void onPageFinished（最终WebView WebView，最终String d）{... if（！this.c＆amp;！TextUtils.isEmpty（（CharSequence）d））{miui。全球浏览器。 common_business。 G 。 b。 a（＆＃34; page_load_event_finish＆＃34;，＆＃34; url＆＃34 ;，这个。a（d））； } ...} public void onPageStarted（最终的WebView webView，最终的String e，最终的位图位图）{... if（！this.b＆amp;＆！TextUtils.isEmpty（（CharSequence）e））{miui。全球浏览器。 common_business。 G 。 b。 a（＆＃34; page_load_event_start＆＃34;，＆＃34; url＆＃34 ;，这个。a（e））； } ...} </p><p>这就是将所有访问过的网站发送到分析服务器的代码。在页面开始加载时一次，在页面加载完成时一次。小米博客文章解释了为什么存在此代码：“收集URL来识别加载缓慢的Web网页；这使我们能够洞悉如何最好地改善整体浏览性能。”</p><p> 您相信这个解释吗？因为我不是。如果这一切都是关于慢速网站的原因，为什么不在本地计算页面加载时间而仅发送慢速网站呢？对于隐私而言，这仍然不是很好，但是比小米实际实施的要好一个数量级。如果我们要承担无能而不是恶意的事情，小米确实需要加倍努力。如何确定发送所有访问的地址是一个很好的妥协？那个决定中甚至考虑过隐私吗？他们今天还会做出同样的决定吗？如果没有，他们如何调整流程以反映这一点？</p><p> 但是，在更多情况下，他们的分析代码会收集过多的数据。在com.miui.org.chromium.chrome.browser.omnibox.NavigationBar类中，我们将看到：</p><p>  因此，从导航栏中进行搜索不仅会跟踪所使用的搜索引擎，还会跟踪您搜索的内容。在类miui.globalbrowser.download.J中，我们看到例如：</p><p> 最终HashMap＆lt;字符串，字符串＆gt; hashMap =新的HashMap＆lt;字符串，字符串＆gt;（）; hashMap。放（＆＃34; op＆＃34;，s）; hashMap。 put（＆＃34; suffix＆＃34;，s2）; hashMap。放（＆＃34; url＆＃34;，s3）;如果（d。c（s4））{s =＆＃34; privacy＆＃34; ; } else {s =＆＃34; general＆＃34; ; } hashMap。放（＆＃34; type＆＃34;，s）; b。一个（＆＃34; download_files＆＃34;，hashMap）;</p><p> 这不仅是在跟踪文件已下载的事实，而且还跟踪URL的下载情况。小米可能在这里有什么样的合法权益？</p><p> 然后，该浏览器似乎为YouTube视频提供了一些自定义用户界面。几乎所有内容都在此跟踪，例如在miui.globalbrowser.news.YMTSearchActivity类中： </p><p>小米为什么需要知道人们在YouTube上搜索了什么？不仅如此，他们似乎在其他地方收集有关人们观看哪些视频以及花费多少时间的数据。小米似乎也知道人们在其快速拨号中配置了哪些网站，以及何时单击它们。这不会给人留下好印象，毕竟它可以是监视功能吗？</p><p>  如果您使用Mint Browser（大概是Mi Browser Pro），则小米不仅会知道您访问了哪些网站，而且还知道您搜索的内容，观看的视频，下载的内容以及添加到“快速拨号”页面的网站。哎呀，他们甚至跟踪哪个色情网站触发了提醒，切换到隐身模式！是的，如果小米希望任何人相信这不是恶意的，他们还有很多事情要做。</p><p> 也不能维持该数据被匿名化的说法。即使使用随机的用户ID（错误地认为是永久性的）来推断用户的身份也应该很容易，但我们之前已经看到过。但是，如果知道的话，他们还会传输用户的小米帐户ID，该ID直接与用户的身份相关联。</p><p> 小米现在宣布，他们将以隐身模式关闭已访问网站的集合。这是朝着正确方向迈出的一步，尽管这一步很小。他们还会以隐身模式收集所有其他数据吗？即使没有，为什么还要在常规浏览期间收集这么多数据呢？有什么原因可以证明所有这些侵犯隐私行为是合理的？</p><p> 更新（2020-05-07）：我研究了Mint Browser 3.4.3中与隐私相关的更改。这是一个比听起来更大的改进，可以完全禁用“统计”收集功能。但是，您必须确保已打开“隐身模式”和“增强隐身模式”，这是唯一可以保护您隐私的配置。 </p></div><div id="story_share_this"><div class="sharethis-inline-share-buttons"></div></div><div class="text-break sotry_link page_narrow"><a target="_blank" href="https://palant.info/2020/05/04/are-xiaomi-browsers-spyware-yes-they-are.../">https://palant.info/2020/05/04/are-xiaomi-browsers-spyware-yes-they-are.../</a></div><div class="story_tags page_narrow"><button type="button" class="btn btn-light my_tag"><a href="/tag/2020/">#2020</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/软件/">#软件</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/浏览器/">#浏览器</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/browsers/">#browsers</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/小米/">#小米</a></button></div></div><div class="shadow p-3 mb-5 bg-white rounded clearfix"><div class="container"><div class="row"><div class="col-sm"><div><a target="_blank" href="/story/1050198.html"><img src="http://img2.diglog.com/img/2021/3/thumb_e8dcc4dd8b243993d5bf961109943a21.jpg" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1050198.html">自2020年3月以来，美国每家Apple Store商店都首次开放，许多商店都以Express店面形式开始提供店内购物 </a></div><span class="my_story_list_date">2021-3-2 2:14</span></div><div class="col-sm"><div><a target="_blank" href="/story/1050049.html"><img src="http://img2.diglog.com/img/2021/3/thumb_25901c446ff97d93212d8c5754436d74.jpg" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1050049.html">我们已经失去的是：2020年灭绝的物种 </a></div><span class="my_story_list_date">2021-3-1 9:48</span></div><div class="col-sm"><div><a target="_blank" href="/story/1050008.html"><img src="http://img2.diglog.com/img/2021/3/thumb_962dc4b0de14b4cec18d753ca424754a.jpg" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1050008.html">捍卫迈尔斯·布里格斯（2020） </a></div><span class="my_story_list_date">2021-3-1 4:33</span></div><div class="col-sm"><div><a target="_blank" href="/story/1049900.html"><img src="http://img2.diglog.com/img/2021/2/thumb_ba944b6007de49519a9dca2d6984bbf4.jpg" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1049900.html">亚马逊雨林岩石艺术``描绘了巨大的冰河时代生物''（2020） </a></div><span class="my_story_list_date">2021-2-28 12:40</span></div></div></div></div><div class="my_movie_list_item shadow p-3 mb-5 bg-white rounded"><button type="button" class="btn btn-link my_tag"><a href="/tag/web2.0/">#web2.0</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/google/">#google</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/设计/">#设计</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/创意/">#创意</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/摄影/">#摄影</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/游戏/">#游戏</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/图片/">#图片</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/软件/">#软件</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/视频/">#视频</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/手机/">#手机</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/广告/">#广告</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/apple/">#apple</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/iphone/">#iphone</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/网站/">#网站</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/免费/">#免费</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/下载/">#下载</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/windows/">#windows</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/微软/">#微软</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/firefox/">#firefox</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/苹果/">#苹果</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/blog/">#blog</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/音乐/">#音乐</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/博客/">#博客</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/wordpress/">#wordpress</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/恶搞/">#恶搞</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/艺术/">#艺术</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/qq/">#qq</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/web/">#web</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/谷歌/">#谷歌</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/工具/">#工具</a></button></div></div></div><div id="my_footer"><div class=""><a href="/tags/">tags</a> <a href="/users/">users</a></div>&copy;2012-2021 diglog.com </div></div></body></html>