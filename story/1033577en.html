<!doctype html><html lang="zh-hans"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>从红宝石切换到水晶</title><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"><link rel="stylesheet" href="/img/css.css?random="><link data-rh="true" rel="icon" href="/img/favicon.ico"/><script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?03c1a0f31299b4a2fbb83c34d6beaac9";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script><script data-ad-client="ca-pub-6067137220025946" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script type="text/javascript" src="https://platform-api.sharethis.com/js/sharethis.js#property=5effb96910009800120b8d4d&product=inline-share-buttons" async="async"></script></head><body><div id="my_header"><div class="container"><nav class="navbar navbar-expand-lg"><a class="navbar-brand" href="/"><img alt="diglog" src="/img/logo.v1.gif" class="rounded-sm"></a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarNavAltMarkup"><div class="navbar-nav"></div></div></nav></div></div><div class="container"><div id="my_content"><h1 class="page_narrow">从红宝石切换到水晶</h1><div class="row"><div class="col-lg-12 col-12"><div class="my_story_list_item shadow p-3 mb-5 bg-white rounded"><div class="story_page_pub_time page_narrow">2020-11-07 11:02:12</div><div class="story_img_container"><a href="http://img2.diglog.com/img/2020/11/944fb0b3442b920c08a39a6346233bed.png"><img src="http://img2.diglog.com/img/2020/11/944fb0b3442b920c08a39a6346233bed.png" class="img-fluid my_story_img" onerror="this.style.display='none'"></a></div><div class="page_narrow text-break page_content"><p>Do you love Ruby? Do you wish there was a better version of Ruby with blazing-fast performance like C? Well, your prayers have been answered. Let me introduce you to Crystal. The internet is calling it “Slick as Ruby, fast as C”.</p><p>你爱鲁比吗？你是否希望有一个更好的Ruby版本，像C一样具有超快的性能？好了，你的祈祷已经应验了。让我向你介绍克里斯托。互联网称其为“像红宝石一样圆滑，像C一样快”。</p><p> Since its inception, developers have loved the Ruby programming language for its simplicity, focus on developer satisfaction, and productivity.</p><p>自从Ruby编程语言问世以来，开发人员就一直喜欢它的简单性、专注于开发人员满意度和生产率。</p><p> Ruby (and the Rails framework) has given rise to some of the legendary startups of the past decade, including Twitter, Github, AirBnB, Shopify, Soundcloud, and many more.</p><p>Ruby(和Rails框架)在过去十年中催生了一些传奇的初创公司，包括Twitter、Github、Airbnb、Shopify、Soundcloud等等。</p><p> However, the main drawback of Ruby is performance and scalability. Being an interpreted language, Ruby is not as performant as C/C++, Rust, and Go.</p><p>然而，Ruby的主要缺点是性能和可伸缩性。作为一种解释性语言，Ruby的性能不如C/C++、Rust和Go。</p><p> Although not impossible, it is hard to scale a Ruby on Rails application. Moreover, the lack of static types in Ruby makes it hard to refactor code as the development team grows. Crystal, on the other hand, comes with all the good parts of Ruby but none of its drawbacks.</p><p>虽然并非不可能，但很难扩展Ruby on rails应用程序。此外，Ruby中缺少静态类型，这使得随着开发团队的发展很难重构代码。另一方面，Crystal拥有Ruby的所有优点，但没有缺点。</p><p> ✔️ Crystal has beautiful syntax like Ruby ✔️ Crystal’s performance is comparable to C ✔️ Crystal supports native C bindings ✔️ Static Types and powerful macros for metaprograming ✔️ Crystal has Rails and Sinatra like web frameworks</p><p>✔️Crystal拥有与Ruby类似的漂亮语法，✔️Crystal的性能与C相当，✔️Crystal支持原生C绑定、✔️静态类型以及用于元编程的强大宏。✔️Crystal拥有Rails和Sinatra之类的Web框架。</p><p>  You will be able to write Ruby code directly in Crystal shell and vice versa. Like Ruby, Crystal is focused on keeping developers happy and productive. Ruby developers feel right at home with Crystal syntax. Take this example for instance (a Fibonacci series function 🌀):</p><p>您将能够直接在Crystal Shell中编写Ruby代码，反之亦然。和Ruby一样，Crystal专注于让开发者开心和高效。Ruby开发人员对Crystal语法非常熟悉。以此为例(斐波纳契级数函数🌀)：</p><p>  This code snippet is identical for both Ruby and Crystal. Due to the similar syntax, it is an absolute breeze to migrate from one to the other.</p><p>此代码片段对于Ruby和Crystal都是相同的。由于语法相似，从一个迁移到另一个绝对是轻而易举的事。</p><p> Installing Crystal and setting up your development environment is also very straightforward. You can install Crystal with a couple simple commands in any Linux distro or Mac. Take a look at the official  guide here. However, you need to install a Linux subsystem to run Crystal on windows. I suggest Ubuntu 18.04 or higher.</p><p>安装Crystal和设置开发环境也非常简单。只需几个简单的命令，你就可以在任何Linux发行版或Mac上安装Crystal。请看这里的官方指南。不过，您需要安装Linux子系统才能在Windows上运行Crystal。我建议使用Ubuntu 18.04或更高版本。</p><p>   In most benchmarks, Crystal performs better than Go, Python, and Node.js. Below are a couple links that compares Crystal’s performance with other programming languages:</p><p>在大多数基准测试中，Crystal的性能都好于Go、Python和Node.js。以下是将Crystal的性能与其他编程语言进行比较的几个链接：</p><p>  Crystal is built on top of the LLVM framework. This is the secret behind Crystal’s blazing performance. LLVM is the same framework that compiles C/C++ code to byte code.</p><p>Crystal构建在LLVM框架之上。这就是克里斯托火爆表演背后的秘密。LLVM与将C/C++代码编译为字节码的框架相同。</p><p>  With Crystal, you can effortlessly bind to your existing C libraries and code. This allows developers to handle low-level tasks in the application with native C libraries, further boosting performance.</p><p>使用Crystal，您可以毫不费力地绑定到现有的C库和代码。这允许开发人员使用本机C库处理应用程序中的低级任务，从而进一步提高性能。</p><p>    First, we can compile this with  gcc -c hello.c -o hello.o , and then call it inside a Crystal script, like below:</p><p>首先，我们可以使用GCC-c hello.c-o hello.o编译它，然后在Crystal脚本中调用它，如下所示：</p><p>   One of the awesome features of Crystal is its static type system. It helps developers catch bugs in compile time. Dynamically typed languages such as Ruby and Python allow developers to write code with ease and deliver features quickly. However, over time as our code base and the team grows, it becomes harder to refactor and maintain this code.</p><p>Crystal的一个令人敬畏的特性是它的静态类型系统。它可以帮助开发人员在编译时捕获错误。Ruby和Python等动态类型语言允许开发人员轻松编写代码并快速交付功能。然而，随着时间的推移，随着我们的代码库和团队的增长，重构和维护这些代码变得越来越困难。</p><p>  You can write code in Crystal just like any dynamically typed language. The compiler will only complain and require you to explicitly specify types in cases of ambiguity.</p><p>您可以用Crystal编写代码，就像任何动态类型的语言一样。在有歧义的情况下，编译器只会抱怨并要求您显式指定类型。</p><p>  Let’s take a look at the web frameworks available for Crystal. If you like Rails or Phoenix, then you will love the Amber framework for Crystal.</p><p>让我们来看看Crystal可用的Web框架。如果你喜欢Rails或Phoenix，那么你一定会喜欢Crystal的琥珀框架。</p><p> Amber is built around the same philosophy of Rails (convention over configuration). Another promising framework is  Lucky, also inspired by Rails. Both of these frameworks have an amazing documentation and a community of passionate developers actively contributing to the code base.</p><p>Amber是围绕着相同的Rails理念构建的(约定重于配置)。另一个很有前途的框架是Lucky，它的灵感也来自Rails。这两个框架都有令人惊叹的文档和热情的开发人员社区，他们积极为代码库做出贡献。</p><p> On the other hand, if you are a fan of lightweight web frameworks like Flask, Express.js (Node.js), and Sinatra, then take a look at  Kemal. Still not convinced?</p><p>另一方面，如果你是Flask、Express.js(Node.js)和Sinatra等轻量级Web框架的粉丝，那么看看Kemal吧。还没被说服？</p><p> Well, take a look at these  performance benchmarks for web frameworks. Crystal frameworks perform very well compared to other web frameworks, and the response time for Crystal’s frameworks is in the sub milliseconds.</p><p>那么，让我们来看看这些Web框架的性能基准。与其他web框架相比，Crystal框架的性能非常好，Crystal框架的响应时间在亚毫秒级。</p><p>  Crystal has a powerful macro system for metaprogramming. It can be used for a range of things such as basic templating, AST inspection, types inspection, and running arbitrary external programs. [source:  https://crystal-lang.org ]</p><p>Crystal有一个强大的元编程宏系统。它可以用于一系列事情，如基本模板、AST检查、类型检查和运行任意外部程序。[来源：https://crystal-lang.org]。</p><p> Take this code snippet for instance. We can generate modules, classes, and structs with this simple function:</p><p>以下面的代码片段为例。我们可以用这个简单的函数生成模块、类和结构：</p><p> macro define_class(module_name, class_name, method, content) module {{module_name}} class {{class_name}} def initialize(@name : String) end def {{method}} {{content}} + @name end end endend# This generates:# module Foo# class Bar# def initialize(@name : String)# end## def say# &#34;hi &#34; + @name# end# end# enddefine_class Foo, Bar, say, &#34;hi &#34;p Foo::Bar.new(&#34;John&#34;).say # =&gt; &#34;hi John&#34;</p><p>宏DEFINE_CLASS(MODULE_NAME，CLASS_NAME，METHOD，CONTENT)模块{{MODULE_NAME}}CLASS{{CLASS_NAME}}def Initialize(@name：String)end def{{Method}}{{Content}}+@name end#这将生成：#MODULE FOO#class Bar#def Initialize(@name：String)#end##def say#&#34；hi&#34；+@name#end#end#endDefine_class Foo，Bar。P foo：：Bar.new(&#34；John&34；).Say#=&gt；&34；Hi John&34；</p><p>   Crystal uses something called fibers to achieve concurrency. Fibers are similar to operating system threads, but lightweight. Executing is managed internally by the process. A program can spawn multiple fibers, and Crystal will execute them efficiently to optimize performance.</p><p>Crystal使用一种称为光纤的东西来实现并发性。纤程类似于操作系统线程，但重量较轻。执行由进程在内部管理。一个程序可以产生多个纤维，Crystal将高效地执行它们以优化性能。</p><p> Fibers are very similar to Go Routines. Here’s an example for spawning a fiber:</p><p>纤维与围棋套路非常相似。下面是一个生成纤维的示例：</p><p>   Crystal allows communication of data between different fibers without having to share memory or worry about locks. Crystal does this with channels, which are inspired by  CSP (Communicating Sequential Process)</p><p>Crystal允许不同光纤之间的数据通信，而不必共享内存或担心锁定。Crystal通过通道做到了这一点，通道的灵感来自CSP(通信顺序进程)。</p><p>  Currently Crystal doesn’t support parallelism. However, the team is working to get this feature into the stable version.</p><p>目前Crystal不支持并行性。然而，该团队正在努力将这一功能引入稳定版本。</p><p> If you are curious and want to geek out, feel free to read the crystal  documentation on concurrency models.</p><p>如果您有好奇心，并且想要极客，请随意阅读有关并发模型的水晶文档。</p><p>  If you’ve been developing software for some time, you already know that every piece of technology has its limitations. The main drawback for Crystal is that it is the new kid in the block. Many consider Crystal and its ecosystems to be immature and not production ready.</p><p>如果你已经开发了一段时间的软件，你已经知道每一项技术都有它的局限性。Crystal的主要缺点是它是市场上的新手。许多人认为克里斯托及其生态系统还不成熟，还没有做好生产准备。</p><p> While this is true to some extent, it also opens up the possibility of you being ahead of the herd to adapt to this shiny new tool. Electric Vehicle Startup Nikola Motors is using Crystal to power their software in production. You can read their story  here.</p><p>虽然这在某种程度上是正确的，但它也开启了你在适应这个闪亮的新工具方面走在前列的可能性。电动汽车初创企业尼古拉汽车公司正在生产中使用Crystal为他们的软件提供动力。你可以在这里读到他们的故事。</p><p> The libraries available for Crystal are also somewhat limited. The available libraries for Crystal are not as diverse compared to Ruby’s Gems or Node’s npm packages.</p><p>Crystal可用的库也有些有限。与Ruby的Gems或Node的NPM包相比，Crystal的可用库没有那么多。</p><p> Finally, if you are trying to build a niche product and solve a very specific problem, you might not be able to find documentation. For instance, I was trying to spin off a GraphQL server with Crystal. While there are some good examples in Github, I was unable to find any proper documentation or tutorials on this topic.</p><p>最后，如果您试图构建一个利基产品并解决一个非常具体的问题，您可能找不到文档。例如，我试图用Crystal剥离一台GraphQL服务器。虽然Github中有一些很好的例子，但我找不到任何关于这个主题的适当文档或教程。</p><p>  Crystal brings all the good parts of Ruby and none of its limitations. It is easy to migrate from Ruby to Crystal and vice versa. Crystal is fast, has a beautiful Ruby-like syntax, static types, and powerful features like macros for meta-programming. However, like every technology, Crystal has its own limitations.</p><p>Crystal带来了Ruby的所有优点，但没有任何局限性。很容易从Ruby迁移到Crystal，反之亦然。Crystal速度快，拥有漂亮的类似Ruby的语法、静态类型和强大的功能，比如用于元编程的宏。然而，像所有技术一样，Crystal也有其自身的局限性。</p><p> The main limitation of Crystal is that it is not as mature as Ruby, Node, or Python. With a growing community of passionate developers backing Crystal, it might not take long for it to be the next big player in web development. As a Rubyist myself, I know I am keeping a close eye on Crystal’s development.</p><p>Crystal的主要限制是它不像Ruby、Node或Python那样成熟。随着越来越多热情的开发人员支持Crystal，它可能用不了多久就会成为网络开发领域的下一个重要参与者。作为一名红宝石爱好者，我知道我正在密切关注Crystal的发展。</p><p>    You come here a lot! We hope you enjoy the  LogRocket blog. Could you fill out a survey about what you want us to write about?</p><p>你经常来这里！我们希望你喜欢LogRocket博客。你能填一份关于你想让我们写些什么的调查问卷吗？</p><p> Which, if any, do you think would help you reproduce errors more effectively?      A solution to see exactly what a user did to trigger an error   Proactive monitoring which automatically surfaces issues   Having a support team triage issues more efficiently</p><p>如果有的话，你认为哪一个会帮助你更有效地复制错误？一种解决方案，可以查看用户究竟做了什么来触发错误主动监控，从而更有效地自动发现具有支持团队分诊问题的问题。</p><p> Thanks! Interested to hear how LogRocket can improve your bug fixing processes? Leave your email:</p><p>谢谢!。想知道LogRocket如何改进您的漏洞修复过程吗？请留下您的电子邮件：</p><p> LogRocket is a frontend application monitoring solution that lets you replay problems as if they happened in your own browser. Instead of guessing why errors happen, or asking users for screenshots and log dumps, LogRocket lets you replay the session to quickly understand what went wrong. It works perfectly with any app, regardless of framework, and has plugins to log additional context from Redux, Vuex, and @ngrx/store.</p><p>LogRocket是一个前端应用程序监控解决方案，它可以让您重现问题，就好像它们发生在您自己的浏览器中一样。LogRocket不是猜测错误发生的原因，也不是要求用户提供屏幕截图和日志转储，而是让你重播会话，快速了解哪里出了问题。它与任何应用程序完美兼容，无论框架如何，并且有插件可以记录Redux、Vuex和@ngrx/store的其他上下文。</p><p> In addition to logging Redux actions and state, LogRocket records console logs, JavaScript errors, stacktraces, network requests/responses with headers + bodies, browser metadata, and custom logs. It also instruments the DOM to record the HTML and CSS on the page, recreating pixel-perfect videos of even the most complex single-page apps.</p><p>除了记录Redux操作和状态之外，LogRocket还记录控制台日志、JavaScript错误、堆栈跟踪、带有标题+正文的网络请求/响应、浏览器元数据和自定义日志。它还利用DOM记录页面上的HTML和CSS，即使是最复杂的单页面应用程序也可以重新创建像素完美的视频。</p><p> Try it for free.</p><p>免费试用一下。</p></div><div id="story_share_this"><div class="sharethis-inline-share-buttons"></div></div><div class="text-break sotry_link page_narrow"><a target="_blank" href="https://blog.logrocket.com/why-you-should-switch-from-ruby-to-crystal/">https://blog.logrocket.com/why-you-should-switch-from-ruby-to-crystal/</a></div><div class="story_tags page_narrow"><button type="button" class="btn btn-light my_tag"><a href="/tag/ruby/">#ruby</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/切换/">#切换</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/crystal/">#crystal</a></button></div></div><div class="my_movie_list_item shadow p-3 mb-5 bg-white rounded"><button type="button" class="btn btn-link my_tag"><a href="/tag/web2.0/">#web2.0</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/google/">#google</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/设计/">#设计</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/游戏/">#游戏</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/创意/">#创意</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/apple/">#apple</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/苹果/">#苹果</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/摄影/">#摄影</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/软件/">#软件</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/美国/">#美国</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/iphone/">#iphone</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/图片/">#图片</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/手机/">#手机</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/视频/">#视频</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/广告/">#广告</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/免费/">#免费</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/谷歌/">#谷歌</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/网站/">#网站</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/windows/">#windows</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/微软/">#微软</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/下载/">#下载</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/firefox/">#firefox</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/音乐/">#音乐</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/linux/">#linux</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/blog/">#blog</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/博客/">#博客</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/程序/">#程序</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/艺术/">#艺术</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/web/">#web</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/wordpress/">#wordpress</a></button></div></div></div><div id="my_footer"><div class=""><a href="/tags/">tags</a> <a href="/users/">users</a></div>&copy; 2020 diglog.com </div></div></body></html>