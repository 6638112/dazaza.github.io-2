<!doctype html><html lang="zh-hans"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>恢复Sun Sparcstation IPX第3部分：SCSI2SD，Solaris安装和扩展 Restoring a Sun SPARCstation IPX Part 3: SCSI2SD, Solaris Install and Expansion</title><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"><link rel="stylesheet" href="/img/css.css?random="><link data-rh="true" rel="icon" href="/img/favicon.ico"/><script data-ad-client="ca-pub-6067137220025946" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script type="text/javascript" src="https://platform-api.sharethis.com/js/sharethis.js#property=5effb96910009800120b8d4d&product=inline-share-buttons" async="async"></script>
<script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?03c1a0f31299b4a2fbb83c34d6beaac9";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script></head><body><div id="my_header"><div class="container"><nav class="navbar navbar-expand-lg"><a class="navbar-brand" href="/"><img alt="diglog" src="/img/logo.v1.gif" class="rounded-sm"></a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarNavAltMarkup"><div class="navbar-nav"></div></div></nav></div></div><div class="container"><div id="my_content"><h1 class="page_narrow">Restoring a Sun SPARCstation IPX Part 3: SCSI2SD, Solaris Install and Expansion<br/>恢复Sun Sparcstation IPX第3部分：SCSI2SD，Solaris安装和扩展 </h1><div class="row"><div class="col-lg-12 col-12"><div class="my_story_list_item shadow p-3 mb-5 bg-white rounded"><div class="story_page_pub_time page_narrow">2021-05-05 20:25:57</div><div class="page_narrow text-break page_content"><p>The  first post in this series introduced the Sun SPARCstation IPX and focused on replacing the electrolytic capacitors in its dead PSU, followed by replacing the NVRAM used to store the Ethernet address and Sun hostid along with configuration similar to that set with a PC via its BIOS. The  second post then went on to cover cleaning up the plastic enclosures, some additional PSU work and then addressing a persistent NVRAM issue by rescuing the original device.</p><p>本系列中的第一篇文章介绍了Sun Sparcstation IPX，并专注于更换其死PSU中的电解电容，然后更换用于存储以太网地址和Sun HostID的NVRAM以及通过其BIOS的配置类似于使用PC的配置。 。然后第二个帖子继续覆盖清理塑料外壳，一些额外的PSU工作，然后通过拯救原始设备来解决持久的NVRAM问题。</p><p>  In the final post in this series, we take a look at installing a SCSI-to-SD storage adapter, before going on to install a fresh copy of the Solaris operating system.</p><p>  在本系列的最终帖子中，我们可以查看在继续安装SCSI-to-SD存储适配器，然后继续安装Solaris操作系统的新副本。</p><p>      The SCSI drive fitted in the Sparcstation appears to work well and while it’s advisable to exercise vintage drives now and again, there was also thought that it may also last a little longer if it’s not being run all the time. In addition, to which 207MB is not an enormous amount of storage and an obligatory shot of the drive with a 32GB Micro SD for comparison can be seen above.</p><p>      SPARCSTATION的SCSI驱动器似乎很好，而现在又一次地建议锻炼复古驱动器，也认为如果它没有一直运行，它也可能持续时间更长。此外，在其上面可以看到207MB不是巨大的储存量，并且可以看出具有32GB微型SD的驱动器的义务射击，以进行比较。</p><p>    Handily a  board can be bought which takes an SD card for storage and then uses this to provide one or more SCSI drives. The latest version of SCSI2SD, version 6, provides support for emulating up to 7x drives and these can be a mixture of hard disk drives and optical drives.</p><p>    可以购买一个板，可以购买一个用于存储的SD卡，然后使用它来提供一个或多个SCSI驱动器。最新版本的SCSI2SD，版本6，提供了对模拟高达7倍驱动器的支持，这些支持可以是硬盘驱动器和光驱的混合。</p><p>    In order to fit this into the IPX chassis, it was necessary to make up a new slightly longer SCSI cable, which was done using RS Pro 50-way ribbon cable    (289-9981)   and 3M IDC cable mount socket connectors    (828-0412)  . The original cable can be seen above on the left, with the new custom length cable on the right.</p><p>    为了将其拟合到IPX机箱中，有必要弥补新的稍长的SCSI电缆，该电缆是使用RS Pro 50路带电缆（289-9981）和3M IDC电缆安装插座连接器（828-0412 ）。最初的电缆可以在左侧看到，具有新的自定义长度电缆右侧。</p><p>    The SCSI2SD board has firmware and it’s generally a good idea to update this to the latest available. Download links are provided on the wiki, but this can also be built from source and the steps for doing this on Ubuntu Linux 20.04 are shown next.</p><p>    SCSI2SD板具有固件，通常是将此更新到最新可用的好主意。 Wiki上提供了下载链接，但下一步也可以由源代码构建，下次显示在Ubuntu Linux 20.04上执行此操作的步骤。</p><p>    $ sudo apt install gcc-arm-none-eabi dfu-util automake-1.15 libgtk2.0-dev$ curl https://bootstrap.pypa.io/pip/2.7/get-pip.py --output get-pip.py$ sudo python2 get-pip.py$ sudo pip2 install intelhex</p><p>    $ sudo apt安装gcc-arm-none-eabi dfu-utum automake-1.15 libgtk2.0-dev$ curl https://bootstrap.pypa.io/pip/2.7/get-pip.py --output get-pip.py$ sudo python2 get-pip.py$ sudo pip2安装Intelhex </p><p>  Note that some other tools may need to be installed if you don’t have these already, but if this is the case it should be fairly clear what needs to be installed from the resulting error when building.</p><p>请注意，如果您没有这些，可能需要安装一些其他工具，但如果这是这种情况，则应该相当清楚构建时需要从生成的错误中安装的内容。</p><p>    $ git clone --recursive git://www.codesrc.com/git/SCSI2SD-V6$ cd SCSI2SD-V6$ ln -s Makefile.2020c Makefile$ make -j4</p><p>    $ git clone  -  rocursive git：//www.codesrc.com/git/scsi2sd-v6$ cd scsi2sd-v6$ ln -s makefile.2020c makefile$ make -j4.</p><p>  A symbolic link was created to Makefile.2020c since this was a “Version 6 2020c” board, but obviously, if you have a different build you would need to use the correct Makefile.</p><p>  创建一个符号链接以Makefile.2020C，因为这是一个“版本6 2020c”板，但显然，如果您有不同的构建，则需要使用正确的makefile。</p><p>          And then run make again. However, we didn’t have much success getting this to build and could be that, since it doesn’t use cmake or configure, you need to manually edit files to suit your system. Although there also didn’t seem to be much in the way of documentation or an issue tracker etc.</p><p>          然后再次运行。但是，我们没有太大的成功实现这一点，可以构建，并且由于它不使用CMake或配置，因此您需要手动编辑文件以适合您的系统。虽然文档或问题跟踪器等似乎也没有太多。</p><p>  Looking on GitHub there do appear to be a number of forks of this codebase and  one from user jwakely appeared promising, since there was a  commit that added an option to use the system’s installed build of dfu-util, instead of trying to build this (which was proving problematic). Hence this was cloned and built with:</p><p>  在GitHub上查看此代码库的一些叉子，并且用户从用户出现了一个有希望的叉子，因为提交了一个使用该系统安装的DFU-utic的构建的选项，而不是尝试构建这个（这证明了问题）。因此，这是克隆和建造的：</p><p>    We actually had to run the make command a few times until the scsi2sd-util6 binary was built. Note also that running “sudo make install” is not advised, as this installs to /usr/bin/. Although of course, you can easily move the binary to a more appropriate location, such as /usr/local/bin.</p><p>    我们实际上必须几次运行make命令，直到scsi2sd-util6 binary建造。请注意，不建议运行“sudo make安装”，因为这将安装到/ usr / bin /。虽然当然，您可以轻松地将二进制文件移动到更合适的位置，例如/ usr / local / bin。</p><p>  Hopefully the above will be useful to others who would like to build the utility from source and if some obvious mistake was being made when trying to build the upstream version, or simple changes to the make infrastructure were all that was needed, please comment below.</p><p>  希望上面的其他人对自己的人有用，他们希望从来源建立实用程序，如果在尝试构建上游版本时进行了一些明显的错误，或者需要简单的制作基础架构的更改，请评论以下。 </p><p>      Now that we have the latest firmware and scsi2sd-util6 — both either simply downloaded or built from source — we can move on to updating the board and configuring storage.</p><p>现在我们拥有最新的固件和SCSI2SD-UTI  - 无论是简单地下载还是由源代码下载 - 我们可以继续更新电路板和配置存储。</p><p>  Since it accesses the USB port and no udev rules are provided, we need to run scsi2sd-util6 with sudo (or we could of course create some rules).</p><p>  由于它访问USB端口而且没有提供UDEV规则，因为我们需要使用sudo运行scsi2sd-util6（或者我们当然可以创建一些规则）。</p><p>    In the File menu there is an Upgrade Firmware option, where we can select the firmware and then proceed to plug in the board and — if all goes according to plan — we should see an output in the debug log similar to that shown above.</p><p>    在“文件”菜单中，有一个升级固件选项，在那里我们可以选择固件，然后继续插入电路板，然后 - 如果全部进行根据计划 - 我们应该在类似于上面所示的调试日志中看到输出。</p><p>    We can now move on to configuration. The general settings can be seen above and those required will vary depending upon the system and whether this supports parity and whether bus termination is required at the drive etc. We also have a tab for each emulated drive and it’s often the case that you cannot simply configure as large a storage device as you like, for example. Since vintage systems are more likely to have fairly low hard limits and may even only recognise certain vendors and models of drive. Hence it can be advisable to try to emulate a particular known device.</p><p>    我们现在可以继续配置。上面可以看出常规设置，所需的设置将根据系统而变化，以及这是否支持奇偶校验以及驱动器等是否需要总线终端等。我们还有一个标签为每个模拟驱动器，它通常是您不能简单的情况例如，根据需要配置大量存储设备。由于复古系统更有可能具有相当低的硬限制，甚至可以识别某些供应商和型号的驱动器。因此，可以建议尝试模仿特定已知的设备。</p><p>    A quick web search turned up a page which detailed recommended settings for  using a SPARCstation 10 together with SCSI2SD and the NeXTSTEP O/S. So the same settings were used and an emulated drive was configured with SCSI ID 3, 2GB in size and a sector size of 512 bytes. The configuration was then exported from the GUI to an XML file and sectoresPerTrack edited to be 139 and headsPerCylinder to 4, before re-importing and uploading to the board.</p><p>    快速Web搜索启动了一个页面，该页面详细使用sparcstation 10与scsi2sd和nextstep o / s一起使用sparcstation 10。因此，使用相同的设置，并且模拟驱动器配置了SCSI ID 3，2GB的大小，扇区大小为512字节。然后，在重新导入和上传到电路板之前，将从GUI导出到XML文件和编辑为139的XML文件和SectoresEspertrack到4，并将其上载到4.</p><p>    The SCSI2SD was then cabled up to the SPARCstation and a quick test performed before re-assembling, just in case the drive configuration needed to be tweaked.</p><p>    然后将SCSI2SD连接到SPARCStation和在重新组装之前执行的快速测试，以防可以调整驱动器配置。</p><p>    Fortunately, upon executing probe-scsi at the OpenBoot prompt we received confirmation that the IPX could see a SCSI disk with target 3, along with an external CDROM drive that was connected.</p><p>    幸运的是，在OpenBoot提示处执行探测器-SCSI时，我们收到了确认IPX可以看到具有目标3的SCSI磁盘以及连接的外部CDROM驱动器。 </p><p>      It was decided to install a pretty early version of the Solaris operating system which dates back to around the time of the SPARCstation IPX being introduced, Solaris 1.1. This packages SunOS 4.1.3 UNIX together with the OpenWindows Desktop Version 3.</p><p>它决定安装一个漂亮的早期版本的Solaris操作系统，这些系统可以追溯到SparcStation IPX的时间，Solaris 1.1。此软件包Sunos 4.1.3 Unix以及OpenWindows桌面版本3。</p><p>    Installation is reasonably straightforward and involves booting from CDROM, selecting a drive to install to and formatting this.</p><p>    安装完全直截了当，涉及从CDROM启动，选择要安装和格式化的驱动器。</p><p>    The first stage of installation results in a “miniroot” being written to disk — a minimal bootable image. Following which the system is booted from this and installation is resumed. There were just two small issues: firstly, it appeared that the installer did not like the year 2021 being entered as the date, so this ended up being set to 1998. The second issue was that when entering a static IP address starting “10.” it didn’t give the opportunity to enter a network mask, but then it was realised that the RFCs for  CIDR were not issued until one year after this O/S release!</p><p>    安装的第一阶段会导致写入磁盘的“minirooot” - 最小可引导图像。以下系统从中启动系统，恢复安装。只有两个小问题：首先，它似乎将安装人员不喜欢作为日期输入的2021年，所以这最终被设置为1998年。第二个问题是进入静态IP地址开始“10时。 “它没有机会进入网络掩码，但是，它意识到CIDR的RFC没有发出，直到O / S发布后一年！</p><p>      Above is a short video of the system booting, logging in and starting a few simple applications.</p><p>      以上是系统启动，登录和启动几个简单应用程序的短视频。</p><p>      The collection includes a number of additional SCSI expansion units. Above the CDROM drive here we can see an external HDD enclosure, stacked on top of which is a DDS-2 tape drive which can store up to 4GB uncompressed and 8GB compressed on a DAT-based tape cassette. The last peripheral, at the very top, is a 150MB quarter-inch cartridge (QIC) tape drive. This is possibly the most useful, since it dates back to around the time of the IPX and you occasionally come across software distributed using this format. However, this is also in a pretty bad state and looks like it’s been stored somewhere damp, hence may take quite a bit of work to restore it.</p><p>      该集合包括许多额外的SCSI扩展单元。在此处的CDROM驱动器上方，我们可以看到一个外部硬盘机箱，堆叠在顶部，它是DDS-2磁带机，可以存储高达4GB的未压缩和8GB在基于Dat的磁带盒上压缩。最后一个外围设备，在顶部是一个150mb四分之一英寸盒（qic）磁带机。这可能是最有用的，因为它可以追溯到IPX的时间，并且您偶尔会跨越使用此格式分发的软件。然而，这也是一个非常糟糕的状态，看起来它已经存储了一些潮湿，因此可能需要很多工作来恢复它。</p><p>    SPARCstations also made provision for internal expansion via SBus cards, which is a 32-bit address and data bus based standard that could transfer up to 100MB/s, which was pretty fast for its time. The IPX provides two SBus expansion slots. The card pictured above is a Transputer link adapter, which could be used to enable a Sun workstation to be used as a front-end processor for a Transputer-based parallel processing system — an accelerator for compute-intensive workloads.</p><p>    SPARCSTATIONS还通过SBUS卡进行内部扩展，这是一个32位地址和基于数据总线的标准，可以转移到100MB / s，这对其时间非常快。 IPX提供两个SBus扩展插槽。上面示出的卡是转换链路适配器，可用于使Sun工作站能够用作基于转换器的并行处理系统的前端处理器 - 用于计算密集型工作负载的加速器。</p><p>  One neat feature of SBus cards is that they have a PROM whose contents firstly identify the card and its characteristics, and secondly may contain an optional software driver. If provided this driver is written in a Forth based language and in fact the OpenBoot console (BIOS) is also Forth-based. Unfortunately, the card shown above came with blank EEPROMs and so I’d be keen to hear from anyone else who happens to have a Parsytec BBK SBus card, with EEPROMs that might be copied.</p><p>  SBUS卡的一个整洁特征是，他们有一个舞会，其内容首先识别卡及其特征，其次可能包含可选的软件驱动程序。如果提供此驱动程序以基于最权的语言编写，实际上也是openBoot控制台（BIOS）也是基于索引的。不幸的是，上面所示的卡片带有空白的EEPROM，因此我热衷于听从可能被复制的EEPROM与PARSYTEC BBK SBUS卡的其他任何人都听到的。 </p><p>    Restoring the SPARCstation IPX has been a fun project and it&#39;s great to finally have a working system of the sort that I desperately wanted to own as a teenager, but which was very far beyond my reach. In addition to which there are a few potential future projects that would make use of this and while somewhat more the slow burn type, I hope to eventually share details in due course.</p><p>恢复sparcstation ipx一直是一个有趣的项目，它很棒，最终有一个工作系统，我拼命想要拥有一个少年，但这远远超出了我的范围。 除此之外，还有一些潜在的未来项目将利用这一点，而且虽然有些更慢的燃烧类型，我希望最终在适当时候分享细节。 </p></div><div id="story_share_this"><div class="sharethis-inline-share-buttons"></div></div><div class="text-break sotry_link page_narrow"><a target="_blank" href="https://www.rs-online.com/designspark/restoring-a-sun-sparcstation-ipx-part-3-scsi2sd-solaris-install-and-expansion">https://www.rs-online.com/designspark/restoring-a-sun-sparcstation-ipx-part-3-scsi2sd-solaris-install-and-expansion</a></div><div class="story_tags page_narrow"><button type="button" class="btn btn-light my_tag"><a href="/tag/sun/">#sun</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/安装/">#安装</a></button></div></div><div class="my_movie_list_item shadow p-3 mb-5 bg-white rounded"><button type="button" class="btn btn-link my_tag"><a href="/tag/web2.0/">#web2.0</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/google/">#google</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/设计/">#设计</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/创意/">#创意</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/摄影/">#摄影</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/图片/">#图片</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/游戏/">#游戏</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/软件/">#软件</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/视频/">#视频</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/广告/">#广告</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/手机/">#手机</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/iphone/">#iphone</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/网站/">#网站</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/apple/">#apple</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/windows/">#windows</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/免费/">#免费</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/下载/">#下载</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/微软/">#微软</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/firefox/">#firefox</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/blog/">#blog</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/苹果/">#苹果</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/音乐/">#音乐</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/博客/">#博客</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/wordpress/">#wordpress</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/恶搞/">#恶搞</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/qq/">#qq</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/web/">#web</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/艺术/">#艺术</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/工具/">#工具</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/分享/">#分享</a></button></div></div></div><div id="my_footer"><div class=""><a href="/tags/">tags</a> <a href="/users/">users</a></div>&copy;2012-2021 diglog.com </div></div></body></html>