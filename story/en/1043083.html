<!doctype html><html lang="zh-hans"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>适用于Python用户的Rust模块系统 The Rust module system for Python users</title><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"><link rel="stylesheet" href="/img/css.css?random="><link data-rh="true" rel="icon" href="/img/favicon.ico"/><script data-ad-client="ca-pub-6067137220025946" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script type="text/javascript" src="https://platform-api.sharethis.com/js/sharethis.js#property=5effb96910009800120b8d4d&product=inline-share-buttons" async="async"></script>
<script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?03c1a0f31299b4a2fbb83c34d6beaac9";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script></head><body><div id="my_header"><div class="container"><nav class="navbar navbar-expand-lg"><a class="navbar-brand" href="/"><img alt="diglog" src="/img/logo.v1.gif" class="rounded-sm"></a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarNavAltMarkup"><div class="navbar-nav"></div></div></nav></div></div><div class="container"><div id="my_content"><h1 class="page_narrow">The Rust module system for Python users<br/>适用于Python用户的Rust模块系统 </h1><div class="row"><div class="col-lg-12 col-12"><div class="my_story_list_item shadow p-3 mb-5 bg-white rounded"><div class="story_page_pub_time page_narrow">2021-01-04 12:38:30</div><div class="page_narrow text-break page_content"><p>Every time I go back to Rust, I have to figure out how the module system works again. Here are some of my notes comparing it to Python’s module system.</p><p>每次回到Rust时，我都必须弄清楚模块系统是如何工作的。这是我将其与Python的模块系统进行比较的一些说明。</p><p>    A  crate is a build target in Rust. A crate can either be a library or a binary. It can be built with  cargo build.</p><p>    板条箱是Rust中的构建目标。板条箱可以是库，也可以是二进制文件。可以用货物建造。</p><p> In Python, libraries are called “packages”. Binaries are an entirely heterogenous concept, typically installed by configuring  entry points. Such a binary doesn’t even need to be Python code (for example, it can be a shell script instead).</p><p> 在Python中，库称为“包”。二进制文件是一个完全异构的概念，通常通过配置入口点来安装。这样的二进制文件甚至不需要是Python代码（例如，它可以是Shell脚本）。</p><p>  A  package in Rust consists of up to one library crate and any number of binary crates. (It’s required that there be at least one library or binary crate.)</p><p>  Rust中的一个软件包最多包含一个库条板箱和任意数量的二进制板条箱。 （要求至少有一个库或二进制箱。）</p><p> In Python, a single “distribution package” (i.e. one that you can  pip install) can contain multiple “import packages” (i.e. one that you can  import), while Rust allows at most one import package per distribution package.</p><p> 在Python中，一个“分发包”（即可以pip安装的包）可以包含多个“导入包”（即可以导入的包），而Rust最多允许每个分发包一个导入包。</p><p>   Python places  __init__.py at the root of a package to indicate that it’s importable as a package. Similarly, Rust conventionally puts  lib.rs at the root of a crate as the library  crate root. (Unlike Python, the name can be re-configured, but  lib.rs is the default.)</p><p>   Python将__init__.py放在包的根目录中，以指示它可以作为包导入。同样，Rust通常将lib.rs放置在板条箱的根目录中，作为库板条箱的根目录。 （与Python不同，该名称可以重新配置，但默认为lib.rs。）</p><p> In Python,  __main__.py corresponds to the main entry point for the module when run with  python -m. Rust conventionally puts  main.rs as a binary crate root. (This can also be renamed, which is probably desirable if you have more than one binary.)</p><p> 在Python中，__main__.py对应于使用python -m运行时模块的主入口点。 Rust通常将main.rs作为二进制条板箱根。 （也可以重命名，如果您有多个二进制文件，则可能需要这样做。） </p><p>  In Python, all modules are available by importing them via their filesystem path name. For example,  import foo.bar first looks for a  foo/ directory on the  PYTHONPATH. Then it looks for a  bar/ package or a  bar.py module underneath the  foo/ directory.</p><p>在Python中，所有模块都可以通过其文件系统路径名导入来使用。例如，import foo.bar首先在PYTHONPATH上查找foo /目录。然后，它在foo /目录下寻找bar /包或bar.py模块。</p><p> In Rust, modules also correspond to their paths on the filesystem (by default;  you can use the  path attribute to change this behavior). However, they are not immediately  use-able just because the corresponding file is present! They must be declared with a  mod foo; declaration in the crate root file (e.g.  lib.rs).</p><p> 在Rust中，模块还对应于文件系统上的路径（默认情况下；您可以使用path属性更改此行为）。但是，仅由于存在相应的文件，它们不能立即使用！必须用mod foo声明它们；板条箱根文件中的声明（例如lib.rs）。</p><p>  In Python, a nested module  foo.bar is implemented either by  foo/bar.py or  foo/bar/__init__.py. You can’t use both. If you want to have sub-modules of  foo.bar, you’ll place additional modules or packages under  foo/bar/.</p><p>  在Python中，嵌套模块foo.bar由foo / bar.py或foo / bar / __ init__.py实现。您不能同时使用两者。如果您想要foo.bar的子模块，则可以将其他模块或软件包放在foo / bar /下。</p><p> A statement like  from foo.bar import qux could either be importing a symbol declared in  foo/bar/__init__.py or the module  foo/bar/qux.py. Some developers choose to explicitly re-export the public interface of  bar in  __init__.py for clarity, and prefix sub-modules with underscores (e.g.  _qux.py instead of  qux.py).</p><p> 类似于foo.bar import qux的语句可以导入在foo / bar / __ init__.py或模块foo / bar / qux.py中声明的符号。为了清晰起见，一些开发人员选择在__init__.py中显式重新导出bar的公共接口，并在子模块前加下划线（例如_qux.py而不是qux.py）。</p><p> In Rust, you use  foo/bar.rs to declare members of the namespace  foo::bar. If you also want to have sub-namespaces of bar (e.g.  foo::bar::qux), then you additionally create the  bar/ directory alongside  bar.rs. To access a sub-namespace  qux inside  bar.rs, the line  mod qux; must be added to  bar.rs. (This is similar to how we have to add  mod foo; at the top-level  lib.rs.)</p><p> 在Rust中，您使用foo / bar.rs声明名称空间foo :: bar的成员。如果您还希望拥有bar的子命名空间（例如foo :: bar :: qux），则可以在bar.rs旁边另外创建bar /目录。要访问bar.rs内的子命名空间qux，请在行mod qux;中输入：必须添加到bar.rs。 （这类似于我们在顶级lib.rs中添加mod foo的方式。）</p><p> To re-export the namespace and make it available to all users outside of  bar, it should be changed to  pub mod qux;.</p><p> 要重新导出名称空间并使它对bar以外的所有用户可用，应将其更改为pub mod qux;。</p><p> The main take-away is that Rust requires the explicit re-exporting of nested modules using  mod at each step of the hierarchy, while Python does not.</p><p> 主要的收获是，Rust要求在层次结构的每个步骤中使用mod显式重新导出嵌套模块，而Python则不需要。 </p></div><div id="story_share_this"><div class="sharethis-inline-share-buttons"></div></div><div class="text-break sotry_link page_narrow"><a target="_blank" href="https://blog.waleedkhan.name/rust-modules-for-python-users/">https://blog.waleedkhan.name/rust-modules-for-python-users/</a></div><div class="story_tags page_narrow"><button type="button" class="btn btn-light my_tag"><a href="/tag/rust/">#rust</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/python/">#python</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/module/">#module</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/bar/">#bar</a></button></div></div><div class="my_movie_list_item shadow p-3 mb-5 bg-white rounded"><button type="button" class="btn btn-link my_tag"><a href="/tag/web2.0/">#web2.0</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/google/">#google</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/设计/">#设计</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/创意/">#创意</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/摄影/">#摄影</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/游戏/">#游戏</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/图片/">#图片</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/软件/">#软件</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/视频/">#视频</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/手机/">#手机</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/广告/">#广告</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/iphone/">#iphone</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/网站/">#网站</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/免费/">#免费</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/windows/">#windows</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/下载/">#下载</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/苹果/">#苹果</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/微软/">#微软</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/apple/">#apple</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/firefox/">#firefox</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/blog/">#blog</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/音乐/">#音乐</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/博客/">#博客</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/wordpress/">#wordpress</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/恶搞/">#恶搞</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/qq/">#qq</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/艺术/">#艺术</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/web/">#web</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/工具/">#工具</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/分享/">#分享</a></button></div></div></div><div id="my_footer"><div class=""><a href="/tags/">tags</a> <a href="/users/">users</a></div>&copy; 2020 diglog.com </div></div></body></html>