<!doctype html><html lang="zh-hans"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>EME、CDM、AES、CENC和密钥-DRM的构建块</title><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"><link rel="stylesheet" href="/img/css.css?random="><link data-rh="true" rel="icon" href="/img/favicon.ico"/><script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?03c1a0f31299b4a2fbb83c34d6beaac9";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script><script data-ad-client="ca-pub-6067137220025946" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script type="text/javascript" src="https://platform-api.sharethis.com/js/sharethis.js#property=5effb96910009800120b8d4d&product=inline-share-buttons" async="async"></script></head><body><div id="my_header"><div class="container"><nav class="navbar navbar-expand-lg"><a class="navbar-brand" href="/"><img alt="diglog" src="/img/logo.v1.gif" class="rounded-sm"></a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarNavAltMarkup"><div class="navbar-nav"></div></div></nav></div></div><div class="container"><div id="my_content"><h1 class="page_narrow">EME、CDM、AES、CENC和密钥-DRM的构建块</h1><div class="row"><div class="col-lg-12 col-12"><div class="my_story_list_item shadow p-3 mb-5 bg-white rounded"><div class="story_page_pub_time page_narrow">2020-11-03 10:15:19</div><div class="story_img_container"><a href="http://img2.diglog.com/img/2020/11/f00ec143b09c6ed81089059fe9b1a7fe.png"><img src="http://img2.diglog.com/img/2020/11/f00ec143b09c6ed81089059fe9b1a7fe.png" class="img-fluid my_story_img" onerror="this.style.display='none'"></a></div><div class="page_narrow text-break page_content"><p>Anyone trying to understand DRM (Digital Rights Management) will be confronted with acronyms such as AES, CDM, CENC, EME, etc. This can get very confusing for a newcomer, but understanding them is important to get a good understanding of DRM. In this article, let’s take a gentle tour of the building blocks of DRM:- EME, CDM, AES, CENC, and the use of Keys &amp; Key Servers.</p><p>任何试图理解DRM(数字版权管理)的人都将面对AES、CDM、CENC、EME等缩写。这对于新手来说可能会非常混乱，但理解它们对于很好地理解DRM是很重要的。在本文中，让我们简单介绍一下DRM的构建块：EME、CDM、AES、CENC，以及Keys&amp；密钥服务器的使用。</p><p>    As we saw  in the previous article,  DRM is a combination of encryption and business rules to control access and consumption of digital content.</p><p>正如我们在前一篇文章中看到的，DRM是加密和业务规则的组合，用于控制数字内容的访问和消费。</p><p>  provides the tools and infrastructure to enable a content provider to encrypt their content, and</p><p>提供工具和基础架构，使内容提供商能够加密其内容，并且。</p><p> build an ecosystem around the encrypted content so that the content provider can control who/what can decrypt and consume their content.</p><p>围绕加密内容构建生态系统，以便内容提供商可以控制谁/什么可以解密和使用其内容。</p><p> In the previous article of the series, we saw Ram and Shyam sending coded messages to each other. At the same time, Hari maintained the codebooks and decided who got to read/write the notes – remember?</p><p>在本系列的前一篇文章中，我们看到了Ram和Shyam互相发送编码消息。与此同时，哈里维护着代码簿，并决定谁来读/写笔记-记得吗？</p><p>  Now, let’s take this simple system and replace it with the technology needed to secure and distribute video. What do we get?</p><p>现在，让我们将这个简单的系统替换为保护和分发视频所需的技术。我们能得到什么？</p><p>  Let’s describe what we have here. There is a movie that we want to send to an authenticated user securely.</p><p>让我们描述一下我们这里有什么。有一部电影我们想要安全地发送给经过身份验证的用户。</p><p>  we ask a DRM company’s server for a codebook to encrypt our video,</p><p>我们向DRM公司的服务器请求一个码本来加密我们的视频，</p><p>   the user then asks the DRM company’s server for the codebook to unlock the video (decrypt it)</p><p>然后，用户向DRM公司的服务器索要码本以解锁视频(解密)。</p><p>   Nope! What we have here is a simple, toy-example of how to transfer movies securely using DRM. It captures the essence of DRM perfectly but wouldn’t work well in the real world.</p><p>不要啊！我们这里有一个简单的玩具示例，演示如何使用DRM安全地传输电影。它完美地捕捉了DRM的本质，但在现实世界中不能很好地工作。</p><p> In the rest of this article, let’s take each piece of this simple system, re-think it, re-design it, and see how it fits within the world of video delivery and DRM, shall we?</p><p>在本文的其余部分中，让我们将这个简单系统的每一部分都重新思考、重新设计，看看它如何适应视频交付和DRM的世界，好吗？</p><p>  Before we talk about the order, let’s modify our example to suit the ABR ( Adaptive  Bit Rate) model of video delivery.</p><p>在我们讨论订单之前，让我们修改我们的示例，以适应视频交付的ABR(自适应比特率)模型。</p><p> ABR Refresher: in ABR, a movie is encoded into different bitrate-resolution combinations  (a.k.a ladder) and then split into  chunks or segments. Each chunk represents a few seconds of video and it is independently decodable.</p><p>ABR刷新器：在ABR中，一部电影被编码成不同的码率-分辨率组合(也就是梯子)，然后拆分成不同的块或片段。每个块代表几秒钟的视频，并且它是可独立解码的。</p><p> “Packaging” refers to chunking or breaking up a movie into small pieces and describing it in a manifest or playlist document. When the user wants to play the movie, he needs to refer to this manifest.</p><p>“打包”指的是将一部电影分块或分解成小片，并在清单或播放列表文档中对其进行描述。当用户想要播放电影时，他需要参考此清单。</p><p> Depending on the available bandwidth, the player requests a chunk/segment of a particular bitrate  (rendition, or rung of the ladder) and a CDN (Content Delivery Network) responds with the requested chunk.</p><p>根据可用带宽，播放器请求特定比特率的块/段(再现，或阶梯的横档)，并且CDN(内容递送网络)用所请求的块进行响应。</p><p> Popular methods of video delivery using ABR are MPEG DASH and HLS. For a deeper understanding, please refer to our articles on  OTT and  ABR video streaming.</p><p>使用ABR进行视频传输的流行方法有MPEG、DASH和HLS。更深层次的了解，请参考我们关于OTT和ABR视频流媒体的文章。</p><p>   The only changes here are the packaging and CDN-based delivery steps. That’s all.</p><p>这里唯一的变化是打包和基于CDN的交付步骤。就这样。</p><p>   The whole idea of encryption is to ensure that when someone intercepts our data, they should not read it or watch it in the case of video.</p><p>加密的整个想法是为了确保当有人截获我们的数据时，他们不应该阅读或观看视频。</p><p> Encryption refresher: –  encryption is a technique used to keep data confidential and prevent unauthorized people from reading it. Encryption uses a “key” to convert input data (plaintext) into an alternate form called ciphertext. It is almost impossible to convert the ciphertext back to plaintext without the key.</p><p>加密刷新器：临时加密是一种用于保密数据并防止未经授权的人读取它的技术。加密使用“密钥”将输入数据(明文)转换为称为密文的替代形式。如果没有密钥，几乎不可能将密文转换回明文。</p><p> However, practically speaking, decryption without the key is possible, and encryption algorithms are designed make reverse-engineering extremely expensive – in terms of time, money, and computing resources needed.</p><p>然而，实际上，在没有密钥的情况下解密是可能的，而且设计的加密算法使得反向工程在时间、金钱和所需的计算资源方面都非常昂贵。</p><p> One of the most popular encryption techniques is the “Advanced Encryption Standard” or “AES” for short. It is also called Rijndael (after its inventor) and was established by the U.S. National Institute of Standards and Technology (NIST) in 2001 to encrypt electronic data.</p><p>最流行的加密技术之一是“高级加密标准”或简称“AES”。它也被称为Rijndael(以其发明者的名字命名)，由美国国家标准与技术研究所(NIST)于2001年建立，用于加密电子数据。</p><p>  It’s a  symmetric-key algorithm: encryption and decryption are performed using the same key.</p><p>它是一种简单的对称密钥算法：加密和解密使用相同的密钥。</p><p> It has three variants based on the key-length: 128, 192, and 256 bits. The longer the key, the harder it is to crack.</p><p>根据密钥长度，它有三种变体：128位、192位和256位。密钥越长，就越难破解。</p><p> Cracking the AES-128 without the key would require a “billion times a billion years” and a super-computer ( source).</p><p>在没有密钥的情况下破解AES-128将需要“十亿倍十亿年”和一台超级计算机(来源)。</p><p> If you are interested in going deep into the AES standard, look at the  AES’s Wikipedia page.  I am not an expert in cryptography and won’t be able to do justice to the AES.</p><p>如果你对深入了解AES标准感兴趣，可以看看AES的维基百科页面。“我不是密码学专家，无法公正对待AES。</p><p> Note: Please remember that  encryption is not encoding, and decryption is not decoding in the video space. For videos, encoding and decoding are words used to refer to compression and decompression, respectively. To learn more about encoding, decoding, and video codecs, please read our articles on  the need for compression and a  simple introduction to video codecs.</p><p>注：请记住，加密不是编码，解密不是视频空间的解码。对于视频，编码和解码分别是用来表示压缩和解压缩的词。要了解更多关于编码、解码和视频编解码器的信息，请阅读我们关于压缩需求和视频编解码器简单介绍的文章。</p><p>  No, it isn’t, and let’s think about the implication of this for a minute.</p><p>不，不是，让我们想一想这意味着什么。</p><p> If a content provider decides to engage with three different DRM companies, and all three use different encryption techniques, then it means that the content provider needs to encrypt their videos three times, resulting in a waste of storage space and other resources.</p><p>如果一家内容提供商决定与三家不同的DRM公司接洽，而这三家公司都使用不同的加密技术，那么这意味着内容提供商需要对他们的视频加密三次，导致存储空间和其他资源的浪费。</p><p> That is why the CENC specification came into being – to reduce this encryption-driven fragmentation of the market and to reduce storage requirements.</p><p>这就是CENC规范产生的原因--减少这种加密驱动的市场碎片化，并降低存储需求。</p><p>   Before we dive into CENC, let’s step back and take a look at the state of OTT streaming protocols.</p><p>在我们深入CENC之前，让我们先退一步来看看OTT流协议的状态。</p><p> There are primarily two protocols in use today – MPEG-DASH and HLS.  There are others such as MSS (Microsoft Smooth Streaming) and HDS, but, we’ll leave them aside for this discussion.</p><p>今天使用的协议主要有两种-MPEG-DASH和HLS。还有其他协议，如MSS(Microsoft平滑流式处理)和HDS，但是，我们将把它们放在一边讨论。</p><p> MPEG-DASH uses the  mp4 container format for its videos and HLS uses the MPEG-TS ( ts) container for its files. If a content provider uses both MPEG-DASH and HLS, then they need to store a copy of their videos in both  mp4 and  ts file formats.</p><p>MPEG-DASH将MP4格式用于其视频，而HLS将MPEG-TS(TS)容器用于其文件。如果内容提供商同时使用MPEG-DASH和HLS，则他们需要以MPEG-DASH和HLS文件格式存储其视频的副本。</p><p> Now, let’s add the DRM encryption problem to it. If our three hypothetical DRM providers use three different encryption standards, then a content providers needs to store  2 * 3 … six copies of each video! What a waste of storage space!!</p><p>现在，让我们将DRM加密问题添加到其中。如果我们假设的三个数字版权管理提供商使用三个不同的加密标准，那么一个内容提供商需要存储2*3个…。每份录像带六份！这是对存储空间的浪费！！</p><p> To combat the first problem posed by video streaming protocols, the  CMAF specification was created which said that videos can be stored in the  fragmented mp4 container format ( fmp4). With support from both MPEG-DASH and HLS, you can now create only one set of videos, store it in  fmp4 format, and use a common set of files for both protocols. Just make sure you create two manifests (sigh!).</p><p>为了解决视频流协议带来的第一个问题，创建了CCMAF标准规范，该规范规定视频可以以更碎片化的MP4容器格式(Fmp4)存储。有了MPEG-DASH和HLS的支持，您现在只能创建一组视频，将其存储为FMP4格式，并为这两种协议使用一组通用的文件。只需确保您创建了两个清单(叹息！)。</p><p>  We still need to store multiple copies of each file if different DRM technologies use different encryption standards, right?</p><p>如果不同的DRM技术使用不同的加密标准，我们仍然需要存储每个文件的多个副本，对吗？</p><p> For this purpose, the MPEG developed the  CENC or Common Encryption specification, specifying that videos can be encrypted using either  cenc (AES-128 CTR) or  cbcs (AES-128 CBC).  CTR stands for Counter; and CBC stands for Cipher Block Chaining.</p><p>为此，MPEG开发了CCENC或通用加密规范，指定视频可以使用CCENC(AES-128 CTR)或CCBCS(AES-128 CBC)进行加密。CCTR代表计数器；CBC代表密码块链接。</p><p> The implication of CENC is that a content provider needs to encrypt his videos only once and any decryption module can decrypt it.  Note: Exposing the encryption algorithm is not a problem as long as the keys are strongly protected.</p><p>CENC的含义是，内容提供商只需要加密他的视频一次，任何解密模块都可以解密。*注：只要密钥得到强有力的保护，公开加密算法就不是问题。</p><p>  There are three primary DRM technologies in the market – Apple FairPlay, Google Widevine, and Microsoft PlayReady.</p><p>市场上有三种主要的DRM技术-Apple FairPlay、Google Widevine和Microsoft PlayReady。</p><p>  As you can see, this has lead to confusion and fragmentation in the streaming space. A possible convergence point is the universal use of CMAF and AES-CBC  cbcs mode, but, how will this impact legacy devices that support only CTR or only MPEG-TS? That’s a discussion for another time.</p><p>如您所见，这导致了流空间的混乱和碎片化。一个可能的趋同点是CMAF和AES-CBC以及CBCS模式的普遍使用，但是，这将如何影响仅支持CTR或仅支持MPEG-TS的传统设备？那是我们下次再讨论的问题。</p><p>  By now, we have established that we will be encrypting or videos using AES-128 bit encryption. At this stage, a few questions that come up are –</p><p>到目前为止，我们已经确定将使用AES-128位加密对视频进行加密。在这个阶段，出现的几个问题是-</p><p>    Any content provider can generate the encryption keys manually using specialized software. Alternatively, several DRM vendors provide the necessary tools and software to generate these keys.</p><p>任何内容提供商都可以使用专用软件手动生成加密密钥。或者，几家DRM供应商提供必要的工具和软件来生成这些密钥。</p><p>  Let’s understand the “why” first. When you go to a hotel, you ask the receptionist for the keys to a particular room by mentioning the room number – right? You’re providing the association here between a key and a room by telling her the room number.</p><p>让我们先了解一下“为什么”。当你去酒店的时候，你会向接待员要特定房间的钥匙，告诉他房间号码，对吗？您在这里通过告诉她房间号来提供钥匙和房间之间的关联。</p><p> Similarly, when we encrypt a movie with a particular key, we need to create that association and provide that to the DRM license server  (our receptionist, if you will).</p><p>同样，当我们使用特定密钥加密一部电影时，我们需要创建该关联并将其提供给DRM许可证服务器(如果您愿意，我们的接待员)。</p><p> In DRM, a “ KeyID” provides the association between an encryption key and a movie. It is a  unique string of characters generated at the time of creating an encryption key for a particular movie.</p><p>在DRM中，“KeyID”提供加密密钥和电影之间的关联。它是在为特定电影创建加密密钥时生成的唯一字符串。</p><p>   The Encryption Key and the KeyID are stored in a secure server (Key Store) that works alongside a DRM license server.</p><p>加密密钥和密钥ID存储在与DRM许可证服务器并行工作的安全服务器(密钥库)中。</p><p> When a client needs to play an encrypted movie, it requests the DRM license server for the decryption key by providing that particular movie’s KeyID. If the DRM license server is happy with the request ( authentic request), it will ask the Key Store to provide the decryption key associated with that KeyID.</p><p>当客户端需要播放加密电影时，它通过提供特定电影的密钥ID向DRM许可证服务器请求解密密钥。如果DRM许可证服务器对该请求(可信请求)感到满意，它将要求密钥库提供与该密钥ID相关联的解密密钥。</p><p>  Rationale: without the KeyID, the license server can’t lookup a movie’s decryption key.</p><p>基本原理：没有密钥ID，许可证服务器就无法查找电影的解密密钥。</p><p> Answer: the KeyID is sent along with the DASH or HLS manifest to the video player. The player parses the manifest, finds the KeyID, and asks the DRM License Server for the decryption key associated with that KeyID.</p><p>答：密钥ID与破折号或HLS清单一起发送到视频播放器。播放器解析清单，找到密钥ID，并向DRM许可证服务器请求与该密钥ID相关联的解密密钥。</p><p>  The Encryption Key is “private” and needs to be stored in a secure key store along with its associated KeyID.</p><p>加密密钥是“私有的”，需要与其关联的密钥ID一起存储在安全密钥存储中。</p><p>  Anyone with the KeyID can ask the License Server for the private key (decryption key). It is up to the DRM provider to authenticate the person asking and then supply or deny the decryption key.</p><p>任何拥有密钥ID的人都可以向许可证服务器请求私钥(解密密钥)。这取决于DRM提供商对提出请求的人进行身份验证，然后提供或拒绝解密密钥。</p><p> Here’s a block diagram of what we just learned on Keys, Encryption, and License Servers.</p><p>下面是我们刚刚了解的关于密钥、加密和许可证服务器的框图。</p><p>   At the client-side (player application), the user presses play on the movie he wants to watch. Now, the video player needs a way to recognize if the movie is encrypted or not.</p><p>在客户端(播放器应用程序)，用户按下播放他想要观看的电影。现在，视频播放器需要一种方法来识别电影是否加密。</p><p> Otherwise, it will try and playback an encrypted movie, crash, and cause a horrible user experience.</p><p>否则，它将尝试并播放加密的电影，崩溃，并导致可怕的用户体验。</p><p>  You could add a note  in the manifest that the movie is encrypted and also provide its KeyID.</p><p>您可以在清单中添加注释，说明电影已加密，并提供其密钥ID。</p><p> Another way is to  insert a few bytes of unique information into the video bitstream. When the player examines the bitstream before playing back, it can catch this unique information and realize that it is encrypted.</p><p>另一种方式是在视频比特流中插入几个字节的唯一信息。当播放器在播放前检查比特流时，它可以捕捉到这个唯一的信息，并意识到它是加密的。</p><p>  The license server uses pre-defined mechanisms to recognize if the player making the request is authentic or not.</p><p>许可证服务器使用预定义的机制来识别发出请求的玩家是否是可信的。</p><p> After the license server is satisfied with the player’s authenticity, it responds with the license &amp; decryption key.</p><p>在许可证服务器对播放器的真实性感到满意后，它会使用许可证解密密钥进行响应。</p><p>  We’ve described a simple scheme, but  there are many problems  (technical and commercial) with our scheme. Here are some problems right off the bat.</p><p>我们已经描述了一个简单的方案，但我们的方案存在许多(技术和商业)问题。这里马上就有一些问题。</p><p> We’ve described a prototypical “player” that sends a request for the decryption keys to the DRM License Server. But, And, what if the decryption software in the player exposes the key and the decrypted content?</p><p>我们已经描述了一个向DRM许可证服务器发送解密密钥请求的原型“播放器”。但是，如果播放器中的解密软件暴露了密钥和解密的内容怎么办？</p><p> Also, if you are a video player developer, do you have to develop decryption modules for every DRM technology? And, do you have to update it each time they make a change to their interfaces?</p><p>另外，如果您是视频播放器开发人员，是否必须为每种DRM技术开发解密模块？而且，您是否需要在他们每次更改界面时都更新它？</p><p>    It will result in a tightly coupled architecture and will prevent any attempts at open-ness and a plug-and-play ecosystem. Let’s see what can be done about it.</p><p>它将导致一个紧密耦合的体系结构，并将阻止任何试图开放和即插即用生态系统的尝试。让我们看看能做些什么。</p><p>  At the player-level, the responsibilities described earlier are divided across different modules as follows –</p><p>在玩家级别，前面描述的职责跨不同模块进行划分，如下所示-。</p><p> The player takes care of obtaining the movie, parsing the manifest, extracting the KeyID, making the requests to the DRM License Server, etc.</p><p>播放器负责获取电影、解析清单、提取密钥ID、向DRM许可证服务器发出请求等。</p><p> A separate module (called the CDM or Content Decryption Module) takes care of creating the license request, decrypting &amp; decoding the content.</p><p>一个单独的模块(称为CDM或内容解密模块)负责创建许可证请求、解密和解码内容。</p><p>    mechanism to create a license request (using the KeyID, device identifier, signing the request, etc.)</p><p>创建许可证请求的机制(使用密钥ID、设备标识符、对请求签名等)。</p><p> mechanism to understand the license response received from the DRM License Server  (the response is encrypted too) and extract the decryption key.</p><p>了解从DRM许可证服务器接收的许可证响应(响应也是加密的)并提取解密密钥的机制。</p><p> Using those details,  modules called CDMs (Content Decryption Modules) can be built into browsers such as Chrome, Firefox, Microsoft Edge, Safari, etc.</p><p>使用这些细节，称为CDMS(内容解密模块)的模块可以内置到Chrome、Firefox、Microsoft Edge、Safari等浏览器中。</p><p>  they securely store the decryption keys based on the license specifications (store the key for X days, for example)</p><p>他们根据许可证规范安全地存储解密密钥(例如，将密钥存储X天)。</p><p> For the above reasons, CDMs in browsers are closed-source, and this is a source of contention in the industry and public. They are   not-trusted because the public cannot see what’s inside the CDM’s source code.</p><p>由于上述原因，浏览器中的CDM是开源的，这是业界和公众争论不休的一个来源。他们不是不可信的，因为公众看不到CDM源代码里有什么。</p><p> Note: Several browsers give you the option to turn off the CDM. But, if you do so, you won’t be able to watch any DRM-protected content. That’s the industry’s trade-off.</p><p>注：有几个浏览器为您提供了关闭CDM的选项。但是，如果您这样做，您将无法观看任何受DRM保护的内容。这是该行业的权衡。</p><p> Here’s a screenshot of the Widevine plugin in Firefox’s plugin page (on my Ubuntu 20.04 machine).</p><p>以下是Firefox插件页面(在我的Ubuntu20.04机器上)中的Widevine插件的屏幕截图。</p><p>  Oh wait,  there is another layer of abstraction that we haven’t discussed yet.</p><p>哦，等等，还有一层抽象我们还没有讨论过。</p><p>  We saw in the previous section that the player applications need to talk to the CDM in the browser and with the License Servers to exchange license information, right?</p><p>我们在上一节中看到，播放器应用程序需要在浏览器中与CDM对话，并与许可证服务器交换许可证信息，对吗？</p><p>  player vendors need to integrate with all the different license servers &amp; CDMs and keep track of the changes to their interfaces to stay up-to-date</p><p>播放器供应商需要集成所有不同的许可服务器&amp；CDM，并跟踪其界面的更改以保持最新。</p><p> a player company says that they don’t support some popular “XYZ” platform because of XYZ’s frequently-changing interfaces, then it’s highly likely that nobody will buy their players. Not good!</p><p>一家播放器公司表示，他们不支持一些流行的“XYZ”平台，因为XYZ的界面经常变化，那么很可能没有人会购买他们的播放器。不太好！</p><p> That gave rise to a layer that sits between the players and the CDMs called the  EME or Encrypted Media Extensions. The EME provides a standardized set of APIs for players (apps) to communicate with the CDMs.</p><p>这就产生了一个位于播放器和CDM之间的层，称为加密媒体扩展(EME)或加密媒体扩展(Encrypted Media Extensions)。EME提供了一套标准化的API，供播放器(APP)与CDM通信。</p><p>   Content Decryption Module (CDM) is a software that decrypts and optionally, decodes + displays the video.</p><p>内容解密模块(CDM)是对视频进行解密和可选的解码+显示的软件。</p><p> The video player is a JavaScript program that uses the EME APIs to transmit messages between the CDM and the License Server.</p><p>视频播放器是一个JavaScript程序，它使用EME API在CDM和许可证服务器之间传输消息。</p><p> An advantage of use EME is that content providers and player vendors are now develop streaming services which can be viewed on different browers because of the inter-operability introduced by the use of EME. You can develop an app that uses the  EME spec to talk to the license server and the CDM – irrespective of the DRM platform or browser (CDM) being used.</p><p>使用EME的优点在于，由于使用EME引入的互操作性，内容提供商和播放器供应商现在正在开发可以在不同浏览器上观看的流服务。无论使用哪种DRM平台或浏览器(CDM)，您都可以开发一款应用程序，该应用程序使用统一的EME规范与许可证服务器和CDM对话。</p><p>   After decrypting a video, it needs to be decoded and displayed to the user without exposing the decrypted, decoded, or the raw frames. The CDM (Content Decryption Module) plays a vital role in preventing data leaks because it is the first point of contact for/with the decrypted data.</p><p>在解密视频之后，需要将其解码并显示给用户，而不会暴露解密、解码或原始帧。CDM(内容解密模块)在防止数据泄露方面起着至关重要的作用，因为它是解密数据的第一个接触点。</p><p>  decrypt the movie and hand over the bitstream to the application  (not very secure because someone can hack the app to dump the video)</p><p>解密电影并将码流交给应用程序(不是很安全，因为有人可以侵入应用程序转储视频)。</p><p> decrypt, decode, and pass on the decoded frames of video to the platform’s display engine.</p><p>解密、解码视频帧并将其传递给平台的显示引擎。</p><p> The process can also take place in software or the device’s hardware (more secure).</p><p>该过程也可以在软件或设备硬件中进行(更安全)。</p><p>    But it is missing a few critical features that make it attractive to content providers.</p><p>但它缺少一些关键功能，这些功能使其对内容提供商具有吸引力。</p><p>  At this stage, I want to distinguish core DRM technology providers  (such as Apple, Google, and Microsoft) and DRM vendors that provide services around those technologies. In this section, let’s look at a few of these business rules expected in the industry when it comes to DRM – these could be offered directly by the DRM technology provider or a DRM vendor.</p><p>在这个阶段，我想区分核心DRM技术提供商(如Apple、Google和Microsoft)和围绕这些技术提供服务的DRM供应商。在这一节中，让我们看看在涉及DRM时业界预期的几条业务规则-这些规则可以由DRM技术提供商或DRM供应商直接提供。</p><p>  DRM technology providers such as FairPlay, Widevine, PlayReady do not offer User Authentication services. However, DRM vendors can! When the user hits “Play,” a separate server authenticates the user’s credentials (e.g., customerID). It checks whether the user is authorized to play that content based on subscription levels, promo codes, etc. After this server authenticates the user, the app can make a license request to the license server.  Note: This is a gross simplification of the workflow and professional DRM vendors have more sophisticated workflows for authentication.</p><p>FairPlay、Widevine、PlayReady等DRM技术提供商不提供用户身份验证服务。但是，DRM供应商可以！当用户点击“Play”时，一个单独的服务器验证用户的凭证(例如，customerID)。它根据订阅级别、促销代码等检查用户是否有权播放该内容。在此服务器对用户进行身份验证后，应用程序可以向许可证服务器发出许可证请求。1注意：这是对工作流程的极大简化，专业的DRM供应商有更复杂的工作流进行身份验证。</p><p>  Geo-blocking is used when the content providers want to block the playback of a movie in certain countries. Similar to User Authentication, this is an add-on service by most DRM vendors. When the user hits “Play” on a particular movie, the DRM vendor’s servers can check if the movie can be watched in the user’s location. Based on the content provider’s rules, the license and encryption key is either sent/denied to the client.</p><p>当内容提供商想要在某些国家/地区阻止播放电影时，会使用地理阻止。与用户身份验证类似，这是大多数DRM供应商提供的附加服务。当用户点击特定电影的“播放”时，DRM供应商的服务器可以检查是否可以在用户的位置观看该电影。根据内容提供商的规则，许可证和加密密钥要么被发送到客户端，要么被拒绝。</p><p>  As the name suggests, a  Persistent License can be stored on the client device after being received from the license server. It can be used to playback the movie(s) until the expiration time mentioned in the license has been reached. Before the license expires, the CDM needs to make a license renewal request.</p><p>顾名思义，从许可证服务器接收到永久许可证后，可以将其存储在客户端设备上。它可以用于播放电影，直到达到许可证中提到的过期时间。在许可证到期之前，CDM需要提出许可证续签请求。</p><p> Non-persistent licenses are used for immediate playback of a movie. They are not to be stored for extended periods. They are generally used and discarded after the current playback session has expired, or in the middle of a session if there are policies that have short expiry times.</p><p>非永久许可证用于立即播放电影。它们不能长时间储存。它们通常在当前播放会话过期后使用并丢弃，或者如果存在过期时间较短的策略，则在会话中途使用和丢弃。</p><p>  Key Rotation involves encrypting different sections (or segments) of a movie with different keys in order to mitigate attacks. Suppose a hacker obtains the key for a movie. In that case, it might allow him to watch only a small section of the movie if the following sections use different keys. Additionally, you can associate different licensing rules for different sections of the content by using multiple keys. For example, an “exclusive behind-the-scenes” section of a movie can be shown to premium subscribers only, while all free subscribers can watch the rest of the movie.</p><p>密钥轮换涉及用不同的密钥加密电影的不同部分(或片断)，以减轻攻击。假设黑客获得了一部电影的密钥。在这种情况下，如果后面的部分使用不同的关键点，则可能只允许他观看电影的一小部分。此外，您还可以使用多个密钥为内容的不同部分关联不同的许可规则。例如，电影的“独家幕后”部分只能向高级订阅者播放，而所有免费订阅者都可以观看电影的其余部分。</p><p>  Some services offer to playback videos when an internet connection is unavailable – dubbed  “offline playback.” I’ve downloaded several movies on Netflix onto my phone when I know I am getting onto a long-haul flight. The player can’t contact the license server to get the DRM keys in such situations.</p><p>一些服务提供在互联网连接不可用的情况下播放视频-称为“离线播放”。当我知道自己要登上长途航班时，我已经在Netflix上下载了几部电影到我的手机上。在这种情况下，播放器无法联系许可证服务器来获取DRM密钥。</p><p> And, so the DRM provider needs to provide an option to store the keys securely on the device so that the content can be unlocked and played back even when an internet connection is unavailable. A highly secure CDM implementation is needed to prevent the keys from leaking out.</p><p>因此，DRM提供商需要提供将密钥安全地存储在设备上的选项，以便即使在互联网连接不可用时也可以解锁和回放内容。需要高度安全的CDM实现来防止密钥泄露。</p><p>  Encrypting &amp; decrypting movies can get expensive, especially in UHD and 4K movies and there is a need for optimized encryption. One such optimization is to encrypt only the Intra Frames (keyframes / I-frames / IDR frames) of every video segment. This optimization has several advantages –</p><p>加密和解密电影可能会很昂贵，特别是在超高清和4K电影中，需要优化加密。一种这样的优化是仅加密每个视频段的帧内帧(关键帧/I帧/IDR帧)。这种优化有几个优点-。</p><p> Encryption is faster because Intra-frames make up a tiny proportion of the total number of frames in a movie.</p><p>加密速度更快，因为内部帧只占电影中总帧数的很小比例。</p><p> Only after decoding the Intra-frame can its dependent frames (i.e., frames that depend on the I-frame) be decoded. Hence, the movie is rendered useless without decodable Intra-frames.</p><p>只有在解码内部帧之后，才能解码其从属帧(即，依赖于I帧的帧)。因此，如果没有可解码的内部帧，电影将变得无用。</p><p> An example of this is  SAMPLE-AES in Apple Fairplay that encrypts only samples of every media segment. We’ll read about in the article on Apple’s FairPlay DRM.</p><p>Apple Fairplay中的Sample-AES就是一个例子，它只加密每个媒体段的样本。我们会在关于苹果FairPlay DRM的文章中读到。</p><p>  Content Decryption can take place in software or hardware and generally, hardware decryption is considered more secure because the operations take place in the Trusted Execution Environment or TEE. The TEE is defined in  Wikipedia as “a secure area of a main processor that guarantees code and data loaded inside to be protected with respect to confidentiality and integrity”.</p><p>内容解密可以在软件或硬件中进行，通常认为硬件解密更安全，因为操作发生在可信执行环境(TEE)中。在维基百科中，TEE被定义为“主处理器的安全区域，它保证加载到其中的代码和数据在保密性和完整性方面受到保护”。</p><p>  Content providers require a mechanism to conditionally allow/block playback on a wide variety of devices. One straightforward way to do so is to generate DRM licenses that specify which devices are allowed to play certain resolutions of the movie’s bitrate ladder.</p><p>内容提供商需要有条件地允许/阻止在各种设备上回放的机制。要做到这一点，一种直接的方法是生成DRM许可证，该许可证指定允许哪些设备播放电影比特率阶梯的特定分辨率。</p><p> For e.g., Google’s Widevine defines three security levels – L1 (highest), L2, and L3 (lowest). Typically, devices with L3 security level are blocked from playing HD resolutions. We’ll read more about this in a separate article on Google’s Widevine DRM.</p><p>例如，Google的Widevine定义了三个安全级别-L1(最高)、L2和L3(最低)。通常，具有L3安全级别的设备会被阻止播放高清分辨率。我们将在Google的Widevine DRM上的另一篇文章中阅读更多关于这方面的内容。</p><p>  I hope you understood how AES, EME, CDM, CENC, Keys &amp; Key Servers form the building blocks of DRM.</p><p>我希望您理解AES、EME、CDM、CENC、Keys&amp；密钥服务器是如何构成DRM的构建块的。</p><p> Let’s go deeper into commercial DRM solutions such as Widevine, PlayReady, and FairPlay in the next few articles.</p><p>在接下来的几篇文章中，让我们更深入地研究商业DRM解决方案，如Widevine、PlayReady和FairPlay。</p><p>  BuyDRM™ is a leading provider of  Digital Rights Management and Content Security Services for the entertainment, enterprise and transportation industries. Since the turn of the century,  BuyDRM™ has amassed substantial success stories for many of today’s largest brands.</p><p>BuyDRM™是一家为娱乐、企业和运输行业提供数字版权管理和内容安全服务的领先供应商。自世纪之交以来，BuyDRM™已经为当今许多最大的品牌积累了大量的成功故事。</p><p>  OTT operators, television networks, movie studios, gaming sites and premium content distributors use the  BuyDRM™ award-winning KeyOS Multi-DRM Platform to provide robust content security for their streaming and downloadable video.</p><p>OTT运营商、电视网络、电影制片厂、游戏网站和优质内容分销商使用BuyDRM™获奖的KeyOS Multi-DRM平台，为他们的流媒体和可下载视频提供强大的内容安全性。</p><p>  Customers include the Academy of Motion Picture Sciences and Arts (AMPAS), ABC (Aust</p><p>客户包括美国电影科学与艺术学院(AMPAS)、美国广播公司(AUST)</p><p>......</p><p>.</p></div><div id="story_share_this"><div class="sharethis-inline-share-buttons"></div></div><div class="text-break sotry_link page_narrow"><a target="_blank" href="https://ottverse.com/eme-cenc-cdm-aes-keys-drm-digital-rights-management/">https://ottverse.com/eme-cenc-cdm-aes-keys-drm-digital-rights-management/</a></div><div class="story_tags page_narrow"><button type="button" class="btn btn-light my_tag"><a href="/tag/cdm/">#cdm</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/drm/">#drm</a></button></div></div><div class="my_movie_list_item shadow p-3 mb-5 bg-white rounded"><button type="button" class="btn btn-link my_tag"><a href="/tag/web2.0/">#web2.0</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/google/">#google</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/设计/">#设计</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/游戏/">#游戏</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/创意/">#创意</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/apple/">#apple</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/苹果/">#苹果</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/摄影/">#摄影</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/软件/">#软件</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/美国/">#美国</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/iphone/">#iphone</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/图片/">#图片</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/手机/">#手机</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/视频/">#视频</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/广告/">#广告</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/免费/">#免费</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/谷歌/">#谷歌</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/网站/">#网站</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/windows/">#windows</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/微软/">#微软</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/下载/">#下载</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/firefox/">#firefox</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/音乐/">#音乐</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/linux/">#linux</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/blog/">#blog</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/博客/">#博客</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/程序/">#程序</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/艺术/">#艺术</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/web/">#web</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/wordpress/">#wordpress</a></button></div></div></div><div id="my_footer"><div class=""><a href="/tags/">tags</a> <a href="/users/">users</a></div>&copy; 2020 diglog.com </div></div></body></html>