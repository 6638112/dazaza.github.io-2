<!doctype html><html lang="zh-hans"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Mozilla的Elixir的社会虚拟空间 Social virtual spaces with Elixir at Mozilla</title><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"><link rel="stylesheet" href="/img/css.css?random="><link data-rh="true" rel="icon" href="/img/favicon.ico"/><script data-ad-client="ca-pub-6067137220025946" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script type="text/javascript" src="https://platform-api.sharethis.com/js/sharethis.js#property=5effb96910009800120b8d4d&product=inline-share-buttons" async="async"></script>
<script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?03c1a0f31299b4a2fbb83c34d6beaac9";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script></head><body><div id="my_header"><div class="container"><nav class="navbar navbar-expand-lg"><a class="navbar-brand" href="/"><img alt="diglog" src="/img/logo.v1.gif" class="rounded-sm"></a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarNavAltMarkup"><div class="navbar-nav"></div></div></nav></div></div><div class="container"><div id="my_content"><h1 class="page_narrow">Social virtual spaces with Elixir at Mozilla<br/>Mozilla的Elixir的社会虚拟空间 </h1><div class="row"><div class="col-lg-12 col-12"><div class="my_story_list_item shadow p-3 mb-5 bg-white rounded"><div class="story_page_pub_time page_narrow">2021-06-05 02:55:32</div><div class="page_narrow text-break page_content"><p>Welcome to our series of case studies about companies using Elixir in production.  See all cases we have published so far.</p><p>欢迎我们对使用Elixir生产中的公司的一系列案例研究。查看我们到目前为止发布的所有案例。</p><p> Hubs is Mozilla’s take on virtual social experiences. You build your own private spaces and share them with your friends, co-workers, and community. Avatars in this space can move freely in a 3D social environment and watch videos, exchange messages, and talk to other people nearby. All you need is a browser and a microphone!</p><p> 集线器是Mozilla的虚拟社会体验。您可以建立自己的私人空间，并与您的朋友，同事和社区分享。这个空间中的头像可以在3D社会环境中自由移动，观看视频，交换信息，与附近的其他人交谈。您所需要的只是浏览器和麦克风！</p><p> Hubs is  fully  open source and you can host it on your infrastructure via  Hubs Cloud. Community managers, educators, and event organizers have been using Hubs Cloud to run virtual events and online activities tailored to their specific brandings and needs. All it takes to run your own version of Hubs is one click away - which perhaps makes Hubs the most deployed Phoenix application ever!</p><p> 集线器是完全开放的来源，您可以通过集线器云托管您的基础架构。社区经理，教育工作者和活动组织者一直在使用集线器云来运行对其特定品牌和需求量的虚拟事件和在线活动。运行自己版本的集线器所需的只是一个点击 - 这可能会使集线器成为有史以来最部署的凤凰申请！</p><p>   The Hubs team started at Mozilla as the Mixed Reality team about 3.5 years ago. Their main goal was to explore ways for online social interaction via avatars and mixed reality.</p><p>   集线器团队在3.5年前的混合现实队伍中始于Mozilla。他们的主要目标是通过头像和混合现实探索在线社交互动的方式。</p><p> They quickly focused on building their first proof of concept, where avatars could communicate, move around, and join different rooms, everything running directly in the browser. This was a significant departure from the state of the art of Virtual Reality everywhere, as the getting started experience up to this point was cumbersome and often required steep investment in the form of VR headsets.</p><p> 他们很快专注于建立他们的第一个概念证明，其中头像可以沟通，四处移动，加入不同的房间，一切都直接在浏览器中运行。这是从无处不在的虚拟现实艺术的最终偏离的重要偏离，因为迄今为止的入门经历是繁琐的，并且经常要求VR耳机形式的陡峭投资。</p><p> The initial prototype was a success and it pushed the team to build a product. However, all communication in the proof of concept was peer-to-peer, which limited the features and experiences they could provide. Therefore the Hubs team knew they needed a capable backend technology to provide fan-out communication and coordinate how all different avatars interact within the virtual spaces. John Shaughnessy, Staff Software Engineer at Mozilla, comments: “When you get a lot of people in the same space, be it virtual or in the real world, there is never only a single conversation going on. Once you get ten or twenty different people in a room, conference calls don’t work well. In Hubs, people transition between multiple simultaneous conversations simply by moving around”.</p><p> 初始原型是成功，它推动了团队建立产品。然而，概念证明的所有沟通都是对等的，这限制了他们可以提供的功能和经验。因此，集线器团队知道他们需要一个有能力的后端技术来提供扇出通信并协调所有不同的化身在虚拟空间内交互。 John Shaughnessy，Mozilla的员工软件工程师，评论：“当你在同一个空间得到很多人时，无论是虚拟还是在现实世界中，都没有只有一个谈话。一旦你在一个房间里获得十或二十个不同的人，会议电话不起作用。在集线器中，人们通过四处移动时，人们通过移动即可转换多个同时对话。</p><p> With this bold vision in hand, they assessed their whole stack. They settled on using JavaScript with  Three.js in the front-end and chose  the Phoenix web framework for the backend. Greg Fodor, who was an Engineering Manager at Mozilla at the time, explains the choice: “We first listed all of the features we had to implement, from trivial things like REST endpoints, to more complex use cases, such as chat messaging and tracking where avatars are in the virtual world. Once I started to learn Phoenix, I saw all of those features were already there! The application we were building has to manage a large number of connections with real-time low latencies, something we knew the Erlang VM was an excellent fit for”.</p><p> 随着这种大胆的愿景，他们评估了他们的整个堆栈。他们在前端使用JavaScript使用了三个，并为后端选择了Phoenix Web框架。 Greg Fodor当时是Mozilla的工程经理，解释了选择：“我们首先列出了我们必须实现的所有功能，从休息端点等琐碎的东西，更复杂的使用情况，例如聊天消息传递和跟踪头像在虚拟世界中。一旦我开始学习凤凰城，我看到所有这些功能已经存在！我们建造的应用程序必须管理大量与实时低延迟的联系，我们知道Erlang VM非常适合“。 </p><p>  Hubs went live in January 2018. Almost everything in Hubs goes through Phoenix. The only exception is the WebRTC voice channels, which are handled by designated voice servers, initially implemented with  Janus and later ported to  MediaSoup. However, the Phoenix app still manages the voice servers and how connections are assigned to them.</p><p>集线器于2018年1月居住。枢纽的几乎所有东西都经过凤凰城。唯一的例外是WebRTC语音通道，由指定的语音服务器处理，最初用Janus和后来移植到MediaSoup。但是，Phoenix应用程序仍然管理语音服务器以及如何将连接分配给它们。</p><p> The deployment is orchestrated by  Habitat and running on Amazon EC2. Habitat provides packaging and orchestration. When a voice server joins the Habitat ring, the Phoenix services receive a message and start assigning voices to voice servers. Overall they run on 4 Phoenix and 4 voice servers.</p><p> 该部署由栖息地策划并在Amazon EC2上运行。栖息地提供包装和编排。当语音服务器加入栖息地环时，Phoenix服务会收到一条消息并开始为语音服务器分配声音。总的来说，他们在4个凤凰和4个语音服务器上运行。</p><p> The Elixir experience in production has been quite smooth. Dominick D’Aniello, Staff Software Engineer at Mozilla, points out some areas they discussed improving: “the Phoenix application works mostly as a proxy, so we avoid decoding and reencoding the data unless we really need to. But sometimes we have to peek at the payloads and JSON is not the most efficient format to do so.” They have also considered relying more on Elixir processes and the Erlang distribution. Dominick continues: “when a new client joins, it needs to ask all other clients what is their state in the world, what they own, and what they care about. One option is to use Elixir processes in a cluster to hold the state of the different entities and objects in the virtual world”.</p><p> 生产中的Elixir经验非常顺利。 Dominick d'Aniello，Mozilla的员工软件工程师指出，他们讨论了一些改进的区域：“凤凰申请主要是作为代理的，所以我们避免解码和重复数据，除非我们真的需要。但有时我们必须在有效载荷上偷看，JSON不是最有效的格式。“他们还考虑依赖于Elixir过程和Erlang分布。 Dominick继续说：“当一个新的客户加入时，它需要询问所有其他客户在世界上的状态，他们拥有的是什么，以及他们关心的东西。一个选项是在群集中使用elixir进程来保存虚拟世界中的不同实体和对象的状态。</p><p>  With many large companies investing in online communication, the Mozilla team saw the possibility of virtual spaces becoming walled-gardens inside existing social platforms. This led the Hubs team to work on Hubs Cloud, with the mission to commoditize virtual spaces by allowing anyone to run their own version of Hubs with a single click.</p><p>  随着许多投资在线沟通的大公司，Mozilla团队看到了虚拟空间的可能性成为现有的社交平台内的壁挂花园。这导致集线器团队在集线器云上工作，使任务通过允许任何人使用单击运行自己的集线器版本来商用虚拟空间。</p><p> Hubs Cloud launched in February 2020 and it has been a hit.  New York University did its graduation ceremony on a Hubs Cloud instance.  The IEEE Virtual Reality Conference embraced Hubs for a more accessible and sustainable event with talks and poster sessions all happening in virtual rooms, while  the Minnesota Twins baseball team launched a Virtual Hall of Fame on top of the platform.</p><p> 集线器云于2020年2月推出，它已被击中。纽约大学在集线器云实例上做了毕业典礼。 IEEE虚拟现实会议拥有包含更可访问和可持续的活动的集线器，谈话和海报会话全部发生在虚拟房间，而明尼苏达州双胞胎棒球队在平台之上推出了一个虚拟名人堂。</p><p> Their cloud version uses Amazon CloudFormation to instantiate Hubs inside the user’s account. This approach brought different challenges to the Hubs team: “we want Hubs Cloud to be as affordable and straightforward as possible. The Phoenix app has already been a massive help on this front. We have also moved some features to Amazon Lambda and made them optional, such as image resizing and video conversion” - details John.</p><p> 他们的云版本使用Amazon CloudFormation来实例化用户帐户内的集线器。这种方法对集线器团队带来了不同的挑战：“我们希望集线器云尽可能地实惠和直接。 Phoenix应用程序已经在这方面是一个巨大的帮助。我们还向亚马逊Lambda移动了一些功能，使它们成为可选的，如图像调整大小和视频转换“ - 详细信息John。</p><p> Since Hubs is also open source, developers can run their own Hubs instance in whatever platform they choose or change it however they want. That’s the path Greg Fodor recently took when he announced  Jel: “Jel is the video game for work. It is a mashup of Minecraft and Discord, where everything is 3D. My goal is to spark new directions and ideas to get people excited about VR”.</p><p> 由于集线器也是开源，因此开发人员可以在他们选择或更改的任何平台中运行自己的集线器实例。这就是Log Greg Fodor最近在他宣布JEL时服用：“JEL是工作的视频游戏。这是一个MINECRAFT和Discord的混搭，一切都是3D。我的目标是激发新的方向和想法，让人们对VR感到兴奋“。 </p><p>  Today, the Hubs team has 10 contributors, half of whom are developers. Their engineering team is quite general and learning Elixir happens organically: “you are motivated by the feature you are working on. If it requires changing the backend, you learn Elixir with the help of the team and then make your contribution”.</p><p>今天，集线器团队有10个贡献者，其中一半是开发人员。他们的工程团队是一般的，学习Elixir有机地发生：“你被你正在努力的功能的动机。如果它需要更改后端，您可以在团队的帮助下学习Elixir，然后做出贡献“。</p><p> Overall, the bet on Phoenix was a successful one. Greg Fodor highlights: “The most significant benefit of Phoenix is in using a stack that excels at solving a large variety of problems. Once onboarded to Phoenix, there is a huge surface area our engineers can touch. Any feature they come up with, they can run with it. And because Hubs is open source, our contributors will also have the same experience. Overall, Elixir and Phoenix reduce the effort needed to cause the largest impact possible across our whole product”.</p><p> 总的来说，凤凰上的赌注是一个成功的赌注。 Greg Fodor亮点：“凤凰的最显着的好处是在使用解决方面的堆栈来解决各种各样的问题。曾经坐在凤凰上，有一个巨大的表面积我们的工程师可以触摸。他们提出的任何功能，他们都可以运行它。由于集线器是开放的来源，我们的贡献者也会有同样的经验。总体而言，Elixir和Phoenix减少了导致我们整个产品最大影响所需的努力“。</p><p> Lately, they have leaned even further into the ecosystem, as they have started exposing Hubs APIs over GraphQL with the help of Absinthe. They have also migrated to Phoenix v1.5 and are using the  Phoenix LiveDashboard to provide metrics and instrumentation to Hubs Cloud users.</p><p> 最近，他们甚至进一步倾向于生态系统，因为他们在苦艾酒的帮助下开始将集线器API暴露在GraphQL上。它们还迁移到Phoenix V1.5，并使用Phoenix LiveCasboard，为集线器云用户提供指标和仪器。 </p></div><div id="story_share_this"><div class="sharethis-inline-share-buttons"></div></div><div class="text-break sotry_link page_narrow"><a target="_blank" href="https://elixir-lang.org/blog/2021/06/02/social-virtual-spaces-with-elixir-at-mozilla/">https://elixir-lang.org/blog/2021/06/02/social-virtual-spaces-with-elixir-at-mozilla/</a></div><div class="story_tags page_narrow"><button type="button" class="btn btn-light my_tag"><a href="/tag/elixir/">#elixir</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/virtual/">#virtual</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/集线器/">#集线器</a></button></div></div><div class="my_movie_list_item shadow p-3 mb-5 bg-white rounded"><button type="button" class="btn btn-link my_tag"><a href="/tag/web2.0/">#web2.0</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/google/">#google</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/设计/">#设计</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/创意/">#创意</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/摄影/">#摄影</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/游戏/">#游戏</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/图片/">#图片</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/软件/">#软件</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/视频/">#视频</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/手机/">#手机</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/广告/">#广告</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/apple/">#apple</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/iphone/">#iphone</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/网站/">#网站</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/免费/">#免费</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/下载/">#下载</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/windows/">#windows</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/微软/">#微软</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/firefox/">#firefox</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/苹果/">#苹果</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/blog/">#blog</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/音乐/">#音乐</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/博客/">#博客</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/wordpress/">#wordpress</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/恶搞/">#恶搞</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/艺术/">#艺术</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/qq/">#qq</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/web/">#web</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/谷歌/">#谷歌</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/工具/">#工具</a></button></div></div></div><div id="my_footer"><div class=""><a href="/tags/">tags</a> <a href="/users/">users</a></div>&copy;2012-2021 diglog.com </div></div></body></html>