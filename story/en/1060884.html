<!doctype html><html lang="zh-hans"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>秃鹰：找到死的Python代码 Vulture: Find Dead Python Code</title><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"><link rel="stylesheet" href="/img/css.css?random="><link data-rh="true" rel="icon" href="/img/favicon.ico"/><script data-ad-client="ca-pub-6067137220025946" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script type="text/javascript" src="https://platform-api.sharethis.com/js/sharethis.js#property=5effb96910009800120b8d4d&product=inline-share-buttons" async="async"></script>
<script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?03c1a0f31299b4a2fbb83c34d6beaac9";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script></head><body><div id="my_header"><div class="container"><nav class="navbar navbar-expand-lg"><a class="navbar-brand" href="/"><img alt="diglog" src="/img/logo.v1.gif" class="rounded-sm"></a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarNavAltMarkup"><div class="navbar-nav"></div></div></nav></div></div><div class="container"><div id="my_content"><h1 class="page_narrow">Vulture: Find Dead Python Code<br/>秃鹰：找到死的Python代码 </h1><div class="row"><div class="col-lg-12 col-12"><div class="my_story_list_item shadow p-3 mb-5 bg-white rounded"><div class="story_page_pub_time page_narrow">2021-05-06 05:24:05</div><div class="story_img_container"><a href="http://img2.diglog.com/img/2021/5/40235bb6674b05c3b52b3ccc57ab3132.png"><img src="http://img2.diglog.com/img/2021/5/40235bb6674b05c3b52b3ccc57ab3132.png" class="img-fluid my_story_img" onerror="this.style.display='none'"></a></div><div class="page_narrow text-break page_content"><p>Vulture finds unused code in Python programs. This is useful forcleaning up and finding errors in large code bases. If you run Vultureon both your library and test suite you can find untested code.</p><p>秃鹰在Python程序中查找未使用的代码。这是有用的，在大代码基础上找不到和发现错误。如果您运行Voltureon，您的库和测试套件您可以找到未测试的代码。</p><p> Due to Python&#39;s dynamic nature, static code analyzers like Vulture arelikely to miss some dead code. Also, code that is only called implicitlymay be reported as unused. Nonetheless, Vulture can be a very helpfultool for higher code quality.</p><p> 由于Python＆＃39; Snynam，静态代码分析仪，如秃鹰，非常可能错过一些死人代码。此外，仅向ImplicicLymay称为未使用的代码。尽管如此，秃鹰可以是一个非常高级的代码质量的帮助。</p><p>      $ vulture myscript.py # or$ python3 -m vulture myscript.py$ vulture myscript.py mypackage/$ vulture myscript.py --min-confidence 100 # Only report 100% dead code.</p><p>      $ vulture myscript.py＃或$ python3-m秃鹰myscript.py $ vulture myscript.py mypackage / $ vulture myscript.py  -  min-convidente 100＃只报告100％死代码。</p><p> The provided arguments may be Python files or directories. For eachdirectory Vulture analyzes all contained *.py files.</p><p> 提供的参数可能是Python文件或目录。对于每个传奇秃鹰分析所有包含的* .py文件。</p><p> Vulture assigns each chunk of dead code a confidence value. A confidencevalue of 100% means that the code will never be executed. Values below100% are only estimates for how likely it is that the code is unused.</p><p> 秃鹰分配了一块死代码的置信价值。 100％的席位意味着代码永远不会被执行。低于100％的值只是估计代码未使用的可能性有多大。</p><p> After you have found and deleted dead code, run Vulture again, becauseit may discover more dead code.</p><p> 找到并删除了死了代码后，再次运行Vulture，因为可能会发现更多的死人代码。</p><p>  When Vulture incorrectly reports chunks of code as unused, you haveseveral options for suppressing the false positives. If fixing your falsepositives could benefit other users as well, please file an issue report.</p><p>  当秃鹰错误地将代码的块报告为未使用时，您可以抑制误报的选项。如果修复您的虚假呈现器也可以使其他用户有益，请提交问题报告。 </p><p>  The recommended option is to add used code that is reported as unused to aPython module and add it to the list of scanned paths. To obtain such awhitelist automatically, pass  --make-whitelist to Vulture:</p><p>推荐的选项是添加已使用的代码，该代码被报告为Apython模块，并将其添加到扫描路径列表中。自动获取此类一名单位，通过 - 使用 - 制作秃鹫：</p><p>  Note that the resulting  whitelist.py file will contain valid Pythonsyntax, but for Python to be able to  run it, you will usually have tomake some modifications.</p><p>  请注意，生成的白名单.PY文件将包含有效的Pythonsyntax，但是对于Python能够运行它，您通常会造成一些修改。</p><p>   If you want to ignore a whole file or directory, use the  --excludeparameter (e.g.,  --exclude *settings.py,docs/).</p><p>   如果要忽略整个文件或目录，请使用--excludeparameter（例如，--Exclude * settings.py，docs /）。</p><p>  For compatibility with  flake8, Vulturesupports the  F401 andF841 errorcodes for ignoring unused imports ( # noqa: F401) and unused localvariables ( # noqa: F841). However, we recommend using whitelists insteadof  noqa comments, since  noqa comments add visual noise to the code andmake it harder to read.</p><p>  为了与Flake8的兼容性，Vulturesupports f401和f841错误码忽略未使用的导入（＃noqa：f401）和未使用的localvariables（＃noqa：f841）。但是，我们建议使用NOTQA评论的白名单，因为NOQA评论为代码添加了视觉噪声并达到了读取。</p><p>  You can use  --ignore-names foo*,ba[rz] to let Vulture ignore all namesstarting with  foo and the names  bar and  baz. Additionally, the --ignore-decorators option can be used to ignore functions decoratedwith the given decorator. This is helpful for example in Flask projects,where you can use  --ignore-decorators &#34;@app.route&#34; to ignore allfunctions with the  @app.route decorator.</p><p>  您可以使用--ignore-names foo *，ba [rz]让秃鹰忽略所有Namesstarting与foo和名称酒吧和baz。此外，--ignore-decorators选项可用于忽略所带来给定装饰器的功能。这是有用的，例如在烧瓶项目中，您可以在那里使用 -  Aignore-Decorators＆＃34; @ app.route＆＃34;用@ app.route装饰托忽略Allfunctions。</p><p> We recommend using whitelists instead of  --ignore-names or --ignore-decorators whenever possible, since whitelists areautomatically checked for syntactic correctness when passed to Vultureand often you can even pass them to your Python interpreter and let itcheck that all whitelisted code actually still exists in your project.</p><p> 我们建议在尽可能使用白名单而不是--ignore-names或-ignore-decorators，因为当传递给Vultureand时，甚至可以将它们传递给您的Python解释器并让itcheck iteCheck这一切仍然存在存在于您的项目中。</p><p>  There are situations where you can&#39;t just remove unused variables, e.g.,in tuple assignments or function signatures. Vulture will ignore thesevariables if they start with an underscore (e.g.,  _x, y = get_pos() or def my_method(self, widget, **_kwargs)).</p><p>  有些情况，您可以在其中删除未使用的变量，例如在元组分配或函数签名中。如果他们从下划线开始（例如，_x，y = get_pos（）或def my_method（self，widget，** _ kwargs），则秃鹰将忽略thesevariables。 </p><p>  You can use the  --min-confidence flag to set the minimum confidencefor code to be reported as unused. Use  --min-confidence 100 to onlyreport code that is guaranteed to be unused within the analyzed files.</p><p>您可以使用--min-stencidente标志设置要报告的最低契约代码作为未使用。使用--Min-Confident信n100次才能在分析的文件中保证未使用的代码。</p><p>  If Vulture complains about code like  if False:, you can use a Booleanflag  debug = False and write  if debug: instead. This makes the codemore readable and silences Vulture.</p><p>  如果秃鹰抱怨代码，如false :,，您可以使用BooleAnFlag Debug = False并在调试时写入：转而。这使得Codemore可读和沉默的雕刻。</p><p>      You can also store command line arguments in  pyproject.toml under the tool.vulture section. Simply remove leading dashes and replace allremaining dashes with underscores.</p><p>      您还可以存储Pyproject.Toml中的命令行参数。纹理部分。只需删除带有下划线的扩展短划线并替换分类破折号。</p><p>   [ tool. vulture] exclude = [  &#34;file*.py &#34;,   &#34;dir/ &#34;] ignore_decorators = [  &#34;@app.route &#34;,   &#34;@require_* &#34;] ignore_names = [  &#34;visit_* &#34;,   &#34;do_* &#34;] make_whitelist =  true min_confidence =  80 paths = [  &#34;myscript.py &#34;,   &#34;mydir &#34;] sort_by_size =  true verbose =  true</p><p>   [ 工具。秃鹰]排除= [＆＃34;文件* .py＆＃34;，＆＃34; dir /＆＃34;] icone_decorators = [＆＃34; @ app.route＆＃34;＆＃34; @ Require_ *＆＃34;] Ignore_names = [＆＃34;访问_ *＆＃34;，＆＃34; do_ *＆＃34;] make_whitelist = true min_confidence = 80 paths = [＆＃34; myscript.py＆＃ 34 ;,＆＃34; MyDir＆＃34;] sort_by_size = true verbose = true</p><p>  You can use a  pre-commit hook to runVulture before each commit. For this, install pre-commit and add thefollowing to the  .pre-commit-config.yaml file in your repository:</p><p>  您可以在每次提交之前使用预先提交的钩子到纠错。为此，请在存储库中安装预先提交并将其添加到.pre-commit-config.yaml文件：</p><p> repos: -  repo:  https://github.com/jendrikseipp/vulture  rev:   &#39;v2.3 &#39;   # or any later Vulture version  hooks: -  id:  vulture</p><p> repos： -  repo：https：//github.com/jendrikseipp/vulture rev：＆＃39; v2.3＆＃39; ＃或任何稍后的秃鹰版本挂钩： -  ID：秃鹰</p><p> Then run  pre-commit install. Finally, create a  pyproject.toml filein your repository and specify all files that Vulture should check under [tool.vulture] --&gt; paths (see above).</p><p> 然后运行预先提交安装。最后，创建一个pyproject.toml filein的存储库，并指定秃鹰应该在[工具培养]下检查的所有文件 - ＆gt;路径（见上文）。 </p><p>  Vulture uses the  ast module to build abstract syntax trees for allgiven files. While traversing all syntax trees it records the names ofdefined and used objects. Afterwards, it reports the objects which havebeen defined, but not used. This analysis ignores scopes and only takesobject names into account.</p><p>Vulture使用AST模块来构建Allgiven文件的抽象语法树。在遍历所有语法树的同时，它记录多义和使用的对象的名称。之后，它报告了定义的对象，但未使用。此分析忽略范围，仅考虑姓名。</p><p> Vulture also detects unreachable code by looking for code after return,  break,  continue and  raise statements, and by searchingfor unsatisfiable  if- and  while-conditions.</p><p> vulture还通过查找返回，中断，继续和引导语句后的代码来检测无法访问的代码，并通过搜索不可履行的if-和条件来搜索。</p><p>  When using the  --sort-by-size option, Vulture sorts unused code by itsnumber of lines. This helps developers prioritize where to look for deadcode first.</p><p>  使用 - 逐个尺寸选项时，秃鹰通过ITS0MBER排序未使用的代码。这有助于开发人员优先考虑首先寻找DeadCode的位置。</p><p>   import  os class  Greeter:  def  greet( self):  print( &#34;Hi&#34;) def  hello_world():  message  =  &#34;Hello, world!&#34;  greeter  =  Greeter()  greet_func  =  getattr( greeter,  &#34;greet&#34;)  greet_func() if  __name__  ==  &#34;__main__&#34;:  hello_world()</p><p>   导入OS类问候：Def问候（Self）：打印（＆＃34;嗨＆＃34;）def hello_world（）：message =＆＃34;您好，世界！＆＃34;问候=问候语（）readr_func = getattr（问候员，＆＃34;问候＆＃34;）great_func（）如果__name__ ==＆＃34; __主要__＆＃34 ;: hello_world（）</p><p>    dead_code.py:1: unused import &#39;os&#39; (90% confidence)dead_code.py:4: unused function &#39;greet&#39; (60% confidence)dead_code.py:8: unused variable &#39;message&#39; (60% confidence)</p><p>    dead_code.py：1：未使用的导入＆＃39; OS＆＃39; （90％的信心）dead_code.py：4：未使用的功能＆＃39;迎接＆＃39; （60％的信心）dead_code.py：8：未使用的变量＆＃39;消息＆＃39; （置信60％）</p><p> Vulture correctly reports &#34;os&#34; and &#34;message&#34; as unused, but it fails todetect that &#34;greet&#34; is actually used. The recommended method to dealwith false positives like this is to create a whitelist Python file.</p><p> 秃鹰正确报告＆＃34; os＆＃34;和＃34;消息＆＃34;因为未使用，但它失败了＆＃34;问候＆＃34;实际使用。推荐的方法来处理这样的误报是创建一个白名单Python文件。</p><p>  In a whitelist we simulate the usage of variables, attributes, etc. Forthe program above, a whitelist could look as follows:</p><p>  在白名单中，我们模拟了上述变量，属性等的使用情况，白名单可能如下所示： </p><p>          coverage finds unused codemore reliably than Vulture, but requires all branches of the code toactually be run.</p><p>Coverage在秃鹰中可靠地查找未使用的CodeMore，但需要在自动运行代码的所有分支机构。 </p></div><div id="story_share_this"><div class="sharethis-inline-share-buttons"></div></div><div class="text-break sotry_link page_narrow"><a target="_blank" href="https://github.com/jendrikseipp/vulture">https://github.com/jendrikseipp/vulture</a></div><div class="story_tags page_narrow"><button type="button" class="btn btn-light my_tag"><a href="/tag/python/">#python</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/代码/">#代码</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/找到/">#找到</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/find/">#find</a></button></div></div><div class="my_movie_list_item shadow p-3 mb-5 bg-white rounded"><button type="button" class="btn btn-link my_tag"><a href="/tag/web2.0/">#web2.0</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/google/">#google</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/设计/">#设计</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/创意/">#创意</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/摄影/">#摄影</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/图片/">#图片</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/游戏/">#游戏</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/软件/">#软件</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/视频/">#视频</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/广告/">#广告</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/手机/">#手机</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/iphone/">#iphone</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/网站/">#网站</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/免费/">#免费</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/下载/">#下载</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/windows/">#windows</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/apple/">#apple</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/微软/">#微软</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/firefox/">#firefox</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/blog/">#blog</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/苹果/">#苹果</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/音乐/">#音乐</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/博客/">#博客</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/wordpress/">#wordpress</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/恶搞/">#恶搞</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/qq/">#qq</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/艺术/">#艺术</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/web/">#web</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/工具/">#工具</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/分享/">#分享</a></button></div></div></div><div id="my_footer"><div class=""><a href="/tags/">tags</a> <a href="/users/">users</a></div>&copy;2012-2021 diglog.com </div></div></body></html>