<!doctype html><html lang="zh-hans"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Rails 6.1 </title><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"><link rel="stylesheet" href="/img/css.css?random="><link data-rh="true" rel="icon" href="/img/favicon.ico"/><script data-ad-client="ca-pub-6067137220025946" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script type="text/javascript" src="https://platform-api.sharethis.com/js/sharethis.js#property=5effb96910009800120b8d4d&product=inline-share-buttons" async="async"></script>
<script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?03c1a0f31299b4a2fbb83c34d6beaac9";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script></head><body><div id="my_header"><div class="container"><nav class="navbar navbar-expand-lg"><a class="navbar-brand" href="/"><img alt="diglog" src="/img/logo.v1.gif" class="rounded-sm"></a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarNavAltMarkup"><div class="navbar-nav"></div></div></nav></div></div><div class="container"><div id="my_content"><h1 class="page_narrow">Rails 6.1 </h1><div class="row"><div class="col-lg-12 col-12"><div class="my_story_list_item shadow p-3 mb-5 bg-white rounded"><div class="story_page_pub_time page_narrow">2020-12-10 04:32:33</div><div class="story_img_container"><a href="http://img2.diglog.com/img/2020/12/e5c947b7730c1c416fa0ef68131c8242.png"><img src="http://img2.diglog.com/img/2020/12/e5c947b7730c1c416fa0ef68131c8242.png" class="img-fluid my_story_img" onerror="this.style.display='none'"></a></div><div class="page_narrow text-break page_content"><p>Rails 6.1已经发布，哇，它有很多很棒的东西！过去几个月来，我们一直在努力工作，以实现对多个数据库的改进，增加了对销毁作业中的关联而不是内存中的关联的支持，将错误转化为对象等等。</p><p> 多年来，Rails的发展令人惊奇，尽管我们在入职流程上有一些改进，但Rails从未比现在更好。此版本中的功能着重于添加所需的功能，以使应用程序在未来几年内保持正常运行。</p><p>    Rails 6.1使您能够切换每个数据库的连接。在6.0中，如果您切换到读取角色，则所有数据库连接也都切换到读取角色。现在在6.1中，如果您在配置中将legacy_connection_handling设置为false，Rails将允许您通过在相应的抽象类上调用connected_to来切换单个数据库的连接。</p><p>  Rails 6.0提供了功能上对数据库进行分区（多个分区，不同的架构）的功能，但无法支持水平分片（相同的架构，多个分区）。 Rails无法支持水平分片，因为Active Record中的模型每个类每个角色只能有一个连接。现在，此问题已修复，并且可以使用Rails进行水平分片。</p><p>  除了添加水平分片支持外，我们还添加了许多新功能并改进了多个数据库的内部结构。凯尔·汤普森（Kyle Thompson）添加了对数据库命名任务的支持，例如db：schema：dump：namespace，db：schema：load：namespace，db：structure：dump：namespace和db：structure：load：namespace。 Shopify的Jean Boussier改进了连接池管理。</p><p>  除了对数据库和连接管理进行了许多改进之外，Aaron Patterson和Eileen M. Uchitelle还增加了对严格加载关联的支持。借助此功能，您可以确保所有关联均已预先加载，并在N + 1发生之前将其停止。 Kevin Deisz为关联声明添加了其他支持，而bogdanvlviv添加了支持以默认情况下严格加载。</p><p>  Rails 6.1添加了“委托类型”作为单表继承的替代方法。这有助于表示类层次结构，从而允许超类成为由其自己的表表示的具体类。每个子类都有自己的表以用于其他属性。查看DHH编写的请求请求。 </p><p>销毁关联异步功能使应用程序可以销毁后台作业中的关联。这可以帮助您避免破坏数据时应用程序中的超时和其他性能问题。该实现是一个集体的努力-PR由Basecamp的George Claghorn启动，由GitHub的Cory Gwin添加了进一步的支持，并由Shopify的RafaelFrança和Adrianna Chang最终确定了。</p><p>  Active Model的错误现在是带有接口的对象，该接口使您的应用程序可以更轻松地处理模型引发的错误并与之交互。该功能由lulalala实现，并包括一个查询界面，可以进行更精确的测试以及访问错误详细信息。</p><p>  Active Storage在Rails 6.1中进行了很好的更新！现在，您可以为要存储附件的服务配置附件。此功能由Dmitry Tsepelev实现。</p><p> 此外，Rails 6.1为Active Directory添加了对Blob永久URL的支持。由Shopify的Peter Zhu实施，此功能允许将您的附件配置为使用私有或公共URL，并确保公共URL将始终使用永久URL。</p><p>  如果您想免费运行应用程序弃用警告，那么此功能非常适合您。该功能允许应用程序在引发弃用警告时有选择地引发错误。这对于确保开发人员不要重新引入已经修复的弃用警告很有用。该功能由Test Double的Cliff Pruitt实现！</p><p>  发布不仅与您获得的强大功能有关。这还涉及到修复错误，提高性能以及使Rails对所有人更稳定。此版本包括一项改进功能，该功能可以避免查询Molly Struve报告的空数组以及John Hawthorn实现的修复程序是否传递到哪里。 Eileen M. Uchitelle和Aaron Patterson还实现了性能改进，当我们知道所有值都是整数时，可以加快查询速度。</p><p>  自从首次发布Rails以来，经典的自动装带器一直为我们提供良好的服务，但是有一个新手正在酝酿中，它将开始其弃用周期。 </p><p>强烈建议您不要使用经典的自动加载器来进行新的Rails项目，并且我们建议升级时在经典版本上运行的现有项目切换到zeitwerk模式。 请查看《升级Ruby on Rails指南》以获取提示。  Rails 6.1的变化很大。 654人为Rails贡献了力量。 请查看CHANGELOGS，以获取有关错误修复，性能改进和其他功能的更多详细信息。  感谢所有报告错误，发送请求请求并帮助改进Rails的人。 Rails更好，因为您的辛勤工作！ </p></div><div id="story_share_this"><div class="sharethis-inline-share-buttons"></div></div><div class="text-break sotry_link page_narrow"><a target="_blank" href="https://weblog.rubyonrails.org/2020/12/9/Rails-6-1-0-release/">https://weblog.rubyonrails.org/2020/12/9/Rails-6-1-0-release/</a></div><div class="story_tags page_narrow"><button type="button" class="btn btn-light my_tag"><a href="/tag/rails/">#rails</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/功能/">#功能</a></button></div></div><div class="shadow p-3 mb-5 bg-white rounded clearfix"><div class="container"><div class="row"><div class="col-sm"><div><a target="_blank" href="/story/1036013.html"><img src="http://img2.diglog.com/img/2020/11/thumb_a1fe6584030c6a7cb2547a0764fd0777.png" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1036013.html">StimulusReflex：使用Ruby on Rails构建现代的反应式Web界面</a></div><span class="my_story_list_date">2020-11-23 8:30</span></div><div class="col-sm"><div><a target="_blank" href="/story/1034103.html"><img src="http://img2.diglog.com/img/2020/11/thumb_feb0307586085b572c07461c5885df6e.png" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1034103.html">如何用Ruby、Rails、Active Record和No N+1绘制QL</a></div><span class="my_story_list_date">2020-11-10 2:32</span></div><div class="col-sm"><div><a target="_blank" href="/story/1032892.html"><img src="http://img2.diglog.com/img/2020/11/thumb_e5c947b7730c1c416fa0ef68131c8242.png" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1032892.html">Rails 6.1 RC1</a></div><span class="my_story_list_date">2020-11-3 10:14</span></div><div class="col-sm"><div><a target="_blank" href="/story/1032121.html"><img src="http://img2.diglog.com/img/2020/10/thumb_91253f5412240fbde2f92cc0ec96cb46.jpg" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1032121.html">Ruby on Rails在一周内</a></div><span class="my_story_list_date">2020-10-30 4:4</span></div></div></div></div><div class="my_movie_list_item shadow p-3 mb-5 bg-white rounded"><button type="button" class="btn btn-link my_tag"><a href="/tag/web2.0/">#web2.0</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/google/">#google</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/设计/">#设计</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/创意/">#创意</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/摄影/">#摄影</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/游戏/">#游戏</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/图片/">#图片</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/软件/">#软件</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/视频/">#视频</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/手机/">#手机</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/广告/">#广告</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/apple/">#apple</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/iphone/">#iphone</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/网站/">#网站</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/免费/">#免费</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/下载/">#下载</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/windows/">#windows</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/微软/">#微软</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/firefox/">#firefox</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/苹果/">#苹果</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/blog/">#blog</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/音乐/">#音乐</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/博客/">#博客</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/wordpress/">#wordpress</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/恶搞/">#恶搞</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/艺术/">#艺术</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/qq/">#qq</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/web/">#web</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/谷歌/">#谷歌</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/工具/">#工具</a></button></div></div></div><div id="my_footer"><div class=""><a href="/tags/">tags</a> <a href="/users/">users</a></div>&copy;2012-2021 diglog.com </div></div></body></html>