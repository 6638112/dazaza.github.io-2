<!doctype html><html lang="zh-hans"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Loopy C拼图</title><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"><link rel="stylesheet" href="/img/css.css?random="><link data-rh="true" rel="icon" href="/img/favicon.ico"/><script data-ad-client="ca-pub-6067137220025946" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script type="text/javascript" src="https://platform-api.sharethis.com/js/sharethis.js#property=5effb96910009800120b8d4d&product=inline-share-buttons" async="async"></script>
<script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?03c1a0f31299b4a2fbb83c34d6beaac9";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script></head><body><div id="my_header"><div class="container"><nav class="navbar navbar-expand-lg"><a class="navbar-brand" href="/"><img alt="diglog" src="/img/logo.v1.gif" class="rounded-sm"></a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarNavAltMarkup"><div class="navbar-nav"></div></div></nav></div></div><div class="container"><div id="my_content"><h1 class="page_narrow">Loopy C拼图</h1><div class="row"><div class="col-lg-12 col-12"><div class="my_story_list_item shadow p-3 mb-5 bg-white rounded"><div class="story_page_pub_time page_narrow">2020-11-23 00:58:38</div><div class="page_narrow text-break page_content"><p>在讨论我想在这篇文章中分享的难题之前，让我们先讨论一下整数下溢和C中未定义的行为。</p><p> #include  int main（）{int i;对于（i = 0; i  1 \ end {cases \\]其中\（k \）是非负数整数\（n \）是一个正整数，符号\（\ oplus \）表示对两个负整数进行按位XOR运算。 = n当尚未打印任何点时。</p><p> 如果我们可以证明\（n \）是\（f（k）= 0，\）的\（k \）的最小值，则可以证明循环在打印\（n \）点后终止。</p><p> 在下一节中，我们将看到\（n，\）\ [f（k）= \ begin {cases} n＆\ text {if} k \ text {是偶数}，\\ 1＆\ text {if} k \ text {是奇数}。\ end {cases} \]因此，当\（n \）为奇数时，不存在\（k \）的值，其中\（f（k）= 0 \） 。结果，当\（n \）为奇数时，循环永远不会终止。</p><p> 然后我们将看到\（n \）和\（0 \ leq k \ leq n，\）\ [f（k）= 0 \ iff k = n。\]的偶数，因此循环在打印\后终止当\（n \）是偶数时，（n \）点。</p><p>  我们将首先证明一些关于按位XOR运算的有趣性质的引理。然后，我们将使用它来证明上一节中提出的要求。</p><p>引理1.对于一个奇数正整数\（n，\）\ [n \ oplus（n-1）= 1 \]，其中符号\（\ oplus \）表示对两个负整数进行按位XOR运算。</p><p> 证明。让\（n \）的二进制表示为\（b_m \ dots b_1 b_0 \）其中\（m \）是一个非负整数，\（b_m \）代表\（n。\）的最高有效非零位由于\（n \）是一个奇数，\（b_0 =1。\）因此\（n \）可以写为\ [b_m \ dots b_11。\]结果\（n-1 \）可能表示为\ [b_m \ dots b_10。\]两个二进制表示的按位XOR为\（1. \）</p><p> 引理2。对于非负整数\（n，\）\ [n \ oplus 1 = \ begin {cases} n + 1＆\ text {if} n \ text {is even}，\\ n-1＆\ text {if} n \ text {是奇数}。 \ end {cases \\]，其中符号\（\ oplus \）表示对两个负整数进行按位XOR运算。</p><p> 证明。让\（n \）的二进制表示为\（b_m \ dots b_1 b_0 \）其中\（m \）是一个非负整数，\（b_m \）代表\（n。\）的最高有效非零位</p><p> 如果\（n \）是偶数，则\（b_0 = 0. \）在这种情况下，\（n \）可能写为\（b_m \ dots b_1 0. \）因此，\（n \ oplus 1 \）可能是写为\（b_m \ dots b_1 1. \）因此\（n \ oplus 1 = n + 1. \）</p><p> 如果\（n \）为奇数，则\（b_0 =1。\）在这种情况下，\（n \）可以写为\（b_m \ dots b_1 1 \。写为\（b_m \ dots b_1 0. \）因此\（n \ oplus 1 = n-1 \</p><p> 请注意，对于奇数\（n，\）引理1，也可以以这种方式推导为引理2。 k）\ oplus 1 = 0 \ oplus 1 = 1. \]</p><p>引理3。如果\（x \）是偶数非负整数，并且\（y \）是奇数正整数，则\（x \ oplus y \）是奇数，其中符号\（\ oplus \）表示按位XOR运算在两个非负整数上。</p><p> 证明。让\（x \）的二进制表示为\（b_ {xm_x} \点b_ {x1} b_ {x0} \）和\（y \）的二进制表示为\（b_ {ym_y} \点b_ { y1} b_ {y0} \）其中\（m_x \）和\（m_y \）是非负整数，\（b_ {xm_x} \）和\（b_ {xm_y} \）表示\（最高有效非零位x \）和\（y，\）。</p><p> 由于\（x \）为偶数，\（b_ {x0} =0。\）由于\（y \）为奇数，\（b_ {y0} =1。\）</p><p> 令\（z = x \ oplus y \）具有\（b_ {zm_z} \ dots b_ {z1} b_ {z0} \）的二进制表示形式，其中\（m_ {zm_z} \）是非负整数，并且\（ b_ {zm_z} \）是\（z。\）的最高有效非零位</p><p> 我们得到\（b_ {z0} = b_ {x0} \ oplus b_ {y0} = 0 \ oplus 1 = 1 \）因此，\（z \）是奇数。</p><p>  定理1.令\（\ oplus \）表示对两个非负整数的按位XOR运算，并且\ [f（k）= \ begin {cases} n＆\ text {if} n = 0，\\ n \ oplus（f（n -1）-1）＆\ text {if} n>1。\ end {cases} \]其中\（k \）是一个非负整数，而\（n \）是一个奇数正整数。然后\ [f（k）= \ begin {cases} n和\ text {if} k \ text {是偶数}，\\ 1＆\ text {if} k \ text {是奇数}。 \ end {cases} \]</p><p> 证明：这是数学归纳法的证明。我们有\（f（0）= n \）的定义。因此，基本情况保持良好。</p><p>让我们假设对于任何偶数\（k \）（归纳假设）\（f（k）= n \）。令\（k'= k + 1 \）和\（k''= k + 2。\）</p><p> 如果\（k \）是偶数，我们得到\ begin {align *} f（k'）＆= n \ oplus（f（k）-1）&& \ text {（根据定义）} \\＆= n \ oplus（n-1）&& \ text {（通过归纳假设）} \\＆= 1 && \ text {（通过引理1）}，\\ f（k''）＆= n \ oplus（f（k' ）-1）&& \ text {（根据定义）} \\＆= n \ oplus（1-1）&& \ text {（因为\（f（k'）= 1 \））} \\＆= n \ oplus 0 \\＆= n。\ end {align *}</p><p> 由于\（f（k''）= n \）并且\（k''\）是\（k，\）之后的下一个偶数，因此归纳步骤已完成。归纳步骤表明，对于每个偶数\（k，\）\（f（k）= n \）成立。它还表明，对于每个偶数\（k，\）\（f（k）= n \），对于每个奇数\（k'。\），我们得到\（f（k'）= 1 \）。</p><p> 定理2。令\（\ oplus \）表示对两个非负整数的按位XOR运算，并且\ [f（k）= \ begin {cases} n＆\ text {if} n = 0，\\ n \ oplus（f（n -1）-1）＆\ text {if} n>1。\ end {cases} \]其中\（k \）是非负整数，\（n \）是偶数正整数，\（0 \ leq k \ leq n。\）然后\ [f（k）= 0 \ iff k = n。\]</p><p> 证明。首先，我们将通过数学归纳原理证明，即使\（k，\）\（f（k）= n-k。\）定义为\（f（0）= n \），所以基本情况很好。现在让我们假设\（f（k）= n-k \）对其中\（0 \ leq k \ leq n \）（归纳假设）的任何偶数\（k \）都成立。由于\（n \）（根据定义）是偶数而\（k \）（根据归纳假设）是偶数，因此\（f（k）= n-k \）是偶数。结果，\（f（k）-1 \）奇数。通过引理3，我们得出结论：\（f（k + 1）= n \ oplus（f（k）-1）\）是奇数。</p><p> 现在我们执行归纳步骤如下：\ begin {align *} f（k + 2）＆= n \ oplus（f（k + 1）-1）&& \ text {（根据定义）} \\＆= n \ oplus（f（k + 1）\ oplus 1）&& \ text {（由引理2表示奇数\（n \））} \\＆= n \ oplus（（n \ oplus（f（k）-1） ）\ oplus 1）&& \ text {（根据定义）} \\＆=（n \ oplus n）\ oplus（（f（k）-1）\ oplus 1）&& \ text {（通过XOR的关联性}} \\＆= 0 \ oplus（（f（k）-1）\ oplus 1）\\＆=（f（k）-1）\ oplus 1 \\＆=（f（k）-1）-1 && \ text {（从引理2得出奇数\（n \））} \\＆= f（k）-2 \\＆= n-k-2 && \ text {（归纳假设）。} \ end {align *}这完成了归纳步骤，并证明了\（f（k）= n-k \）甚至\（k \）其中\（0 \ leq k \ leq n。\）</p><p> 上面我们显示了\（f（k）\）对于每个偶数\（k \）都是偶数，其中\（0 \ leq k \ leq n \）导致\（f（k + 1）\）为奇数对于每个奇数\（k + 1. \）这意味着\（f（k）\）对于任何奇数\（k。\）不能为\（0 \）因此，\（f（k）= 0 \）仅是可能的甚至\（k。\）求解\（f（k）= n-k = 0，\）我们得出的结论是\（f（k）= 0 \）当且仅当\（k = n。\）</p></div><div id="story_share_this"><div class="sharethis-inline-share-buttons"></div></div><div class="text-break sotry_link page_narrow"><a target="_blank" href="https://susam.in/blog/loopy-c-puzzle/">https://susam.in/blog/loopy-c-puzzle/</a></div><div class="story_tags page_narrow"><button type="button" class="btn btn-light my_tag"><a href="/tag/loopy/">#loopy</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/oplus/">#oplus</a></button></div></div><div class="my_movie_list_item shadow p-3 mb-5 bg-white rounded"><button type="button" class="btn btn-link my_tag"><a href="/tag/web2.0/">#web2.0</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/google/">#google</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/设计/">#设计</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/创意/">#创意</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/摄影/">#摄影</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/游戏/">#游戏</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/图片/">#图片</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/软件/">#软件</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/视频/">#视频</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/手机/">#手机</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/广告/">#广告</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/apple/">#apple</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/iphone/">#iphone</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/网站/">#网站</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/免费/">#免费</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/下载/">#下载</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/windows/">#windows</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/微软/">#微软</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/firefox/">#firefox</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/苹果/">#苹果</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/blog/">#blog</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/音乐/">#音乐</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/博客/">#博客</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/wordpress/">#wordpress</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/恶搞/">#恶搞</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/艺术/">#艺术</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/qq/">#qq</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/web/">#web</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/谷歌/">#谷歌</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/工具/">#工具</a></button></div></div></div><div id="my_footer"><div class=""><a href="/tags/">tags</a> <a href="/users/">users</a></div>&copy;2012-2021 diglog.com </div></div></body></html>