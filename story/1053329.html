<!doctype html><html lang="zh-hans"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>shellcheck：shell脚本的静态分析工具 </title><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"><link rel="stylesheet" href="/img/css.css?random="><link data-rh="true" rel="icon" href="/img/favicon.ico"/><script data-ad-client="ca-pub-6067137220025946" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script type="text/javascript" src="https://platform-api.sharethis.com/js/sharethis.js#property=5effb96910009800120b8d4d&product=inline-share-buttons" async="async"></script>
<script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?03c1a0f31299b4a2fbb83c34d6beaac9";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script></head><body><div id="my_header"><div class="container"><nav class="navbar navbar-expand-lg"><a class="navbar-brand" href="/"><img alt="diglog" src="/img/logo.v1.gif" class="rounded-sm"></a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarNavAltMarkup"><div class="navbar-nav"></div></div></nav></div></div><div class="container"><div id="my_content"><h1 class="page_narrow">shellcheck：shell脚本的静态分析工具 </h1><div class="row"><div class="col-lg-12 col-12"><div class="my_story_list_item shadow p-3 mb-5 bg-white rounded"><div class="story_page_pub_time page_narrow">2021-03-19 03:46:24</div><div class="story_img_container"><a href="http://img2.diglog.com/img/2021/3/f50ada20a04bcae7805393a25debf969.png"><img src="http://img2.diglog.com/img/2021/3/f50ada20a04bcae7805393a25debf969.png" class="img-fluid my_story_img" onerror="this.style.display='none'"></a></div><div class="page_narrow text-break page_content"><p>要指出并澄清典型的初学者＆＃39; s语法问题，导致shellto给出密码错误消息。</p><p> 要指出并澄清典型的中间水平语义问题，因为壳体奇怪地和反向直观地表现出来。</p><p> 要指出可能导致Asadvanced User＆＃39;否则工作脚本的微妙警告，角落案例和陷阱在未来的情况下失败。</p><p> 查看错误代码库，了解麦克检查可以帮助您识别的情况！</p><p>       ShellCheck.net始终与最新的Git提交同步，并且是最简单的方法来提供Go的方法。告诉你的朋友！</p><p>           虽然ShellCheck主要用于交互式使用，但它可以轻松添加到构建或测试套件中。它使得规范使用退出代码，因此只需将shellcheck命令添加为进程的一部分。</p><p>         大多数其他服务（包括Gitlab），让您通过系统＆＃39; s包管理器（请参阅安装），或者通过下载和解包二进制版本来安装shellcheck。 </p><p>它是一个好主意，无论如何手动安装特定的shellcheck版本。这避免了惊讶的建立在发布新警告的新版本时突破。</p><p> 对于自定义过滤或报告，ShellCheck可以输出简单的JSON，CheckStyle兼容的XML，GCC兼容警告以及人类可读文本（有或没有ANSI颜色）。有关更多文档，请参阅Integration Wiki页面。</p><p>                                        Docker运行--rm -v＆＃34; $ PWD：/ MNT＆＃34; Koalaman / shellcheck：稳定MyScript＃或：V0.4.7的该版本，或：最新用于日常构建</p><p> 或者使用Koalaman / shellcheck-Alpine如果您希望更大的高山Linux基于的图像扩展。它与常规的高山图像完全相同，但预先安装了shellcheck。</p><p>     或者看到其他版本的GitHub版本（包括日常git构建的最新元释放）。</p><p> 发行版已经带有一个手册页。如果您正在从源代码构建，可以安装：</p><p>   Travis CI现在已经集成了Shellcheck默认情况下，因此您不需要手动安装它。 </p><p>如果您仍然想要这样做，以便升级您的休闲或确保您＆＃39;重用最新版本，请按照以下步骤安装二进制版本。</p><p>  预编译的二进制文件来自tar.xz文件。要解压缩它们，请确保安装XZ.ON Debian / Ubuntu / MINT，您可以APT安装XZ-Utils.on RedHat / Fedora / CentOS，Yum -y Install XZ。</p><p>    本节介绍如何从源目录中构建shellcheck。 shellcheck是用Haskell编写的，需要2GB的RAM编译。</p><p>  Shellcheck使用Cabal建造和包装。从系统和＃39; s包管理器安装包裹架（用e，apt-get，brew，Emerge，yum或zypper）。</p><p> 在MacOS（OS X）上，您可以使用BREW快速安装Cabal，如果您尝试从源代码编译它，则需要几分钟而不是超过30分钟。</p><p>  在Macports上，包代替hs-cabal-install，而本机Windows用户应该从https://www.haskell.org/platform/安装最新版本的haskell平台</p><p>             在本机窗口中，应该已经设置了路径，但系统可以使用传统代码页。在CMD.EXE中，PowerShell.exe和PowerShell ISE，确保使用TrueType字体，而不是栅格字体，并将ActiveCodePage与CHCP一起设置为UTF-8（65001）： </p><p>那么Shellcheck寻找什么样的东西？以下是检测到的问题的不完整列表。</p><p>   回声$ 1＃未引用的variablesfind。 - 名称* .ogg＃未引版的查找/ grep patternsrm＆＃34;〜/ my file.txt＆＃34; ＃quoted tilde扩展=＆＃39;  -  verbose =＆＃34;真＆＃34; ＆＃39; ; CMD $ V＃文字引号在＆＃34中的变量中; *。ogg＆＃34; ＃错误引用＆＃39;对于＆＃39; loopstouch $ @＃未引用$ @ echo＆＃39;别忘了重启！ ＆＃39; ＃operquote opostrophe echo＆＃39关闭; Don \＆＃39; t在家里尝试这个＆＃39; ＃尝试逃脱＆＃39;在＆＃39; ＆＃39;回声＆＃39;路径是$ path＆＃39;单引号陷阱＆＃34中的变量; echo取$ {秒} s＆＃34; 0＃过早扩展陷阱</p><p>   [[n！= 0]]＃常量测试表达式[[-e * .mpg]]＃存在的存在检查[[$ foo == 0]]＃由于缺少空格而始终为true [[-n＆＃34; $ foo＆＃34; ]]＃由于文字，总是如此[[$ foo =＆＃34; fo +＆＃34; ]]＃引用正则表达式=〜[foo =〜re]＃unsupported []运算符[$ 1-eq＆＃34; shellcheck＆＃34; ]＃字符串的数字比较[$ n＆amp;＆amp; $ m]＃＆amp;＆amp;在没有$（..）的[...] [grep-q foo文件]＃命令[[＆＃34; $$文件＆＃34; == * .jpg]]＃Compers＆＃39; t成功的比较（（1 -lt 2））＃使用测试运算符（（。））</p><p>   grep＆＃39; * foo *＆＃39; Regex ContextSFind中的文件#lobs。 -exec foo {}＆amp;＆amp;酒吧 {}  \; ＃过早地终止查找-execsudo回声＆＃39; var = 42＆＃39; ＆gt; / etc / profile＃重定向sudo time --format =％s睡眠10＃通过时间（1）标志在读取h时立即内置。 do ssh＆＃34; $ h＆＃34;正常运行时间＃命令循环输入别名archive =＆＃39; mv $ 1 / backup＆＃39; ＃定义参数-cd＆＃39的别名; [a-za-z0-9]＆＃39; ＃[] TREC FOO的范围周围;回声＆＃34;完成！ ＆＃34; ＃误用＆＃39; exec＆＃39; find -name \ *。bak -o -name \ *〜-delete＃隐含优先级查找＃查找。 -exec foo＆gt;酒吧 \;在查找f（）{whoami中的重定向; }; sudo f＃外部使用内部功能</p><p>   var = 42＃space any and in resimments $ foo = 42＃$在* $ var in *; do ...＃$in for wood variablesvar $ n =＆＃34;你好＆＃34; ＃错误的间接分配echo $ {var $ n}＃错误的间接参考Var =（1,2,3）＃逗号分隔的Arraysarray =（[index] = value）＃不正确的索引初始化回声$ var [14]＃缺少{}数组参考回声＆＃34;参数10是10美元＆＃34; ＃位置参数错误引用如果$（myfunction）;然后 .. ; Fi #we $（）else otherfonitions的命令;然后.. ..＃使用＆＃39;否则if＆＃39; f; f（）{echo＆＃34;你好世界;在定义之前使用函数[false]＃＆＃39; false＆＃39;如果（-f文件）＃使用（..）而不是测试</p><p>   [ -  [-z $（find / tmp | grep mpg）]]＃使用grep-q而不是gt;＆gt;日志 ; B＆gt;＆gt;日志 ; C＆gt;＆gt; log＃使用重定向块，而是回声＆＃34;时间是“日期”＆＃34; ＃使用$（）代替CD DIR;过程  * ; CD ..; ＃使用子屏幕改装echo $ [1 + 2]＃使用标准$（（..））而不是旧$ []回声$（（$随机％6））＃don＆＃39; t使用$ in $上的变量（...））回声＆＃34; $（日期）＆＃34; ＃无用使用echocat文件| grep foo＃无用使用猫</p><p>   args =＆＃34; $ @＆＃34; ＃分配给stringsfiles =（foo bar）;回声＆＃34; $文件＆＃34; ＃引用阵列作为字符串声明-a arr =（foo bar）＃没有索引printf＆＃34;％s \ n＆＃34的关联阵列; ＆＃34;争论：$ @。 ＆＃34; ＃连接字符串和数组[[$＃＆gt; 2]＃将数字与Stringsvar =世界进行比较; echo＆＃34;你好＆＃34; var＃未使用的小写变量echo＆＃34; hello $ name＆＃34; ＃未分配的小写variablescmd |读栏; Subshel​​lscat Foo的Echo $酒吧＃作业CP栏＃管道向命令＆＃39; t read printf＆＃39;％s：％s \ n＆＃39; foo＃在printf参数计数中不匹配 </p><p>RM -RF＆＃34; $ Steamroot /＆＃34; *＃灾难性RMTOUCH ./-; LS *＃可能成为选项的地球。 -exec sh -c＆＃39; a＆amp;＆amp; b {}＆＃39; \ ＃find -exec shell注入printf＆＃34;你好$ name＆＃34; ＃f for f的printf格式的变量（ls * .txt）; Do＃迭代LS输出导出myvar = $（cmd）＃masked退出代码案例$版本在2. *）:;; 2.6。 *）＃阴影案例分支</p><p>  Shellcheck将在使用Shebang不支持的功能时警告。例如，如果您将Shebang设置为＃！/ bin / sh，Shellcheck将警告类似于CheckBashisms的可移植性问题：</p><p> echo {1 .. $ n}＃在ksh中工作，但不是bash / dash / sh echo {1..10}＃在ksh和bash工作，但不是dash / sh echo-n 42＃工作在Ksh，Bash和短划线，在陷阱＆＃39中未定义; 42＆＃39; SIGINT＃异商信号SCOMCMD＆amp; ＆gt;文件＃不可经济的重定向运营商读取foo＆lt; / dev / tcp / host / 22 #unportable截取的文件foo-bar（）{..; }＃未定义/不受支持的函数名称[$ uid = 0]＃变量未定义在dash / sh local var = value＃local在sh时间​​睡眠中未定义1 |睡眠5＃未定义的用途＆＃39;时间＆＃39;</p><p>   ps1 =＆＃39; \ e [0; 32m \ $ \ e [0m＆＃39; ＃ps1颜色不在\ [.. .. \]路径=＆＃34; $ path：〜/ bin＆＃34; ＃literal tilde在$ pathrm“file”＃unicode引号echo＆＃34;你好世界＆＃34; ＃托运返回/ doS线结尾echo hello \＃尾随空格\ var = 42 echo $ var＃扩展内环环境＃！/ bin / bash -x -e＃常见的shebang错误回声$（（n / 180 * 100） ）＃不必要的Precisionls丢失* [：Digit：]。TXT＃坏字符类Globsed＆＃39; s / foo / bar /＆＃39;文件＆gt;文件＃重定向到输入而getopts＆＃34; a＆＃34; F ;在＆＃34; b＆＃34;）＃unhandled getopts标志</p><p>  起初你＆＃39;重新喜欢＆＃34;萨伯检查很棒＆＃34;但是你＆＃39;重新喜欢＆＃34; wtf我们仍然使用bash＆＃34;</p><p>   可以通过环境变量，命令行，在文件中单独或全局忽略问题：</p><p>      请将修补程序提交到代码或文档作为GitHub拉请求！在TheShellcheck Wiki上查看DevGuide。 </p><p>Shellcheck在GNU通用公共许可证下获得许可，V3。 文件许可证中包含此许可证的副本。  ShellCheck不会尝试强制执行任何类型的格式或缩进样式，所以还要查看SHFMT！ </p></div><div id="story_share_this"><div class="sharethis-inline-share-buttons"></div></div><div class="text-break sotry_link page_narrow"><a target="_blank" href="https://github.com/koalaman/shellcheck">https://github.com/koalaman/shellcheck</a></div><div class="story_tags page_narrow"><button type="button" class="btn btn-light my_tag"><a href="/tag/shell/">#shell</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/static/">#static</a></button></div></div><div class="shadow p-3 mb-5 bg-white rounded clearfix"><div class="container"><div class="row"><div class="col-sm"><div><a target="_blank" href="/story/1049801.html"><img src="http://img2.diglog.com/img/2021/2/thumb_071fb34c3bece8fe51fb17c13098a616.jpeg" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1049801.html">具有对JSON，YAML，TOML，CSV等的本机支持的替代Shell。 </a></div><span class="my_story_list_date">2021-2-27 22:49</span></div><div class="col-sm"><div><a target="_blank" href="/story/1046436.html"><img src="http://img2.diglog.com/img/2021/1/thumb_5c9fe7d5c4b31f86a0f4cec6d580bce3.png" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1046436.html">Lisp中的Shell语言 </a></div><span class="my_story_list_date">2021-1-29 2:22</span></div><div class="col-sm"><div><a target="_blank" href="/story/1030648.html"><img src="http://img2.diglog.com/img/2020/10/thumb_48734b1162d4f8899b3eceba01c1b36a.png" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1030648.html">ISH壳牌在App Store上推出</a></div><span class="my_story_list_date">2020-10-23 3:23</span></div><div class="col-sm"><div><a target="_blank" href="/story/1026687.html"><img src="http://img2.diglog.com/img/2020/9/thumb_33654e5699dd39c5363435efdbc94d2a.jpeg" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1026687.html">FISH VS ZSH VS BASH以及为什么您应该改用FISH</a></div><span class="my_story_list_date">2020-9-27 14:19</span></div></div></div></div><div class="my_movie_list_item shadow p-3 mb-5 bg-white rounded"><button type="button" class="btn btn-link my_tag"><a href="/tag/web2.0/">#web2.0</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/google/">#google</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/设计/">#设计</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/创意/">#创意</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/摄影/">#摄影</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/游戏/">#游戏</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/图片/">#图片</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/软件/">#软件</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/视频/">#视频</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/手机/">#手机</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/广告/">#广告</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/apple/">#apple</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/iphone/">#iphone</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/网站/">#网站</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/免费/">#免费</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/下载/">#下载</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/windows/">#windows</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/微软/">#微软</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/firefox/">#firefox</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/苹果/">#苹果</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/blog/">#blog</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/音乐/">#音乐</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/博客/">#博客</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/wordpress/">#wordpress</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/恶搞/">#恶搞</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/艺术/">#艺术</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/qq/">#qq</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/web/">#web</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/谷歌/">#谷歌</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/工具/">#工具</a></button></div></div></div><div id="my_footer"><div class=""><a href="/tags/">tags</a> <a href="/users/">users</a></div>&copy;2012-2021 diglog.com </div></div></body></html>