<!doctype html><html lang="zh-hans"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>PCG32：Roguelikes的完美PRNG（2018） </title><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"><link rel="stylesheet" href="/img/css.css?random="><link data-rh="true" rel="icon" href="/img/favicon.ico"/><script data-ad-client="ca-pub-6067137220025946" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script type="text/javascript" src="https://platform-api.sharethis.com/js/sharethis.js#property=5effb96910009800120b8d4d&product=inline-share-buttons" async="async"></script>
<script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?03c1a0f31299b4a2fbb83c34d6beaac9";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script></head><body><div id="my_header"><div class="container"><nav class="navbar navbar-expand-lg"><a class="navbar-brand" href="/"><img alt="diglog" src="/img/logo.v1.gif" class="rounded-sm"></a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarNavAltMarkup"><div class="navbar-nav"></div></div></nav></div></div><div class="container"><div id="my_content"><h1 class="page_narrow">PCG32：Roguelikes的完美PRNG（2018） </h1><div class="row"><div class="col-lg-12 col-12"><div class="my_story_list_item shadow p-3 mb-5 bg-white rounded"><div class="story_page_pub_time page_narrow">2021-04-26 11:03:17</div><div class="page_narrow text-break page_content"><p>Roguelikes是游戏，除其他外，还有很多程序生成的内容。要生成内容，我们需要随机数。要获取随机数，我们需要一个伪随机数发生器。</p><p>  我们不仅想要随机数，但我们想要可预测的随机数！我们希望玩家能够分享种子，看看谁在同样的情况下做得更好，同时每次玩耍时都会让人们完全清新的经历。</p><p>  我们不能只是用种子创造一个prng并完成。例如，如果我们使用相同的PRNG，例如级别生成和战斗，那么我们的第二级可能会根据玩家进入战斗的次数！</p><p>  因此，我们需要巧妙地了解我们如何创建和存储我们的PRNG，以确保程序生成的地图不受游戏过程中发生的任何事情的影响。</p><p>  如果我们使用PCG家族的PRGS，我们的工作很容易。有许多PCG的变体，但在这篇文章中，我将仅引用PCG32，该PCG32将其生成32位无符号整数，并将其状态保持为两个64位无符号整数。</p><p>      PCG有很多，而且网站做好解释优势，但对于Roguelike开发人员来说，这一切都归结为API。</p><p>  PCG实例使用不是一个，但两个值：种子和流。种子与PRNG种子的传统想法相匹配，但是流是新的东西：它可以从同一种子产生的多个随机数播出！ </p><p>对于种子：uint64在[12345,67890] {print（＆＃34;种子：＆＃34; seed; seed）for seq：uint64在[0,1,2]中{//两个数字：种子和seq让RNG = PCG32Generator（种子：种子，SEQ：SEQ），Let值= [0,1,2,3,4,5,6,7,8,9]。地图（{_＆＃34; \（RNG。获得（上行：100））＆＃34;}）打印（＆＃34;流\（SEQ）：＆＃34;值。加入（分隔符：＆ ＃34;，＆＃34;）））} print（）}</p><p>  种子：12345流0：9,26,14,74,3,82,86,75,82,92流1：24,4,3,76,54,90,40,98,15,34流2： 60,17,46,15,6,30,0,68,29,91种子：67890流0：54,68,74,56,1,63,43,47,21,96流1：36,16 ，80,58,36,31,5,14,29,73流2：89,61,71,58,85,14,70,6,59,31</p><p>  这意味着您可以使用一种种子开始您的游戏，然后在您需要时懒洋洋地为每个级别创建单个PCG实例，而不必担心您的PRNG状态只是通过玩游戏搞砸了。 （还有其他方法可以保证并不困难，但这一个特别方便。）</p><p>  一旦我们创建了一个PCG实例，我们只需要存储两个无符号整数！序列化是一个捕捉。</p><p>        想象一下你有一个分支级别的结构。您已经通过正常地牢-30遇到了正常的Dungeon-1，您可能会在5级和15级之间的某处分支为Dwarvish-Mines-1。</p><p>  不是在游戏开始并提前生成所有级别种子时完全分支如何分支，而是可以创建一个对象，如果级别ID字符串，则基于哈希值基于哈希值创建PCG32实例！</p><p>  公共类Prngstore：可编码{公共令种子：UINT64私有var rngcache = [uint64：pcg32generator]（）private var collisionchecks = [uint64：string]（）公共init（种子：uint64）{self。 SEED = SEED} // /懒洋洋地根据给定的流公共FUNC获取（流：UINT64） - ＆gt; PCG32Generator {如果让RNG = rngcache [流] {return rng} {return rng}让rng = pcg32generator（种子：seed，seq：stream）rngcache [stream] = rng return rng} ///通过get基于给定的字符串创建PRNG它的哈希值///和处理哈希碰撞公共Func get（id：string） - ＆gt; PCG32Generator {var seq = uint64（BitPattern：int64（id. hashvalue）），而CollisionChecks [SEQ]！=零＆amp;＆amp; CollisionChecks [SEQ]！= ID {打印（＆＃34;＆＃34之间的碰撞;＆＃34;和＃34;和＃34; collisionchecks [seq]？＆＃34; nil＆＃34;）seq + = 1如果CollisionChecks [SEQ] == NIL {CollisionChecks [SEQ] = ID}如果返回自我。 GET（Stream：SEQ）}公共Func Get（Stream：Uint64） - ＆gt; PCG32Generator {如果让RNG = RNGCache [流] {return rng}让RNG = PCG32Generator（Seed：Seed，SEQ：Stream）RNGCache [Stream] = RNG Return RNG}} </p><p>一旦你有这样的课程，你再也没有想到了何时以及如何生成PRNG实例，因为它只是魔法发生。 使用该示例在本节开始时，您现在可以使用Prngstore [LevelID]的PRNG实例生成任何Dungeon，例如， prngstore [＆＃34;侏儒 - 矿山-1＆＃34;]。  PCG32非常容易实现，因此它具有广泛的语言支持，即使算法仅在2014年推出。我自己写了两次实现：Python和Swift。 您应该能够通过搜索网络来找到您喜欢的语言的良好实现。 如果你找不到一个，那真的不是太难了！ 这只是一个少数的位运作。 </p></div><div id="story_share_this"><div class="sharethis-inline-share-buttons"></div></div><div class="text-break sotry_link page_narrow"><a target="_blank" href="https://steveasleep.com/pcg32-the-perfect-prng-for-roguelikes.html">https://steveasleep.com/pcg32-the-perfect-prng-for-roguelikes.html</a></div><div class="story_tags page_narrow"><button type="button" class="btn btn-light my_tag"><a href="/tag/pcg32/">#pcg32</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/perfect/">#perfect</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/种子/">#种子</a></button></div></div><div class="my_movie_list_item shadow p-3 mb-5 bg-white rounded"><button type="button" class="btn btn-link my_tag"><a href="/tag/web2.0/">#web2.0</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/google/">#google</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/设计/">#设计</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/创意/">#创意</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/摄影/">#摄影</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/游戏/">#游戏</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/图片/">#图片</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/软件/">#软件</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/视频/">#视频</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/手机/">#手机</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/广告/">#广告</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/apple/">#apple</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/iphone/">#iphone</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/网站/">#网站</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/免费/">#免费</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/下载/">#下载</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/windows/">#windows</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/微软/">#微软</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/firefox/">#firefox</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/苹果/">#苹果</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/blog/">#blog</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/音乐/">#音乐</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/博客/">#博客</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/wordpress/">#wordpress</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/恶搞/">#恶搞</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/艺术/">#艺术</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/qq/">#qq</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/web/">#web</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/谷歌/">#谷歌</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/工具/">#工具</a></button></div></div></div><div id="my_footer"><div class=""><a href="/tags/">tags</a> <a href="/users/">users</a></div>&copy;2012-2021 diglog.com </div></div></body></html>