<!doctype html><html lang="zh-hans"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>SQL中的时间序列预测Time Series Forecasting in SQL</title><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"><link rel="stylesheet" href="/img/css.css?random="><link data-rh="true" rel="icon" href="/img/favicon.ico"/><script data-ad-client="ca-pub-6067137220025946" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script type="text/javascript" src="https://platform-api.sharethis.com/js/sharethis.js#property=5effb96910009800120b8d4d&product=inline-share-buttons" async="async"></script>
<script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?03c1a0f31299b4a2fbb83c34d6beaac9";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script></head><body><div id="my_header"><div class="container"><nav class="navbar navbar-expand-lg"><a class="navbar-brand" href="/"><img alt="diglog" src="/img/logo.v1.gif" class="rounded-sm"></a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarNavAltMarkup"><div class="navbar-nav"></div></div></nav></div></div><div class="container"><div id="my_content"><h1 class="page_narrow">Time Series Forecasting in SQL<br/>SQL中的时间序列预测</h1><div class="row"><div class="col-lg-12 col-12"><div class="my_story_list_item shadow p-3 mb-5 bg-white rounded"><div class="story_page_pub_time page_narrow">2022-02-22 14:57:22</div><div class="page_narrow text-break page_content"><p>Over the past few months, I’ve had the opportunity to mentor aspiring data scientists and enthusiasts of the field. As a data scientist myself, I couldn’t help but notice that all the mentees started off their journey by learning SQL!</p><p>在过去的几个月里，我有机会指导有抱负的数据科学家和该领域的爱好者。作为一名数据科学家，我情不自禁地注意到，所有学员都是从学习SQL开始他们的旅程的！</p><p> It is not a secret that the amount of data science tools out there makes it very hard for people to quickly jump in to the field which is in high demand. Overall, this makes transitioning into data science really tough and scary!</p><p>数据科学工具的数量让人们很难快速进入需求旺盛的领域，这已经不是秘密。总的来说，这使得向数据科学的过渡变得非常艰难和可怕！</p><p> If you were to ask any current data scientists about their most used tools, they will probably answer “SQL” and “Python”. However, what happends if you are transitioning without any programming background? MindsDB makes transitioning even easier for you as it’s an open-source tool that allows you to generate predictions using SQL.</p><p>如果你向任何一位数据科学家询问他们最常用的工具，他们可能会回答“SQL”和“Python”。然而，如果你在没有任何编程背景的情况下过渡，会发生什么？MindsDB是一个开源工具，允许您使用SQL生成预测，因此它使转换变得更加容易。</p><p> Let’s dive in more into the tool by solving a time-series forecasting example with the famous  Bitcoin Historical Data from Kaggle.</p><p>让我们通过使用Kaggle的著名比特币历史数据解决一个时间序列预测示例，进一步深入了解该工具。</p><p>  As previously mentioned,  MindsDB allows you to make predictions directly in your database. That’s it. That simple. This is the reason why this is a great tool for mentees who are transitioning into data science, without the need to overcomplicate the learning with disproportionate number of tools.</p><p>如前所述，MindsDB允许您直接在数据库中进行预测。就这样。那很简单。这就是为什么这是一个伟大的工具，为学员谁是过渡到数据科学，而不需要过度复杂的学习与不成比例的工具数量。</p><p>  In this tutorial, I want to showcase how to easily solve a time-series problem by using this tool. You can set up MindsDB in many ways, and they have amazing  docs in their website explaining how to do so. We will be following the next steps:</p><p>在本教程中，我想展示如何使用此工具轻松解决时间序列问题。你可以通过多种方式建立MindsDB，他们的网站上有很棒的文档解释如何建立MindsDB。我们将采取以下步骤：</p><p>   In this hands-on tutorial we will solely focus on MySQL, but you can use any of their  supported databases. If you don’t have MySQL installed, you can do so by downloading the installer  here and follow  MySQL’s getting started guide.</p><p>在本实践教程中，我们将只关注MySQL，但您可以使用他们支持的任何数据库。如果你没有安装MySQL，你可以在这里下载安装程序，并遵循MySQL的入门指南。</p><p> Once you have MySQL installed, we can simply log in and create a database with the data that you can find  here.</p><p>一旦你安装了MySQL，我们就可以简单地登录并用你在这里可以找到的数据创建一个数据库。</p><p>   We will then create a database  btc_data and populated with the data previously downloaded. The data contains a cleaned version of the daily  weighted_price (weighted bitcoin price) of the original bitcoin historical dataset mentioned above. We have two columns:  ds which corresponds to the (daily) timestamps, and  y which corresponds to the weighted price of bitcoin.</p><p>然后，我们将创建一个数据库btc_data，并用之前下载的数据填充。该数据包含上述原始比特币历史数据集的每日加权_价格（加权比特币价格）的清洁版本。我们有两列：ds对应于（每日）时间戳，y对应于比特币的加权价格。</p><p> CREATE DATABASE btc_data;USE btc_data;CREATE TABLE btc (ds DATE NOT NULL, y FLOAT);LOAD DATA LOCAL INFILE &#39;/path/to/btc_data.csv&#39; INTO TABLE btc FIELDS TERMINATED BY &#39;,&#39; LINES TERMINATED BY &#39;\n&#39; IGNORE 1 ROWS (ds, y);</p><p>创建数据库btc_数据；使用btc_数据；创建表btc（ds日期不为空，y浮动）；加载数据本地填充&#39/路径/到/btc_数据。csv和#39；在以&#39；结尾的表btc字段中&#39; 以&#39结尾的行；\n&#39；忽略1行（ds，y）；</p><p> Where  /path/to/btc_data.csv corresponds to the path where you have downloaded and stored the  btc_data.csv file.</p><p>其中/path/to/btc_数据。csv对应于下载和存储btc_数据的路径。csv文件。</p><p> We can now check that our data has been loaded successfully by running the following command:</p><p>现在，我们可以通过运行以下命令来检查数据是否已成功加载：</p><p>    The next step that you need to do is to create a MindsDB account  here. Then you need to connect your database. If your database is hosted locally, as mine is, you need to allow remote connection. I have done this by exposing it using   ngrok.</p><p>你需要做的下一步是在这里创建MindsDB帐户。然后你需要连接你的数据库。如果你的数据库是本地托管的，就像我的一样，你需要允许远程连接。我用ngrok曝光了它。</p><p>  You will use the selected host and port as your input to connect your local DB to MindsDB Cloud, with extra parameters:</p><p>您将使用所选主机和端口作为输入，将本地数据库连接到MindsDB Cloud，并提供额外参数：</p><p> Supported Database: MySQL in this case - choose any other depending on the database that you are using.</p><p>支持的数据库：在本例中为MySQL——根据您使用的数据库选择任何其他数据库。</p><p> Integration Name: this name is chosen by you and how you want to name the integration between your database and MindsDB. I chose to call it  btc_data.</p><p>集成名称：这个名称由您选择，以及您希望如何命名数据库和MindsDB之间的集成。我选择称之为btc_数据。</p><p>  We can now connect to out MindsDB throughout MySQL client by running the following command:</p><p>现在，通过运行以下命令，我们可以通过MySQL客户端连接到out MindsDB：</p><p>     To create and train the predictive model, we will use the mindsdb database. You should see something like this when running the following command:</p><p>为了创建和训练预测模型，我们将使用mindsdb数据库。运行以下命令时，您应该会看到类似的情况：</p><p>      Where  btc_pred is the name of the predictor/model,  btc_data corresponds to the integration database/name, and  y is the name of the feature we want to predict from our data. For time-series forcasting, MindsDB also allows us to add  additional flags such as  ORDER BY or  WINDOW, which allows us to specify the number of rows to “look back” into when making a prediction. You can see the status of your predictor by running:</p><p>其中btc_pred是预测器/模型的名称，btc_数据对应于集成数据库/名称，y是我们希望从数据预测的特征的名称。对于时间序列预测，MindsDB还允许我们添加额外的标志，例如ORDER BY或WINDOW，这允许我们在进行预测时指定要“回顾”的行数。您可以通过运行以下命令查看预测器的状态：</p><p>     For you to have an idea, at this point we have spent couple of minutes setting up our environment and the training took approximately less than 1 minute. We can now proceed to run the predictive model on our data.</p><p>为了让你有一个想法，在这一点上，我们已经花了几分钟来设置我们的环境，培训大约用了不到1分钟。我们现在可以对数据运行预测模型。</p><p>  We can now run the predictive model to get the output of our predictions. You can do this by running the following custom query:</p><p>我们现在可以运行预测模型来获得预测结果。可以通过运行以下自定义查询来实现这一点：</p><p> SELECT orig_table.ds AS DATE, pred_table.y AS PREDICTED_Y, orig_table.y AS ACTUAL_Y FROM btc_data.btc AS orig_table JOIN mindsdb.btc_pred AS pred_table WHERE orig_table.ds &gt; &#39;2011-12-30&#39; ORDER BY orig_table.ds DESC LIMIT 10;</p><p>选择原始表格。ds作为日期，pred_表。正如预测的一样，原始表格。y为btc_数据中的实际_y。btc作为原始表连接mindsdb。btc_pred作为pred_表，其中orig_表。ds&gt&#39;2011-12-30&#39; 按原始表格订购。ds DESC限制10；</p><p> What we are doing here is a simple query to get back a table with the timeframe and predicted vs. actual weighted bitcoin price. You should get something like this (results are limited for the sake of representation):</p><p>我们在这里做的是一个简单的查询，以获取一个表，其中包含时间框架和预测与实际加权比特币价格。你应该得到这样的结果（为了表现，结果是有限的）：</p><p>   SELECT orig_table.ds AS DATE, pred_table.y AS PREDICTED_Y, orig_table.y AS ACTUAL_Y FROM btc_data.btc AS orig_table JOIN mindsdb.btc_pred AS pred_table WHERE orig_table.ds &gt; LATEST;</p><p>选择原始表格。ds作为日期，pred_表。正如预测的一样，原始表格。y为btc_数据中的实际_y。btc作为原始表连接mindsdb。btc_pred作为pred_表，其中orig_表。ds&gt；最近的</p><p>    Now that we have or predictive model, let’s create empty rows on our original dataset to retrieve future predictions for representation. We are going to insert them using out MySQL server instance. An easy query statement to add the next 7 days after the last would look like this:</p><p>现在我们已经有了一个或预测模型，让我们在原始数据集上创建空行，以检索未来的预测以进行表示。我们将使用out MySQL服务器实例插入它们。在最后一个7天后添加的简单查询语句如下所示：</p><p>      For representing the predictions, we are going to add dates until 2020-12-31. Using MySQL Workbench, I will query the predictions and export it into csv file to visualize it. You can use any tool to visualize the results, for example by integrating MindsDB with Tableau.</p><p>为了表示预测，我们将添加到2020-12-31的日期。使用MySQL Workbench，我将查询预测，并将其导出到csv文件中以可视化它。您可以使用任何工具来可视化结果，例如通过将MindsDB与Tableau集成。</p><p>   In this tutorial, we have learned how to easily create and apply a Machine Learning model for time-series forecasting. MindsDB is a great new and innovative tool to be used by those who are just starting off in the field of data science.</p><p>在本教程中，我们学习了如何轻松创建和应用用于时间序列预测的机器学习模型。MindsDB是一个伟大的创新工具，可供数据科学领域刚刚起步的人使用。</p><p> Data Science is lacking experts with inter-disciplinary backgrounds and with domain expertise outside of the programming world. MindsDB is really helping the field of data science by providing such easy tool to use for non-experts and can potentially help experts in the field with tasks such as experimentation and overall making the development and production environment less complex.</p><p>数据科学缺乏具有跨学科背景和编程领域以外专业知识的专家。MindsDB通过为非专家提供如此简单的工具来帮助数据科学领域，并有可能帮助该领域的专家完成实验等任务，总体上降低开发和生产环境的复杂性。</p><p> There are many other use cases that you can explore in their  website. I believe their community will keep growing over the coming years, so don’t doubt to  try it yourself and join the community through their  Slack channel!</p><p>你可以在他们的网站上探索许多其他用例。我相信他们的社区在未来几年会继续发展，所以不要怀疑自己可以尝试一下，通过他们的渠道加入社区！</p></div><div id="story_share_this"><div class="sharethis-inline-share-buttons"></div></div><div class="story_tags page_narrow"><button type="button" class="btn btn-light my_tag"><a href="/tag/序列/">#序列</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/series/">#series</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/预测/">#预测</a></button></div></div><div class="my_movie_list_item shadow p-3 mb-5 bg-white rounded"><button type="button" class="btn btn-link my_tag"><a href="/tag/web2.0/">#web2.0</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/google/">#google</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/设计/">#设计</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/创意/">#创意</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/摄影/">#摄影</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/图片/">#图片</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/游戏/">#游戏</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/软件/">#软件</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/广告/">#广告</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/视频/">#视频</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/手机/">#手机</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/iphone/">#iphone</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/网站/">#网站</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/免费/">#免费</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/windows/">#windows</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/下载/">#下载</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/微软/">#微软</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/苹果/">#苹果</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/firefox/">#firefox</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/blog/">#blog</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/音乐/">#音乐</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/博客/">#博客</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/apple/">#apple</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/wordpress/">#wordpress</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/恶搞/">#恶搞</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/qq/">#qq</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/艺术/">#艺术</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/谷歌/">#谷歌</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/工具/">#工具</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/web/">#web</a></button></div></div></div><div id="my_footer"><div class=""><a href="/tags/">tags</a> <a href="/users/">users</a></div>&copy;2012-2021 diglog.com </div></div></body></html>