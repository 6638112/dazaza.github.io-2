<!doctype html><html lang="zh-hans"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>LUA-RTO：ESP32的实时操作系统 Lua-RTOS: a real-time operating system for ESP32</title><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"><link rel="stylesheet" href="/img/css.css?random="><link data-rh="true" rel="icon" href="/img/favicon.ico"/><script data-ad-client="ca-pub-6067137220025946" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script type="text/javascript" src="https://platform-api.sharethis.com/js/sharethis.js#property=5effb96910009800120b8d4d&product=inline-share-buttons" async="async"></script>
<script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?03c1a0f31299b4a2fbb83c34d6beaac9";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script></head><body><div id="my_header"><div class="container"><nav class="navbar navbar-expand-lg"><a class="navbar-brand" href="/"><img alt="diglog" src="/img/logo.v1.gif" class="rounded-sm"></a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarNavAltMarkup"><div class="navbar-nav"></div></div></nav></div></div><div class="container"><div id="my_content"><h1 class="page_narrow">Lua-RTOS: a real-time operating system for ESP32<br/>LUA-RTO：ESP32的实时操作系统 </h1><div class="row"><div class="col-lg-12 col-12"><div class="my_story_list_item shadow p-3 mb-5 bg-white rounded"><div class="story_page_pub_time page_narrow">2021-06-09 20:59:22</div><div class="story_img_container"><a href="http://img2.diglog.com/img/2021/6/4323606c350031b8778e56588ff54bf7.png"><img src="http://img2.diglog.com/img/2021/6/4323606c350031b8778e56588ff54bf7.png" class="img-fluid my_story_img" onerror="this.style.display='none'"></a></div><div class="page_narrow text-break page_content"><p>Lua RTOS is a real-time operating system designed to run on embedded systems, with minimal requirements of FLASH and RAM memory. Currently Lua RTOS is available for ESP32, ESP8266 and PIC32MZ platforms, and can be easilly ported to other 32-bit platforms.</p><p>LUA RTOS是一个实时操作系统，旨在在嵌入式系统上运行，具有最小的闪存和RAM存储器的要求。目前，LUA RTOS可用于ESP32，ESP8266和PIC32MZ平台，并且可以易于移植到其他32位平台。</p><p>  In the top layer there is a Lua 5.3.4 interpreter which offers to the programmer all the resources provided by the Lua programming language, plus special modules for access the hardware (PIO, ADC, I2C, RTC, etc …), and middleware services provided by Lua RTOS (Lua Threads, LoRa WAN, MQTT, …).</p><p>  在顶层有一个Lua 5.3.4解释器，提供给程序员Lua编程语言提供的所有资源，以及用于访问硬件的特殊模块（PIO，ADC，I2C，RTC等）和中间件服务由Lua Rtos提供（Lua Threads，Lora WAN，MQTT，......）。</p><p> In the middle layer there is a Real-Time micro-kernel, powered by FreeRTOS. This is the responsible for that things happen in the expected time.</p><p> 在中间层中，有一个实时微内核，由Freertos提供动力。这是对预期时间发生的事情的负责。</p><p> In the bottom layer there is a hardware abstraction layer, which talk directly with the platform hardware.</p><p> 在底层中，有一个硬件抽象层，它直接与平台硬件通话。</p><p>  For porting Lua RTOS to other platforms is only necessary to write the code for the bottom layer, because the top and the middle layer are the same for all platforms.</p><p>  对于将Lua RTOS移植到其他平台，仅需要为底层编写代码，因为顶部和中间层对所有平台都相同。</p><p>  The Lua RTOS compatible boards can be programmed with  The Whitecat IDE in two ways: using the Lua programming language directly, or using a block-based programming language that translates blocks to Lua. No matter if you use Lua or blocks, both forms of programming are made from the same programming environment. The programmer can decide, for example, to made a fast prototype using blocks, then change to Lua, and finally back to blocks.</p><p>  LUA RTOS兼容板可以用两种方式使用白截图IDE进行编程：使用Lua编程语言直接使用，或使用基于块的编程语言将块转换为Lua。无论您使用LUA或块，两种编程都由相同的编程环境进行。例如，程序员可以决定使用块进行快速原型，然后更改为Lua，最后回到块。</p><p>       Please note you need probably to download and install drivers for your board&#39;s USB-TO-SERIAL adapter for Windows and Mac OSX versions. The GNU/Linux version usually doesn&#39;t need any drivers. This drivers are required for connect to your board through a serial port connection.</p><p>       请注意，可能需要为Windows和Mac OSX版本下载和安装电路板的驱动程序和安装驱动程序和安装USB到串行适配器。 GNU / Linux版本通常不需要任何驱动程序。通过串行端口连接连接到您的电路板需要此驱动程序。 </p><p> For Linux, the currently logged user should have read and write access the sUSB-TO-SERIAL device. On most Linux distributions, this is done by adding the user to dialout group with the following command:</p><p>对于Linux，当前记录的用户应读写访问SUB到串行设备。在大多数Linux发行版上，这是通过使用以下命令添加到拨号组来完成的：</p><p>  Install The Whitecat Console. The Whitecat Console is a command line tool that allows the programmer to flash a Lua RTOS compatible board with the last available firmware.</p><p>  安装白点击控制台。 WhiteCat控制台是一个命令行工具，允许程序员用最后可用固件闪存Lua RTOS兼容板。</p><p> Copy The Whitecat Console binary to a folder accessed by the system path. For example:</p><p> 将白斑控制台二进制文件复制到系统路径访问的文件夹。例如：</p><p> $ wccwcc  -p port |  -ports [ -ls path | [ -down source destination] | [ -up source destination] | [ -f |  -ffs] | [ -erase] |  -d] -ports: list all available serial ports on your computer -p port: serial port device,  for example  /dev /tty. SLAB_USBtoUART -ls path: list files present  in path -down src dst: transfer the source  file (board) to destination  file (computer) -up src dst: transfer the source  file (computer) to destination  file (board) -f: flash board with last firmware -ffs: flash board with last filesystem -erase: erase flash board -d: show debug messages</p><p> $ WCCWCC -P端口| --Ports [-ls路径| [下降源目的地] | [-Up源目的地] | [-f | -FFS] | [酶] | -d] --ports：列出计算机-p端口上的所有可用串行端口：串行端口设备，例如/ dev / tty。 Slab_USBTOUART -LS路径：LOAD DOWN SRC DST中存在的列表文件：将源文件（电路板）传输到目标文件（计算机）-UP SRC DST：将源文件（计算机）传输到目标文件（电路板）-f：flash带上最后一个固件的板：闪存板与上一个文件系统-erase：擦除闪存板-D：显示调试消息</p><p> In the above example, board is using /dev/cu.SLAB_USBtoUART serial device. This device will be used in the following steps as parameter value -p.</p><p> 在上面的示例中，电路板使用/dev/cu.slab_usbtouart串行设备。此设备将以以下步骤用于参数值-p。</p><p> If you are flashing the Lua RTOS firmware for first time you will get an error:</p><p> 如果您首次闪烁LUA RTOS固件，则会收到错误：</p><p> Unknown board model.Maybe your firmware is corrupted,  or you  haven  &#39;t a valid Lua RTOS firmware installed.  Do you want to install a valid firmware now [y/n])?</p><p> 未知的电路板模型。aybe您的固件已损坏，或者您没有安装有效的Lua RTOS固件。您是否想立即安装有效的固件[Y / N]）？ </p><p>  Please, enter your board type:  1: WHITECAT N1  2: WHITECAT N1 WITH OTA  3: ESP32 CORE BOARD  4: ESP32 CORE BOARD WITH OTA  5: ESP32 THING  6: ESP32 THING WITH OTA  7: GENERIC  8: GENERIC WITH OTAType:</p><p>请输入您的董事会类型：1：Whitecat N1 2：BuiteCat N1与OTA 3：ESP32核心板4：ESP32核心板与OTA 5：ESP32 IPTH 6：ESP32带OTA 7：Generic 8：Generic 8：Generic带otatype：</p><p>     If you need to change the firmware type on a board with a Lua RTOS firmware installed on it, for example to change an OTA firmware to a non OTA firmware:</p><p>     如果您需要使用安装的LUA RTOS固件更改电路板上的固件类型，例如要将OTA固件更改为非OTA固件：</p><p>  Edit the env file and change PATH, IDF_PATH, LIBRARY_PATH, PKG_CONFIG_PATH, CPATH for fit to your installation locations.</p><p>  编辑ENV文件和更改路径，IDF_PATH，LIBRITARY_PATH，PKG_CONFIG_PATH，CPATH for fit for fit for fit fit itain。</p><p> If you are building Lua RTOS for first time, select your board type, and press enter:</p><p> 如果您首次构建LUA RTO，请选择您的电路板类型，然后按Enter键：</p><p> Please, enter your board type:  1: Whitecat N1 ESP32  2: Whitecat N1 ESP32 with OTA  3: Whitecat N1 ESP32 DEVKIT  4: Whitecat N1 ESP32 DEVKIT with OTA  5: Espressif Systems ESP32 -CoreBoard  6: Espressif Systems ESP32 -CoreBoard with OTA  7: SparkFun ESP32 Thing  8: SparkFun ESP32 Thing with OTABoard type:</p><p> 请输入您的电路板类型：1：Whitecat N1ESP32 2：Whitecat N1ESP32带OTA 3：WhiteCat N1ESP32 Devkit 4：WhiteCat N1 ESP32 Devkit带OTA 5：ESPRESEIF SystemsESP32 -CoreBoard 6：ESPERIF SYSTEMSEP32  - 带OTA 7的核心板7 ：Sparkfun ESP32的东西8：Sparkfun ESP32带Otaboard类型的东西：</p><p> When the Lua RTOS build process finish, the board will be flashed. It is possible that for certain operating systems, or boards, the flashing process fails, due to a not compatible device name for your board&#39;s USB-TO-SERIAL adapter. In this case change the default configuration to met your board or operating system requirements, as described above.</p><p> 当LUA RTOS构建过程完成时，电路板将闪烁。对于某些操作系统或板，闪烁过程可能会导致闪烁的过程失败，由于您的电路板的不兼容的设备名称和＃39; S USB到串行适配器。在这种情况下，更改默认配置以满足您的电路板或操作系统要求，如上所述。</p><p> Check the device name for your board&#39;s USB-TO-SERIAL adapter under the &#34;Serial flasher config / Default serial port&#34; category.</p><p> 检查电路板的设备名称＆＃39;＆＃34;串行闪光灯配置/默认串行端口＆＃34;类别。 </p><p> If you have already build Lua RTOS previously and want to build for other board type:</p><p>如果您已经构建了先前的Lua RTO并且希望为其他板类型构建：</p><p>  You can connect to the Lua RTOS console using your favorite terminal emulator program, such as picocom, minicom, hyperterminal, putty, etc ... The connection parameters are:</p><p>  您可以使用您最喜欢的终端仿真器程序连接到Lua RTOS控制台，例如Cicocom，Minicom，HyperTerminal，Putty等连接参数是：</p><p>    /\  /\  / \_____ / \ /_____________\W H I T E C A TLua RTOS beta  0.1 build  1479953238  Copyright (C)  2015  -  2017 whitecatboard. orgcpu ESP32 at  240 Mhzspiffs0 start address at  0x180000, size  512 Kbspiffs0 mountedspi2 at pins sdi = 012 /sdo = 013 /sck = 014 /cs = 015sd0 is at spi2, pin cs = 015sd0 type II, size  1943552 kbytes, speed  15 Mhzsd0a partition type  0b, sector  227, size  1943438 kbytesfat init file systemfat0 mountedredirecting console messages to file system  ...Lua RTOS beta  0.1 powered by Lua  5.3.4Executing  /system. lua  ...Executing  /autorun. lua  ... /  &gt;</p><p>    / \ / \ / \ ____ / / _________________ \ w h i t e c a tlua RTOS BETA 0.1 BUILD 1479953238版权所有（C）2015  -  2017年白痴板。 ORGCPU ESP32在0x180000时的240 MHzspiffs0起始地址，尺寸512 kbspiffs0 in in pins sdi = 012 / sdo = 013 / sck = 014 / cs = 015sd0在SPI2，PIN CS = 015SD0 II型，大小为1943552 KB，速度15 MHZSD0A分区。类型0B，扇区227，大小为1943438 KByTesFAT Init文件SystemFAT0挂载控制台消息到文件系统... Lua RTOS Beta 0.1供电由Lua 5.4Executing /系统。 lua ...执行/ autorun。 lua ... /＆gt;</p><p>  Lua RTOS is free for you, but funds are required for make it possible. Feel free to donate as little or as much as you wish. Every donation is very much appreciated.</p><p>  Lua RTOS为您提供免费，但可以使资金成为可能。随意捐赠尽可能少或尽可能多。每捐款都非常感谢。 </p></div><div id="story_share_this"><div class="sharethis-inline-share-buttons"></div></div><div class="text-break sotry_link page_narrow"><a target="_blank" href="https://github.com/whitecatboard/Lua-RTOS-ESP32">https://github.com/whitecatboard/Lua-RTOS-ESP32</a></div><div class="story_tags page_narrow"><button type="button" class="btn btn-light my_tag"><a href="/tag/操作系统/">#操作系统</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/rto/">#rto</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/rtos/">#rtos</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/电路板/">#电路板</a></button></div></div><div class="my_movie_list_item shadow p-3 mb-5 bg-white rounded"><button type="button" class="btn btn-link my_tag"><a href="/tag/web2.0/">#web2.0</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/google/">#google</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/设计/">#设计</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/创意/">#创意</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/摄影/">#摄影</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/游戏/">#游戏</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/图片/">#图片</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/软件/">#软件</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/视频/">#视频</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/手机/">#手机</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/广告/">#广告</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/apple/">#apple</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/iphone/">#iphone</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/网站/">#网站</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/免费/">#免费</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/下载/">#下载</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/windows/">#windows</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/微软/">#微软</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/firefox/">#firefox</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/苹果/">#苹果</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/blog/">#blog</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/音乐/">#音乐</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/博客/">#博客</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/wordpress/">#wordpress</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/恶搞/">#恶搞</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/艺术/">#艺术</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/qq/">#qq</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/web/">#web</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/谷歌/">#谷歌</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/工具/">#工具</a></button></div></div></div><div id="my_footer"><div class=""><a href="/tags/">tags</a> <a href="/users/">users</a></div>&copy;2012-2021 diglog.com </div></div></body></html>