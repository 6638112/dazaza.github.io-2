<!doctype html><html lang="zh-hans"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>更新于2021年：Docker Django和Intercooler是构建SaaS的必备之选 Updated for 2021: Docker Django and Intercooler Is Go-To Stack for Building SaaS</title><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"><link rel="stylesheet" href="/img/css.css?random="><link data-rh="true" rel="icon" href="/img/favicon.ico"/><script data-ad-client="ca-pub-6067137220025946" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script type="text/javascript" src="https://platform-api.sharethis.com/js/sharethis.js#property=5effb96910009800120b8d4d&product=inline-share-buttons" async="async"></script>
<script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?03c1a0f31299b4a2fbb83c34d6beaac9";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script></head><body><div id="my_header"><div class="container"><nav class="navbar navbar-expand-lg"><a class="navbar-brand" href="/"><img alt="diglog" src="/img/logo.v1.gif" class="rounded-sm"></a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarNavAltMarkup"><div class="navbar-nav"></div></div></nav></div></div><div class="container"><div id="my_content"><h1 class="page_narrow">Updated for 2021: Docker Django and Intercooler Is Go-To Stack for Building SaaS<br/>更新于2021年：Docker Django和Intercooler是构建SaaS的必备之选 </h1><div class="row"><div class="col-lg-12 col-12"><div class="my_story_list_item shadow p-3 mb-5 bg-white rounded"><div class="story_page_pub_time page_narrow">2021-01-31 07:14:20</div><div class="story_img_container"><a href="http://img2.diglog.com/img/2021/1/8f49f3336bb2b29897caff42a296c37e.jpg"><img src="http://img2.diglog.com/img/2021/1/8f49f3336bb2b29897caff42a296c37e.jpg" class="img-fluid my_story_img" onerror="this.style.display='none'"></a></div><div class="page_narrow text-break page_content"><p>This article has been updated. It was previously dated for 2020. Very little has changed, but I call it out where needed.</p><p>本文已更新。它以前的日期是2020年。变化很小，但我在需要的地方注明。</p><p>     I recently published some thoughts on  Django being a great framework for applications. This post expands on that to include the other pieces of infrastructure from development to production environments.</p><p>     我最近发表了一些关于Django是应用程序很好框架的想法。这篇文章对此进行了扩展，以涵盖从开发到生产环境的其他基础架构。</p><p> I have used this stack (or ones that look a lot like it) to build small SaaS apps in 2018, 2019, 2020, and now in 2021.</p><p> 我已经使用此堆栈（或看起来很像它的堆栈）在2018年，2019年，2020年以及现在的2021年构建小型SaaS应用程序。</p><p>  Linux Server/VM Hosted anywhere (I like Azure, Digital Ocean, or Scaleway)  (edit: 2021 – I&#39;m in the process of moving everything over to a dedicated server at  Hetzner.)</p><p>  Linux服务器/ VM托管在任何地方（我喜欢Azure，Digital Ocean或Scaleway）（编辑：2021年-正在将所有内容转移到Hetzner的专用服务器的过程中。）</p><p>     Intercoolerjs for easy and slick Ajax-like front-end work  (Edit: 2021 - the creator of intercooler has released  HTMX, the successor to IntercoolerJS.)</p><p>     Intercoolerjs用于轻松，流畅地完成类似于Ajax的前端工作（编辑：2021年– Intercooler的创建者发布了HTMX，它是IntercoolerJS的后继者。）</p><p>  Bitbucket pipelines for CI/CD  (Edit: 2021 - I no longer bother with CI / CD for personal projects. It it too much tooling for no benefit)</p><p>  用于CI / CD的Bitbucket管道（编辑：2021年-我不再为个人项目而烦恼CI / CD。它使用过多的工具毫无益处）</p><p> For smaller projects I run tests locally in docker containers and then push directly into production. I  don&#39;t bother with full CI/CD because I don&#39;t need the complexity of it all. That said, I do like Bitbucket Pipelines.</p><p> 对于较小的项目，我在docker容器中本地运行测试，然后直接推送到生产环境中。我不必担心完整的CI / CD，因为我不需要这一切的复杂性。也就是说，我确实喜欢Bitbucket Pipelines。 </p><p>      Your stuff needs a home (yes, even in the &#34;serverless&#34; world. LOL). My personal preferences are  Azure,  Digital Ocean  (affiliate link), or  Scaleway. They each offer enough compute, networking options, storage, and basic services to build out proofs-of-concept or whatever you might need.</p><p>您的东西需要一个家（是的，即使在无服务器的世界中，大声笑）。我个人的偏好是Azure，Digital Ocean（会员链接）或Scaleway。他们每个人都提供足够的计算，网络选项，存储和基本服务，以构建概念验证或您可能需要的任何东西。</p><p> Another honorable mention here is  Hetzner. They offer a good level of hardware, service and price.</p><p> 这里另一个值得一提的是赫兹纳。他们提供了高质量的硬件，服务和价格。</p><p>  For those side projects and many enterprise applications,  scale is not an issue. That means that I will not serve thousands of simultaneous users or handling terabytes of data. Therefore I can get by on the smaller offerings – usually under $20/month. Even Azure (the most expensive of the three) offer their burstable VMs. Generally I like to go with  Scaleway&#39;s Developer line of servers.</p><p>  对于那些附带项目和许多企业应用程序，规模不是问题。这意味着我将不会同时服务于成千上万的用户或处理数TB的数据。因此，我可以使用较小的产品-通常在$ 20 /月以下。甚至Azure（三个中最昂贵的）也提供了可爆发的VM。通常，我喜欢使用Scaleway的Developer系列服务器。</p><p> Notice that Kubernetes is missing from my stack? When scale is not an issue then you don&#39;t need Kubernetes.</p><p> 注意，我的堆栈中缺少Kubernetes吗？如果规模不成问题，那么您就不需要Kubernetes。</p><p>  I do not rely on the OS vendor (Ubuntu) to make sure that I run the latest Docker on new VMs. Therefore I use the nice little  curl|bash technique.</p><p>  我不依赖操作系统供应商（Ubuntu）来确保在新VM上运行最新的Docker。因此，我使用了不错的小弯度技术。</p><p>  This cure one-liner will get the best and most recent version for your machine running.</p><p>  这种可固化的单线将为您的机器运行提供最佳和最新版本。</p><p>  Traefik has been a God-send since I found it. Nginx is great, but it was not built for the Docker universe. Traefik has two killer features that have saved me hours upon hours:</p><p>  自从我发现Traefik以来，它就是上帝的礼物。 Nginx很棒，但是它不是为Docker Universe构建的。 Traefik具有两项杀手级功能，为我节省了数小时的时间： </p><p> Automatic TLS with LetsEncrypt. Literally set-it-and-forget-it. With the right API keys and DNS provider you can also do verification with DNS.</p><p>使用LetsEncrypt的自动TLS。从字面上看，一劳永逸。使用正确的API密钥和DNS提供商，您还可以使用DNS进行验证。</p><p> Automatic no-reload configuration using docker labels. When you spin up new services Traefik will pickup the changes automatically because it listens to all Docker-related events. This makes it incredibly convenient to add, remove, or merge services as needed without any hassle.</p><p> 使用docker标签的自动不重载配置。当您启动新服务时，Traefik将自动接受更改，因为它侦听所有与Docker相关的事件。这使得根据需要添加，删除或合并服务变得异常便利，而没有任何麻烦。</p><p> My only comment on Traefik is that there is a bit of a learning curve. You have to decide how you want to configure it (config file, command line options, yaml, or docker labels, or use a combination!)</p><p> 我对Traefik的唯一评论是学习曲线有些许。您必须决定如何配置它（配置文件，命令行选项，yaml或docker标签，或组合使用！）</p><p>   Tried and True, PostgreSQL has never let me down. I usually attach one of these containers to a project that needs it without any difficulty. I simply spin up the container, bind the ports, and then bind the data volume to my host disk. Done and Done.</p><p>   经过反复尝试，PostgreSQL从未让我失望。我通常将这些容器之一附加到需要它的项目上，而不会遇到任何困难。我只是旋转容器，绑定端口，然后将数据卷绑定到主机磁盘。完成并完成。</p><p>  version: &#39;3.1&#39;services: db: container_name: postgres hostname: postgres image: postgres:11 restart: always environment: POSTGRES_PASSWORD: secretsonly volumes: - ./data:/var/lib/postgresql/data ports: - 5432:5432 networks: - webnetworks: web: external: true</p><p>  版本：＆＃39; 3.1＆＃39;服务：db：容器名称：postgres主机名：postgres图像：postgres：11重新启动：始终环境：POSTGRES_PASSWORD：secretsonly卷：-./data:/var/lib/postgresql/数据端口：-5432：5432网络：-网络网络：网络：外部：真</p><p>  Docker deploys nicely in a container, and I have been doing it for a few years now. The benefits of matching your development environment to your production one cannot be overstated, and I have Docker to thank for that.</p><p>  Docker可以很好地部署在容器中，并且我已经做了几年了。将您的开发环境与您的生产环境相匹配的好处不能被夸大，我感谢Docker。</p><p> Edit: 2021, I&#39;ve got a reference Django project up that I use as my template for new projects:  https://github.com/simplecto/django-reference-implementation</p><p> 编辑：2021年，我有了一个参考Django项目，用作新项目的模板：https://github.com/simplecto/django-reference-implementation </p><p>  Also, for asynchronous tasks I simply use  custom Django commands which are a part of the standard framework. The pattern here is a simple  while loop with a  sleep() period. It polls the database for relevant actions and then does it&#39;s thing.</p><p>此外，对于异步任务，我只使用标准框架中的自定义Django命令。这里的模式是一个带有sleep（）周期的简单while循环。它轮询数据库以进行相关操作，然后执行该操作。</p><p> Edit: 2021 - This has paid off in a big way. I have been running a website screenshot project for over a year now with this pattern. It takes about 1500 website screenshots per day. All of it is scheduled and managed by a Django command.</p><p> 编辑：2021年-这在很大程度上取得了回报。我已经使用这种模式运行网站截图项目已有一年多了。每天大约需要1500个网站屏幕截图。所有这些都是由Django命令安排和管理的。</p><p>   I have a lot to say about this, but that will have to go into a series of posts. The tldr; here that I use this lovely little javascript library along with jQuery ( yeah, it is 2020, and I still use jQuery) to make parts of my applications  feel like single-page-apps but not really.</p><p>   关于这一点，我有很多话要说，但是这必须要写在一系列文章中。 tldr;在这里，我将这个可爱的小JavaScript库与jQuery一起使用（是的，到了2020年，我仍然使用jQuery），使我的应用程序的某些部分感觉像是单页应用程序，但实际上不是。</p><p> IntercoolerJS keeps that old-school &#34;Ajax&#34; (remember that word) goodness and allows me to update the DOM with HTML from the backend. It is seamless, smooth, and really convenient for things like logins and small form updates.</p><p> IntercoolerJS保留了那古老的＆＃34; Ajax＆＃34; （记住那个词）的好处，并允许我从后端使用HTML更新DOM。它是无缝的，平滑的，并且对于登录和小型表单更新等操作确实非常方便。</p><p>    I make mistakes. Lots of mistakes--but there is no need to show them to my users, right? Sentry gives me an easy and convenient way to capture production bugs as they happen. Some cool things about them:</p><p>    我犯错了。很多错误-但是没有必要向我的用户展示，对吧？ Sentry为我提供了一种简便，便捷的方法来捕获生产错误。关于它们的一些很酷的事情：</p><p> Tight integration to your Git repos and Issue tracking systems for full production defect traceability.</p><p> 与您的Git仓库和问题跟踪系统紧密集成，可全面跟踪生产缺陷。</p><p>    Edit: 2021 - I no longer use CI/CD for deployment of my one-man projects. It is too much tooling and complexity. I simply run tests with PyCharm and ship directly to production from my development machine.</p><p>    编辑：2021年-我不再使用CI / CD来部署我的单人项目。这太多了工具和复杂性。我只需要使用PyCharm进行测试，然后直接从我的开发机器上交付生产。 </p><p> There are so many CI/CD offerings out there today, but I have been happy with Bitbucket&#39;s offering called Pipelines. They offer you a few hundred minutes free every month with the option to top-up as needed for a small fee. I have rarely had problems, and I really enjoy their YAML configuraiton / directive files.</p><p>今天有很多CI / CD产品，但是我对Bitbucket提供的称为Pipelines的产品感到满意。他们每月为您提供数百分钟的免费时间，您可以选择充值以支付少量费用。我很少遇到问题，我非常喜欢他们的YAML配置/指令文件。</p><p> Using the  bitbucket-pipelines.yml file I have been able to do full end-to-end testing by spinning up multiple docker containers, loading the databases, and running hundreds of test in just a few minutes. This was key in speeding things up in our team and enabling 5+ pushes to production per day.</p><p> 使用bitbucket-pipelines.yml文件，我可以通过旋转多个Docker容器，加载数据库并在短短几分钟内运行数百个测试来进行完整的端到端测试。这对于加快我们团队的工作速度以及每天实现5次以上的生产推动至关重要。</p><p>   Finally, we come to the bit of tech that is largely optional but nice to have.  Zerotier is a unique kind of network/VPN that I use to link all my personal machines. It works though firewalls (at home, in office) and offers an easy 1 minute setup.</p><p>   最后，我们来谈谈一些技术，该技术在很大程度上是可选的，但很高兴拥有。 Zerotier是一种独特的网络/ VPN，可用于链接所有个人计算机。它可通过防火墙（在家中，办公室中）工作，并提供1分钟的轻松设置。</p><p> Using ZeroTier in my last company we were able to remove the SSH Jump Servers which caused a headache in terms of key management and shared bandwidth on a single machine.</p><p> 在我上一家公司中使用ZeroTier，我们能够删除SSH跳转服务器，这在密钥管理和单台计算机上的共享带宽方面造成了麻烦。</p><p> Zerotier work on Linux, Mac, Windows, Android, and iPhone, so you are pretty much covered.</p><p> Zerotier可在Linux，Mac，Windows，Android和iPhone上运行，因此您几乎可以覆盖其中。</p><p> The one downside to ZeroTier is that I don&#39;t entirely understand how it works. It is a lot like MacOS or iPhone in that it &#34;just works&#34; as expected and I rarely (never) have problems. That is a strength from a user experience perspective but a WTF? from a CTO perspective.</p><p> ZeroTier的一个缺点是我不完全了解它的工作原理。它就像MacOS或iPhone一样，可以正常工作。正如预期的那样，我很少（从来没有）有问题。从用户体验的角度来看，这是一个优势，但是是WTF？从CTO的角度来看。</p><p>  Hopefully this deeper-dive will prompt some interest and curiosity about Docker, Django, Traefik, and especially IntercoolerJS. It is simple, easy to work with, and allows you to grow out of it when the time comes.</p><p>  希望这次更深入的讨论会引起人们对Docker，Django，Traefik尤其是IntercoolerJS的兴趣和好奇。它简单，易于使用，并让您在时机成熟时逐渐成长。 </p><p> Edit 2021 - As you can see not a lot has changed. I&#39;ve been able to add more code to my public repositories that flesh out the ideas expressed here over a year ago.</p><p>编辑2021年-如您所见，没有太大变化。 我已经能够向我的公共存储库添加更多代码，以充实一年多以前在这里表达的想法。 </p></div><div id="story_share_this"><div class="sharethis-inline-share-buttons"></div></div><div class="text-break sotry_link page_narrow"><a target="_blank" href="https://www.simplecto.com/docker-django-traefik-intercoolerjs-is-my-stack-for-2021/">https://www.simplecto.com/docker-django-traefik-intercoolerjs-is-my-stack-for-2021/</a></div><div class="story_tags page_narrow"><button type="button" class="btn btn-light my_tag"><a href="/tag/django/">#django</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/docker/">#docker</a></button></div></div><div class="my_movie_list_item shadow p-3 mb-5 bg-white rounded"><button type="button" class="btn btn-link my_tag"><a href="/tag/web2.0/">#web2.0</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/google/">#google</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/设计/">#设计</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/创意/">#创意</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/摄影/">#摄影</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/游戏/">#游戏</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/图片/">#图片</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/软件/">#软件</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/视频/">#视频</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/手机/">#手机</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/广告/">#广告</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/iphone/">#iphone</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/网站/">#网站</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/免费/">#免费</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/下载/">#下载</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/windows/">#windows</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/微软/">#微软</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/苹果/">#苹果</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/apple/">#apple</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/blog/">#blog</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/firefox/">#firefox</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/音乐/">#音乐</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/博客/">#博客</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/wordpress/">#wordpress</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/恶搞/">#恶搞</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/qq/">#qq</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/艺术/">#艺术</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/web/">#web</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/工具/">#工具</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/分享/">#分享</a></button></div></div></div><div id="my_footer"><div class=""><a href="/tags/">tags</a> <a href="/users/">users</a></div>&copy; 2020 diglog.com </div></div></body></html>