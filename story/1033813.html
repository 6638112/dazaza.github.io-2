<!doctype html><html lang="zh-hans"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>充分利用Linux上的英特尔集成GPU</title><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"><link rel="stylesheet" href="/img/css.css?random="><link data-rh="true" rel="icon" href="/img/favicon.ico"/><script data-ad-client="ca-pub-6067137220025946" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script type="text/javascript" src="https://platform-api.sharethis.com/js/sharethis.js#property=5effb96910009800120b8d4d&product=inline-share-buttons" async="async"></script>
<script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?03c1a0f31299b4a2fbb83c34d6beaac9";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script></head><body><div id="my_header"><div class="container"><nav class="navbar navbar-expand-lg"><a class="navbar-brand" href="/"><img alt="diglog" src="/img/logo.v1.gif" class="rounded-sm"></a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarNavAltMarkup"><div class="navbar-nav"></div></div></nav></div></div><div class="container"><div id="my_content"><h1 class="page_narrow">充分利用Linux上的英特尔集成GPU</h1><div class="row"><div class="col-lg-12 col-12"><div class="my_story_list_item shadow p-3 mb-5 bg-white rounded"><div class="story_page_pub_time page_narrow">2020-11-08 13:27:22</div><div class="page_narrow text-break page_content"><p>大约一年前，我买了一台新笔记本电脑：2019年末的Razer Blade Stealth 13。它配备了英特尔i7-1065G7，配备了英特尔最好的Ice Lake显卡，以及NVIDIA GeForce GTX 1650。除了需要ACPI盖子和这里描述的电源管理问题外，它到目前为止还是一款很棒的笔记本电脑，Linux体验非常流畅。不幸的是，我的新笔记本电脑开箱即用的集成图形性能并不出色。我使用新笔记本电脑的第一个任务是在Linux端口《古墓丽影》中调试一个渲染问题，结果证明这是游戏中的一个错误。在这个过程中，我发现游戏内置基准的性能几乎是Windows的一半。在一些游戏上，我们不时会遇到一些MESA的性能问题，但其中一半似乎有点极端。我用gputop查看系统级性能数据后发现，尽管GPU一直很忙，但GPU的时钟频率无法达到最大值的60%-70%。为什么？*GPU无法获得足够的电力。当我解决了电源管理问题后，我发现，GPU的时钟频率无法达到最高值的60%-70%。*为什么？*GPU在某些游戏上时不时会遇到一些性能问题，但其中一半似乎有点极端。当我解决了电源管理问题后，基准测试的速度从Windows的50%-60%提高到了104%(是的，超过100%)。这篇博文旨在作为了解内存吞吐量和电源管理问题以及正确配置系统以充分利用英特尔集成GPU的指南。*并非本文中的所有内容都会影响所有笔记本电脑，因此您可能需要对系统进行一些实验，以确定哪些问题重要，哪些问题不重要。我也不能说这篇文章已经完成；几乎可以肯定的是，还有其他我不知道或已经忘记的配置问题。这是不言而喻的，但如果你想让你的硬件发挥出最好的性能，总是建议你运行最新的驱动程序。对于刚刚发布的硬件来说尤其如此。通常，对于显卡来说，大部分性能的大幅提升都会在MESA中实现，但你的Linux内核版本也会起到同样重要的作用。就英特尔冰湖处理器而言，一些电源管理功能直到Linux 5.4才会启用。我不打算在这里给你的驱动更新一个完整的指南。如果你运行的是像Arch这样的发行版，很可能你已经在运行与最新版本非常接近的东西了。如果你使用的是Ubuntu，Padoka PPA提供了用户空间组件的版本(Mesa，X11等)。(如果你是在Ubuntu上，Padoka PPA提供了用户空间组件的版本(Mesa，X11等)。)。这通常不会超过一周的时间，但是升级你的内核要复杂得多。其他的发行版可能也有类似的东西，但我会把它留给读者作为练习。这并不意味着你需要痴迷于更新内核和驱动程序。如果你对系统的性能和稳定性感到满意，那就别管它了。但是，如果你有全新的硬件，想要确保你有足够多的新驱动程序，那么尝试更新可能是值得的。或者，如果你有耐心，你可以只等6个月，等待下一个发行版发布周期，希望能赶上发行版的更新。3D渲染应用程序中的一大瓶颈是内存带宽。大多数标准显示器的分辨率为1920x1080，刷新率为60 Hz。1920x1080 RGBA(32bpp)图像的大小不到8 MiB，如果GPU以60 FPS的速度渲染，那么每帧图像的写入所需的内存带宽总计约为474 MiB/s。如果您的图像分辨率为1920x1080 RGBA(32bpp)，则每一帧的图像写出所需的内存带宽总计约为474 MiB/s。如果你使用的是4K显示器，乘以4，你会得到大约1.8GiB/s。这些数字只针对最终的彩色图像，假设我们只将图像的每一个像素写入一次，然后Don&#39；不考虑任何其他内存访问。即使在简单的3D场景中，除了正在写入的彩色图像之外，还有其他图像，如深度缓冲区或辅助gBuffer，每个像素通常被写入一次以上，这取决于应用程序的过度绘制，而着色通常涉及从统一的缓冲区和纹理读取。现代3D应用程序通常还具有深度预传递、光照传递和用于景深和/或运动模糊的后处理过滤器等功能。其结果是，用于渲染3D场景的实际内存带宽可以。由于3D渲染所需的带宽令人难以置信，所以离散GPU使用针对带宽进行了优化的内存。这些内存有不同的名称，如GDDR6或HBM2(在撰写本文时是当前的)，但它们都使用极宽的总线，并并行访问许多位的内存以获得最大吞吐量。另一方面，CPU内存通常是DDR4(撰写本文时的当前内存)，它运行在较窄的64位总线上，因此总体最大内存带宽较低。这是一种权衡。</p><p>在我的笔记本电脑(2019年末的Razer Blade Stealth 13)上，BIOS的CPU配置为35W，开箱即用。(是的，35W比TDP-UP高，我从来没有见过它消耗那么多电量；我不知道为什么它是这样配置的。)这意味着我们不需要DPTF，冷却也足够好，我也不真的需要热插头。相反，它的电源管理问题来自于主板的功率平衡。</p><p>.</p></div><div id="story_share_this"><div class="sharethis-inline-share-buttons"></div></div><div class="text-break sotry_link page_narrow"><a target="_blank" href="http://jason-blog.jlekstrand.net/2020/05/getting-most-out-of-your-intel.html">http://jason-blog.jlekstrand.net/2020/05/getting-most-out-of-your-intel.html</a></div><div class="story_tags page_narrow"><button type="button" class="btn btn-light my_tag"><a href="/tag/英特尔/">#英特尔</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/linux/">#linux</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/集成/">#集成</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/内存/">#内存</a></button></div></div><div class="shadow p-3 mb-5 bg-white rounded clearfix"><div class="container"><div class="row"><div class="col-sm"><div><a target="_blank" href="/story/1033641.html"><img src="http://img2.diglog.com/img/2020/11/thumb_bc524a9753c8453bbced6fe244e0df47.png" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1033641.html">英特尔在火箭湖上表现出明显的绝望</a></div><span class="my_story_list_date">2020-11-7 11:21</span></div><div class="col-sm"><div><a target="_blank" href="/story/1033428.html"><img src="http://img2.diglog.com/img/2020/11/thumb_340a58c5f6d8777d4e722f255729baef.jpeg" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1033428.html">Razer发布了Book 13，这是一款拥有16：10屏幕、RGB键盘和英特尔Iris Xe集成显卡的高效笔记本电脑，将于11月上市，起价1200美元</a></div><span class="my_story_list_date">2020-11-6 7:32</span></div><div class="col-sm"><div><a target="_blank" href="/story/1033349.html"><img src="http://img2.diglog.com/img/2020/11/thumb_858108b2c01ecbd5609900c3ed02db27.jpg" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1033349.html">AMD的Zen 3 CPU就在这里--我们测试一下最快的5900X和5950X</a></div><span class="my_story_list_date">2020-11-5 22:13</span></div><div class="col-sm"><div><a target="_blank" href="/story/1033094.html"><img src="http://img2.diglog.com/img/2020/11/thumb_1eab9e94912c708f8ca13033b4e11eb9.jpg" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1033094.html">
英特尔收购了Cnvrg.io，这是一个管理、构建和自动化机器学习的平台</a></div><span class="my_story_list_date">2020-11-4 9:14</span></div></div></div></div><div class="my_movie_list_item shadow p-3 mb-5 bg-white rounded"><button type="button" class="btn btn-link my_tag"><a href="/tag/web2.0/">#web2.0</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/google/">#google</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/设计/">#设计</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/创意/">#创意</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/摄影/">#摄影</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/游戏/">#游戏</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/图片/">#图片</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/软件/">#软件</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/视频/">#视频</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/手机/">#手机</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/广告/">#广告</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/apple/">#apple</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/iphone/">#iphone</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/网站/">#网站</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/免费/">#免费</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/下载/">#下载</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/windows/">#windows</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/微软/">#微软</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/firefox/">#firefox</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/苹果/">#苹果</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/blog/">#blog</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/音乐/">#音乐</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/博客/">#博客</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/wordpress/">#wordpress</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/恶搞/">#恶搞</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/艺术/">#艺术</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/qq/">#qq</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/web/">#web</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/谷歌/">#谷歌</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/工具/">#工具</a></button></div></div></div><div id="my_footer"><div class=""><a href="/tags/">tags</a> <a href="/users/">users</a></div>&copy;2012-2021 diglog.com </div></div></body></html>