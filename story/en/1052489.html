<!doctype html><html lang="zh-hans"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>没有你，没有你：elifdef和elifndef No Us Without You: elifdef and elifndef</title><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"><link rel="stylesheet" href="/img/css.css?random="><link data-rh="true" rel="icon" href="/img/favicon.ico"/><script data-ad-client="ca-pub-6067137220025946" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script type="text/javascript" src="https://platform-api.sharethis.com/js/sharethis.js#property=5effb96910009800120b8d4d&product=inline-share-buttons" async="async"></script>
<script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?03c1a0f31299b4a2fbb83c34d6beaac9";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script></head><body><div id="my_header"><div class="container"><nav class="navbar navbar-expand-lg"><a class="navbar-brand" href="/"><img alt="diglog" src="/img/logo.v1.gif" class="rounded-sm"></a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarNavAltMarkup"><div class="navbar-nav"></div></div></nav></div></div><div class="container"><div id="my_content"><h1 class="page_narrow">No Us Without You: elifdef and elifndef<br/>没有你，没有你：elifdef和elifndef </h1><div class="row"><div class="col-lg-12 col-12"><div class="my_story_list_item shadow p-3 mb-5 bg-white rounded"><div class="story_page_pub_time page_narrow">2021-03-15 22:42:44</div><div class="story_img_container"><a href="http://img2.diglog.com/img/2021/3/005c1ff891ea3d720f9e86e6b6ec7cbf.jpg"><img src="http://img2.diglog.com/img/2021/3/005c1ff891ea3d720f9e86e6b6ec7cbf.jpg" class="img-fluid my_story_img" onerror="this.style.display='none'"></a></div><div class="page_narrow text-break page_content"><p>The C Meeting has ended officially as of like less than 2 hours ago. I will write all about what happened in a later post, but I wanted to talk specifically about something that happened on Monday, during the meeting, with  proposal n2645.</p><p>C会议在不到2个小时前正式结束。我会写下所有关于在后面的帖子中发生的事情，但我想专门讨论周一在会议期间发生的事情，提案N2645。</p><p> N2654 is Melanie Blower’s paper for  #elifdef and  #elifndef, a long-standing hole in the preprocessor and a constant consistency footgun. Even I experienced this pain, and I was grateful to see Melanie put it forward. We don’t often get to do simple things, so Melanie is doing the Lord’s Work, here.</p><p> N2654是Melanie Blower的#elifdef和#elifndef，在预处理器中的长站孔和恒定的一致性脚。即使我遇到过这种痛苦，我也很感谢梅兰妮把它推向前进。我们往往不得不做简单的事情，所以梅兰妮正在做主的工作。</p><p> I took to Twitter on Monday and wanted to  shout OUT to the very FIRMAMENT of HEAVEN about what happened, but ISO and its various sub/working-groups have rules. So I specifically can’t reveal anything until the actual adjournment of the meeting. But the meeting is over now so, let’s get right to it:</p><p> 我星期一乘坐Twitter，并希望大声喊出天堂的穹苍，但ISO及其各种子/工作组都有规则。所以我特别不能透露任何东西，直到实际休会会议。但是，会议现在已经结束了，让我们对此进行：</p><p>  “…Wow, that’s it? Seriously?? You could have just tweeted that and then went along your merry way???”</p><p>  “......哇，就是这样？严重地？？你可以刚发推文，然后沿着你的快乐方式？“</p><p> Well, yes, and I will tweet out some things (or I have already, by the time you read this?)! But, that’s not what I wanted to talk about. I wanted to talk about the remarkable way in which this paper was accepted during the meeting.</p><p> 好吧，是的，我会推文一些东西（或者我已经读到了这一点？）！但是，这不是我想谈的。我想谈谈在会议期间接受本文的显着方式。</p><p> See, we were discussing the paper. All the usual arguments were brought up for and against it:</p><p> 看，我们正在讨论论文。所有常见的论点都是为之奋斗和反对：</p><p> “I literally implemented this feature during the break in 10 minutes, implementability is not a problem”;</p><p> “我在休息期间在10分钟内实施了这个功能，可实现性不是问题”; </p><p>      ” #if defined(...) does all the same things and more generally, why do we need these shortcuts?”;</p><p>“#f定义（...）都有相同的东西，更一般，为什么我们需要这些快捷方式？”;</p><p>  “if I had a time machine, I’d blow  #ifdef up and just make people used  #if defined(...), it’s better and more flexible and represents the same functionality”;</p><p>  “如果我有一个时间机器，我会吹#ifdef，只是让人使用#if定义（......），它更好，更灵活，代表相同的功能”;</p><p> and so on, so forth. A slew of folk made the exact same arguments through various other communication mediums when they saw the paper; there’s not that much that’s new under the sun, after all! But, the longer the discussion went on, the more it turned into this not being compelling enough to add, and that  #if defined(...) covered the functionality well enough. It felt like it was going to be a pretty narrowly close vote on the No side. I spoke up, talking about how out of all the features I’ve done work on, this one actually got the most messages for a C feature (not C++ ones). (It even beat out  typeof, don’t ask me how this is more popular than that!)</p><p> 等等，依此类推。当他们看到纸纸时，通过各种其他通信媒体制作了完全相同的论据;毕竟，在阳光下没有那么多的东西！但是，讨论继续越长，转化为此越多，而不是令人兴奋地添加，而且#F #if定义了（...）覆盖了很好的功能。它觉得这将是一个非常狭隘的唯一近距离投票。我说话，谈论我所做的所有功能如何，这个实际上是C功能的最多消息（不是C ++）。 （它甚至击败了Typeof，不要问我这比这更受欢迎！）</p><p> In mentioning that some folk had indeed messaged me directly about  n2645, someone also got to share one of the e-mails of support they received from a random Senior Embedded Engineer directly with the whole Committee. And, once they shared it…</p><p> 在提到有些民间确实在N2645中直接发消了我，也必须分享他们直接与整个委员会直接从随机高级嵌入式工程师收到的一封支持的电子邮件之一。并且，一旦他们分享它......</p><p>   A lot of the time, our end users — the various C and C++ developers, the millions of you worldwide trying to tamp down bugs and deliver features to customers, hobbyists, modders and other people — feel like we’re not listening. Some might even accuse us of having  Big Huge Designer Brain and getting into a silo.</p><p>   很多时候，我们的最终用户 - 各种C和C ++开发人员，全世界数百万的人试图夯实击败虫子，为客户提供功能，爱好者，莫德兵等人 - 觉得我们不听。有些人甚至可能指责我们拥有大型设计师大脑并进入筒仓。</p><p>  Some of us were, very much, going to exhibit Big Huge Designer Brain. We were saying (paraphrased for parody):</p><p>  我们中的一些人非常出现大巨大的设计师大脑。我们在说（对模仿的措辞）：</p><p> #if defined(THING) was good enough for my ancestors, it’s good enough for me!</p><p> #f定义（事情）对我的祖先已经足够好，对我来说足够好！ </p><p> all while shaking our canes from our Committee rocking chairs. It’s easy to get stuck in this. We have to be simple and  fundamental. We have to be  safe. We can’t just go adding things willy-nilly to the Standard. So what if it’s “helpful”, or “teachable”, or “consistent”, it’s not a great  value add. We get curmudgeonly. We get  conservative. We oppose change, because change itself can introduce risk and responsibility, and we especially oppose small changes because it is “not worth it”. We don’t want to make C compiler implementations complicated. Ease of use, of implementation, of understanding, all that jazz.</p><p>一切都在摇晃着我们的委员会摇滚椅子。很容易被困在这一点。我们必须是简单而基本的。我们必须安全。我们不能只是向威利 - 尼利的东西添加到标准。那么如果它是“有用”，或“教育”，或“一致”，这不是一个很好的增值。我们得到了诅咒。我们得到保守派。我们反对变化，因为改变本身可以引入风险和责任，我们特别反对较小的变化，因为它是“不值得”。我们不想使C编译器实现复杂。易于使用，实施，理解，所有爵士乐。</p><p> But those e-mails – that connection to you, the developer – centered us. It gave those of us on the Committee fighting for the paper side the strength to persist. And being able to share your tangible and direct ask for this feature with the Committee in real-time turned around what would have likely ended up as a razor-thin rejection into a pass. Can you imagine?</p><p> 但那些电子邮件 - 与您联系，开发商 - 以我们为中心。它给了我们在委员会争夺纸张方面的力量持续存在的委员会。能够与委员会一起分享您的切实和直接询问此功能，实时转动可能最终成为剃刀稀疏的拒绝。你可以想象？</p><p> A small, kind and purposeful effort — some encouraging outreach! — softened the trigraph-engraved, preprocessor-encrusted blocks we call our hearts?</p><p> 一种小，善意和有目的的努力 - 一些鼓励外展！ - 软化了三角形雕刻，我们叫我们的心脏的预处理器覆盖块？</p><p> Now, the  ISO process is extremely frustrating and many of us have railed against it (myself included). But. These proposals are written, as either part of work or out of sweaty, volunteered grit and determination, by human beings. The people in the Committee are human beings. We do care. We are not detached from you, or reality.</p><p> 现在，ISO过程非常令人沮丧，我们中的许多人都探讨了它（我已经包括在内）。但。这些提案是书面的，作为工作的一部分或出汗，志愿的砂砾和决心，人类。委员会中的人是人类。我们照顾。我们不会从你身上脱离或现实。</p><p> We try our best to be careful and pragmatic and consider the literal gigaverse of all compilers and implementers and architectures and hardware configurations and compilation targets. We run surveys and poke at compiler implementations and check code and download hundreds of gigabytes of source to clang analyze and ripgrep and we ping companies for their feedback and more. We coordinate with other standards, tackle provenance, try to make more sense of Decimal and Binary floating point, leave room for implementations, and more. We also love the tools we use and the perspective we have grown into from taking care of those compilers and static analyzers and sanitizers, because they are our beautiful little darlings who deserve a seat at the table too.</p><p> 我们尽力谨慎务实，并考虑所有编译器和实施者和架构和架构和硬件配置和汇编目标的文字助推器。我们在编译器实现和拨打调查和戳戳，然后将数百千兆字节下载到Clang Analyze和Ripgrep以及我们的反馈和更多的公司。我们与其他标准协调，解决原子源，尝试更具比例和二进制浮点，留下实现的空间等等。我们也喜欢我们使用的工具和我们从照顾那些编译器和静态分析仪和消毒剂的角度，因为他们是我们美丽的小宠物，也值得在桌子上座位。</p><p> It’s a lot of details to sift through and a lot of details to get right, and it’s easy to become reflexively conservative when you’re not just asking for  that one feature from the outside, but sit in the central nexus of every single potential feature that can be added and every single potential tweak.</p><p> 这是筛选的很多细节和许多细节来实现正确的细节，当你不仅要求从外面寻求那个功能时，它很容易被反思地保守，但坐在每一个潜在的特征的中央Nexus中可以添加和每一个潜在的调整。</p><p>  But advocacy from developers – from our constituents, e-mails no longer than 4 short sentences and sent sincerely + enthusiastically — tipped the scales away from that cold, crushing conservatism that plagues any long-lived Thing.</p><p>  但是，从开发人员宣传 - 从我们的成员，电子邮件不超过4个短句，并真诚地发送+热情 - 将鳞片从那种寒冷，破碎的保守主义困扰着困扰任何长寿的。 </p><p>  To those who messaged me. And, specifically, to the Y.G. Senior Embedded Developer who sent those words of encouragement to Melanie Blower about the paper; thank you for reminding us of even the little things we can do to make it better for you. There is No Us, Without You,</p><p>给那些给我发消息的人。 具体而言，到Y.G. 高级嵌入式开发商，他向Melanie Blower发送了那些鼓励的话语; 谢谢您提醒我们，即使是我们可以做的小事，以使您更好。 没有你，没有你， </p></div><div id="story_share_this"><div class="sharethis-inline-share-buttons"></div></div><div class="text-break sotry_link page_narrow"><a target="_blank" href="https://thephd.github.io/no-us-without-you-elifdef-elifndef-c-n2645">https://thephd.github.io/no-us-without-you-elifdef-elifndef-c-n2645</a></div><div class="story_tags page_narrow"><button type="button" class="btn btn-light my_tag"><a href="/tag/elifdef/">#elifdef</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/实现/">#实现</a></button></div></div><div class="my_movie_list_item shadow p-3 mb-5 bg-white rounded"><button type="button" class="btn btn-link my_tag"><a href="/tag/web2.0/">#web2.0</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/google/">#google</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/设计/">#设计</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/创意/">#创意</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/摄影/">#摄影</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/图片/">#图片</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/游戏/">#游戏</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/视频/">#视频</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/手机/">#手机</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/软件/">#软件</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/广告/">#广告</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/iphone/">#iphone</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/网站/">#网站</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/免费/">#免费</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/下载/">#下载</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/windows/">#windows</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/微软/">#微软</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/firefox/">#firefox</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/apple/">#apple</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/blog/">#blog</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/苹果/">#苹果</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/音乐/">#音乐</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/博客/">#博客</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/wordpress/">#wordpress</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/恶搞/">#恶搞</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/qq/">#qq</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/web/">#web</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/艺术/">#艺术</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/工具/">#工具</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/分享/">#分享</a></button></div></div></div><div id="my_footer"><div class=""><a href="/tags/">tags</a> <a href="/users/">users</a></div>&copy;2012 - 2021 diglog.com </div></div></body></html>