<!doctype html><html lang="zh-hans"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>在文本文件中分发不协调的Mac应用程序 Distributing unnotarized Mac apps in a text file</title><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"><link rel="stylesheet" href="/img/css.css?random="><link data-rh="true" rel="icon" href="/img/favicon.ico"/><script data-ad-client="ca-pub-6067137220025946" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script type="text/javascript" src="https://platform-api.sharethis.com/js/sharethis.js#property=5effb96910009800120b8d4d&product=inline-share-buttons" async="async"></script>
<script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?03c1a0f31299b4a2fbb83c34d6beaac9";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script></head><body><div id="my_header"><div class="container"><nav class="navbar navbar-expand-lg"><a class="navbar-brand" href="/"><img alt="diglog" src="/img/logo.v1.gif" class="rounded-sm"></a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarNavAltMarkup"><div class="navbar-nav"></div></div></nav></div></div><div class="container"><div id="my_content"><h1 class="page_narrow">Distributing unnotarized Mac apps in a text file<br/>在文本文件中分发不协调的Mac应用程序 </h1><div class="row"><div class="col-lg-12 col-12"><div class="my_story_list_item shadow p-3 mb-5 bg-white rounded"><div class="story_page_pub_time page_narrow">2021-04-03 18:22:33</div><div class="page_narrow text-break page_content"><p>This isn&#39;t a late April Fools joke. (My April Fools joke that I got hired by Apple as a Swift Evangelist backfired with a profusion of congratulations.) This blog post is a kind of follow-up to some previous blog posts. Last month I wondered what&#39;s the best way to  distribute Mac apps without notarization, and I decided that the best way was downloading with  curl directly to the Applications folder. Unlike web browsers,  curl does not add the  com.apple.quarantine extended attribute to downloaded files. Still, this method is not ideal, because the app developer has to send users to the scary place: the command line! So I&#39;ve continued to wonder if there&#39;s a relatively simple way to do it with a graphical interface. (If you think you can &#34;just right click&#34;, well no, that&#39;s not quite  how it works.) And then it finally hit me like a brick of gold wrapped in a lemon: I already knew how to remove the quarantine with a GUI, because this was my  Mac sandbox escape! If you recall, a year ago I showed how to escape the sandbox by opening a maliciously crafted executable in TextEdit and then telling TextEdit via AppleScript to save the executable file. This causes the quarantine to be removed from the executable, because TextEdit has the special  com.apple.security.files.user-selected.executable entitlement. I never received a bug bounty from Apple, and as far as I can tell this sandbox escape still exists in Big Sur. Which is actually good news for us right now, because we can use it to distribute Mac apps! For your enjoyment, I&#39;ve created an example, which I call Gatecrasher:</p><p>这是一个愚人节笑话的＆＃39; （我的四月愚人节，我被Apple聘用，作为幸福祝贺的Swift福音学家。）这个博客帖子是一个以前的博客帖子的后续行动。上个月我想知道在没有公证的情况下分发Mac应用程序的最佳方式，我决定用Curl直接在应用程序文件夹下载最佳方法。与Web浏览器不同，CURL不会将COM.APPLE.QUANTINE Extended属性添加到下载的文件。但是，这种方法不理想，因为App Developer必须将用户发送到可怕的位置：命令行！所以我＆＃39; ve继续想知道是否有一种与图形界面进行相对简单的方式。 （如果你认为你可以＆＃34;只是右键点击＆＃34;，不错，那个＆＃39;它并不完全是它的工作原理。）然后它终于像一块柠檬包裹着一块金色的金子：我已经知道如何用GUI删除隔离区，因为这是我的Mac Sandbox Escape！如果您记得，一年前，我展示了如何通过在TextEdit中打开恶意制作的可执行文件来逃离沙箱，然后通过AppleScript告诉TextEdit来保存可执行文件。这会导致从可执行文件中删除隔离区，因为TextEdit具有特殊的com.apple.security.files.user-selected.executable授权。我从未收到来自Apple的Budty，并且据我所知，这块沙箱逃生仍然存在于大血管中。这对我们来说真的很好，因为我们可以用它来分发Mac应用程序！为了您的享受，我创建了一个例子，我称之为gatecrasher：</p><p>  Gatecrasher is an empty Mac app that I created in Xcode in a few minutes. It has no code other than the standard  NSApplicationMain and the default  MainMenu.xib file with the main menu and window. Gatecrasher isn&#39;t signed with an Apple code signing certificate and isn&#39;t notarized; it has only an &#34;ad hoc&#34; ( codesign -s -) code signature with no identity. I compressed Gatecrasher into a zip file, but as you&#39;ll see, that&#39;s not what you&#39;re downloading. Instead, I embedded the zipped app into a &#34;rich text&#34; document ( .rtfd file) in TextEdit and then compressed it.  That&#39;s what you&#39;re downloading. You can unzip the  rtfd, double-click to open it in TextEdit, follow the simple instructions written inside, and you&#39;ll end up with an app that you can double-click to launch — all without  any macOS Gatekeeper alert, and all without any Developer ID or notarization.</p><p>  GateCrasher是一个空的Mac应用程序，即在几分钟内在Xcode中创建。它没有标准NSApplicationMain以外的代码和带有主菜单和窗口的默认MainMenu.xib文件。 Gaterrasher＆＃39; t签署了苹果代码签名证书，并非公证;它只有一个＆＃34; ad hoc＆＃34; （代码符号 - ）代码签名，没有身份。我将gatecrasher压缩到一个zip文件中，但像​​你一样，ll看，那个＆＃39;不是你和＃39;重新下载。相反，我将压缩的应用程序嵌入了一个＆＃34;富文本＆＃34;文本文档（.rtfd文件），然后压缩它。那个＆＃39;＆＃39;重新下载。您可以解压缩RTFD，双击以在TextEdit中打开它，按照写入内部的简单说明，以及您＆＃39; LL最终可以双击启动到启动 - 所有没有任何MacOS网守警报，以及所有没有任何开发人员ID或公证。</p><p> And there you have it, the easiest way yet to distribute unnotarized Mac apps! Perhaps  too easy…</p><p> 在那里，您拥有它，最简单的方法尚未分发不排放的Mac应用程序！也许太容易......</p><p> Here&#39;s a screenshot of the  rtfd file opened in TextEdit:   In my testing, I only have to ⌘-S once on Mojave to unquarantine the  zip, but for some reason I have to ⌘-S twice on Big Sur. I haven&#39;t figured out why yet, but I wanted to get this blog post out before bedtime. Indeed, I can see now that in my rush I made a typo: it should have said &#34;unzip Gatecrasher app&#34; rather than &#34;unzip Gatekeeper app&#34;. Oh well. The typo does serve to highlight my pun!</p><p> 在这里＆＃39我没有想到为什么，但我想在睡觉前举行这个博客。实际上，我现在可以看到我匆匆忙忙地弄错了：它应该已经说道＆＃34;解压缩gaterrasher app＆＃34;而不是＆＃34; Unzip Gatekeeper App＆＃34;那好吧。错字确实有助于突出我的双关语！ </p></div><div id="story_share_this"><div class="sharethis-inline-share-buttons"></div></div><div class="text-break sotry_link page_narrow"><a target="_blank" href="https://lapcatsoftware.com/articles/textedit-gatekeeper.html">https://lapcatsoftware.com/articles/textedit-gatekeeper.html</a></div><div class="story_tags page_narrow"><button type="button" class="btn btn-light my_tag"><a href="/tag/程序/">#程序</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/mac/">#mac</a></button></div></div><div class="my_movie_list_item shadow p-3 mb-5 bg-white rounded"><button type="button" class="btn btn-link my_tag"><a href="/tag/web2.0/">#web2.0</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/google/">#google</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/设计/">#设计</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/创意/">#创意</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/摄影/">#摄影</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/图片/">#图片</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/游戏/">#游戏</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/软件/">#软件</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/视频/">#视频</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/手机/">#手机</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/广告/">#广告</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/网站/">#网站</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/iphone/">#iphone</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/免费/">#免费</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/下载/">#下载</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/windows/">#windows</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/微软/">#微软</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/firefox/">#firefox</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/blog/">#blog</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/apple/">#apple</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/音乐/">#音乐</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/苹果/">#苹果</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/博客/">#博客</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/wordpress/">#wordpress</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/恶搞/">#恶搞</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/qq/">#qq</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/艺术/">#艺术</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/web/">#web</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/工具/">#工具</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/分享/">#分享</a></button></div></div></div><div id="my_footer"><div class=""><a href="/tags/">tags</a> <a href="/users/">users</a></div>&copy;2012-2021 diglog.com </div></div></body></html>