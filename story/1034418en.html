<!doctype html><html lang="zh-hans"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>需要反馈：专用网络的CORS(RFC1918)</title><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"><link rel="stylesheet" href="/img/css.css?random="><link data-rh="true" rel="icon" href="/img/favicon.ico"/><script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?03c1a0f31299b4a2fbb83c34d6beaac9";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script><script data-ad-client="ca-pub-6067137220025946" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script type="text/javascript" src="https://platform-api.sharethis.com/js/sharethis.js#property=5effb96910009800120b8d4d&product=inline-share-buttons" async="async"></script></head><body><div id="my_header"><div class="container"><nav class="navbar navbar-expand-lg"><a class="navbar-brand" href="/"><img alt="diglog" src="/img/logo.v1.gif" class="rounded-sm"></a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarNavAltMarkup"><div class="navbar-nav"></div></div></nav></div></div><div class="container"><div id="my_content"><h1 class="page_narrow">需要反馈：专用网络的CORS(RFC1918)</h1><div class="row"><div class="col-lg-12 col-12"><div class="my_story_list_item shadow p-3 mb-5 bg-white rounded"><div class="story_page_pub_time page_narrow">2020-11-11 06:37:10</div><div class="story_img_container"><a href="http://img2.diglog.com/img/2020/11/3c68df3618293a1eadc326be5049c670.jpg"><img src="http://img2.diglog.com/img/2020/11/3c68df3618293a1eadc326be5049c670.jpg" class="img-fluid my_story_img" onerror="this.style.display='none'"></a></div><div class="page_narrow text-break page_content"><p>Malicious websites making requests to devices and servers hosted on a privatenetwork have long been a threat. Attackers may, for example, change a wirelessrouter&#39;s configuration to enable Man-in-the-Middleattacks. CORS-RFC1918 is a proposal to block such requests by default on thebrowser and require internal devices to opt-in to requests from the publicinternet.</p><p>向私有网络上的设备和服务器发出请求的恶意网站长期以来一直是一种威胁。例如，攻击者可能会更改无线路由器的配置，以启用中间人攻击。CORS-RFC1918建议在浏览器上默认阻止此类请求，并要求内部设备选择加入来自公共互联网的请求。</p><p> To understand how this change impacts the web ecosystem, the Chrome team islooking for feedback from developers who build servers for private networks.</p><p>为了了解这一变化对网络生态系统的影响，Chrome团队正在寻找为私有网络构建服务器的开发人员的反馈。</p><p>  Many web servers run within a private network—wireless routers, printers,intranet websites, enterprise services, and Internet of Things (IoT) devices are only part of them.They might seem to be in a safer environment than the ones exposed to the publicbut those servers can be abused by attackers using a web page as a proxy. Forexample, malicious websites can embed a URL that, when simply viewed by thevictim (on a JavaScript-enabled browser), attempts to change the DNS serversettings on the victim&#39;s home broadband router. This type of attack is called&#34; Drive-ByPharming&#34; and it happened in2014.More than 300,000 vulnerable wireless routers were exploited by having their DNSsettings changed and allowing attackers to redirect users to malicious servers.</p><p>许多Web服务器在专用网络中运行-无线路由器、打印机、Intranet网站、企业服务和物联网(IoT)设备只是其中的一部分。它们似乎比暴露在公众面前的环境更安全，但这些服务器可能会被使用网页作为代理的攻击者滥用。例如，恶意网站可以嵌入一个URL，当受害者(在启用了JavaScript的浏览器上)简单地查看该URL时，它会试图更改受害者家庭宽带路由器上的DNS服务器设置。这种类型的攻击被称为Drive-ByPharming，发生在2014年。超过30万台易受攻击的无线路由器被利用，他们的DNA设置被更改，攻击者可以将用户重定向到恶意服务器。</p><p>  To mitigate the threat of similar attacks, the web community is bringing CORS-RFC1918— Cross Origin ResourceSharing (CORS) specializedfor private networks defined in  RFC1918.</p><p>为了减轻类似攻击的威胁，网络社区正在引入专门针对RFC1918中定义的专用网络的CORS-RFC1918-跨域资源共享(CORS)。</p><p> Browsers that implement CORS check with targetresources whether they are okay being loaded from a different origin. This isaccomplished either with extra headers inline describing the access or by usinga mechanism called preflight requests, depending on the complexity. Read  CrossOrigin Resource Sharingto learn more.</p><p>实现CORS的浏览器会检查目标资源是否可以从不同的来源加载。这可以通过内联描述访问的额外标头来实现，也可以通过使用称为印前检查请求的机制来实现，具体取决于复杂性。阅读跨地域资源共享了解更多信息。</p><p> With  CORS-RFC1918 the browser will blockloading resources over the private network by default except ones that areexplicitly allowed by the server using CORS and through HTTPS. The websitemaking requests to those resources will need to send CORS headers and the serverwill need to explicitly state that it accepts the cross-origin request byresponding with corresponding CORS headers. (The exact  CORSheaders are still under development.)</p><p>使用CORS-RFC1918，默认情况下，浏览器将阻止私有网络上的资源加载，但服务器使用CORS和HTTPS明确允许的资源除外。对这些资源的网站制作请求将需要发送CORS报头，服务器将需要明确声明它通过使用相应的CORS报头响应来接受跨源请求。(确切的CORS头仍在开发中。)。</p><p>      A private network A destination that resolves to the private address space defined in Section 3 of RFC1918 in IPv4, an IPv4-mapped IPv6address where the mapped IPv4 address is itself private, or an IPv6 addressoutside the  ::1/128,  2000::/3 and  ff00::/8 subnets.</p><p>专用网络解析为IPv4中RFC1918第3节中定义的专用地址空间的目的地、IPv4映射的IPv6地址(其中映射的IPv4地址本身是专用的)，或者是位于：：1/128、2000：：/3和ff00：：/8子网之外的IPv6地址。</p><p> A local network A destination that resolves to the &#34;loopback&#34; space ( 127.0.0.0/8) defined insection 3.2.1.3 of  RFC1122 of IPv4, the&#34;link-local&#34; space ( 169.254.0.0/16) defined in RFC3927 of IPv4, the &#34;Unique LocalAddress&#34; prefix ( fc00::/7) defined in Section 3 of RFC4193 of IPv6, or the &#34;link-local&#34;prefix ( fe80::/10) defined in section 2.5.6 of RFC4291 of IPv6.</p><p>本地网络解析为IPv4 RFC1122第3.2.1.3节中定义的环回空间(127.0.0.0/8)、IPv4 RFC3927中定义的链路本地空间(169.254.0.0/16)、IPv6 RFC4193第3节中定义的唯一本地地址前缀(fc00：：/7)的目的地。在IPv6的RFC4291的2.5.6节中定义的前缀(fe80：：/10)。</p><p>     Step 1: Requests to private network resources will be allowed only from HTTPS web pages  #</p><p>第一步：只允许来自HTTPS网页的内网资源请求#。</p><p> Chrome 87 adds a flag that mandates public websites making requests to privatenetwork resources to be on HTTPS. You can go to chrome://flags#block-insecure-private-network-requests to enable it. With thisflag turned on, any requests to a private network resource from an HTTP websitewill be blocked.</p><p>Chrome87增加了一个标志，要求公共网站请求私有网络资源时必须使用HTTPS。您可以访问chrome://flags#block-insecure-private-network-requests来启用它。打开此标志后，任何来自HTTP网站的对专用网络资源的请求都将被阻止。</p><p> Starting from Chrome 88, CORS-RFC1918 errors will be reported as CORS policyerrors in the console.</p><p>从Chrome 88开始，CORS-RFC1918错误将在控制台上报为CORS策略错误。</p><p>  In the  Network panel of Chrome DevTools you can enable the  Blocked Requestscheckbox to focus in on blocked requests:</p><p>在Chrome DevTools的网络面板中，您可以启用被阻止的请求复选框以专注于被阻止的请求：</p><p>     In the future, whenever a public website is trying to fetch resources from aprivate or a local network, Chrome will send a preflight request before theactual request.</p><p>将来，当一个公共网站试图从个人或本地网络获取资源时，Chrome会在实际请求之前发送一个印前检查请求。</p><p> The request will include an  Access-Control-Request-Private-Network: trueheader in addition to other CORS request headers. Among other things, theseheaders identify the origin making the request, allowing for fine-grained accesscontrol. The server can respond with an  Access-Control-Allow-Private-Network: true header to explicitly indicate that it grants access to the resource.</p><p>除了其他CORS请求头之外，该请求还将包括Access-Control-Request-Private-Network：TrueHeader。其中，这些eHeader标识发出请求的来源，从而允许细粒度的访问控制。服务器可以使用Access-Control-Allow-Private-Network：True标头进行响应，以明确指示它授予对资源的访问权限。</p><p> These headers are still under development and may change in the future. No action iscurrently required.</p><p>这些标头仍在开发中，未来可能会发生变化。目前不需要采取任何行动。</p><p>  If you are hosting a website within a private network that expects requests frompublic networks, the Chrome team is interested in your feedback and use cases. Thereare two things you can do to help:</p><p>如果您在私有网络中托管一个网站，而该网站需要来自公共网络的请求，Chrome团队会对您的反馈和使用案例感兴趣。您可以做两件事来帮助您：</p><p> Go to  chrome://flags#block-insecure-private-network-requests, turn on theflag and see if your website sends requests to the private network resource asexpected.</p><p>转到chrome://flags#block-insecure-private-network-requests，，打开旗帜，看看您的网站是否按预期向内网资源发送请求。</p><p> If you encounter any issues or have feedback, file an issue at crbug.comand set the component to  Blink&gt;SecurityFeature&gt;CORS&gt;RFC1918.</p><p>如果您遇到任何问题或有反馈，请在crbug.com上提交问题，并将组件设置为Blink&gt；SecurityFeature&&gt;CORS&gT；RFC1918。</p><p>  Our wireless router serves an admin website for the same private network butthrough HTTP. If HTTPS is required for websites that embed the admin website,it will be mixed content. Should we enable HTTPS on the admin website in aclosed network?</p><p>我们的无线路由器通过HTTP为同一私有网络的管理网站提供服务。如果嵌入管理网站的网站需要HTTPS，它将是混合内容。我们应该在封闭网络中的管理网站上启用HTTPS吗？</p><p> This is exactly the type of feedback Chrome is looking for. Please file an issuewith your concrete use case at  crbug.com. Chrome would love to hear from you.</p><p>这正是Chrome正在寻找的反馈类型。请将您的具体用例问题提交到crbug.com。Chrome会很高兴听到你的消息。</p></div><div id="story_share_this"><div class="sharethis-inline-share-buttons"></div></div><div class="text-break sotry_link page_narrow"><a target="_blank" href="https://web.dev/cors-rfc1918-feedback/">https://web.dev/cors-rfc1918-feedback/</a></div><div class="story_tags page_narrow"><button type="button" class="btn btn-light my_tag"><a href="/tag/反馈/">#反馈</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/wanted/">#wanted</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/网站/">#网站</a></button></div></div><div class="my_movie_list_item shadow p-3 mb-5 bg-white rounded"><button type="button" class="btn btn-link my_tag"><a href="/tag/web2.0/">#web2.0</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/google/">#google</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/设计/">#设计</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/游戏/">#游戏</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/创意/">#创意</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/apple/">#apple</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/苹果/">#苹果</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/摄影/">#摄影</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/软件/">#软件</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/美国/">#美国</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/iphone/">#iphone</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/图片/">#图片</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/手机/">#手机</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/视频/">#视频</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/广告/">#广告</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/免费/">#免费</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/谷歌/">#谷歌</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/网站/">#网站</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/windows/">#windows</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/微软/">#微软</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/下载/">#下载</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/firefox/">#firefox</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/音乐/">#音乐</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/linux/">#linux</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/blog/">#blog</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/博客/">#博客</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/程序/">#程序</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/艺术/">#艺术</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/web/">#web</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/wordpress/">#wordpress</a></button></div></div></div><div id="my_footer"><div class=""><a href="/tags/">tags</a> <a href="/users/">users</a></div>&copy; 2020 diglog.com </div></div></body></html>