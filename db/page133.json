[{"category": "", "categoryclass": "", "imagename": "112612ff1ab2311667fb6a4d8bb3024a.jpg", "infoid": 1070275, "ip": "", "isanchordig": 1, "ischecked": 1, "isdelete": 0, "isneo": 1, "mark": "", "name": "", "note": "\u4e0a\u5468\u4e94\uff0c\u56fd\u5bb6\u4fe1\u606f\u7cfb\u7edf\u906d\u5230\u653b\u51fb\u540e\uff0c\u4e00\u540d\u9ed1\u5ba2\u83b7\u5f97\u4e86\u8d85\u8fc7 280,000 \u5f20\u4e2a\u4eba\u8eab\u4efd\u7167\u7247\u3002\u636e\u62a5\u9053\uff0c\u5acc\u7591\u4eba\u662f\u5854\u6797\u5c45\u6c11\u3002\u7f6a\u9b41\u7978\u9996\u5df2\u7ecf\u83b7\u5f97\u4e86\u4e2a\u4eba\u59d3\u540d\u548c ID \u4ee3\u7801\uff0c\u5e76\u4e14\u80fd\u591f\u901a\u8fc7\u4ece\u6570\u5343\u4e2a IP \u5730\u5740\u53d1\u51fa\u4e2a\u4eba\u8bf7\u6c42\u6765\u83b7\u5f97\u7b2c\u4e09\u4e2a\u7ec4\u6210\u90e8\u5206\uff0c\u5373\u7167\u7247\u3002\u7136\u800c\uff0c\u8fd9\u4e9b\u6570\u636e\u4e0d\u8db3\u4ee5\u8ba9\u9ed1\u5ba2\u8bbf\u95ee\u7535\u5b50\u72b6\u6001\u670d\u52a1\uff0c\u8fd9\u610f\u5473\u7740\u6b63\u5e38\u7684\u8eab\u4efd\u9a8c\u8bc1\u65b9\u5f0f\uff08\u8eab\u4efd\u8bc1\u3001\u79fb\u52a8 ID \u548c SMART ID\uff09\u6ca1\u6709\u53d7\u5230\u635f\u5bb3\u3002\u5728\u5468\u4e09\u7684\u65b0\u95fb\u53d1\u5e03\u4f1a\u4e0a\uff0c\u4e2d\u592e\u5211\u4e8b\u8b66\u5bdf\u7f51\u7edc\u72af\u7f6a\u529e\u516c\u5ba4\u8d1f\u8d23\u4eba\u5965\u65af\u5361\u00b7\u683c\u7f57\u65af\u8bf4\uff1a\u201c\u8fc4\u4eca\u4e3a\u6b62\uff0c\u5b9e\u65bd\u653b\u51fb\u7684\u4e2a\u4eba\u5df2\u7ecf\u638c\u63e1\u4e86\u4ed6\u5165\u4fb5\u7684\u6570\u636e\uff0c\u5e76\u88ab\u8b66\u65b9\u6ca1\u6536\uff0c\u201d\u5e76\u8865\u5145\u8bf4\uff0c\u8087\u4e8b\u8005\u662f\u5854\u6797\u5c45\u6c11\u3002\u4e5f\u51fa\u73b0\u5728\u65b0\u95fb\u53d1\u5e03\u4f1a\u4e0a\u7684 RIA \u8d1f\u8d23\u4eba Margus Noormaa \u8bf4\uff0c\u8fd9\u6b21\u88ad\u51fb\u4f3c\u4e4e\u6ca1\u6709\u592a\u591a\u7684\u62bc\u97f5\u548c\u7406\u7531\u3002\u4ed6\u8bf4\uff1a\u201c[\u88ab\u9ed1] \u7684\u7167\u7247\u662f\u968f\u673a\u7684\uff1b\u9664\u4e86\u83b7\u53d6\u5b83\u4eec\u4e4b\u5916\uff0c\u6ca1\u6709\u5176\u4ed6\u76ee\u7684\u3002\u201d Noormaa \u8bf4\uff0c\u8fd9\u4e9b\u603b\u5171 286,438 \u5f20\u7167\u7247\u662f\u4ece 9,000 \u4e2a\u4e0d\u540c\u7684\u56fd\u5185\u5916 IP \u5730\u5740\u96c6\u4f53\u4e0b\u8f7d\u7684\uff0c\u4f7f\u7528\u6076\u610f\u8f6f\u4ef6\u7f51\u7edc\u548c\u4f2a\u9020\u7684\u6570\u5b57\u8bc1\u4e66\u5e76\u5229\u7528\u6f0f\u6d1e\uff0cNoormaa \u8865\u5145\u8bf4\uff0c\u6570\u5b57\u5b58\u50a8\u7684\u7167\u7247\u662f\u9ed1\u5ba2\u62e5\u6709\u7684\u552f\u4e00\u6570\u636e\u3002\u80fd\u591f\u83b7\u5f97\uff1b\u6ca1\u6709\u6570\u636e\u5e93\u53d7\u5230\u635f\u5bb3\u3002\nNoormaa \u8bf4\uff0c\u9ed1\u5ba2\u83b7\u5f97\u7684\u6570\u636e\uff0c\u5373\u7167\u7247\u3001\u4e2a\u4eba ID \u4ee3\u7801\u548c\u4e2a\u4eba\u59d3\u540d\uff0c\u4e0d\u8db3\u4ee5\u8bbf\u95ee\u7231\u6c99\u5c3c\u4e9a\u7684\u4efb\u4f55\u7535\u5b50\u56fd\u5bb6\u670d\u52a1\uff0c\u5e76\u8865\u5145\u8bf4\uff0c\u6240\u6709\u4ee5\u8fd9\u79cd\u65b9\u5f0f\u6cc4\u9732\u6570\u636e\u7684\u4eba\u90fd\u5c06\u901a\u8fc7\u56fd\u5bb6\u95e8\u6237\u7f51\u7ad9\u6536\u5230\u901a\u77e5\u3002 . IT\u548c\u5916\u8d38\u90e8\u957f\u5b89\u5fb7\u70c8\u65af\u00b7\u82cf\u7279\uff08\u6539\u9769\uff09\u79f0\u8fd9\u4e00\u4e8b\u4ef6\u662f\u5bf9\u7231\u6c99\u5c3c\u4e9a\u56fd\u5bb6\u7684\u660e\u663e\u653b\u51fb\u3002 Sutt \u8bf4\uff1a\u201c\u7f51\u7edc\u72af\u7f6a\u663e\u7136\u5448\u4e0a\u5347\u8d8b\u52bf\uff0c\u8fd9\u610f\u5473\u7740\u6211\u4eec\u9700\u8981\u4e0d\u65ad\u6295\u8d44\u516c\u5171\u548c\u79c1\u4eba\u5c42\u9762\u7684\u7f51\u7edc\u5b89\u5168\uff0c\u201d\u5e76\u8865\u5145\u8bf4\u4ed6\u8ba1\u5212\u5728\u5468\u56db\u7684\u5185\u9601\u4f1a\u8bae\u4e0a\u63d0\u51fa\u8fd9\u4e2a\u95ee\u9898\u53ca\u5176\u53ef\u80fd\u7684\u8d44\u91d1\u6765\u6e90\u3002 \u201c\u6211\u5c06\u52a0\u5feb\u66ff\u6362\u4e00\u4e9b\u8f83\u65e7\u7684\u9057\u7559\u6570\u636e\u7cfb\u7edf\u548c\u89e3\u51b3\u65b9\u6848\uff0c\u201dSutt \u8bf4\u3002 \u201c\u6211\u4eec\u5df2\u7ecf\u5f00\u59cb\u6574\u5408\u57fa\u672c\u7684 IT \u57fa\u7840\u8bbe\u65bd\u548c\u652f\u6301\uff0c\u8fd9\u53cd\u8fc7\u6765\u5c06\u52a0\u5f3a\u7f51\u7edc\u5b89\u5168\uff0c\u201d\u4ed6\u8865\u5145\u9053\u3002\u9ed1\u5ba2\u9996\u5148\u4ece\u516c\u5171\u7f51\u7edc\u83b7\u53d6\u4e86\u4eba\u4eec\u7684\u4e2a\u4eba\u8bc6\u522b\u7801\u548c\u59d3\u540d\uff0c\u7136\u540e\u4ed6\u6216\u5979\u53ef\u4ee5\u901a\u8fc7\u63d0\u51fa\u4e2a\u4eba\u8bf7\u6c42\u6765\u83b7\u53d6\u7167\u7247\u3002 \u201c\u8fd9\u4e9b\u7c7b\u578b\u7684\u67e5\u8be2\u901a\u8fc7\u516c\u5171\u7f51\u7edc\u8fdb\u884c\uff0c\u4f7f\u653b\u51fb\u6210\u4e3a\u53ef\u80fd\uff0c\u201dMargus Noormaa \u8bf4\u3002\nOskar Gross \u8bf4\uff0c\u8b66\u65b9\u4e8e\u4e0a\u5468\u56db\u63a5\u5230\u4e86\u8fdd\u89c4\u884c\u4e3a\u7684\u901a\u77e5\uff0c\u5468\u4e94\u65e9\u4e0a\u5f00\u59cb\u641c\u67e5\u5acc\u7591\u4eba\uff0c\u800c\u5acc\u7591\u4eba\u5df2\u7ecf\u63a5\u53d7\u4e86\u8baf\u95ee\u3002\u4ed6\u8bf4\uff0c\u6240\u6709\u4ee5\u524d\u6cc4\u9732\u7684\u6570\u636e\u73b0\u5728\u90fd\u5b89\u5168\u5730\u56de\u5230\u4e86\u56fd\u5bb6\u624b\u4e2d\u3002 \u201c\u7531\u4e8e\u8fd9\u662f\u4e00\u8d77\u5177\u6709\u56fd\u5bb6\u91cd\u8981\u6027\u7684\u6848\u4ef6\uff0c\u56e0\u6b64\u4e5f\u503c\u5f97\u8fc5\u901f\u505a\u51fa\u56de\u5e94\u3002\u201d RIA \u63d0\u4f9b\u4e86\u4e0e ERR \u65b0\u95fb\u5728\u4e0b\u9762\u91cd\u65b0\u53d1\u5e03\u7684\u4e8b\u4ef6\u76f8\u5173\u7684\u5e38\u89c1\u95ee\u9898\u5217\u8868\u3002\u4e0d\u53ef\u80fd\u6839\u636e\u8bc1\u4ef6\u7167\u7247\u3001\u59d3\u540d\u548c\u4e2a\u4eba\u8bc6\u522b\u7801\u6765\u4f2a\u9020\u4efb\u4f55\u4eba\u7684\u6570\u5b57\u8eab\u4efd\uff1b\u6709\u4e86\u8fd9\u4e9b\u6570\u636e\uff0c\u5c31\u65e0\u6cd5\u8bbf\u200b\u200b\u95ee\u4efb\u4f55\u56fd\u5bb6\u7535\u5b50\u670d\u52a1\u3001\u8fdb\u884c\u4efb\u4f55\u516c\u8bc1\u548c\u5176\u4ed6\u91d1\u878d\u4ea4\u6613\uff1b\u7a83\u53d6\u8fd9\u4e9b\u6570\u636e\u4e0d\u4f1a\u5f71\u54cd\u4efb\u4f55\u7269\u7406\u6216\u6570\u5b57\u4f7f\u7528\u7684\u6587\u4ef6\uff0c\u5373\u8eab\u4efd\u8bc1\u3001\u5c45\u7559\u8bc1\u3001\u79fb\u52a8 ID \u6216\u667a\u80fd ID\uff1b\u6240\u6709\u7231\u6c99\u5c3c\u4e9a\u7684\u7535\u5b50\u670d\u52a1\u90fd\u662f\u5b89\u5168\u7684\uff0c\u4e0b\u8f7d\u7167\u7247\u7684\u4eba\u4e0d\u9700\u8981\u7533\u8bf7\u65b0\u6587\u4ef6\u3002\n\u6240\u6709\u5e26\u6709\u4e2a\u4eba\u8bc6\u522b\u7801\u548c\u59d3\u540d\u7684\u6587\u4ef6\u7167\u7247\u88ab\u76d7\u7684\u4eba\u90fd\u5c06\u6536\u5230\u4e00\u5c01\u901a\u77e5\u5230\u4ed6\u4eec\u7684\u7535\u5b50\u90ae\u4ef6\u5730\u5740\uff0c\u4ed6\u4eec\u5c06\u56fd\u5bb6\u53d1\u9001\u7684\u901a\u77e5\u5b9a\u5411\u5230\u8be5\u5730\u5740\u3002\u843d\u5165\u72af\u7f6a\u5206\u5b50\u624b\u4e2d\u7684\u6570\u636e\u96c6\u5305\u62ec\u8bc1\u4ef6\u7167\u7247\u3001\u540d\u5b57\u548c\u59d3\u6c0f\u4ee5\u53ca\u4e00\u4e2a\u4eba\u7684\u4e2a\u4eba\u8bc6\u522b\u7801\u3002\u6839\u636e\u76ee\u524d\u7684\u4fe1\u606f\uff0c\u6211\u4eec\u77e5\u9053\u6570\u636e\u5e76\u6ca1\u6709\u4ece\u5acc\u7591\u4eba\u7684\u8ba1\u7b97\u673a\u4e0a\u8fdb\u4e00\u6b65\u4f20\u8f93\u3002\u56e0\u6b64\uff0c\u6709\u7406\u7531\u76f8\u4fe1\u6570\u636e\u5e76\u6ca1\u6709\u88ab\u66f4\u591a\u5730\u6ee5\u7528\u3002\u4f46\u662f\uff0c\u5982\u679c\u6570\u636e\u88ab\u4f20\u8f93\uff0c\u91cd\u8981\u7684\u662f\u8981\u8003\u8651\u8fd9\u6837\u4e00\u79cd\u53ef\u80fd\u6027\uff0c\u5373\u56fe\u7247\u3001\u59d3\u540d\u548c\u4e2a\u4eba\u8bc6\u522b\u7801\u7684\u7ec4\u5408\u53ea\u80fd\u7528\u4e8e\u521b\u5efa\u57fa\u672c\u7684\u4f2a\u9020\u6587\u4ef6\uff08\u6ca1\u6709\u5b89\u5168\u529f\u80fd\uff09\u3002\u6b64\u7c7b\u6587\u4ef6\u53ef\u80fd\u7528\u4e8e\u67d0\u4e9b\u4f7f\u7528\u7167\u7247\u8bc6\u522b\u4eba\u5458\u7684\u670d\u52a1\uff08\u4f8b\u5982\u8f66\u8f86\u548c/\u6216\u81ea\u884c\u8f66\u79df\u8d41\uff09\u3002\u6b64\u7c7b\u670d\u52a1\u5728\u56fd\u5916\u4f7f\u7528\u8f83\u591a\u3002\u4f8b\u5982\uff0c\u8fd8\u53ef\u4ee5\u521b\u5efa\u865a\u5047\u7684\u793e\u4ea4\u5a92\u4f53\u5e10\u6237\u3002\u7b14\u8bb0\uff01\u5982\u679c\u60a8\u6000\u7591\u6709\u4eba\u4ee5\u4efb\u4f55\u4e00\u79cd\u65b9\u5f0f\u4f7f\u7528\u4e86\u60a8\u7684\u6570\u636e\uff0c\u8bf7\u5411\u8b66\u65b9\u62a5\u544a\u3002\u91cd\u8981\u7684\u662f\u8981\u8bb0\u4f4f\uff0c\u8fd9\u4e9b\u6570\u636e\u88ab\u76d7\u5bf9 ID \u5361\u3001\u79fb\u52a8 ID \u6216\u667a\u80fd ID \u6ca1\u6709\u5f71\u54cd\u3002\u6240\u6709\u8eab\u4efd\u8bc1\u660e\u6587\u4ef6\u4e5f\u5c06\u6709\u6548\uff0c\u5305\u62ec\u975e\u6cd5\u4e0b\u8f7d\u6587\u4ef6\u7167\u7247\u7684\u6587\u4ef6\u3002\u65e0\u6cd5\u4f7f\u7528\u8bc1\u4ef6\u7167\u7247\u3001\u4e2a\u4eba\u8bc6\u522b\u7801\u6216\u8fdb\u884c\u4e0d\u540c\u7684\u91d1\u878d\u4ea4\u6613\uff08\u5305\u62ec\u94f6\u884c\u8f6c\u8d26\u3001\u4e70\u5356\u4ea4\u6613\u3001\u516c\u8bc1\u4ea4\u6613\u7b49\uff09\u8bbf\u95ee\u7535\u5b50\u670d\u52a1\u3001\u63d0\u4f9b\u6570\u5b57\u7b7e\u540d\u6216\u8fdb\u884c\u4e0d\u540c\u7684\u91d1\u878d\u4ea4\u6613\u3002\u540d\u79f0\u3002\u8bc1\u4ef6\u7167\u7247\u88ab\u76d7\u8005\u65e0\u9700\u7533\u8bf7\u65b0\u7684\u5b9e\u7269\u6216\u6570\u5b57\u8bc1\u4ef6\uff08\u62a4\u7167\u3001\u8eab\u4efd\u8bc1\u3001\u5c45\u7559\u8bc1\u3001\u624b\u673a\u8eab\u4efd\u8bc1\u6216\u667a\u80fd\u8eab\u4efd\u8bc1\u7b49\uff09\u6216\u62cd\u6444\u65b0\u8bc1\u4ef6\u7167\u7247\u3002\u6240\u6709\u8eab\u4efd\u8bc1\u4ef6\u548c\u7167\u7247\u4ecd\u7136\u6709\u6548\u3002\u72af\u7f6a\u5206\u5b50\u5982\u4f55\u83b7\u53d6\u6211\u7684\u6570\u636e\uff08\u7167\u7247\u3001\u4e2a\u4eba\u8bc6\u522b\u7801\u548c\u59d3\u540d\uff09\uff1f\u4e3a\u4e86\u4e0b\u8f7d\u6587\u4ef6\u7167\u7247\uff0c\u7f6a\u72af\u9700\u8981\u77e5\u9053\u6b64\u4eba\u7684\u59d3\u540d\u548c\u4e2a\u4eba\u8bc6\u522b\u7801\u3002\u5c3d\u7ba1\u8fd9\u662f\u516c\u5171\u6570\u636e\uff0c\u5373\u53ef\u4ece\u5404\u79cd\u516c\u5171\u6570\u636e\u5e93\u83b7\u5f97\uff0c\u4f46\u9700\u8981\u901a\u8fc7\u8c03\u67e5\u786e\u5b9a\u6570\u636e\u7684\u786e\u5207\u6765\u6e90\u548c\u72af\u7f6a\u52a8\u673a\u3002\u72af\u7f6a\u5206\u5b50\u501f\u52a9\u4eba\u540d\u548c\u4e2a\u4eba\u8eab\u4efd\u4ee3\u7801\u4f2a\u9020\u4e86\u6b64\u4eba\u7684\u8bc1\u4ef6\uff0c\u4f7f\u7cfb\u7edf\u8ba4\u4e3a\u4e0b\u8f7d\u7167\u7247\u7684\u662f\u4eba\u800c\u4e0d\u662f\u72af\u7f6a\u4eba\u3002 RIA \u8bc6\u522b\u5e76\u7ea0\u6b63\u4e86\u7cfb\u7edf\u9519\u8bef\u3002\u8fd9\u79cd\u64cd\u7eb5\u4e0d\u518d\u53ef\u80fd\u3002\n\u8b66\u65b9\u902e\u6355\u4e86\u4e00\u540d\u7231\u6c99\u5c3c\u4e9a\u516c\u6c11\uff0c\u4ed6\u7684\u7535\u8111\u88ab\u7528\u6765\u8fdb\u884c\u76d7\u7a83\u3002\u6b64\u4eba\u662f\u5426\u5355\u72ec\u884c\u52a8\u3001\u6b64\u4eba\u7684\u76ee\u7684\u662f\u4ec0\u4e48\u4ee5\u53ca\u6b64\u4eba\u60f3\u5bf9\u6570\u636e\u505a\u4ec0\u4e48\u7b49\u95ee\u9898\u4ecd\u6709\u5f85\u5211\u4e8b\u8c03\u67e5\u6f84\u6e05\u3002\u6709\u6ca1\u6709\u5176\u4ed6\u4eba\u56e0\u4e3a\u7cfb\u7edf\u7f3a\u9677\u4ee5\u8fd9\u79cd\u65b9\u5f0f\u7a83\u53d6\u4e86\u7231\u6c99\u5c3c\u4e9a\u4eba\u7684\u6570\u636e\uff1f\u6839\u636e\u6211\u4eec\u76ee\u524d\u638c\u63e1\u7684\u4fe1\u606f\uff0c\u6211\u4eec\u6ca1\u6709\u7406\u7531\u76f8\u4fe1\u4ee5\u524d\u4f1a\u505a\u7c7b\u4f3c\u7684\u4e8b\u60c5\uff0c\u4f46\u6211\u4eec\u6b63\u5728\u68c0\u67e5\u8fd9\u4e9b\u4fe1\u606f\u3002\u5c3d\u7ba1\u8be5\u89e3\u51b3\u65b9\u6848\u662f\u5728\u51e0\u5e74\u524d\u9488\u5bf9\u6b64\u7f3a\u9677\u521b\u5efa\u7684\uff0c\u4f46\u76ee\u524d\u7684\u76d1\u63a7\u548c\u4fe1\u606f\u6ca1\u6709\u7406\u7531\u76f8\u4fe1\u8fd9\u79cd\u9488\u5bf9\u7cfb\u7edf\u7684\u653b\u51fb\u5728\u8fc7\u53bb\u4f1a\u6210\u529f\u3002", "note_en": "A hacker was able to obtain over 280,000 personal identity photos following an attack on the state information system last Friday. The suspect is reportedly a resident of Tallinn.\n The culprit had already obtained personal names and ID codes and was able to obtain a third component, the photos, by making individual requests from thousands of IP addresses.\n This data was not, however, enough for the hacker to access e-state services, meaning the normal means of authentication (ID card, mobile ID and SMART ID) have not been compromised.\n  Speaking at a press conference Wednesday, Oskar Gross, head of the central criminal police cyber crime office, said that: &#34;To date, the individual who committed the attack has had the data he hacked seized and confiscated by the police,&#34; adding that the perpetrator was a resident of Tallinn.\n The attack did not seem to have too much rhyme and reason to it, head RIA Margus Noormaa, who also appeared at the press conference, said.\n He said: &#34;The [hacked] photos were random; there was no purpose here other than to get them.&#34;\n These, totaling 286,438, had been downloaded en masse from 9,000 different domestic and foreign IP addresses, using a malware network and forged digital certification and taking advantage of a vulnerability, Noormaa said, adding that digitally-stored photos were the only data the hacker had been able to obtain; no database had been compromised.\n The data the hacker obtained, namely picture, personal ID code and the individual&#39;s name, were insufficient to access any of Estonia&#39;s e-state services, Noormaa said, adding that all those whose data was compromised in this way will be notified via the state portal.\n  IT and foreign trade minister Andres Sutt (Reform) called the incident a clear attack on the Estonian state.\n Sutt said that: &#34;Cybercrime is clearly on the rise, and that means we need to constantly invest in cyber security at both public and private levels,&#34; adding that he plans to raise this issue and its possible funding at Thursday&#39;s cabinet meeting.\n &#34;I will be speeding up the replacement of some older, legacy data systems and solutions,&#34; Sutt said.\n &#34;We have begun consolidating basic IT infrastructure and support, which in turn will bolster cyber security,&#34; he added.\n The hacker had first obtained people&#39;s personal identification codes and names from the public web, after which he or she was able to obtain photos by making individual requests.\n &#34;These types of queries go via the public web, making the attack possible in this way,&#34; Margus Noormaa said.\n Oskar Gross said the police was notified of the breach last Thursday, with a suspect search following Friday morning, while the suspect has already been questioned.\n All previously compromised data is now safely back in state hands, he said. &#34;As this is a case of national importance, it also merited a quick response.&#34;\n  RIA has provided a list of  frequently asked questions in relation to the incident which ERR News republished below.\n  it is not possible to falsify any person&#39;s digital identity based on a document photo, a name and a personal identification code;\n with these data it is not possible to access any state e-services, carry out any notarial and other financial transactions;\n theft of these data has no effect on any physical or digitally used document, i.e. the ID-card, the residence permit, the Mobile-ID or the Smart-ID;\n all Estonian e-services are safe and no person, whose photo was downloaded needs to apply for a new document.\n  All those whose document photo with their personal identification code and name was stolen will receive a notification to their email address to which they have directed notifications sent by the state. The data set that fell into the hands of the criminal includes a document photo, first name and surname, and the personal identification code of a person.\n  Based on the current information, we know that the data was not transmitted further from the suspect&#39;s computer. Therefore, there is reason to believe that the data have not been misused more.\n However, if the data was transmitted, it is important to consider the possibility that the combination of a picture, name, and personal identification code can only be used to create a rudimentary fake document (without security features). It is possible that such a document could be used for some services which identify people using a photo (e.g. vehicle and/or bike rent). Such services are used more abroad. It is also possible to create fake social media accounts, for example.\n Note! If you suspect that someone has used your data in any one of these ways, report this to the police.\n It is important to remember that the theft of this data has no impact on ID-cards, Mobile-ID, or Smart-ID. All identity documents will also be valid, including the documents, the document photos of which were illegally downloaded. It is not possible to gain access to e-services, give a digital signature, or to perform different financial transactions (incl. bank transfers, purchase and sales transactions, notarial transactions, etc.) using a document photo, personal identification code, or name. People whose document photos have been stolen need not apply for a new physical or digital document (passport, ID-card, residence permit card, mobile-ID or Smart-ID, etc.) or take a new document photo. All identity documents and photos remain valid.\n How did the criminal gain access to my data (photo, personal identification code, and name)?\n In order to download document photos, the criminal needed to know the person&#39;s name and personal identification code. Although this is public data, i.e. available from various public databases, the exact origin of the data and the motives of the criminal need to be established by the investigation. With the help of the people&#39;s names and personal identification codes, the criminal managed to forge the person&#39;s certificate so that the system thought that the person, instead of the criminal, was the one who wanted to download the photo. RIA identified and corrected the system error. Such manipulation is no longer possible.\n  The police have arrested an Estonian citizen whose computer was used to commit the theft. The questions of whether the person acted alone, what was the person&#39;s aim, and what did the person want to do with the data remain to be clarified by a criminal investigation.\n Has anyone else stolen the data of Estonian people in this way because of a system flaw?\n According to the information we currently have, we have no reason to believe that something similar would have been done before, but we are checking this information.\n  Although this solution was created with this flaw several years ago, current monitoring and information gives no reason to believe that such an attack against the system would have succeeded in the past.", "posttime": "2021-07-29 22:03:53", "source_domain": "news.ycombinator.com", "source_name": "Hacker News", "tags": "\u6570\u636e\u5e93,\u9ed1\u5ba2,database,\u4e0b\u8f7d,\u8eab\u4efd\u8bc1", "title": "\u9ed1\u5ba2\u4ece\u7231\u6c99\u5c3c\u4e9a\u653f\u5e9c\u6570\u636e\u5e93\u4e0b\u8f7d\u8fd1 30 \u4e07\u5f20\u4e2a\u4eba\u8eab\u4efd\u8bc1\u7167\u7247", "title_en": "Hacker downloads close to 300k personal ID photos from Estonian gov database", "transed": 1, "url": "https://news.err.ee/1608291072/hacker-downloads-close-to-300-000-personal-id-photos", "via": "", "real_tags": ["\u6570\u636e\u5e93", "\u9ed1\u5ba2", "database", "\u4e0b\u8f7d", "\u8eab\u4efd\u8bc1"]}, {"category": "", "categoryclass": "", "imagename": "066422944222078899255f3b91f853be.jpg", "infoid": 1070274, "ip": "", "isanchordig": 1, "ischecked": 1, "isdelete": 0, "isneo": 1, "mark": "", "name": "", "note": "\u8def\u900f 7 \u6708 28 \u65e5 - \u8bed\u8a00\u5b66\u4e60\u5e94\u7528\u7a0b\u5e8f Duolingo Inc (DUOL.O) \u5468\u4e09\u5728\u7eb3\u65af\u8fbe\u514b\u4e0a\u5e02\uff0c\u80a1\u4ef7\u98d9\u5347\u8fd1 40%\uff0c\u6210\u4e3a\u7ed9\u534e\u5c14\u8857\u7559\u4e0b\u6df1\u523b\u5370\u8c61\u7684\u6700\u65b0\u6559\u80b2\u79d1\u6280\u521d\u521b\u516c\u53f8\uff0c\u4f30\u503c\u8fbe\u5230 65 \u4ebf\u7f8e\u5143\u3002 Duolingo \u7684\u80a1\u7968\u5f00\u76d8\u4ef7\u4e3a\u6bcf\u80a1 141.4 \u7f8e\u5143\uff0c\u8d85\u8fc7\u4e86\u6bcf\u80a1 102 \u7f8e\u5143\u7684\u9996\u6b21\u516c\u5f00\u52df\u80a1\u4ef7\u683c (IPO)\uff0c\u8d85\u8fc7\u4e86\u5176\u76ee\u6807\u533a\u95f4\u7684\u4e0a\u9650\u3002\u8be5\u80a1\u540e\u6765\u56de\u5410\u4e86\u4e00\u4e9b\u6da8\u5e45\uff0c\u4e0b\u5348\u4ea4\u6613\u4ef7\u683c\u4e3a 130.92 \u7f8e\u5143\u3002\u8be5\u516c\u53f8\u7684\u4e0a\u5e02\u6b63\u503c\u6295\u8d44\u8005\u5bf9\u6559\u80b2\u79d1\u6280\u9886\u57df\u7684\u5174\u8da3\u589e\u52a0\u4e4b\u9645\uff0c\u5728\u5927\u6d41\u884c\u7684\u9650\u5236\u5c06\u5b66\u751f\u548c\u6559\u5e08\u4ece\u8bfe\u5802\u4e0a\u8f6c\u79fb\u5230\u7f51\u7edc\u4e4b\u540e\u3002 Duolingo \u7684\u8054\u5408\u521b\u59cb\u4eba\u517c\u9996\u5e2d\u6267\u884c\u5b98 Luis von Ahn \u8868\u793a\uff1a\u201c\u6210\u4e3a\u4e00\u5bb6\u4e0a\u5e02\u516c\u53f8\u5c06\u4f7f\u6211\u4eec\u80fd\u591f\u5728\u66f4\u9ad8\u7684\u6c34\u5e73\u4e0a\u8fd0\u8425\uff0c\u5e76\u4ece\u5c0f\u8054\u76df\u8d70\u5411\u5927\u8054\u76df\u3002\u201d von Ahn \u8868\u793a\uff0c\u5728 IPO \u4e4b\u540e\uff0c\u8be5\u516c\u53f8\u5c06\u4e13\u6ce8\u4e8e\u6539\u8fdb\u5176\u65d7\u8230\u5e94\u7528\u7a0b\u5e8f\uff0c\u5e76\u8ba9\u66f4\u591a\u6d3b\u8dc3\u7528\u6237\u8f6c\u5411\u4ed8\u8d39\u7528\u6237\u3002 Duolingo \u4e3a\u6bcf\u6708\u7ea6 4000 \u4e07\u6d3b\u8dc3\u7528\u6237\u63d0\u4f9b 40 \u79cd\u8bed\u8a00\u7684\u8bfe\u7a0b\u3002 von Ahn \u8868\u793a\uff0c\u76ee\u524d\uff0cDuolingo \u6700\u5927\u7684\u5e02\u573a\u662f\u7f8e\u56fd\uff0c\u62e5\u6709 20% \u7684\u7528\u6237\u548c 45% \u7684\u516c\u53f8\u6536\u5165\u3002\u591a\u90bb\u56fd\u901a\u8fc7\u51fa\u552e\u7ea6 510 \u4e07\u80a1\u80a1\u7968\u5728 IPO \u4e2d\u7b79\u96c6\u4e86\u8fd1 5.21 \u4ebf\u7f8e\u5143\u3002\u5176\u4e2d\u8fd1 140 \u4e07\u80a1\u7531\u73b0\u6709\u80a1\u4e1c\u51fa\u552e\uff0c\u6240\u5f97\u6b3e\u9879\u4e0d\u4f1a\u5f52\u516c\u53f8\u6240\u6709\u3002\n\u672c\u5468\u65e9\u4e9b\u65f6\u5019\uff0c\u8be5\u516c\u53f8\u5c06\u5176\u76ee\u6807\u4ef7\u683c\u533a\u95f4\u4ece\u65e9\u5148\u7684\u6bcf\u80a1 85 \u7f8e\u5143\u81f3 95 \u7f8e\u5143\u4e0a\u8c03\u81f3\u6bcf\u80a1 95 \u7f8e\u5143\u81f3 100 \u7f8e\u5143\u4e4b\u95f4\u3002\u9605\u8bfb\u66f4\u591a \u8be5\u516c\u53f8\u7531 von Ahn \u548c Severin Hacker \u4e8e 2011 \u5e74\u521b\u7acb\uff0c\u4ed6\u4eec\u5728\u5361\u5185\u57fa\u6885\u9686\u5927\u5b66\u76f8\u8bc6\u3002\u9ad8\u76db\u516c\u53f8\u548c\u827e\u4f26\u516c\u53f8\u662f\u6b64\u6b21 IPO \u7684\u4e3b\u627f\u9500\u5546\u3002\u73ed\u52a0\u7f57\u5c14\u7684 Niket Nishant \u548c\u7ebd\u7ea6\u7684 Echo Wang \u62a5\u9053\uff1b Devika Syamnath \u7f16\u8f91", "note_en": "July 28 (Reuters) - Language learning app Duolingo Inc  (DUOL.O) notched a valuation of $6.5 billion after its shares surged nearly 40% in the company&#39;s Nasdaq debut on Wednesday, becoming the latest education technology startup to impress Wall Street.\n Duolingo&#39;s stock opened at $141.4 per share, blowing past the initial public offering price (IPO) of $102 per share, which crossed the top end of its target range. The stock later pared some gains to trade at $130.92 in the afternoon.\n The company&#39;s flotation comes at a time of increased investor interest in the edtech space, after pandemic restrictions sent students and teachers from the classroom to the web.\n &#34;Being a public company will allow us to operate at a higher level, and get going from the minor leagues to the major leagues,&#34; said Luis von Ahn, co-founder and chief executive officer of Duolingo.\n Following the IPO, the company will focus on improving its flagship app and getting more active users to switch to paying subscribers, von Ahn said. Duolingo offers courses in 40 languages to about 40 million monthly active users.\n  Currently, Duolingo&#39;s largest market is the United States, home to 20% of its users and bringing in 45% of the company&#39;s revenue, von Ahn said.\n Duolingo raised nearly $521 million in the IPO by selling about 5.1 million shares. Almost 1.4 million of those shares were sold by existing stockholders and the proceeds will not go to the company.\n Earlier this week, the company raised its price target range to between $95 and $100 per share, from an earlier estimate of between $85 and $95 per share.   read more\n The company was founded in 2011 by von Ahn and Severin Hacker, who met at Carnegie Mellon University.\n Goldman Sachs &amp; Co and Allen &amp; Company are the lead underwriters for the IPO.\n Reporting by Niket Nishant in Bengaluru and Echo Wang in New York; Editing by Devika Syamnath", "posttime": "2021-07-29 22:03:33", "source_domain": "news.ycombinator.com", "source_name": "Hacker News", "tags": "\u5f53\u5929,day", "title": "\u591a\u90bb\u56fd\u5728\u9996\u6b21\u516c\u5f00\u52df\u80a1\u5f53\u5929\u8fbe\u5230 $6.5B \u4f30\u503c", "title_en": "Duolingo reaches $6.5B valuation on day of IPO", "transed": 1, "url": "https://www.reuters.com/technology/duolingo-valued-65-bln-shares-soar-debut-2021-07-28/", "via": "", "real_tags": ["\u5f53\u5929", "day"]}, {"category": "", "categoryclass": "", "imagename": "", "infoid": 1070273, "ip": "", "isanchordig": 1, "ischecked": 1, "isdelete": 0, "isneo": 1, "mark": "", "name": "", "note": "m4 \u662f\u4e00\u4e2a\u5b8f\u5904\u7406\u5668\uff0c\u4ece\u67d0\u79cd\u610f\u4e49\u4e0a\u8bf4\uff0c\u5b83\u5c06\u5176\u8f93\u5165\u590d\u5236\u5230\u8f93\u51fa\uff0c\u5e76\u5728\u6267\u884c\u8fc7\u7a0b\u4e2d\u6269\u5c55\u5b8f m4 \u662f\u4e00\u4e2a\u6838\u5fc3 gnu \u5b9e\u7528\u7a0b\u5e8f\uff0c\u9ed8\u8ba4\u60c5\u51b5\u4e0b\u5b89\u88c5\u5728\u5927\u591a\u6570 *nix \u7cfb\u7edf\u4e0a\u3002\u4e8b\u5b9e\u4e0a\uff0c\u6211\u9047\u5230\u7684\u6bcf\u4e00\u4e2a\u4eba\u3002\u5305\u62ec macOS\u3002\u6211\u8ba4\u4e3a\u81ea\u5df1\u662f\u4e00\u4e2a\u975e\u5e38\u4e25\u8083\u7684\u547d\u4ee4\u884c\u4e66\u5446\u5b50\uff0c\u719f\u6089 sed\u3001awk\u3001grep\u3001cut\u3001sort\u3001tr \u7b49\u3002\u4f46\u6211\u4ece\u672a\u542c\u8bf4\u8fc7\u8fd9\u4e2a\u5b8f\u5904\u7406\u5668\u3002\u5f53\u6211\u7b2c\u4e00\u6b21\u9047\u5230\u5b83\u65f6\uff0c\u5b83\u4f3c\u4e4e\u975e\u5e38\u795e\u79d8\u548c\u6666\u6da9\u3002\u6211\u4e0d\u662f 100% \u7b2c\u4e00\u6b21\u9047\u5230 m4 \u7684\u65f6\u95f4\u548c\u5730\u70b9\u3002\u5b83\u5f88\u53ef\u80fd\u51fa\u73b0\u5728 technomancy.us \u7684\u7248\u6743\u9875\u4e2d\uff0c\u4f5c\u8005\u5439\u5618\u6574\u4e2a\u7ad9\u70b9\u201c\u901a\u8fc7 GNU M4\u3001rsync \u548c 12 \u884c Makefile \u53d1\u5e03\u201d\uff0c\u8fd9\u5bf9\u6211\u8fd9\u79cd\u6781\u7b80\u4e3b\u4e49\u8005\u6765\u8bf4\u975e\u5e38\u6709\u5438\u5f15\u529b\u3002\u7136\u540e\u6211\u8bb0\u5f97\u5728\u53bb\u67d0\u4e2a\u5730\u65b9\u5ea6\u5047\u7684\u9014\u4e2d\u5728\u673a\u573a\u4f11\u606f\u5ba4\u7528\u624b\u673a\u9605\u8bfb\u4e86\u5173\u4e8e M4 \u5b8f\u8bed\u8a00\u7684\u6ce8\u91ca\uff0c\u8bd5\u56fe\u4e86\u89e3\u66f4\u591a\u5173\u4e8e\u8fd9\u4e2a\u4e00\u76f4\u5728\u6211\u773c\u76ae\u5e95\u4e0b\u7684\u795e\u79d8\u5c0f\u7a0b\u5e8f\u7684\u4fe1\u606f\u3002\u540e\u6765\u6211\u5728 github \u4e0a\u627e\u5230\u4e86 apostl\uff0c\u4e00\u4e2a m4 \u7684\u5c0f\u5305\u88c5\u5668\uff0c\u76ee\u7684\u662f\u5728\u4f60\u7684 HTML \u4e2d\u8f7b\u677e\u5305\u542b\u90e8\u5206\u3002\u8fd9\u662f\u4e00\u4e2a\u8ba9\u6211\u4ea7\u751f\u5171\u9e23\u7684\u5e94\u7528\u7a0b\u5e8f\uff1a\u4e00\u79cd\u96f6\u5f00\u9500\u3001\u65e0\u6846\u67b6\u7684 HTML \u6a21\u5757\u5316\u65b9\u5f0f\uff0c\u9002\u5408\u50cf\u6211\u8fd9\u6837\u53ea\u60f3\u7f16\u5199\u9759\u6001\u5185\u5bb9\u800c\u4e0d\u9700\u8981\u989d\u5916\u5de5\u5177\u6216\u81a8\u80c0\u7684\u4eba\u3002\u6700\u540e\uff0c\u6211\u53ef\u4ee5\u62bd\u8c61\u51fa\u6211\u7684\u9875\u7709\u3001\u9875\u811a\u548c\u5bfc\u822a\u7ec4\u4ef6\uff0c\u5e76\u5c06\u5b83\u4eec\u5305\u542b\u5728\u6211\u60f3\u8981\u7684\u4efb\u4f55\u5730\u65b9\u3002\n\u6211\u60f3\u8981\u4ece m4 \u4e2d\u5220\u9664\u4e00\u4e2a include(nav.md) \u548c\u4e00\u4e2a include(footer.md) \u5728\u6211\u7684\u964d\u4ef7\u4e2d\uff0c\u5e76\u5728\u6211\u7684\u5de5\u4f5c\u6d41\u7a0b\u4e2d\u5f15\u5165\u4e00\u70b9\u6a21\u5757\u5316\u3002\u6211\u505a\u4e86\u4e00\u5206\u949f\uff0c\u8fd9\u5f88\u68d2\u3002\u6211\u5728 Markdown \u4e2d\u5d4c\u5165\u4e86\u53ef\u6269\u5c55\u7684\u5b8f\u3002\u6211\u53ef\u4ee5\u901a\u8fc7 m4 \u7ba1\u9053\u6bcf\u4e2a\u964d\u4ef7\u6587\u4ef6\u6765\u6269\u5c55\u5b83\uff0c\u7136\u540e\u901a\u8fc7 pandoc \u7ba1\u9053\u7ec4\u88c5\u964d\u4ef7\u4ee5\u521b\u5efa\u4e00\u4e2a HTML \u9875\u9762\u3002\u9664\u4e86\uff0c\u6211\u5fcd\u4e0d\u4f4f\u89c9\u5f97\u5b83\u53ef\u4ee5\u66f4\u597d\u3002\u6211\u4ecd\u7136\u624b\u5de5\u505a\u5f88\u591a\u4e8b\u60c5\uff0c\u6bd4\u5982\u66f4\u65b0\u6211\u535a\u5ba2\u7684\u201c\u6240\u6709\u5e16\u5b50\u201d\u9875\u9762\u3002\u6211\u5077\u5077\u5730\u6000\u7591\uff0c\u5982\u679c\u6211\u53ea\u80fd\u5b8c\u5168\u638c\u63e1\u8fd9\u4e9b\u5b8f\u7684\u6f5c\u529b\uff0c\u4e8b\u60c5\u5c31\u4f1a\u53d8\u5f97\u66f4\u52a0\u7a0b\u5e8f\u5316\u3002\u5168\u9762\u91c7\u7528\u7684\u50ac\u5316\u5242\uff0c\u6df1\u5165\u6316\u6398 m4 \u7684\u6f5c\u529b\uff0c\u6765\u81ea\u6211\u4ece\u672a\u60f3\u8fc7\u4f1a\u770b\u5230\u7684\u4e1c\u897f\u3002\u6211\u5f00\u59cb\u5c1d\u8bd5\u5728\u6211\u7684\u65b0\u677e\u6811\u4e0a\u5199\u535a\u5ba2\u3002\u8fd9\u4e2a arm64 \u7cfb\u7edf\u4e0d\u4ec5\u6ca1\u6709\u5b89\u88c5 pandoc\uff0c\u800c\u4e14 pandoc \u751a\u81f3\u4e0d\u5728\u8f6f\u4ef6\u5b58\u50a8\u5e93\u4e2d\u3002\u6211\u8003\u8651\u8fc7\u81ea\u5df1\u7f16\u8bd1\u5b83\uff0c\u4f46\u662f\u5b83\u6240\u7528\u7684\u8bed\u8a00 Haskel \u751a\u81f3\u4e0d\u80fd\u5728 arm64 \u4e0a\u7f16\u8bd1\u3002\u6211\u4ee5\u4e3a\u6211\u6c38\u8fdc\u4e0d\u4f1a\u770b\u5230\u7684\u662f\u4e00\u53f0\u6ca1\u6709 pandoc \u7684\u8ba1\u7b97\u673a\u3002\u6240\u4ee5\u6211\u5f00\u59cb\u4e86\u4ece\u6211\u7684\u535a\u5ba2\u4e2d\u5220\u9664\u6240\u6709 markdown \u7684\u9053\u8def\uff0c\u8ba9\u81ea\u5df1\u8f9e\u53bb\u7f16\u5199 HTML \u7684\u5de5\u4f5c\u3002\u6211\u6700\u7ec8\u63a8\u7ffb\u4e86\u8fd9\u4e2a\u51b3\u5b9a\uff0c\u56e0\u4e3a\u6211\u975e\u5e38\u8ba8\u538c\u7f16\u5199 HTML\uff0c\u7136\u540e\u53c8\u56de\u5230\u7f16\u5199 Markdown \u5e76\u7b80\u5355\u5730\u4f7f\u7528\u4e00\u4e2a\u4e0d\u662f pandoc \u7684 Markdown \u5230 HTML \u8f6c\u6362\u5668\u3002\nPandoc \u53ea\u662f\u5c06 Markdown \u8f6c\u6362\u4e3a HTML \u5b9e\u5728\u662f\u592a\u8fc7\u5206\u4e86\u3002\u6211\u4e0d\u9700\u8981\u745e\u58eb\u519b\u5200\u3002\u6211\u9700\u8981\u4e00\u628a\u9ec4\u6cb9\u5200\u3002\u4f46\u662f\u5728\u5220\u9664 Markdown \u548c\u5c06\u5176\u653e\u56de\u4e4b\u95f4\uff0c\u6211\u82b1\u4e86\u4e00\u4e2a\u4e0b\u5348\u7684\u65f6\u95f4\u67e5\u770b Technomancy \u7684 makefile \u548c m4 \u6587\u6863\uff0c\u5e76\u4e14\u771f\u6b63\u5f00\u59cb\u7406\u89e3\u3002\u5173\u4e8e\u4e22\u5931 pandoc\uff0c\u6211\u771f\u6b63\u9519\u8fc7\u7684\u7b2c\u4e00\u4ef6\u4e8b\u662f\u5728 YAML frontmatter \u4e2d\u8bbe\u7f6e\u5143\u6570\u636e\u3002\u7136\u540e\u5185\u5bb9\u88ab\u5939\u5728\u6211\u7b2c\u4e00\u6b21\u7231\u4e0a\u7684\u5305\u542b\u4e4b\u95f4\uff1a \u5982\u6b64\u6709\u6548\u7684\u539f\u56e0\u662f\u2014\u2014\u6211\u4ece\u6ca1\u60f3\u8fc7\u6211\u4f1a\u542c\u5230\u81ea\u5df1\u8fd9\u4e48\u8bf4\u2014\u2014\u56e0\u4e3a\u5168\u5c40\u72b6\u6001\u7684\u7f8e\u4e3d\uff01\u5982\u679c\u60a8\u4ece\u6587\u6863 A \u4e2d\u5305\u542b\u6587\u6863 B\uff0c\u5219\u60a8\u5728\u6587\u6863 A \u4e2d\u5b9a\u4e49\u7684\u4efb\u4f55\u5b8f\u90fd\u53ef\u7528\u4e8e\u6587\u6863 B\u3002\u56e0\u6b64\uff0c\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u6807\u9898\u3001\u526f\u6807\u9898\u7b49\u53ef\u7528\u4e8e header.html\u3002\u6211\u53ef\u4ee5\u5728\u5934\u90e8\u8bbe\u7f6e &lt;title&gt; \u5e76\u5728\u6b63\u6587\u4e2d\u653e\u7f6e &lt;h1&gt; \uff0c\u5c31\u50cf pandoc \u90a3\u6837\u3002\n\u6700\u540e\uff0c\u6211\u5b66\u4f1a\u4e86\u66f4\u6539\u9ed8\u8ba4\u7684\u5f15\u53f7\u5b57\u7b26\u4e32\u3002\u56e0\u4e3a\u5728\u7f16\u5199\u5145\u6ee1\u4ee3\u7801\u5757\u7684 markdown \u65f6\uff0c\u8ba9 m4 \u6bcf\u6b21\u9047\u5230\u53cd\u5f15\u53f7\u65f6\u90fd\u8bd5\u56fe\u8f6c\u4e49\u5b57\u7b26\u4e32\u662f\u884c\u4e0d\u901a\u7684\u3002 define(__timestamp, 2020-06-17)dnldefine(__title, `m4&#39;)dnldefine(__subtitle, `\u4e00\u79cd\u771f\u6b63\u7684\u6a21\u677f\u8bed\u8a00&#39;)dnldefine(__id, 9)dnlinclude(src/header.html)changequote(&lt;!,! &gt;)dnl \u5426\u5219`\u4ee3\u7801\u5757`\u6df7\u6dc6 m4markdown markdown markdown markdown changequote`&#39;dnl \u66f4\u6539\u5f15\u53f7`\u8fd4\u56de\u9ed8\u8ba4\u503c&#39;include(src/footer.html) \u73b0\u5728\u6211\u76f4\u63a5\u4ece Technomancy \u4e2d\u63d0\u53d6\u4e86\u4e24\u4ef6\u4e8b\uff1a\u586b\u5145\u201c\u6240\u6709\u5e16\u5b50\u201d\u5217\u8868\uff0c\u5e76\u81ea\u52a8\u586b\u5145 RSS \u63d0\u8981\u3002\u4ee5\u4e0b\u662f\u5982\u4f55\u5728 m4 \u4e2d\u5b9e\u73b0\u201c\u5012\u8ba1\u65f6\u201dfor \u5faa\u73af\uff0c\u76f4\u63a5\u6765\u81ea M4 \u5b8f\u8bed\u8a00\u7684\u6ce8\u91ca\uff0c\u7a0d\u4f5c\u4fee\u6539\uff1a\u7c97\u7565\uff0c\u5bf9\u5427\uff1f m4 \u975e\u5e38\u9002\u5408\u5b8f\u548c\u5305\u542b\u3002\u5bf9\u4e8e\u4e00\u822c\u7f16\u7a0b\u6765\u8bf4\u4e0d\u662f\u8d85\u7ea7\u6709\u8da3\u3002\u4f46\u662f\uff0c\u5c31\u50cf\u79fb\u6c11\u4e00\u6837\uff0c\u5b83\u53ef\u4ee5\u5b8c\u6210\u5de5\u4f5c\u3002\u6240\u4ee5\u73b0\u5728\u201c\u6240\u6709\u5e16\u5b50\u201d\u548c rss.xml \u90fd\u53ef\u4ee5\uff0c\u901a\u8fc7\u5728 Makefile \u4e2d\u5b9a\u4e49\u4e00\u4e2a\u201cLATEST\u201d\u53d8\u91cf\uff08\u5b83\u544a\u8bc9\u5b8f\u603b\u5171\u6709\u591a\u5c11\u6587\u4ef6\uff09\uff0c\u904d\u5386\u6240\u6709\u6587\u4ef6\u5e76\u52a0\u8f7d\u5b83\u4eec\uff0c\u8f6c\u79fb\u5b83\u4eec\u7684\u8f93\u51fa\u5230\u4e00\u6b21\u6027\u5bc4\u5b58\u5668\uff0c\u4f46\u4fdd\u7559\u5b83\u4eec\u7684\u5b8f\u5b9a\u4e49\u3002\u56e0\u6b64\uff0c\u4f8b\u5982\uff0c\u53ef\u4ee5\u4ece\u6bcf\u4e2a\u5e16\u5b50\u4e2d\u63d0\u53d6\u6807\u9898\u548c\u65f6\u95f4\u6233\uff0c\u5e76\u5c06\u5b83\u4eec\u5410\u51fa\u5230\u6240\u6709\u5e16\u5b50\u7684\u5217\u8868\u4e2d\u3002\u50cf\u8fd9\u6837\u3002\u6211\u4ece Technomancy \u501f\u6765\u7684\u6700\u540e\u4e00\u70b9\u806a\u660e\u662f\u4f7f\u7528 header.html \u548c footer.html\uff0c\u6839\u636e Makefile \u4f20\u5165\u7684\u201c__feed\u201d\u5b8f\u7684\u524d\u7f6e\uff0c\u5c06\u5e16\u5b50\u5305\u88c5\u5728\u535a\u5ba2\u7684 HTML \u6587\u6863\u4e2d\uff0c\u6216\u8005\u63d0\u8981\u7684 XML \u6587\u6863\u3002\u50cf\u8fd9\u6837\u3002\n\u4f46\u662f\u5f53\u4f60\u9700\u8981\u5b9e\u73b0\u4e00\u4e2a for \u5faa\u73af\u6216\u8005\u505a\u5f88\u591a\u7a0b\u5e8f\u5316\u7684\u4e8b\u60c5\u65f6\uff0c\u5b83\u5f88\u5feb\u5c31\u4f1a\u53d8\u5f97\u975e\u5e38\u7b28\u62d9\u3002\u5f88\u96be\u8c03\u8bd5\u3002\u6211\u5f88\u5feb\u53d1\u73b0\uff0c\u9047\u5230\u610f\u5916\u60c5\u51b5\u65f6\uff0c\u6211\u7684\u9ed8\u8ba4\u884c\u4e3a\u5c31\u662f\u589e\u52a0\u4e00\u4e9b\u4e1c\u897f\u5468\u56f4\u7684\u8f6c\u4e49\u5f15\u53f7\u3002\u8fd9\u7ecf\u5e38\u4fee\u590d\u5b83\u3002\u4e5f\u5c31\u662f\u8bf4\uff0c\u5b83\u662f\u4e00\u79cd\u6709\u8da3\u7684\u8bed\u8a00\uff0c\u6211\u53d1\u73b0\u5b66\u4e60\u548c\u4f7f\u7528\u5b83\u662f\u6709\u76ca\u7684\uff0c\u5982\u679c\u6709\u673a\u4f1a\uff0c\u6211\u53ef\u80fd\u4f1a\u518d\u6b21\u4f7f\u7528\u5b83\u3002\u6211\u5bf9\u8fd9\u4e2a\u535a\u5ba2\u7684\u5f53\u524d\u5199\u4f5c\u72b6\u6001\u975e\u5e38\u6ee1\u610f\u3002\u6211\u89c9\u5f97\u6211 90% \u7684\u65b9\u5f0f\u8fbe\u5230\u4e86\u6211\u6700\u521d\u7684\u201c\u5e26\u6709\u5305\u542b\u7684\u7b80\u5355\u964d\u4ef7\u201d\u7684\u613f\u666f\uff0c\u800c\u989d\u5916\u7684 m4 \u5e76\u6ca1\u6709\u771f\u6b63\u6253\u6270\u6211\u3002\u5b83\u4ecd\u7136\u975e\u5e38\u5e72\u51c0\uff0c\u51e0\u4e4e\u6240\u6709\u7684\u590d\u6742\u6027\u548c\u4e11\u964b\u7684\u4e1c\u897f\u90fd\u4ece\u6211\u5199\u5165\u8f85\u52a9\u6587\u4ef6\u7684\u5730\u65b9\u79fb\u5f00\u4e86\u3002", "note_en": "m4 is a macro processor, in the sense that it copies its input to the output, expanding macros as it goes\n m4 is a core gnu utility, and is installed by default on most *nix systems. Every one that I\u2019ve encountered, in fact. Including macOS.\n I consider myself a pretty serious command line nerd and am familiar with  sed,  awk,  grep,  cut,  sort,  tr, etc. But I had never heard of this macro processor. It seemed very mysterious and obscure when I first encountered it.\n  I\u2019m not 100% when and where I first encountered m4. It very well may have been in the  colophon of technomancy.us where the author boasts that the entire site is \u201cpublished via GNU M4, rsync, and a 12-line Makefile,\u201d which was super attractive to the minimalist in me.\n I then remember reading   Notes on the M4 Macro Language on my phone in the airport lounge on my way off to vacation somewhere, trying to learn more about this mysterious little program that has been under my nose this whole time.\n Later I found  apostl on github, a tiny wrapper for m4 with the goal of easily including partials in your HTML. This was an application that resonated with me: a zero overhead, framework-free way of modularizing HTML for people like me who just want to write static content with no extra tools or bloat.\n Finally I can abstract out my header, footer, and nav components, and include them where ever I want.\n  What I wanted from m4 was to be able to drop an  include(nav.md) and an  include(footer.md) in my markdown and introduce a little bit of modularity into my workflow.\n I did this for a hot minute, and it was great. I had expandable macros embedded in my markdown. I could pipe each markdown file through m4 to expand it, and then pipe the assembled markdown through pandoc to create an HTML page.\n  Except, I couldn\u2019t help the feeling that it could be  better. I was still doing a lot of things by hand like updating the \u201call posts\u201d page of my blog. And I had the sneaking suspicion that things could get a lot more  programmatic if I could only fully grasp the potential of these macros.\n    The catalyst for full adoption, for a deep dive into the potential of m4, came from something I never thought I\u2019d ever see.\n I started trying to blog on my new  pinebook. This arm64 system not only didn\u2019t have pandoc installed, but pandoc wasn\u2019t even in the software repository. I considered compiling it myself, but the language it is written in, Haskel, doesn\u2019t even compile on arm64.\n The thing I thought I\u2019d never see is a computer with no pandoc.\n So I started down the path of removing all markdown from my blog, resigning myself to writing HTML. And I eventually reversed that decision because I hate writing HTML that much, and went back to writing markdown again and simply using a markdown to HTML converter that isn\u2019t pandoc.\n Pandoc is honestly overkill for just converting markdown to HTML. I don\u2019t need a swiss army knife. I need a butter knife.\n But between removing markdown and putting it back, I spent an afternoon with Technomancy\u2019s makefile and m4 docs, and really started to understand.\n  The first thing I really missed about losing pandoc was setting metadata in the YAML frontmatter.\n   Then the content gets sandwiched between the includes that I first fell in love with:\n  And the reason that works so well is\u2013and I never thought I\u2019d ever hear myself say this\u2013because of the beauty of global state!\n Any macro you define in Document A is available to Document B if you include Document B from Document A.\n So the title, subtitle, etc is available to header.html in this case. Where I can set  &lt;title&gt; in the head and drop an  &lt;h1&gt; in the body, much like pandoc did.\n Finally, I learned to change the default quote strings. Because when writing markdown full of  code blocks, it simply does not do to have m4 trying to escape a string every time it encounters a backtick.\n  define(__timestamp, 2020-06-17)dnldefine(__title, `m4&#39;)dnldefine(__subtitle, `the one true templating language&#39;)dnldefine(__id, 9)dnlinclude(src/header.html)changequote(&lt;!,!&gt;)dnl Or else `code blocks` confuse m4markdown markdown markdown markdown changequote`&#39;dnl change quotes `back to default&#39;include(src/footer.html)\n Now here are two things I lifted straight from Technomancy: populating the \u201cAll posts\u201d list, and auto-populating the rss feed.\n Here\u2019s how to implement a \u201ccountdown\u201d for loop in m4, straight from  Notes on the M4 Macro Language with minor modifications:\n  Gross, right? m4 is great for macros and includes. Not super fun for general programming. But, like immigrants, it gets the job done.\n So now \u201call posts\u201d and rss.xml can both, with the introduction of one \u201cLATEST\u201d variable defined in the Makefile (which tells the macros how many files there are in total), iterate over all the files and load them, diverting their output to a throwaway register but retaining their macro definitions. So it\u2019s possible to yank the title and timestamp from each post, for example, and spit them out into the list of all posts.  Like so.\n The final bit of cleverness that I borrowed from Technomancy was to have header.html and footer.html either, depending on the precense of a &#34;__feed&#34; macro passed in by the Makefile, wrap the post up in an HTML document for the blog or an XML document for the feed.  Like so.\n   But it quickly becomes super unwieldly when you need, say, to implement a for loop or do much of anything programmatic at all.\n It is difficult to debug. I quickly found my default behavior when encountering something unexpected is to just increase the escape quotes around something. That often fixed it.\n That said, it is an interesting language, and I found it rewarding to learn and work with, and I\u2019ll probably reach for it again if I have the opportunity to.\n I\u2019m perfectly happy with the current state of writing for this blog. I feel like I\u2019m 90% of the way there to my original vision of \u201cplain markdown with includes,\u201d and the additional m4 doesn\u2019t really bother me in the slightest. It\u2019s still really clean, with almost all of the complexity and ugly stuff moved away from where I write into auxiliary files.", "posttime": "2021-07-29 22:03:11", "source_domain": "news.ycombinator.com", "source_name": "Hacker News", "tags": "2020,m4,macro", "title": "M4 \u5b8f\u5904\u7406\u5668\uff082020\uff09", "title_en": "M4 macro processor (2020)", "transed": 1, "url": "https://chrisman.github.io/9.html", "via": "", "real_tags": ["2020", "m4", "macro"]}, {"category": "", "categoryclass": "", "imagename": "7f2f20740a8efafe21216c64c4081f20.png", "infoid": 1070272, "ip": "", "isanchordig": 1, "ischecked": 1, "isdelete": 0, "isneo": 1, "mark": "", "name": "", "note": "\u6211\u4e0d\u77e5\u4f55\u6545\u5bf9\u97f3\u9891\u5236\u4f5c\u611f\u5174\u8da3\uff0c\u4f46\u53ea\u662f\u4f5c\u4e3a\u6211\u7684\u7231\u597d\u3002\u6211\u7684\u4e3b\u8981\u5de5\u4f5c\u662f\u9886\u5bfc\u7814\u7a76\u8bbe\u65bd\u7684\u63a7\u5236\u7cfb\u7edf\u5b89\u88c5\u3002\u6240\u4ee5\u8fd9\u610f\u5473\u7740\u6211\u901a\u5e38\u4e0d\u60f3\u5728\u8bbe\u5907\u4e0a\u82b1\u5927\u94b1\u3002\u73b0\u5728\u6b63\u662f\u4ee5\u5408\u7406\u7684\u4ef7\u683c\u8d2d\u4e70\u4e00\u4e9b\u8001\u5f0f\u65e0\u7ebf\u97f3\u9891\u8bbe\u5907\u7684\u597d\u65f6\u673a\u3002\u539f\u56e0\u662f\u65e0\u7ebf\u9891\u6bb5\u53d1\u751f\u4e86\u53d8\u5316\uff08\u4fe1\u606f\uff09\uff0c\u4e4b\u524d\u514d\u8d39\u7684\u9891\u6bb5\u4e0d\u9002\u7528\u4e8e\u4e13\u4e1a\u97f3\u9891\u8bbe\u5907\u3002\u8fd9\u610f\u5473\u7740\u8bb8\u591a\u5236\u4f5c\u6b63\u5728\u653e\u5f03\u4ed6\u4eec\u7684\u4e1c\u897f\u6765\u8d2d\u4e70\u65b0\u7684\uff0c\u517c\u5bb9\u7684\u3002\u4f46\u5e76\u975e\u6240\u6709\u65e7\u4e1c\u897f\u90fd\u65e0\u7528\uff0c\u56e0\u4e3a\u5176\u4e2d\u4e00\u4e9b\u53ef\u4ee5\u91cd\u65b0\u7f16\u7a0b\u3002\u56e0\u4e3a\u5728\u6b27\u76df\u6709\u4ece 822 \u5230 830 Mhz \u7684\u7d27\u90bb\u7a97\u53e3\u3002\u8fd9\u4e2a\u7a97\u53e3\u5f88\u7a84\uff0c\u4f46\u81f3\u5c11\u5b83\u4e00\u76f4\u662f\u7a7a\u95f2\u7684\u3002\u53e6\u4e00\u4e2a\u9009\u62e9\u662f\u4f4e\u4e8e 700Mhz\uff0c\u4f46\u662f\u60a8\u53ef\u80fd\u4f1a\u4e0e\u672c\u200b\u200b\u5730\u7535\u89c6\u53d1\u5c04\u673a\u53d1\u751f\u51b2\u7a81\u3002\u6240\u4ee5\u6211\u9009\u62e9\u4e86\u7a84\u5e26\uff0c\u56e0\u4e3a\u6211\u4e0d\u6253\u7b97\u4e00\u6b21\u4f7f\u7528\u592a\u591a\u7684\u53d1\u5c04\u5668\u3002\u6211\u7684\u7535\u5f71\u5236\u4f5c\u8bbe\u5907\u5f88\u957f\u4e00\u6bb5\u65f6\u95f4\u90fd\u6ca1\u6709\u65e0\u7ebf\u9886\u5939\u5f0f\u8033\u673a\uff0c\u6240\u4ee5\u7ecf\u8fc7\u4e00\u756a\u63a2\u7d22\uff0c\u6211\u9009\u62e9\u4e86\u5e26\u6709\u63a5\u6536\u5668 EK3041/EK3241 \u548c\u53d1\u5c04\u5668 SK 50 \u7684\u8001\u5f0f\u68ee\u6d77\u585e\u5c14 profi \u7cfb\u5217\u3002\u8bbe\u6cd5\u4ee5\u672c\u6765\u53ef\u4ee5\u4e70\u5230\u68ee\u6d77\u585e\u5c14 G3 \u7cfb\u5217\u7684\u4ef7\u683c\u4e70\u5230\u4e86\u51e0\u4e2a\u3002\u8fd9\u662fSennheiser\u6700\u57fa\u672c\u7684\u3002\u8fd9\u4e9b\u5df2\u7ecf\u5728\u6279\u51c6\u7684\u9891\u6bb5\u4e2d\uff0c\u6240\u4ee5\u4e0d\u7528\u62c5\u5fc3\u3002\u4f46\u6211\u4e5f\u4e70\u4e86\u975e\u5e38\u597d\u7684 SKM 3072-U \u65e0\u7ebf\u624b\u6301\u8bbe\u5907\u3002 SKM 3072-U \u5df2\u58f0\u660e\u5e26\u5bbd\u4e3a 798-830Mhz\u3002\u8fd9\u5c31\u662f\u786c\u4ef6\u53ef\u4ee5\u63d0\u4f9b\u7684\u5e26\u5bbd\uff0c\u65e0\u9700\u4efb\u4f55\u66f4\u6539\u3002\u6240\u4ee5\u6211\u671f\u5f85\u4ece\u81ea\u7531\u4e50\u961f\u4e2d\u6311\u9009\u6211\u9700\u8981\u7684 rigth Mhz \u4e0d\u4f1a\u6210\u4e3a\u95ee\u9898\u3002\u6211\u51e0\u4e4e\u4e0d\u77e5\u9053\uff0c\u9ea6\u514b\u98ce\u5df2\u7ecf\u5728\u9ea6\u514b\u98ce\u9891\u6bb5\u5185\u9884\u7f16\u7a0b\u4e86\u4e00\u7ec4\u9891\u7387\u3002\u6240\u6709\u8fd9\u4e9b\u90fd\u5728\u6211\u60f3\u8981\u7684\u5dee\u8ddd\u4e4b\u5916\u3002\u7528\u6237\u4e0d\u80fd\u66f4\u6539\u8fd9\u4e9b\u9891\u7387\u3002 ebay \u4e0a\u6709\u4e00\u4e2a\u4eba\u5728\u505a\u91cd\u65b0\u7f16\u7a0b\uff0c\u4f46\u8981 119 \u6b27\u5143\uff01\u8fd9\u5bf9\u4e8e\u5c06\u4e00\u4e9b\u7535\u7f06\u63d2\u5165\u9ea6\u514b\u98ce\u975e\u5e38\u91cd\u8981\u3002\u6211\u4ec0\u81f3\u8bd5\u56fe\u5411\u90a3\u5bb6\u4f19\u63d0\u51fa\u66f4\u4fbf\u5b9c\u7684\u4ef7\u683c\uff0c\u4f46\u88ab\u62d2\u7edd\u4e86\u3002\u65e0\u8bba\u5982\u4f55\uff0c\u6211\u5f88\u597d\u5947\u662f\u5426\u53ef\u4ee5\u81ea\u5df1\u505a\u3002\u5982\u679c\u5b83\u4e0d\u4f1a\u592a\u590d\u6742\uff0c\u6211\u53ef\u80fd\u4f1a\u5f00\u59cb\u81ea\u5df1\u51fa\u552e\u91cd\u65b0\u7f16\u7a0b\u670d\u52a1......\u4ee5\u66f4\u5c11\u7684\u4ef7\u683c\uff08\u6076\u9b54\u822c\u7684\u7b11\u58f0\uff09\u3002\u5f88\u660e\u663e\uff0c\u9876\u90e8\u662f AF \u677f\uff0c\u8fd9\u5bf9\u76ee\u7684\u6765\u8bf4\u6ca1\u4ec0\u4e48\u610f\u601d\uff0c\u4f46\u4e0b\u9762\u662f LCD\u3001HF\u3001CPU \u548c\u5e26\u6709 6 \u4e2a\u89e6\u70b9\u7684\u63d2\u5ea7\u8fde\u63a5\u5668\uff01\u8fd9\u770b\u8d77\u6765\u5f88\u6709\u5e0c\u671b\uff0c\u56e0\u4e3a\u8fd9\u7edd\u5bf9\u662f\u7528\u4e8e\u91cd\u65b0\u7f16\u7a0b\u7684 IF\u3002\u8fd9\u4e2a\u60f3\u6cd5\u662f\uff0c\u901a\u8fc7\u8fde\u63a5\u5230\u67d0\u79cd UART\uff0c\u6211\u53ef\u80fd\u80fd\u591f\u6539\u53d8\u9891\u7387\u3002\u6211\u68c0\u67e5\u4e86\u8d34\u7eb8\u4e0b\u7684 CPU \u7c7b\u578b\u53ca\u5176 PIC16C73A\u3002\u6570\u636e\u8868\u5f88\u5927\u4f46\u53ef\u7528\u3002\u5b83\u7684 UART \u786e\u5b9e\u8fde\u63a5\u5230 J1 \u8fde\u63a5\u5668\u4e0a\u7684\u5f15\u811a\u3002\u6211\u8bd5\u56fe\u5c06\u6211\u7684 USB \u8fde\u63a5\u5230 UART \u677f\u3002\u55ef\uff0c\u4ec0\u4e48\u90fd\u6ca1\u53d1\u751f\u3002\u6211\u505a\u4e86\u4e00\u4e9b\u66f4\u591a\u7684\u6d4b\u8bd5\uff0c\u770b\u770b\u6211\u662f\u5426\u80fd\u591f\u8ba9\u5b83\u8bf4\u8bdd\u3002\u5c31\u50cf\u5728\u901a\u7535\u65f6\u6309\u4e0b\u4e00\u4e9b\u6309\u94ae\uff0c\u6709\u65f6\u53ef\u4ee5\u4f7f\u67d0\u4e9b\u8bbe\u5907\u8fdb\u5165\u670d\u52a1\u6a21\u5f0f\u3002\u81f3\u5c11\u8fd9\u662f\u6211\u4ece\u7ecf\u5e38\u4f7f\u7528\u5b83\u7684\u5d4c\u5165\u5f0f\u5f00\u53d1\u8005\u90a3\u91cc\u5b66\u5230\u7684\u6280\u5de7\u3002\u901a\u5e38\u662f\u4e00\u4e9b\u5947\u602a\u7684\u6309\u94ae\u7ec4\u5408\u4ee5\u5947\u602a\u7684\u987a\u5e8f\u6309\u4e0b/\u4fdd\u6301\u3002\u4f46\u4ecd\u7136\u6ca1\u6709\u4efb\u4f55\u6210\u529f\u3002\u7ecf\u8fc7\u4e00\u4e9b\u6ca1\u6709\u7ed3\u679c\u7684\u5c1d\u8bd5\u540e\uff0c\u6211\u6709\u70b9\u7edd\u671b\uff0c\u4f46\u53ef\u4ee5\u5e2e\u52a9\u6211\u7684\u662f\u670d\u52a1\u624b\u518c\u3002\n\u5e76\u4e14\u56e0\u4e3a\u5b83\u53ea\u4e3a5 usd\u3002\u6211\u8f9e\u804c\u4e86\u3002\u786e\u5b9e\u5b83\u5145\u6ee1\u4e86\u8fd9\u4e48\u591a\u6709\u8da3\u7684\u4fe1\u606f\u3002 J1 \u771f\u6b63\u7528\u4e8e\u8bbe\u7f6e\u9891\u7387\u3002\u9891\u7387\u5b58\u50a8\u5728 EEPROM ST24C04M1 \u4e2d\uff0c\u5b83\u901a\u8fc7 I2C \u4e0e CPU \u901a\u4fe1\u3002\u8981\u5bf9\u5176\u8fdb\u884c\u7f16\u7a0b\uff0c\u60a8\u5fc5\u987b\u4f7f\u7528\u5e26\u6709 9V bat \u8fde\u63a5\u5668\u7684 sennheiser \u63d2\u5934\u4f9b\u7535\uff0c\u7136\u540e\u518d\u4f7f\u7528\u53e6\u4e00\u4e2a\u63d2\u5934\u5c06 UART \u8fde\u63a5\u5230\u88c5\u6709 Win 3.1 \u6216\u66f4\u9ad8\u7248\u672c\u7684 PC\uff08\u8fd9\u5e94\u8be5\u4e0d\u662f\u95ee\u9898\uff09\u3002\u4f46\u6211\u6ca1\u6709\u7684\u662f\u6240\u6709\u8fd9\u4e9b\u9002\u914d\u5668\uff0c\u4e3b\u8981\u662f SePT.EXE\u3002\u77e5\u9053\u6ce2\u7279\u7387\u4ee5\u53ca\u5982\u4f55\u4e0eCPU\u4ea4\u8c08\u3002\u6216\u8005\u8ba9 CPU \u8bf4\u8bdd\u3002\u5982\u60a8\u6240\u89c1\uff0c\u8fd8\u6709 /RST \u548c WP \u5f15\u811a\u3002 /RST \u5e94\u8be5\u662f CPU \u7684\u590d\u4f4d\u5f15\u811a\uff0c\u56e0\u4e3a\u5b83\u8fde\u63a5\u5230 MCLR \u5f15\u811a\u3002 WP \u662f EEPROM \u7684 WriteProtect\uff0c\u901a\u5e38\u88ab\u62c9\u9ad8\uff0c\u5fc5\u987b\u63a5\u5730\u624d\u80fd\u5199\u5165\u5185\u5b58\u3002\u670d\u52a1\u624b\u518c\u6709\u5f88\u591a\u4fe1\u606f\uff0c\u4f46\u9057\u61be\u7684\u662f\u6ca1\u6709\u5173\u4e8e UART \u672c\u8eab\u7684\u4fe1\u606f\uff0c\u56e0\u4e3a\u8fd9\u662f\u7531 SePT.EXE \u5e94\u7528\u7a0b\u5e8f\u5904\u7406\u7684\u3002\u5982\u679c\u6ca1\u6709\u5173\u4e8e\u5982\u4f55\u5f00\u59cb\u4e0e CPU \u901a\u4fe1\u7684\u4efb\u4f55\u7ec6\u8282\uff0c\u6211\u7684\u60f3\u6cd5\u5c31\u6ca1\u6709\u4e86\u3002\u4f46\u662f\uff0c\u975e\u5e38\u6709\u8da3\u7684\u662f\uff0c\u5f53\u9ea6\u514b\u98ce\u542f\u52a8\u65f6\uff0c\u5b83\u4f1a\u4ece EEPROM \u52a0\u8f7d\u9891\u7387\u3002\u8fd9\u610f\u5473\u7740\u5982\u679c\u6211\u80fd\u591f\u8bfb\u53d6\u7136\u540e\u4fee\u6539 EEPROM\uff0c\u6211\u53ef\u4ee5\u66f4\u6539\u9891\u7387\u3002\u6b63\u786e\u7684\u65b9\u6cd5\u662f\u7531 CPU \u901a\u8fc7 UART\u3002\u4f46\u662f\u7531\u4e8e CPU \u4e0d\u5408\u4f5c\uff0c\u6211\u53ef\u4ee5\u5c1d\u8bd5\u76f4\u63a5\u8fde\u63a5\u5230 I2C \u5e76\u67e5\u770b\u4e8b\u60c5\u5982\u4f55\u5de5\u4f5c\uff0c\u751a\u81f3\u5c1d\u8bd5\u8f6c\u50a8 EEPROM \u5e76\u5bf9\u5176\u8fdb\u884c\u4fee\u6539\u3002\u552f\u4e00\u7684\u95ee\u9898\u662f\uff0c\u6211\u5bf9 EEPROM\u3001uCPU\u3001I2C \u7b49\u77e5\u4e4b\u751a\u5c11\uff0c\u4e0d\u662f\u771f\u7684\uff0c\u90a3\u662f\u4e50\u8da3\u7684\u4e00\u90e8\u5206\u3002\u6240\u4ee5\u7b2c\u4e8c\u5929\u6211\u501f\u7528\u4e86\u8fd9\u4e2a\u6f02\u4eae\u7684\u903b\u8f91\u5206\u6790\u4eea\uff0c\u7136\u540e\u5c06\u5b83\u8fde\u63a5\u5230 EEPROM \u5f15\u811a\u5e76\u8bb0\u5f55\u901a\u4fe1\u3002\u4e0b\u9762\u662f\u9ea6\u514b\u98ce\u901a\u7535\u540e\u7684\u901a\u8baf\u3002\n\u52300x3E\u7684ACK\u6570\u636e\u5199\u5165\uff1a\u53d60xE0 0xC8 0XF0 0\u00d700 0\u00d700 0\u00d700 0\u00d700 0\u00d700 0\u00d700 0\u00d700 0\u00d700 0\u00d700\u5199\u51650x3E\u7684ACK\u6570\u636e\uff1a\u53d60xE0 0\u00d700 0\u00d700 0\u00d700 0\u00d700 0\u00d700 0\u00d700 0\u00d700 0\u00d700 0\u00d700 0\u00d700 0\u00d700\u5199\u51650x3E\u7684ACK\u6570\u636e\uff1a\u53d60xE0 0\u00d700 0\u00d700 0\u00d700 0\u00d700 0\u00d700 0x9F\u4e3a0x00 0\u00d700 0\u00d700 0\u00d700 0\u00d700\u5199\u51650x3E\u7684ACK\u6570\u636e\uff1a\u53d60xE0\u4e3a0x00 0XF0 0\u00d700 0\u00d700 0\u00d700 0xFB\u7684\u624d\u80fd0\u00d700 0\u00d700 0\u00d700 0\u00d700 0\u00d790\u5199\u51650x3E\u7684ACK\u6570\u636e\uff1a\u53d60xE0\u4e3a0x00\u4e3a0xBF 0\u00d700 0\u00d709 0\u00d700 0x9A\u6267\u884c0\u00d700 0\u00d700 0\u00d700 0\u00d700 0XF0\u5199\u51650x3E\u7684ACK\u6570\u636e\uff1a\u53d60xE0 0\u00d700\u662f0xAB\u4e3a0x00 0x0F 0x00 0xBD 0x0F 0x00 0x00 0x00 0x99 \u5199\u5165 0x3E \u786e\u8ba4\u6570\u636e\uff1a 0xE0 0x00 0xDA 0x00 0x09 0x00 0x00 0x9B 0xF0 0x0x0x0x\n\u5199\u51650x3E\u7684ACK\u6570\u636e\uff1a\u53d60xE0\u4e3a0x00 0X0D\u4e3a0x00 0x9B\u4e3a0x00 0x7B 0xFA\u56de\u5e94\u4e3a0xBF 0\u00d700 0\u00d700 0\u00d709\u5199\u51650x3E\u7684ACK\u6570\u636e\uff1a\u53d60xE0\u4e3a0x00 0XF0 0\u00d700 0\u00d700 0\u00d700 0xEF 0x0B\u4e2d0\u00d700 0\u00d700 0\u00d700\u503c\u4e3a0x2F\u5199\u51650x3E\u7684ACK\u6570\u636e\uff1a\u53d60xE0\u4e3a0x00 0xBA\u4e3a0xFF 0x99\u4e3a0x00 0xFB\u7684\u624d\u80fd0xDF 0xFA\u56de\u5e940xF7\u4e3a0xBF\u4e3a0xFF\u5199\u5165\u52300x3E\u7684ACK\u6570\u636e\uff1a\u53d60xE0\u4e3a0x00 0xBA\u4e3a0xFF 0x99\u4e3a0x00 0xFB\u7684\u624d\u80fd0xDF 0xFA\u56de\u5e940xF7\u4e3a0xBF\u4e3a0xFF\u5199\u5165\u52300x3E\u7684ACK\u6570\u636e\uff1a\u53d60xE0 0\u00d700 0\u00d737 0xFF\u76840xE3\u4e3a0x00 0x75 0x61\u4e3a0x1C 0xF7\u4e3a0xBF 0\u00d726\u5199\u51650x3E\u7684ACK\u6570\u636e\uff1a\u53d60xE0\u4e3a0x00 0xBA 0xFF\u76840x99 0x00 0xFB 0xDF 0xFA 0xF7 0xBF 0xFF", "note_en": "Im somehow interested in audio production, but only as my hobby. My main job is lead of control system installation in research facility. So that means I usually dont want to spend huge money on the equipement.\u00a0 And rigth about now is quite good time to get some old-ish wireless audio equipement for decent price. The reason is that there was change ( info) in wireless bands and bands that were free before are not avaliable for the professional audio eq. That means that lot of productions are ditching their stuff to buy new one, compatible. But not all the old stuff is useless as some of it can be reprogrammed. As there is tigth window from 822 to 830 Mhz in EU. This window is quite narrow, but at least it free all the time. Other option is to go below 700Mhz, but then you migth get into collision with local TV transmitter. So I settled for the narrow band since I dont plan to use too many transmitters at once.  My movie production gear was missing wireless lavaliers for long time, so after some exploration I settled on old sennheiser profi series with recievers EK3041/EK3241 and transmitters SK 50. Managed to get couple of them for price that would otherwise got me sennheiser G3 series. Which is the most basic from Sennheiser. These were already in the approved band so no worries. But I also bougth really nice SKM 3072-U wireless handheld.\n    The SKM 3072-U had stated bandwith 798-830Mhz. Thats the bandwidth that HW can provide without any changes. So I was expecting it will not be an issue to pick the rigth Mhz I need from the free band. Little did I know, that the mic has already pre-programmed set of frequencies within the band of the mic. And all of them were outside the gap I wanted. These frequencies cannot be changed by user.\n There is a guy on ebay who is doing the reprogramming but it costs 119 Euro! And thats quite a lot for pluggin some cable to microphone. I even tried to propose cheaper price to the guy, but was refused. Anyway I was curiouse if it would be possible to do it on my own. And if it won&#39;t be too complicated I migth start sell the repogramming service on my own... for less (diabolic laught).\n   Quite clearly on top is AF board, which is not much interesting for the purpouse but below is LCD, HF, CPU and socket connector with 6 contacts! That looks promising as this is definitely the IF that is used for reprogramming. The idea is that by connecting to some kind of UART I migth be able to change the frequencies.\n I checked the CPU type under the sticker and its  PIC16C73A. Datasheet is huge but avaliable.\n   And it has UART that is indeed connected to the pins on the J1 connector. I tried to connect my USB to UART board.\n Well, nothing happened. I did some more test to see if I would be able to make it talk. Like pushing some buttons when powering, which can sometime put some devices into service mode. At least thats the tricked I learned from embeded develepores which use this quite often. It is usualy some weird combination of buttons pushes/holds in weird order. But still without any success. After some attempts that were not fruitfull I was little bit despared, but what could help me is the Service Manual.\n And as it was only for 5 usd. I resigned and bougth it. And indeed its full of so much interesting information.\n  J1 is trully used for setting the frequencies. The frequencies are stored in EEPROM  ST24C04M1 which communicates with CPU over I2C.\n To program it you have to use sennheiser plug with 9V bat connector for powering, then another on top of it to connect  UART to the PC with Win 3.1 or higher (This should not be an issue). But what I dont have is all these adaptors and mainly the SePT.EXE. Which knows baudrate and how to talk with the CPU.\u00a0 Or lets say makes the CPU talk.\n  As you can see there is also /RST and WP pin. /RST should be reset pin for CPU as it connectes to the  MCLR pin. and WP is WriteProtect of EEPROM, whic is normaly pulled up and had to be grounded in order to write into the memory.\n  The Service manual has quite many information but unfortunatelly nothing about the UART itself as this is dealt by the SePT.EXE application. And without any specifics about how to start the communication with CPU I run out of ideas.\n  But, there is quite interesting thing that when the mic starts up, it loads the frequencies from the EEPROM. That means that If I would be able to read then modify the EEPROM, I can change the frequency. Correct way is by the CPU via UART. But since the CPU does not cooperate I could try hooking up to the I2C directly and see how things work and even try to dump the EEPROM and modify it. The only issue is, I dont know much about EEPROMs, uCPU, I2C etc. not really and thats part of the fun.\n  So next day I borrowed this beatiful logic analyzer anb conneted it to then EEPROM pins and recorder the communication. Below is communication after powering of mic.\n write to 0x3E ack data: 0xE0 0xC8 0xF0 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00\n write to 0x3E ack data: 0xE0 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00\n                                         write to 0x3E ack data: 0xE0 0x00 0x00 0x00 0x00 0x00 0x9F 0x00 0x00 0x00 0x00 0x00\n write to 0x3E ack data: 0xE0 0x00 0xF0 0x00 0x00 0x00 0xFB 0x00 0x00 0x00 0x00 0x90\n write to 0x3E ack data: 0xE0 0x00 0xBF 0x00 0x09 0x00 0x9A 0x00 0x00 0x00 0x00 0xF0\n write to 0x3E ack data: 0xE0 0x00 0xAB 0x00 0x0F 0x00 0xBD 0x0F 0x00 0x00 0x00 0x99\n write to 0x3E ack data: 0xE0 0x00 0xDA 0x00 0x09 0x00 0x00 0x9B 0xF0 0x00 0x00 0xBF\n write to 0x3E ack data: 0xE0 0x00 0x0D 0x00 0x9B 0x00 0x7B 0xFA 0xBF 0x00 0x00 0x09\n write to 0x3E ack data: 0xE0 0x00 0xF0 0x00 0x00 0x00 0xEF 0x0B 0x00 0x00 0x00 0x2F\n            write to 0x3E ack data: 0xE0 0x00 0xBA 0xFF 0x99 0x00 0xFB 0xDF 0xFA 0xF7 0xBF 0xFF\n         write to 0x3E ack data: 0xE0 0x00 0xBA 0xFF 0x99 0x00 0xFB 0xDF 0xFA 0xF7 0xBF 0xFF\n   write to 0x3E ack data: 0xE0 0x00 0x37 0xFF 0xE3 0x00 0x75 0x61 0x1C 0xF7 0xBF 0x26\n         write to 0x3E ack data: 0xE0 0x00 0xBA 0xFF 0x99 0x00 0xFB 0xDF 0xFA 0xF7 0xBF 0xFF", "posttime": "2021-07-29 22:02:48", "source_domain": "news.ycombinator.com", "source_name": "Hacker News", "tags": "programming,\u7f16\u7a0b,\u68ee\u6d77\u585e\u5c14,sennheiser,eeprom", "title": "\u91cd\u65b0\u7f16\u7a0b\u68ee\u6d77\u585e\u5c14\u9ea6\u514b\u98ce", "title_en": "Reprogramming a Sennheiser Microphone", "transed": 1, "url": "https://vgnotepad.blogspot.com/2021/04/reprogramming-old-sennheiser-skm-3072-u.html", "via": "", "real_tags": ["\u7f16\u7a0b", "\u68ee\u6d77\u585e\u5c14", "eeprom"]}, {"category": "", "categoryclass": "", "imagename": "e1f842e9ed61ee50a332c4e2bc5226c6.png", "infoid": 1070271, "ip": "", "isanchordig": 1, "ischecked": 1, "isdelete": 0, "isneo": 1, "mark": "", "name": "", "note": "\u5728 ZFS \u5feb\u7167\u7ba1\u7406\u7684\u57fa\u7840\u77e5\u8bc6\u4e2d\uff0c\u6211\u4eec\u6f14\u793a\u4e86\u5982\u4f55\u4f7f\u7528\u5feb\u7167\u548c\u514b\u9686\u4ece\u7ed9\u5b9a\u7684\u65f6\u95f4\u70b9\u8bbf\u95ee\u6570\u636e\u3002\u5728\u672c\u6587\u4e2d\uff0c\u6211\u4eec\u5c06\u4e86\u89e3\u5982\u4f55\u4f7f\u7528 ZFS \u5f15\u5bfc\u73af\u5883 (BE) \u5c06\u64cd\u4f5c\u7cfb\u7edf\u672c\u8eab\u5f15\u5bfc\u5230\u4e0a\u4e00\u4e2a\u65f6\u95f4\u70b9\u3002\u5982\u679c\u60a8\u4e00\u76f4\u5728\u5173\u6ce8\u672c\u7cfb\u5217\uff0c\u60a8\u53ef\u80fd\u5df2\u7ecf\u53d1\u73b0\u521b\u5efa\u548c\u7ba1\u7406 OpenZFS \u5feb\u7167\u662f\u591a\u4e48\u5bb9\u6613\u3002\u5982\u679c\u60a8\u8fd8\u6ca1\u6709\u4f7f\u7528\u8fc7\u5feb\u7167\uff0c\u8bf7\u5c1d\u8bd5\u4e00\u4e0b\uff01\u6211\u4eec\u76f8\u4fe1\u4f60\u5f88\u5feb\u5c31\u4f1a\u60f3\u77e5\u9053\u6ca1\u6709\u4ed6\u4eec\u4f60\u662f\u5982\u4f55\u76f8\u5904\u7684\u3002\u5982\u679c\u60a8\u5df2\u7ecf\u5728\u4f7f\u7528\u5feb\u7167\u5e76\u4e14\u4e0d\u662f\u79ef\u6781\u7684\u5feb\u7167\u4fee\u526a\u5668\uff0c\u60a8\u53ef\u80fd\u60f3\u77e5\u9053\uff1a\u591a\u5c11\u5feb\u7167\u592a\u591a\u4e86\uff1f\u7531\u4e8e\u6ca1\u6709\u65e0\u9650\u5b58\u50a8\u5bb9\u91cf\u8fd9\u6837\u7684\u4e1c\u897f\uff0c\u60a8\u7684\u53ef\u7528\u78c1\u76d8\u7a7a\u95f4\u662f\u4e00\u4e2a\u660e\u663e\u7684\u9650\u5236\u56e0\u7d20\u3002\u4f46\u662f\u5feb\u7167\u4f1a\u5728\u4ec0\u4e48\u65f6\u5019\u5bfc\u81f4\u6027\u80fd\u4e0b\u964d\uff1f\u4e0e\u5176\u4ed6\u6587\u4ef6\u7cfb\u7edf\u4e0d\u540c\uff0c\u4e00\u4e2a\u6216\u4e00\u5343\u4e2a\u5feb\u7167\u7684\u5b58\u5728\u5bf9\u6587\u4ef6\u7cfb\u7edf\u7684\u6027\u80fd\u6ca1\u6709\u5f71\u54cd\uff0c\u8bfb\u53d6\u548c\u5199\u5165\u6587\u4ef6\u7684\u6267\u884c\u65b9\u5f0f\u76f8\u540c\u3002\u4f46\u662f\uff0c\u7ba1\u7406\u64cd\u4f5c\uff08\u4f8b\u5982\u5217\u51fa\u548c\u5220\u9664\u5feb\u7167\uff09\u7684\u6027\u80fd\u53d7\u6bcf\u4e2a\u6570\u636e\u96c6\u4e2d\u5b58\u5728\u7684\u5feb\u7167\u6570\u91cf\u7684\u5f71\u54cd\u3002\u6709\u6570\u767e\u4e2a\u5feb\u7167\u53ef\u4ee5\u5417\uff1f\u5047\u8bbe\u6709\u8db3\u591f\u7684\u5b58\u50a8\u5bb9\u91cf\uff0c\u90a3\u4e48\u62e5\u6709\u6570\u5343\u6216\u6570\u4e07\u4e2a\u5feb\u7167\u5462\uff1f\u6839\u636e\u6211\u4eec\u7684\u7ecf\u9a8c\uff0c\u5728\u5217\u51fa\u3001\u521b\u5efa\u3001\u590d\u5236\u548c\u9500\u6bc1\u5feb\u7167\u65f6\uff0c\u6bcf\u4e2a\u6570\u636e\u96c6\u8d85\u8fc7 1000 \u4e2a\u5feb\u7167\u5f00\u59cb\u5bfc\u81f4\u4e25\u91cd\u7684\u6027\u80fd\u95ee\u9898\u3002\u6027\u80fd\u5f71\u54cd\u4e0e\u7cfb\u7edf\u4e0a\u7684\u5feb\u7167\u603b\u6570\u65e0\u5173\uff0c\u800c\u662f\u4e0e\u6bcf\u4e2a\u6570\u636e\u96c6\u4e0a\u7684\u5feb\u7167\u6570\u91cf\u76f8\u5173\u3002 100 \u4e2a\u6570\u636e\u96c6\u6bcf\u4e2a\u5305\u542b 100 \u4e2a\u5feb\u7167\u5c06\u4e0d\u4f1a\u5bf9\u5217\u8868\u6027\u80fd\u4ea7\u751f\u5f71\u54cd\uff0c\u800c\u5177\u6709 2000 \u4e2a\u5feb\u7167\u7684\u5355\u4e2a\u6570\u636e\u96c6\u53ef\u80fd\u9700\u8981\u51e0\u79d2\u949f\u624d\u80fd\u8fd4\u56de\u5feb\u7167\u5217\u8868\u3002\u867d\u7136\u60a8\u53ef\u80fd\u6c38\u8fdc\u4e0d\u9700\u8981\u5b58\u50a8\u90a3\u4e48\u591a\u5feb\u7167\uff0c\u4f46\u60a8\u4ecd\u7136\u5e0c\u671b\u968f\u7740\u65f6\u95f4\u7684\u63a8\u79fb\u4ece\u5feb\u7167\u6d88\u8017\u7684\u7a7a\u95f4\u4e2d\u83b7\u5f97\u6700\u5927\u4ef7\u503c\u3002\u4e92\u8054\u7f51\u641c\u7d22\u4e0d\u4f1a\u7ed9\u51fa\u591a\u5c11\u5feb\u7167\u592a\u591a\u7684\u660e\u786e\u7b54\u6848\uff0c\u7b54\u6848\u8303\u56f4\u4ece\u201c\u4e0d\u8981\u62c5\u5fc3\u201d\u5230\u201c\u53d6\u51b3\u4e8e\u201d\u3002\u867d\u7136\u4e0d\u5c3d\u5982\u4eba\u610f\uff0c\u4f46\u95ee\u9898\u7684\u5173\u952e\u662f\u6ca1\u6709\u786e\u5b9a\u7684\u7b54\u6848\uff0c\u56e0\u4e3a\u6bcf\u4e2a\u4eba\u7684\u5b58\u50a8\u7cfb\u7edf\u548c\u6570\u636e\u4f7f\u7528\u60c5\u51b5\u4e0d\u540c\u3002\u672c\u6587\u4ecb\u7ecd\u4e86\u4e00\u4e9b\u8981\u95ee\u81ea\u5df1\u7684\u95ee\u9898\uff0c\u56e0\u4e3a\u7b54\u6848\u5c06\u5e2e\u52a9\u60a8\u66f4\u597d\u5730\u4e86\u89e3\u5feb\u7167\u7684\u4f7f\u7528\u3002\u7136\u540e\uff0c\u60a8\u53ef\u4ee5\u4f7f\u7528\u8be5\u4fe1\u606f\u6765\u786e\u5b9a\u9002\u5408\u60a8\u9700\u6c42\u7684\u5feb\u7167\u521b\u5efa\u548c\u4fee\u526a\u8ba1\u5212\uff0c\u800c\u4e0d\u4f1a\u5bfc\u81f4\u6027\u80fd\u4e0b\u964d\u3002\u7b2c\u4e00\u4e2a\u95ee\u9898\u53ef\u80fd\u5e76\u4e0d\u660e\u663e\uff0c\u4f46\u5bf9\u4e8e\u4e86\u89e3\u521b\u5efa\u5feb\u7167\u7684\u65f6\u95f4\u548c\u9891\u7387\u81f3\u5173\u91cd\u8981\u3002\u7406\u60f3\u60c5\u51b5\u4e0b\uff0c\u60a8\u5e0c\u671b\u521b\u5efa\u91cd\u8981\u5e76\u63d0\u4f9b\u6700\u5927\u4ef7\u503c\u7684\u5feb\u7167\u3002\u4e3e\u4e2a\u4f8b\u5b50\uff1a\u8003\u8651\u4e00\u4e2a Web \u670d\u52a1\u5668\uff0c\u5176\u4e2d\u7684\u5185\u5bb9\u4ec5\u5728\u6709\u65b0\u4ea7\u54c1\u53d1\u5e03\u6216\u73b0\u6709\u4ea7\u54c1\u7684\u65b0\u8f6f\u4ef6\u53d1\u5e03\u65f6\u624d\u4f1a\u66f4\u6539\uff0c\u6216\u8005 Web \u56e2\u961f\u4f1a\u5b9a\u671f\u626b\u63cf\u4ee5\u5237\u65b0\u548c\u6539\u8fdb\u5185\u5bb9\u3002\u5728\u5185\u5bb9\u66f4\u6539\u4e4b\u524d\u62cd\u6444\u5feb\u7167\u662f\u6709\u610f\u4e49\u7684\uff0c\u7f51\u7edc\u56e2\u961f\u53ef\u80fd\u5e0c\u671b\u5c06\u7f51\u7ad9\u4ee5\u524d\u7248\u672c\u7684\u5b58\u6863\u4fdd\u7559\u6570\u5e74\u3002\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u5feb\u7167\u6570\u91cf\u6700\u5c11\uff0c\u5b58\u50a8\u65f6\u95f4\u957f\uff0c\u5e76\u4e14\u6839\u636e\u5185\u5bb9\u66f4\u6539\u7684\u6570\u91cf\uff0c\u5feb\u7167\u4e4b\u95f4\u53ef\u80fd\u5b58\u5728\u76f8\u5f53\u591a\u7684\u5dee\u5f02\u3002\n\u8fd9\u79cd\u60c5\u51b5\u4e0e\u5b58\u50a8\u8bb8\u591a\u7528\u6237\u7684\u4e3b\u76ee\u5f55\u7684\u6587\u4ef6\u670d\u52a1\u5668\u751a\u81f3\u60a8\u6574\u5929\u5de5\u4f5c\u7684\u4e2a\u4eba\u5de5\u4f5c\u7ad9\u5b8c\u5168\u4e0d\u540c\u3002\u8fd9\u4e9b\u7528\u4f8b\u5f80\u5f80\u53d7\u76ca\u4e8e\u5b9a\u671f\u7684\u81ea\u52a8\u5feb\u7167\uff0c\u4f8b\u5982\u5728\u5de5\u4f5c\u65f6\u95f4\u5185\u6bcf 15\u300130 \u6216 60 \u5206\u949f\u4e00\u6b21\u3002\u8fd9\u4f1a\u5bfc\u81f4\u5927\u91cf\u5feb\u7167\u7684\u4ef7\u503c\u968f\u7740\u65f6\u95f4\u7684\u63a8\u79fb\u800c\u8fc5\u901f\u51cf\u5c11\u3002\u5f53\u7528\u6237\u5bf9\u6587\u4ef6\u8fdb\u884c\u66f4\u6539\u65f6\uff0c\u60a8\u5982\u4f55\u786e\u5b9a\u6587\u4ef6\u66f4\u6539\u7684\u503c\uff08\u4ee5\u53ca\u5feb\u7167\u7684\u9891\u7387\u548c\u4fdd\u7559\u5feb\u7167\u7684\u65f6\u95f4\uff09\uff1f\u5f53\u7136\uff0c\u8fd9\u53d6\u51b3\u4e8e\u3002\u5982\u679c\u7cfb\u7edf\u7ba1\u7406\u5458\u6b63\u5728\u5bf9\u914d\u7f6e\u6587\u4ef6\u8fdb\u884c\u66f4\u6539\uff0c\u90a3\u4e48\u4fdd\u7559\u4ee5\u524d\u7684\u66f4\u6539\u975e\u5e38\u6709\u4ef7\u503c\uff0c\u81f3\u5c11\u5728\u66f4\u6539\u5f97\u5230\u9a8c\u8bc1\u4e4b\u524d\u662f\u8fd9\u6837\u3002\u5982\u679c\u7528\u6237\u6b63\u5728\u5bf9\u7535\u5b50\u8868\u683c\u8fdb\u884c\u66f4\u6539\uff0c\u5219\u5b9a\u671f\u5feb\u7167\u53ef\u80fd\u4f1a\u4e5f\u53ef\u80fd\u4e0d\u4f1a\u6355\u83b7\u4ed6\u4eec\u5e0c\u671b\u91cd\u65b0\u6355\u83b7\u7684\u7279\u5b9a\u66f4\u6539\u3002\u8fd9\u7ed9\u6211\u4eec\u5e26\u6765\u4e86\u4e00\u4e2a\u95ee\u9898\uff1a\u7528\u6237\u5728\u4f7f\u7528\u54ea\u4e9b\u5e94\u7528\u7a0b\u5e8f\uff1f\u8bb8\u591a\u73b0\u4ee3\u684c\u9762\u5e94\u7528\u7a0b\u5e8f\u548c\u64cd\u4f5c\u7cfb\u7edf\u90fd\u63d0\u4f9b\u4e86\u5185\u7f6e\u7684\u6587\u4ef6\u7248\u672c\u5386\u53f2\u8bb0\u5f55\u3002\u5927\u591a\u6570\u5f00\u53d1\u4eba\u5458\u4f7f\u7528\u4fee\u8ba2\u7cfb\u7edf\uff0c\u5e76\u88ab\u6559\u5bfc\u201c\u5c3d\u65e9\u5e76\u7ecf\u5e38\u63d0\u4ea4\u201d\u7684\u53e3\u5934\u7985\u3002\u8bb8\u591a\u4e1a\u52a1\u5e94\u7528\u7a0b\u5e8f\u5728\u7ebf\u8fd0\u884c\u6216\u6258\u7ba1\u5728\u5916\u90e8\u4e91\u4e2d\uff0c\u901a\u5e38\u63d0\u4f9b\u7248\u672c\u5386\u53f2\u8bb0\u5f55\u3002\u53ea\u6709\u60a8\u624d\u80fd\u4e86\u89e3\u60a8\u7684\u7528\u6237\u6b63\u5728\u4f7f\u7528\u54ea\u4e9b\u5e94\u7528\u7a0b\u5e8f\uff0c\u4ed6\u4eec\u662f\u5426\u6b63\u5728\u5229\u7528\u5185\u7f6e\u7684\u5386\u53f2/\u4fee\u8ba2\u7cfb\u7edf\uff0c\u4ee5\u53ca\u4ed6\u4eec\u662f\u5426\u56e0\u4e3a\u6ca1\u6709\u4f7f\u7528\u4fee\u8ba2\u5e94\u7528\u7a0b\u5e8f\u6216\u603b\u662f\u5fd8\u8bb0\u63d0\u4ea4\u6216\u4fdd\u5b58\u7248\u672c\u800c\u6253\u6270\u60a8\u8fdb\u884c\u6587\u4ef6\u6062\u590d.\u60a8\u8fd8\u77e5\u9053\u54ea\u4e9b\u7cfb\u7edf\u5728\u60a8\u7684\u63a7\u5236\u4e4b\u4e0b\uff0c\u54ea\u4e9b\u7c7b\u578b\u7684\u6570\u636e\u8db3\u591f\u91cd\u8981\u4ee5\u4fdd\u8bc1\u4f7f\u7528 OpenZFS \u5feb\u7167\u4fdd\u7559\u4ee5\u524d\u7684\u7248\u672c\u3002\u5982\u679c\u60a8\u6709\u5927\u91cf\u5b58\u50a8\u5bb9\u91cf\uff0c\u5219\u5f52\u6863\u5feb\u7167\u7684\u6210\u672c\u4f1a\u5f88\u4f4e\u3002\u4f46\u662f\uff0c\u8ba1\u5212\u7684\u5feb\u7167\u786e\u5b9e\u4f1a\u589e\u52a0\u3002\u8003\u8651\u4e00\u4e0b\u6570\u5b66\uff1a\u6bcf\u5c0f\u65f6\u62cd\u6444 1 \u4e2a\u6570\u636e\u96c6\u5feb\u7167\u4f1a\u5bfc\u81f4\u6bcf\u5468 168 \u4e2a\u5feb\u7167\u2014\u2014\u6362\u53e5\u8bdd\u8bf4\uff0c\u6309\u7167\u8be5\u8ba1\u5212\u9700\u8981\u5927\u7ea6 6 \u5468\u624d\u80fd\u5b9e\u73b0\u6bcf\u4e2a\u6570\u636e\u96c6\u6027\u80fd\u8fbe\u5230 1000 \u591a\u4e2a\u5feb\u7167\u3002\u5bf9\u4e8e\u6b64\u793a\u4f8b\uff0c\u60a8\u9700\u8981\u8003\u8651\u662f\u5426\u6bcf\u5929\u6bcf\u5c0f\u65f6\u90fd\u9700\u8981\u4e00\u4e2a\u5feb\u7167\uff0c\u4ee5\u53ca\u4f55\u65f6\u5f00\u59cb\u4fee\u526a\u8f83\u65e7\u7684\u5feb\u7167\u3002\u95ee\u95ee\u81ea\u5df1\uff1a\u5728 3 \u4e2a\u6708\u524d\u7684\u4e0a\u5348 10:00 \u548c\u4e0a\u5348 11:00 \u4fdd\u7559\u6570\u636e\u96c6\u7684\u5feb\u7167\u662f\u5426\u6709\u4ef7\u503c\uff1f 1\u4e2a\u6708\u524d\uff1f\u4e0a\u661f\u671f\uff1f\u8fd9\u662f\u4e0a\u4e00\u4e2a\u95ee\u9898\u7684\u53e6\u4e00\u9762\u3002\u5982\u679c\u60a8\u4ece 5 \u5468\u524d\u5f00\u59cb\u5728\u4e0a\u5348 10:00 \u5220\u9664\u6587\u4ef6\u7cfb\u7edf\u7684\u5feb\u7167\uff0c\u8fd9\u4f1a\u6709\u4ec0\u4e48\u5927\u4e0d\u4e86\u7684\u5417\uff1f\u5982\u679c\u6ca1\u6709\uff0c\u60a8\u9700\u8981\u56de\u6eaf\u591a\u8fdc\u624d\u80fd\u4fdd\u7559\u6709\u4ef7\u503c\u7684\u5feb\u7167\uff1f\n\u4e5f\u8bb8\u60a8\u7684\u5feb\u7167\u662f\u57fa\u4e8e\u6d3b\u52a8\u800c\u4e0d\u662f\u8ba1\u5212\u9a71\u52a8\u7684\uff1f\u5982\u679c\u662f\u8fd9\u6837\uff0c\u60a8\u8fd8\u9700\u8981\u8bbf\u95ee 3 \u4e2a pkg-updates \u524d\u7684\u6570\u636e\u5417\uff1f\u95ee\u95ee\u81ea\u5df1\uff1a\u5982\u679c\u67d0\u4e2a\u7279\u5b9a\u7248\u672c\u4e0d\u518d\u53ef\u7528\uff0c\u60a8\u5c06\u82b1\u8d39\u591a\u5c11\u65f6\u95f4\u548c\u7cbe\u529b\uff1f\u5230\u73b0\u5728\u4e3a\u6b62\uff0c\u60a8\u5e94\u8be5\u66f4\u597d\u5730\u4e86\u89e3\u54ea\u4e9b\u6570\u636e\u5bf9\u5feb\u7167\u5f88\u91cd\u8981\u4ee5\u53ca\u60a8\u5e0c\u671b\u6355\u83b7\u8be5\u6570\u636e\u7684\u9891\u7387\u3002\u63a5\u4e0b\u6765\uff0c\u60a8\u9700\u8981\u786e\u5b9a\u662f\u5426\u6709\u8db3\u591f\u7684\u5b58\u50a8\u5bb9\u91cf\u6765\u7ef4\u62a4\u6240\u9700\u6570\u91cf\u7684\u5feb\u7167\u3002\u5982\u679c\u5bb9\u91cf\u6210\u4e3a\u4e00\u4e2a\u95ee\u9898\uff0c\u60a8\u53ef\u4ee5\u51b3\u5b9a\u662f\u5426\u503c\u5f97\u6dfb\u52a0\u66f4\u591a\u5bb9\u91cf\u6216\u91cd\u65b0\u8003\u8651\u60a8\u7684\u5feb\u7167\u4fee\u526a\u8ba1\u5212\u3002\u9996\u5148\u5217\u51fa\u6c60\u7684\u7a7a\u95f4\u5c5e\u6027 (-o)\u3002\u8fd9\u662f\u6211\u7684\u7b14\u8bb0\u672c\u7535\u8111\u4e0a\u7684\u5766\u514b\u6c60\u7684\u526a\u8f91\u793a\u4f8b\uff1a Zfs list -o space NAME AVAIL USED USEDSNAP USEDDS USEDREFRESERV USEDCHILD tank 270G 69.2G 0 88K 0 69.2G tank/ROOT 270G 44.4G 0 48K4mar 0/4RO tank 41.6G 18.7G 23.0G 0 0 tank/usr/home/dru 270G 4.34G 1.17G 3.17G 0 2.36M \u5df2\u7528\uff1a\u4f7f\u7528\u91cf\uff08\u4e0e\u4efb\u4f55\u6587\u4ef6\u7cfb\u7edf\u4e00\u6837\uff0cOpenZFS \u6027\u80fd\u5728\u63a5\u8fd1\u5bb9\u91cf\u65f6\u4f1a\u5f00\u59cb\u53d7\u5230\u5f71\u54cd\uff1b\u901a\u5e38\u60a8\u5e0c\u671b\u4fdd\u6301\u5728 80% \u4ee5\u4e0b\u6216\u8003\u8651\u5728\u7cfb\u7edf\u5f00\u59cb\u63a5\u8fd1 90% \u65f6\u589e\u52a0\u66f4\u591a\u5bb9\u91cf\uff09\u5728\u6b64\u793a\u4f8b\u4e2d\uff0c\u6b64\u7cfb\u7edf\u4e0a\u4ecd\u6709\u8db3\u591f\u7684\u5b58\u50a8\u5bb9\u91cf\u3002\u6709\u8da3\u7684\u662f\uff0cdru \u4e3b\u76ee\u5f55\u4e2d\u8d85\u8fc7 25% \u7684\u7a7a\u95f4\u88ab\u5feb\u7167\u4f7f\u7528\u3002\n\u5728\u5177\u6709\u8bb8\u591a\u5feb\u7167\u7684\u7cfb\u7edf\u4e0a\uff0c\u8fd9\u79cd\u7c7b\u578b\u7684\u5217\u8868\u53ef\u4ee5\u5feb\u901f\u6d4f\u89c8\u54ea\u4e9b\u6587\u4ef6\u7cfb\u7edf\u6d88\u8017\u6700\u591a\u7684\u5feb\u7167\u7a7a\u95f4\uff0c\u4ee5\u53ca\u6307\u5b9a\u6c60\u4e0a\u4ecd\u6709\u591a\u5c11\u53ef\u7528\u5bb9\u91cf\u7684\u603b\u4f53\u89c6\u56fe\u3002\u60a8\u8fd8\u53ef\u4ee5\u5c06\u7279\u5b9a\u6570\u636e\u96c6\u5f52\u96f6\u3002\u8bf7\u6ce8\u610f\uff0c\u6700\u540e\u4e00\u4e2a\u547d\u4ee4\u662f zpool\uff08\u4e3a\u4e86\u67e5\u770b\u6c60\u4f7f\u7528\u60c5\u51b5\uff09\uff0c\u800c\u6b64\u547d\u4ee4\u4f7f\u7528 zfs\uff08\u56e0\u4e3a\u6211\u6b63\u5728\u5217\u51fa\u4e00\u4e2a\u6570\u636e\u96c6\uff09\u3002\u8fd9\u6b21\u6211\u5c06\u83b7\u5f97\u6211\u7684\u4e3b\u76ee\u5f55\u6570\u636e\u96c6\u7684 usedbysnapshots \u5c5e\u6027\uff1a\u6b63\u5982\u9884\u671f\u7684\u90a3\u6837\uff0c\u5feb\u7167\u4f7f\u7528\u7684\u7a7a\u95f4\u4e0e\u524d\u9762\u6e05\u5355\u4e2d\u770b\u5230\u7684 1.17G \u5339\u914d\u3002\u867d\u7136 usedbysnapshots \u5c5e\u6027\u7ed9\u51fa\u4e86\u5feb\u7167\u6d88\u8017\u4e86\u591a\u5c11\u7a7a\u95f4\uff0c\u4ee5\u53ca\u5982\u679c\u6570\u636e\u96c6\u4e2d\u7684\u6240\u6709\u5feb\u7167\u90fd\u88ab\u7834\u574f\u5c06\u91ca\u653e\u591a\u5c11\u7a7a\u95f4\u7684\u6982\u5ff5\uff0c\u5b83\u5e76\u4e0d\u8868\u793a\u5982\u679c\u60a8\u5f00\u59cb\uff0c\u60a8\u5c06\u83b7\u5f97\u591a\u5c11\u7a7a\u95f4\u53ea\u4fee\u526a\u4e00\u4e9b\u5feb\u7167\u3002\u7531\u4e8e\u5176 COW \u6027\u8d28\uff0cOpenZFS \u65e0\u6cd5\u91ca\u653e\u4ecd\u88ab\u5f15\u7528\u7684\u5757\u3002\u4f8b\u5982\uff0c\u6211\u5c06\u521b\u5efa\u4e00\u4e2a\u5217\u8868\uff0c\u663e\u793a\u6211\u4e3b\u76ee\u5f55\u4e2d\u5feb\u7167\u7684 NAME\u3001WRITTEN\u3001REFER \u548c USED \u5217\uff08\u6309\u6b64\u987a\u5e8f\uff09\uff1a zfs list -t all -o name,written,refer,used | grep dru@ tank/usr/home/dru@test-backup 2.71G 2.71G 176M tank/usr/home/dru@homedir\u3002 176M 2.71G 12.6M tank/usr/home/dru@homedir-mod 18.5M 2.71G 18.1M \u5199\u5165\u5c5e\u6027\u5bf9\u4e8e\u7406\u89e3\u5feb\u7167\u589e\u957f\u5f88\u6709\u7528\uff0c\u56e0\u4e3a\u5b83\u8868\u793a\u81ea\u62cd\u6444\u5feb\u7167\u4ee5\u6765\u5199\u5165\u6570\u636e\u96c6\u7684\u5f15\u7528\u7a7a\u95f4\u91cf\u3002 used \u5217\u8868\u793a\u8be5\u5feb\u7167\u6709\u591a\u5c11\u6570\u636e\u662f\u552f\u4e00\u7684\uff1b\u6362\u53e5\u8bdd\u8bf4\uff0c\u5982\u679c\u5220\u9664\u8be5\u7279\u5b9a\u5feb\u7167\uff0c\u5c06\u91ca\u653e\u591a\u5c11\u7a7a\u95f4\u3002\n\u6267\u884c\u8be6\u7ec6\u7684\u7a7a\u8fd0\u884c (-nv) \u5c06\u663e\u793a\u901a\u8fc7\u9500\u6bc1\u6307\u5b9a\u5feb\u7167\u5c06\u56de\u6536\u7684\u7a7a\u95f4\u91cf\u3002\u6570\u91cf\u5c06\u4e0e\u4e0a\u9762\u5217\u8868\u4e2d\u7684 used \u5217\u5339\u914d\uff1a zfs destroy -nv tank/usr/home/dru@test-backup \u5c06\u9500\u6bc1 tank/usr/home/dru@test-backup \u5c06\u56de\u6536 176M zfs destroy -nv tank/ usr/home/dru@homedir \u4f1a\u7834\u574f tank/usr/home/dru@homedir \u4f1a\u56de\u6536 12.6M zfs destroy -nv tank/usr/home/dru@homedir-mod \u4f1a\u7834\u574f tank/usr/home/dru@homedir-mod\u4f1a\u56de\u6536 18.1M \u60f3\u4e86\u89e3\u66f4\u591a\u5173\u4e8e ZFS \u7684\u4fe1\u606f\u5417\uff1f\u5728\u6211\u4eec\u7684\u7cfb\u5217\u6587\u7ae0\u4e2d\uff0c\u6211\u4eec\u4e00\u76f4\u5728\u5199\u5173\u4e8e OpenZFS \u7684\u5f3a\u5927\u529f\u80fd\u3002\u4e86\u89e3\u54ea\u4e9b\u6570\u636e\u4ece\u5feb\u7167\u4e2d\u53d7\u76ca\u4ee5\u53ca\u4fdd\u7559\u5feb\u7167\u7684\u65f6\u95f4\u957f\u5ea6\u5c06\u6709\u52a9\u4e8e\u60a8\u5145\u5206\u5229\u7528 OpenZFS \u5feb\u7167\u3002\u5c06\u5feb\u7167\u4fee\u526a\u4e3a\u60a8\u9700\u8981\u7684\u5feb\u7167\u5c06\u4f7f\u60a8\u66f4\u5bb9\u6613\u627e\u5230\u8981\u6062\u590d\u7684\u6570\u636e\u3001\u8282\u7701\u78c1\u76d8\u5bb9\u91cf\u5e76\u9632\u6b62 OpenZFS \u7cfb\u7edf\u51fa\u73b0\u6027\u80fd\u74f6\u9888\u3002\u5728 Klara\uff0c\u6211\u4eec\u6709\u4e00\u4e2a\u5b8c\u6574\u7684\u56e2\u961f\u81f4\u529b\u4e8e\u5e2e\u52a9\u60a8\u5b8c\u6210 FreeBSD \u9879\u76ee\u3002\u65e0\u8bba\u60a8\u662f\u5728\u8ba1\u5212\u4e00\u4e2a FreeBSD \u9879\u76ee\uff0c\u8fd8\u662f\u5728\u4e00\u4e2a\u9879\u76ee\u4e2d\u95f4\u5e76\u9700\u8981\u4e00\u4e9b\u989d\u5916\u7684\u6d1e\u5bdf\u529b\uff0c\u6211\u4eec\u90fd\u5728\u8fd9\u91cc\u4e3a\u60a8\u63d0\u4f9b\u5e2e\u52a9\uff01", "note_en": "In\u00a0 Basics of ZFS Snapshot Management, we demonstrated how snapshots and clones can be used to access data from a given point in time. In this article, we\u2019ll learn how ZFS boot environments (BEs) are used to boot the operating system itself into a previous point in time.\n  If you have been following this series, you may have already discovered how easy it is to\u00a0 create and manage OpenZFS snapshots. If you haven\u2019t used snapshots yet, give them a try! We\u2019re confident you\u2019ll quickly wonder how you ever got along without them.\n If you\u2019re already using snapshots and aren\u2019t an aggressive snapshot pruner, you\u2019ve probably wondered: How many snapshots is too many? Since there\u2019s no such thing as infinite storage capacity, your available disk space is an obvious limiting factor. But at what point will snapshots result in a performance hit? Unlike other filesystems, the existence of one or one thousand snapshots has no impact on the performance of the filesystem, reading and writing files performs the same either way. However, the performance of administrative operations, like listing and deleting snapshots, are impacted by the number of snapshots that exist in each dataset. Is it OK to have hundreds of snapshots? Assuming sufficient storage capacity, what about having thousands or tens of thousands of snapshots? In our experience,\u00a0over 1000 snapshots per dataset starts to cause significant performance issues when listing, creating, replicating, and destroying snapshots. The performance impact is not related to the total number of snapshots on the system, but the snapshots on each dataset. A hundred datasets each with one hundred snapshots will see no performance impact on listing, while a single dataset with 2000 snapshots may take many seconds to return the list of snapshots. While you may never need to store that many snapshots, you still want to get the most value for the space snapshots consume over time.\n An internet search won\u2019t give a definitive answer to how many snapshots is too many, with answers ranging from \u201cdon\u2019t worry about it\u201d to \u201cit depends\u201d. While not satisfying, the crux of the matter is there is no definitive answer as everyone\u2019s storage system and data use is different.\n This article introduces some questions to ask yourself as the answers will help you better understand your snapshot use. You can then use that information to determine a snapshot creation and pruning schedule that fits your needs without introducing a performance hit.\n  The first question may not be obvious, but it is crucial to understanding when and how often it makes sense to create snapshots. Ideally, you want to create snapshots that matter and deliver the most value.\n As an example: consider a web server where the content changes only when there\u2019s a new product launch, or there is a new software release for an existing product, or the web team does its periodic sweep to refresh and improve content. It makes sense to take a snapshot before the content changes, the web team may want to keep an archive of previous versions of the website for several years. In this case, the number of snapshots is minimal, they are stored for a long time, and depending upon the amount of content changes, there may be quite a few differences between snapshots.\n This case is quite different from a file server which stores the home directories of many users or even a personal workstation that you work on all day. These use cases tend to benefit from automated snapshots on a regular schedule, say every 15, 30, or 60 minutes during work hours. This results in a lot of snapshots whose value tends to quickly diminish over time.\n When users are making changes to files, how do you determine the value (and hence how often to snapshot and how long to keep the snapshot) of file changes? Of course, it depends. If the system administrator is making changes to config files, there is great value in keeping previous changes, at least until the changes are validated. If a user is making changes to a spreadsheet, a periodic snapshot may or may not catch a specific change they wish to recapture.\n Which brings us to the question: which applications are users using? Many modern desktop applications and operating systems provide a built-in file version history. Most developers use a revision system and are taught the mantra \u201ccommit early and often\u201d. A lot of business applications operate online or are hosted in an external cloud, often providing a version history.\n Only you can understand what applications your users are using, if they are taking advantage of built-in history/revision systems, and if they are bugging you for file restores because they aren\u2019t using revisioning applications or keep forgetting to commit or save versions. You also know which systems are under your control and what type of data is important enough to warrant keeping previous versions using OpenZFS snapshots.\n  If you have lots of storage capacity, the cost of archiving snapshots can be low. However, scheduled snapshots do add up. Consider the math: taking 1 snapshot of a dataset every hour results in 168 snapshots per week\u2014in other words, it would take about 6 weeks on that schedule to achieve that 1000+ snapshots per dataset performance hit. For this example, one would want to consider if a snapshot was needed every hour of every day, as well as when to start pruning older snapshots.\n Ask yourself: is there value in keeping a snapshot of a dataset at 10:00 am and 11:00 am from 3 months ago? 1 month ago? Last week?\n  This is the other side of the previous question. Will it be a big deal if you delete that snapshot of the filesystem at 10:00 am from 5 weeks ago? If not, how far back do you need to go to still have snapshots of value?\n Perhaps your snapshots are activity-based rather than schedule-driven? If so, do you still need to access data from 3 pkg-updates ago?\n Ask yourself: how much will it cost you in time and effort if a specific revision is no longer available?\n  By now, you should have a better idea of what data is important to snapshot and how often you want to capture that data. Next, you\u2019ll want to determine if you have enough storage capacity to maintain the desired number of snapshots. If capacity becomes a concern, you can decide if it is worthwhile to add more capacity or to reconsider your snapshot pruning schedule.\n  Start by listing the\u00a0 space\u00a0property ( -o) of the pool. Here is a snipped example of the \u00a0tank\u00a0poolon my laptop:\n Zfs list -o space\rNAME AVAIL USED USEDSNAP USEDDS USEDREFRESERV USEDCHILD\rtank\t\t 270G 69.2G 0 88K 0 69.2G\rtank/ROOT\t 270G 44.4G 0 88K 0 44.4G\rtank/ROOT/mar26\t 270G 41.6G 18.7G 23.0G \t 0 0\rtank/usr/home/dru 270G 4.34G 1.17G 3.17G 0 2.36M\n  USED:\u00a0amount being used (as with any filesystem, OpenZFS performance will start to suffer when it gets close to capacity; typically you want to stay below 80% or consider adding more capacity as the system starts to approach 90%)\n In this example, there is still plenty of storage capacity on this system. It is interesting to note that over 25% of the space usage in\u00a0 dru\u2019s home directory is used by snapshots.\n On a system with many snapshots, this type of listing gives a quick glance of which filesystems are consuming the most snapshot space as well as an overall view of how much capacity is still available on the specified pool.\n You can also zero in on a particular dataset. Note that the last command was\u00a0 zpool\u00a0(in order to see pool usage) while this command uses\u00a0 zfs\u00a0(as I\u2019m listing a dataset). This time I\u2019ll\u00a0 get\u00a0the\u00a0 usedbysnapshots\u00a0property of my home directory dataset:\n  As expected, the space used by snapshots matches the\u00a0 1.17G\u00a0seen in the previous listing.\n While the\u00a0 usedbysnapshots\u00a0property gives an idea of how much space is consumed by snapshots, as well as how much space would be freed if all the snapshots in a dataset were destroyed, it does not indicate how much space you\u2019ll get back if you start pruning only some of the snapshots. Due to its COW nature, OpenZFS can\u2019t free blocks that are still being referred to.\n As an example, I\u2019ll create a listing that shows the NAME, WRITTEN, REFER, and USED columns (in that order) of just the snapshots in my home directory:\n zfs list -t all -o name,written,refer,used | grep dru@\rtank/usr/home/dru@test-backup\t 2.71G\t2.71G\t\t 176M\rtank/usr/home/dru@homedir. 176M\t2.71G\t\t12.6M\rtank/usr/home/dru@homedir-mod\t 18.5M\t2.71G\t\t18.1M\n The\u00a0 written\u00a0property is useful for understanding snapshot growth as it represents the amount of referenced space written to the dataset since that snapshot was taken. The\u00a0 used\u00a0column indicates how much of the data is unique to that snapshot; in other words, how much space will be freed if that particular snapshot is deleted.\n Performing a verbose dry-run ( -nv) will show the amount of space that would be reclaimed by destroying the specified snapshot. The amount will match the\u00a0 used\u00a0column seen in the listing above:\n zfs destroy -nv tank/usr/home/dru@test-backup\rwould destroy tank/usr/home/dru@test-backup\rwould reclaim 176M\rzfs destroy -nv tank/usr/home/dru@homedir\rwould destroy tank/usr/home/dru@homedir\rwould reclaim 12.6M\rzfs destroy -nv tank/usr/home/dru@homedir-mod\rwould destroy tank/usr/home/dru@homedir-mod\rwould reclaim 18.1M\n Want to learn more about ZFS? We consistently write about the awesome powers of OpenZFS in our article series.\n  Understanding which data benefits from being in a snapshot and how long it makes sense to keep snapshots will help you get the most out of OpenZFS snapshots. Pruning snapshots to just the ones you need will make it easier to find the data you want to restore, save disk capacity, and prevent performance bottlenecks on your OpenZFS system.\n At Klara, we have an entire team dedicated to helping you with your FreeBSD projects. Whether you\u2019re planning a FreeBSD project, or are in the middle of one and need a bit of extra insight, we\u2019re here to help!", "posttime": "2021-07-29 22:02:23", "source_domain": "news.ycombinator.com", "source_name": "Hacker News", "tags": "openzfs,\u5feb\u7167", "title": "\u8ba9\u6211\u4eec\u8c08\u8c08 OpenZFS \u5feb\u7167", "title_en": "Let\u2019s Talk OpenZFS Snapshots", "transed": 1, "url": "https://klarasystems.com/articles/lets-talk-openzfs-snapshots/", "via": "", "real_tags": ["openzfs", "\u5feb\u7167"]}]