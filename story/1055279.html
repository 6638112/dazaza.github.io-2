<!doctype html><html lang="zh-hans"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>EC2串行控制台 </title><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"><link rel="stylesheet" href="/img/css.css?random="><link data-rh="true" rel="icon" href="/img/favicon.ico"/><script data-ad-client="ca-pub-6067137220025946" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script type="text/javascript" src="https://platform-api.sharethis.com/js/sharethis.js#property=5effb96910009800120b8d4d&product=inline-share-buttons" async="async"></script>
<script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?03c1a0f31299b4a2fbb83c34d6beaac9";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script></head><body><div id="my_header"><div class="container"><nav class="navbar navbar-expand-lg"><a class="navbar-brand" href="/"><img alt="diglog" src="/img/logo.v1.gif" class="rounded-sm"></a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarNavAltMarkup"><div class="navbar-nav"></div></div></nav></div></div><div class="container"><div id="my_content"><h1 class="page_narrow">EC2串行控制台 </h1><div class="row"><div class="col-lg-12 col-12"><div class="my_story_list_item shadow p-3 mb-5 bg-white rounded"><div class="story_page_pub_time page_narrow">2021-04-01 19:37:36</div><div class="story_img_container"><a href="http://img2.diglog.com/img/2021/4/2916ccde73b821574d20a83eb537c3d1.png"><img src="http://img2.diglog.com/img/2021/4/2916ccde73b821574d20a83eb537c3d1.png" class="img-fluid my_story_img" onerror="this.style.display='none'"></a></div><div class="page_narrow text-break page_content"><p>修复生产问题是系统和网络管理员的关键职责之一。事实上，我一直发现它是基础设施工程最有趣的部分之一。潜水如需要深入的问题，掌握在手头的问题中，不仅是（最终）对解决问题的满意度，你也会在路上学习很多事情，你可能不会在正常情况下暴露。</p><p>  操作系统肯定存在此类机会。随着时间的推移，他们已经增长了更复杂，强迫管理员掌握了一亿个配置文件和设置。虽然代码和自动化的基础设施具有大大改进的配置和管理服务器，但总是有错误的错误和故障空间，防止系统正确启动。该列表是无限的：缺少硬件驱动程序，错误配置文件系统，无效的网络配置，不正确的权限等。要使事情更糟糕，很多问题都可以有效地将管理员锁定为系统，防止它们登录，诊断问题并应用适当的修复程序。唯一的选项是与您的服务器带带外连接，虽然客户可以查看EC2实例的控制台输出，但它们无法与其进行交互 - 直到现在。</p><p>  今天，我非常乐意通过建立与Amazon Elastic Compute Cloud（EC2）实例建立串行连接来宣布EC2串行控制台，简单而安全的方法来解决引导和网络连接问题。</p><p>  引入EC2串行控制台EC2串行控制台访问可用于基于AWS Nitro系统的EC2实例。它支持所有主要的Linux发行版，FreeBSD，NetBSD，Microsoft Windows和VMware。</p><p>  如果没有任何工作网络配置，您可以使用AWS管理控制台中的基于浏览器的shell或与托管控制台服务器的SSH连接连接到实例。不需要在实例上运行sshd服务器：唯一的要求是root帐户已被分配密码，因为这是您将要登录的密码。然后，您可以输入命令，就像您有一个键盘和监视器直接连接到实例的串行端口之一。</p><p>    在Linux上，您可以触发Magic Sysrq命令以生成崩溃转储，杀死进程等。</p><p>  在Windows上，您可以使用紧急管理服务（EMS）和特殊管理控制台（SAC）中断引导过程，并以安全模式引导。 </p><p>访问实例的控制台是一个特权操作，应该是紧密控制的，这就是为什么默认在帐户级别不允许使用EC2串行控制台访问。一旦您允许访问帐户，它会应用于此帐户中的所有实例。由于AWS Identity和Access Management（IAM）权限，管理员还可以在组织级别应用于组织级别的控件。正如您所期望的，与EC2串行控制台的所有通信都是加密的，并且我们为每个会话生成唯一密钥。</p><p>  让我们使用Linux进行快速演示。该过程与其他操作系统类似。</p><p>  使用AWS管理控制台连接到EC2串行控制台，我启动了Amazon Linux 2实例。登录它，我决定为其以太网网络接口（/ etc / sysconfig / network-scripts / ifcfg-eth0）打以敲诈网络配置，设置完全虚伪的静态IP地址。请不要在生产实例上尝试！</p><p>  然后，我重新启动实例。几秒钟后，虽然实例在EC2控制台中运行并在其安全组中打开端口22，但我无法使用SSH连接到它。</p><p>  $ ssh -i〜/ .ssh / mykey.pem2-user@ec2-3-238-8-46.Compute-1.amazonaws.com SSH：连接到主机EC2-3-238-8-46.Compute- 1.Amazonaws.com端口22：操作超时</p><p>    首先，我需要允许在我的帐户中访问控制台访问权限。所有所花款都在EC2设置中勾选了一个框。</p><p>    然后，请在EC2控制台中右键单击实例的名称，我选择监视器和故障排除;然后EC2串行控制台。 </p><p>这将打开一个新的窗口，该窗口确认了要连接的实例ID和串行端口号。我只需单击“连接”。</p><p>    这将在浏览器中打开一个新标签。击中Enter，我看到熟悉的登录提示。</p><p>      为此会话启用Magic Sysrq（Sysctl -w kernel.sysrq = 1），我首先列出可用的命令（Ctrl-0 + h），然后询问内存报告（Ctrl-0 + m）。您可以单击下面的图像以获得更大的视图。</p><p>    非常酷！这肯定会派上易于解决复杂问题。这里不需要这一点：我很快恢复网络接口的有效配置，我重新启动网络堆栈。</p><p>    尝试再次连接到实例，我可以看到问题已解决。</p><p>        现在，让我快速使用AWS命令行界面向您展示等效命令。</p><p>  使用AWS CLI连接到EC2串行控制台，这同样简单。首先，我将实例密钥对的SSH公钥发送到串行控制台。请务必添加文件：//前缀。 </p><p>然后，使用＆lt;实例ID＆gt; issh到串行控制台。 端口＆lt;端口号＆gt; 作为用户名，我用登录提示打招呼。  一旦我登录，Magic Sysrq可用，我可以用〜b +命令触发它。 我还可以用〜...终止控制台会话  EC2串行控制台开始使用EC2串行控制台，EC2串行控制台可以更轻松地调试和修复EC2实例上发生的复杂启动和网络问题。 您今天可以在以下AWS地区开始使用它，无需额外费用：  请试一试，让我们知道你的想法。 我们总是期待您的反馈！ 您可以通过您通常的AWS支持联系人或Amazon EC2的AWS论坛发送。  - 朱利安 </p></div><div id="story_share_this"><div class="sharethis-inline-share-buttons"></div></div><div class="text-break sotry_link page_narrow"><a target="_blank" href="https://aws.amazon.com/blogs/aws/troubleshoot-boot-and-networking-issues-with-new-ec2-serial-console/">https://aws.amazon.com/blogs/aws/troubleshoot-boot-and-networking-issues-with-new-ec2-serial-console/</a></div><div class="story_tags page_narrow"><button type="button" class="btn btn-light my_tag"><a href="/tag/串行/">#串行</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/serial/">#serial</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/ec2/">#ec2</a></button></div></div><div class="my_movie_list_item shadow p-3 mb-5 bg-white rounded"><button type="button" class="btn btn-link my_tag"><a href="/tag/web2.0/">#web2.0</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/google/">#google</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/设计/">#设计</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/创意/">#创意</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/摄影/">#摄影</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/游戏/">#游戏</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/图片/">#图片</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/软件/">#软件</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/视频/">#视频</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/手机/">#手机</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/广告/">#广告</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/apple/">#apple</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/iphone/">#iphone</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/网站/">#网站</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/免费/">#免费</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/下载/">#下载</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/windows/">#windows</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/微软/">#微软</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/firefox/">#firefox</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/苹果/">#苹果</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/blog/">#blog</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/音乐/">#音乐</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/博客/">#博客</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/wordpress/">#wordpress</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/恶搞/">#恶搞</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/艺术/">#艺术</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/qq/">#qq</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/web/">#web</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/谷歌/">#谷歌</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/工具/">#工具</a></button></div></div></div><div id="my_footer"><div class=""><a href="/tags/">tags</a> <a href="/users/">users</a></div>&copy;2012-2021 diglog.com </div></div></body></html>