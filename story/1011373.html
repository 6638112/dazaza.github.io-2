<!doctype html><html lang="zh-hans"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>并行Gzip-Pigz</title><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"><link rel="stylesheet" href="/img/css.css?random="><link data-rh="true" rel="icon" href="/img/favicon.ico"/><script data-ad-client="ca-pub-6067137220025946" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script type="text/javascript" src="https://platform-api.sharethis.com/js/sharethis.js#property=5effb96910009800120b8d4d&product=inline-share-buttons" async="async"></script>
<script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?03c1a0f31299b4a2fbb83c34d6beaac9";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script></head><body><div id="my_header"><div class="container"><nav class="navbar navbar-expand-lg"><a class="navbar-brand" href="/"><img alt="diglog" src="/img/logo.v1.gif" class="rounded-sm"></a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarNavAltMarkup"><div class="navbar-nav"></div></div></nav></div></div><div class="container"><div id="my_content"><h1 class="page_narrow">并行Gzip-Pigz</h1><div class="row"><div class="col-lg-12 col-12"><div class="my_story_list_item shadow p-3 mb-5 bg-white rounded"><div class="story_page_pub_time page_narrow">2020-07-13 02:30:18</div><div class="page_narrow text-break page_content"><p>有时，我们希望将一个或多个文件压缩为一个压缩文件或解压缩一个压缩文件。使用gzip、zip或7zip等工具分别创建或解压缩.gz、.zip和.7z文件是非常常见的。然而，Linux上的这些工具都没有在压缩和解压缩过程中使用多核和多线程。当文件数量较多或文件大小较大时，使用单线程进行压缩和解压缩将花费大量时间。</p><p>Pigz是gzip和zip的并行实现之一。使用Pigz可以极大地节省我们花在压缩和解压缩上的时间。在这篇博客文章中，我想简要讨论一下如何使用Pigz。</p><p>博客文章中的Pigz用法主要针对Ubuntu系统。但是，它在其他Linux操作系统上的用法应该几乎相同。</p><p>$Pigz--help用法：Pigz[选项][文件.]。将就地压缩文件，并添加后缀&#39；.gz&#39；。如果未指定文件，则将标准输入压缩为标准输出。选项：-0到-9，-11压缩级别(级别11，zopfli，要慢得多)--快速，--分别是最佳压缩级别1和9-b，--block size mmm将压缩块大小设置为mmmK(默认128K)-c，--stdout将所有处理过的输出写入stdout(Won&#39；t delete)-d，--解压缩压缩的输入-f，--强制重写，压缩.gz，链接，并到终端-F--首先进行迭代，然后进行-11-h的块分割，--help显示帮助屏幕并退出-i，--独立压缩块进行损坏恢复-i，--迭代n次-11优化的迭代次数-J，--maxSplits n-11-k的最大分割块数，--Keep不删除原始数据块。--zip压缩为PKWare zip(.zip)单条目格式-l，--列出压缩输入的内容-L，--License显示Pigz许可证并退出-m，--no-time不存储或恢复mod time-M，-time存储或恢复mod time-n，-no-name不存储或恢复文件名或mod time-N，-name存储或恢复文件名和mod time-O-oneblock不拆分成更小的块。--进程n允许最多n个压缩线程(默认为在线处理器的数量，如果未知，则为8)-q，--Quiet不打印任何消息，即使出错-r，--递归处理所有子目录的内容-R，--rsynCable输入-确定rsync-S的块位置，--后缀.sss使用后缀.sss而不是.gz(用于压缩)-t，--测试压缩输入的完整性-v，--Verbose提供更详细的输出-V--version显示Pigz-Y的版本--同步强制输出文件写入永久存储-z，--zlib压缩为zlib(.zz)而不是gzip格式--&#34之后的所有参数；--&#34；被视为文件。</p><p>#compress#始终使用-k保存原始文件$Pigz-k-p8 image.png#解压缩$Pigz-dk-p8 image.gz。</p><p>然而，vanilla Pigz在将多个文件压缩成一个文件和自定义输出文件路径方面并不是很友好。我们将需要依赖于tar，这是一种归档工具。</p><p>使用PIPE|，我们可以首先将多个文件或目录存档为.tar文件，然后使用Pigz压缩以进一步生成.tar.gz文件。</p><p>#compress$tar-cf-data/index.json|Pigz-k-p8&gt；datet.tar.gz#解压缩(不幸的是两个步骤)$Pigz-k-p8 Datet.tar.gz#将文件解压缩到另一个目录$mkdir-p new_Dataset$tar-XF Dataset.tar-C new_Datet.tar</p><p>或者，tar已经在其界面中集成了自定义压缩器，这使得命令看起来更清晰。</p><p>#compress$tar--use-compress-program=&#34；Pigz-k-p8&#34；-cf datet.tar.gz data/index.json#将文件解压缩到另一个目录$mkdir-p new_dataSet#解压缩$tar--use-compress-program=&#34；pigz-dk-p8&#34；-xf datet.tar.gz-C new_DataSet</p></div><div id="story_share_this"><div class="sharethis-inline-share-buttons"></div></div><div class="text-break sotry_link page_narrow"><a target="_blank" href="https://leimao.github.io/blog/Parallel-Gzip-Pigz/">https://leimao.github.io/blog/Parallel-Gzip-Pigz/</a></div><div class="story_tags page_narrow"><button type="button" class="btn btn-light my_tag"><a href="/tag/gzip/">#gzip</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/压缩/">#压缩</a></button></div></div><div class="my_movie_list_item shadow p-3 mb-5 bg-white rounded"><button type="button" class="btn btn-link my_tag"><a href="/tag/web2.0/">#web2.0</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/google/">#google</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/设计/">#设计</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/创意/">#创意</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/摄影/">#摄影</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/游戏/">#游戏</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/图片/">#图片</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/软件/">#软件</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/视频/">#视频</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/手机/">#手机</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/广告/">#广告</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/apple/">#apple</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/iphone/">#iphone</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/网站/">#网站</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/免费/">#免费</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/下载/">#下载</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/windows/">#windows</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/微软/">#微软</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/firefox/">#firefox</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/苹果/">#苹果</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/blog/">#blog</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/音乐/">#音乐</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/博客/">#博客</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/wordpress/">#wordpress</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/恶搞/">#恶搞</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/艺术/">#艺术</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/qq/">#qq</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/web/">#web</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/谷歌/">#谷歌</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/工具/">#工具</a></button></div></div></div><div id="my_footer"><div class=""><a href="/tags/">tags</a> <a href="/users/">users</a></div>&copy;2012-2021 diglog.com </div></div></body></html>