<!doctype html><html lang="zh-hans"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>将Google删除为单一故障点，第2部分：Gmail Removing Google as a Single Point of Failure Part 2: Gmail</title><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"><link rel="stylesheet" href="/img/css.css?random="><link data-rh="true" rel="icon" href="/img/favicon.ico"/><script data-ad-client="ca-pub-6067137220025946" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script type="text/javascript" src="https://platform-api.sharethis.com/js/sharethis.js#property=5effb96910009800120b8d4d&product=inline-share-buttons" async="async"></script>
<script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?03c1a0f31299b4a2fbb83c34d6beaac9";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script></head><body><div id="my_header"><div class="container"><nav class="navbar navbar-expand-lg"><a class="navbar-brand" href="/"><img alt="diglog" src="/img/logo.v1.gif" class="rounded-sm"></a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarNavAltMarkup"><div class="navbar-nav"></div></div></nav></div></div><div class="container"><div id="my_content"><h1 class="page_narrow">Removing Google as a Single Point of Failure Part 2: Gmail<br/>将Google删除为单一故障点，第2部分：Gmail </h1><div class="row"><div class="col-lg-12 col-12"><div class="my_story_list_item shadow p-3 mb-5 bg-white rounded"><div class="story_page_pub_time page_narrow">2021-01-03 09:39:10</div><div class="page_narrow text-break page_content"><p>I want to remove Google as a single point of failure in my life. In  the first blog post on this subject I detailed my setup for backing up Google Photos and Google Drive contents onto my home server and remotely to  rsync.net. Left out of that post was a solution for Gmail because I hadn’t found one yet. Now I have.</p><p>我希望将Google删除，将其作为生活中的单点失败。在有关此主题的第一篇博客文章中，我详细介绍了将Google Photos和Google Drive内容备份到我的家庭服务器上并远程备份到rsync.net的设置。该帖子被排除在外，是Gmail的一种解决方案，因为我还没有找到。我现在有。</p><p>   This does not mean that I’m going to stop using Google products. Quite the opposite. Gmail, Google Photos, and Google Drive will remain the source-of-truth for all of the things I listed above. What’s different is that should Google disappear tomorrow (or just my account) I would lose no data.</p><p>   这并不意味着我将停止使用Google产品。恰恰相反。 Gmail，Google相册和Google云端硬盘仍将是我上面列出的所有内容的真实来源。不同的是，如果Google明天（或我的帐户）消失，我将不会丢失任何数据。</p><p> This was easy to achieve with Photos and Drive because the data is all there is. With email that’s unfortunately not true.</p><p> 使用照片和云端硬盘很容易实现这一点，因为数据就已经存在了。不幸的是，使用电子邮件是不正确的。</p><p> Incrementally backing up the email data is pretty straightforward–we’ll get into that shortly. But with Gmail your email address is still tied to the  @gmail.com domain. So if my account or all of Google disappears, I won’t be able to receive any more email.</p><p> 增量备份电子邮件数据非常简单-我们将在稍后介绍。但是，使用Gmail时，您的电子邮件地址仍与@ gmail.com域绑定。因此，如果我的帐户或Google的所有帐户都消失了，我将无法再收到电子邮件。</p><p> Of course the “easy” fix here is to just use a domain that I control. Obviously I own  jakewharton.com, and I intend to set that up, but I wanted something shorter. I’ve owned  cob.io for many years with the intention of setting up  j@cob.io, but I go by “Jake”. Luckily the last few years have seen an influx of new TLDs so I managed to grab  ke.fyi. Say hello to  j@ke.fyi!</p><p> 当然，这里的“简单”解决方法是仅使用我控制的域。显然，我拥有jakewharton.com，我打算进行设置，但我想要更短的内容。我已经拥有cob.io多年了，目的是建立j@cob.io，但是我还是“ Jake”。幸运的是，最近几年涌入了新的TLD，所以我设法抢到了ke.fyi。与j@ke.fyi打招呼！</p><p> Having an email on my own domain doesn’t address the problem that there’s still hundreds or thousands of services that I’ve given the Gmail address to. While I can migrate many, there are inevitably those which I can’t or that I simply don’t know exist. The old address needs to remain working.</p><p> 在我自己的域上发送电子邮件并不能解决我仍然将Gmail地址指定给成百上千种服务的问题。尽管我可以迁移很多，但不可避免地会有一些我无法做到或我根本不知道存在的东西。旧地址需要保持工作状态。</p><p>  After browsing a few hosted email solutions, I settled on  Fastmail  (Note: referral link). In addition to a positive recommendation from a friend, there were a few key motivating factors.</p><p>  浏览了一些托管的电子邮件解决方案后，我决定使用Fastmail（注意：引荐链接）。除了朋友的积极推荐外，还有一些关键的激励因素。 </p><p>  A popular feature of Gmail is the ability to append a  + to your user followed by any text and mail will still be sent to you. This can be used for filters or to see who is selling your email address to others.</p><p>Gmail的一项流行功能是能够向用户添加+，然后还会向您发送任何文本和邮件。这可用于过滤器或查看谁将您的电子邮件地址出售给其他人。</p><p> A domain catch-all is the same thing but you can change the entire username. Now I can use addresses like  southwest@ke.fyi without needing to set anything up first. Aside from knowing if they sell my email it also slightly improves security. While the format is human guessable, any automated attack using emails from a data breach simply don’t exist on other services.</p><p> 域包罗万象是一回事，但是您可以更改整个用户名。现在，我可以使用诸如southwest@ke.fyi之类的地址，而无需先进行任何设置。除了知道他们是否出售我的电子邮件外，它还可以稍微提高安全性。尽管这种格式让人容易猜到，但是其他使用数据泄露电子邮件的自动攻击根本就不存在。</p><p> Fastmail supports replying to these catch-all emails using the same address to which it was sent. This is critical to maintain the illusion, especially when dealing with people rather than automated systems.</p><p> Fastmail支持使用发送到的相同地址回复这些通用电子邮件。这对于保持这种幻觉至关重要，尤其是在与人打交道而不是与自动化系统打交道时。</p><p>  Aside from  ke.com I also set up  jakewharton.com and a few other domains. Fastmail sends all emails to my configured domains to a unified inbox rather than forcing me to switch accounts. Instead, my replies will match the incoming address the same as it did for the catch-all.</p><p>  除了ke.com之外，我还建立了jakewharton.com和其他一些域名。 Fastmail将所有发送到我配置的域的电子邮件发送到一个统一的收件箱，而不是强迫我切换帐户。取而代之的是，我的答复将匹配传入地址，就像对全部捕获一样。</p><p> Additionally, when composing emails I can choose the domain from which it will be sent. And for those with catch-all set up, I can even pick arbitrary usernames on those domains. Neat!</p><p> 此外，撰写电子邮件时，我可以选择发送电子邮件的域。对于设置了全部功能的用户，我什至可以在这些域中选择任意用户名。整齐！</p><p>  Since my Gmail address will receive  some mail for the foreseeable future it’s important to use a service that supports more than just a one-time import. Fastmail performs near-realtime incremental syncs to pull in any new email or calendar events from Gmail. Not only is it very fast, but they seem to be able to bypass the rate limits that otherwise exist when downloading your email over IMAP.</p><p>  由于我的Gmail地址在可预见的将来会收到一些邮件，因此使用一项不仅支持一次导入的服务非常重要。 Fastmail执行近乎实时的增量同步，以从Gmail中提取任何新的电子邮件或日历事件。它不仅速度很快，而且似乎能够绕过通过IMAP下载电子邮件时存在的速率限制。</p><p> I can compose email using the Gmail address. I don’t know why I would ever need this, but it’s nice to have.</p><p> 我可以使用Gmail地址撰写电子邮件。我不知道为什么我会需要这个，但是很高兴。 </p><p> In replies to any email Fastmail lets me change the address from which I’m replying. When a person sends an email to my old address, I can use this feature to gradually migrate them over to the new one.</p><p>在回复任何电子邮件时，Fastmail允许我更改要回复的地址。当某人向我的旧地址发送电子邮件时，我可以使用此功能逐步将其迁移到新地址。</p><p>  Remember, it’s not enough to migrate from Gmail to Fastmail for an address on our own domain. We still need to ensure a backup solution. Thankfully Fastmail supports any and every protocol you’d need.</p><p>  请记住，仅将Gmail迁移到Fastmail不足以获取我们自己域中的地址。我们仍然需要确保备份解决方案。幸运的是，Fastmail支持您需要的所有协议。</p><p> As a nice bonus, the Gmail to Fastmail sync bypasses Google’s rate limit meaning you can also sync your entire Gmail within minutes through Fastmail rather than having to spread it out over multiple days when accessing it directly.</p><p> 从Gmail到Fastmail的同步是一项不错的奖励，它绕过了Google的速率限制，这意味着您还可以在几分钟之内通过Fastmail同步整个Gmail，而不必在直接访问时将其分散在几天之内。</p><p>  Almost immediately after the previous blog post people were sending me a myriad of tools for Gmail backup. Thank you for that!</p><p>  在上一篇博客文章发布后不久，人们立即向我发送了许多用于Gmail备份的工具。谢谢你！</p><p>  After trying a few tools I settled on  mbsync which is part of the  isync project. The tool is very generic but can be used to synchronize emails to the  Maildir format over IMAP.</p><p>  在尝试了一些工具之后，我选择了mbsync，它是isync项目的一部分。该工具非常通用，但可用于通过IMAP将电子邮件同步为Maildir格式。</p><p> Maildir is a standard format that can be read by many tools. Unlike mbox, the format used in Google Takeout for Gmail, Maildir uses individual files for each email. This lends itself to incremental updates, tools like  grep, and compression.</p><p> Maildir是可以由许多工具读取的标准格式。与mbox（Gmail在Google Takeout for Gmail中使用的格式）不同，Maildir对每封电子邮件使用单独的文件。这有助于进行增量更新，grep之类的工具和压缩。</p><p> Few clients operate on Maildir directly, unfortunately. Definitely none which I’m comfortable using (sorry, Mutt).</p><p> 不幸的是，很少有客户端直接在Maildir上进行操作。绝对不会让我感到满意（对不起，马特）。 </p><p> It’s quite easy to push Maildir back into any IMAP-supported host with  mbsync should you need to restore from a backup. And if you really need an always-on, self-hosted client you can push into one as part of your sync.</p><p>如果您需要从备份中还原，可以很容易地通过mbsync将Maildir推回到任何IMAP支持的主机中。而且，如果您确实需要始终在线，自我托管的客户端，则可以将其作为同步过程的一部分。</p><p>  In order to automate this procedure I wrapped  mbsync up in a Docker container as  jakewharton/mbsync which can run it on a periodic schedule.</p><p>  为了使该过程自动化，我将mbsync打包为jakewharton / mbsync并打包在Docker容器中，该容器可以定期运行。</p><p> It uses same  healthchecks.io service as the  rclone and  gphotos-sync containers from the last post for monitoring. I personally send this to my own Slack workspace which gives me simple history and easy notifications on all my devices.</p><p> 它使用与上一个帖子中的rclone和gphotos-sync容器相同的healthchecks.io服务进行监视。我个人将其发送到自己的Slack工作区，该工作区为我提供了所有设备上的简单历史记录和便捷通知。</p><p>  version :  &#34; 3.6&#34; services :  # Services from previous blog post...  mbsync-jake :  container_name :  mbsync-jake  image :  jakewharton/mbsync:latest  restart :  unless-stopped  volumes :  -  /tanker/backup/jake/mail:/mail  -  ${USERDIR}/docker/mbsync-jake:/config  environment :  # Hourly  -  &#34; CRON=0   *   *   *   *&#34;  -  &#34; CHECK_URL=https://hc-ping.com/...&#34;</p><p>  版本：＆＃34; 3.6＆＃34;服务：＃来自先前博客文章的服务... mbsync-jake：容器名称：mbsync-jake图像：jakewharton / mbsync：最新重启：除非停止卷：-/ tanker / backup / jake / mail：/ mail-$ {USERDIR } / docker / mbsync-jake：/ config环境：＃每小时-＆＃34; CRON = 0 * * * *＆＃34; -＆＃34; CHECK_URL = https：//hc-ping.com/...&#34;</p><p> For information on how to set up the container please see  the repo’s README.</p><p> 有关如何设置容器的信息，请参见存储库的自述文件。</p><p>  Just like the  “Data Storage” and “Data Replication” sections from the last post, the backup goes to a dedicated ZFS filesystem. This filesystem is regularly snapshotted to provide local history. The data and all its snapshots are also synchronized to  rsync.net for an off-site copy.</p><p>  就像上一篇文章的“数据存储”和“数据复制”部分一样，备份将转到专用的ZFS文件系统。该文件系统会定期快照以提供本地历史记录。数据及其所有快照也将同步到rsync.net以进行非现场复制。</p><p> $ zfs listNAME USED AVAIL REFER MOUNTPOINTtanker 18.4T 2.08T 151K /tankertanker/backup 529G 2.08T 151K /tanker/backuptanker/backup/angela 172G 2.08T 140K /tanker/backup/angelatanker/backup/angela/photos 172G 2.08T 172G /tanker/backup/angela/photostanker/backup/jake 337G 2.08T 151K /tanker/backup/jaketanker/backup/jake/drive 78.9G 2.08T 78.9G /tanker/backup/jake/drivetanker/backup/jake/mail 12.1G 2.08T 12.1G /tanker/backup/jake/mailtanker/backup/jake/photos 246G 2.08T 148G /tanker/backup/jake/photos</p><p> $ zfs listNAME使用的可用引用MOUNTPOINTtanker 18.4T 2.08T 151K / tankertanker /备份529G 2.08T 151K / tanker / backuptanker / backup / angela 172G 2.08T 140K / tanker / backup / angelatanker / backup / angela / photos 172G 2.08T 172 / backup / angela / photostanker / backup / jake 337G 2.08T 151K / tanker / backup / jaketanker / backup / jake / drive 78.9G 2.08T 78.9G / tanker / backup / jake / drivetanker / backup / jake / mail 12.1G 2.08T 12.1G /油罐/备份/杰克/邮件油罐/备份/杰克/照片246G 2.08T 148G /油罐/备份/杰克/照片 </p><p> I didn’t bother enabling compression on the filesystem because it’s only 12GiB. I suspect it would compress very well and it’s something that I can always turn on later.</p><p>我没有在文件系统上启用压缩功能，因为它只有12GiB。我怀疑它的压缩效果很好，以后我可以随时打开它。</p><p>  I did this migration one week after the previous post so I’ve been on Fastmail for about three weeks now. In general it’s been a positive experience. The Android app is hybrid so sometimes it feels a bit weird, but otherwise the clients have some nice features. My favorite so far is how it deals with quoted sections in long threads:</p><p>  我是在上一篇帖子之后一周进行迁移的，所以我在Fastmail上已经待了大约三个星期了。总的来说，这是一次积极的经历。 Android应用程序是混合型的，因此有时感觉有点怪异，但除此之外，客户端具有一些不错的功能。到目前为止，我最喜欢的是它如何处理长线程中引用的部分：</p><p>  Having much more control over my email, photos, and files is comforting but I sincerely hope I never need to rely on these backups.</p><p>  对我的电子邮件，照片和文件的控制更多，这很令人欣慰，但我衷心希望我永远不必依赖这些备份。</p><p> Once configured the Docker containers have been almost entirely maintenance free. I haven’t touched the photos or files sync for over a month now. Sometimes it hiccups and notifies me, but it’s always recovered on its own.</p><p> 配置完成后，Docker容器几乎完全无需维护。我有一个多月没有触摸过同步的照片或文件了。有时它会打h并通知我，但始终会自行恢复。</p><p>  Now that Google is mostly removed as a single point of failure (I’m still relying on them for Keep and employment for now), it seems like getting automated backups rolling for all my GitHub projects is the next most pressing matter.</p><p>  既然Google大部分都是由于单点故障而被删除的（我现在仍然依靠它们来进行Keep和雇佣），那么似乎所有下一个GitHub项目都需要进行自动备份滚动。 </p></div><div id="story_share_this"><div class="sharethis-inline-share-buttons"></div></div><div class="text-break sotry_link page_narrow"><a target="_blank" href="https://jakewharton.com/removing-google-as-a-single-point-of-failure-gmail/">https://jakewharton.com/removing-google-as-a-single-point-of-failure-gmail/</a></div><div class="story_tags page_narrow"><button type="button" class="btn btn-light my_tag"><a href="/tag/google/">#google</a></button></div></div><div class="my_movie_list_item shadow p-3 mb-5 bg-white rounded"><button type="button" class="btn btn-link my_tag"><a href="/tag/web2.0/">#web2.0</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/google/">#google</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/设计/">#设计</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/创意/">#创意</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/摄影/">#摄影</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/游戏/">#游戏</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/图片/">#图片</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/软件/">#软件</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/视频/">#视频</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/手机/">#手机</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/广告/">#广告</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/iphone/">#iphone</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/网站/">#网站</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/免费/">#免费</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/windows/">#windows</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/下载/">#下载</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/苹果/">#苹果</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/微软/">#微软</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/apple/">#apple</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/firefox/">#firefox</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/blog/">#blog</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/音乐/">#音乐</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/博客/">#博客</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/wordpress/">#wordpress</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/恶搞/">#恶搞</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/qq/">#qq</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/艺术/">#艺术</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/web/">#web</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/工具/">#工具</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/分享/">#分享</a></button></div></div></div><div id="my_footer"><div class=""><a href="/tags/">tags</a> <a href="/users/">users</a></div>&copy; 2020 diglog.com </div></div></body></html>