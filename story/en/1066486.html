<!doctype html><html lang="zh-hans"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>偏离一误差锁定抵押亿美元的崩溃崩溃 Off-by-one error locks collateral after billon dollar stablecoin collapse</title><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"><link rel="stylesheet" href="/img/css.css?random="><link data-rh="true" rel="icon" href="/img/favicon.ico"/><script data-ad-client="ca-pub-6067137220025946" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script type="text/javascript" src="https://platform-api.sharethis.com/js/sharethis.js#property=5effb96910009800120b8d4d&product=inline-share-buttons" async="async"></script>
<script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?03c1a0f31299b4a2fbb83c34d6beaac9";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script></head><body><div id="my_header"><div class="container"><nav class="navbar navbar-expand-lg"><a class="navbar-brand" href="/"><img alt="diglog" src="/img/logo.v1.gif" class="rounded-sm"></a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarNavAltMarkup"><div class="navbar-nav"></div></div></nav></div></div><div class="container"><div id="my_content"><h1 class="page_narrow">Off-by-one error locks collateral after billon dollar stablecoin collapse<br/>偏离一误差锁定抵押亿美元的崩溃崩溃 </h1><div class="row"><div class="col-lg-12 col-12"><div class="my_story_list_item shadow p-3 mb-5 bg-white rounded"><div class="story_page_pub_time page_narrow">2021-06-17 23:29:13</div><div class="story_img_container"><a href="http://img2.diglog.com/img/2021/6/d87e30c5fb351e898bdb3355e3d3197a.jpeg"><img src="http://img2.diglog.com/img/2021/6/d87e30c5fb351e898bdb3355e3d3197a.jpeg" class="img-fluid my_story_img" onerror="this.style.display='none'"></a></div><div class="page_narrow text-break page_content"><p>The dust hasn’t even settled on the collapse of the IRON stable coin —$262 million in USDC collateral is still locked in a smart contract due to an embarrassing programming bug —but I already feel like writing about it. The whole thing is funny to me, because I got out relatively unscathed. At least for me it was educational, revelatory even.</p><p>由于令人尴尬的编程错误，灰尘甚至没有沉淀铁稳定硬币的崩溃 -  262亿美元仍然被锁定在智能合同中，但我已经觉得自己写作。整件事对我来说很有趣，因为我相对毫发了毫发。至少对我来说，它是教育，启示均匀。</p><p>  The collapse of IRON was (as of this wr  iting) not a rug pull. The developers seem to have been earnest in their attempt to create a new kind of stablecoin , one that was only partially collateralized by a “real” stablecoin. Like many financial collapse stories, this is a story of folly.</p><p>  铁的崩溃是（如这种writing）没有拉力拉杆。开发人员似乎是为了创造一种新的stablecoin，它似乎得到了最高的，这是一个被“真正的”stablecoin部分抵押的一个。像许多金融崩溃故事一样，这是一个愚蠢的故事。</p><p> [EDIT: I’ve since learned that the developer(s?) behind this are already the laughing stock of the DeFi community, having wrecked each of their 3 previous projects (now 4) — though this might be their biggest hit yet]</p><p> [编辑：我从自我了解到这一点已经是Defi社区的笑容，遭到了他们的3个上一个项目中的每一个（现在4） - 虽然这可能是他们最大的打击]</p><p>  The idea behind the IRON stablecoin is one of “efficiency”. Other on-chain stablecoins like DAI are over-collateralised. For every $1 of DAI, there’s ~$1.75 worth of crypto assets in the DAI system. In the case of USDC (and supposedly USDT), there’s $1 sitting in a bank account somewhere for every $1 on-chain. Couldn’t we do better than that?</p><p>  铁稳定素背后的想法是“效率”之一。像戴一样的其他连锁店稳压是过度抵押的。戴伊上的每一美元，傣族系统中有〜1.75美元的加密资产。在USDC（和据说USDT）的情况下，每次1美元的银行账户中有1美元，每次1美元。我们不能比这更好吗？</p><p> In the past, attempts have been made to devise purely algorithmic stablecoins, that weren’t backed by anything. The developers of IRON correctly pointed out the flaw in these: They are dependent on new money coming in, a condition least likely to be met when the peg is broken. From the IRON documentation:</p><p> 过去，已经尝试设计了纯粹的算法stablecoins，这些算法没有用任何东西备份。铁的开发人员正确地指出了其中的缺陷：它们依赖于进来的新资金，当钉被破坏时最不可能满足的条件。来自铁文档：</p><p> Non-collateralized stablecoins require continual growth to be successful. In the event of a price crash, there is no collateral to liquidate the coin back into, and the holder’s money would be lost, as seen with many past projects trying to utilize such design [sic].</p><p> 非抵押的Stablecoins需要持续增长以获得成功。如果价格崩溃，没有抵押品将硬币归还回来，并且持有人的资金将丢失，如尝试使用这种设计的许多过去项目[SIC]所见。</p><p> Instead, IRON took a hybrid approach: Partially collateralize the stablecoin with USDC— it was around 75% for most of its short lifespan —with the rest coming form a volatile asset, TITAN.</p><p> 相反，铁采取了一个混合方法：部分抵押了USDC的STablecoin  - 它的大部分短寿命大约为75％ - 其余的即将到来，形成一个挥发性资产。 </p><p>  The stability was to be ensured as follows: If the price of IRON fell below $1, arbitrageurs could buy it for less then $1 on the market, and then redeem it with the IRON treasury (a contract on the Polygon chain) for $0.75 USDC and $0.25 worth of TITAN.</p><p>稳定性应确保如下：如果铁的价格低于1美元，则符号可以在市场上少1美元购买它，然后以0.75美元的价格将其兑换为铁库金（多边形链的合同）和价值0.25美元的泰坦。</p><p> Here the problem should have become apparent: Arbitrageurs are not in the business of token speculation. They don’t want to hold any risky asset for longer than necessary (ideally buy and sell it within a single transaction). So they dump it on the market to collect their risk-free profit. This put price pressure on TITAN, thereby further de-pegging IRON which is partially priced in it.</p><p> 这里的问题应该变得显而易见：套利者不在令牌炒作业务中。他们不想持有任何风险资产，超过必要的时间（理想情况下在单一交易中购买和销售它）。因此，他们将其倾倒在市场上以收集无风险的利润。这将价格压力放在泰坦，从而进一步的脱钉铁，其部分地定价。</p><p> In their documentation, the IRON developers had the following to say about the value of the TITAN token:</p><p> 在他们的文件中，铁开发商有以下几点令牌的价值：</p><p> the remaining portion is denominated in a volatile asset [TITAN], which is required as collateral. This requirement creates […]  a natural demand for the volatile asset. [emphasis added]</p><p> 剩余部分以挥发性资产[泰坦]计值，这是作为抵押品所需的。此要求会为挥发性资产创造自然需求。 [重点添加]</p><p> In other words, they expected TITAN to have some value, because it could be used to mint IRON. By doing this, they recreated the incentives of algorithmic stablecoins they’ve denounced earlier: More money has to come in, otherwise the peg collapses.</p><p> 换句话说，他们预计泰坦有一些价值，因为它可以用来薄荷。通过这样做，他们重新创建了他们早些时候谴责的算法Stablecoins的激励：更多的资金必须进入，否则PEG崩溃了。</p><p> If they had chosen a volatile asset that had some value outside of their own ecosystem (perhaps MATIC, the token used to pay the transactions fees on the Polygon chain) it could have lasted a little longer, but I wouldn’t bet on it — at least not a second time.</p><p> 如果他们选择了在自己的生态系统之外有一些价值的挥发性资产（可能是Matic，用于支付多边形链的交易费用的令牌）它可能已经持续了一点，但我不会打赌它 - 至少不是第二次。</p><p>  Bad ideas are born every day, but why would anyone bother? At its peak, something like 2 billion USD were poured into this ecosystem (I should clarify: 2 billion worth of magic internet beans, not real money. EDIT2: Only about half of this was IRON).</p><p>  糟糕的想法每天都出生，但为什么有人会打扰？在它的高峰时，20亿美元的东西被涌入这个生态系统（我应该澄清：价值20亿魔术互联网豆，而不是真钱。编辑2：只有大约一半是铁）。 </p><p> At first glance, one could argue that the innovative design of the stablecoin is what attracted all this capital (who wouldn’t like turning $1 into $1.5 through financial alchemy?) However, neither was IRON the first to implement this design, nor did  the same contracts by the same developers deployed on the Binance Smart Chain attract anywhere near as much attention. In fact, the IRON stablecoin continues to “function” on the BSC network as of this writing, keeping its $1 peg, with little fanfare.</p><p>乍一看，人们可以争辩说，斯巴伯因的创新设计就是吸引了所有这一资本（谁不想通过金融炼金术将1美元变成1.5美元？）然而，首先熨烫是实现这一设计的铁，也不是同一组织由同一开发者部署在二明赛智能链中的任何地方都在关注附近的任何地方。事实上，借助于本撰写的BSC网络的铁稳态素继续“功能”，保持其1美元的价格，小粉丝很少。</p><p> Instead the answer might be found in the yield farming ecosystem on the Polygon Chain. There, several auto-compounders are vying for people’s capital. Beefy.finance, Autofarm, and Polycat just to name the major ones. These services are legit (for some definition of legit): They offer to automate the process of collecting and re-investing transaction fees from providing liquidity in automated market makers, which is in turn a legit (by some definition) business: Provide capital, take exchange rate risk, collect transaction fees.</p><p> 而是在多边形链的产量农业生态系统中可能会发现答案。在那里，几个自动复合者正在争夺人民资本。 Beefy.finance，AutoFarm和Polycat只是为了命名主要的。这些服务是合法的（对于一些合法的定义）：他们提供自动化收集和重新投资交易费用的过程，从提供自动化市场制造商的流动性，这反过来就是合法的（由某些定义）业务：提供资本，采取汇率风险，收取交易费用。</p><p> With compound interest factored in, this typically amounts to a couple of percentage points per year, depending on market activity. Good compared to a bank account, but nothing to write home about. Something odd happened with the IRON-USDC pair though. These auto compounders were showing returns of  2% per day (something like 30,000% per year)  on a pair of stablecoins.</p><p> 随着复合利息，这通常达到每年的几个百分点，具体取决于市场活动。与银行账户相比，但没有什么可以写回家的。铁USDC对发生了一些奇怪的事情。在一对STableCoins上，这些自动复合剂显示每天2％的返回2％（每年30,000％）。</p><p>  These returns are extrapolations based on 24h trading volume. In that sense they are “real” — calculated by the same formula as all other numbers on these sites. It so happened that people were piling into the USDC-IRON pair like there was no tomorrow, generating insane amounts of trading fees, driving up the displayed APY up even further, attracting more suckers to pile into it, generating more fees…</p><p>  这些返回是基于24小时交易量的推断。在这种感觉中，它们是“真实” - 通过与这些站点上的所有其他数字相同的公式计算。所以发生的是，人们打破了USDC-Iron对，就像没有明天一样，产生疯狂的交易费用，甚至进一步推动展示的Apy，吸引更多的吸盘堆积，产生更多的费用......</p><p> For a while, this worked. Every day people would earn crazy rewards, expecting to have more USD than atoms in the universe in 3 years time. Someone on the IronFinance subreddit had the following question:</p><p> 有一段时间，这项工作。每天人们都会赚取疯狂的奖励，预计3年时间在宇宙中的原子比原子更多。 Ironfinance Dumreddit上有人有以下问题：</p><p> [about the 30,000% APY] I’m wondering if this can last mathematically?   — Someone on Reddit</p><p> [关于30,000％的APY]我想知道这是否可以数学上？ -  Reddit上的人</p><p> “Mathematically”. Clearly, many were not even remotely qualified to be involved in this.</p><p> “数学上”。显然，许多人甚至没有远程资格参与其中。 </p><p>  As is to be expected, there are plenty of conspiracy theories to go around attempting to explain why TITAN collapsed. I cannot speak to any of them, but with with something as structurally unsound as the IRON stablecoin, and a fuse burning this fast — from nothing to 1 billion with two weeks — any number of random events could have triggered the collapse.</p><p>正如要预期的那样，有足够的阴谋理论来围绕试图解释泰坦为何崩溃。我不能和他们中的任何一个人说话，但在结构上没有像铁stablecoin那样的东西，而且融合了这一点快速燃烧 - 从没有到10亿到10亿 - 任何数量的随机事件都可以触发崩溃。</p><p> The collapse is the least interesting part about this story. A worthless asset going to $60 and back to $0 happens every day somewhere in the crypto wild west. A billion $ worth in stablecoins attached to it is the — somewhat — novel part.</p><p> 崩溃是对这个故事的最不有趣的部分。每天在Crypto Wild West的某个地方，一场毫无价值的资产达到60美元并恢复到0美元。在附加的stablecoins中价值十亿美元是 - 有点新的部分。</p><p>  After the collapse of TITAN, there were still $0.74 worth of USDC in the IRON treasury for every 1 IRON outstanding. It can be redeemed by the IRON contract itself at any moment regardless of the price in the market (currently ~$0.71). The remainder towards a full $1 was to be payed out in TITAN, but obviously that part is irrelevant now.</p><p>  泰坦崩溃后，每1根铁都有0.74美元的USDC，每一铁都有优秀。无论市场上的价格如何，它可以在任何时刻被铁合同本身兑换（目前〜0.71美元）。剩下的1美元的余额是在泰坦支付，但显然，现在这一部分是无关紧要的。</p><p> In practice it looks a little different. I’ve mentioned in the beginning the the whole episode isn’t over yet, because $272 million worth of USDC is still locked up in in the contract. Why hasn’t everyone recovered their 74 cents?  Here things become  truly hilarious. It is due to the following line in the  redeem function of the IRON smart contract:</p><p> 在实践中，它看起来有点不同。我在开始时，整个集中尚未结束，因为2.72亿美元的USDC仍然在合同中被锁定。为什么每个人都恢复了74美分？这里的事情变得真正搞笑。它是由于铁智能合同的兑换功能下行：</p><p>  _share_price here refers to the price of TITAN, as provided by an oracle, which is correctly reporting it as…  0 (somewhere in the distance, you can hear a room full software engineers burst into laughter ).</p><p>  _share_price在这里是指泰坦的价格，由Oracle提供的，这是正确将其报告为... 0（在远处的某处，您可以听到一个房间全软件工程师爆发为笑声）。</p><p> Since the condition is specified as  greater than ( &gt;), rather than  greater than or equal ( &gt;=) , the condition can no longer be met, and so every call to  redeem fails. A code audit likely would have caught this (this type of bug is so common in software development, I’ve probably made it hundreds of times myself), but  of course this smart contract   was not audited. Only its sister-contract on the Binance Smart Chain, written in a different language, was.</p><p> 由于条件指定为大于（＆gt;），而不是大于或等于（＆gt; =），因此无法再满足条件，因此每个呼叫都会失败。代码审核可能会抓住这一点（这种类型的错误在软件开发中是如此常见，我可能自己制作了数百次），但当然这个智能合同没有审计。只有其单向智能链的姊妹合同，用不同的语言写作。</p><p>  Because the TITAN price falls to 0  which we have unthought of [sic], the contract will revert the redemption transaction. [emphasis mine]</p><p>  因为泰坦价格下跌至0，我们未来的[SIC]，合同将恢复赎回交易。 [强调我的] </p><p> Those familiar with the history of financial catastrophes know that the phrase “we never expected …” features prominently in it. Another trope is “we regret to inform you” and “we take full responsibility” (without taking responsibility). I expect these to follow in their yet to be published postmortem.</p><p>那些熟悉金融灾难历史的人知道“我们从未期待过......”这句话在其中突出起来。 另一个牵引者是“我们很遗憾地通知你”和“我们承担全部责任”（不承担责任）。 我希望这些是在他们尚未发表的淘汰后遵循。 </p></div><div id="story_share_this"><div class="sharethis-inline-share-buttons"></div></div><div class="text-break sotry_link page_narrow"><a target="_blank" href="https://irony-97882.medium.com/the-melting-of-iron-89469b01e083">https://irony-97882.medium.com/the-melting-of-iron-89469b01e083</a></div><div class="story_tags page_narrow"><button type="button" class="btn btn-light my_tag"><a href="/tag/锁定/">#锁定</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/locks/">#locks</a></button></div></div><div class="my_movie_list_item shadow p-3 mb-5 bg-white rounded"><button type="button" class="btn btn-link my_tag"><a href="/tag/web2.0/">#web2.0</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/google/">#google</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/设计/">#设计</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/创意/">#创意</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/摄影/">#摄影</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/图片/">#图片</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/游戏/">#游戏</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/软件/">#软件</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/视频/">#视频</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/手机/">#手机</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/广告/">#广告</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/windows/">#windows</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/iphone/">#iphone</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/免费/">#免费</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/网站/">#网站</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/下载/">#下载</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/微软/">#微软</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/blog/">#blog</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/firefox/">#firefox</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/音乐/">#音乐</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/苹果/">#苹果</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/apple/">#apple</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/博客/">#博客</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/wordpress/">#wordpress</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/恶搞/">#恶搞</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/艺术/">#艺术</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/qq/">#qq</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/谷歌/">#谷歌</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/web/">#web</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/工具/">#工具</a></button></div></div></div><div id="my_footer"><div class=""><a href="/tags/">tags</a> <a href="/users/">users</a></div>&copy;2012-2021 diglog.com </div></div></body></html>