<!doctype html><html lang="zh-hans"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>进入第二层改进世界 Enter the world of Layer 2 improvements</title><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"><link rel="stylesheet" href="/img/css.css?random="><link data-rh="true" rel="icon" href="/img/favicon.ico"/><script data-ad-client="ca-pub-6067137220025946" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script type="text/javascript" src="https://platform-api.sharethis.com/js/sharethis.js#property=5effb96910009800120b8d4d&product=inline-share-buttons" async="async"></script>
<script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?03c1a0f31299b4a2fbb83c34d6beaac9";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script></head><body><div id="my_header"><div class="container"><nav class="navbar navbar-expand-lg"><a class="navbar-brand" href="/"><img alt="diglog" src="/img/logo.v1.gif" class="rounded-sm"></a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarNavAltMarkup"><div class="navbar-nav"></div></div></nav></div></div><div class="container"><div id="my_content"><h1 class="page_narrow">Enter the world of Layer 2 improvements<br/>进入第二层改进世界 </h1><div class="row"><div class="col-lg-12 col-12"><div class="my_story_list_item shadow p-3 mb-5 bg-white rounded"><div class="story_page_pub_time page_narrow">2021-01-19 03:31:21</div><div class="story_img_container"><a href="http://img2.diglog.com/img/2021/1/3505b33e902e4217f61ac1c4e54b5091.jpeg"><img src="http://img2.diglog.com/img/2021/1/3505b33e902e4217f61ac1c4e54b5091.jpeg" class="img-fluid my_story_img" onerror="this.style.display='none'"></a></div><div class="page_narrow text-break page_content"><p>With Ethereum&#39;s price soaring over the psychological threshold of $1,000, sending a single transaction to Ethereum&#39;s chain (L1) is becoming prohibitively expensive. The figure below depicts the average transaction fee of an Ethereum transaction in USD throughout the past year. At the time of writing the average transaction fee is over 5$ per transaction (not too bad), but a few days ago we almost reached the 18$ mark. If you are a regular Ethereum DApps user these days your ETH balance may be suffering trying to fund all of your transaction; if, on the other hand, you are a blockchain startup subsidising the transaction fees of your thousands of users, well... I wouldn&#39;t be surprised if you are bankrupt by now.</p><p>随着以太坊的价格飙升至心理门槛1,000美元以上，向以太坊链（L1）发送单笔交易变得越来越昂贵。下图显示了过去一年以美元进行的以太坊交易的平均交易费用。在撰写本文时，每笔交易的平均交易费超过5美元（还不错），但是几天前，我们几乎达到了18美元。如果您现在是以太坊DApp的普通用户，那么您的ETH余额可能会难以为您的所有交易提供资金；另一方面，如果您是一家资助数千名用户交易费用的区块链初创公司，那么……如果您现在破产了，我不会感到惊讶。</p><p>  Fortunately, this is a well-known limitation of the Ethereum network, along with its scalability, and as such there are already schemes in place to circumvent these issues in the shorter and longer term. Allow me to welcome you to the fascinating world of Layer 2 (L2) improvements.</p><p>  幸运的是，这是以太坊网络的一个众所周知的局限性，以及它的可扩展性，因此，已经有一些方案可以在短期和长期内规避这些问题。请允许我欢迎您进入第2层（L2）改进的迷人世界。</p><p>  The term &#34;Layer 2&#34; is used to refer to any solution or protocol designed to help scale Ethereum applications. They are called Layer 2 solutions because they complement Ethereum&#39;s core protocol, i.e. the Layer 1,. Their use doesn&#39;t require any change over the base protocol (no forks or node updates required). The main goal of Layer 2 solutions is to minimise the number of transactions that an application needs to commit to the Ethereum blockchain for its right (and secure) operation. This has several interesting consequences:</p><p>  术语＆＃34第2层＆＃34;用于表示旨在帮助扩展以太坊应用程序的任何解决方案或协议。之所以将它们称为第2层解决方案，是因为它们补充了以太坊的核心协议即第1层。它们的使用不需要对基本协议进行任何更改（不需要派生或节点更新）。第2层解决方案的主要目标是最大程度地减少应用程序为进行正确（和安全）操作而需要提交给以太坊区块链的交易数量。这会产生一些有趣的结果：</p><p> By minimising the number of transactions sent to mainnet, we are minimising the fees we need to pay for our application&#39;s operation. So these Layer 2 solutions enable us with an escape boat to the &#34;fees nightmare&#34; Ethereum is becoming these days.</p><p> 通过最大程度地减少发送到主网的交易数量，我们可以最小化我们为应用程序操作所需要支付的费用。因此，这些第2层解决方案使我们能够逃离“费梦night”。以太坊正在变得越来越近。</p><p> The fact that through L2 solutions one can perform valid transactions without having to commit them immediately to the main chain gives developers the ability to build high-throughput applications. No more worrying about Ehtereum&#39;s 15 secs average block validation time or 15 transactions per second.</p><p> 通过L2解决方案，人们可​​以执行有效的交易而不必立即将其提交给主链这一事实使开发人员能够构建高吞吐量的应用程序。不必再担心以太坊平均15秒的区块验证时间或每秒15次交易。</p><p> Finally, being able to perform transactions without having to wait 15 secs for them to be validated is a huge leap forward in terms of UX for decentralized applications. Who has not despaired more than once waiting for its transaction to come through before doing something else?</p><p> 最后，就分散应用程序的用户体验而言，无需等待15秒钟即可完成验证就能够执行事务，这是一个巨大的飞跃。谁对完成其他交易之前的等待绝不止一次？</p><p> L2 solutions pave the way to Ethereum&#39;s scalability. They offer an infrastructure on top of the network to scale without compromising its base decentralization and security, and avoiding breaking changes in the core protocol right away (enabling a progressive migration).</p><p> L2解决方案为以太坊的可扩展性铺平了道路。它们提供了网络顶部的基础架构以进行扩展，而不会损害其基础分散性和安全性，并且避免立即破坏核心协议中的更改（启用渐进式迁移）。 </p><p>  All L2 solutions are based on the same principles. They build an infrastructure on top of Ethereum which accepts user transactions, validates them, aggregates them, and commits them to Layer 1 (i.e. Ethereum&#39;s main chain). The aggregation of transactions is done in a way where they can still be individually verified once they are anchored to mainnet. Thus, L2 transactions can be considered secure and immutable the moment the L2 batch they belong to has been anchored to mainnet. The specifics of how this is done varies substantially among L2 solutions, but let&#39;s have a look at two wide-spread L2 solutions to understand their operation in detail.</p><p>所有的L2解决方案都基于相同的原理。他们在以太坊之上建立一个基础架构，以接受用户交易，对其进行验证，对其进行汇总并将其提交给第1层（即以太坊的主链）。事务聚合的方式是，一旦将它们锚定到主网上，仍然可以对它们进行单独验证。因此，一旦L2事务所属的L2批处理已被锚定到主网上，就可以将其视为安全且不可更改。在L2解决方案中，如何完成此操作的细节有很大不同，但是让我们看一下两个广泛使用的L2解决方案，以详细了解它们的操作。</p><p>  Rollups are solutions that bundle (or &#34;roll up&#34;) sidechain or off-chain transactions into a single transaction that is then committed to L1. To secure all of these bundled transactions, and to make them individually verifiable, a cryptographic proof is generated from the bundle. In the early days, this proof could be something as simple as a Merkle Proof, but with the recent advancements in cryptography, these proofs are now generated through  zk-SNARKs (zero knowledge succinct non-interactive argument of knowledge), and other zero-knowledge constructions.</p><p>  汇总是将侧链或脱链交易捆绑（或“汇总”）为单个交易，然后提交给L1的解决方案。为了保护所有这些捆绑交易，并使它们可单独验证，将从捆绑中生成加密证明。早期，该证明可能像Merkle证明一样简单，但是随着密码学的最新发展，这些证明现在是通过zk-SNARKs（零知识简洁的非交互式知识论点）以及其他零-证明生成的。知识结构。</p><p> A requirement for rollups to work is to have some kind of Ethereum-compatible independent blockchain (either with a reduced number of nodes or with additional features for high-performance) responsible for handling signature verification, contract execution, etc. able to verify the validity of the transactions that are afterwards bundled for their commitment in the main Ethereum chain. L2 rollup sidechains are responsible for verification and contract execution, while the L1 exclusively stores immutably transactions&#39; data.</p><p> 汇总工作的要求是拥有某种与以太坊兼容的独立区块链（具有数量减少的节点或具有高性能的附加功能），负责处理签名验证，合同执行等，以验证有效性之后因其在以太坊主链中的承诺而捆绑在一起的交易中。 L2汇总侧链负责验证和合同执行，而L1专门存储不变的交易＆＃39;数据。</p><p> Rollups are the perfect L2 solution if you want to reduce users fees (you pay fees for a single L1 transaction for each X transactions bundled from the side-chain); open participation (there are no prerequisites to start using rollups, just install your preferred sidechain compatible client, and start sending transactions seamlessly); and fast transactions throughput (bear in mind that the sidechain is in the end an independent Ethereum-compatible blockchain with its own ledger, its own consensus, and its own economy. Without any changes in Ethereum&#39;s L1 protocol we can leverage its trust while operating in a high-performant sidechain).</p><p> 如果您想减少用户费用（您为侧链捆绑的每X笔交易支付一次L1交易的费用），汇总是完美的L2解决方案；开放参与（无需任何先决条件即可开始使用汇总，只需安装您首选的侧链兼容客户端，然后开始无缝发送交易）；和快速的交易吞吐量（请记住，侧链最终是一个独立的以太坊兼容的区块链，具有自己的分类帐，自己的共识和自己的经济。在以太坊的L1协议中没有任何变化，我们可以利用其在高效的侧链中信任时）。</p><p> Actually, this approach of sharding several sidechain networks processing and bundling transactions independently, and committing them to a main chani is the core architecture proposed for  Ethereum 2.0 (but lets leave Eth 2.0 for some other day).</p><p> 实际上，这种独立地分拆几个侧链网络处理和捆绑交易，并将其提交给主要通道的方法，是针对以太坊2.0提出的核心体系结构（但让Eth 2.0离开另一天）。</p><p>  Zero-Knowledge Rollups (a.k.a ZK-Rollups) perform off-chain the computations of bundling hundreds of transactions into a single transaction. This process generates a proof of validity (using zk-Snarks) of all the transfers included in the bundle. This transaction including the proof is then submitted to a smart contract on-chain that through the proof verifies the validity of all the transactions in the bundle, committing their state accordingly in the main chain. This process is known as &#34;the validity proof&#34;. Validating blocks using ZK-rollups is quicker and cheaper than individually sending the transactions to mainnet (even for small computations), as the information of the hundreds of transactions included in the bundled is compressed and sent on-chain in a proof of a few KBs. Some examples of technologies using ZK-rollups are:  Loopring,  StarkWare,  MatterLabs,  Aztec.</p><p>  零知识汇总（也称为ZK汇总）进行脱链计算，将数百笔交易捆绑为一个交易。此过程会生成捆绑软件中包含的所有传输的有效性证明（使用zk-Snarks）。然后将包含证明的交易提交到智能链上链，该智能合约通过证明来验证捆绑中所有交易的有效性，并相应地在主链中提交其状态。此过程称为“有效性证明”。与将交易单独发送到主网（甚至用于小型计算）相比，使用ZK汇总验证块更快，更便宜，因为捆绑中包含的数百个交易信息被压缩并在链上以几KB的证据发送。 。使用ZK汇总的一些技术示例包括：Loopring，StarkWare，MatterLabs，Aztec。</p><p> Optimistic Rollups: In this scheme, participants are &#34;optimistic&#34; about the validity of the transaction being performed in the sidechain. There is no need for any computation to commit sidechain transactions into the main chain. And how can be sure that sidechain transitions are actually valid? Optimist rollups use faud-proofs to ensure that all transactions are legit. If someone notices a fraudulent transaction, the rollup will execute this fraud-proof and run the transaction&#39;s computation to verify its validity. This means that instead of performing a verification for every single transaction, like in ZK-rollups, we only perform the proof computation if we have suspicions that a transaction is fraudulent. This significantly reduces the gas costs compared to ZK-rollups, and opens the door to the ability of achieving x10-x100 improvements in the transaction throughput. This rollup approach is the one being considered for Etheruem&#39;s 2.0 shard chains, and is already used by  Optimism,  Offchain Labs and  Fuel Network.</p><p> 乐观汇总：在此方案中，参与者是＆＃34;乐观＆＃34;关于在侧链中执行的交易的有效性。无需进行任何计算即可将侧链交易提交到主链中。以及如何确定侧链过渡实际上是有效的？乐观汇总使用防伪证明来确保所有交易都是合法的。如果有人注意到欺诈交易，则汇总将执行此防欺诈行为并运行交易计算以验证其有效性。这意味着，与怀疑ZK汇总中的每笔交易无关，我们仅在怀疑交易是欺诈的情况下才执行证明计算。与ZK汇总相比，这显着降低了气体成本，并为实现事务处理吞吐量的x10-x100改进打开了大门。这种汇总方法是Etheruem的2.0分片链所考虑的方法，并且已经被Optimism，Offchain Labs和Fuel Network使用。 </p><p>  But L2 does not live by rollups alone! Another wide-spread L2 solution used by many DApps in the Ethereum ecosystem are state channels and payment channels. Channels allow participants to transact a finite number of times while only submitting two transactions to the network on chain: one to open the channel, and another one to close it. This allows for extremely high transactions throughput without the need of side-chains or an external infrastructure. Bitcoin Lightning network and Ethereum&#39;s Raiden, which you have probably already heard about, are two well-known L2 solutions based on channels.</p><p>但是L2不能仅靠汇总来生存！以太坊生态系统中许多DApp使用的另一个广泛使用的L2解决方案是状态通道和支付通道。通道允许参与者进行有限次数的交易，而只向链上网络提交两个事务：一个打开通道，另一个关闭通道。这无需侧链或外部基础架构即可实现极高的交易吞吐量。您可能已经听说过，Bitcoin Lightning网络和以太坊的Raiden是两个基于通道的著名L2解决方案。</p><p> This L2 solution is really useful if your app needs to perform lots of state updates (like in micropayments or games). The only thing to keep in mind before using channels is that they can only be used when the number of participants are known upfront, and if we can be sure participants will be available throughout the life of the channel.</p><p> 如果您的应用程序需要执行大量状态更新（例如在小额支付或游戏中），则此L2解决方案非常有用。在使用渠道之前，唯一要记住的是，只有在预先知道参与者数量的情况下才能使用它们，并且如果我们可以确定参与者在整个渠道的生命周期中都可以使用。</p><p>   Participants lock a portion of Ethereum&#39;s state, like an ETH deposit, into a multisig contract in the main chain to account for the payments and computations of the state channel. A multisig contract implements logic that requires the signature (and thus the agreement) of multiple users to run. Bitcoin also supports multisig transactions in its scripting language, so we will be able to use simple L2 channels even without support for the execution of smart contracts.</p><p>   参与者将以太坊状态的一部分（如ETH存款）锁定到主链中的多重签名合同中，以说明状态通道的付款和计算。多重签名合同实现的逻辑要求运行多个用户的签名（并因此需要协议）。比特币还以其脚本语言支持多重签名交易，因此即使不支持执行智能合约，我们也将能够使用简单的L2通道。</p><p> This first transaction locking the funds opens up the channel. With the channel open, participants are allowed to perform transactions off-chain between them up to the amount locked in the contract. The acknowledgement of an off-chain transaction is a voucher signed by all the participants involved in it. Every new transaction bundles in its voucher the previous one (i.e. every new voucher is an update of the previous one building a chain).</p><p> 锁定资金的第一笔交易打开了渠道。在开放渠道的情况下，允许参与者在他们之间进行链下交易，直至合同中锁定的金额。脱链交易的确认是由参与其中的所有参与者签名的凭证。每个新交易都在其凭证中捆绑了前一个凭证（即每个新凭证都是对前一个凭证的更新，建立了一个链）。</p><p> When the interaction is finished, the participant with the last acknowledgement submits it on-chain in a final transaction to the contract. This transaction verifies the final state of the off-chain interactions, updates the balances of the participants, returns the corresponding balance to each of the participants, and closes the channel.</p><p> 交互完成后，具有最后确认的参与者将在链中将其最终提交给合同。此事务验证链下交互的最终状态，更新参与者的余额，将相应的余额返回给每个参与者，并关闭渠道。</p><p> There are infinite ways of implementing these channels, but according to their complexity, they are usually categorized in these two types of channels: payment channels (simpler and only used to deal with payments, these are the ones used in Bitcoin); state channels (more complex and able to support more complex computations and not just payments, these are used for complex applications such as games).</p><p> 实现这些渠道的方法有很多，但根据其复杂性，通常将它们分为以下两种类型：支付渠道（更简单，仅用于处理支付，这是比特币中使用的）；状态通道（更复杂，并且能够支持更复杂的计算，而不仅仅是支付，它们还用于诸如游戏之类的复杂应用程序）。</p><p> Finally, to learn the details about channels, I highly recommend checking this  simple Solidity example that explains how to build your own micropayments channels for Ethereum. If you are not afraid of code, this is the perfect way to get your hands dirty and deeply understand how channels work.</p><p> 最后，要了解有关渠道的详细信息，我强烈建议您查看这个简单的Solidity示例，该示例说明如何为以太坊建立自己的小额支付渠道。如果您不害怕代码，那么这是使您的手变得肮脏并深入了解渠道如何工作的理想方法。 </p><p>  You may be wondering, all L2 solutions are rollup or channel-based? Well, not exactly. There are hybrid solutions, more complex constructions of optimistic and ZK rollups, full-fledged sidechains and much more. But I think this is enough for now. If you want to keep learning about L2 solutions in my absence take a look  here and  here. I hope that if you&#39;ve made it this far you&#39;re not as scared about Ethereum&#39;s transaction fees and its scalability limitations anymore. Remember, there is alway an elegant L2 solution for everything 😎 See you soon with more blockchain related posts!</p><p>您可能想知道，所有第二层解决方案都是汇总还是基于通道？ 好吧，不完全是。 有混合解决方案，更复杂的乐观和ZK汇总构造，成熟的侧链等等。 但是我认为这已经足够了。 如果您想在我不在的情况下继续学习L2解决方案，请在这里和这里看看。 我希望如果您到目前为止已经做到这一点，那么您就不必再担心以太坊的交易费用及其可扩展性限制了。 记住，总有适合所有事物的优雅的L2解决方案😎很快再见，了解更多与区块链相关的文章！ </p></div><div id="story_share_this"><div class="sharethis-inline-share-buttons"></div></div><div class="text-break sotry_link page_narrow"><a target="_blank" href="https://blockchain.works-hub.com/learn/enter-the-world-of-layer-2-improvements-9f6d6">https://blockchain.works-hub.com/learn/enter-the-world-of-layer-2-improvements-9f6d6</a></div><div class="story_tags page_narrow"><button type="button" class="btn btn-light my_tag"><a href="/tag/改进/">#改进</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/world/">#world</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/交易/">#交易</a></button></div></div><div class="my_movie_list_item shadow p-3 mb-5 bg-white rounded"><button type="button" class="btn btn-link my_tag"><a href="/tag/web2.0/">#web2.0</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/google/">#google</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/设计/">#设计</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/创意/">#创意</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/摄影/">#摄影</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/图片/">#图片</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/游戏/">#游戏</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/软件/">#软件</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/视频/">#视频</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/手机/">#手机</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/广告/">#广告</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/iphone/">#iphone</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/网站/">#网站</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/免费/">#免费</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/下载/">#下载</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/windows/">#windows</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/微软/">#微软</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/苹果/">#苹果</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/apple/">#apple</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/firefox/">#firefox</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/blog/">#blog</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/音乐/">#音乐</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/博客/">#博客</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/wordpress/">#wordpress</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/恶搞/">#恶搞</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/qq/">#qq</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/艺术/">#艺术</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/web/">#web</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/工具/">#工具</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/分享/">#分享</a></button></div></div></div><div id="my_footer"><div class=""><a href="/tags/">tags</a> <a href="/users/">users</a></div>&copy; 2020 diglog.com </div></div></body></html>