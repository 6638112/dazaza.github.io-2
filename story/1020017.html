<!doctype html><html lang="zh-hans"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Illumos Tribblix上的Solaris 10分区</title><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"><link rel="stylesheet" href="/img/css.css?random="><link data-rh="true" rel="icon" href="/img/favicon.ico"/><script data-ad-client="ca-pub-6067137220025946" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script type="text/javascript" src="https://platform-api.sharethis.com/js/sharethis.js#property=5effb96910009800120b8d4d&product=inline-share-buttons" async="async"></script>
<script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?03c1a0f31299b4a2fbb83c34d6beaac9";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script></head><body><div id="my_header"><div class="container"><nav class="navbar navbar-expand-lg"><a class="navbar-brand" href="/"><img alt="diglog" src="/img/logo.v1.gif" class="rounded-sm"></a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarNavAltMarkup"><div class="navbar-nav"></div></div></nav></div></div><div class="container"><div id="my_content"><h1 class="page_narrow">Illumos Tribblix上的Solaris 10分区</h1><div class="row"><div class="col-lg-12 col-12"><div class="my_story_list_item shadow p-3 mb-5 bg-white rounded"><div class="story_page_pub_time page_narrow">2020-08-24 19:06:14</div><div class="page_narrow text-break page_content"><p>Solaris Zones的一个有趣功能是能够运行比全局zone中的旧版本的Solaris。市场营销部门设法将其分解成容器，并在Solaris8和Solaris9中得到支持。</p><p>我在一个项目中广泛使用了它，将古老(是的，非常古老)Sun服务器的整个数据中心提升到几个T5240上的区域。效果很好。(然而，我们必须从垃圾箱中取出一台E450，并专门构建它，才能获得Solaris2.6系统。)。</p><p>Solaris 11和Illumos已经放弃了Solaris 8和9传统容器，但拥有Solaris 10专区品牌。在Tribblix上，可以使用。</p><p>安装S10标记的区域与常规区域类似，但是您需要从Solaris 10映像进行安装。您可以销毁旧系统，或者从安装介质创建新映像。</p><p>映像和主机上的软件有一定的要求。如果您在Solaris 10系统上查看目录/usr/lib/brand/solaris10，您可能会看到两个名为0和1的文件。其中包含一些用于解释的文本，但这些都是仿真兼容性功能标志。如果您查看Illumos源代码，您也可以看到它们也列出了。这是一个基本的版本控制系统-运行全局区域的主机需要支持区域中软件的所有功能。幸运的是，功能列表没有改变，所以我们很好。</p><p>对于映像，S10品牌会检查SUNWcakr包，并需要将其修补到最低级别。实际上，这意味着任何S10U8或更新版本都可以工作。</p><p>在区域安装期间，会进行一些健全性检查。原来安装程序正在查找/var/sadm/system/admin/Inst_release，如果找不到就放弃。我必须手动创建该文件：</p><p>作为区域安装的一部分，还需要对区域映像进行一些处理。如果该处理失败，则区域安装也将失败。</p><p>对于需要替换的内容，它有一个Safe_dir条目的硬编码列表。如果你没有这些，它就会失败，所以你需要添加一堆包来让它开心。具体地说：autofs、ZFS和IPF。</p><p>后处理还运行sys-unconfig，因此您需要确保存在来自SUNWadmap的&#39；。</p><p>闲聊够多了。如果我的Solaris 10介质位于/mnt1下，并且想要在/export/s10下创建一个映像，则它将如下所示：</p><p>Cd/mnt1/Solaris_10/Product#SUNWCcs SUNWcar SUNWcakr SUNWkvm pkgadd-d。-R/export/S10 SUNWcsr pkgadd-d。-R/export/S10 SUNWckr pkgadd-d。-R/export/S10 SUNWcnetr pkgadd-d。-R/export/S10 SUNWcsd pkgadd-d。-R/export/S10 SUNWcsl pkgadd-d。-R/export/S10 SUNWcsu pkgadd-d。-R/export/S10 SUNWcar.i pkgadd-d。-R/export/S10 SUNWcakr.i pkgadd-d。-R/export/S10 SUNWkvm.i pkgadd-d。-R/export/S10 SUNWcslr#SUNWCfmd pkgadd-d。-R/export/S10 SUNWfmdr pkgadd-d。-R/export/S10 SUNWfmd#SUNWClexpt pkgadd-d。-R/export/S10 SUNWlexpt#SUNWCpicl pkgadd-d。-R/export/S10 SUNWpiclr pkgadd-d。-R/export/S10 SUNWpiclu#SUNWCopenssl SUNWhea(但不是man)pkgadd-d。-R/export/S10 SUNWopensslr pkgadd-d。-R/export/S10 SUNWopenssl-library pkgadd-d。-R/export/S10 SUNWhea pkgadd-d。-R/export/S10 SUNWopenssl-include pkgadd-d。-R/export/S10 SUNWopenssl-Commands#SUNWCpkgcmds SUNWwbsup pkgadd-d。-R/export/S10 SUNWproduct-register-root pkgadd-d。-R/export/S10 SUNWwsr2 pkgadd-d。-R/export/S10 SUNWpkgcmdsr pkgadd-d。-R/export/S10 SUNWwbsup pkgadd-d。-R/export/S10 SUNWpkgcmdsu#SUNWCpr SUNWCtls pkgadd-d。-R/export/S10 SUNWpr pkgadd-d。-R/export/S10 SUNWtls pkgadd-d。-R/export/S10 SUNWjss#SUNWCfwshl pkgadd-d。-R/export/S10 SUNWbash pkgadd-d。-R/export/S10 SUNWtcsh pkgadd-d。-R/export/S10 SUNWzsh#perl pkgadd-d。-R/export/S10 SUNWperl584core pkgadd-d。-R/export/S10 SUNWperl584usr#SUNWCpto SUNWtecla SUNWesu SUNWso pkgadd-d。-R/EXPORT/S10 SUNWtecla pkgadd-d。-R/export/S10 SUNWbtool pkgadd-d。-R/export/S10 SUNWesu pkgadd-d。-R/export/S10 SUNWcpp pkgadd-d。-R/export/S10 SUNWToo pkgadd-d。-R/export/S10 SUNWlibmr pkgadd-d。-R/export/S10 SUNWlibm pkgadd-d。-R/export/S10 SUNWlibmsr pkgadd-d。-R/export/S10 SUNWlibms pkgadd-d。-R/export/S10 SUNWsprot#SUNWCfwcmp SUNWlibC pkgadd-d。-R/export/S10 SUNWlibC pkgadd-d。-R/export/S10 SUNWbzip pkgadd-d。-R/export/S10 SUNWgzip pkgadd-d。-R/export/S10 SUNWzip pkgadd-d。-R/export/S10 SUNWzlib#版本和sys-unconfig pkgadd-d。-R/export/S10 SUNWsolnm pkgadd-d。-R/export/S10 SUNWadmr pkgadd-d。-R/export/S10 SUNWadmlib-sysid pkgadd-d。-R/export/S10 SUNWadmap#autofs是验证pkgadd-d所必需的。-R/export/S10 SUNWatfsr pkgadd-d。-R/export/S10 SUNWatfsu#ditto zfs pkgadd-d。-R/export/S10 SUNWlxml pkgadd-d。-R/export/S10 SUNWsmapi pkgadd-d。-R/export/S10 SUNWzfskr pkgadd-d。-R/export/S10 SUNWzfsr pkgadd-d。-R/export/S10 SUNWzfsu#同上IPF pkgadd-d。-R/export/S10 SUNWipfr pkgadd-d。-R/EXPORT/S10 SUNWIPFU#目前约为2.35亿美元。</p><p>如果您用cd连接到/export/s10，请确保Inst_Release文件包含正确的内容(请参见上文)，然后将您拥有的内容打包，您可以将该tarball提供给zone安装，它应该可以工作。</p><p>如果您在Solaris11上查看S10区域的文档，您将看到一个-c选项。我们没有这个功能，但是您可以将一个sysidcfg文件放到区域中的/etc/sysidcfg中，这样它就可以在引导时自行配置。它将如下所示：</p><p>如果您使用的是Tribblix，大部分区域创建都会得到简化，并且会：</p><p>我还没有在SPARC上尝试过这一点(我的用例是构建Java和Node.js)，但是它应该与包名完全相同。</p></div><div id="story_share_this"><div class="sharethis-inline-share-buttons"></div></div><div class="text-break sotry_link page_narrow"><a target="_blank" href="https://ptribble.blogspot.com/2020/08/solaris-10-zones-on-tribblix.html">https://ptribble.blogspot.com/2020/08/solaris-10-zones-on-tribblix.html</a></div><div class="story_tags page_narrow"><button type="button" class="btn btn-light my_tag"><a href="/tag/illumos/">#illumos</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/s10/">#s10</a></button></div></div><div class="my_movie_list_item shadow p-3 mb-5 bg-white rounded"><button type="button" class="btn btn-link my_tag"><a href="/tag/web2.0/">#web2.0</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/google/">#google</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/设计/">#设计</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/创意/">#创意</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/摄影/">#摄影</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/游戏/">#游戏</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/图片/">#图片</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/软件/">#软件</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/视频/">#视频</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/手机/">#手机</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/广告/">#广告</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/apple/">#apple</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/iphone/">#iphone</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/网站/">#网站</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/免费/">#免费</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/下载/">#下载</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/windows/">#windows</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/微软/">#微软</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/firefox/">#firefox</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/苹果/">#苹果</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/blog/">#blog</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/音乐/">#音乐</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/博客/">#博客</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/wordpress/">#wordpress</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/恶搞/">#恶搞</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/艺术/">#艺术</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/qq/">#qq</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/web/">#web</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/谷歌/">#谷歌</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/工具/">#工具</a></button></div></div></div><div id="my_footer"><div class=""><a href="/tags/">tags</a> <a href="/users/">users</a></div>&copy;2012-2021 diglog.com </div></div></body></html>