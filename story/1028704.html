<!doctype html><html lang="zh-hans"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>The-uro“-var：；使用一个自定义属性切换多个值</title><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"><link rel="stylesheet" href="/img/css.css?random="><link data-rh="true" rel="icon" href="/img/favicon.ico"/><script data-ad-client="ca-pub-6067137220025946" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script type="text/javascript" src="https://platform-api.sharethis.com/js/sharethis.js#property=5effb96910009800120b8d4d&product=inline-share-buttons" async="async"></script>
<script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?03c1a0f31299b4a2fbb83c34d6beaac9";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script></head><body><div id="my_header"><div class="container"><nav class="navbar navbar-expand-lg"><a class="navbar-brand" href="/"><img alt="diglog" src="/img/logo.v1.gif" class="rounded-sm"></a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarNavAltMarkup"><div class="navbar-nav"></div></div></nav></div></div><div class="container"><div id="my_content"><h1 class="page_narrow">The-uro“-var：；使用一个自定义属性切换多个值</h1><div class="row"><div class="col-lg-12 col-12"><div class="my_story_list_item shadow p-3 mb-5 bg-white rounded"><div class="story_page_pub_time page_narrow">2020-10-14 16:36:50</div><div class="page_narrow text-break page_content"><p>如果我告诉您，您可以使用单个属性值跨多个不同属性甚至跨多个CSS规则打开和关闭多个不同的值，会怎么样？</p><p>如果我告诉您，您只需调整一个自定义属性--is-raise，就可以将这个平面按钮变成一个有光泽的偏态按钮，这将一下子设置它的边框、背景图像、框和文本阴影，会怎么样？</p><p>这项技术的关键在于：有两个自定义属性值，它们几乎在任何地方都有效，只要有一个带回退的var()调用。</p><p>您可能已经知道的更明显的一个是初始值，它使属性只应用它的后备。因此，在以下代码中：</p><p>背景：var(--foo，线性渐变(白色，透明))HSL(2 2 10%~5 0%)；边框：1px实心var(--foo，RGB(0 0 0/1))；颜色：RGB(0 0 0 var(--foo，/.8))；</p><p>我们可以将--foo设置为Initial以启用这些“后备”，并将这些值附加到属性值，添加渐变、设置边框颜色并一次性使文本颜色半透明。但是，当我们想要关闭这些值时，该怎么办呢？--foo(不会创建循环)的任何非初始值都应该有效。但是，有没有一个可以在所有三个声明中都起作用的呢？</p><p>事实证明，每个属性中都有一个var()引用，它在任何地方都适用，您可能永远也猜不到它是什么(除非您看过我的任何CSS变量演讲，并且对传递内容有很好的记忆力)。</p><p>这是空格！空格在自定义属性中非常重要。当你写下这样的东西时：</p><p>这不是无效的声明。这是一个声明，其中--foo的值实际上是一个空格字符。但是，空格在每个CSS属性值中都有效，只要允许使用var()，并且不会以任何方式影响其计算值。因此，我们只需将属性设置为一个空格(甚至是注释)，而不会影响声明中存在的任何其他值。例如：</p><p>我们可以利用这一点将var()实质上转换为单子句if()函数，并根据单个自定义属性有条件地附加值。</p><p>作为概念证明，下面是使用此方法重构的两个按钮演示：</p><p>因为@Apply现在已经不存在了，所以我最初设想这是一个构建块，用于在浏览器中启用“Mixin”，这是一种可怕的技术攻击。但是，最大的限制是，这只适用于将值追加到现有值，或者将属性设置为整数值或初始值。没有办法说“如果设置了foo，背景应该是红色的，否则背景应该是白色的”。一些这样的条件句可以通过巧妙地使用追加来效仿，但不是大多数。</p><p>当然也有一定的可读性问题：--foo：；看起来是个错误，而且--foo：开头看起来很奇怪，除非您知道这项技术。然而，这可以很容易地通过评论来解决。或者甚至是常量：</p><p>：root{--on：初始；--off：；}button{--is-raise：var(--off)；/*...*/}#foo{--is-raise：var(--on)；}。</p><p>还要注意的是，最终我们会得到一个合适的if()，不需要如此可怕的黑客来模仿它，讨论已经在进行[w3c/csswg-drafts5009w3c/csswg-drafts4731]。</p></div><div id="story_share_this"><div class="sharethis-inline-share-buttons"></div></div><div class="text-break sotry_link page_narrow"><a target="_blank" href="https://lea.verou.me/2020/10/the-var-space-hack-to-toggle-multiple-values-with-one-custom-property/">https://lea.verou.me/2020/10/the-var-space-hack-to-toggle-multiple-values-with-one-custom-property/</a></div><div class="story_tags page_narrow"><button type="button" class="btn btn-light my_tag"><a href="/tag/属性/">#属性</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/toggle/">#toggle</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/var/">#var</a></button></div></div><div class="my_movie_list_item shadow p-3 mb-5 bg-white rounded"><button type="button" class="btn btn-link my_tag"><a href="/tag/web2.0/">#web2.0</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/google/">#google</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/设计/">#设计</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/创意/">#创意</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/摄影/">#摄影</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/游戏/">#游戏</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/图片/">#图片</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/软件/">#软件</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/视频/">#视频</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/手机/">#手机</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/广告/">#广告</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/apple/">#apple</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/iphone/">#iphone</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/网站/">#网站</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/免费/">#免费</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/下载/">#下载</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/windows/">#windows</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/微软/">#微软</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/firefox/">#firefox</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/苹果/">#苹果</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/blog/">#blog</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/音乐/">#音乐</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/博客/">#博客</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/wordpress/">#wordpress</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/恶搞/">#恶搞</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/艺术/">#艺术</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/qq/">#qq</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/web/">#web</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/谷歌/">#谷歌</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/工具/">#工具</a></button></div></div></div><div id="my_footer"><div class=""><a href="/tags/">tags</a> <a href="/users/">users</a></div>&copy;2012-2021 diglog.com </div></div></body></html>