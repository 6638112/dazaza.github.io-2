<!doctype html><html lang="zh-hans"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>用于覆盖、滚动文本、视频时间戳的FFmpeg Drawtext过滤器</title><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"><link rel="stylesheet" href="/img/css.css?random="><link data-rh="true" rel="icon" href="/img/favicon.ico"/><script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?03c1a0f31299b4a2fbb83c34d6beaac9";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script><script data-ad-client="ca-pub-6067137220025946" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script type="text/javascript" src="https://platform-api.sharethis.com/js/sharethis.js#property=5effb96910009800120b8d4d&product=inline-share-buttons" async="async"></script></head><body><div id="my_header"><div class="container"><nav class="navbar navbar-expand-lg"><a class="navbar-brand" href="/"><img alt="diglog" src="/img/logo.v1.gif" class="rounded-sm"></a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarNavAltMarkup"><div class="navbar-nav"></div></div></nav></div></div><div class="container"><div id="my_content"><h1 class="page_narrow">用于覆盖、滚动文本、视频时间戳的FFmpeg Drawtext过滤器</h1><div class="row"><div class="col-lg-12 col-12"><div class="my_story_list_item shadow p-3 mb-5 bg-white rounded"><div class="story_page_pub_time page_narrow">2020-10-23 12:31:53</div><div class="story_img_container"><a href="http://img2.diglog.com/img/2020/10/30c876d3c77875321b605921fa6d83c1.png"><img src="http://img2.diglog.com/img/2020/10/30c876d3c77875321b605921fa6d83c1.png" class="img-fluid my_story_img" onerror="this.style.display='none'"></a></div><div class="page_narrow text-break page_content"><p>Learn FFmpeg’s drawtext filter to dynamically overlay text on video and display information such as timecode, frame resolution, watermarks, etc. Also, let’s learn how to configure the font, font-size, position, background-color, alignment, multiple lines, etc. using FFmpeg’s drawtext filter.</p><p>了解FFmpeg的DrawText过滤器可以动态地在视频上覆盖文本并显示诸如时间码、帧分辨率、水印等信息。另外，让我们学习如何使用FFmpeg的Drawtext过滤器配置字体、字体大小、位置、背景色、对齐方式、多行等。</p><p>   In order to use  drawtext, you needed to have configured FFmpeg with  --enable-libfreetype. As per the documentation, you need the following options as well if you want to,</p><p>为了使用Drawtext，您需要将FFmpeg配置为“--enable-libfreetype”。根据文档，如果需要，您还需要以下选项，</p><p> enable default font fallback and the font option you need to configure FFmpeg with  --enable-libfontconfig.</p><p>启用默认字体后备和您需要使用--enable-libfontconfig配置FFmpeg的字体选项。</p><p>  The complete list of options for  drawtext filter can be accessed  here. It is far too much for me to explain here, but, if you have any questions, that is the first place you should refer.</p><p>单击此处可以访问Drawtext和Filter的完整选项列表。我在这里解释太多了，但是，如果你有什么问题，那是你应该首先参考的地方。</p><p> In this article, I’ll walk through several common use-cases that should make the concepts easy to understand.</p><p>在本文中，我将介绍几个常见的用例，这些用例应该会使概念更容易理解。</p><p>     inputClip.mp4 is the input video on which you want to display the text; and the output (containing the text) is to be stored in  output.mp4</p><p>InputClip.mp4是要在其上显示文本的输入视频；输出(包含文本)将存储在output.mp4中。</p><p>   text=&#39;My text starting at 640x360&#39; is the text that will be shown on the video (you could make it your name for watermarking the video, right?)</p><p>我以640x360&#39；开头的文本是将在视频上显示的文本(您可以将其作为视频水印的名称，对吗？)。</p><p> position of the text x=640:y=360 indicates that the x and y coordinates as  640px and  360px. Also, as a side note, the video’s resolution is  1280x720.</p><p>文本x=640：y=360的位置表示x和y的坐标分别为640px和360px。此外，作为附注，视频的分辨率为1280x720。</p><p>   A better way to this is to offset the text by the length of the text that you are printing on the screen.</p><p>一种更好的方法是按照屏幕上打印的文本长度来偏移文本。</p><p>  If you look at the image above, you’ll see that it starts at the center of the video and extends towards the right.</p><p>如果你看上面的图片，你会看到它从视频的中心开始，向右延伸。</p><p> If you want to center the text itself, then you can subtract the height and width of the rendered text when telling  drawtext where to render the text.</p><p>如果要使文本本身居中，则可以在告诉绘图文本在何处呈现文本时减去呈现文本的高度和宽度。</p><p> Here’s how. You use the command  x=(w-text_w)/2:y=(h-text_h)/2 and it will center the text. Here is our new commandline –</p><p>这是怎么做的。使用命令：x=(w-text_w)/2：y=(h-text_h)/2，它将使文本居中。这是我们的新命令-。</p><p>    Fantastic – you now know how to overlay text onto a video using FFmpeg’s  drawtext filter. Do you think you can add your own watermark or copyright? Let’s try 🙂</p><p>太棒了-您现在知道如何使用FFmpeg的高级Drawing Text过滤器将文本覆盖到视频上。您认为您可以添加自己的水印或版权吗？我们试试🙂吧。</p><p>  Let’s modify the command as follows to indicate my name and the copyright symbol.</p><p>让我们按如下方式修改该命令，以指示我的姓名和版权符号。</p><p>  This produces an output like this – looks good right? You can play around with the  x and  y coordinates to align the text the way you want to.</p><p>这会产生这样的输出-看起来不错，对吧？您可以使用x轴和y轴坐标来按您想要的方式对齐文本。</p><p>      boxborderw is the width of the box’s border and the border color is taken from  boxcolor.</p><p>Boxborderw是框的边框宽度，边框颜色取自boxcolor。</p><p> And there you have it, text with a background. In this example, I switched the color of the text to black so that it contrasts well with a light background bounding box (which in-turn contrasts well with a dark background.)</p><p>这就是它，带背景的文本。在本例中，我将文本颜色切换为黑色，以便与浅色背景边界框形成良好对比(而背景框又与深色背景形成良好对比)。</p><p>   This is a very useful application of the  drawtext filter and is used in demonstrating low-latency applications or visual quality testing so that one knows precisely what the timestamps/timecodes are at each time.</p><p>这是一个非常有用的绘图文本过滤器的应用程序，用于演示低延迟应用程序或视觉质量测试，以便准确地知道每次的时间戳/时间码是什么。</p><p> ffmpeg -i inputClip.mp4 -vf &#34;drawtext=text=&#39;timestamp: %{pts \: hms}&#39;: x=500: y=500: fontsize=32:fontcolor=yellow@0.9: box=1: boxcolor=black@0.6&#34; -c:a copy output.mp4</p><p>Ffmpeg-i inputClip.mp4-vf&#34；dratext=text=&#39；时间戳：%{pts\：hms}&#39；：x=500：y=500：fontSize=32：fontcolor=Huang@0.9：box=1：boxcolor=Black@0.6&#34；-c：A copy output.mp4。</p><p> This uses the  timestamp and  pts options to display time in hour:min:sec format using the  hms format specifier. The notations and formatting are complex in my opion! So, a lot of trial and error might be needed before you format your display correctly.</p><p>它使用时间戳和时间脚本选项，使用HMS格式说明符以小时：分钟：秒的格式显示时间。在我的观点中，符号和格式很复杂！因此，在正确设置显示格式之前，可能需要进行大量的反复试验。</p><p> Here is how the video looks. Hope Vimeo shows you the video without a lot of delay 🙂</p><p>以下是视频的外观。希望Vimeo不会有太多延迟就给你看视频🙂。</p><p>  And here is the same command, but using the  flt option to provide microsecond time accuracy! Fancy 🙂</p><p>而这里是同样的命令，只是使用了微秒时间选项来提供微秒的时间精确度！花哨的🙂。</p><p> ffmpeg -i inputClip.mp4 -vf &#34;drawtext=text=&#39;timestamp: %{pts \: flt}&#39;: x=500: y=500: fontsize=32:fontcolor=yellow@0.9: box=1: boxcolor=black@0.6&#34; -c:a copy output.mp4</p><p>Ffmpeg-i inputClip.mp4-vf&#34；dratext=text=&#39；时间戳：%{pts\：flt}&#39；：x=500：y=500：fontSize=32：fontcolor=Huang@0.9：box=1：boxcolor=Black@0.6&#34；-c：A copy output.mp4。</p><p>   Finally, let’s learn how to show a movie’s credits using the draw text filter. Here are two main concepts that you need to understand.</p><p>最后，让我们学习如何使用绘制文本过滤器显示电影的字幕。以下是您需要理解的两个主要概念。</p><p> providing a lot of text: you can’t do this via the commandline, so, you need to read a text file that contains the text. And you can read that using the  textfile option.</p><p>提供大量文本：您不能通过命令行做到这一点，因此，您需要读取包含文本的文本文件。你可以使用文本文件选项来阅读它。</p><p> and, specify the speed of scrolling using the  y text position. Here, you can provide an equation instead of a constant number. You start off by telling by FFmpeg that the y-position is  h - 80*t so that everytime the value of time increases, the value of  h - 80*t* decreases, and the text is displayed higher. Makes sense?</p><p>并且，使用简单的文本位置指定滚动的速度。在这里，您可以提供一个方程式，而不是一个常量。您首先通过FFmpeg告知y位置是h-80*t，这样每次时间值增加时，h-80*t*t的值就会减少，文本显示得更高。合乎道理?。</p><p> Tip: change  80 to  100 or  120 and see the effect on the scrolling speed.</p><p>提示：将80%改为100%或120%，看看对滚动速度的影响。</p><p>    That’s it for this tutorial on using FFmpeg’s  drawtext filter to produce dynamic overlays on your videos. It is a very versatile and handy tool that you can use to overlay text, timecodes, credits, copyrights notices on your videos.</p><p>这就是关于使用FFmpeg的FFmpeg绘图文本过滤器在您的视频上生成动态覆盖的本教程的内容。这是一个非常通用和方便的工具，你可以用它来覆盖文本，时间码，字幕，版权声明在你的视频上。</p></div><div id="story_share_this"><div class="sharethis-inline-share-buttons"></div></div><div class="text-break sotry_link page_narrow"><a target="_blank" href="https://ottverse.com/ffmpeg-drawtext-filter-dynamic-overlays-timecode-scrolling-text-credits/">https://ottverse.com/ffmpeg-drawtext-filter-dynamic-overlays-timecode-scrolling-text-credits/</a></div><div class="story_tags page_narrow"><button type="button" class="btn btn-light my_tag"><a href="/tag/覆盖/">#覆盖</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/drawtext/">#drawtext</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/文本/">#文本</a></button></div></div><div class="my_movie_list_item shadow p-3 mb-5 bg-white rounded"><button type="button" class="btn btn-link my_tag"><a href="/tag/web2.0/">#web2.0</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/google/">#google</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/设计/">#设计</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/游戏/">#游戏</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/创意/">#创意</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/apple/">#apple</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/苹果/">#苹果</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/摄影/">#摄影</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/软件/">#软件</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/美国/">#美国</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/iphone/">#iphone</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/图片/">#图片</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/手机/">#手机</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/视频/">#视频</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/广告/">#广告</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/免费/">#免费</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/谷歌/">#谷歌</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/网站/">#网站</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/windows/">#windows</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/微软/">#微软</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/下载/">#下载</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/firefox/">#firefox</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/音乐/">#音乐</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/linux/">#linux</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/blog/">#blog</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/博客/">#博客</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/程序/">#程序</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/艺术/">#艺术</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/web/">#web</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/wordpress/">#wordpress</a></button></div></div></div><div id="my_footer"><div class=""><a href="/tags/">tags</a> <a href="/users/">users</a></div>&copy; 2020 diglog.com </div></div></body></html>