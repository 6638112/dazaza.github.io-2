<!doctype html><html lang="zh-hans"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Windows版Rust Rust for Windows</title><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"><link rel="stylesheet" href="/img/css.css?random="><link data-rh="true" rel="icon" href="/img/favicon.ico"/><script data-ad-client="ca-pub-6067137220025946" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script type="text/javascript" src="https://platform-api.sharethis.com/js/sharethis.js#property=5effb96910009800120b8d4d&product=inline-share-buttons" async="async"></script>
<script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?03c1a0f31299b4a2fbb83c34d6beaac9";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script></head><body><div id="my_header"><div class="container"><nav class="navbar navbar-expand-lg"><a class="navbar-brand" href="/"><img alt="diglog" src="/img/logo.v1.gif" class="rounded-sm"></a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarNavAltMarkup"><div class="navbar-nav"></div></div></nav></div></div><div class="container"><div id="my_content"><h1 class="page_narrow">Rust for Windows<br/>Windows版Rust </h1><div class="row"><div class="col-lg-12 col-12"><div class="my_story_list_item shadow p-3 mb-5 bg-white rounded"><div class="story_page_pub_time page_narrow">2021-01-22 04:11:42</div><div class="story_img_container"><a href="http://img2.diglog.com/img/2021/1/2091f93d1c3b1d6b4f20529e22609b4c.png"><img src="http://img2.diglog.com/img/2021/1/2091f93d1c3b1d6b4f20529e22609b4c.png" class="img-fluid my_story_img" onerror="this.style.display='none'"></a></div><div class="page_narrow text-break page_content"><p>The  windows crate lets you call any Windows API past, present, and future using code generated on the fly directly from the metadata describing the API and right into your Rust package where you can call them as if they were just another Rust module.</p><p>使用Windows crate，您可以直接使用从描述API的元数据中即时生成的代码来调用过去，现在和将来的任何Windows API，然后直接进入Rust包，在其中可以像调用另一个Rust模块一样调用它们。</p><p> The Rust language projection follows in the tradition established by  C++/WinRT of building language projections for Windows using standard languages and compilers, providing a natural and idiomatic way for Rust developers to call Windows APIs.</p><p> Rust语言投影遵循C ++ / WinRT建立的传统，即使用标准语言和编译器为Windows构建语言投影，从而为Rust开发人员调用Windows API提供了自然而惯用的方式。</p><p>    This will allow Cargo to download, build, and cache Windows support as a package. Next, specify which types you need inside of a  build.rs build script and the  windows crate will generate the necessary bindings:</p><p>    这将允许Cargo打包下载，构建和缓存Windows支持。接下来，在build.rs构建脚本中指定所需的类型，然后Windows crate将生成必要的绑定：</p><p>   mod bindings {  ::windows :: include_bindings!();} use bindings ::{ windows ::data ::xml ::dom :: *, windows ::win32 ::system_services ::{CreateEventW, SetEvent, WaitForSingleObject}, windows ::win32 ::windows_programming ::CloseHandle,}; fn  main() -&gt; windows:: Result&lt;()&gt; {  let doc  = XmlDocument :: new()?; doc. load_xml( &#34;&lt;html&gt;hello world&lt;/html&gt;&#34;)?;  let root  = doc. document_element()?;  assert!(root. node_name()?  ==  &#34;html&#34;);  assert!(root. inner_text()?  ==  &#34;hello world&#34;);  unsafe {  let event  =  CreateEventW( std ::ptr :: null_mut(),  true. into(),  false. into(), std ::ptr :: null(), );  SetEvent(event). ok()?;  WaitForSingleObject(event,  0);  CloseHandle(event). ok()?; }  Ok(())}</p><p>   mod绑定{:: windows :: include_bindings！（）;}使用绑定:: {windows :: data :: xml :: dom :: *，windows :: win32 :: system_services :: {CreateEventW，SetEvent，WaitForSingleObject}， windows :: win32 :: windows_programming :: CloseHandle，}; fn main（）-> Windows ：： Result＆lt;（）＆gt; {let doc = XmlDocument :: new（）?; doc。 load_xml（＆＃34;＆lt; html＆gt; hello world＆lt; / html＆gt;＆＃34;）？让root = doc。 document_element（）?;断言！（root。node_name（）？==＆＃34; html＆＃34;）; assert！（root。inner_text（）？==＆＃34; hello world＆＃34;）;不安全{let event = CreateEventW（std :: ptr :: null_mut（），true。toin（），false。into（），std :: ptr :: null（），）； SetEvent（事件）。好（）？; WaitForSingleObject（event，0）; CloseHandle（事件）。好（）？; }  好（（））}</p><p> To reduce build time, use a  bindings crate rather simply a module. This will allow Cargo to cache the results and build your project far more quickly.</p><p> 为了减少构建时间，请使用绑定箱而不是简单地使用模块。这将使Cargo缓存结果并更快地构建项目。</p><p> There is an experimental  documentation generator for the Windows API. The documentation  is published here. This can be useful to figure out how the various Windows APIs map to Rust modules and which  use paths you need to use from within the  build macro.</p><p> Windows API有一个实验性的文档生成器。该文档在此处发布。这对于找出各种Windows API如何映射到Rust模块以及使用哪些宏需要在build宏中使用的路径很有用。</p><p> For a more complete example, take a look at Robert Mikhayelyan&#39;s  Minesweeper. More simple examples  can be found here.</p><p> 对于更完整的示例，请看一下Robert Mikhayelyan的扫雷艇。在这里可以找到更简单的示例。 </p></div><div id="story_share_this"><div class="sharethis-inline-share-buttons"></div></div><div class="text-break sotry_link page_narrow"><a target="_blank" href="https://github.com/microsoft/windows-rs/#rust-for-windows">https://github.com/microsoft/windows-rs/#rust-for-windows</a></div><div class="story_tags page_narrow"><button type="button" class="btn btn-light my_tag"><a href="/tag/rust/">#rust</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/windows/">#windows</a></button></div></div><div class="my_movie_list_item shadow p-3 mb-5 bg-white rounded"><button type="button" class="btn btn-link my_tag"><a href="/tag/web2.0/">#web2.0</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/google/">#google</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/设计/">#设计</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/创意/">#创意</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/摄影/">#摄影</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/图片/">#图片</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/游戏/">#游戏</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/软件/">#软件</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/视频/">#视频</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/手机/">#手机</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/广告/">#广告</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/iphone/">#iphone</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/网站/">#网站</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/免费/">#免费</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/下载/">#下载</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/windows/">#windows</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/苹果/">#苹果</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/微软/">#微软</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/apple/">#apple</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/firefox/">#firefox</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/blog/">#blog</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/音乐/">#音乐</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/博客/">#博客</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/wordpress/">#wordpress</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/恶搞/">#恶搞</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/qq/">#qq</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/艺术/">#艺术</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/web/">#web</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/工具/">#工具</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/分享/">#分享</a></button></div></div></div><div id="my_footer"><div class=""><a href="/tags/">tags</a> <a href="/users/">users</a></div>&copy; 2020 diglog.com </div></div></body></html>