<!doctype html><html lang="zh-hans"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>微服务群体、服务集团和人群</title><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"><link rel="stylesheet" href="/img/css.css?random="><link data-rh="true" rel="icon" href="/img/favicon.ico"/><script data-ad-client="ca-pub-6067137220025946" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script type="text/javascript" src="https://platform-api.sharethis.com/js/sharethis.js#property=5effb96910009800120b8d4d&product=inline-share-buttons" async="async"></script>
<script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?03c1a0f31299b4a2fbb83c34d6beaac9";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script></head><body><div id="my_header"><div class="container"><nav class="navbar navbar-expand-lg"><a class="navbar-brand" href="/"><img alt="diglog" src="/img/logo.v1.gif" class="rounded-sm"></a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarNavAltMarkup"><div class="navbar-nav"></div></div></nav></div></div><div class="container"><div id="my_content"><h1 class="page_narrow">微服务群体、服务集团和人群</h1><div class="row"><div class="col-lg-12 col-12"><div class="my_story_list_item shadow p-3 mb-5 bg-white rounded"><div class="story_page_pub_time page_narrow">2020-11-15 04:20:50</div><div class="page_narrow text-break page_content"><p>我在大企业打工已经快6年了。大约18个月来，我一直致力于大规模微服务架构(大约150个微服务)，并不断发展壮大。</p><p>在某种程度上，微服务使大型企业能够利用孤立的代码库将大量工作分配给不同的团队。如果这些微服务的已发布API没有更改，则该服务的生产者或消费者都不会关心添加到该服务的维护或功能。</p><p>然而，产品作为一个整体的工作需要将所有的微服务以兼容的版本部署到部署环境中。</p><p>从高层次的角度来看，这些服务是否通过HTTPS、协议、定制的TCP协议或消息总线(如Kafka或MQ风格)进行通信并不重要。微服务A仍然作用于本应由微服务B创建的数据，如果它不在那里，用户将会感到疑惑。</p><p>如果用户在社交网络类型的产品上发布了一张照片，但几秒钟后没有显示出来，那么用户就会担心。如果它没有出现-因为微服务A将照片发布到某个消息队列，但是微服务B没有被部署来读取和响应该消息-那实际上是一个错误。就像用户脸上的一个对话框一样多。</p><p>这种依赖关系：微服务A需要微服务B，而微服务B需要微服务C，所有这些都是为了让产品和客户的用户旅程协同工作而部署的，这就是为什么它被称为微服务的“羊群”。(或者是一系列微服务，但羊群是更常见的行业名称)。</p><p>企业软件工程与初创企业有很大的不同。在我进入BigCo公司之前，我花了很多时间在“小项目和初创公司”领域。</p><p>我在这里列举了本文的一些假设，假设它们几乎是通用的。我的样本量很小，但我不认为我只是在我的经历中运气不好：</p><p>团队拥有的代码库。(因为在BigCos中，只有一个人拥有的东西会让人坐立不安，至少在我参加过的BigCos中是这样。而且只有一组人很容易寻呼他们)。</p><p>统一发现或明显相似的路线(“哦，看看/Search API！”也许在幕后是5个团队，提供20项微服务或Lambdas-无论是什么，打电话的人都不知道或不关心)。</p><p>微服务可以根据它们调用或依赖的下游或对等服务进行分组。(下一节将讨论这种集群或“集团”效应)。</p><p>注：微服务有可能没有所有者，但也有例外。也许拥有这一切的团队被解雇了，或者所有人都在招聘到接班人之前辞职了。从企业的角度来看，这很糟糕--一两年后，当微服务崩溃时，你将面临一场烫手山芋的游戏，谁需要修复它？…。因为有一些面向客户的漏洞，所以要加倍努力。这也很可能会让依赖这些微服务的团队感到紧张，因为，“嗯，谁在维护我们与之交互的广告数据存储库(Ad Data Repository)？”嗯，…“。</p><p>同样，一项微服务有两个所有者也是可能的--但应该是例外的。根据我的经验，这意味着要么开始重建一个整体，要么引入团队A不想部署但团队B想要部署的情况。</p><p>颠覆微服务群体：这是一群人(团队)。</p><p>如果我们把一个或多个产品所需的所有微服务看作是一群微服务，你就会注意到一些东西。你会注意到，这些群形成了微服务集团--例如，登录服务只与auth数据库和电子邮件服务对话，而从不与文件上传服务对话。</p><p>此外(因为这是企业)团队，而不是个人，拥有自己的服务。一个团队可能拥有一个小团体或几个小团体中的大多数服务。如果企业是明智的，那么可能会有一些领域驱动设计建模来更好地对这些集团进行分类。</p><p>我怀疑有三种、也许四种方式可以将企业拆分为一个产品(或多个产品)提供服务。</p><p>我所看到的企业组织团队、产品、微服务(以及你的牛群和集团)的方式。</p><p>请注意，这些图片中的星星可能是微服务，但也可能是前端库组件。</p><p>该组织拥有与用户关系密切的团队，以及创建与任何一个产品分离的服务的团队。想象一下，开发我们的社交媒体应用程序的团队，以及处理硬数据存储、供应商数据导入或与真实记录源接口的“数据平台”团队。</p><p>这很可能是康威定律在起作用：数据库团队维护大型数据库，并且(因为企业)当前的一切都流经大型数据库。这个大型数据库是记录的来源。</p><p>扩展团队将这些团队视为潜在的平台的一部分。用最普通的词来形容平台：“iOS团队”、“网络团队”、“Android团队”。“API”是由“后台团队”的工作人员提供的。</p><p>然而，这个图表仍然适用于这种团队结构。扩展团队的第7章也涉及到了这篇博客文章中的几个主题。</p><p>我们这里有多种产品。请注意，有些产品与其他产品没有联系。产品B多少有些关联：想想Instagram是如何利用Facebook进行授权的，但仅此而已。</p><p>跨职能团队并不是什么新鲜事--我在大学里上全面质量管理课的时候就听说过。</p><p>但这里的想法是，“两个披萨团队”应该被授权改变从用户界面到堆栈的所有功能。因为--这是一个经常被引用的定义--敏捷特性直到用户看到才会发布。</p><p>我还假设，这些跨职能团队并没有违反康威定律，但可能会在现有的组织结构之上嫁接一个跨职能层。</p><p>同样，我怀疑这种方法意味着您也有一个隐式分层模型。也许您有使用后端for前端设计模式创建的服务。我们的示例社交媒体企业可能有一个为移动应用程序提供数据的BFF微服务，以及一个“数据层”服务…。Alexa应用程序的BFF微服务使用的。事实上，我试图在图表中说明这一点。</p><p>我也不相信GraphQL能解决这个问题--你可能也有其他团队经常使用的查询和突变。</p><p>无论您的组织结构图看起来是什么样子，如果团队耦合到微服务，那么您可以让系统设计看起来像您的组织结构图，或者在该组织结构图上做外观。无论哪种方式，你都可以在微服务所有者周围画一个方框(希望如此！)。查找您的业务域的某些部分的边缘。或者，如果这样做不起作用，找到这些小团体，在他们周围画上方框。</p><p>让我们回顾一下这些图表。请注意不同结构的不同数据库组织。分层组织可能只有一个或两个由产品团队控制的数据库(为了“数据的封闭性”或“我们只关心数据的这一特定部分”)，而下游团队是“记录源”。</p><p>在一个完全跨职能的例子中，没有“下游”。然而，该组织仍有数据需要存储、维护和保护。团队可能会创建一个或两个数据库，或者每个微服务创建一个数据库来存储这些数据。然而，我认为“数据标准”是整个企业都关心的问题。数据是否在传输和REST中得到保护，可能使用经过批准的数据存储技术，并具有适当的访问权限？没有一家企业想要像Target或Equifax那样的隐私泄露和诉讼。</p><p>那么，一个企业或一组在企业内部从事单一产品工作的团队如何建立数据标准呢？</p><p>同样，“技术债务”--也许是“哦，是的，我们应该保护这个数据库，这是我们需要清理的一些技术债务”--对一个小集团的“技术债务”有何影响？还是产品？还是生意？</p><p>事实上，我开始不喜欢技术债务的类比，并开始倾向于系统功能能力的想法。</p><p>在美国，往往既有糟糕的道路，又有大量的道路建设，所以一个系统的功能容量模型就是一条运送客户旅程的道路，这对我来说是很自然的。</p><p>如果我们的旅程是为了给客户提供功能，那么我们想要铺设好的道路，这样我们就可以快速行驶，而不是你只能走35英里每小时的土路。我们还想要一些特定的、内置的道路性能：平稳的行驶，专家随叫随到，以防我们爆胎(或数据库！)，可能还需要某种指导，以确保我们的汽车在道路上使用是安全的，不会伤害他人或环境(比如到处喷洒客户数据)。</p><p>这是未来一篇博客文章的主题：微型服务牛群的道路和特征容量。现在我们了解了微服务、集团、羊群、产品、团队，以及企业如何以不同的方式将这些概念融合在一起，这将是一个更容易进行的对话。</p><p>作者：Ryan Wilcox，Wilcox Development Solutions首席开发员。你应该在推特上关注他的其他事情</p></div><div id="story_share_this"><div class="sharethis-inline-share-buttons"></div></div><div class="text-break sotry_link page_narrow"><a target="_blank" href="https://blog.wilcoxd.com/2020/10/24/Herds-Of-Microservices-Flocks-Of-People/">https://blog.wilcoxd.com/2020/10/24/Herds-Of-Microservices-Flocks-Of-People/</a></div><div class="story_tags page_narrow"><button type="button" class="btn btn-light my_tag"><a href="/tag/服务/">#服务</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/herds/">#herds</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/团队/">#团队</a></button></div></div><div class="shadow p-3 mb-5 bg-white rounded clearfix"><div class="container"><div class="row"><div class="col-sm"><div><a target="_blank" href="/story/1035003.html"><img src="http://img2.diglog.com/img/2020/11/thumb_6da068881c7baa5207333cb0b53c2835.png" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1035003.html">用于VCS服务间互操作的ForgeFed-Federation协议</a></div><span class="my_story_list_date">2020-11-14 8:59</span></div><div class="col-sm"><div><a target="_blank" href="/story/1033851.html"><img src="http://img2.diglog.com/img/2020/11/thumb_d3ed20a5006930bd8200c9d0704d043f.png" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1033851.html">亚马逊42%的评论可能是“不可靠的”</a></div><span class="my_story_list_date">2020-11-8 22:41</span></div><div class="col-sm"><div><a target="_blank" href="/story/1033564.html"><img src="http://img2.diglog.com/img/2020/11/thumb_94b11314bfb5af9f6442b72274a671e4.jpg" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1033564.html">2020年使用AT&T的768kbps DSL会是什么样子-是的，这很糟糕</a></div><span class="my_story_list_date">2020-11-7 6:30</span></div><div class="col-sm"><div><a target="_blank" href="/story/1033421.html"><img src="http://img2.diglog.com/img/2020/11/thumb_9e7cc24d0d195762db3df9b789e2f425.jpg" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1033421.html">WhatsApp于2018年开始在印度测试其支付服务，拥有100万用户。WhatsApp获得了扩大这项服务的批准，从2000万用户开始</a></div><span class="my_story_list_date">2020-11-6 7:30</span></div></div></div></div><div class="my_movie_list_item shadow p-3 mb-5 bg-white rounded"><button type="button" class="btn btn-link my_tag"><a href="/tag/web2.0/">#web2.0</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/google/">#google</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/设计/">#设计</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/创意/">#创意</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/摄影/">#摄影</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/游戏/">#游戏</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/图片/">#图片</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/软件/">#软件</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/视频/">#视频</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/手机/">#手机</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/广告/">#广告</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/apple/">#apple</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/iphone/">#iphone</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/网站/">#网站</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/免费/">#免费</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/下载/">#下载</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/windows/">#windows</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/微软/">#微软</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/firefox/">#firefox</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/苹果/">#苹果</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/blog/">#blog</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/音乐/">#音乐</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/博客/">#博客</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/wordpress/">#wordpress</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/恶搞/">#恶搞</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/艺术/">#艺术</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/qq/">#qq</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/web/">#web</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/谷歌/">#谷歌</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/工具/">#工具</a></button></div></div></div><div id="my_footer"><div class=""><a href="/tags/">tags</a> <a href="/users/">users</a></div>&copy;2012-2021 diglog.com </div></div></body></html>