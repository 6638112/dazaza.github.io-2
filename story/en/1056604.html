<!doctype html><html lang="zh-hans"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Google宣布android开源项目现在支持rust用于开发OS本身，提供比C和C ++更多的内存安全保证 Google announces the Android Open Source Project now supports Rust for developing the OS itself, providing more memory safety guarantees than C and C++</title><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"><link rel="stylesheet" href="/img/css.css?random="><link data-rh="true" rel="icon" href="/img/favicon.ico"/><script data-ad-client="ca-pub-6067137220025946" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script type="text/javascript" src="https://platform-api.sharethis.com/js/sharethis.js#property=5effb96910009800120b8d4d&product=inline-share-buttons" async="async"></script>
<script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?03c1a0f31299b4a2fbb83c34d6beaac9";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script></head><body><div id="my_header"><div class="container"><nav class="navbar navbar-expand-lg"><a class="navbar-brand" href="/"><img alt="diglog" src="/img/logo.v1.gif" class="rounded-sm"></a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarNavAltMarkup"><div class="navbar-nav"></div></div></nav></div></div><div class="container"><div id="my_content"><h1 class="page_narrow">Google announces the Android Open Source Project now supports Rust for developing the OS itself, providing more memory safety guarantees than C and C++<br/>Google宣布android开源项目现在支持rust用于开发OS本身，提供比C和C ++更多的内存安全保证 </h1><div class="row"><div class="col-lg-12 col-12"><div class="my_story_list_item shadow p-3 mb-5 bg-white rounded"><div class="story_page_pub_time page_narrow">2021-04-07 04:15:31</div><div class="story_img_container"><a href="http://img2.diglog.com/img/2021/4/225f34edfe04e87e330bc75e773934df.jpg"><img src="http://img2.diglog.com/img/2021/4/225f34edfe04e87e330bc75e773934df.jpg" class="img-fluid my_story_img" onerror="this.style.display='none'"></a></div><div class="page_narrow text-break page_content"><p>Android as a complete OS solution involves a lot of moving parts. Very broadly speaking, these parts are the app ecosystem and then the OS itself. As a developer, your programming language of choice varies depending on what part of Android you are working on. For app developers, Java and Kotlin are popular options. For developers working on the OS and the lower levels within it, C and C++ have been popular choices so far. Today, Google is adding a third option for OS developers, as the Android Open Source Project now supports the Rust programming language for developing the OS itself.</p><p>Android作为完整的操作系统解决方案涉及大量的活动部件。非常广泛地说，这些部分是应用生态系统，然后是OS本身。作为开发人员，您的编程语言的选择语言因您正在处理的Android的哪个部分而异。对于应用程序开发人员，Java和Kotlin是流行的选择。对于在OS上工作的开发人员以及其中的较低级别，C和C ++到目前为止是流行的选择。如今，Google正在为OS开发人员添加第三个选项，因为Android开源项目现在支持用于开发OS本身的生锈编程语言。</p><p>   Lower levels of the Android OS require systems programming languages like C and C++. These languages provide developers with control and predictability, which is important when accessing low-level system resources and hardware.</p><p>   较低级别的Android OS需要像C和C ++这样的系统编程语言。这些语言为具有控制和可预测性的开发人员提供了控制和可预测性，这在访问低级系统资源和硬件时非常重要。</p><p> Unfortunately, C and C++ fail to provide memory safety guarantees, making them prone to bugs and security vulnerabilities. The developer is responsible for managing memory lifetime on these languages, but in complex and multi-threaded codebases, that is easier said than done.</p><p> 不幸的是，C和C ++无法提供内存安全保证，使其容易发生错误和安全漏洞。开发人员负责管理这些语言的内存生存期，但在复杂和多线程的码条上，这比完成更容易。</p><p> C and C++ together constitute tens of millions of lines of code on the Android platform. These memory safety bugs become the most difficult-to-address source of incorrectness of code, representing ~70% of Android’s high severity security vulnerabilities. Merely fixing these bugs becomes insufficient to deal with the issue, and a better approach would be to prevent them in the first place.</p><p> C和C ++共同构成了Android平台上的数百万个代码。这些内存安全错误成为代码的最困难的错误源，代表〜70％的Android的高度严重性安全漏洞。仅修复这些错误不足以处理这个问题，更好的方法是在第一位置防止它们。</p><p> The lack of memory safety guarantees forces developers to run Android processes within tightly constrained and unprivileged sandboxes. But sandboxes are expensive on resources, consuming additional overhead and introducing latency. Sandboxing also doesn’t eliminate the code’s vulnerabilities entirely, and its efficacy is reduced because of high bug density, further allowing attackers to chain multiple vulnerabilities.</p><p> 缺乏内存安全保障开发人员在严格限制和未经特势率的沙箱中运行Android进程。但沙箱对资源昂贵，消耗额外的开销并引入延迟。沙盒也不会完全消除代码的漏洞，由于高虫密度，它的功效降低，进一步允许攻击者将多种漏洞连锁。</p><p> Another limitation, though not unique to C and C++ but applicable to all memory safety issues, is that the erroneous state must actually be triggered in instrumented code in order to be detected. So even if your code has excellent testing, the actual bug may stay undetected. And when bugs are found, getting them fixed is another task, involving a long and costly process that may not always lead to a correct fix. Thus, bug detection becomes unreliable, and bug prevention is the better approach to take in light of these limitations.</p><p> 另一个限制，但对于C和C ++而不是唯一的限制，但适用于所有内存安全问题，是必须在仪表代码中实际触发错误状态，以便检测到。因此，即使您的代码具有出色的测试，实际错误也可能保持未被发现。当发现错误时，让它们修复是另一个任务，涉及长期且昂贵的过程，可能不会总是导致正确的修复。因此，错误检测变得不可靠，并且错误预防是鉴于这些限制的更好方法。</p><p> This is where the switch to a memory-safe language like Rust comes into the picture.</p><p> 这是切换到像生锈等内存安全语言的地方。 </p><p>  Rust provides memory safety guarantees by using a combination of compile-time checks to enforce object lifetime/ownership, and runtime checks to ensure that memory accesses are valid. This safety is achieved while providing equivalent performance to C and C++. Rust also reduces the need for sandboxing, allowing developers more overhead room to introduce new features that are safer and lighter on resources.</p><p>Rust通过使用编译时检查的组合来提供内存安全保证，以强制执行对象生命周期/所有权，以及运行时检查以确保内存访问有效。在为C和C ++提供等效性能的同时实现了这种安全性。 Rust还减少了对沙箱的需求，允许开发人员更多的开销室来引入更安全和更轻松的新功能。</p><p> While Rust does indeed have its benefits, it’s not feasible to switch the entire Android OS to Rust overnight. And that might not even be needed, as most of Android’s memory bugs occur in new or recently modified code, with about 50% being less than a year old. Google believes that its memory-safe language efforts are best focused on new developments rather than rewriting mature C and C++ code.</p><p> 虽然Rust确实具有其优势，但在一夜之间切换整个Android操作系统是不可行的。并且可能甚至不需要，因为大多数Android的内存错误发生在新的或最近修改的代码中，大约有50％的时间不到一年。谷歌认为，其内存安全的语言努力最为关注新的发展而不是重写成熟的C和C ++代码。</p><p> Rust also focuses on preventing bugs rather than leaning heavily on the detection of bugs, resulting in improved correctness of code. It has several key features, such as memory safety, data concurrency, more expressive type systems, immutable references and variables by default, safer integer handling, better error handling in standard libraries, and much more.</p><p> Rust还侧重于防止虫子而不是倾向于重视错误，从而提高了代码的正确性。它有几个关键功能，例如内存安全，数据并发，更具表现力类型的系统，不可变的引用和变量默认，更安全整数处理，在标准库中更好地处理，以及更多。</p><p>  Google says that it has been adding Rust support to the Android Open Source Project for the past 18 months. But adding a new language to the Android platform is an enormous undertaking. Some toolchains and dependencies need to be maintained, test infrastructure and tooling must be updated, and developers need to be trained.</p><p>  谷歌表示，它一直在过去18个月内向Android开源项目添加了RUDE支持。但为Android平台添加新语言是一个巨大的事业。需要维护某些工具链和依赖项，必须更新测试基础架构和工具，并且需要培训开发人员。</p><p> Google has a few early adopter projects that they will be sharing in the coming months. But even so, it is being made clear that scaling Rust support to more of the OS is a multi-year project.</p><p> 谷歌拥有一些早期采用项目，他们将在未来几个月分享。但即便如此，它正在明确的是，对更多操作系统的缩放生锈支持是一个多年的项目。</p><p> From what we can see, Google is already using Rust at a few places. Android’s new Bluetooth stack rewrite code-named “ Gabeldorsche” is being written in Rust. Work started on Gabeldorsche around the time of Android 11 but is still not in use yet. Android’s  Keystore 2.0 module is written in Rust, and so is the userspace portion of binder, Android’s IPC driver. While not related to Android,  Fuchsia‘s new  netstack is also being written in Rust.</p><p> 从我们所看到的，谷歌已经在几个地方使用了生锈。 Android的新蓝牙堆栈重写代码名为“gabeldorsche”正在锈写。在Android 11的时间围绕Gabeldorsche开始工作，但仍未使用。 Android的KeyStore 2.0模块是用Rust编写的，因此Binder的用户空间部分是Android的IPC驱动程序。虽然与Android无关，紫红色的新Netstack也正在锈蚀。</p><p> For app developers, the switch changes nothing about how you, as an app developer, write apps or how the framework APIs work. This switch only affects how the OS is written.  According to a member of the Android Developer Relations team, Google also does not plan to release a Rust NDK at the moment. The supported languages for app development will continue to be Kotlin, Java, C, and C++.</p><p> 对于应用程序开发人员来说，交换机没有任何关于如何作为应用程序开发人员，编写应用程序或框架API工作方式的问题。此交换机仅影响操作系统的写入方式。根据Android开发人员关系团队的成员，谷歌也不打算此刻释放生锈NDK。支持的应用程序开发语言将继续成为Kotlin，Java，C和C ++。 </p></div><div id="story_share_this"><div class="sharethis-inline-share-buttons"></div></div><div class="text-break sotry_link page_narrow"><a target="_blank" href="https://www.xda-developers.com/google-developing-android-rust/">https://www.xda-developers.com/google-developing-android-rust/</a></div><div class="story_tags page_narrow"><button type="button" class="btn btn-light my_tag"><a href="/tag/开发/">#开发</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/android/">#android</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/开源/">#开源</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/rust/">#rust</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/google/">#google</a></button></div></div><div class="my_movie_list_item shadow p-3 mb-5 bg-white rounded"><button type="button" class="btn btn-link my_tag"><a href="/tag/web2.0/">#web2.0</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/google/">#google</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/设计/">#设计</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/创意/">#创意</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/摄影/">#摄影</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/图片/">#图片</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/游戏/">#游戏</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/软件/">#软件</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/视频/">#视频</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/手机/">#手机</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/广告/">#广告</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/iphone/">#iphone</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/网站/">#网站</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/免费/">#免费</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/下载/">#下载</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/windows/">#windows</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/微软/">#微软</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/firefox/">#firefox</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/blog/">#blog</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/音乐/">#音乐</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/apple/">#apple</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/博客/">#博客</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/苹果/">#苹果</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/wordpress/">#wordpress</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/恶搞/">#恶搞</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/qq/">#qq</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/艺术/">#艺术</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/谷歌/">#谷歌</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/web/">#web</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/工具/">#工具</a></button></div></div></div><div id="my_footer"><div class=""><a href="/tags/">tags</a> <a href="/users/">users</a></div>&copy;2012-2021 diglog.com </div></div></body></html>