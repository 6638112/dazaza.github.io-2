<!doctype html><html lang="zh-hans"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>如何安全存储密码（2010） How To Safely Store A Password (2010)</title><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"><link rel="stylesheet" href="/img/css.css?random="><link data-rh="true" rel="icon" href="/img/favicon.ico"/><script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?03c1a0f31299b4a2fbb83c34d6beaac9";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script><script data-ad-client="ca-pub-6067137220025946" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script type="text/javascript" src="https://platform-api.sharethis.com/js/sharethis.js#property=5effb96910009800120b8d4d&product=inline-share-buttons" async="async"></script></head><body><div id="my_header"><div class="container"><nav class="navbar navbar-expand-lg"><a class="navbar-brand" href="/"><img alt="diglog" src="/img/logo.v1.gif" class="rounded-sm"></a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarNavAltMarkup"><div class="navbar-nav"></div></div></nav></div></div><div class="container"><div id="my_content"><h1 class="page_narrow">How To Safely Store A Password (2010)<br/>如何安全存储密码（2010） </h1><div class="row"><div class="col-lg-12 col-12"><div class="my_story_list_item shadow p-3 mb-5 bg-white rounded"><div class="story_page_pub_time page_narrow">2020-12-04 20:49:42</div><div class="page_narrow text-break page_content"><p>These are all  general purpose hash functions, designed to calculate a digestof huge amounts of data in as short a time as possible. This means that they arefantastic for ensuring the integrity of data and utterly rubbish for storing passwords.</p><p>这些都是通用的哈希函数，旨在在尽可能短的时间内计算大量数据的摘要。这意味着它们非常适合确保数据的完整性，并且完全可以存储密码。</p><p> A modern server can calculate the MD5 hash of about 330MB every second. If yourusers have passwords which are lowercase, alphanumeric, and 6 characters long,you can try  every single possible password of that size in around  40seconds.</p><p> 现代服务器可以每秒计算约330MB的MD5哈希值。如果您的用户密码使用小写字母，字母数字和6个字符的长度，则可以在大约40秒内尝试使用该大小的每个可能的密码。</p><p>  If you’re willing to spend about 2,000 USD and a week or two picking up CUDA, you can put together yourown little supercomputer cluster which will let you try around 700,000,000 passwords a second.And that rate you’ll be cracking those passwords at the rate of more than  oneper second.</p><p>  如果您愿意花2,000美元和一两个星期的时间来购买CUDA，您可以将自己的小型超级计算机集群组合在一起，让您每秒尝试大约700,000,000个密码。速率超过每秒</p><p>  It’s important to note that  salts are useless for preventing dictionaryattacks or brute force attacks. You can use huge salts or many salts orhand-harvested, shade-grown, organic Himalayan pink salt. It doesn’taffect how fast an attacker can try a candidate password, given the hash and thesalt from your database.</p><p>  请务必注意，盐对于防止字典攻击或蛮力攻击没有用。您可以使用大量盐或许多盐，也可以使用人工收集的，阴影生长的有机喜马拉雅粉红盐。根据您数据库中的哈希值和盐，它不会影响攻击者尝试候选密码的速度。</p><p> Salt or no, if you’re using a general-purpose hash function designed for speedyou’re well and truly effed.</p><p> 不管是盐还是盐，如果您使用的是专为提高速度而设计的通用哈希函数，那么效果确实不错。</p><p>  How? Basically, it’s slow as hell. It uses a variant of the Blowfish encryptionalgorithm’s keying schedule, and introduces a  work factor, which allows you todetermine how expensive the hash function will be. Because of this, bcrypt cankeep up with Moore’s law. As computers get faster you can increase the workfactor and the hash will get slower.</p><p>  怎么样？基本上，它慢得要命。它使用了Blowfish加密算法的密钥计划的变体，并引入了一个工作因数，使您可以确定哈希函数的成本。因此，bcrypt可以跟上摩尔定律。随着计算机变得越来越快，您可以增加工作因数，哈希将变慢。</p><p> How much slower is bcrypt than, say, MD5? Depends on the work factor. Usinga work factor of 12, bcrypt hashes the password  yaaa in about 0.3 seconds onmy laptop. MD5, on the other hand, takes less than a microsecond.</p><p> bcrypt比MD5慢多少？取决于工作因素。使用12的工作系数，bcrypt在我的笔记本电脑上在约0.3秒内对密码yaaa进行哈希处理。另一方面，MD5花费不到一微秒的时间。 </p><p> So we’re talking about  5 or so orders of magnitude. Instead of cracking apassword every 40 seconds, I’d be cracking them every  12 years or so. Yourpasswords might not need that kind of security and you might need a fastercomparison algorithm, but bcrypt allows you to choose your balance of speedand security. Use it.</p><p>因此，我们谈论的是大约5个数量级。与其每40秒破解一次密码，不如每12年左右破解一次。您的密码可能不需要这种安全性，并且可能需要更快的比较算法，但是bcrypt允许您选择速度和安全性之间的平衡。用它。</p><p>    I’ve been getting pretty regular emails about this article for the past year,and I figured I’d address some of the concerns here rather than have the sameconversations over and over again.</p><p>    在过去的一年里，我一直在收到有关该文章的定期电子邮件，我认为我会在这里解决一些问题，而不是一遍又一遍地进行相同的对话。</p><p>  Please read the Provos &amp; Mazières paper.bcrypt is an adaptive password hashing algorithm which uses the Blowfishkeying schedule, not a symmetric encryption algorithm.</p><p>  请阅读Provos＆amp; Mazièrespaper.bcrypt是一种自适应密码哈希算法，它使用Blowfishkeying调度而不是对称加密算法。</p><p> You said salts aren’t helpful, but what about rainbow tables? Why would yousuggest people not use salts?</p><p> 您说盐没有帮助，但是彩虹桌呢？您为什么建议人们不使用盐？</p><p> As the Provos &amp; Mazières paperdescribes, bcrypt has salts built-in to prevent rainbow table attacks. So I’mnot saying salts are without purpose, I’m saying that they don’t preventdictionary or brute force attacks (which they don’t).</p><p> 作为Provos＆amp; Mazières的论文描述说，bcrypt内置有盐以防止彩虹表攻击。因此，我并不是说盐是没有目的的，而是说盐不能阻止字典或蛮力攻击（不是）。</p><p> Rainbow tables, despite their recent popularity as a subject of blog posts, havenot aged gracefully. CUDA/OpenCL implementations of password crackers canleverage the massive amount of parallelism available in GPUs, peaking at billions of candidate passwords a second.You can literally test all lowercase, alphabetic passwords which are ≤7characters in less than 2 seconds. And you can now rent the hardware which makesthis possible to the tune of less than $3/hour. For about $300/hour,you could crack around 500,000,000,000 candidate passwords a second.</p><p> 尽管彩虹表最近作为博客文章的主题而受到欢迎，但它们并没有优雅地老化。密码破解程序的CUDA / OpenCL实现可充分利用GPU中大量的并行性，每秒达到数十亿个候选密码的峰值。您可以在不到2秒的时间内真正测试所有小于等于7个字符的小写字母密码。现在，您可以租用硬件，这使得每小时不到3美元的费用成为可能。每小时大约$ 300，您每秒可以破解约500,000,000,000个候选密码。</p><p> Given this massive shift in the economics of cryptographic attacks, it simplydoesn’t make sense for anyone to waste terabytes of disk space in the hope thattheir victim didn’t use a salt. It’s a lot easier to just crack thepasswords. Even a “good” hashing scheme of        SHA2 256 ( salt ∥ password ) \text{SHA2}_{256}(\text{salt}\|\text{password})      SHA2         2 5 6 ​    (  salt ∥  password )is still completely vulnerable to these cheap and effective attacks, thus theimportance of an adaptive hashing algorithm like bcrypt.</p><p> 鉴于加密攻击经济学的巨大变化，对于任何人来说，浪费TB级的磁盘空间以希望受害者不使用盐都没有任何意义。破解密码要容易得多。甚至SHA2 256（salt∥password）\ text {SHA2} _ {256}（\ text {salt} \ | \\ text {password}）SHA2 2 5 6的“好”哈希方案仍然是（salt∥password）完全容易受到这些廉价有效攻击的攻击，因此像bcrypt这样的自适应哈希算法的重要性。 </p></div><div id="story_share_this"><div class="sharethis-inline-share-buttons"></div></div><div class="text-break sotry_link page_narrow"><a target="_blank" href="https://codahale.com/how-to-safely-store-a-password/">https://codahale.com/how-to-safely-store-a-password/</a></div><div class="story_tags page_narrow"><button type="button" class="btn btn-light my_tag"><a href="/tag/密码/">#密码</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/存储/">#存储</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/store/">#store</a></button></div></div><div class="my_movie_list_item shadow p-3 mb-5 bg-white rounded"><button type="button" class="btn btn-link my_tag"><a href="/tag/web2.0/">#web2.0</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/google/">#google</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/设计/">#设计</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/创意/">#创意</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/摄影/">#摄影</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/图片/">#图片</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/游戏/">#游戏</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/软件/">#软件</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/手机/">#手机</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/视频/">#视频</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/广告/">#广告</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/iphone/">#iphone</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/网站/">#网站</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/免费/">#免费</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/下载/">#下载</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/windows/">#windows</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/苹果/">#苹果</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/微软/">#微软</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/apple/">#apple</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/blog/">#blog</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/firefox/">#firefox</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/音乐/">#音乐</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/博客/">#博客</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/wordpress/">#wordpress</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/恶搞/">#恶搞</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/艺术/">#艺术</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/qq/">#qq</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/web/">#web</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/工具/">#工具</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/分享/">#分享</a></button></div></div></div><div id="my_footer"><div class=""><a href="/tags/">tags</a> <a href="/users/">users</a></div>&copy; 2020 diglog.com </div></div></body></html>