<!doctype html><html lang="zh-hans"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>使用多屏幕窗口放置API管理多个显示</title><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"><link rel="stylesheet" href="/img/css.css?random="><link data-rh="true" rel="icon" href="/img/favicon.ico"/><script data-ad-client="ca-pub-6067137220025946" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script type="text/javascript" src="https://platform-api.sharethis.com/js/sharethis.js#property=5effb96910009800120b8d4d&product=inline-share-buttons" async="async"></script>
<script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?03c1a0f31299b4a2fbb83c34d6beaac9";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script></head><body><div id="my_header"><div class="container"><nav class="navbar navbar-expand-lg"><a class="navbar-brand" href="/"><img alt="diglog" src="/img/logo.v1.gif" class="rounded-sm"></a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarNavAltMarkup"><div class="navbar-nav"></div></div></nav></div></div><div class="container"><div id="my_content"><h1 class="page_narrow">使用多屏幕窗口放置API管理多个显示</h1><div class="row"><div class="col-lg-12 col-12"><div class="my_story_list_item shadow p-3 mb-5 bg-white rounded"><div class="story_page_pub_time page_narrow">2020-09-17 00:49:53</div><div class="story_img_container"><a href="http://img2.diglog.com/img/2020/9/013b004603baf71489f6e900441fbca1.jpg"><img src="http://img2.diglog.com/img/2020/9/013b004603baf71489f6e900441fbca1.jpg" class="img-fluid my_story_img" onerror="this.style.display='none'"></a></div><div class="page_narrow text-break page_content"><p>多屏幕窗口放置API是Capability项目的一部分，目前正在开发中。这篇帖子将随着实施的进展而更新。</p><p>多屏幕窗口放置API允许您枚举连接到您机器的显示器，并将窗口放置在特定屏幕上。</p><p>虚拟交易台可以在多个窗口中显示市场趋势，其中任何一个窗口都可以全屏模式查看。</p><p>幻灯片放映应用程序可以在内部主屏幕上显示演讲者笔记，在外部投影仪上显示演示文稿。</p><p>要在本地试验多屏幕窗口放置API，而不使用原始试用令牌，请在Chrome：//标志中启用#enable-explementation-web-platform-Feature标志。</p><p>从Chrome 86中开始，多屏幕窗口放置API将作为Chrome的原版提供。原产地试验预计将在Chrome 88年(2021年2月24日)结束。</p><p>Origin试用版允许您尝试新功能，并就其可用性、实用性和有效性向Web标准社区提供反馈。有关详细信息，请参阅Web开发人员原版试用指南。若要注册此原版试用版或其他原版试用版，请访问注册页。</p><p>将令牌添加到您的页面。有两种方法可以做到这一点：在每个页面的头部添加一个Origin-Trial&lt；meta&gt；标记。例如，这可能类似于：&lt；meta http-equv=&#34；Origin-Trial&#34；Content=&#34；TOKEN_GOES_HERE&#34；&gt；</p><p>如果您可以配置您的服务器，您还可以使用原始试用HTTP标头添加令牌。生成的响应头应该类似于：Origin-Trial：Token_Goes_Here。</p><p>不幸的是，久经考验的窗口控制方法Window.open()没有意识到额外的屏幕。虽然此API的某些方面看起来有点过时，例如它的windowFeature DOMString参数，但多年来它仍然为我们提供了很好的服务。要指定一个窗口的位置，您可以将坐标作为左坐标和上坐标(或分别为ScreenX和Screeny)传递，并将所需的大小作为宽度和高度(或分别为innerWidth和innerHeight)传递。例如，要在距左侧50像素和距顶部50像素的位置打开一个400×300的窗口，您可以使用以下代码：</p><p>您可以通过查看window.screen属性来获取有关当前屏幕的信息，该属性返回一个Screen对象。这是我的MacBook Air 13上的输出“：</p><p>Window.Screen；/*来自My MacBook Air 13的输出“：availHeight：975 availLeft：0 availTop：23 availWidth：1680 color Depth：30 Height：1050 id：&#34；&#34；Internal：false Left：0 Orientation：ScreenOrientation{angle：0，type：&#34；横向-primary&#34；，onchange：null}象素深度：30 primary：false scalefactor：2 top：0 touch支持：false width：</p><p>像大多数在科技行业工作的人一样，我不得不让自己适应新的工作现实，建立我的个人家庭办公室。我的笔记本电脑如下图所示(如果您感兴趣，可以阅读我的设置的详细信息)。我的MacBook Air旁边的iPad通过Sidecar连接到笔记本电脑，因此，无论何时需要，我都可以快速将iPad转换为第二个屏幕。</p><p>如果我想利用更大的屏幕，我可以将上面代码示例中的弹出窗口放到第二个屏幕上。我是这样做的：</p><p>这是一个粗略的猜测，因为没有办法知道第二个屏幕的尺寸。Window.Screen中的信息只包括内置屏幕，而不包括iPad屏幕。据报道，内置屏幕的宽度为1680像素，因此移动到2500像素可能会将窗口转移到iPad上，因为我恰好知道它位于我的MacBook Air的右侧。一般情况下我该怎么做呢？事实证明，有比猜测更好的方法。这种方式就是多屏幕窗口放置API。</p><p>在使用多屏幕窗口放置API之前，我必须向用户请求权限。可以使用权限API查询新的窗口放置权限，如下所示：</p><p>设GRANTED=FALSE；Try{const{state}=等待导航器.permission。查询({name：&#34；窗口放置&#34；})；GRANT=STATE=&#34；；}捕获{//无任何内容。}。</p><p>浏览器可以选择在首次尝试使用新API的任何方法时动态显示权限提示。请阅读以了解更多信息。</p><p>要使用多屏幕窗口放置API，我将首先调用Window.isMultiScreen()方法。它返回一个承诺，根据机器当前连接的是一个屏幕还是多个屏幕，该承诺的解析结果为TRUE或FALSE。对于我的设置，它返回true。</p><p>现在我知道当前设置是多屏幕的，我可以使用Window.getScreens()获取有关第二个屏幕的更多信息。它返回使用Screen对象数组解析的承诺。在我的连接了iPad的MacBook Air 13上，这将返回一个由两个屏幕对象组成的数组：</p><p>等待窗口。GetScreens()；/*连接iPad的MacBook Air 13“输出：屏幕1(内置显示屏)：availHeight：975 availLeft：0 availLeft：23 availWidth：1680 color Depth：30 Height：1050 id：&#34；0&#34；Internal：True Left：0 Orientation：Null PixelDepth：30 primary：true scalefactor：2 top：0 touch支持：false width：1680 screen 2(IPad)：availHeight。内部：假左：1680方向：零像素深度：24主：假比例因子：2顶部：0触摸支持：假宽度：1366*/。</p><p>请注意iPad的Left值是如何从1680开始的，这正好是内置显示屏的宽度。这使我能够准确地确定屏幕是如何逻辑排列的(相邻、重叠等)。现在每个屏幕都有数据来显示它是否是内部屏幕以及它是否是主屏幕。请注意，内置屏幕不一定是主屏幕。这两个屏幕也都有一个ID，如果它在浏览器会话中保持不变，则允许恢复窗口排列。</p><p>现在唯一缺少的是检测我的屏幕设置何时更改的方法。一个名为creenschange的新事件就是这样做的：只要屏幕星座被修改，它就会触发。(请注意，事件名称中的&#34；creens&#34；是复数。)当连接的一个屏幕的分辨率改变时，或者当新的或现有的屏幕(在Sidecar的情况下是物理地或虚拟地)插入或拔下插头时，它也会触发。</p><p>请注意，您需要异步查找新的屏幕详细信息，ScreensChange事件本身不提供此数据。这在未来可能会改变。现在，您可以通过调用window.getScreens()来查看屏幕详细信息，如下所示。</p><p>窗户。AddEventListener(&#39；Screenschange&#39；，Async(Event)=&gt；{控制台。日志(我在那里，但基本上没用，事件)；常量详细信息=等待窗口。GetScreens()；})；</p><p>到目前为止，您可以通过命名恰当的requestFullScreen()方法请求以全屏模式显示元素。该方法接受一个Options参数，您可以在该参数中传递FullcreenOptions。到目前为止，它唯一的属性是NavigationUI。多屏幕窗口放置API添加了一个新的Screen属性，允许您确定在哪个屏幕上启动全屏视图。例如，如果要使主屏幕全屏显示：</p><p>尝试{const primary yScreen=(等待getScreens())。筛选器((Screen)=&gt；Screen.primary)[0]；等待文档.body。RequestFullScreen({Screen：PrimiyScreen})；}catch(Err){控制台。错误(err.name，err.message)；}。</p><p>不能对多屏幕窗口放置API进行多边形填充，但您可以填补其形状，以便可以专门针对新API进行编码：</p><p>If(！(&#34；getScreens&#34；in Window)){//返回当前屏幕的一个元素数组，//注意可能还有更多元素。窗户。GetScreens=async()=&gt；[Window.screen]；//返回`false`，注意这可能是谎言。窗户。IsMultiScreen=Async()=&gt；false；}。</p><p>API的其他方面-oncreenschange事件和FullcreenOptions的Screen属性-不会被不支持的浏览器分别触发或静默忽略。</p><p>如果您和我一样，您会密切关注各种加密货币的发展。(实际上，我非常不关注，但是，出于本文的目的，假设我关注)。为了跟踪我拥有的加密货币，我开发了一款网络应用程序，可以让我在所有生活情况下都能观察市场，比如坐在舒适的床上，我有一个很棒的单屏设置。</p><p>这是关于密码的，市场随时都可能变得忙碌起来。如果发生这种情况，我可以快速移到我的办公桌前，在那里我可以设置多屏幕。我可以点击任何货币的窗口，并在对面屏幕上以全屏视图快速查看全部详细信息。下面是我在上一次YCY大屠杀时拍的一张最近的照片，它让我完全措手不及，把手放在脸上。</p><p>您可以使用下面嵌入的演示，或者在GLITCH上查看其源代码。</p><p>Chrome团队使用控制访问功能强大的Web平台功能(包括用户控制、透明度和人体工程学)中定义的核心原则设计并实现了多屏幕窗口放置API。多屏幕窗口放置API暴露了有关连接到设备的屏幕的新信息，增加了用户的指纹面，特别是那些具有持续连接到其设备的多个屏幕的用户。作为这一隐私问题的一次缓解，暴露的屏幕属性被限制在常见放置用例所需的最低限度。站点需要用户权限才能获取多屏幕信息并在其他屏幕上放置窗口。</p><p>用户完全控制其设置的曝光。他们可以接受或拒绝权限提示，并通过浏览器中的站点信息功能撤销以前授予的权限。</p><p>使用多屏幕窗口放置API的权限是否已被授予，这一事实在浏览器的站点信息中显示出来，也可以通过权限API进行查询。</p><p>Chrome团队想了解您使用多屏幕窗口放置API的体验。</p><p>API有没有什么地方不像您预期的那样工作？或者，是否缺少实现您的想法所需的方法或属性？对安全模型有什么疑问或评论吗？</p><p>在相应的GitHub回购上提交规范问题，或将您的想法添加到现有问题上。</p><p>你在Chrome的实现中发现错误了吗？或者实现与规范不同？</p><p>在new.crbug.com上提交漏洞。请确保包含尽可能多的详细信息、简单的复制说明，并在组件框中输入Blink&gt；WindowDialog。Gitch非常适合于快速、轻松地分享批评意见。</p><p>您是否计划使用多屏幕窗口放置API？您的公开支持有助于Chrometeam确定功能的优先顺序，并向其他浏览器供应商展示支持这些功能的重要性。</p><p>向@ChromiumDev发送带有#WindowPlacement标签的推文，让我们知道您在哪里以及如何使用它。</p><p>多屏幕窗口放置API规范由Victor Costan和Joshua Bell编辑。该API由Mike Wasserman实现。本文由乔·梅德利、弗朗索瓦·博福特和凯西·巴斯克审阅。感谢劳拉·托伦特·普伊格提供的照片。</p></div><div id="story_share_this"><div class="sharethis-inline-share-buttons"></div></div><div class="text-break sotry_link page_narrow"><a target="_blank" href="https://web.dev/multi-screen-window-placement/">https://web.dev/multi-screen-window-placement/</a></div><div class="story_tags page_narrow"><button type="button" class="btn btn-light my_tag"><a href="/tag/api/">#api</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/displays/">#displays</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/屏幕/">#屏幕</a></button></div></div><div class="shadow p-3 mb-5 bg-white rounded clearfix"><div class="container"><div class="row"><div class="col-sm"><div><a target="_blank" href="/story/1023358.html"><img src="http://img2.diglog.com/img/2020/9/thumb_c29f8db28896da1a54c25cff49f297c2.jpg" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1023358.html">现代Ruby序列化程序</a></div><span class="my_story_list_date">2020-9-12 0:8</span></div><div class="col-sm"><div><a target="_blank" href="/story/1022755.html"><img src="http://img2.diglog.com/img/2020/9/thumb_48d6c00cc799f46ef5d37585d9074897.png" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1022755.html">为什么像Git中的API密钥这样的秘密是个问题</a></div><span class="my_story_list_date">2020-9-8 23:28</span></div><div class="col-sm"><div><a target="_blank" href="/story/1022142.html"><img src="http://img2.diglog.com/img/2020/9/thumb_80371e02ea2f5829aee125c0631e484c.png" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1022142.html">鲜为人知的Web API</a></div><span class="my_story_list_date">2020-9-5 2:30</span></div><div class="col-sm"><div><a target="_blank" href="/story/1021467.html"><img src="http://img.diglog.com/img/2020/8/thumb_3e73990220427075ab149e89ece6e1dc.jpeg" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1021467.html">我们应该如何构建明天的API呢？</a></div><span class="my_story_list_date">2020-8-31 23:54</span></div></div></div></div><div class="my_movie_list_item shadow p-3 mb-5 bg-white rounded"><button type="button" class="btn btn-link my_tag"><a href="/tag/web2.0/">#web2.0</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/google/">#google</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/设计/">#设计</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/创意/">#创意</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/摄影/">#摄影</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/游戏/">#游戏</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/图片/">#图片</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/软件/">#软件</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/视频/">#视频</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/手机/">#手机</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/广告/">#广告</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/apple/">#apple</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/iphone/">#iphone</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/网站/">#网站</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/免费/">#免费</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/下载/">#下载</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/windows/">#windows</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/微软/">#微软</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/firefox/">#firefox</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/苹果/">#苹果</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/blog/">#blog</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/音乐/">#音乐</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/博客/">#博客</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/wordpress/">#wordpress</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/恶搞/">#恶搞</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/艺术/">#艺术</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/qq/">#qq</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/web/">#web</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/谷歌/">#谷歌</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/工具/">#工具</a></button></div></div></div><div id="my_footer"><div class=""><a href="/tags/">tags</a> <a href="/users/">users</a></div>&copy;2012-2021 diglog.com </div></div></body></html>