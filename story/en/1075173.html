<!doctype html><html lang="zh-hans"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Req–一种HTTP脚本语言Req – An HTTP Scripting Language</title><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"><link rel="stylesheet" href="/img/css.css?random="><link data-rh="true" rel="icon" href="/img/favicon.ico"/><script data-ad-client="ca-pub-6067137220025946" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script type="text/javascript" src="https://platform-api.sharethis.com/js/sharethis.js#property=5effb96910009800120b8d4d&product=inline-share-buttons" async="async"></script>
<script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?03c1a0f31299b4a2fbb83c34d6beaac9";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script></head><body><div id="my_header"><div class="container"><nav class="navbar navbar-expand-lg"><a class="navbar-brand" href="/"><img alt="diglog" src="/img/logo.v1.gif" class="rounded-sm"></a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarNavAltMarkup"><div class="navbar-nav"></div></div></nav></div></div><div class="container"><div id="my_content"><h1 class="page_narrow">Req – An HTTP Scripting Language<br/>Req–一种HTTP脚本语言</h1><div class="row"><div class="col-lg-12 col-12"><div class="my_story_list_item shadow p-3 mb-5 bg-white rounded"><div class="story_page_pub_time page_narrow">2022-03-02 23:29:35</div><div class="page_narrow text-break page_content"><p>Programming languages are always something that have fascinated me, how they&#39;redesigned, how they&#39;re implemented, and how they&#39;re used. Whether they&#39;re a DSL(domain specific language) or more of a generic programming language. Aprogramming language is always something I had wanted to take a stab atcreating, even if it ended up being terrible, or being of no true utility, butonly for the sake of learning. Well, over the Christmas break I decided tooccupy my time on developing a language, one that was small and simple, designedfor a specific use case that I had encountered but hadn&#39;t found a solution for.The language that I ended up developing was  req, a language designedonly for HTTP scripting.</p><p>编程语言总是让我着迷，它们是如何&#39；重新设计，他们如何&#39；重新实施，以及如何实施&#39；重复使用。他们是否&#39；是DSL（领域特定语言）或更多的通用编程语言。编程语言一直是我想尝试创造的东西，即使它最终很糟糕，或者没有真正的用处，但只是为了学习。嗯，在圣诞节假期期间，我决定花时间开发一种语言，它小巧简单，专为我遇到但尚未遇到的特定用例而设计&#39；我没有找到解决问题的办法。我最终开发的语言是req，一种专门为HTTP脚本设计的语言。</p><p>   What do I mean when I say HTTP scripting? Perhaps an example would be best todemonstrate, followed by an explanation,</p><p>我说HTTP脚本是什么意思？也许最好举个例子，然后解释一下，</p><p> Token = env &#34;GH_TOKEN&#34;;Headers = ( Authorizationn: &#34;Bearer $(Token)&#34;,);Resp = GET &#34;https://api.github.com/user&#34; $Headers -&gt; send;if $Resp.StatusCode == 200 { User = decode json $Resp.Body; writeln _ &#34;Hello $(User[&#34;login&#34;])&#34;;}</p><p>Token=env&#34；GH#U代币&#34；；标题=（授权N:&#34；持票人$（代币）&#34；，）；Resp=GET&#34；https://api.github.com/user&#34; $标题-&gt；邮寄如果是$Resp。StatusCode==200{User=decode json$Resp.Body；writeln&#34；Hello$（User[&#34；login&#34；]）&#34;;}</p><p> Above is what req looks like. It looks like your typical language, however itoffers first-class support for making HTTP requests and working with theirresponses. The language makes use of builtin commands to handle the sendingof requests, the encoding/decoding of data, and the reading/writing of data.These commands also return values that can be stored in variables. The outputof one command can be sent as the input of another command via the  -&gt;operator. There is no support for user defined commands.</p><p>以上就是req的样子。它看起来像是您的典型语言，但是它为发出HTTP请求和处理响应提供了一流的支持。该语言使用内置命令来处理请求的发送、数据的编码/解码以及数据的读取/写入。这些命令还返回可以存储在变量中的值。一个命令的输出可以通过-&gt；操作人员不支持用户定义的命令。</p><p>   the above example makes use of the  GH_TOKEN environment variable, so if wewanted it to actually function we would need to make sure that was setbefore invocation,</p><p>上面的例子使用了GH_TOKEN环境变量，所以如果我们想让它实际运行，我们需要确保在调用之前，</p><p>  So, from a brief overview you can see that there is some familiarity with otherlanguages out there. I call this a scripting language, as opposed to aprogramming language, as it is interpreted, and extremely limited in scope andcapabilities.</p><p>所以，从一个简短的概述中，你可以看到，人们对其他语言有一些熟悉。我把它称为脚本语言，而不是程序语言，因为它是被解释的，并且在范围和功能上非常有限。</p><p> req can also be used via the REPL, which is accessed simply by invoking thebinary and passing no arguments to it. This can be used as a scratchpad to planout what you want your scripts to do, or as a means of exploring an HTTP serviceand its endpoints,</p><p>req也可以通过REPL使用，只需调用二进制文件，不向其传递任何参数即可访问REPL。这可以用作草稿行，以规划您希望脚本执行的操作，也可以用作探索HTTP服务及其端点的方法，</p><p> $ reqreq devel a5ddbe7 Sat Jan 29 11:34:38 2022 +0000&gt; Resp = GET &#34;https://httpbin.org/json&#34; -&gt; send&gt; writeln _ $RespHTTP/2.0 200 OKAccess-Control-Allow-Credentials: trueAccess-Control-Allow-Origin: *Content-Length: 429Content-Type: application/jsonDate: Sat, 26 Feb 2022 14:14:56 GMTServer: gunicorn/19.9.0{ &#34;slideshow&#34;: { &#34;author&#34;: &#34;Yours Truly&#34;, &#34;date&#34;: &#34;date of publication&#34;, &#34;slides&#34;: [ { &#34;title&#34;: &#34;Wake up to WonderWidgets!&#34;, &#34;type&#34;: &#34;all&#34; }, { &#34;items&#34;: [ &#34;Why &lt;em&gt;WonderWidgets&lt;/em&gt; are great&#34;, &#34;Who &lt;em&gt;buys&lt;/em&gt; WonderWidgets&#34; ], &#34;title&#34;: &#34;Overview&#34;, &#34;type&#34;: &#34;all&#34; } ], &#34;title&#34;: &#34;Sample Slide Show&#34; }}</p><p>$REQUEQ devel a5ddbe7周六1月29日11:34:38 2022+0000&gt；Resp=GET&#34；https://httpbin.org/json&#34; -&gt；发送&gt；writeln$RespHTTP/2.0 200 OK访问控制允许凭据：trueAccess Control允许来源：*内容长度：429内容类型：应用程序/jsonDate:Sat，2月26日2022年2 2 2 2 14:14:14:56 GMT服务器：Guniicorn/19.9.0{#34；幻灯片和34；：：\#；34；34；作者和作者；作者；作者和作者；34；作者和34；34；你的真诚的；你的真实的你的；你的真实的；你的；你的真实的；你的；你的真实的；你的；你的；你的；你的；你的；你的；你的；你的；你的；你的；你的；你的；你的；你的；你的；你的；你的；你的日期；日期；日期；日期；日期；日期；日期；日期；日期；日期；日期；日期；日期；日期；日期；日期；日期；日期；日期；日期；日期；日期；日期；日期；日期；日期；日期；日期；日期；日期；34；34；34；34；34；34；34#34；类型&#34；：&#34；全部&#34；}，{&#34；物品&#34；：[&#34；为什么&lt；em&gt；WonderWidgets&lt；/em&gt；很棒&#34；，&#34；谁&lt；em&gt；购买&lt；/em&gt；WonderWidgets&gt；]&#34;标题&#34；：&#34;概述&#34&#34;类型&#34；：&#34;全部&#34；}]&#34;标题&#34；：&#34;幻灯片示例&#34；}</p><p>   The first was for the sake of learning. Some time ago I had received copies ofthe books  Writing An Interpreter In Go and Writing A Compiler In Go. I had worked through thefirst book at the start of 2020, and enjoyed what I had learned, wanted to putwhat I had learned to practice. At the time however, I couldn&#39;t think of a funor interesting language that I would have wanted to develop, so I shelved theprospect of it for some time, which brings me to my second reason...</p><p>第一个是为了学习。不久前，我收到了用围棋写翻译和用围棋写编译器的书的副本。我在2020年初读完了第一本书，很享受我所学到的，想把我所学到的付诸实践。然而，当时我不能&#39；I don’我想不出一门有趣有趣的语言，我想发展它，所以我把它的前景搁置了一段时间，这就引出了我的第二个原因。。。</p><p> I think most developers have to interact with an HTTP service at some pointduring their day job, in a way which would require some form of scripting.Perhaps you&#39;re trying to debug an API, so you pull open a terminal and fire offa few  curl requests, and see what response comes back. Or maybe youwant to scrape a site for its information. Either way, you&#39;re doing somethingthat involves some tinkering.</p><p>我认为大多数开发人员必须在日常工作中的某个时间点与HTTP服务进行交互，这需要某种形式的脚本。也许你&#39；我们正试图调试一个API，所以打开一个终端，发出几个curl请求，看看会有什么响应。或者你想从一个网站上获取信息。不管怎样，你&#39；我们正在做一些需要修补的事情。</p><p> I have been there too. And it is this scenario that made me wonder if there wasa tool out there that allowed for easily working with HTTP requests and theirresponses in a programmatic way. Sure, you could use curl and shell scripting,and wrangle the data through sed, awk, and jq to get the data you need, but thisapproach can be fragile. On the other hand you could use a full fledgedprogramming language. This way, you would have more control, but it can beperhaps a bit too verbose at times if all you want to do is send off an HTTPrequest.</p><p>我也去过那里。正是这种情况让我想知道，是否有一种工具能够以编程的方式轻松处理HTTP请求及其响应。当然，您可以使用curl和shell脚本，并通过sed、awk和jq来处理数据，以获得所需的数据，但这种方法可能很脆弱。另一方面，您可以使用成熟的编程语言。这样，您将拥有更多的控制权，但如果您只想发送一个HTTPrequest，那么有时可能会有点过于冗长。</p><p> This is was prompted my development on req. A high-level scripting language thatallows you to easily send out HTTP requests, and work with their responses. Themain benefit of the language, in my opinion, is that it tries to make workingwith HTTP requests as semantic as possible, take the following,</p><p>这是促使我在req上开发的。一种高级脚本语言，允许您轻松发送HTTP请求，并处理它们的响应。在我看来，这种语言的主要好处是，它试图使与HTTP请求的工作尽可能具有语义，具体如下：，</p><p>  here we want to send a  GET request to the  https://httpbin.org/json endpoint.Writing this out either in a script or the REPL can feel more natural than whatyou might otherwise write when using curl, for example. Then let&#39;s say we wantto decode the response data into JSON,</p><p>这里我们想向https://httpbin.org/json终点。例如，在脚本或REPL中写出来比在使用curl时写出来更自然。然后让&#39；假设我们想把响应数据解码成JSON，</p><p>  again, it&#39;s like we&#39;re describing what we want to do with the response. This iswhat I wanted to achieve with this language, keep it limited in scope, andhopefully offer some utility in the realm of HTTP scripting.</p><p>同样，它&#39；就像我们&#39；重新描述我们想对回复做什么。这就是我想用这种语言实现的目标，将其限制在有限的范围内，并希望在HTTP脚本领域提供一些实用程序。</p><p>  What I&#39;ve covered in this post is a simple overview of the language, and thereasons behind it&#39;s implementation. I haven&#39;t gone into my justificationsas to how/why the language was designed the way it was, but that could perhapsbe another post down the line. If what I&#39;ve shown so far interests you, thenfeel free to take a look at the code for it on GitHub: https://github.com/andrewpillar/req and feel free to spool through the documentation there too, to get a sense of the language.</p><p>我&#39；我在这篇文章中简单介绍了这门语言，以及它背后的原因#39；它的实施。我没有&#39；I don’我没有解释语言是如何设计的，但这可能是另一篇文章。如果我&#39；到目前为止，我已经向您展示了您的兴趣，然后可以在GitHub上随意查看它的代码：https://github.com/andrewpillar/req也可以随意翻阅那里的文档，了解语言。</p></div><div id="story_share_this"><div class="sharethis-inline-share-buttons"></div></div><div class="story_tags page_narrow"><button type="button" class="btn btn-light my_tag"><a href="/tag/http/">#http</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/语言/">#语言</a></button></div></div><div class="my_movie_list_item shadow p-3 mb-5 bg-white rounded"><button type="button" class="btn btn-link my_tag"><a href="/tag/web2.0/">#web2.0</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/google/">#google</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/设计/">#设计</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/创意/">#创意</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/摄影/">#摄影</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/图片/">#图片</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/游戏/">#游戏</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/软件/">#软件</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/广告/">#广告</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/视频/">#视频</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/手机/">#手机</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/iphone/">#iphone</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/网站/">#网站</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/免费/">#免费</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/windows/">#windows</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/下载/">#下载</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/微软/">#微软</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/苹果/">#苹果</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/firefox/">#firefox</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/blog/">#blog</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/音乐/">#音乐</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/博客/">#博客</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/apple/">#apple</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/wordpress/">#wordpress</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/恶搞/">#恶搞</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/qq/">#qq</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/谷歌/">#谷歌</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/艺术/">#艺术</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/web/">#web</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/工具/">#工具</a></button></div></div></div><div id="my_footer"><div class=""><a href="/tags/">tags</a> <a href="/users/">users</a></div>&copy;2012-2021 diglog.com </div></div></body></html>