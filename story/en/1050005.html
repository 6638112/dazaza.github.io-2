<!doctype html><html lang="zh-hans"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>使用FFmpeg从视频创建动画GIF和WebP Create animated GIF and WebP from videos using FFmpeg</title><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"><link rel="stylesheet" href="/img/css.css?random="><link data-rh="true" rel="icon" href="/img/favicon.ico"/><script data-ad-client="ca-pub-6067137220025946" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script type="text/javascript" src="https://platform-api.sharethis.com/js/sharethis.js#property=5effb96910009800120b8d4d&product=inline-share-buttons" async="async"></script>
<script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?03c1a0f31299b4a2fbb83c34d6beaac9";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script></head><body><div id="my_header"><div class="container"><nav class="navbar navbar-expand-lg"><a class="navbar-brand" href="/"><img alt="diglog" src="/img/logo.v1.gif" class="rounded-sm"></a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarNavAltMarkup"><div class="navbar-nav"></div></div></nav></div></div><div class="container"><div id="my_content"><h1 class="page_narrow">Create animated GIF and WebP from videos using FFmpeg<br/>使用FFmpeg从视频创建动画GIF和WebP </h1><div class="row"><div class="col-lg-12 col-12"><div class="my_story_list_item shadow p-3 mb-5 bg-white rounded"><div class="story_page_pub_time page_narrow">2021-03-01 04:14:35</div><div class="page_narrow text-break page_content"><p>Whether it’s for a website, a presentation, or sharing a fun clip with a friend on chat, you might want to convert a video to an animated GIF or animated WebP. Unfortunately, the visual tools for doing this vary by your operating system. Additionally, most conversion tools don’t support  the WebP format, even in 2021. WebP is based on VP8, a relatively recent video codec standard compared to the  GIF image format.</p><p>无论是用于网站，演示文稿，还是与朋友聊天共享有趣的剪辑，您都可能希望将视频转换为GIF动画或WebP动画。不幸的是，执行此操作的视觉工具因您的操作系统而异。此外，即使在2021年，大多数转换工具也不支持WebP格式。WebP基于VP8，与GIF图像格式相比，VP8是一种相对较新的视频编解码器标准。</p><p> So, this guide is for those who are willing to learn a bit of terminal in order to convert any video to the animated format of their choosing. The best part: this will work on all major operating systems and gives you all the control of the output you could want!</p><p> 因此，本指南适用于那些愿意学习一些终端以将任何视频转换为他们选择的动画格式的人。最好的部分：这将在所有主要操作系统上运行，并为您提供所需输出的所有控制！</p><p>      Basic knowledge of how to open and use the terminal on your operating system. If you need a cheat sheet or introductory guides, check out  Terminal Cheat Sheet.</p><p>      有关如何在操作系统上打开和使用终端的基本知识。如果您需要备忘单或入门指南，请查看终端备忘单。</p><p>  FFmpeg v4+ installed on your operating system and executable from your path. Here are some suggested places to learn down to do this:</p><p>  FFmpeg v4 +已安装在操作系统上，并且可以从路径执行。这是一些建议的地方，可以进行学习：</p><p>   FFmpeg is a free and open-source software project consisting of a large suite of libraries and programs for handling video, audio, and other multimedia files and streams.</p><p>   FFmpeg是一个免费的开源软件项目，由用于处理视频，音频和其他多媒体文件和流的大量库和程序组成。</p><p> For our purposes, we will use it to convert between formats, such as videos to GIFs or animated WebP. It has many uses, so I recommend checking it out for all your video processing needs!</p><p> 为了我们的目的，我们将使用它在格式之间进行转换，例如将视频转换为GIF或动画WebP。它有很多用途，所以我建议您检查一下所有视频处理需求！</p><p>  Since all of these commands require FFmpeg, we need to make sure it’s available.</p><p>  由于所有这些命令都需要FFmpeg，因此我们需要确保它可用。 </p><p>        If you get an output that says something similar to  command not found: ffmpeg -version, then check the  Prerequisites section above and make sure you have FFmpeg installed on your system.</p><p>如果得到的输出类似于未找到的命令：ffmpeg -version，请检查上面的“前提条件”部分，并确保已在系统上安装了FFmpeg。</p><p>    ffmpeg -i $INPUT_FILENAME \-vf &#34;fps=$OUTPUT_FPS,scale=$OUTPUT_WIDTH:-1:flags=lanczos,split[s0][s1];[s0]palettegen[p];[s1][p]paletteuse&#34; \-loop $NUMBER_OF_LOOPS $OUTPUT_FILENAME# Change these placeholders:# * $INPUT_FILENAME - path to the input video.# * $OUTPUT_FPS - ouput frames per second. Start with `10`.# * $OUTPUT_WIDTH - output width in pixels. Aspect ratio is maintained.# * $NUMBER_OF_LOOPS - use `0` to loop forever, or a specific number of loops.# * $OUTPUT_FILENAME - the name of the output animated GIF.</p><p>    ffmpeg -i $ INPUT_FILENAME \ -vf＆＃34; fps = $ OUTPUT_FPS，scale = $ OUTPUT_WIDTH：-1：flags = lanczos，split [s0] [s1]; [s0] palettegen [p]; [s1] [p ] paletteuse＆＃34; \ -loop $ NUMBER_OF_LOOPS $ OUTPUT_FILENAME＃更改以下占位符：＃* $ INPUT_FILENAME-输入视频的路径。＃* $ OUTPUT_FPS-每秒输出帧数。以`10`开头。＃* $ OUTPUT_WIDTH-输出宽度（以像素为单位）。 ＃* $ NUMBER_OF_LOOPS-始终使用“ 0”循环，或使用特定数量的循环。＃* $ OUTPUT_FILENAME-输出动画GIF的名称。</p><p>      This is the base command with various options for converting part of a video to an animated GIF:</p><p>      这是基本命令，具有各种选项，可用于将视频的一部分转换为GIF动画：</p><p> ffmpeg -ss $INPUT_START_TIME -t $LENGTH -i $INPUT_FILENAME \-vf &#34;fps=$OUTPUT_FPS,scale=$OUTPUT_WIDTH:-1:flags=lanczos,split[s0][s1];[s0]palettegen[p];[s1][p]paletteuse&#34; \-loop $NUMBER_OF_LOOPS $OUTPUT_FILENAME# Change these placeholders:# * $INPUT_START_TIME - number of seconds in the input video to start from.# * $LENGTH - number of seconds to convert from the input video.# * $INPUT_FILENAME - path to the input video.# * $OUTPUT_FPS - ouput frames per second. Start with `10`.# * $OUTPUT_WIDTH - output width in pixels. Aspect ratio is maintained.# * $NUMBER_OF_LOOPS - use `0` to loop forever, or a specific number of loops.# * $OUTPUT_FILENAME - the name of the output animated GIF.</p><p> ffmpeg -ss $ INPUT_START_TIME -t $ LENGTH -i $ INPUT_FILENAME \ -vf＆＃34; fps = $ OUTPUT_FPS，scale = $ OUTPUT_WIDTH：-1：flags = lanczos，split [s0] [s1]; [s0] palettegen [ p]; [s1] [p] paletteuse＆＃34; \ -loop $ NUMBER_OF_LOOPS $ OUTPUT_FILENAME＃更改以下占位符：＃* $ INPUT_START_TIME-输入视频中的开始秒数。＃* $ LENGTH-从输入视频中转换的秒数。＃* $ INPUT_FILENAME-路径＃* $ OUTPUT_FPS-每秒输出帧数。以`10`开头。＃* $ OUTPUT_WIDTH-输出宽度（以像素为单位）。 ＃* $ NUMBER_OF_LOOPS-始终使用“ 0”循环，或使用特定数量的循环。＃* $ OUTPUT_FILENAME-输出动画GIF的名称。</p><p>       This is the base command with various options for converting an entire video to an animated WebP. You can use options like FPS, output width, and quality to determine the file size and quality of your output:</p><p>       这是基本命令，带有用于将整个视频转换为动画WebP的各种选项。您可以使用FPS，输出宽度和质量等选项来确定文件的大小和输出质量：</p><p> ffmpeg -i $INPUT_FILENAME \-vf &#34;fps=$OUTPUT_FPS,scale=$OUTPUT_WIDTH:-1:flags=lanczos&#34; \-vcodec libwebp -lossless 0 -compression_level 6 \-q:v $OUTPUT_QUALITY -loop $NUMER_OF_LOOPS \-preset picture -an -vsync 0 $OUTPUT_FILENAME# Change these placeholders:# * $INPUT_FILENAME - path to the input video.# * $OUTPUT_FPS - ouput frames per second. Start with `10`.# * $OUTPUT_WIDTH - output width in pixels. Aspect ratio is maintained.# * $OUTPUT_QUALITY - quality of the WebP output. Start with `50`.# * $NUMBER_OF_LOOPS - use `0` to loop forever, or a specific number of loops.# * $OUTPUT_FILENAME - the name of the output animated WebP.</p><p> ffmpeg -i $ INPUT_FILENAME \ -vf＆＃34; fps = $ OUTPUT_FPS，scale = $ OUTPUT_WIDTH：-1：flags = lanczos＆＃34; \ -vcodec libwebp-无损0-压缩级别6 \ -q：v $ OUTPUT_QUALITY -loop $ NUMER_OF_LOOPS \-预设图片-an -vsync 0 $ OUTPUT_FILENAME＃更改这些占位符：＃* $ INPUT_FILENAME-输入视频的路径。 $ OUTPUT_FPS-每秒输出帧数。以`10`开头。＃* $ OUTPUT_WIDTH-输出宽度（以像素为单位）。 ＃* $ OUTPUT_QUALITY-WebP输出的质量。以`50`开始。＃* $ NUMBER_OF_LOOPS-使用'0'可以永久循环，或使用特定数量的循环。＃* $ OUTPUT_FILENAME-输出动画WebP的名称。</p><p>   ffmpeg -i &#34;sample_recording.mp4&#34; \-vf &#34;fps=10,scale=720:-1:flags=lanczos&#34; \-vcodec libwebp -lossless 0 -compression_level 6 \-q:v 50 -loop 0 \-preset picture -an -vsync 0 sample_recording.webp</p><p>   ffmpeg -i＆＃34; sample_recording.mp4＆＃34; \ -vf＆＃34; fps = 10，scale = 720：-1：flags = lanczos＆＃34; \ -vcodec libwebp-无损0-压缩级别6 \ -q：v 50-循环0 \-预设图片-an -vsync 0 sample_recording.webp </p><p>   This is the base command with various options for converting part of a video to an animated WebP:</p><p>这是带有各种选项的基本命令，用于将视频的一部分转换为动画WebP：</p><p> ffmpeg -ss $INPUT_START_TIME -t $LENGTH -i $INPUT_FILENAME \-vf &#34;fps=$OUTPUT_FPS,scale=$OUTPUT_WIDTH:-1:flags=lanczos&#34; \-vcodec libwebp -lossless 0 -compression_level 6 \-q:v $OUTPUT_QUALITY -loop $NUMER_OF_LOOPS \-preset picture -an -vsync 0 $OUTPUT_FILENAME# Change these placeholders:# * $INPUT_START_TIME - number of seconds in the input video to start from.# * $LENGTH - number of seconds to convert from the input video.# * $INPUT_FILENAME - path to the input video.# * $OUTPUT_FPS - ouput frames per second. Start with `10`.# * $OUTPUT_WIDTH - output width in pixels. Aspect ratio is maintained.# * $OUTPUT_QUALITY - quality of the WebP output. Start with `50`.# * $NUMBER_OF_LOOPS - use `0` to loop forever, or a specific number of loops.# * $OUTPUT_FILENAME - the name of the output animated WebP.</p><p> ffmpeg -ss $ INPUT_START_TIME -t $ LENGTH -i $ INPUT_FILENAME \ -vf＆＃34; fps = $ OUTPUT_FPS，scale = $ OUTPUT_WIDTH：-1：flags = lanczos＆＃34; \ -vcodec libwebp-无损0-压缩级别6 \ -q：v $ OUTPUT_QUALITY-循环$ NUMER_OF_LOOPS \-预设图片-an -vsync 0 $ OUTPUT_FILENAME＃更改这些占位符：＃* $ INPUT_START_TIME-将输入视频中的秒数转换为＃* $ LENGTH-从输入视频转换的秒数。＃* $ INPUT_FILENAME-输入视频的路径。＃* $ OUTPUT_FPS-每秒输出帧数。以`10`开头。＃* $ OUTPUT_WIDTH-输出宽度（以像素为单位）。 ＃* $ OUTPUT_QUALITY-WebP输出的质量。以`50`开始。＃* $ NUMBER_OF_LOOPS-使用'0'可以永久循环，或使用特定数量的循环。＃* $ OUTPUT_FILENAME-输出动画WebP的名称。</p><p>   ffmpeg -ss 32.5 -t 7 -i &#34;sample_recording.mp4&#34; \-vf &#34;fps=10,scale=720:-1:flags=lanczos&#34; \-vcodec libwebp -lossless 0 -compression_level 6 \-q:v 50 -loop 0 \-preset picture -an -vsync 0 sample_recording.webp</p><p>   ffmpeg -ss 32.5 -t 7 -i＆＃34; sample_recording.mp4＆＃34; \ -vf＆＃34; fps = 10，scale = 720：-1：flags = lanczos＆＃34; \ -vcodec libwebp-无损0-压缩级别6 \ -q：v 50-循环0 \-预设图片-an -vsync 0 sample_recording.webp</p><p>  This depends on the quality, size, and support you want for your output. Modern browsers have support for animated WebP and the quality tends to be higher, but the processing power required is also higher.</p><p>  这取决于输出所需的质量，大小和支持。现代浏览器支持动画WebP，质量往往更高，但是所需的处理能力也更高。</p><p>  This guide serves as a brief introduction to using FFmpeg to create an animated GIF or animated WebP from a video, but there is so much more you can do with the tool. There are also many options that FFmpeg supports for these formats that are not covered.</p><p>  本指南是使用FFmpeg从视频创建动画GIF或动画WebP的简要介绍，但是您可以使用该工具做更多的事情。 FFmpeg还为这些格式提供了许多未涵盖的选项。</p><p> You can also get the code for all the commands and examples in one place by  visiting the GitHub Gist here.</p><p> 您还可以通过访问此处的GitHub Gist，在一处获取所有命令和示例的代码。 </p></div><div id="story_share_this"><div class="sharethis-inline-share-buttons"></div></div><div class="text-break sotry_link page_narrow"><a target="_blank" href="https://mattj.io/posts/2021-02-27-create-animated-gif-and-webp-from-videos-using-ffmpeg/">https://mattj.io/posts/2021-02-27-create-animated-gif-and-webp-from-videos-using-ffmpeg/</a></div><div class="story_tags page_narrow"><button type="button" class="btn btn-light my_tag"><a href="/tag/ffmpeg/">#ffmpeg</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/animated/">#animated</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/输出/">#输出</a></button></div></div><div class="my_movie_list_item shadow p-3 mb-5 bg-white rounded"><button type="button" class="btn btn-link my_tag"><a href="/tag/web2.0/">#web2.0</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/google/">#google</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/设计/">#设计</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/创意/">#创意</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/摄影/">#摄影</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/图片/">#图片</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/游戏/">#游戏</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/软件/">#软件</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/视频/">#视频</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/手机/">#手机</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/广告/">#广告</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/iphone/">#iphone</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/网站/">#网站</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/免费/">#免费</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/下载/">#下载</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/windows/">#windows</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/微软/">#微软</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/blog/">#blog</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/firefox/">#firefox</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/apple/">#apple</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/音乐/">#音乐</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/苹果/">#苹果</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/博客/">#博客</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/wordpress/">#wordpress</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/恶搞/">#恶搞</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/艺术/">#艺术</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/qq/">#qq</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/web/">#web</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/工具/">#工具</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/分享/">#分享</a></button></div></div></div><div id="my_footer"><div class=""><a href="/tags/">tags</a> <a href="/users/">users</a></div>&copy; 2020 diglog.com </div></div></body></html>