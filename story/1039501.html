<!doctype html><html lang="zh-hans"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>ARM MacBook与Intel MacBook：SIMD基准测试 </title><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"><link rel="stylesheet" href="/img/css.css?random="><link data-rh="true" rel="icon" href="/img/favicon.ico"/><script data-ad-client="ca-pub-6067137220025946" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script type="text/javascript" src="https://platform-api.sharethis.com/js/sharethis.js#property=5effb96910009800120b8d4d&product=inline-share-buttons" async="async"></script>
<script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?03c1a0f31299b4a2fbb83c34d6beaac9";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script></head><body><div id="my_header"><div class="container"><nav class="navbar navbar-expand-lg"><a class="navbar-brand" href="/"><img alt="diglog" src="/img/logo.v1.gif" class="rounded-sm"></a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarNavAltMarkup"><div class="navbar-nav"></div></div></nav></div></div><div class="container"><div id="my_content"><h1 class="page_narrow">ARM MacBook与Intel MacBook：SIMD基准测试 </h1><div class="row"><div class="col-lg-12 col-12"><div class="my_story_list_item shadow p-3 mb-5 bg-white rounded"><div class="story_page_pub_time page_narrow">2020-12-14 22:22:04</div><div class="story_img_container"><a href="http://img2.diglog.com/img/2020/12/c72a4bdf84c77ccc3eff0558d5edc17a.jpg"><img src="http://img2.diglog.com/img/2020/12/c72a4bdf84c77ccc3eff0558d5edc17a.jpg" class="img-fluid my_story_img" onerror="this.style.display='none'"></a></div><div class="page_narrow text-break page_content"><p>在我之前的博客文章中，我将基于ARM的新款MacBook Pro与基于Intel 2017的MacBook Pro的性能进行了比较。我使用了数字解析基准。在某些情况下，基于ARM的MacBook Pro的速度几乎是旧的基于Intel的MacBook Pro的两倍。</p><p> 我认为Apple M1处理器是笔记本电脑行业的突破。它使苹果公司能够销售出第一款非常出色的基于ARM的笔记本电脑。当然，不仅仅是芯片。它周围的一切。例如，我完全希望大多数购买这些基于ARM的新型笔记本电脑的人永远不会意识到它们不是基于Intel的。过渡是如此顺利。</p><p> 我很兴奋，因为我认为它将推动其他笔记本电脑制造商重新考虑他们的设计。您可以从Apple购买具有20小时电池寿命的薄型笔记本电脑，并且能够像更大更重的笔记本电脑那样进行密集的计算。</p><p> 但是，我认为新的Apple处理器在所有方面都不比Intel处理器更好。一个明显的警告是，我正在将Apple M1（2020年处理器）与一个较旧的Intel处理器（2017年发布）进行比较。但是我认为，即使在某些任务上，即使是较旧的英特尔处理器也可以在Apple M1上占据优势，我想澄清这一点。我不认为这是有争议的。但是我因发表以下言论而受到批评：</p><p> 在某些方面，Apple M1芯片远不如我的旧Intel处理器。英特尔处理器具有漂亮的256位SIMD指令。苹果芯片没有任何东西可以作为其主CPU的一部分。因此，我可以轻松地提出一些使M1看起来很糟糕的示例。</p><p> 这使许多读者误入歧途。他们指出，ARM处理器确实具有称为NEON的128位SIMD指令。他们是这样。在某些方面，NEON指令集比x64 SSE / AVX更好。最近的Apple ARM处理器有四个执行SIMD处理的执行单元，而Intel处理器只有三个。此外，英特尔执行单元还有更多限制。因此，尽管64位ARM NEON例程都在128位寄存器上运行，但它们的性能将优于同类的SSE2（128位SIMD）Intel例程。实际上，我有一篇博客文章通过使用iPhone的处理器来说明这一点。</p><p> 但是并不能因此得出结论，128位ARM NEON指令通常与Intel和AMD提供的256位SIMD指令相匹配。 </p><p>让我们说明一下这个问题。 simdjson库提供重载SIMD的功能，以最小化JSON并验证UTF-8输入。我编写了一个基准程序，该程序将文件加载到内存中，然后反复调用minify和validate函数，以寻求最佳的速度。使用MacBook和Xcode的任何人都应该能够重现我的结果。</p><p> 向量化的UTF-8验证算法在每字节少于一个指令的验证UTF-8中进行了描述（发布于软件：实践和经验）。</p><p> simdjson库依赖于抽象层，因此可以使用更高级别的C ++来实现功能，该C ++可以转换为特定于目标系统的高效SIMD内在函数。也就是说，我们没有比较不同的手动调整的汇编函数。您可以自己在线查看UTF-8验证代码。</p><p>   如您所见，在这些特定测试中，较旧的Intel处理器远远优于Apple M1。</p><p> 当然，这只是一组基准。有很多混杂因素。算法选择是否有利于AVX2 ISA？有可能的。值得庆幸的是，所有源代码均可用，因此可以评估任何此类偏见。</p><p> 我相信对于某些SIMD密集型任务，使用Intel和AMD处理器将获得更好的结果。更高级和更宽的SIMD指令可能会具有寄存器宽度和执行单元无法体现的优势。</p><p> 笔记。有些人读这样的博客文章太快了。因此，让我明确并重复一下： </p><p>我的2020 MacBook Pro为我的日常活动配备了更好的全能处理器。 实际上，这就是为什么我不想一开始就包含SIMD编号的原因，因为我认为出色的SIMD性能不能弥补较弱的总体性能。  我并不是说SIMD指令的性能完全取决于寄存器的宽度。 也就是说，我并不是说因为ARM NEON具有128位寄存器，而不是Intel的256位或512位，所以它将慢2倍或4倍。 指令宽度只是一个因素。 实际上，我已经写过一个事实，即苹果处理器上的ARM NEON可以比英特尔处理器上的同类128位SSE2更好。 （用于解码）和五个（用于编码）。  我知道Apple在带有神经引擎和GPU的系统上包括了ARM内核。 </p></div><div id="story_share_this"><div class="sharethis-inline-share-buttons"></div></div><div class="text-break sotry_link page_narrow"><a target="_blank" href="https://lemire.me/blog/2020/12/13/arm-macbook-vs-intel-macbook-a-simd-benchmark/">https://lemire.me/blog/2020/12/13/arm-macbook-vs-intel-macbook-a-simd-benchmark/</a></div><div class="story_tags page_narrow"><button type="button" class="btn btn-light my_tag"><a href="/tag/macbook/">#macbook</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/simd/">#simd</a></button></div></div><div class="shadow p-3 mb-5 bg-white rounded clearfix"><div class="container"><div class="row"><div class="col-sm"><div><a target="_blank" href="/story/1039493.html"><img src="http://img2.diglog.com/img/2020/12/thumb_5297b6c53d0d1cbfac7a6f437d325549.jpg" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1039493.html">技术文案撰写：工程师可以从Apple的M1 MacBook Marketing中学到什么 </a></div><span class="my_story_list_date">2020-12-14 22:19</span></div><div class="col-sm"><div><a target="_blank" href="/story/1039280.html"><img src="http://img2.diglog.com/img/2020/12/thumb_9db3c19d5eb452e7df3df42efb228b61.jpeg" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1039280.html">Simplo电池会损坏MacBook逻辑板吗？ </a></div><span class="my_story_list_date">2020-12-12 21:52</span></div><div class="col-sm"><div><a target="_blank" href="/story/1039215.html"><img src="http://img2.diglog.com/img/2020/12/thumb_c72a4bdf84c77ccc3eff0558d5edc17a.jpg" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1039215.html">ARM MacBook与Intel MacBook </a></div><span class="my_story_list_date">2020-12-12 9:42</span></div><div class="col-sm"><div><a target="_blank" href="/story/1039103.html"><img src="http://img2.diglog.com/img/2020/12/thumb_f2a3a4507d0f699f8bb926b8626798e8.png" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1039103.html">M1 MacBook Air：完美 </a></div><span class="my_story_list_date">2020-12-11 23:28</span></div></div></div></div><div class="my_movie_list_item shadow p-3 mb-5 bg-white rounded"><button type="button" class="btn btn-link my_tag"><a href="/tag/web2.0/">#web2.0</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/google/">#google</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/设计/">#设计</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/创意/">#创意</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/摄影/">#摄影</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/游戏/">#游戏</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/图片/">#图片</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/软件/">#软件</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/视频/">#视频</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/手机/">#手机</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/广告/">#广告</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/apple/">#apple</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/iphone/">#iphone</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/网站/">#网站</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/免费/">#免费</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/下载/">#下载</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/windows/">#windows</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/微软/">#微软</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/firefox/">#firefox</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/苹果/">#苹果</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/blog/">#blog</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/音乐/">#音乐</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/博客/">#博客</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/wordpress/">#wordpress</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/恶搞/">#恶搞</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/艺术/">#艺术</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/qq/">#qq</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/web/">#web</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/谷歌/">#谷歌</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/工具/">#工具</a></button></div></div></div><div id="my_footer"><div class=""><a href="/tags/">tags</a> <a href="/users/">users</a></div>&copy;2012-2021 diglog.com </div></div></body></html>