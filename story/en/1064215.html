<!doctype html><html lang="zh-hans"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>探索iPad的Android开发 Exploring Android Development on iPad</title><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"><link rel="stylesheet" href="/img/css.css?random="><link data-rh="true" rel="icon" href="/img/favicon.ico"/><script data-ad-client="ca-pub-6067137220025946" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script type="text/javascript" src="https://platform-api.sharethis.com/js/sharethis.js#property=5effb96910009800120b8d4d&product=inline-share-buttons" async="async"></script>
<script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?03c1a0f31299b4a2fbb83c34d6beaac9";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script></head><body><div id="my_header"><div class="container"><nav class="navbar navbar-expand-lg"><a class="navbar-brand" href="/"><img alt="diglog" src="/img/logo.v1.gif" class="rounded-sm"></a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarNavAltMarkup"><div class="navbar-nav"></div></div></nav></div></div><div class="container"><div id="my_content"><h1 class="page_narrow">Exploring Android Development on iPad<br/>探索iPad的Android开发 </h1><div class="row"><div class="col-lg-12 col-12"><div class="my_story_list_item shadow p-3 mb-5 bg-white rounded"><div class="story_page_pub_time page_narrow">2021-06-08 07:39:31</div><div class="page_narrow text-break page_content"><p>After Apple has announced M1 for iPads people started speculating that we will see “pro” apps like Xcode announced for iPadOS during the upcoming WWDC. It got me thinking about the experience of building mobile apps on tablets, especially the workflow with emulators/simulators.</p><p>Apple宣布M1对于iPads，人们开始推测，我们将在即将到来的WWDC期间看到Xcode等Xcode等“Pro”应用程序。它让我思考在平板电脑上建立移动应用程序的经验，尤其是使用仿真器/模拟器的工作流程。</p><p> A couple of months ago, I came across the  blog post of Joaquim Verges that showed how  Projector could be used to enable remote IDE experience. Essentially, Projector allows running IntelliJ-based IDEs, such as Android Studio, on a remote machine with a lot of computing power. Since Projector draws UI in a browser, your favorite IDE becomes available anywhere, including iPads.</p><p> 几个月前，我遇到了Joaquim Vergers的博客文章，显示了投影仪如何用于启用远程IDE体验。基本上，投影仪允许在具有很多计算功率的远程计算机上运行基于Intricij的IDE，例如Android Studio。由于投影仪在浏览器中绘制UI，因此您最喜欢的IDE可用，包括iPad。</p><p> However, the mobile dev loop is incomplete without running the app in an emulator or a physical device. To my knowledge, there is no way of running an ADB server on iOS, killing off chances of connecting an Android phone directly to an iPad. Hosting emulators on iOS is also not possible without jailbreaking the device or sideloading applications. Instead of hosting it, we can run it alongside Android Studio on a VM and connect to it using a VNC client.</p><p> 但是，在仿真器或物理设备中，移动驱动循环不完整。据我所知，无法在iOS上运行adb服务器，杀死将Android手机直接连接到iPad的机会。在没有越狱设备或SIDELOADING应用程序的情况下，也无法在iOS上托管模拟器。我们可以在VM上与Android Studio旁边运行它，而不是托管它，并使用VNC客户端连接到它。</p><p> The first part of this blog post demonstrates the result, while the second one dives deeper into technical details.</p><p> 本博客文章的第一部分展示了结果，而第二个潜入技术细节则更深。</p><p>   The setup used in this demo includes an iPad Air (2020) paired with a magic keyboard and trackpad (see the picture above). This combination works pretty well, especially with the cursor support in iPadOS.</p><p>   该演示中使用的设置包括与魔术键盘和触控板配对的iPad Air（2020）（参见上图）。这种组合效果很好，特别是在iPados中的光标支持。</p><p> Below you can see Android Studio (AS) rendered by Safari, along with the Android emulator connected through VNC. Since both Android Studio and emulator run on a single VM, AS automatically discovers emulator as a target device.</p><p> 下面可以查看Safari呈现的Android Studio（AS），以及通过VNC连接的Android仿真器。由于Android Studio和模拟器​​都在单个VM上运行，因此自动将仿真器作为目标设备。</p><p>   The performance of the Projector is surprisingly good. Even though latency is noticeable, it is not significant enough to become disturbing. The cursor support comes in very handy, especially for small UI elements of IDEs. Since AS is running on Linux, there is access to a shell and git, which is a massive advantage.</p><p>   投影机的性能令人惊讶的是。尽管延迟明显，但它不足以变得令人不安。光标支持非常方便，特别是对于IDE的小UI元素。由于在Linux上运行时，可以访问shell和git，这是一种大量优势。 </p><p>  The keyboard shortcuts do not work or clash with the ones in the browser (can be specific to Safari on iPadOS).</p><p>键盘快捷方式不起作用或与浏览器中的功能（可以在iPados上特定于Safari）。</p><p>  Trackpad gestures, such as two-finger scrolling, are not translated into scroll events in the IDE correctly.</p><p>  TrackPad手势（例如双指滚动）不会正确地翻译成IDE中的滚动事件。</p><p> And the last con is that there is not much space left for AS when running side-by-side with the emulator. If you are running a 13” iPad Pro, it will be less of a problem for you. Alternatively, you can run the emulator in a slide-over window:</p><p> 最后的CON是，剩下的空间没有太多的空间，因为用仿真器并排运行。如果您正在运行13个“ipad pro，则会为您提供较少的问题。或者，您可以在幻灯片窗口中运行仿真器：</p><p>   One of the highlights for me was that the VNC client sent the touch and scroll events directly to the emulator. Using the touch screen to control the emulator felt much more natural compared to clicking and dragging the mouse. In general, performance was acceptable, but there is a lot of space for improvement in the latency and framerate. I have tried VMs with dedicated GPUs and  WebRTC instead of VNC but did not get better results. Possibly that hardware acceleration does not work well with nested virtualization of CPU and GPU, so renting a bare metal machine could help, but I have not tried that yet.</p><p>   我的一个亮点是VNC客户端将触摸和滚动事件直接发送给仿真器。使用触摸屏来控制仿真器与单击和拖动鼠标相比，感觉更自然。一般来说，性能是可以接受的，但潜伏期和竞争率有很多可改善空间。我尝试过专用的GPU和WebRTC而不是VNC的VM，但没有得到更好的结果。可能的是，硬件加速度不适用于CPU和GPU的嵌套虚拟化，因此租用裸机机器可以提供帮助，但我还没有尝试过。</p><p>   The second part of the blog post describes the steps necessary to configure the Projector server and emulator.</p><p>   博客文章的第二部分描述了配置投影机服务器和仿真器所需的步骤。</p><p>  You will need a VM with support for nested virtualization or KVM. Otherwise, android emulators will be unusable. I have picked Ubuntu Server 18.04 LTS as OS because I am familiar with it the most, so some steps will have to be adapted to the distro of your choice. Pick a VM that is geographically closest to you, as it will likely have lower latency. My configuration had four virtual cores and 16 GBs of RAM.</p><p>  您将需要一个VM，支持嵌套虚拟化或KVM。否则，Android仿真器将无法使用。我已经选择了Ubuntu Server 18.04 LTS作为操作系统，因为我最熟悉它，因此一些步骤必须适应您选择的发行版。选择一个在地理上最接近您的VM，因为它可能会有更低的延迟。我的配置有四个虚拟核心和16个GB的RAM。</p><p> Once the VM is up and running, you will need to set up your private/public SSH keys. Most cloud providers like AWS, Azure, and Google Cloud have tutorials on how to achieve that.</p><p> 一旦VM启动并运行，您需要设置私有/公共SSH键。大多数云提供商喜欢AWS，Azure和Google Cloud都有关于如何实现这一目标的教程。 </p><p> Most cloud providers close all ports by default as a security measure, but we will need to open at least three of them: 22 for SSH, 7070 for Projector, and 5050 for VNC. As with SSH authentication, see cloud vendor-specific guide on how to configure the firewall.</p><p>大多数云提供商默认情况下关闭所有端口作为安全措施，但我们需要至少打开其中的三个：22用于SSH，7070为投影仪，5050 for VNC。与SSH身份验证一样，请参阅有关如何配置防火墙的云供应商的指南。</p><p>  Projector setup steps are based on  Joaquim’s guide with minor adjustments made to account for the latest changes in Projector.</p><p>  投影仪设置步骤基于Joaquim的指南，其中对投影机的最新变化进行了次要调整。</p><p>    # updating local repositories sudo apt-get update # required if we want to run standalone SDK and AVD managers sudo apt-get  install openjdk-8-jdk # python 3 is required by the Projector installer sudo apt-get  install python3 python3-pip # we need to upgrade pip, otherwise installer failspython3  -m pip  install  -U pip # install Projectorpip3  install projector-installer</p><p>    ＃更新本地存储库sudo apt-get update＃所需的如果我们想要运行sdk和avd managers sudo apt-get安装OpenJDK-8-JDK＃Python 3是投影机安装程序sudo apt-get安装python3 python3-pip＃我们需要升级PIP，否则安装程序FailSpython3-MPIP INSTALL -U PIP＃安装ProjectORPIP3安装投影机安装程序</p><p> Now restart the shell session by exiting and SSH-ing into the machine. Check if Projector was installed correctly by running the help command.</p><p> 现在通过退出和SSH-IN进入机器来重新启动shell会话。通过运行HELP命令检查投影仪是否正确安装。</p><p>   # create a new directory mkdir androidstudio  &amp;&amp;  cd androidstudio # you can find a link to AS build here: https://developer.android.com/studio/archive # projector supports only versions 4.2 and abovecurl  -L  --output android-studio.tar.gz &lt;direct_download_link_to_as&gt; # unzip the archive tar  -xvf android-studio.tar.gz</p><p>   ＃创建一个新目录mkdir androidstudio＆amp;＆amp; CD androidstudio＃您可以在此处找到一个链接，如这里构建：https://developer.android.com/studio/Archive＃投影仪仅支持版本4.2和Abovecurl -l --output android-studio.tar.gz＆lt; direct_download_link_to_as＆gt; ＃解压缩归档tar -xvf android-studio.tar.gz</p><p>  # you will be prompted to accept a license when # running for the firstprojector config add  --expert There are no installed Projector IDEs. Would you like to specify a path to IDE manually?  [Y/n]Y Enter the path to IDE  (&lt;tab&gt;  for  complete ): &lt;path_to_android_studio&gt; Enter a new configuration name or press ENTER  for default  [Android_Studio]:as Would you like to specify listening address  (or host )  for Projector?  [y/N]y Enter a Projector listening address  (press ENTER  for default )  [ * ]:7070 Would you like to specify  hostname  for Projector access??  [y/N]n Would you like to  set password  for connection?  [y/N]y Please specify RW password: Repeat password: Would you like to  set separate read-only password?  [y/N]n Adding new config with name as</p><p>  ＃当＃for firstProjector Config添加时，系统将提示您接受许可证--Expert没有安装的投影仪IDE。您想手动指定IDE的路径吗？ [y / n] y输入IDE的路径（＆lt; tab＆gt; for complete）：＆lt; path_to_android_studio＆gt;输入新配置名称或按Enter exper for Default [Android_Studio]：您想指定投影机的收听地址（或主机）吗？ [y / n] y输入投影仪侦听地址（按Enter默认按Enter键）[*]：7070您要指定投影仪访问的主机名吗？您想要设置连接密码吗？ [y / n] y请指定RW密码：重复密码：您想要设置单独的只读密码吗？ [y / n] n添加名称的新配置</p><p> If you want to enable encryption, you will need to edit the configuration by running  projector edit &lt;config_name&gt;. For some reason, Projector does not prompt us to use a secure connection during the first step.</p><p> 如果要启用加密，则需要通过运行投影仪编辑＆lt; config_name＆gt来编辑配置。由于某种原因，投影机不会提示我们在第一步中使用安全连接。 </p><p>  projector run as Configuration name: as To access IDE, open  in browser https://localhost:7070/?token =your_password_here https://127.0.0.1:7070/?token =your_password_here https://10.0.0.6:7070/?token =your_password_here</p><p>投影仪作为配置名称运行：至于访问IDE，在浏览器中打开https：// localhost：7070 /？token = your_password_here https://127.0.0.1：//127.0.0.1：//127.0.0.1：//127.0.0.1：//127.0.0.1：//127.0.0.1：//127.0.0.1：//127.0.0.1：//127.0.0.0.0:7070/10.0.0.0.6:7070/10.0.0.6:7070/10.0.0.0.0:7070/10.0.0.0.0:7070/ ？令牌= your_password_here</p><p> If you point the browser to  http://your_server_ip_addres:7070?token=your_password_here, you will see Android Studio. Now you can go ahead and clone a project to the remote machine and start working on it.</p><p> 如果将浏览器指向http：// your_server_ip_addres：7070？令牌= your_password_hee，您将看到Android Studio。现在，您可以继续克隆一个项目到远程机器并开始工作。</p><p>      nano ~/.bashrc # append the following lines to .bashrc export  ANDROID_SDK = $HOME/Android/Sdk export  PATH = $ANDROID_SDK/emulator: $ANDROID_SDK/tools: $ANDROID_SDK/tools/bin: $ANDROID_SDK/platform-tools: $PATH # source the .bashrc file to load new variables source ~/.bashrc</p><p>      nano〜/ .bashrc＃附加到.bashrc导出android_sdk = $ home / android / sdk export path = $ android_sdk / memulator：$ android_sdk / tools：$ android_sdk / tools / bin：$ android_sdk / platform-tools：$路径＃源.bashrc文件加载新变量源〜/ .bashrc</p><p> Once SDK tools are on the path, run  avdmanager list avd to print a list of available emulators. At the time of writing, I had one device available out of the box:  Pixel_3a_API_30_x86. Take a note of the emulator name, we will need it later.</p><p> 一旦SDK工具位于路径上，运行AVDManager列表AVD以打印可用仿真器的列表。在撰写本文时，我有一个设备在框中提供：Pixel_3a_api_30_x86。拍摄仿真器名称，我们稍后需要它。</p><p>   4: Servers do not run desktop environments with GUI to save resources. However, we want to run emulators with UI accessible, so we will need to configure an in-memory display server – Xvfb (X virtual framebuffer). To expose the X display as a VNC server, we will use x11vnc.</p><p>   4：服务器不会使用GUI运行桌面环境以节省资源。但是，我们希望使用UI可访问的仿真器，因此我们需要配置内存中显示服务器 -  XVFB（X虚拟帧缓冲器）。要将X显示为VNC服务器，我们将使用X11VNC。</p><p>  To ensure that the graphics pipeline and the VNC server are setup correctly, we will use the glxgears demo application.</p><p>  为确保图形管道和VNC服务器正确设置，我们将使用GLXGEARS演示应用程序。</p><p>  To test everything together, we need to create an X display, start the VNC server, and run the glxgears demo attached to the X display:</p><p>  要将所有内容一起测试，我们需要创建X显示，启动VNC服务器，并运行附加到X显示器的Glxgears演示： </p><p> # create a displayXvfb :1  -screen 0 1080x2220x24  &gt; /dev/null 2&gt;&amp;1 &amp; # run the VNC server listening on 5050x11vnc  -display :1  -quiet  -nopw  -rfbport 5050 # run the glxgears demo DISPLAY =:1 glxgears</p><p>＃创建displayxvfb：1 -screen 0 1080x2220x24＆gt; / dev / null 2＆gt;＆amp; 1＆amp; ＃运行5050x11vnc -display：1 -quiet -nopw -rfbport 5050＃运行​​glxgears演示显示=：1 glxgears</p><p> 5: Open a VNC client of your choice and point it to  your_server_ip_addres:5050. I have used VNC Viewer for iPad. If everything works as expected, you will see the gears animation.</p><p> 5：打开您选择的VNC客户端，将其指向your_server_ip_addres：5050。我为iPad使用了VNC查看器。如果一切正常工作，您将看到齿轮动画。</p><p>  6: Once we have confirmed that the virtual display and the VNC server are working as expected, the only step left is to run the emulator instead of the demo. Stop  glxgears and start the emulator instead:</p><p>  6：一旦我们确认虚拟显示和VNC服务器正常工作，剩下的唯一步骤是运行模拟器而不是演示。停止Glxgears并开始仿真器：</p><p> DISPLAY =:1 emulator  -avd Pixel_3a_API_30_x86  \  -no-boot-anim  -nojni  -netfast  \  # since there is no GPU available, we have to use software acceleration  -gpu swiftshader_indirect  \  # enabling KVM is critical for performance  -qemu  -enable-kvm</p><p> display =：1仿真器-avd pixel_3a_api_30_x86 \ -no-boot-anim -nojni -netfast \＃由于没有可用的gpu，我们必须使用软件加速-gpu swiftshader_indirect \＃启用kvm对性能至关重要 -  kemu-enable- kvm.</p><p> If you encounter an error saying that the current user does not have permission to use KVM, run the following command:  sudo gpasswd -a $USER kvm. You will need to restart the SSH session for the changes to become active. Re-run the emulator command above and now you should see the emulator logs:</p><p> 如果遇到错误，请说当前用户无权使用kvm，请运行以下命令：sudo gpasswd -a $用户kvm。您需要重新启动SSH会话以使更改变为活动状态。重新运行上面的仿真器命令，现在您应该看到模拟器日志：</p><p>  If you try reconnecting the VNC client, you should be able to see the emulator running:</p><p>  如果尝试重新连接VNC客户端，则应能够看到仿真器运行：</p><p>  I recommend disabling the device frame in the AVD manager settings to save precious space. You can also play around with the VNC client settings to adjust the image quality and choose an interaction method (mouse, touch panel, or view only).</p><p>  我建议在AVD管理器设置中禁用设备框以节省宝贵的空间。您还可以使用VNC客户端设置进行播放以调整图像质量，并选择交互方法（仅限鼠标，触摸面板或视图）。 </p><p>    This experiment allowed me to get a taste of what mobile development could look like in the future. Different input methods, such as cursor and keyboard for navigation in IDE, and the touch controls for emulators felt surprisingly natural. I am excited to see native support for developer tools on iPadOS. Let’s hope that Apple will finally make this leap.</p><p>这个实验允许我味道在未来的移动发展可能看起来像什么。 不同的输入方法，如IDE导航的光标和键盘，以及仿真器的触摸控制感到惊人的自然。 我很高兴看到对iPados上的开发人员工具的本机支持。 让我们希望苹果最终会迈出这一跳跃。 </p></div><div id="story_share_this"><div class="sharethis-inline-share-buttons"></div></div><div class="text-break sotry_link page_narrow"><a target="_blank" href="https://abishov.com/2021/06/06/android-studio-on-ipad.html">https://abishov.com/2021/06/06/android-studio-on-ipad.html</a></div><div class="story_tags page_narrow"><button type="button" class="btn btn-light my_tag"><a href="/tag/android/">#android</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/开发/">#开发</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/ipad/">#ipad</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/仿真器/">#仿真器</a></button></div></div><div class="my_movie_list_item shadow p-3 mb-5 bg-white rounded"><button type="button" class="btn btn-link my_tag"><a href="/tag/web2.0/">#web2.0</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/google/">#google</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/设计/">#设计</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/创意/">#创意</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/摄影/">#摄影</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/游戏/">#游戏</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/图片/">#图片</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/软件/">#软件</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/视频/">#视频</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/手机/">#手机</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/广告/">#广告</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/apple/">#apple</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/iphone/">#iphone</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/网站/">#网站</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/免费/">#免费</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/下载/">#下载</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/windows/">#windows</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/微软/">#微软</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/firefox/">#firefox</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/苹果/">#苹果</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/blog/">#blog</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/音乐/">#音乐</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/博客/">#博客</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/wordpress/">#wordpress</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/恶搞/">#恶搞</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/艺术/">#艺术</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/qq/">#qq</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/web/">#web</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/谷歌/">#谷歌</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/工具/">#工具</a></button></div></div></div><div id="my_footer"><div class=""><a href="/tags/">tags</a> <a href="/users/">users</a></div>&copy;2012-2021 diglog.com </div></div></body></html>