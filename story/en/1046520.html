<!doctype html><html lang="zh-hans"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>韦兰*吸 Wayland *Sucks</title><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"><link rel="stylesheet" href="/img/css.css?random="><link data-rh="true" rel="icon" href="/img/favicon.ico"/><script data-ad-client="ca-pub-6067137220025946" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script type="text/javascript" src="https://platform-api.sharethis.com/js/sharethis.js#property=5effb96910009800120b8d4d&product=inline-share-buttons" async="async"></script>
<script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?03c1a0f31299b4a2fbb83c34d6beaac9";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script></head><body><div id="my_header"><div class="container"><nav class="navbar navbar-expand-lg"><a class="navbar-brand" href="/"><img alt="diglog" src="/img/logo.v1.gif" class="rounded-sm"></a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarNavAltMarkup"><div class="navbar-nav"></div></div></nav></div></div><div class="container"><div id="my_content"><h1 class="page_narrow">Wayland *Sucks<br/>韦兰*吸 </h1><div class="row"><div class="col-lg-12 col-12"><div class="my_story_list_item shadow p-3 mb-5 bg-white rounded"><div class="story_page_pub_time page_narrow">2021-01-29 05:03:09</div><div class="page_narrow text-break page_content"><p>Wayland sucks. I&#39;m sure that it&#39;s not  Wayland that sucks, but running Ubuntu18.04 with gnome-wayland is inferior to gnome-x11 in multiple surprising ways,and better in only a few. I&#39;ve been using gnome-wayland now for about a month,since  upgrading to Ubuntu 18.04, and I&#39;m about ready toswitch back.</p><p>Wayland很烂。我确定不是Wayland令人讨厌，但是在gnome-wayland上运行Ubuntu18.04在许多令人惊讶的方式上都不如gnome-x11，而且只有少数几种更好。自从升级到Ubuntu 18.04以来，我已经使用gnome-wayland已有大约一个月了，而我准备切换回来了。</p><p>  In Wayland, I am allowed to switch workspaces with a four-finger swipe onthe trackpad. I&#39;m using a MacBook Pro, so my trackpad is actually good, andI&#39;ve been missing this in X11.</p><p>  在Wayland中，我可以通过在触控板上四指滑动来切换工作区。我正在使用MacBook Pro，所以触控板实际上很好，并且在X11中我一直都没有。</p><p> With Wayland, the machine falls asleep/suspends to RAM much quicker than inX11. Don&#39;t ask me to explain why there is a difference. It is comfortingthat the screen backlight turns off immediately, so I don&#39;t have to wait toconfirm that it&#39;s actually going to go to sleep this time. (Theexceptionally few times it has failed to go to sleep has been when I haveexperimented with settings in  powertop. Fair enough!)</p><p> 使用Wayland，机器可以比inX11更快地进入睡眠状态或挂入RAM。不要问我为什么会有所不同。令人欣慰的是，屏幕背光立即关闭，因此我不必等待确认这次实际上是要入睡了。 （在我几次尝试过powertop中的设置后，它几次都无法入睡。这很公平！）</p><p> No tearing. Wayland actually delivers on this! But the software is notmature, so, while the animation when switching workspaces does not tear, itis not so easy with video playback. The reason is of course that whenfalling back to running applications through the X11 compatibility layer,tear-free playback can no longer be guaranteed. So I would have to use aplayer that supports Wayland, and these are not mature. I&#39;m sorting this asa positive here, because it is straightforward to get the  same experienceas with X11, plus there is an opportunity to experiment with something new.</p><p> 不要流泪Wayland实际上做到了！但是该软件还不成熟，因此，尽管切换工作区时的动画不会撕裂，但视频播放却不那么容易。原因当然是当通过X11兼容性层回到正在运行的应用程序时，不再能够保证无泪播放。因此，我将不得不使用支持Wayland的播放器，而这些播放器还不成熟。我在这里将其归类为肯定的，因为获得与X11相同的体验很简单，而且还有机会尝试一些新的东西。</p><p>  Immature ecosystem:  Guake does not respond to a global hotkey,Wayland-supporting video players have buggy rendering, pop-up windowsappear in the wrong places and so on.</p><p>  未成熟的生态系统：Guake无法响应全局热键，支持Wayland的视频播放器存在错误的渲染，弹出窗口出现在错误的位置等等。</p><p> Worse performance. Wayland promises better performance by eliminating someindirections for programs putting graphics on the screen. However, theperformance I actually experience seems worse. This is definitely the casefor games, such as Factorio, that use the X11 API for getting the graphicson screen. (The actual rendering is of course through OpenGL) The oneexperience I&#39;ve had with a game that uses Wayland directly, even though itis a work in progress hobby project, is  even worse! I experiencedlatencies of 3-4 seconds for response to my input. I&#39;m not sure what tomake of this other than &#34;The Wayland ecosystem is completely immature&#34;.</p><p> 性能更差。 Wayland承诺通过消除将图形显示在屏幕上的程序的某些间接方式来提供更好的性能。但是，我实际体验到的性能似乎更差。对于使用X11 API在屏幕上获取图形的游戏，例如Factorio，绝对是这种情况。 （当然，渲染实际上是通过OpenGL进行的）我曾经玩过一个直接使用Wayland的游戏，尽管这是一个正在进行中的业余爱好项目，却更加糟糕！我的输入响应时间为3-4秒。除了Wayland生态系统完全不成熟之外，我不确定该怎么做。</p><p> Slow resume from sleep. Yes, that&#39;s right. The flip side of suspending morequickly is apparently that it resumes more slowly. When I first bought myMac, running OS X, it would regularly resume from sleep more quickly than Icould open the lid. Newer versions of OS X do this more slowly, and thathas been a huge disappointment. Resume times in Linux has varied a lot butthese days it is near instant in gnome-x11. With gnome-wayland, it requires7-8 seconds.</p><p> 从睡眠中恢复缓慢。是的，没错。悬吊的另一面显然是恢复较慢。当我第一次购买运行OS X的myMac时，它会比打开盖子更快地从睡眠中恢复。较新的OS X版本执行此操作的速度较慢，这令人非常失望。 Linux中的恢复时间变化很大，但是最近几天在gnome-x11中几乎是即时的。使用gnome-wayland，需要7-8秒。 </p><p> Worse input handling. As noted above, there are some input-related thingsthat are made possible in Wayland. However, there is a fundamental problemwith the way input events, or possibly events in general, are handled. Whenthe system experiences high load, for example when I&#39;m compiling Rust code,event handling doesn&#39;t progress as normal. Consider the situation of a keypress: There is a key down event, some time passes, and then a key releaseevent. Depending on the time passed and the key repeat settings, any numberof key press events are generated. When my system experiences high load,the key release event regularly gets pushed back so even when I just pressa key for regular quick typing, I can get many repeated keys printed. Orwhen I switch tabs in Firefox with the keyboard, it ends up jumping manytabs instead of one. Or when I close a tab, all of them disappear. It issimilar for mouse movement events. Suddenly the cursor jumps while moving.</p><p>更糟糕的输入处理。如上所述，在Wayland中可以进行一些与输入有关的事情。但是，处理输入事件或一般事件的方式存在一个基本问题。当系统遇到高负载时，例如当我编译Rust代码时，事件处理将不会正常进行。考虑按键的情况：发生按键按下事件，一段时间后再发生按键释放事件。根据经过的时间和按键重复设置，会生成任意数量的按键事件。当我的系统承受高负载时，按键释放事件会定期被推迟，因此即使我只按一个按键进行常规快速键入，也可以打印出许多重复的按键。或者，当我使用键盘在Firefox中切换标签时，它最终会跳很多标签而不是一个。或者，当我关闭标签时，它们全部消失。鼠标移动事件与之类似。突然，光标在移动时跳转。</p><p> Full disclosure: I have configured my keyboard for really low delay andhigh repeat rate, but this has never caused a problem in any other system.</p><p> 全面披露：我已将键盘配置为真正的低延迟和高重复率，但这从未在任何其他系统中引起问题。</p><p> In a poetic turn of events, this is what happened when I tried typing in&#34;Wayland sucks&#34; for the title. This time I think I will let the errorstand.</p><p> 在充满诗意的事件中，这就是我尝试键入“ Wayland sucks”时发生的情况。为标题。这次我想我会让这个错误站起来。 </p></div><div id="story_share_this"><div class="sharethis-inline-share-buttons"></div></div><div class="text-break sotry_link page_narrow"><a target="_blank" href="https://magnushoff.com/blog/wayland-sucks/">https://magnushoff.com/blog/wayland-sucks/</a></div><div class="story_tags page_narrow"><button type="button" class="btn btn-light my_tag"><a href="/tag/韦兰/">#韦兰</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/wayland/">#wayland</a></button></div></div><div class="my_movie_list_item shadow p-3 mb-5 bg-white rounded"><button type="button" class="btn btn-link my_tag"><a href="/tag/web2.0/">#web2.0</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/google/">#google</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/设计/">#设计</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/创意/">#创意</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/摄影/">#摄影</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/图片/">#图片</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/游戏/">#游戏</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/软件/">#软件</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/视频/">#视频</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/手机/">#手机</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/广告/">#广告</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/iphone/">#iphone</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/网站/">#网站</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/免费/">#免费</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/下载/">#下载</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/windows/">#windows</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/微软/">#微软</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/苹果/">#苹果</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/apple/">#apple</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/blog/">#blog</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/firefox/">#firefox</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/音乐/">#音乐</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/博客/">#博客</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/wordpress/">#wordpress</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/恶搞/">#恶搞</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/qq/">#qq</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/艺术/">#艺术</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/web/">#web</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/工具/">#工具</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/分享/">#分享</a></button></div></div></div><div id="my_footer"><div class=""><a href="/tags/">tags</a> <a href="/users/">users</a></div>&copy; 2020 diglog.com </div></div></body></html>