<!doctype html><html lang="zh-hans"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>我没有小组，我必须尖叫 I Have No Group, and I Must Scream</title><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"><link rel="stylesheet" href="/img/css.css?random="><link data-rh="true" rel="icon" href="/img/favicon.ico"/><script data-ad-client="ca-pub-6067137220025946" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script type="text/javascript" src="https://platform-api.sharethis.com/js/sharethis.js#property=5effb96910009800120b8d4d&product=inline-share-buttons" async="async"></script>
<script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?03c1a0f31299b4a2fbb83c34d6beaac9";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script></head><body><div id="my_header"><div class="container"><nav class="navbar navbar-expand-lg"><a class="navbar-brand" href="/"><img alt="diglog" src="/img/logo.v1.gif" class="rounded-sm"></a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarNavAltMarkup"><div class="navbar-nav"></div></div></nav></div></div><div class="container"><div id="my_content"><h1 class="page_narrow">I Have No Group, and I Must Scream<br/>我没有小组，我必须尖叫 </h1><div class="row"><div class="col-lg-12 col-12"><div class="my_story_list_item shadow p-3 mb-5 bg-white rounded"><div class="story_page_pub_time page_narrow">2021-06-19 17:38:53</div><div class="page_narrow text-break page_content"><p>One of the central tenets of software development, science, and life ingeneral is ‘Be humble.’ In software development, this means that youshould always assume that your code is wrong. It’s almost  never anissue with the compiler, the frameworks, or something else. Most of thetime, it is  you. This is one of those rarer cases where it is  notyou.</p><p>软件开发，科学和生活中的中央原则之一就是“谦虚”。在软件开发中，这意味着你总是假设你的代码是错误的。它几乎从不与编译器，框架或其他东西吻合。大部分时间，它是你。这是它不是你的稀有病例之一。</p><p>  Like many research groups, we like to use compute clusters in order toexecute complex computations in parallel. Our university provides, nextto some additional resources, a  cluster that uses IBM Spectrum LSF.Employing a variety of specialised commands, this framework permits you tointeract with a cluster. For instance, you can submit a new job that isto be executed on some compute node with a certain set of resourcerequirements. Personal preferences notwithstanding, the framework isactually pretty great—after a brief tutorial session, anyone can turntheir Python scripts or other commands into jobs executed on thecluster. As a simple example, here is how to submit the command  ls:</p><p>  与许多研究组一样，我们喜欢使用Compute Clusters in命令并行地进行复杂计算。我们的大学在一些额外的资源下提供了一个使用IBM Spectrum LSF.EMPLION各种专用命令的群集，此框架允许您与群集内存。例如，您可以提交一个新作业，该作业是在某些计算节点上执行的，具有一组副资源。尽管是个人喜好，但框架正处于非常伟大的作文会，任何人都可以将Python脚本或其他命令转换为在Checluster上执行的作业。作为一个简单的例子，这里是如何提交命令ls的：</p><p>  That’s how easy it is in many cases. More advanced calls can be made, ofcourse, if additional resources such as memory or CPU cores are required.Depending on the configuration of the cluster itself, it is alsopossible to request special nodes for, say, GPU-based computations. Butthe main idea is that  bsub and LSF should enable you to run‘fire-and-forget’ jobs that will be executed at  some point by  somenode. The exact choice of node does not matter—or so I thought!</p><p>  这是在许多情况下的容易程度。如果需要更多高级呼叫，如果需要诸如内存或CPU内核的其他资源。在群集本身的配置上进行了配置，则可以为基于GPU的计算提供特殊节点，这是overopossbossible。但是，主要思想是，BSUB和LSF应该使您能够在Somenode的某个点运行'和忘记'工作。节点的确切选择无关紧要 - 或者我认为！</p><p>  As we were working towards a deadline, I noticed intermittent jobfailures but I did not think too much of it. Sometimes, compute nodes godown because of hardware issues, so there is always the probability thatnot all jobs can be executed properly. But a few days before someimportant results were due, more than 90% of all jobs started to fail.The error message was preceded by one of my own warnings (Iredacted the filename for clarity):</p><p>  正如我们致力于截止日期，我注意到间歇性工作，但我并没有想到太多。有时，由于硬件问题，计算节点Lodown，因此始终存在概率，因此所有作业都可以正确执行。但是在Offyimportant的结果到期前几天，超过90％的工作开始失败。错误消息在我自己的一个警告之一之前（为清楚起见的文件名）：</p><p>  A quick check showed that the file was there; I was also able to read itfrom one of the login nodes, so I ruled out any issues with filepermissions for now. Adding some additional tracing into the code,I found that it indeed always failed when it tried to open a certainfile. The file in question was not even very large—just a fewkilobytes at best—but loading it failed in  almost all circumstances.This was getting spooky. Did I have a  Heisenbugon my hands, given that I was unable to reproduce it under controlledconditions?</p><p>  快速检查显示该文件在那里;我也能够从其中一个登录节点中读取IT，因此我现在排除了FilePerMissions的任何问题。在代码中添加一些额外的跟踪，我发现它确实始终在尝试打开某种识别时始终失败。有问题的文件甚至不是非常大的 - 只是一个少数人，但在几乎所有情况下都是失败的。这是幽灵般的。我有一个heisenbugon我的双手，因为我无法在控制信因下重现它吗？</p><p>  After much wailing, weeping, and gnashing of teeth, I decided to justread more about the function that created the error. Partially, this wasto distract me from impending doom, but I was also curious as to whatwas going on here. I was using  os.path.exists() to query the existence ofthe file, so I thought that consulting its manual might be a smart idea.I found the following instructions:</p><p>  经过大量的哀号，哭泣和咬牙切齿，我决定更多地了解创建错误的函数。部分地，这个Wasto分散了我从即将发生的厄运，但我也很好奇在这里。我正在使用os.path.exists（）来查询文件的存在，所以我认为咨询其手册可能是一个智能理念。我发现了以下说明：</p><p> Return  True if path refers to an existing path or an open filedescriptor. Returns  False for broken symbolic links. On some platforms,this function may return  False if permission is not granted to execute os.stat() on the requested file, even if the path physically exists.</p><p> 如果路径引用现有路径或打开的文件识别本，则返回True。返回虚假的符号链接。在某些平台上，如果未在物理存在的路径上，此函数可能会返回false。 </p><p> This seemed to imply that the function  might have returned  False inorder to indicate that the file cannot be accessed. I had ruled outaccess issues before, but now they were suddenly back on the menu. Couldit be that permissions changed intermittently? Was I being fooled intothinking that the permissions on the login node were the same as on thecompute node? I certainly did not change permissions in any way, but asa last-ditch effort I decided to write a script that checks thepermissions by evaluating the groups my user is a part of. The scriptlooked something like this:</p><p>这似乎暗示该函数可能返回错误的否则以指示无法访问该文件。我之前已经统治过突出的问题，但现在他们突然回到了菜单上。可能是这种权限间歇性改变吗？我被愚弄了intothing，登录节点上的权限与thecompute节点相同吗？我当然没有以任何方式改变权限，但是ASA最后一段努力我决定通过评估我的用户的一部分来编写一个检查Permissions的脚本。 Scriptlooked这样的东西：</p><p> #!/usr/bin/env bashfor INDEX in $(seq 0 99); do bsub -W 00:05 -o &#34;debug_%J.out&#34; -R &#34;rusage[mem=128]&#34; groupsdone</p><p> ＃！/ usr / bin / env for index $ $（seq 0 99）; do bsub -w 00:05 -o＆＃34; debug_％J.OUT＆＃34; -r＆＃34; rusage [mem = 128]＆＃34; Groupsdone.</p><p> Notice how I tried to submit a lot of jobs in order to gain a clearerpicture of the status of the compute nodes. I was hoping that the jobswould be nicely distributed among the cluster, and I anxiously waitedfor them to finish running. With the last job finally being completed,I collected my results:</p><p> 请注意，我如何尝试提交大量工作，以便取消计算节点状态的清晰。我希望在群集中很好地分布在群集中，我焦急地审视了他们完成跑步。最后一份工作终于完成，我收集了我的结果：</p><p>    But instead, I received an absolute  hotchpotch of different groups; insome cases, my user was part of almost no  groups at all. The cluster,much like my will a few minutes before, was broken. These news, grim asthey might be for the administrative staff, cheered me up quiteconsiderably because for once, everything was right in the universeagain—there was an explanation! Much like the characters in  HarlanEllison’s story whose title I butchered for thispost,I had been duped and misled by the computer. I have no group, and I mustscream.</p><p>    但相反，我收到了不同群体的绝对热处理; Insome案件，我的用户是几乎没有群体的一部分。群集，就像我之前的几分钟一样，被打破了。这些新闻，严峻的哮喘可能是行政人员，为我来说，因为一次，一切都在宇宙中 - 有一个解释！就像Harlanellison的故事中的角色一样，我的标题我屠杀了这个拼点，我被电脑欺骗了。我没有群体，我必须欣赏。</p><p>  Unlike Ellison’s story, mine had a good ending: the debug script wasappreciated by the support staff, and the issue was rectified withina few days—until it cropped up again, causing considerably lessconfusion (the debug script was already in place), and was fixedagain. This time for real.</p><p>  与埃里森的故事不同，我的结局很好：调试脚本是支持人员的覆盖，问题在几天内纠正 - 直到它再次播种，导致较为少量的信息（已经到位了），并默认。这个时候真的。</p><p> My personal lesson from all of this: I need to study my functions morecarefully. While I could argue that  os.path.exists should havea different behaviour—the function is called  exists, after all—itwas nevertheless an assumption of my part when I thought that this would always work as expected. Know thyself and know thy functions, even ifthey appear to be pretty innocuous at first glance.</p><p> 我的个人课程来自所有这些：我需要训练我的功能。虽然我可以争辩说操作系统.Path.exist应该发生不同的行为 - 当我认为这将始终按预期工作时，所有的IT和所有人都会被调用，函数被称为。知道自己并知道你的职能，即使他们乍一看似乎很无害。 </p></div><div id="story_share_this"><div class="sharethis-inline-share-buttons"></div></div><div class="text-break sotry_link page_narrow"><a target="_blank" href="https://bastian.rieck.me/blog/posts/2021/groups/">https://bastian.rieck.me/blog/posts/2021/groups/</a></div><div class="story_tags page_narrow"><button type="button" class="btn btn-light my_tag"><a href="/tag/group/">#group</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/命令/">#命令</a></button></div></div><div class="my_movie_list_item shadow p-3 mb-5 bg-white rounded"><button type="button" class="btn btn-link my_tag"><a href="/tag/web2.0/">#web2.0</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/google/">#google</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/设计/">#设计</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/创意/">#创意</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/摄影/">#摄影</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/图片/">#图片</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/游戏/">#游戏</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/软件/">#软件</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/手机/">#手机</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/视频/">#视频</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/广告/">#广告</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/windows/">#windows</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/iphone/">#iphone</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/免费/">#免费</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/网站/">#网站</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/下载/">#下载</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/微软/">#微软</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/blog/">#blog</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/firefox/">#firefox</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/音乐/">#音乐</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/苹果/">#苹果</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/apple/">#apple</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/博客/">#博客</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/wordpress/">#wordpress</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/恶搞/">#恶搞</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/艺术/">#艺术</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/qq/">#qq</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/web/">#web</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/谷歌/">#谷歌</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/工具/">#工具</a></button></div></div></div><div id="my_footer"><div class=""><a href="/tags/">tags</a> <a href="/users/">users</a></div>&copy;2012-2021 diglog.com </div></div></body></html>