<!doctype html><html lang="zh-hans"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>我们（错误地）如何在Grooveshark计算流 How we (incorrectly) counted streams at Grooveshark</title><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"><link rel="stylesheet" href="/img/css.css?random="><link data-rh="true" rel="icon" href="/img/favicon.ico"/><script data-ad-client="ca-pub-6067137220025946" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script type="text/javascript" src="https://platform-api.sharethis.com/js/sharethis.js#property=5effb96910009800120b8d4d&product=inline-share-buttons" async="async"></script>
<script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?03c1a0f31299b4a2fbb83c34d6beaac9";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script></head><body><div id="my_header"><div class="container"><nav class="navbar navbar-expand-lg"><a class="navbar-brand" href="/"><img alt="diglog" src="/img/logo.v1.gif" class="rounded-sm"></a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarNavAltMarkup"><div class="navbar-nav"></div></div></nav></div></div><div class="container"><div id="my_content"><h1 class="page_narrow">How we (incorrectly) counted streams at Grooveshark<br/>我们（错误地）如何在Grooveshark计算流 </h1><div class="row"><div class="col-lg-12 col-12"><div class="my_story_list_item shadow p-3 mb-5 bg-white rounded"><div class="story_page_pub_time page_narrow">2021-06-10 03:52:29</div><div class="page_narrow text-break page_content"><p>When Grooveshark Lite launched on April 15, 2008, it was a near instant success for the company. After months of anemic signups for our beta Peer-to-Peer paid download site, “Lite,” as we called it, gave us the shot in the arm we needed to stay alive. We soon crossed the 50,000 registered users threshold, putting us back in good graces with one of our biggest investors, who required that we achieve this milestone or else they wouldn’t invest any additional money in the company. The understanding at the time was that without this kind of user growth and additional investment, we wouldn’t survive.</p><p>当Grooveshark Lite于2008年4月15日推出时，这是该公司的近乎瞬间成功。经过几个月的贫血注册，为我们的Beta Peer-to-Peer下载网站，“Lite”，我们所谓的，让我们在我们需要保持活力的手臂中拍摄。我们很快越过了50,000名注册用户的门槛，让我们回到了我们最大的投资者之一，我们要求我们实现这个里程碑，否则他们不会在公司中投资任何额外的资金。当时的理解是，没有这种用户的增长和额外的投资，我们就不会生存。</p><p> As far as I know, before Grooveshark Lite, there wasn’t any place on the web dedicated to music where you could listen to any song, whenever you wanted, for free. There were music videos on YouTube, but the catalog was limited and at the time, the video-focused site didn’t have the features that you’d expect from a music service (shuffle, repeat, easy playlist management, and so on). The iTunes Music Store offered free 30-second previews of songs and there was Pandora for online radio, but the service imposed lots of restrictions on how you could use it, like limiting the number of times you could click the skip button. Spotify didn’t exist and wouldn’t be available in the US for several more years; Apple Music, Rdio, Google Play Music and all the rest didn’t exist either. Lite was really the first of its kind.</p><p> 据我所知，在Grooveshark Lite之前，网络上没有任何地方致力于您可以免费收听任何歌曲的音乐，无论何时免费。 YouTube上有音乐视频，但目录是有限的，当时，视频集中的网站没有您的目标，您可以从音乐服务（Shuffle，重复，简易播放管理，等等）。 。 iTunes音乐商店提供了免费的30秒的歌曲预览，并有潘多拉在线收音机，但服务对如何使用它的限制，如限制您可以单击跳过按钮的次数。 Spotify不存在，并且在美国不提供几年; Apple Music，RDio，Google Play音乐和所有其余的都不存在。 Lite真的是它的第一个。</p><p> Lite was written in Adobe Flex, a framework which ran on Adobe Flash. This was before HTML 5 and the modern web and Flash was the only platform available for building a cross-platform, media-rich, interactive web app. Lite took full advantage of this interactivity: as you browsed the service, lists of songs, artists, and albums animated in and out of view, just like an iPod. As each new song played, it slid into view, and the interlocked puzzle piece of album art updated, highlighted in blue. Lite was beautiful to look at and immensely fun to use.</p><p> Lite是用Adobe Flex编写的，这是一个在Adobe Flash上​​运行的框架。这是在HTML 5和现代Web和Flash之前是唯一可用于构建跨平台，媒体丰富的交互式Web应用程序的平台。 Lite充分利用了这种互动性：在您浏览服务，歌曲，艺术家和专辑中的服务，类似于iPod。随着每首新歌曲播放，它将其滑入视图中，并且更新的互锁拼图艺术品，以蓝色突出显示。 Lite是美丽的，看起来和非常有趣。</p><p>  To actually deliver music to the application running in the browser, we used an open source implementation of Adobe’s Real Time Streaming Protocol (RTSP) server. Lite would retrieve search results, album listings, playlists, and other music catalog data from our web servers, using the SOAP messaging protocol, and music would stream from another set of servers using RTSP.</p><p>  要实际向浏览器中运行的应用程序提供音乐，我们使用了Adobe的实时流协议（RTSP）服务器的开源实现。 Lite将使用SOAP Messaging协议从Web服务器检索搜索结果，专辑列表，播放列表和其他音乐目录数据，音乐将使用RTSP从另一组服务器流流。</p><p> Soon after Lite’s launch, someone on the team created an internal web page which would show the current number of active music streams on the site along with other statistics about the growth of the service. To determine the number of active streams, Travis created a script which would connect to each RTSP server and run commands that would count the number of open connections. The number of open connections indicated the number of active music streams. We connected a computer to a projector and displayed Lite’s stats page on the west wall of the office for everyone to see.</p><p> Lite在Lite的启动后，团队中的某人创建了一个内部网页，该网页将显示当前网站上的活动音乐流，以及关于服务增长的其他统计数据。要确定活动流的数量，Travis创建了一个脚本，该脚本将连接到每个RTSP服务器并运行将计算打开连接数量的命令。打开连接的数量表示活动音乐流的数量。我们将计算机连接到投影机，并在办公室的西部墙上显示Lite的统计页面，供大家看。</p><p> Soon after the page’s premiere, someone else modified it to add JavaScript which would animate multi-colored, falling balloons each time we hit a new record of active streams. At first, the balloons fell once or twice a day. Then several times per day, then once every hour, as more and more people discovered Lite and listened to more songs. A tradition soon developed of applauding each time the balloons fell: every time we hit a new active streams milestone the entire office erupted in celebration. This continued for weeks.</p><p> 在页面的首映后，别人修改了它，以添加JavaScript，每次达到新的活动流的新记录时，添加JavaScript。起初，气球每天下降一次或两次。然后每天几次，然后每小时一次，随着越来越多的人发现Lite并听取更多的歌曲。每当气球下降时，一系列很快就会发挥鼓掌：每次我们击中一个新的活跃的流程里程碑，整个办事处都阐述了庆祝活动。这持续了数周。</p><p> After some time, everyone got used to breaking new records every day and we either turned off the projector or used it to show something else. Travis would later discover that his script regularly miscounted streams because the RTSP server held open its connections for some time after they’d stopped being used for streams. This meant that many of the records we thought we’d broken, we hadn’t actually broken at all, or at least not when we thought we did. Fortunately, other, more reliable stats told the story better anyway. Both registered and anonymous users were way up and daily, total stream counts were up too. The company had escaped yet another existential threat.</p><p> 经过一段时间，每个人都习惯每天打破新的记录，我们要么关闭投影机，要么用它来显示别的东西。 Travis稍后会发现他的脚本定期错误地流，因为RTSP服务器在他们停止用于流后，RTSP服务器在一段时间内打开其连接。这意味着我们以为我们被破坏的许多记录，我们实际上没有被打破，或者至少在我们以为我们做过的时候。幸运的是，无论如何，其他更可靠的统计数据更好地讲述了这个故事。注册和匿名用户都遍布并每天都有，总流数也提升。该公司逃离了另一种存在威胁。 </p></div><div id="story_share_this"><div class="sharethis-inline-share-buttons"></div></div><div class="text-break sotry_link page_narrow"><a target="_blank" href="https://sharklore.org/stories/balloons/">https://sharklore.org/stories/balloons/</a></div><div class="story_tags page_narrow"><button type="button" class="btn btn-light my_tag"><a href="/tag/counted/">#counted</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/音乐/">#音乐</a></button></div></div><div class="my_movie_list_item shadow p-3 mb-5 bg-white rounded"><button type="button" class="btn btn-link my_tag"><a href="/tag/web2.0/">#web2.0</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/google/">#google</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/设计/">#设计</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/创意/">#创意</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/摄影/">#摄影</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/游戏/">#游戏</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/图片/">#图片</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/软件/">#软件</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/视频/">#视频</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/手机/">#手机</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/广告/">#广告</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/apple/">#apple</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/iphone/">#iphone</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/网站/">#网站</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/免费/">#免费</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/下载/">#下载</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/windows/">#windows</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/微软/">#微软</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/firefox/">#firefox</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/苹果/">#苹果</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/blog/">#blog</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/音乐/">#音乐</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/博客/">#博客</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/wordpress/">#wordpress</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/恶搞/">#恶搞</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/艺术/">#艺术</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/qq/">#qq</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/web/">#web</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/谷歌/">#谷歌</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/工具/">#工具</a></button></div></div></div><div id="my_footer"><div class=""><a href="/tags/">tags</a> <a href="/users/">users</a></div>&copy;2012-2021 diglog.com </div></div></body></html>