<!doctype html><html lang="zh-hans"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>我为什么喜欢基本身份验证(2015)</title><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"><link rel="stylesheet" href="/img/css.css?random="><link data-rh="true" rel="icon" href="/img/favicon.ico"/><script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?03c1a0f31299b4a2fbb83c34d6beaac9";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script><script data-ad-client="ca-pub-6067137220025946" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script type="text/javascript" src="https://platform-api.sharethis.com/js/sharethis.js#property=5effb96910009800120b8d4d&product=inline-share-buttons" async="async"></script></head><body><div id="my_header"><div class="container"><nav class="navbar navbar-expand-lg"><a class="navbar-brand" href="/"><img alt="diglog" src="/img/logo.v1.gif" class="rounded-sm"></a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarNavAltMarkup"><div class="navbar-nav"></div></div></nav></div></div><div class="container"><div id="my_content"><h1 class="page_narrow">我为什么喜欢基本身份验证(2015)</h1><div class="row"><div class="col-lg-12 col-12"><div class="my_story_list_item shadow p-3 mb-5 bg-white rounded"><div class="story_page_pub_time page_narrow">2020-11-04 11:29:55</div><div class="page_narrow text-break page_content"><p>One of the disturbing trends I’ve noticed over the past few years is that moreand more API services are slowly ditching support for HTTP Basic Authentication( aka: Basic Auth) in favor of OAuth.</p><p>我在过去几年中注意到的一个令人不安的趋势是，越来越多的API服务正在慢慢放弃对HTTP基本身份验证(又名：基本身份验证)的支持，转而支持OAuth。</p><p>    It’s a  bad thing because OAuth ( as popular as it is) is a huge pain in theass – for both the people building the API services as well as the developersconsuming them.</p><p>这是一件坏事，因为OAuth(尽管很受欢迎)对构建API服务的人和使用它们的开发人员来说都是一个巨大的痛苦。</p><p> OAuth is complex, misunderstood, widely misused, and lacking universalimplementations. It most definitely has its uses, but in many cases feelsburdensome.</p><p>OAuth是复杂的、被误解的、被广泛误用的，并且缺乏通用的实现。它肯定有它的用处，但在很多情况下会让人感觉不堪重负。</p><p> Basic Auth, on the other hand, is simple, very well understood, and has beenwell supported in every language and framework since the 1990’s.</p><p>另一方面，Basic Auth非常简单，非常容易理解，自20世纪90年代以来在每种语言和框架中都得到了很好的支持。</p><p>      You have an API key pair: an  API Key ID and an  API Key Secret. Each ofthese is a randomly generated string ( usually a  uuid).</p><p>您有一个API密钥对：一个API密钥ID和一个API密钥Secret。它们中的每一个都是随机生成的字符串(通常是UUID)。</p><p> To authenticate against an API service, all you need to do is put yourcredentials into the  HTTP Authorization header.</p><p>要根据API服务进行身份验证，您只需将凭据放入HTTP Authorization头中。</p><p> Here’s an example showing how Basic Auth works on the command line using cURL:</p><p>下面的示例显示了如何使用cURL在命令行上使用基本身份验证：</p><p>   &gt;&gt;&gt; from requests import get&gt;&gt;&gt;&gt;&gt;&gt; api_key_id = &#39;xxx&#39;&gt;&gt;&gt; api_key_secret = &#39;yyy&#39;&gt;&gt;&gt;&gt;&gt;&gt; resp = get(&#39;https://api.someapi.com/v1/blah&#39;, auth=(api_key_id, api_key_secret))&gt;&gt;&gt; print resp.json()</p><p>&gt；&gt；&gt；从请求导入GET&gt；&gt；api_key_id=&#39；xxx&#39；&gt；&gt；api_key_secret=&#39；yyy&#39；&gt；&gt；Resp=get(&#39；https://api.someapi.com/v1/blah&#39；，AUTH=(api_key_id，api_key_secret)&gt；&gt；&gt；打印响应.json()</p><p> And if that isn’t enough, here’s some Node.js code showing it as well:</p><p>如果这还不够，下面的一些Node.js代码也说明了这一点：</p><p> var request = require(&#39;request&#39;);var api_key_id = &#39;xxx&#39;;var api_key_secret = &#39;yyy&#39;;request({ url: &#39;https://api.someapi.com/v1/blah&#39;, auth: { &#39;user&#39;: api_key_id, &#39;pass&#39;: api_key_secret }}, function(err, resp, body) { console.log(body);});</p><p>Var Request=REQUIRED(&#39；REQUEST&#39；)；var api_key_id=&#39；xxx&#39；；var api_key_secret=&#39；yyy&#39；；Request({url：&#39；https://api.someapi.com/v1/blah&#39；，AUTH：{&#39；USER&#39；：api_key_id，&#39；PASS&#39；：API_KEY_SECRET}}，function(err，resp，body){console.log(Body)；})；</p><p>  All Basic Auth lets you do ( at a high level of abstraction) is specify yourcredentials. That’s it.</p><p>所有基本身份验证允许您(在较高抽象级别)指定您的凭据。就这样。</p><p> NOTE:  Yes, I know that technically it’s a little bit more complicated thanthis. There’s base64 encoding, there’s the HTTP Authorization header format,etc., but for argument’s sake I’m leaving that out as it’s not important in thiscontext.</p><p>注：是的，我知道从技术上讲，它比这个稍微复杂一些。有Base64编码，有HTTP Authorization报头格式，等等，但是为了便于讨论，我省略了这些，因为它在这个上下文中并不重要。</p><p> Basic Auth is great for developers because it’s simple, intuitive, and easy touse.</p><p>Basic Auth非常适合开发人员，因为它简单、直观、易于使用。</p><p> Let’s say you’re integrating with an API service, all you do is create an APIKey Pair, and start making requests!</p><p>假设您正在与API服务集成，您所要做的就是创建一个apiKey对，然后开始发出请求！</p><p> What do you do if you accidentally publicize your API Key Pair and it’scompromised? Well… You just create another API Key Pair, put that into yourapplication code, and get rid of the old one!</p><p>如果您不小心公布了您的API密钥对，并且它被泄露了，您该怎么办？Well…。您只需创建另一个API密钥对，将其放入您的应用程序代码中，然后删除旧的！</p><p>     Unlike OAuth, there’s no intermediary steps you need to go through to get anaccess token: all you need are your API keys.</p><p>与OAuth不同，获取访问令牌不需要任何中间步骤：您只需要API密钥。</p><p>  Instead of spending a lot of time figuring out what permissions and scopes youneed granted, setting up redirect URIs, web servers, and all this crap thatonly serves to complicate matters – all you need to do is put your damn APIkeys into the HTTP Authorization header and  BAM, shit works.</p><p>与其花费大量时间来计算您需要授予哪些权限和范围、设置重定向URI、Web服务器以及所有这些只会使问题复杂化的废话，您只需将该死的APIkey放入HTTP Authorization头和BAM中，狗屎就行了。</p><p> Because it’s so simple, you can get a lot of work and testing done faster.</p><p>因为它非常简单，所以您可以更快地完成大量工作和测试。</p><p>  Providers changing their implementations.  Just about every single OAuthprovider has changed their implementations numerous times, breaking thousandsof developer applications.</p><p>提供程序更改其实现。几乎每一个OAuthProvider都无数次改变了他们的实现，打破了成千上万的开发者应用程序。</p><p> Complex workflows for getting access to your data.  OAuth2 has 4 differentgrant types, each of which is used in a different way and for differentpurposes.</p><p>用于访问您的数据的复杂工作流。OAuth2有4种不同的授权类型，每种类型都有不同的用途和用途。</p><p> Every time I use a service like  Twilio, I’m reminded how convenient BasicAuth is to use: it’s truly a pleasure to be able to:</p><p>每次我使用Twilio这样的服务时，都会提醒我使用BasicAuth是多么方便：能够：</p><p> Easily test my API requests out via the command line or an API explorer like Runscope.</p><p>通过命令行或像Runscope这样的API资源管理器轻松测试我的API请求。</p><p>    Basic Auth gets a bad reputation for being  “insecure”, but this isn’tnecessarily true.</p><p>Basic Auth因为“不安全”而声名狼藉，但这并不一定是真的。</p><p> There are several things you can do to ensure that your API service ( secured byBasic Auth) is as secure as possible:</p><p>有几件事可以确保您的API服务(由Basic Auth保护)尽可能安全：</p><p> Always run all requests over HTTPs. If you’re not using SSL, than no matterwhat authentication protocol you use, you’ll never be secure. Unless you’reusing HTTPs, all of your credentials will be sent in plain-text over the wire: a horrible idea.</p><p>始终通过https运行所有请求。如果您不使用SSL，那么无论您使用哪种身份验证协议，您都永远不会是安全的。除非您重新使用https，否则您的所有凭据都将以纯文本形式通过网络发送：这是一个可怕的想法。</p><p> Give your developers the ability to generate as many API key pairs as they’dlike. This makes it easy for developers to  isolate their usage of an APIkey pair to a single application or service.</p><p>为您的开发人员提供生成任意数量的API密钥对的能力。这使得开发人员可以很容易地将他们对apiKey对的使用隔离到单个应用程序或服务。</p><p> Give your developers the ability to revoke API key access when they need to.For instance: if a developer accidentally leaks his API keys on Github, heshould be able to revoke that API key pair, thereby guaranteeing it can’t beused by anyone else.</p><p>允许您的开发人员在需要时撤销API密钥访问。例如：如果开发人员意外泄露了他在Github上的API密钥，他应该能够撤销该API密钥对，从而保证它不会被其他任何人使用。</p><p> Generate random API key pairs using  uuids. This ensures API key pairsaren’t  guessable.</p><p>使用uuid生成随机API密钥对。这确保了API密钥对不可猜测。</p><p> Furthermore, for developers  using Basic Auth, there are a few things youshould always keep in mind:</p><p>此外，对于使用基本身份验证的开发人员，您应该始终记住以下几点：</p><p> Store your API keys securely. If you’re using an API service that supportsBasic Auth, be sure to not do things like store your API keys in your publicGithub repo.</p><p>安全存储您的API密钥。如果您使用的是支持Basic Auth的API服务，请确保不要将API密钥存储在您的public Github repo中。</p><p> Don’t use an API service that isn’t run over HTTPs – you’re guaranteed tohave problems in the future.</p><p>不要使用不是在https上运行的API服务--将来肯定会有问题。</p><p> Use a unique API key pair for each application you write. This way, if youaccidentally lose an API key or leak it publicly, you only need to revoke that specific API key, and you only need to update  a single codebase thatrelied on that API key. This will make your life much easier in the longrun.</p><p>为您编写的每个应用程序使用唯一的API密钥对。这样，如果意外丢失API密钥或将其公开泄漏，您只需撤销特定的API密钥，并且只需更新依赖于该API密钥的单个代码库。从长远来看，这将使你的生活变得容易得多。</p><p> If you’re looking for a good example of an API company that handles API keys theright way, check out  AWS.</p><p>如果您正在寻找API公司正确处理API密钥的好例子，请查看AWS。</p><p>   Another great thing about Basic Auth is that there’s only one implementationeveryone uses – this means that there’s never any ambiguity about how to craftrequests or server-side components: it’s always the same.</p><p>Basic Auth的另一个伟大之处在于，每个人都只使用一种实现-这意味着对于如何制作请求或服务器端组件永远不会有任何模棱两可的地方：它总是相同的。</p><p>  You take the API Key ID and the API Key Secret, and you put them into acolon-separated string like so:  &#39;xxx:yyy&#39;.</p><p>获取API密钥ID和API密钥Secret，并将它们放入以冒号分隔的字符串中，如下所示：&#39；xxx：yyy&#39；。</p><p> You then prepend the word  &#39;Basic &#39; to the string, so that you have:  &#39;Basicxxx:yyy&#39;.</p><p>然后在字符串前面加上单词&#39；Basic&#39；，这样就有：&#39；Basicxxx：YYY&39；。</p><p> You then  base64 encode the API key portion of the string, so you end upwith:  &#39;Basic eHh4Onl5eQ==&#39;.</p><p>然后对字符串的API密钥部分进行Base64编码，因此以：&#39；basic eH4Onl5eQ==&#39；结束。</p><p> Lastly, you set this value as your HTTP Authorization header when you makeyour HTTP requests.</p><p>最后，在发出HTTP请求时将此值设置为HTTP Authorization标头。</p><p>  The left-hand portion is the API Key ID, the right hand portion is the API KeySecret.</p><p>左边是API密钥ID，右边是API KeySecret。</p><p> The server then validates these credentials, and either allows you access orreturns an  HTTP 401 UNAUTHORIZED response.</p><p>然后，服务器验证这些凭据，并允许您访问或返回HTTP 401未经授权的响应。</p><p> There’s nothing ambiguous about Basic Auth. This means every programminglanguage has top-notch support for the standard, and it’s easy to find wellaudited libraries for using Basic Auth as both a producer and consumer.</p><p>基本身份验证没有任何含糊之处。这意味着每种编程语言都有对该标准的顶级支持，而且很容易找到将Basic Auth用作生产者和消费者的广受好评的库。</p><p>   My hope is that while OAuth continues to rise in popularity, developers continueto support Basic Auth to the maximum possible extent.</p><p>我希望在OAuth继续流行的同时，开发人员会继续最大限度地支持Basic Auth。</p><p> Not only does this make my life as a developer easier, but it also makes it moreenjoyable.</p><p>这不仅让我作为一名开发人员的生活变得更轻松，而且也让我的生活更愉快。</p><p> For any API services out there that trust their developers, you really can’t gowrong by supporting Basic Auth.</p><p>对于任何信任其开发人员的API服务来说，您真的不能通过支持基本身份验证来实现。</p><p> And… Even for those services that  don’t trust their developers – namelyconsumer services like Google, Facebook, Fitbit, etc. – it’s still a good ideafor them to support Basic Auth. This, at the very least, empowers their usersto pragmatically access their  own data without jumping through the OAuthhoops.</p><p>和…。即使对于那些不信任开发者的服务--比如Google、Facebook、Fitbit等消费者服务--支持Basic Auth仍然是个好主意。这至少使他们的用户能够务实地访问他们自己的数据，而不需要跳过OAuthhoops。</p><p> NOTE:  I realize this is a somewhat controversial topic. I’ve ended upwriting numerous drafts of this article, only to throw them away as their scopehas grown too much. In the future, I plan to write many more articlesdiscussing the various pitfalls of both OAuth and Basic Auth, diving into morein-depth technical reasons for my opinions.</p><p>注：我意识到这是一个颇具争议性的话题。我最终改写了这篇文章的许多草稿，结果都是因为它们的范围扩大了太多而把它们扔掉了。在未来，我计划写更多的文章来讨论OAuth和Basic Auth的各种缺陷，深入探讨我的观点的更深层次的技术原因。</p><p>  PS: If you read this far, you might want to follow me on  twitter or  github and subscribe via  RSS or email below ( I&#39;ll email you new articles when I publish them).</p><p>附注：如果你读到这里，你可能想在Twitter或GitHub上关注我，并通过RSS或下面的电子邮件订阅(我会在我发布新文章时给你发电子邮件)。</p></div><div id="story_share_this"><div class="sharethis-inline-share-buttons"></div></div><div class="text-break sotry_link page_narrow"><a target="_blank" href="https://www.rdegges.com/2015/why-i-love-basic-auth/">https://www.rdegges.com/2015/why-i-love-basic-auth/</a></div><div class="story_tags page_narrow"><button type="button" class="btn btn-light my_tag"><a href="/tag/基本/">#基本</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/basic/">#basic</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/api/">#api</a></button></div></div><div class="my_movie_list_item shadow p-3 mb-5 bg-white rounded"><button type="button" class="btn btn-link my_tag"><a href="/tag/web2.0/">#web2.0</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/google/">#google</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/设计/">#设计</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/游戏/">#游戏</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/创意/">#创意</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/apple/">#apple</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/苹果/">#苹果</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/摄影/">#摄影</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/软件/">#软件</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/美国/">#美国</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/iphone/">#iphone</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/图片/">#图片</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/手机/">#手机</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/视频/">#视频</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/广告/">#广告</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/免费/">#免费</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/谷歌/">#谷歌</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/网站/">#网站</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/windows/">#windows</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/微软/">#微软</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/下载/">#下载</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/firefox/">#firefox</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/音乐/">#音乐</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/linux/">#linux</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/blog/">#blog</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/博客/">#博客</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/程序/">#程序</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/艺术/">#艺术</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/web/">#web</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/wordpress/">#wordpress</a></button></div></div></div><div id="my_footer"><div class=""><a href="/tags/">tags</a> <a href="/users/">users</a></div>&copy; 2020 diglog.com </div></div></body></html>