<!doctype html><html lang="zh-hans"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Rust的异步不是F＃王彩色 Rust's async isn't F# king colored</title><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"><link rel="stylesheet" href="/img/css.css?random="><link data-rh="true" rel="icon" href="/img/favicon.ico"/><script data-ad-client="ca-pub-6067137220025946" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script type="text/javascript" src="https://platform-api.sharethis.com/js/sharethis.js#property=5effb96910009800120b8d4d&product=inline-share-buttons" async="async"></script>
<script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?03c1a0f31299b4a2fbb83c34d6beaac9";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script></head><body><div id="my_header"><div class="container"><nav class="navbar navbar-expand-lg"><a class="navbar-brand" href="/"><img alt="diglog" src="/img/logo.v1.gif" class="rounded-sm"></a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarNavAltMarkup"><div class="navbar-nav"></div></div></nav></div></div><div class="container"><div id="my_content"><h1 class="page_narrow">Rust's async isn't F# king colored<br/>Rust的异步不是F＃王彩色 </h1><div class="row"><div class="col-lg-12 col-12"><div class="my_story_list_item shadow p-3 mb-5 bg-white rounded"><div class="story_page_pub_time page_narrow">2021-03-11 18:08:16</div><div class="page_narrow text-break page_content"><p>For some time now, I&#39;ve had a love-hate-relationship with the famous blog post  What Color is Your Function?.</p><p>现在有一段时间，我对着名的博文有一种爱恨 - 关系你的功能是什么颜色的？</p><p> One the one hand it&#39;s a great article that hits the nail on the head why using async/await in JS (and other languages) is very painful, and it provides us with the great allegory of &#34;colored functions&#34;.</p><p> 一方面是它＆＃39; SA伟大的文章击中了钉子的钉子为什么在js（和其他语言）中使用异步/等待是非常痛苦的，它为我们提供了＆＃34的伟大寓言;彩色函数＆＃ 34;</p><p> On the other hand, since the article has become widely known, people use the argument of colored functions to shit on every implementation of async/await,  whether it applies or not. In particular it seems to be a recurring talking point that comes up in discussions of Rust&#39;s async/await even though - you might have guessed it -  it doesn&#39;t apply!</p><p> 另一方面，由于文章已被广为人知，人们使用彩色函数的参数在所有异步/等待的实现中静音，无论是适用还是不适用。特别是它似乎是一个经常出现的谈话点，讨论了生锈＆＃39;即使是异步/等待的讨论 - 你可能已经猜到了 - 它＆＃39; t申请！</p><p> So let&#39;s review the argument in the original post and see where it breaks down for Rust:</p><p> 所以，让＆＃39; s在原始帖子中查看论点，并查看它在哪里损坏生锈：</p><p>    I guess that&#39;s also true. You will generally call a normal function like  foo(), and most of the time you will call an async function like  bar().await.</p><p>    我猜这也是真的。您通常会称为foo（）等正常函数，大部分时间都会调用aryync函数，如bar（）。等待。</p><p>   Colored functions are problematic because they turn everything you touch into the same color as well. Want to color a function in your colored programming language? Have fun turning every function that calls it (and that calls them, and so on) the same color!</p><p>   彩色函数是有问题的，因为它们也将所有触摸到同一个颜色的一切。想要在彩色编程语言中彩色函数？玩得开心转动调用它的每个功能（并且调用它们，等等）相同的颜色！</p><p> However  this is not a problem in Rust! In Rust, you can easily confine the coloring to exactly the part of the code you want to, and doing it is pretty straightforward:</p><p> 然而，这不是锈病的问题！在Rust中，您可以轻松限制着色到您想要的代码的一部分，并执行它非常简单： </p><p> Want to call an async function blockingly from a sync function? -&gt; Throw it on an executor!</p><p>想要从同步功能封锁中封锁的异步功能？ - ＆gt;把它扔在刽子手！</p><p> Want to call a sync function from an async function? -&gt; Either just call in normally, or if it would block your async function spawn it as a blocking task!  async-std variant,  tokio variant, and I&#39;m sure your async runtime of choice has something similar.</p><p> 想要从异步函数调用同步功能？ - ＆gt;只要正常拨打电话，或者它会阻止您的异步函数将其生成它作为阻塞任务！ Async-std变体，tokio变体和i＆＃39; m确定您的异步运行时选择有类似的东西。</p><p> Of course you shouldn&#39;t do both of those things all the time, or you will lose most of the benefits of using async in the first place! However sometimes you don&#39;t really have a choice, and this super cool crate you want to use is async or sync (obviously always the version you don&#39;t need right now), and you have to make it work.</p><p> 当然，你应该一直在＆＃39;这两件事都是所有的事情，或者你将失去第一个地方使用异步的好处！然而，有时候你真的有一个选择，你想要使用的这个超酷箱子是异步或同步（显然总是你现在不需要的版本），你必须制作它的工作。</p><p> async/await in Rust let&#39;s you decide how much/little of your code you want to color!</p><p> 逃亡中的异步/等待rust＆＃39;你决定你想要颜色的多少/小的代码！</p><p>  Kind of? In traditional Rust fashion, I wouldn&#39;t really call it painful, but more verbose. It&#39;s one of the typical downsides of being explicit and giving the developer full control. I personally don&#39;t mind it much, as that explicitness is one of my favourite things about Rust.</p><p>  有点儿？在传统的生锈时尚，我真的称之为痛苦，但更详细。它＆＃39;是明确的典型缺陷之一，并为开发人员提供全面控制。我个人不介意，因为这种明确性是我最喜欢的东西之一。</p><p>  As of the time of this writing, there is no async function in the standard library in Rust that would force you to color any part of your code. However, depending on the crate ecosystem you want to use, large parts of it might lean towards async (though usually for good reason).</p><p>  截至本写作的时间，RERR中的标准库中没有异步函数，将迫使您为代码的任何部分颜色。然而，根据您想要使用的箱体生态系统，它的大部分可能倾向于异步（虽然通常是充分原因）。</p><p>   If you want to complain about Rust, there are plenty of other things to choose from, even other parts of async/await, but async coloring is not one of them.</p><p>   如果您想抱怨Rust，还有很多其他的东西可以选择，即使是异步/等待的其他部分，但异步着色不是其中之一。 </p></div><div id="story_share_this"><div class="sharethis-inline-share-buttons"></div></div><div class="text-break sotry_link page_narrow"><a target="_blank" href="https://www.hobofan.com/blog/2021-03-10-rust-async-colored/">https://www.hobofan.com/blog/2021-03-10-rust-async-colored/</a></div><div class="story_tags page_narrow"><button type="button" class="btn btn-light my_tag"><a href="/tag/rust/">#rust</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/彩色/">#彩色</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/async/">#async</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/函数/">#函数</a></button></div></div><div class="my_movie_list_item shadow p-3 mb-5 bg-white rounded"><button type="button" class="btn btn-link my_tag"><a href="/tag/web2.0/">#web2.0</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/google/">#google</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/设计/">#设计</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/创意/">#创意</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/摄影/">#摄影</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/图片/">#图片</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/游戏/">#游戏</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/软件/">#软件</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/手机/">#手机</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/视频/">#视频</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/广告/">#广告</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/iphone/">#iphone</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/网站/">#网站</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/免费/">#免费</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/下载/">#下载</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/windows/">#windows</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/微软/">#微软</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/apple/">#apple</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/firefox/">#firefox</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/blog/">#blog</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/苹果/">#苹果</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/音乐/">#音乐</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/博客/">#博客</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/wordpress/">#wordpress</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/恶搞/">#恶搞</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/qq/">#qq</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/艺术/">#艺术</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/web/">#web</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/谷歌/">#谷歌</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/工具/">#工具</a></button></div></div></div><div id="my_footer"><div class=""><a href="/tags/">tags</a> <a href="/users/">users</a></div>&copy; 2020 diglog.com </div></div></body></html>