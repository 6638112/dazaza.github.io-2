<!doctype html><html lang="zh-hans"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>PG_TMP  - 在孤立的临时PostgreSQL数据库上运行测试 Pg_tmp – Run tests on an isolated, temporary PostgreSQL database</title><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"><link rel="stylesheet" href="/img/css.css?random="><link data-rh="true" rel="icon" href="/img/favicon.ico"/><script data-ad-client="ca-pub-6067137220025946" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script type="text/javascript" src="https://platform-api.sharethis.com/js/sharethis.js#property=5effb96910009800120b8d4d&product=inline-share-buttons" async="async"></script>
<script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?03c1a0f31299b4a2fbb83c34d6beaac9";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script></head><body><div id="my_header"><div class="container"><nav class="navbar navbar-expand-lg"><a class="navbar-brand" href="/"><img alt="diglog" src="/img/logo.v1.gif" class="rounded-sm"></a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarNavAltMarkup"><div class="navbar-nav"></div></div></nav></div></div><div class="container"><div id="my_content"><h1 class="page_narrow">Pg_tmp – Run tests on an isolated, temporary PostgreSQL database<br/>PG_TMP  - 在孤立的临时PostgreSQL数据库上运行测试 </h1><div class="row"><div class="col-lg-12 col-12"><div class="my_story_list_item shadow p-3 mb-5 bg-white rounded"><div class="story_page_pub_time page_narrow">2021-04-28 10:58:50</div><div class="page_narrow text-break page_content"><p>pg_tmpis a compact shell script designed to make unit testing, integration testing withPostgreSQL easy in any language.</p><p>PG_TMPIS一种紧凑的外壳脚本，旨在进行单元测试，在任何语言中轻松地进行集成测试。</p><p> Sometimes SQLite is used as drop-in replacement for PostgreSQL when running testsin order to make tests self-contained and therefore free of side-effects. Thistechnique seems to suffice for simple interactions, but it does so by reducing theset of features that an application can use to the functionality common to bothplatforms. PostgreSQL can be thought of as a specialized programming environment.</p><p> 有时，在运行Testsin时，SQLite被用作PostgreSQL的替代品，以使测试自包含，因此没有副作用。 Thistechnique似乎足以实现简单的互动，但它通过减少应用程序可以用对困难方式共同的功能的特征来实现。 PostgreSQL可以被认为是专业的编程环境。</p><p> The engineering genius of unit tests is mainly the ability they have to shape thedesign of the internal interfaces used to build an application. To ensure that weare testing the module and not the environment we mock APIs to external resources,but never the runtime or the language itself.</p><p> 单位测试的工程天才主要是它们必须塑造用于构建应用程序的内部接口的基因的能力。为了确保佩戴模块而不是我们将API模拟到外部资源的环境，而是从未运行时或语言本身。</p><p>            Starting with the 3.0 release, a new utilty ddl_compare(1)is included.This utiliity generates a representation of two schemas that is suitable for diff</p><p>            从3.0发布开始，包括一个新的unsty ddl_compare（1）。本利效生成两个适合差异的模式的表示</p><p> $ ddl_compare -g roles.sql test.sql prod.sql ----/home/eradman/localharvest/{a,b}/products | 18 ------------------/home/eradman/localharvest/{a,b}/farmer | 5 ++---2 files changed, 2 insertions(+), 21 deletions(-)</p><p> $ ddl_compare -g roles.sql test.sql prod.sql ---- / home / eradman / localharvest / {a，b} /产品| 18 ---------------- / Home / Eradman / LocalHarvest / {A，B} /农民| 5 ++ --- 2文件已更改，2个插入（+），21删除（ - ）</p><p>    If you want to spin up a database that is accessible to other hosts on a LAN youcan modify pg_hba.conf</p><p>    如果要旋转局域网上的其他主机可访问的数据库，请修改pg_hba.conf</p><p> $ url=$(pg_tmp -t) $ datadir=$(psql $url --no-psqlrc -At -c &#39;show data_directory&#39;) $ cat &lt;&amp;ltEOF &gt;&gt; $datadir/pg_hba.confhost all all 10.0.0.0/8 trustEOF $ pg_ctl -D $datadir reload $ echo $url | urlsed host=$(hostname -s)</p><p> $ url = $（pg_tmp -t）$ datadir = $（psql $ url --no-psqlrc-at -c＆＃39;显示data_directory＆＃39;）$ cat＆gt;＆gt;＆gt; $ datadir / pg_hba.confhost所有所有10.0.0.0/8 trusteof $ pg_ctl -d $ datadir重新加载$ ​​echo $ url | URLSED HOST = $（hostname -s） </p></div><div id="story_share_this"><div class="sharethis-inline-share-buttons"></div></div><div class="text-break sotry_link page_narrow"><a target="_blank" href="http://eradman.com/ephemeralpg/">http://eradman.com/ephemeralpg/</a></div><div class="story_tags page_narrow"><button type="button" class="btn btn-light my_tag"><a href="/tag/database/">#database</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/数据库/">#数据库</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/tmp/">#tmp</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/pg/">#pg</a></button></div></div><div class="my_movie_list_item shadow p-3 mb-5 bg-white rounded"><button type="button" class="btn btn-link my_tag"><a href="/tag/web2.0/">#web2.0</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/google/">#google</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/设计/">#设计</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/创意/">#创意</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/摄影/">#摄影</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/图片/">#图片</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/游戏/">#游戏</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/软件/">#软件</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/视频/">#视频</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/广告/">#广告</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/手机/">#手机</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/iphone/">#iphone</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/网站/">#网站</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/apple/">#apple</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/windows/">#windows</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/免费/">#免费</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/下载/">#下载</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/微软/">#微软</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/firefox/">#firefox</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/blog/">#blog</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/苹果/">#苹果</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/音乐/">#音乐</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/博客/">#博客</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/wordpress/">#wordpress</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/恶搞/">#恶搞</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/qq/">#qq</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/web/">#web</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/艺术/">#艺术</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/工具/">#工具</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/分享/">#分享</a></button></div></div></div><div id="my_footer"><div class=""><a href="/tags/">tags</a> <a href="/users/">users</a></div>&copy;2012-2021 diglog.com </div></div></body></html>