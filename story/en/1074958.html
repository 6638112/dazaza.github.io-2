<!doctype html><html lang="zh-hans"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>取代文件系统的时候到了The time has come to replace file systems</title><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"><link rel="stylesheet" href="/img/css.css?random="><link data-rh="true" rel="icon" href="/img/favicon.ico"/><script data-ad-client="ca-pub-6067137220025946" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script type="text/javascript" src="https://platform-api.sharethis.com/js/sharethis.js#property=5effb96910009800120b8d4d&product=inline-share-buttons" async="async"></script>
<script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?03c1a0f31299b4a2fbb83c34d6beaac9";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script></head><body><div id="my_header"><div class="container"><nav class="navbar navbar-expand-lg"><a class="navbar-brand" href="/"><img alt="diglog" src="/img/logo.v1.gif" class="rounded-sm"></a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarNavAltMarkup"><div class="navbar-nav"></div></div></nav></div></div><div class="container"><div id="my_content"><h1 class="page_narrow">The time has come to replace file systems<br/>取代文件系统的时候到了</h1><div class="row"><div class="col-lg-12 col-12"><div class="my_story_list_item shadow p-3 mb-5 bg-white rounded"><div class="story_page_pub_time page_narrow">2022-02-25 19:39:37</div><div class="page_narrow text-break page_content"><p>If you have ever forgotten where you stored a file in a file system, you know that finding it can be a real challenge. File systems let you store any file in any folder, regardless of whether the folder path is appropriate for the file. Even if you remember some parts of the file name, it can take a long time to search through a large folder tree looking for it. Sometimes the application that stored it when you hit the ‘save’ button, didn’t even bother to tell you where it put it.</p><p>如果您忘记了在文件系统中存储文件的位置，您知道找到它可能是一个真正的挑战。文件系统允许您将任何文件存储在任何文件夹中，而不管文件夹路径是否适合该文件。即使您记得文件名的某些部分，也可能需要很长时间才能在大型文件夹树中搜索它。有时，当你点击“保存”按钮时存储它的应用程序甚至懒得告诉你它放在哪里。</p><p> Documents, photos, and other common types of files often have several different formats (and the file extensions that accompany them) so searching by file extension may or may not turn up the file you were looking for. File systems are also designed to know only about the files in their managed volume, so even if you have multiple volumes of the same file system type (e.g. NTFS or Ext4) stored on the same physical hard disk drive; you must search each volume independently.</p><p>文档、照片和其他常见类型的文件通常有几种不同的格式（以及随附的文件扩展名），因此按文件扩展名搜索可能会或可能不会找到您要查找的文件。文件系统也被设计为只知道其管理卷中的文件，因此即使在同一物理硬盘驱动器上存储了多个相同文件系统类型的卷（例如NTFS或Ext4）；必须独立搜索每个卷。</p><p> The time it takes to find a file is often dependent upon how many other files are present in the system. Like finding a needle in a haystack, it really depends upon the size of the haystack when figuring out how long it might take to find the needle.</p><p>查找文件所需的时间通常取决于系统中还有多少其他文件。就像在干草堆中找到一根针一样，它实际上取决于干草堆的大小，当计算出找到针可能需要多长时间时。</p><p> File systems were invented decades ago when the largest physical drives were measured in megabytes and could only store a few hundred files on them. Today’s hard drives (HDDs) and solid state drives (SDDs) are measured in terabytes (millions of times bigger). HDD manufacturers have recently announced drives that will hold more than 20TB. If the average size of a file is 100,000 bytes; this means you can store about 200 million files before the drive is full. That is one big haystack!</p><p>文件系统是几十年前发明的，当时最大的物理驱动器以兆字节为单位，只能存储几百个文件。今天的硬盘驱动器（HDD）和固态驱动器（SDD）的测量单位是TB（大几百万倍）。硬盘制造商最近宣布，硬盘容量将超过20TB。如果文件的平均大小为100000字节；这意味着您可以在驱动器满之前存储大约2亿个文件。那是一个大草堆！</p><p> Even though numerous improvements have been made to file systems over the years; they are all still based on the same basic architecture from decades ago. They are not designed to classify files and quickly search for a single file or groups of files easily. Applications that help with searching are still required to do a hierarchical tree traversal using sequential search functions (e.g. findNext or readdir) which are slow by nature.</p><p>尽管多年来对文件系统进行了大量改进；它们仍然基于几十年前相同的基本架构。它们的设计目的不是对文件进行分类，并快速搜索单个文件或文件组。有助于搜索的应用程序仍然需要使用顺序搜索函数（例如findNext或readdir）进行分层树遍历，这些函数本质上比较慢。</p><p> Having a separate indexing service such as Microsoft’s Windows Search or Apple’s Spotlight, can greatly speed up searching; but these are not an integral part of the file system so they have to store their indexing information in a separate database. It is easy for the database to become out of synchronization with the file system. Also, to speed up the indexing process, users often only index a portion of the file system so using the index might not turn up the file(s) you were looking for.</p><p>拥有独立的索引服务，如微软的Windows搜索或苹果的Spotlight，可以大大加快搜索速度；但它们不是文件系统不可分割的一部分，因此它们必须将索引信息存储在单独的数据库中。数据库很容易与文件系统失去同步。此外，为了加快索引过程，用户通常只为文件系统的一部分编制索引，因此使用索引可能不会显示您要查找的文件。</p><p> Fast searching is just one of the problems that plague today’s file systems. As someone who has worked with file systems and databases since the 1980s, I have come up with a long laundry list of things a data storage system should do better. Many of the problems cannot be solved with just minor changes to the existing file system architecture. I believe that the time has come to completely replace file systems with something better!</p><p>快速搜索只是困扰当今文件系统的问题之一。作为一个自20世纪80年代以来一直从事文件系统和数据库工作的人，我提出了一长串数据存储系统应该做得更好的事情。许多问题都无法通过对现有文件系统体系结构的微小更改来解决。我相信是时候用更好的东西完全取代文件系统了！</p><p> Rather than list all the problems in this article, I will limit it to my ‘Top 5’ problems for brevity. I have designed and developed a new system called ‘Didgets’ that I think solves these problems and many others. Didgets (short for data widgets) are intelligent data objects that can efficiently manage large amounts of unstructured or structured data. Whether file systems are replaced by Didgets or some other similar system, the problems will persist until these issues are addressed:</p><p>为了简洁起见，我不会在本文中列出所有问题，而是将其限制在我的“前五大”问题上。我设计并开发了一个名为“Didgets”的新系统，我认为它解决了这些问题和许多其他问题。DIDGET（数据小部件的缩写）是智能数据对象，可以有效地管理大量非结构化或结构化数据。无论文件系统被Didget或其他类似系统取代，这些问题都将持续存在，直到这些问题得到解决：</p><p> The fixed-size metadata record for each file is too big. Reading in and caching the entire file table takes too long and uses too much memory.</p><p>每个文件的固定大小元数据记录太大。读取和缓存整个文件表需要的时间太长，占用的内存太多。</p><p> The metadata record does not have a file classification system. To determine what is in a file, the file name or the data stream must be examined.</p><p>元数据记录没有文件分类系统。要确定文件中的内容，必须检查文件名或数据流。</p><p> File systems do not have a uniform tagging system that is easily and quickly searchable by applications.</p><p>文件系统没有一个统一的标签系统，应用程序可以轻松快速地搜索该系统。</p><p> Each file’s unique identifier is its full path name. If the name changes or the file is moved to a different folder, any stored references to it become invalid.</p><p>每个文件的唯一标识符是其完整路径名。如果名称更改或文件被移动到其他文件夹，则存储的对该文件的任何引用都将无效。</p><p> Files cannot be protected against malicious code. Virus detection software must examine every single file to ensure the system is safe.</p><p>无法保护文件免受恶意代码的攻击。病毒检测软件必须检查每个文件，以确保系统安全。</p><p> Every file system has a file table that stores a record for each file. The size of this record in popular file systems can range from 256 bytes (Ext4) to 1024 bytes (NTFS). This means that if you have 200 million records in the table; then between 50GB and 200GB of data must be read in and cached if you want to do lots of fast searches. Disk transfer speeds have certainly increased and memory is cheaper than ever, but that is still a lot of data. With Didgets, each record is only 64 bytes which means a table with 200 million records is less than 13GB total, which is much more manageable.</p><p>每个文件系统都有一个文件表，用于存储每个文件的记录。在流行的文件系统中，此记录的大小可以从256字节（Ext4）到1024字节（NTFS）。这意味着，如果表中有2亿条记录；然后，如果你想进行大量快速搜索，就必须读入并缓存50GB到200GB的数据。磁盘传输速度肯定提高了，内存比以往任何时候都便宜，但这仍然是大量的数据。在Didgets中，每条记录只有64字节，这意味着一个有2亿条记录的表的总容量不到13GB，这更易于管理。</p><p> With Didgets, there is a small field in its metadata record that tells whether the file is a photo or a document or a video or some other type. Searches can be exceptionally fast. On my development machine, I can find all 20 million photos (out of 200 million files) in under 2 seconds. Fast searches like this are impossible if you have to compare file name extensions.</p><p>对于Didgets，它的元数据记录中有一个小字段，用于判断文件是照片、文档、视频还是其他类型。搜索速度可能非常快。在我的显影机上，我可以在2秒钟内找到所有2000万张照片（2亿个文件中）。如果必须比较文件扩展名，这样的快速搜索是不可能的。</p><p> File systems use folder names as a general way to organize data. Some file systems support things like extended attributes that let you attach tags to your files. None of them make finding files based off metadata tags quick and easy. Didgets let you attach up to 255 tags to any Didget and find all of them that share a common tag in seconds.</p><p>文件系统使用文件夹名称作为组织数据的一般方式。有些文件系统支持扩展属性等功能，可以将标签附加到文件中。它们都不能使基于元数据标记的文件查找变得简单快捷。Didget允许您将多达255个标记附加到任何Didget上，并在几秒钟内找到所有共享一个公共标记的标记。</p><p> The unique identifier for a Didget is a 64 bit number. It remains consistent throughout the life of that Didget. It doesn’t change when you assign it a different name (names are just another tag) or put it in a different list (e.g. folder). Any stored references to the Didget remain valid until it is deleted.</p><p>Didget的唯一标识符是64位数字。它在那个傻瓜的一生中始终保持一致。当您为其指定不同的名称（名称只是另一个标记）或将其放入不同的列表（例如文件夹）时，它不会改变。任何存储的对Didget的引用在被删除之前保持有效。</p><p> Unlike a file, a Didget’s data stream can be permanently immutable. The file system read-only attribute is just a suggestion to any application, which can ignore it. For Didgets, the immutable attribute is enforced by the system with no way around it. No application can modify the contents of a read-only Didget no matter what user permissions it might have.</p><p>与文件不同，Didget的数据流可以是永久不变的。文件系统只读属性只是对任何应用程序的建议，它们可以忽略它。对于didget，不可变属性由系统强制执行，无法绕过。任何应用程序都不能修改只读Didget的内容，无论它可能拥有何种用户权限。</p><p> If HDD and SDD capacities continue on their current trajectory, storage systems may exceed 100TB for the average user within the next decade. Files will be kept forever and finding a single file or a group of them will become harder and more time consuming if file systems are not replaced with something better.</p><p>如果HDD和SDD的容量继续保持在当前的轨道上，在未来十年内，存储系统的平均用户容量可能会超过100TB。文件将被永久保存，如果文件系统不被更好的东西取代，查找单个或一组文件将变得更加困难和耗时。</p></div><div id="story_share_this"><div class="sharethis-inline-share-buttons"></div></div><div class="story_tags page_narrow"><button type="button" class="btn btn-light my_tag"><a href="/tag/取代/">#取代</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/replace/">#replace</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/文件/">#文件</a></button></div></div><div class="my_movie_list_item shadow p-3 mb-5 bg-white rounded"><button type="button" class="btn btn-link my_tag"><a href="/tag/web2.0/">#web2.0</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/google/">#google</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/设计/">#设计</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/创意/">#创意</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/摄影/">#摄影</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/图片/">#图片</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/游戏/">#游戏</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/软件/">#软件</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/广告/">#广告</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/视频/">#视频</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/手机/">#手机</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/iphone/">#iphone</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/网站/">#网站</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/免费/">#免费</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/windows/">#windows</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/下载/">#下载</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/微软/">#微软</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/苹果/">#苹果</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/firefox/">#firefox</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/blog/">#blog</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/音乐/">#音乐</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/博客/">#博客</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/apple/">#apple</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/wordpress/">#wordpress</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/恶搞/">#恶搞</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/qq/">#qq</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/艺术/">#艺术</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/谷歌/">#谷歌</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/工具/">#工具</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/web/">#web</a></button></div></div></div><div id="my_footer"><div class=""><a href="/tags/">tags</a> <a href="/users/">users</a></div>&copy;2012-2021 diglog.com </div></div></body></html>