[{"category": "", "categoryclass": "", "imagename": "", "infoid": 1067237, "ip": "", "isanchordig": 1, "ischecked": 1, "isdelete": 0, "isneo": 1, "mark": "", "name": "", "note": "\u8fd9\u662f\u6211\u53d1\u9001\u7684\u7535\u5b50\u90ae\u4ef6\u7684\u7f16\u8f91\u526f\u672c\uff0c\u4e3aAPT-key\u7684\u7528\u6237\u63d0\u4f9b\u6307\u5bfc\uff0c\u5373\u5982\u4f55\u5904\u7406\u5e16\u5b50\u5173\u952e\u4e16\u754c\u4e2d\u7684\u4e8b\u7269\u3002  \u624b\u52a8\u9875\u9762\u5df2\u7ecf\u63d0\u4f9b\u4e86\u66f4\u6362APT-key\u6dfb\u52a0\u4f7f\u7528\u6240\u9700\u7684\u6240\u6709\u4fe1\u606f\uff1a  \u6ce8\u610f\uff1a\u800c\u4e0d\u662f\u4f7f\u7528\u6b64\u547d\u4ee4\uff0c\u952e\u63a7\u5e94\u76f4\u63a5\u653e\u5728\u5e26\u6709\u63cf\u8ff0\u6027\u540d\u79f0\u7684/etc/pt/trusted.gpg.d/\u76ee\u5f55\u4e2d\uff0c\u5e76\u5c06\u201cgpg\u201d\u6216\u201casc\u201d\u4f5c\u4e3a\u6587\u4ef6\u6269\u5c55\u540d  \u56e0\u6b64\uff0c\u6709\u70b9\u4ee4\u4eba\u60ca\u8bb6\u7684\u4eba\u9700\u8981\u4e00\u6b65\u4e00\u6b65\u4e00\u6b65\u5730\u5c06\u6587\u4ef6\u590d\u5236/\u4e0b\u8f7d\u5230\u76ee\u5f55\u4e2d\u3002  \u6211\u8fd8\u5c06\u8ba8\u8bba\u66ff\u4ee3\u5b89\u5168\u7684\u8717\u725b\u65b9\u6cd5\uff0c\u7b26\u5408\u8fd9\u53d8\u5f97\u6d41\u884c\u3002 \u4e5f\u8bb8\u6211\u4eec\u4e0d\u5e94\u8be5\u6dfb\u52a0\u7b7e\u540d\uff0c\u4eba\u4eec\u4f3c\u4e4e\u5fd8\u8bb0\u4e86DEBS\u4ecd\u7136\u4ee5root\u8eab\u4efd\u8fd0\u884c\u7ef4\u62a4\u8005\u811a\u672c\u3002  \u9664\u6b64\u4e4b\u5916\uff0cDebian\u7528\u6237\u5e94\u8be5\u67e5\u627eExtropo\uff0c\u4e3a\u60a8\u7ba1\u7406\u7b56\u5212\u7684\u5916\u90e8\u5b58\u50a8\u5e93\u3002  \u8f83\u65e7\u7684\uff08\u548c\u6240\u6709\uff09\u7248\u672c\u53ea\u652f\u6301\u6269\u5c55\u540d\u4e3a.gpg\u7684unwormored\u6587\u4ef6\u3002 \u5982\u679c\u60a8\u5173\u5fc3\u5b83\u4eec\uff0c\u8bf7\u63d0\u4f9b\u4e00\u4e2a\uff0c\u5e76\u4f7f\u7528 \n\u6709\u4e9b\u4eba\u4f1a\u544a\u8bc9\u4f60\u4e0b\u8f7d.asc\u548c\u7ba1\u9053\u5b83\u5230gpg --dearmor\uff0c\u4f46\u662fGPG\u53ef\u80fd\u65e0\u6cd5\u5b89\u88c5\uff0c\u6240\u4ee5\u771f\u7684\uff0c\u53ea\u9700\u63d0\u4f9b\u4e00\u4e2a.gpg\u4e00\u4e2a\uff0c\u800c\u662f\u652f\u6301\u6240\u6709\u7cfb\u7edf\u7684\u652f\u6301\u3002\n      \u4eba\u4eec\u8bf4\uff0c\u4e0d\u4f7f\u7528trusted.gpg.d\u5e76\u5728\u5176\u4ed6\u5730\u65b9\u5b89\u88c5\u6587\u4ef6\uff0c\u7136\u540e\u4ece\u6e90\u4ee3\u7801\u3002\u4f7f\u7528\u7b26\u53f7=\uff06lt;\u6587\u4ef6\uff06gt;\u6587\u4ef6\uff06gt;\u6587\u4ef6\uff06gt;\u6240\u4ee5\u8fd9\u770b\u8d77\u6765\u5f88\u5b89\u5168\uff0c\u56e0\u4e3a\u73b0\u5728\u4f60\u7684\u5bc6\u94a5\u65e0\u6cd5\u7b7e\u7f72\u5176\u4ed6\u4e0d\u76f8\u5173\u7684\u5b58\u50a8\u5e93\u3002\u5fd7\u613f\u8005\uff0c\u5b89\u5168\u6027\u589e\u52a0\u662f\u6700\u5c0f\u7684\uff0c\u56e0\u4e3a\u5305\u7ef4\u62a4\u8005\u811a\u672c\u65e0\u8bba\u5982\u4f55\u90fd\u53ef\u4ee5\u4f5c\u4e3aroot\u3002\u4f46\u6211\u60f3\u8fd9\u66f4\u597d\u7684\u5ba3\u4f20:)\n \u4f5c\u4e3a\u4e00\u4e2a\u4f8b\u5b50\uff0c\u4ee5\u4e0b\u662f\u4ece\u4fe1\u53f7.org\u5b89\u88c5\u4fe1\u53f7\u684c\u9762\u7684\u8bf4\u660e\u3002\u5982\u4e0a\u6240\u8ff0\uff0cGPG --dearmor\u5728\u6ca1\u6709\u4e00\u4e2a\u597d\u4e3b\u610f\uff0c\u6211\u4e2a\u4eba\u4e0d\u4f1a\u544a\u8bc9\u4eba\u4eec\u4fee\u6539/ usr\uff0c\u56e0\u4e3a\u5b83\u5e94\u8be5\u7531\u5305\u7ba1\u7406\u5668\u7ba1\u7406\uff0c\u4f46\u6211\u4eec\u6ca1\u6709/ etc / apt / keyrings\u76ee\u524d\u6216\u7c7b\u4f3c\u7684;\u5982\u679c\u5305\u88c5\u5b89\u88c5\u952e\u63a7\uff0c\u5219\u5f88\u597d\u3002\u60a8\u4e5f\u53ef\u4ee5\u53ea\u6dfb\u52a0\u90a3\u91cc\u7684\u6587\u4ef6\u4f5c\u4e3a\u8d77\u70b9\uff0c\u7136\u540e\u5b89\u88c5keyring\u5305\u8986\u76d6\u5b83\uff08\u5047\u88c5\u4e0b\u9762\u6709\u4e00\u4e2a\u4fe1\u53f7\u684c\u9762\u952e\u63a7\u5305\uff0c\u5b83\u4f1a\u8986\u76d6\u6211\u4eec\u6dfb\u52a0\u7684.gpg\uff09\u3002\n \uff03\u6ce8\u610f\uff1a\u8fd9\u4e9b\u8bf4\u660e\u4ec5\u9002\u7528\u4e8e64\u4f4dDebian\u7684\uff03Linux\u53d1\u884c\u7248\uff0c\u4f8b\u5982Ubuntu\uff0cMint\u7b49\u3002\uff031.\u5b89\u88c5\u6211\u4eec\u7684\u5b98\u65b9\u516c\u5171\u8f6f\u4ef6\u7b7e\u540dkeywget -o-https://updates.signal.org/desktop/apt/ keys.asc | gpg --dearmor\uff06gt; signal-desktop-keyring.gpgcat\u4fe1\u53f7 - \u684c\u9762-keyring.gpg | sudo tee -a /usr/share/keyrings/signal-desktop-keyring.gpg\uff06gt; / dev / null\uff032.\u5c06\u6211\u4eec\u7684\u5b58\u50a8\u5e93\u6dfb\u52a0\u5230RepositieseCho\uff06\uff0339; deb [arch = amd64\u7b7e\u540d= / usr / share / keyrings / signt-desktop-keyring.gpg] https\uff1a//updates.signal .org /\u684c\u9762/ apt Xenial Main\uff06\uff0339; | \\ sudo tee-a /etc/apt/sources.list.d/signal-xenial.list# 3.\u66f4\u65b0\u60a8\u7684\u5305\u6570\u636e\u5e93\u5e76\u5b89\u88c5Scnersudo APT\u66f4\u65b0\uff06amp;\uff06amp; sudo apt\u5b89\u88c5\u4fe1\u53f7\u684c\u9762\n \u6211\u60f3\u77e5\u9053\u4e3a\u4ec0\u4e48\u4ed6\u4eec\u505awget | gpg --dearmor\uff0c\u7ba1\u9053\u8fdb\u5165\u6587\u4ef6\u7136\u540e\u732b| sudo t\u6064\u5b83\uff0c\u800c\u4e0d\u662f\u5728\u4e00\u4e2a\u7ba1\u9053\u4e2d\u62e5\u6709\u8fd9\u4e00\u5207\u3002\u4e5f\u8bb8\u4ed6\u4eec\u60f3\u8981\u66f4\u597d\u7684\u8fdb\u5ea6\u62a5\u544a\u3002\n   \u5bf9\u4e8e\u7cfb\u7edf\u56fe\u50cf\u6784\u5efa\uff0c\u5728/etc/apt/trusted.gpg.d\u4e2d\u8fd0\u9001\u5bc6\u94a5\u4f3c\u4e4e\u662f\u5408\u7406\u7684;\u4f60\u662f\u4f9b\u5e94\u5546\u7684\u7c7b\u578b\uff0c\u6240\u4ee5\u5b83\u53ef\u4ee5\u5168\u5c40\u4fe1\u4efb\u3002\n Chrome\u98ce\u683c\u7684DEBS\u548cRepository Config DEBS\uff1a\u5982\u679c\u60a8\u53d1\u51faDEB\uff0c\u5219\u5d4c\u5165Sources.List.d Scippet\uff08\u8c03\u7528\u5b83$ MyRepo.List\uff09\u5e76\u8fd0\u9001$ MyRepo.gpg IN / USR / Share / Keyrings\u662f\u6700\u597d\u7684\u65b9\u6cd5\u3002\u65e0\u8bba\u60a8\u662f\u5728\u4ea7\u54c1\u4e2d\u53d1\u8d27\uff0c\u8fd8\u662f\u63d0\u4f9b\u5b58\u50a8\u5e93\u914d\u7f6eDEB\uff08\u8ba9\u6211\u4eec\u8c03\u7528\u5b83myRepo-repo.deb\uff09\uff0c\u7136\u540e\u544a\u8bc9\u4eba\u4eec\u8fd0\u884cAPT\u66f4\u65b0\uff0c\u540e\u8ddfAPT\u5b89\u88c5\uff06lt; repo\uff06gt\u5185\u90e8\u5305\u88c5\u3002\u6211\u731c\uff0c\u53d6\u51b3\u4e8e\u4ed3\u5e93\u4e2d\u7684\u5305\u6570\u91cf\u3002 \n\u624b\u52a8\u8bf4\u660e\uff08\u4fe1\u53f7\u6837\u5f0f\uff09\uff1a\u7b2c\u4e09\u79cd\u60c5\u51b5\uff0c\u60a8\u544a\u8bc9\u522b\u4eba\u81ea\u5df1\u8fd0\u884cWget\uff0c\u6211\u53d1\u73b0\u68d8\u624b\u3002\u6211\u4eec\u5728\u4fe1\u53f7\u4e2d\u770b\u5230\uff0c\u53ea\u662f\u5c06\u94a5\u5319\u5708\u6587\u4ef6\u586b\u5145\u5230/ usr / share / keyrings\u662f\u6d41\u884c\u7684\uff0c\u5c3d\u7ba1/ usr\u5e94\u8be5\u662f\u7531\u5305\u7ba1\u7406\u5668\u7ba1\u7406\u3002\u6211\u4eec\u6ca1\u6709\u5185\u90e8/ etc / etc\uff08\u6216/ usr / local\uff09\u7684\u53e6\u4e00\u4e2a\u7a0b\u5e8f\uff0c\u56e0\u6b64\u5f88\u96be\u5efa\u8bae\u5176\u4ed6\u4e1c\u897f\u3002\u5b9e\u9645\u4e0a\u6ca1\u6709\u7b7e\u540d\u7684\u989d\u5916\u5de5\u4f5c\u6ca1\u6709\u663e\u7740\u7684\u597d\u5904\uff0c\u6240\u4ee5\u8fd9\u662f\u989d\u5916\u7684\u5de5\u4f5c\u4e0d\u8fc7\uff0c\u6536\u83b7\u5f88\u5c11\u3002\n  \u8fd9\u90e8\u5206\u662f\u65b0\u7684\uff0c\u53ea\u662f\u4e3a\u4e86\u8fd9\u4e2a\u535a\u5ba2\u5e16\u5b50\u3002\u8ba9\u6211\u4eec\u6765\u770b\u770b\u5373\u5c06\u5230\u6765\u7684\u53d8\u5316\u4ee5\u53ca\u5b83\u4eec\u5982\u4f55\u8ba9\u4e8b\u60c5\u53d8\u5f97\u66f4\u52a0\u5bb9\u6613\u3002\n  \u5047\u8bbe\u6211\u5f97\u5230\u4e86\u5408\u5e76\u7684\u5408\u5e76\u8bf7\u6c42\uff0cAPT\u7684\u4e0b\u4e00\u4e2a\u7248\u672c\uff082.4 / 2.3.something\uff09\u5c06\u6d88\u9664\u6240\u6709\u590d\u6742\u6027\uff0c\u5e76\u5141\u8bb8\u60a8\u5c06\u5bc6\u94a5\u76f4\u63a5\u5d4c\u5165DEB822 .Sources\u6587\u4ef6\uff08\u73b0\u5728\u5df2\u5728\u67d0\u4e2a\u65f6\u95f4\u53ef\u7528\uff09\uff1a\n \u7c7b\u578b\uff1adeburis\uff1ahttps\uff1a//myrepo.example/ https\uff1a//myotherrepo.example/suites\uff1astable not-so-stablecomponents\uff1amainsigned-by\uff1a--------------------------------------------------------------------------------------------------------------------------------------------------------------\u5f00\u59cbPGP\u516c\u94a5\u5757-----\u3002 mDMEYCQjIxYJKwYBBAHaRw8BAQdAD / P5Nvvnvk66SxBBHDbhRml9ORg1WV5CvzKY CuMfoIS0BmFiY2RlZoiQBBMWCgA4FiEErCIG1VhKWMWo2yfAREZd5NfO31cFAmAk IyMCGyMFCwkIBwMFFQoJCAsFFgIDAQACHgECF4AACgkQREZd5NfO31fbOwD6ArzS dM0Dkd5h2Ujy1b6KcAaVW9FOa5UNfJ9FFBtjLQEBAJ7UyWD3dZzhvlaAwunsk7DG 3bHcln8DMpIJVXht78sL = IE0r ----- END PGP PUBLIC KEY BLOCK -----\n \u7136\u540e\uff0c\u60a8\u53ea\u80fd\u4e3a\u7528\u6237\u63d0\u4f9b.osources\u6587\u4ef6\uff0c\u4ed6\u4eec\u5c06\u5176\u653e\u5165\u201csources.list.d\u201d\uff0c\u5e76\u4e14\u4e00\u5207\u90fd\u795e\u5947\u5730\u5de5\u4f5c\n  \u55ef\uff0cPython-APT\u7684\u5b89\u5168\u6e90\u5305\u4ecd\u7136\u4e0d\u652f\u6301Deb822\u6765\u6e90\uff0c\u65e0\u8bba\u5982\u4f55\uff0c\u6211\u4eec\u90fd\u9700\u8981\u4e00\u4e2aaptsources2\uff0c\u4ee5\u4fbf\u4e3a\u5012\u9000 - \u517c\u5bb9\u6027\u539f\u56e0\uff0c\u7136\u540e\u7aef\u53e3\u8f6f\u4ef6\u5c5e\u6027\u548c\u5176\u4ed6\u7528\u6237\u3002\n  \u6211\u4eec\u5728\u4f7f\u7528ED25519Keys\u7b7e\u7f72\u91ca\u653e\u6587\u4ef6\u7684\u4f5c\u54c1\u4e2d\uff0c\u6211\u4eec\u786e\u5b9e\u53ef\u4ee5\u66f4\u597d\u5730\u66f4\u6362GPG\u3002\u5b83\u6682\u65f6\u547d\u540d\u4e3aaptsign\uff0c\u4f46\u5b83\u662f\u4e00\u4e2a\u5355\u7ae0deb822\u6587\u4ef6\u7684\u6982\u62ec\u6027\u7a0b\u5e8f\uff0c\u7c7b\u4f3c\u4e8e\u8868\u793a/ miniSign\u3002 \n\u6211\u4eec\u8ba4\u4e3a\uff0c\u8fd9\u89e3\u51b3\u4e86\u6211\u4eecOpenPGP\u96c6\u6210\u7684\u5b89\u5168\u6027\u5669\u68a6\uff0c\u540c\u65f6\u964d\u4f4e\u4e86\u590d\u6742\u6027\u3002 \u952e\u77ed\u5f97\u591a\uff0c\u6240\u4ee5\u4e0a\u9762\u7684\u9057\u5de5\u6587\u4ef6\u770b\u8d77\u6765\u5f88\u597d\u3002 ", "note_en": "This is an edited copy of an email I sent to provide guidance to users of apt-key as to how to handle things in a post apt-key world.\n The manual page already provides all you need to know for replacing  apt-key add usage:\n Note: Instead of using this command a keyring should be placed directly in the /etc/apt/trusted.gpg.d/ directory with a descriptive name and either \u201cgpg\u201d or \u201casc\u201d as file extension\n So it\u2019s kind of surprising people need step by step instructions for how to copy/download a file into a directory.\n I\u2019ll also discuss the alternative security snakeoil approach with signed-by that\u2019s become popular. Maybe we should not have added  signed-by, people seem to forget that debs still run maintainer scripts as root.\n Aside from this email, Debian users should look into  extrepo, which manages curated external repositories for you.\n        Older (and all) releases only support unarmored files with an extension .gpg. If you care about them, provide one, and use\n  Some people will tell you to download the  .asc and pipe it to  gpg --dearmor, but  gpg might not be installed, so really, just offer a  .gpg one instead that is supported on all systems.\n      People say it\u2019s good practice to  not use  trusted.gpg.d and install the file elsewhere and then refer to it from the  sources.list entryby using  signed-by=&lt;path to the file&gt;. So this looks a lot safer, because now your key can\u2019t sign other unrelated repositories. Inpractice, security increase is minimal, since package maintainer scripts run as root anyway. But I guess it\u2019s better for publicity :)\n As an example, here are the instructions to install  signal-desktop from signal.org. As mentioned,  gpg --dearmor use in there is not a good idea, and I\u2019d personally not tell people to modify  /usr as it\u2019s supposed to be managed by the package manager, but we don\u2019t have an  /etc/apt/keyrings or similar at the moment; it\u2019s fine though if the keyring is installed by the package. You can also just add the file there as a starting point, and then installa keyring package overriding it (pretend there is a signal-desktop-keyring package below that would override the .gpg we added).\n # NOTE: These instructions only work for 64 bit Debian-based# Linux distributions such as Ubuntu, Mint etc.# 1. Install our official public software signing keywget -O- https://updates.signal.org/desktop/apt/keys.asc | gpg --dearmor &gt; signal-desktop-keyring.gpgcat signal-desktop-keyring.gpg | sudo tee -a /usr/share/keyrings/signal-desktop-keyring.gpg &gt; /dev/null# 2. Add our repository to your list of repositoriesecho &#39;deb [arch=amd64 signed-by=/usr/share/keyrings/signal-desktop-keyring.gpg] https://updates.signal.org/desktop/apt xenial main&#39; |\\ sudo tee -a /etc/apt/sources.list.d/signal-xenial.list# 3. Update your package database and install signalsudo apt update &amp;&amp; sudo apt install signal-desktop\n I do wonder why they do  wget | gpg --dearmor, pipe that into the file and then  cat | sudo tee it, instead of having that all in one pipeline. Maybe they want nicer progress reporting.\n   For system image building, shipping the key in  /etc/apt/trusted.gpg.d seems reasonable to me; you are the vendor sort of, so it can be globally trusted.\n Chrome-style debs and repository config debs: If you ship a deb, embedding the  sources.list.d snippet (calling it  $myrepo.list) and shipping a  $myrepo.gpg in  /usr/share/keyrings is the best approach. Whether you ship that in product debs aka  vscode/ chromium or provide a repository configuration deb (let\u2019s call it  myrepo-repo.deb) and then tell people to run  apt update followed by  apt install &lt;package inside the repo&gt; depends on how many packages are in the repo, I guess.\n Manual instructions (signal style): The third case, where you tell people to run  wget themselves, I find tricky.As we see in signal, just stuffing keyring files into  /usr/share/keyrings is popular, despite  /usr supposed to be managed by the package manager.We don\u2019t have another dir inside  /etc (or  /usr/local), so it\u2019s hard to suggest something else.There\u2019s no significant benefit from actually using  signed-by, so it\u2019s kind of extra work for little gain, though.\n  This part is new, just for this blog post. Let\u2019s look at upcoming changes and how they make things easier.\n  Assuming I get my  merge request merged, the next version of APT (2.4/2.3.something) will do away with all the complexity and allow you to embed the key directly into a deb822  .sources file (which have been available for some time now):\n Types: debURIs: https://myrepo.example/ https://myotherrepo.example/Suites: stable not-so-stableComponents: mainSigned-By: -----BEGIN PGP PUBLIC KEY BLOCK----- . mDMEYCQjIxYJKwYBBAHaRw8BAQdAD/P5Nvvnvk66SxBBHDbhRml9ORg1WV5CvzKY CuMfoIS0BmFiY2RlZoiQBBMWCgA4FiEErCIG1VhKWMWo2yfAREZd5NfO31cFAmAk IyMCGyMFCwkIBwMFFQoJCAsFFgIDAQACHgECF4AACgkQREZd5NfO31fbOwD6ArzS dM0Dkd5h2Ujy1b6KcAaVW9FOa5UNfJ9FFBtjLQEBAJ7UyWD3dZzhvlaAwunsk7DG 3bHcln8DMpIJVXht78sL =IE0r -----END PGP PUBLIC KEY BLOCK-----\n Then you can just provide a  .sources files to users,they place it into `sources.list.d,and everything magically works\n  Well, python-apt\u2019s  aptsources package still does not support deb822 sources, andnever will, we\u2019ll need an  aptsources2 for that for backwards-compatibility reasons,and then port  software-properties and other users to it.\n  We do have a better, tighter replacement for gpg in the works which uses Ed25519keys to sign Release files. It\u2019s temporarily named  aptsign, but it\u2019s a genericsigner for single-section deb822 files, similar to  signify/ minisign.\n  We believe that this solves the security nightmare that our OpenPGP integrationis while reducing complexity at the same time. Keys are much shorter, so thebundled sources file above will look much nicer.", "posttime": "2021-06-22 01:33:12", "source_domain": "news.ycombinator.com", "source_name": "Hacker News", "tags": "apt,\u6587\u4ef6", "title": "\u8fdc\u79bbAPT\u952e ", "title_en": "Migrating Away from Apt-Key", "transed": 1, "url": "https://blog.jak-linux.org/2021/06/20/migrating-away-apt-key/", "via": "", "real_tags": ["apt", "\u6587\u4ef6"]}, {"category": "", "categoryclass": "", "imagename": "5664594158b1328409ab99e08e869503.png", "infoid": 1067236, "ip": "", "isanchordig": 1, "ischecked": 1, "isdelete": 0, "isneo": 1, "mark": "", "name": "", "note": "\u4f18\u6b65\u57282019\u5e74\u5ba3\u5e03\u8ba1\u5212\u5728\u89d2\u89d2\u843d\u4e2d\u5360\u6709\u591a\u6570\u6240\u6709\u6743\u3002\u8be5\u4ea4\u6613\u672a\u5b8c\u6210\uff0c\u76f4\u5230\u58a8\u897f\u54e5\u9664\u5916\u7684\u7b2c\u4e09\u5b63\u5ea6\uff0c\u8be5\u58a8\u897f\u54e5\u4e8e2021\u5e741\u6708\u7ed3\u675f\u3002\u8fd9\u9879\u6700\u65b0\u534f\u8bae\uff0c\u8be5\u534f\u8bae\u5df2\u4e8e6\u670818\u65e5\u8fbe\u6210\u5e76\u62a5\u544a\u5468\u4e00\uff0c\u5c06\u6210\u4e3a\u4f18\u6b65\u62e5\u6709\u5168\u8d44\u9644\u5c5e\u516c\u53f8\u7684\u89d2\u843d\u3002\n \u8fd9\u7b14\u4ea4\u6613\u8868\u660e\uff0c\u4f18\u6b65\u5bf9\u4ea4\u4ed8\u7684\u770b\u6da8\u5c1a\u672a\u8fdb\u884c\u8fc7\u5ea6\u3002\u4e0e\u89d2\u89d2\u843d\u4f5c\u4e3a\u5168\u8d44\u5b50\u516c\u53f8\uff0c\u4f18\u6b65\u53ef\u4ee5\u5907\u6ce8\u5176\u6742\u8d27\u4ea4\u4ed8\u65b9\u6848\uff0c\u8fd9\u9879\u670d\u52a1\u5728\u5927\u6d41\u884c\u671f\u95f4\u6d41\u884c\u3002\u4f18\u6b65\u5f00\u59cb\u63d0\u4f9b\u6742\u8d27\u5e97\uff0c\u5728\u53bb\u5e74\u590f\u5929\u5728\u52a0\u62ff\u5927\u6a2a\u8de8\u62c9\u4e01\u7f8e\u6d32\uff0c\u52a0\u62ff\u5927\u548c\u7f8e\u56fd\u7684\u6742\u8d27\u5e97\u63d0\u4f9b\u9500\u552e\u540e\u7684\u6298\u6263\u4ef7\u503c26.5\u4ebf\u7f8e\u5143\u7684\u4ea4\u6613\u540e\u3002\u4f18\u6b65\u9762\u4e34\u7740\u4ece\u6742\u8d27\u5e97\u96f6\u552e\u5546\u81ea\u5df1\u7684\u50f5\u786c\u7ade\u4e89\uff0c\u5176\u4e2d\u8bb8\u591a\u4eba\u901a\u8fc7\u4e0eDoordash\u6216Chould Fleet\u8fd9\u6837\u7684\u521d\u521b\u516c\u53f8\u5408\u4f5c\u63d0\u4f9b\u4ea4\u4ed8\u3002\n  Cornershop\uff0c\u603b\u90e8\u4f4d\u4e8e\u667a\u5229\uff0c\u4e8e2015\u5e74\u7531Oskar Hjertonsson\uff0cDaniel Undurraga\u548cJuan Pablo Cuevas\u6210\u7acb\u3002\u8be5\u516c\u53f8\u5c06\u5176\u8fd0\u8425\u6269\u5c55\u5230\u516b\u4e2a\u56fd\u5bb6\uff0c\u4e0a\u4e0b\u7f8e\u6d32\uff0c\u5305\u62ec\u667a\u5229\uff0c\u58a8\u897f\u54e5\uff0c\u5df4\u897f\uff0c\u54e5\u4f26\u6bd4\u4e9a\uff0c\u54e5\u65af\u8fbe\u9ece\u52a0\uff0c\u79d8\u9c81\uff0c\u7f8e\u56fd\u548c\u52a0\u62ff\u5927\u3002\u8be5\u516c\u53f8\u4ece\u6295\u8d44\u8005\u63d0\u4f9b\u4e863170\u4e07\u7f8e\u5143\u7684\u8d44\u91d1\uff0c\u5305\u62ecAccel\u548cJackson Square Ventures\u3002\n \u4f18\u6b65\u4e0d\u662f\u552f\u4e00\u7684\u6742\u8d27\u670d\u52a1\uff0c\u773c\u775b\u5728\u89d2\u89d2\u843d;\u8be5\u542f\u52a8\u5e94\u8be5\u7531\u6c83\u5c14\u739b\u83b7\u5f972.25\u4ebf\u7f8e\u5143\u7684\u534f\u8bae\uff0c\u4f46\u6700\u7ec8\u901a\u8fc7\u58a8\u897f\u54e5\u53cd\u5784\u65ad\u76d1\u7ba1\u673a\u6784\u963b\u6b62\u4e86\u5411\u524d\u53d1\u5c55\u7684\u4ea4\u6613\u3002\u76ee\u524d\u5c1a\u4e0d\u6e05\u695a\u8fd9\u7b14\u4ea4\u6613\u662f\u5426\u4f1a\u53d7\u5230\u540c\u6837\u7684\u98ce\u9669\u3002\n TechCrunch\u5df2\u8fbe\u5230Cornershop\u548cUber\u8fdb\u884c\u8bc4\u8bba\u3002\u5982\u679c\u4ed6\u4eec\u56de\u590d\uff0c\u6211\u4eec\u5c06\u66f4\u65b0\u6545\u4e8b\u3002 ", "note_en": "Uber announced in 2019 plans to take a majority ownership in Cornershop. That transaction wasn\u2019t completed until the third quarter of 2020 other than in Mexico, which closed in January 2021. This latest agreement, which was reached June 18 and reported Monday, will make Cornershop a wholly owned subsidiary of Uber.\n The deal suggests Uber\u2019s bullishness in delivery hasn\u2019t waned. With Cornershop as wholly owned subsidiary, Uber can beef up its grocery delivery options, a service made popular during the pandemic. Uber started offering grocery delivery  in select cities across Latin America, Canada and the U.S. last summer after it acquired Postmates in a deal valued at  $2.65 billion. Uber faces stiff competition from grocery retailers themselves, many of whom offer delivery through partnering with startups like DoorDash or Favor Fleet.\n  Cornershop, which is headquartered in Chile, was founded in 2015 by Oskar Hjertonsson, Daniel Undurraga and Juan Pablo Cuevas. The company expanded its operations to eight countries up and down the Americas, including Chile, Mexico, Brazil, Colombia, Costa Rica, Peru, the U.S. and Canada. The company raised  $31.7 million over four rounds of funding from investors that include Accel and Jackson Square Ventures.\n Uber wasn\u2019t the only grocery service with its eyes on Cornershop; the startup was supposed to be acquired by Walmart in a $225 million deal, but it ultimately fell through after Mexican anti-trust regulators blocked the deal from moving forward. It is unclear whether this deal will be subject to the same risks.\n TechCrunch has reached out to Cornershop and Uber for comment. We will update the story if they respond.", "posttime": "2021-06-22 00:56:53", "source_domain": "slashdot.org", "source_name": "slashdot", "tags": "\u6210\u4e3a,sole,\u4f18\u6b65", "title": "\u4f18\u6b65\u6210\u4e3a\u6742\u8d27\u5e97\u7684\u552f\u4e00\u6240\u6709\u8005\u7684\u9500\u552e\u542f\u52a8\u89d2\u843d ", "title_en": "\n\t\t\t\tUber to become the sole owner of grocery delivery startup Cornershop\t\t\t", "transed": 1, "url": "https://techcrunch.com/2021/06/21/uber-to-become-the-sole-owner-of-grocery-delivery-startup-cornershop/", "via": "", "real_tags": ["\u6210\u4e3a", "sole", "\u4f18\u6b65"]}, {"category": "", "categoryclass": "", "imagename": "1b519358da1eaeaecb2008f7a313ad67.png", "infoid": 1067235, "ip": "", "isanchordig": 1, "ischecked": 1, "isdelete": 0, "isneo": 1, "mark": "", "name": "", "note": "Facebook\u7684Clubhouse\u7ade\u4e89\u5bf9\u624b\uff0c\u73b0\u573a\u97f3\u9891\u5ba4\uff0c\u6b63\u5728\u8fdb\u884c\u72b6\u6001\u3002\u8be5\u516c\u53f8\u4eca\u5929\u5ba3\u5e03\uff0c\u4e00\u4e9b\u57fa\u4e8e\u7f8e\u56fd\u7684\u516c\u4f17\u6570\u636e\u4ee5\u53ca\u67d0\u4e9b\u56e2\u4f53\uff0c\u53ef\u4ee5\u901a\u8fc7\u4e3bFacebook iOS\u5e94\u7528\u7a0b\u5e8f\u5f00\u59cb\u6258\u7ba1\u5ba4\u3002 \uff08\u7136\u800c\uff0c\u5141\u8bb8\u7684\u503e\u542c\u8005\u6570\u91cf\u6ca1\u6709\u4e0a\u9650 - \u4ff1\u4e50\u90e8\u4f1a\u6240\u7684\u4e3b\u8981\u955c\u5934\uff0c\u8fd9\u4f1a\u9650\u5236\u623f\u95f4\u5c3a\u5bf8\u9650\u5236\u3002\n \u5b83\u8fd8\u5f15\u5165\u4e86\u5176\u4ed6\u6f02\u4eae\u7684\u529f\u80fd\uff0c\u5982\u901a\u77e5\u5f53\u60a8\u7684\u670b\u53cb\u6216\u8ffd\u968f\u8005\u52a0\u5165\u623f\u95f4\u4ee5\u53caLive Tablions\u65f6\u3002\u5c06\u6709\u4e00\u4e2a\u201c\u4e3e\u624b\u201d\u6309\u94ae\u6765\u8bf7\u6c42\u52a0\u5165\u5bf9\u8bdd\uff0c\u5e76\u53ef\u5728\u6574\u4e2a\u804a\u5929\u4e2d\u8fdb\u884c\u4ea4\u4e92\u3002 Twitter Spaces\uff0cTwitter\u7684Live Audio\u529f\u80fd\uff0c\u5305\u62ec\u6807\u9898\uff0c\u4f46\u4ff1\u4e50\u90e8\u4ecd\u7136\u6ca1\u6709\u3002\n \u5728\u7ec4\u4e2d\uff0c\u7ba1\u7406\u5458\u53ef\u4ee5\u63a7\u5236\u5141\u8bb8\u8c01\u521b\u5efa\u4e00\u4e2a\u623f\u95f4\uff1a\u4e3b\u6301\u4eba\uff0c\u56e2\u4f53\u6210\u5458\u6216\u5176\u4ed6\u7ba1\u7406\u5458\u3002\u516c\u5171\u7ec4\u5408\u804a\u5929\u5c06\u5728\u672c\u96c6\u56e2\u5916\u90e8\u548c\u5916\u90e8\u8bbf\u95ee\uff0c\u4f46\u79c1\u6709\u7ec4\u804a\u5929\u5c06\u4ec5\u9650\u4e8e\u6210\u5458\u3002\u6b64\u5916\uff0c\u4e3b\u673a\u8fd8\u53ef\u4ee5\u9009\u62e9\u975e\u8425\u5229\u7ec4\u7ec7\u6216\u79df\u91d1\uff0c\u4ee5\u4fbf\u5728\u4e0e\u6309\u94ae\u8fdb\u884c\u5bf9\u8bdd\u671f\u95f4\u652f\u6301\uff0c\u4ee5\u76f4\u63a5\u6350\u8d60\u804a\u5929\u3002\u540c\u6837\uff0c\u8fd9\u611f\u89c9\u5c31\u50cf\u4e00\u4e2a\u76f4\u63a5\u6784\u5efa\u7684\u529f\u80fd\uff0c\u4ee5\u89e3\u51b3\u5173\u952e\u7684\u4ff1\u4e50\u90e8\u7528\u4f8b\u5e76\u4f7f\u5176\u65e0\u6469\u64e6\u3002 \uff08\u8bb8\u591a\u4ff1\u4e50\u90e8\u521b\u4f5c\u8005\u5728\u5e94\u7528\u7a0b\u5e8f\u4e0a\u6258\u7ba1\u4e86\u7b79\u6b3e\u4eba\uff0c\u4f46\u5fc5\u987b\u5c06\u4eba\u4eec\u6307\u5411\u5916\u9762\u7684\u8054\u7cfb\uff0c\u4ee5\u4fbf\u4e8e\u6350\u6b3e\u3002\uff09\n   \u6b64\u5916\uff0cFacebook\u6b63\u5728\u5728\u5e73\u53f0\u4e0a\u63d0\u4f9b\u64ad\u5ba2\uff0c\u786e\u8ba4\u65e9\u671f\u7684\u8fb9\u7f18\u62a5\u544a\u3002\u4eba\u4eec\u5c06\u80fd\u591f\u901a\u8fc7\u8ff7\u4f60\u5458\u6216\u5168\u5c4f\u64ad\u653e\u5668\u6765\u4fa6\u542c\u64ad\u5ba2\uff0c\u5176\u4e2d\u5305\u542b\u5404\u79cd\u64ad\u653e\u63a7\u5236\uff0c\u5305\u62ec\u5728\u5c4f\u5e55\u5173\u95ed\u65f6\u4fa6\u542c\u7684\u80fd\u529b\u3002\u4ed6\u4eec\u53ef\u4ee5\u627e\u5230\u7279\u5b9a\u64ad\u5ba2\u521b\u9020\u8005\u7684\u9875\u9762\u4ee5\u53ca\u65b0\u95fb\u6e90\u7684\u8282\u76ee\uff0c\u4ed6\u4eec\u53ef\u4ee5\u53cd\u5e94\uff0c\u8bc4\u8bba\uff0c\u4e66\u7b7e\u548c\u5206\u4eab\u4ed6\u4eec\u7684\u6700\u7231\u3002 Facebook\u56e2\u961f\u8868\u793a\u8ba1\u5212\u5728\u4eca\u5e74\u590f\u5929\u665a\u4e9b\u65f6\u5019\u63a8\u51fa\u81ea\u52a8\u6807\u9898\uff0c\u4ee5\u53ca\u4fa6\u542c\u529f\u80fd\uff0c\u4fa6\u542c\u5668\u53ef\u4ee5\u521b\u5efa\u548c\u5206\u4eab\u4ed6\u4eec\u559c\u6b22\u7684\u526a\u8f91\u3002\n Spotify\u9996\u6b21\u63a8\u51fa\u81ea\u5df1\u7684\u73b0\u573a\u97f3\u9891\u5e94\u7528\u7a0b\u5e8f\uff0cGreenthach\u540e\uff0c\u6240\u6709\u8fd9\u4e9b\u529f\u80fd\u90fd\u53ea\u6709\u51e0\u5929\u7684\u65f6\u95f4;\u821e\u53f0\u6e20\u9053\u8d77\u6765\u4e09\u4e2a\u6708\u8d77\u6765;\u7ea2\u5fb7\u8c08\u65f6\u56db\u4e2a\u6708; Twitter\u53d1\u5c04\u7a7a\u95f4\u540e\u5927\u7ea6\u4e03\u4e2a\u6708;\u4ff1\u4e50\u90e8\u9996\u6b21\u53d1\u5e03\u540e\u5927\u7ea615\u4e2a\u6708\u3002\u636e\u62a5\u9053\uff0cLinkedIn\u548cSlack\u6d89\u53ca\u4ed6\u4eec\u81ea\u5df1\u7684\u97f3\u9891\u4ea7\u54c1\u7248\u672c\uff0c\u5373\u4f7f\u4e0b\u8f7d\u548c\u4ff1\u4e50\u90e8\u672c\u8eab\u5468\u56f4\u7684\u55e1\u55e1\u58f0\u5df2\u7ecf\u8fc7\u5206\u8870\u843d\u3002\n   \u4e0e\u4ff1\u4e50\u90e8\u4e0d\u540c\u610f\uff0c\u901a\u8fc7\u7ed9\u4e88\u4ed6\u4eec\u5bf9\u7845\u8c37\u70ed\u95e8\u955c\u5934\u7684\u542c\u89c9\u8bbf\u95ee\uff0cFacebook\u5e0c\u671b\u5c06\u66f4\u5e7f\u6cdb\u7684\u5f71\u54cd\u8005\u65bd\u653e\u4e86\u4e00\u4e2a\u5e26\u6709\u73b0\u573a\u97f3\u9891\u5ba4\u7684\u66f4\u5e7f\u6cdb\u3002\u5728\u53d1\u5e03\u4f1a\u4e0a\u6709\u6743\u8bbf\u95ee\u8be5\u529f\u80fd\u7684\u540d\u79f0\u516c\u4f17\u4eba\u7269\u4e2d\u5c06\u6210\u4e3a\u97f3\u4e50\u5bb6\uff08Tokimonsta\uff0cD Smoke\uff0cKehlani\uff09;\u5a92\u4f53\u6570\u5b57\uff08Joe Budden\uff0cDeray McKesson\uff09;\u548c\u8fd0\u52a8\u5458\uff08Russell Wilson\uff0cOmareloff\uff09\u3002 Joe Budden\u8fd8\u5c06\u901a\u8fc7Facebook\u5206\u53d1\u4ed6\u7684\u64ad\u5ba2\u3002\n \u97f3\u9891\u5ba4\u53ef\u80fd\u662f\u6216\u53ef\u80fd\u4e0d\u662f\u771f\u6b63\u7684\u6301\u7eed\u529b\u91cf\u7684\u529f\u80fd\uff0c\u4f46Facebook\u4f3c\u4e4e\u610f\u56fe\u5728\u5e7f\u6cdb\u6295\u8d44\u3002 ", "note_en": "Facebook\u2019s Clubhouse competitor,  Live Audio Rooms, is making its way stateside. The company announced today that some US-based public figures, as well as certain groups, can start hosting rooms through the main Facebook iOS app. (People can join, however, from both iOS and Android.) Anyone can be invited up as a speaker with up to 50 people able to speak at once. There\u2019s no cap on the number of listeners allowed in \u2014 a major shot at Clubhouse, which imposes room size limitations.\n It\u2019s also introducing other nifty features, like notifications when your friends or followers join a room, as well as live captions. There will be a \u201craise a hand\u201d button to request to join the conversation, and reactions will be available to to interact throughout the chat. Twitter Spaces, Twitter\u2019s live audio feature, includes captions, but Clubhouse still does not.\n Within groups, admins can control who\u2019s allowed to create a room: moderators, group members, or other admins. Public group chats will be accessible both in and outside the group, but private group chats will be restricted to members. Additionally, hosts can also select a nonprofit or fundraiser to support during their conversation with a button to directly donate showing up on the chat. Again, this feels like a feature directly built to address a key Clubhouse use case and make it frictionless. (Many Clubhouse creators have hosted fundraisers on the app but have to direct people to outside links in order to facilitate donations.)\n   Additionally, Facebook is making podcasts available on the platform, confirming earlier   Verge reporting. People will be able to listen to podcasts through either a mini-player or a full-screen player with various playback controls, including the ability to listen while the screen is off. They\u2019ll be able to find shows on specific podcast creators\u2019 Pages, as well as in the News Feed, and they can react to, comment, bookmark, and share their favorites. The Facebook team says it plans to roll out automatic captioning later this summer, as well as a clips feature where listeners can create and share their favorite clips.\n All these features come  just days after Spotify debuted its own live audio app, Greenroom;  three months since Stage Channels came to Discord;  four months after Reddit Talk; roughly  seven months after Twitter launched Spaces; and about 15 months after Clubhouse first launched.  LinkedIn and  Slack are, reportedly, working on their own versions of an audio product, even as  downloads of and  buzz around Clubhouse itself have waned considerably.\n   Unlike Clubhouse, which drew in early listeners by giving them auditory access to Silicon Valley hot shots, Facebook is hoping to cast a broader net of influencers with Live Audio Rooms. Among the named public figures who will have access to the feature on launch will be musicians (TOKiMONSTA, D Smoke, Kehlani); media figures (Joe Budden, DeRay Mckesson); and athletes (Russell Wilson, Omareloff). Joe Budden will also distribute his podcast through Facebook.\n Audio rooms may or may not be a feature with real staying power, but Facebook seems intent on investing broadly in the space.", "posttime": "2021-06-22 00:50:26", "source_domain": "slashdot.org", "source_name": "slashdot", "tags": "facebook,\u63a8\u51fa,launches,\u529f\u80fd", "title": "Facebook\u63a8\u51fa\u5176\u4ff1\u4e50\u90e8\u514b\u9686 ", "title_en": "Facebook Launches Its Clubhouse Clone", "transed": 1, "url": "https://www.theverge.com/2021/6/21/22540508/facebook-live-audio-rooms-clubhouse-rival-spaces-greenhouse", "via": "", "real_tags": ["facebook", "\u63a8\u51fa", "launches", "\u529f\u80fd"]}, {"category": "", "categoryclass": "", "imagename": "", "infoid": 1067234, "ip": "", "isanchordig": 1, "ischecked": 1, "isdelete": 0, "isneo": 1, "mark": "", "name": "", "note": "\u8fd9\u4e2a\u60f3\u6cd5\uff1a\u53ea\u8981\u4f60\u7684CI\u4ece\u4e3b\u5206\u652f\u6784\u5efa\u4ee3\u7801\uff0c\u8bf7\u4e0d\u8981\u629b\u5f03\u6784\u5efa\u7ed3\u679c\uff1a\u6539\u4e3a\u53d1\u5e03\u3002\u8fd9\u4f7f\u5f97QA\u5de5\u7a0b\u5e08\u6216\u9519\u8bef\u8bb0\u8005\u63d0\u4f9b\u65b0\u7684\u6784\u5efa\u6765\u6613\u4e8e\u5c1d\u8bd5\u3002\n  \u6211\u7b2c\u4e00\u6b21\u5728\u5de5\u4f5c\u4e2d\u7ecf\u5386\u4e86\u8fd9\u4e2a\u8bbe\u7f6e\uff0c\u6211\u4eec\u4f7f\u7528Jenkins\u3002 Jenkins\u4e0d\u662f\u6211\u9996\u9009\u7684CI\u7cfb\u7edf\uff0c\u800c\u662f\u4e3a\u4e86\u83b7\u5f97\u4fe1\u7528\uff0c\u5b83\u4f7f\u5176\u8d85\u7ea7\u6613\u4e8e\u5b9e\u73b0\u6b64\u529f\u80fd\uff1a\u6dfb\u52a0\u6b65\u9aa4\u6765\u5f52\u6863\u5de5\u4ef6\uff0c\u6216\u8005\u4f7f\u7528ArchiveARtifacts Pipeline\u547d\u4ee4\u3002\n \u6211\u4eec\u5b9e\u9645\u4e0a\u4e3a\u6240\u6709\u5728\u5de5\u4f5c\u4e2d\u7684\u6784\u5efa\u6267\u884c\u6b64\u64cd\u4f5c\uff0c\u4e0d\u4ec5\u662f\u4e3b\u5206\u652f\u6784\u5efa\u3002\u5b83\u4f7f\u6211\u4eec\u7684QA\u5de5\u7a0b\u5e08\u7684\u751f\u6d3b\u66f4\u5bb9\u6613\u3002\u6211\u4eec\u7684\u5de5\u4f5c\u6d41\u7a0b\u5982\u4e0b\u6240\u793a\uff1a\n \u5f53\u5f00\u53d1\u4eba\u5458\u8003\u8651\u5b83\u51c6\u5907QA\u65f6\uff0cQA\u5de5\u7a0b\u5e08\u4e0b\u8f7dPR\u6784\u5efa\u751f\u6210\u7684\u5de5\u4ef6\u5e76\u4f7f\u7528\u5b83\u4eec\u6765\u9a8c\u8bc1\u5de5\u4f5c\u3002\n  \u6211\u8ba4\u4e3a\u5c06\u7c7b\u4f3c\u4e8e\u6211\u81ea\u5df1\u7684\u9879\u76ee\u7684\u4e1c\u897f\u662f\u4e00\u4e2a\u5f88\u597d\u7684\u60f3\u6cd5\uff0c\u8fd9\u4e9b\u9879\u76ee\u5728Github\u4e0a\u6258\u7ba1\u5e76\u4f7f\u7528Gi\u200b\u200btHub CI\u3002\n \u6211\u9884\u8ba1\u8fd9\u6837\u7684\u529f\u80fd\u53ef\u4ee5\u968f\u65f6\u53ef\u7528\uff0c\u4f46\u6211\u627e\u4e0d\u5230\u6211\u60f3\u8981\u7684\u4e1c\u897f\u3002 GitHub\u63d0\u4f9b\u4e86\u4e00\u79cd\u4ece\u5efa\u7b51\u7269\u4e2d\u4e0b\u8f7d\u6587\u7269\u7684\u65b9\u6cd5\uff0c\u4f46\u5b83\u5e76\u4e0d\u7406\u60f3\uff1a\n \u4f2a\u50cf\u5728\u4e00\u4e2a\u5927\u7684zip\u4e2d\u6346\u7ed1\u5728\u4e00\u8d77\uff0c\u5728\u6784\u5efa\u591a\u5e73\u53f0\u5e94\u7528\u65f6\uff0c\u8fd9\u662f\u4e0d\u65b9\u4fbf\u7684\uff1a\u6ca1\u6709\u4eba\u60f3\u8981\u4e0b\u8f7d\u4e00\u4e2a\u5305\u542b\u76f8\u540c\u5e94\u7528\u7a0b\u5e8f\u7684acos\uff0cwindows\u548clinux\u5e94\u7528\u7a0b\u5e8f\u3002 \n\u4e00\u4e9b\u9879\u76ee\u4f7f\u7528\u6807\u7b7e\u6765\u751f\u4ea7\u4e3b\u5206\u652f\u6784\u5efa\uff0c\u4f46\u6211\u4e0d\u559c\u6b22\u8fd9\u4e2a\u60f3\u6cd5\u3002\u53eb\u6211\u4e00\u4e2a\u7eaf\u7968\uff0c\u4f46\u662f\u4f7f\u7528\u6807\u7b7e\uff0c\u8fd9\u79cd\u65b9\u5f0f\u611f\u89c9\u50cf\u5bf9\u6982\u5ff5\u6765\u8865\u507f\u4e22\u5931\u7684github\u529f\u80fd\u3002\n \u7531\u4e8e\u6211\u6258\u7ba1vps\u4e0a\u7684\u535a\u5ba2\uff0c\u6211\u6700\u7ec8\u505a\u4e86\u4ec0\u4e48\u6b63\u5728vps\u4e0a\u5efa\u7acb\u4e00\u4e2a\u5b50\u57df\uff08builds.agateau.com\uff09\uff0c\u5e76\u5c06github\u4e0a\u4f20\u5230\u6211\u7684\u670d\u52a1\u5668\u4e0a\u7684ssh\u3002\n  \u6211\u8bbe\u7f6e\u7684\u7b2c\u4e00\u4ef6\u4e8b\u662fHTTP\u670d\u52a1\u5668\u63d0\u4f9b\u6587\u4ef6\u3002\u5728\u6211\u7684\u6ce8\u518c\u5546\u4e0a\u6dfb\u52a0\u5b50\u57df\u540e\uff0c\u6211\u5728\u6211\u7684vps\u4e0a\u521b\u5efa\u4e86\u4e00\u4e2a\u76ee\u5f55\uff0c\u5e76\u914d\u7f6e\u4e86nginx\uff0c\u4ee5\u4fbf\u8bbf\u95ee\uff06\uff0334; builds.agateau.com\uff06\uff0334;\u53ef\u4ee5\u4f7f\u7528nginx\u82b1\u5f0f\u7d22\u5f15\u6a21\u5757\u6d4f\u89c8\u548c\u4e0b\u8f7d\u6b64\u76ee\u5f55\u7684\u5185\u5bb9\u3002\n   \u7136\u540e\u6211\u5728vps\u4e0a\u521b\u5efa\u4e86\u4e00\u4e2a\u6784\u5efa\u7528\u6237\uff0c\u5728/srv/builds.agateau.com/html\u4e2d\u521b\u5efa\u4e86\u4e00\u4e2a\u76ee\u5f55\uff0c\u5e76\u4f7f\u6784\u5efa\u7528\u6237\u6210\u4e3a\u8fd9\u4e9b\u76ee\u5f55\u7684\u6240\u6709\u8005\uff0c\u4ee5\u4fbf\u5b83\u53ef\u4ee5\u5199\u5165\u5b83\u4eec\u3002\n \u6700\u540e\uff0c\u6211\u4e3a\u6b64\u7528\u6237\u521b\u5efa\u4e86\u4e00\u4e2aSSH\u952e\uff0c\u4ee5\u4fbfGitHub Builder\u53ef\u4ee5\u8fde\u63a5\u5230\u5b83\u3002\n  \u6211\u7814\u7a76\u4e86SSH\u4e0a\u4f20\u7684\u73b0\u6709GitHub\u64cd\u4f5c\uff0c\u4f46\u5b83\u53ea\u5bf9SCP\u547c\u53eb\u611f\u5230\u8fc7\u5ea6\u77eb\u6789\u8fc7\u6b63\u3002\u76f8\u53cd\uff0c\u6211\u51b3\u5b9a\u4fdd\u6301\u7b80\u5355\uff1a\u6211\u7684\u6784\u5efa\u5c06\u8c03\u7528shell\u811a\u672c\u6765\u8fdb\u884c\u4e0a\u4f20\u3002\u65e0\u8bba\u5982\u4f55\uff0c\u6211\u66f4\u559c\u6b22\u5c06\u4f9d\u8d56\u5173\u7cfb\u4fdd\u6301\u5728\u6700\u5c0f\uff0c\u8fd9\u4f7f\u5f97\u5728\u672c\u5730\u6d4b\u8bd5\u6784\u5efa\u811a\u672c\uff0c\u800c\u4e0d\u662f\u4f7f\u7528Commit-Push-and-and-34;\u5de5\u4f5c\u6d41\u7a0b\uff06\uff0334;\n  \uff03\uff01/ bin / bash set -euo pipefail progname = $\uff08basename $ 0\uff09die\uff08\uff09{echo\uff06\uff0334; $ progname\uff1a$ *\uff06\uff0334; \uff06gt; \uff06amp; 2\u51fa\u53e31}\uff03\u68c0\u67e5$ 1\u662f\u5b9a\u4e49\u7684\uff0c\u800c\u4e0d\u662femptycheck_var\uff08\uff09{local name = $ 1\u5982\u679c\uff01 env | Grep -Q\uff06\uff0334; ^ $\u540d\u79f0= .. *\uff06\uff0334; ;\u7136\u540e\u6b7b\u4ea1\uff06\uff0334;\u73af\u5883\u53d8\u91cf$\u540d\u79f0\u672a\u8bbe\u7f6e\u6216\u4e3a\u7a7a\uff06\uff0334; fi}\u7528\u6cd5\uff08\uff09{\u5982\u679c[\uff06\uff0334; $ *\uff06\uff0334; \uff01\uff01 =\uff06\uff0334;\uff06\uff0334; ];\u7136\u540e\u56de\u58f0\uff06\uff0334;\u9519\u8bef\uff1a$ *\uff06\uff0334;\u56de\u58f0FI\u732b\uff06lt;\uff06lt; EOF\u4f7f\u7528\u7387\uff1a$ progname [\u9009\u9879...]\uff06lt; project\uff06gt; \uff06lt; build_file\uff06gt; [build_file ...]\u4e0a\u8f7d\u4f7f\u7528scp\u6784\u5efa\u4e00\u4e2a\u5668\u4ef6\u5230\u670d\u52a1\u5668\u3002\u6587\u4ef6\u662f\u4e0a\u8f7d\u5230\u6784\u5efa/\uff06lt; project\uff06gt; /\u3002\u671f\u671b\u8bbe\u7f6e\u4ee5\u4e0b\u73af\u5883\u53d8\u91cf\uff1a -  Upload_Username  -  Upload_Private_Key  -  Upload_Hostname\u9009\u9879\uff1a-h\uff0c--help\u663e\u793a\u6b64\u7528\u6cd5\u6d88\u606f\u548c\u9000\u51faEOF Exit 1} Project =\uff06\uff0334;\uff06\uff0334;\uff06\uff0334; build_files =\uff06\uff0334;\uff06\uff0334;\u867d\u7136[$\uff03-gt 0];\u6848\u4f8b\uff06\uff0334; 1\u7f8e\u5143\uff06\uff0334;\u5728-h |  -  help\uff09\u4f7f\u7528; -  *\uff09\u4f7f\u7528\uff06\uff0334;\u672a\u77e5\u9009\u9879\uff06\uff0339; $ 1\uff06\uff0339;\uff06\uff0334; ;; *\uff09\u5982\u679c[-Z\uff06\uff0334; $\u9879\u76ee\uff06\uff0334; ];\u7136\u540e\u9879\u76ee=\uff06\uff0334; 1\u7f8e\u5143\uff06\uff0334; else build_files =\uff06\uff0334; $ build_files $ 1\uff06\uff0334; fi ;;\u5982\u679c[-z\uff06\uff0334; $ build_files\uff06\uff0334; ];\u7136\u540e\u7528\u6cd5\uff06\uff0334;\u6ca1\u6709\u8db3\u591f\u7684\u4e89\u8bba\uff06\uff0334; ficheck_var upload_usernamecheck_var upload_private_keycheck_var upload_hostname echo\uff06\uff0334;\u4e0a\u4f20\uff06\uff0334; eval $\uff08SSH-\u4ee3\u7406\uff09\u56de\u58f0\uff06\uff0334; $ upload_private_key\uff06\uff0334; | ssh-add -scp -o\uff06\uff0334; stricthostkeychecking\uff06\uff0334; $ build_files\uff06\uff0334; $ upload_username @ $ upload_hostname\uff1abuilds / $ project /\uff06\uff0334; \n\u4e0d\u53ef\u5426\u8ba4\uff0c\u5b83\uff06\uff0339;\u5bf9\u4e8e\u7b80\u5355\u7684SCP\u547c\u53eb\u6709\u70b9\u4e45\uff0c\u4f46\u662f\uff0c\u5b83\u662f\u56e0\u4e3a\u6211\u66f4\u559c\u6b22\u81f3\u5c11\u6dfb\u52a0\u81f3\u5c11\u4e00\u5b9a\u91cf\u7684doc\uff0c\u53c2\u6570\u89e3\u6790\u548c\u5904\u7406\u5230\u6b64\u7c7b\u811a\u672c\u3002\u6211\u53d1\u73b0\u5b83\u6709\u52a9\u4e8e\u57286\u4e2a\u6708\u540e\u91cd\u65b0\u5ba1\u89c6\u5b83\u4eec\u65f6\uff08\u6211\u524d\u6bb5\u65f6\u95f4\u5728\u6211\u7684shell\u811a\u672c\u6a21\u677f\u4e2d\u5199\u9053\uff0c\u5982\u679c\u60a8\u6709\u5174\u8da3\uff09\u3002\n \u6b64\u811a\u672c\u83b7\u53d6\u9879\u76ee\u7684\u540d\u79f0\uff0c\u8be5\u9879\u76ee\u4e0e\u670d\u52a1\u5668\u4e0a\u521b\u5efa\u7684\u76ee\u5f55\u5339\u914d\uff0c\u4ee5\u53ca\u4e0a\u4f20\u6587\u4ef6\u3002\u901a\u8fc7\u73af\u5883\u53d8\u91cf\u63d0\u4f9b\u654f\u611f\u4fe1\u606f\uff08\u7528\u6237\u540d\uff0c\u4e3b\u673a\u540d\u548c\u79c1\u94a5\uff09\u3002\n \u6ce8\u610f\uff1a\u6211\u4e0d\u5f97\u4e0d\u7981\u7528\u4e3b\u673a\u952e\u68c0\u67e5\uff08-o\uff06\uff0334; stricthostkeychecking\uff06\uff0334; scp\u8c03\u7528\u4e2d\u7684\u9009\u9879\uff09\uff0c\u56e0\u4e3a\u6211\u65e0\u6cd5\u5f04\u6e05\u695a\u5982\u4f55\u5c06\u4e3b\u673a\u952e\u4f5c\u4e3a\u53c2\u6570\u6216\u73af\u5883\u53d8\u91cf\u4f20\u9012\u3002\u6211\u76f8\u4fe1\u8fd9\u79cd\u60c5\u51b5\uff0c\u5b83\u8d62\u5f97\u4e86\uff06\uff0339; t\u592a\u7cdf\u7cd5\u4e86\uff0c\u53ef\u80fd\u53d1\u751f\u7684\u60c5\u51b5\u662f\uff0c\u6709\u4eba\u7ba1\u7406\u7a83\u53d6\u5e10\u6237\u516c\u94a5\u5e76\u4e0a\u4f20\u5230\u4ed6\u4eec\u7684\u670d\u52a1\u5668\u800c\u4e0d\u662f\u6211\u7684\u670d\u52a1\u5668\u3002\u4ecd\u7136\u662f\u6211\u559c\u6b22\u80fd\u591f\u901a\u8fc7\u4e3b\u673a\u952e\u3002\u5982\u679c\u4f60\u77e5\u9053\u5982\u4f55\u505a\u5230\u8fd9\u4e00\u70b9\uff0c\u6211\u5f88\u4e50\u610f\u6536\u5230\u4f60\u7684\u6765\u4fe1\uff01\n  \u6211\u8fde\u63a5\u5230\u9879\u76eegithub\u7ba1\u7406\u9875\u9762\uff0c\u5e76\u5c06\u7528\u6237\u540d\uff0c\u4e3b\u673a\u540d\u548c\u79c1\u94a5\u58f0\u660e\u4e3agithub\u52a0\u5bc6\u7684\u79d8\u5bc6\u3002\n \u73b0\u5728\u6240\u505a\u7684\u4e00\u5207\u90fd\u662f\u4eceGithub\u6784\u5efa\u5de5\u4f5c\u6d41\u7a0b\u8c03\u7528\u4e0a\u4f20\u6784\u5efa\u811a\u672c\u3002\n \u4ee5\u4e0b\u662fGit Bonsai\u6784\u5efa\u5de5\u4f5c\u6d41\u7a0b\uff0c\u663e\u793a\u5982\u4f55\u5728\u6bcf\u4e2a\u63a8\u9001\u5230\u4e3b\u5206\u652f\u540e\u8c03\u7528\u4e0a\u4f20 - \u6784\u5efa\u3002\n \u540d\u79f0\uff1a\u7248\u672c\uff1a[\u63a8\uff0cpull_request]\u4f5c\u4e1a\uff1a\u6784\u5efa\uff1a\u7b56\u7565\uff1aFail-Fast\uff1aFalse Matrix\uff1aOS\uff1a -  Ubuntu-18.04  -  MacOS-10.15  -  Windows-2019 runs-on\uff1a$ {{romix.oS}}\u9ed8\u8ba4\u503c\uff1ashell\uff1abash\u6b65\u9aa4\uff1a - \u7528\u9014\uff1a\u64cd\u4f5c/ [\u7535\u5b50\u90ae\u4ef6\u4fdd\u62a4]  - \u540d\u79f0\uff1abuild\u8fd0\u884c\uff1aci / build-app  - \u540d\u79f0\uff1a\u8fd0\u884c\u9759\u6001\u68c0\u67e5\u8fd0\u884c\uff1aci / run-static-checks  -  name\uff1a\u8fd0\u884c\u6d4b\u8bd5\u8fd0\u884c\uff1a CI / Run-Tests  - \u540d\u79f0\uff1aCreate Archive Run\uff1aCI / Create-Archive  - \u540d\u79f0\uff1a\u4e0a\u4f20IF\uff1aGitHub.ref ==\uff06\uff0339; refs / heads / master\uff06\uff0339;\u8fd0\u884c\uff1aCI / Upload-Build Git-Bonsai Artifacts / *\u3002BZ2 ENV\uff1aUpload_Username\uff1a$ {{secrets.upload_eusername}} upload_private_key\uff1a$ {{secrets.upload_private_key}} upload_hostname\uff1a$ {{secrets.upload_hostname}} \n\u670d\u52a1\u5668\u7aef\u9700\u8981\u6700\u540e\u4e00\u4ef6\u4e8b\uff1a\u4e3a\u786e\u4fdd\u670d\u52a1\u5668\u78c1\u76d8\u6ca1\u6709\u5145\u6ee1\u6784\u5efa\uff0c\u5e76\u4e14\u6784\u5efa\u5217\u8868\u9875\u9762\u4e0d\u4f1a\u53d8\u5f97\u592a\u957f\uff0c\u6211\u6dfb\u52a0\u4e86\u4e00\u4e2a\u6e05\u7406\u811a\u672c\uff0c\u4ee5\u4fdd\u6301\u6bcf\u4e2a\u9879\u76ee\u7684\u6700\u65b030\u4e2a\u6784\u5efa\u3002\u6b64\u811a\u672c\u6bcf\u5929\u90fd\u8fd0\u884c\u3002\n \u5728\u8fd9\u91cc\uff0c\u5b83\u518d\u6b21\u5b83\uff06\uff0339;\u56e0\u4e3a\u53c2\u6570\u89e3\u6790\u800c\u6bd4\u4eba\u4eec\u6240\u671f\u671b\u7684\u65f6\u95f4\u957f\u4e00\u70b9\uff1a\n \uff03\uff01/ bin / bash set -euo pipefail progname = $\uff08basename $ 0\uff09root_dir = / srv / builds.agateau.com / html max_builds = 30\uff03verbose\u547d\u4ee4\u9ed8\u8ba4cmd =\uff06\uff0334; rm -v\uff06\uff0334; quiet_cmd =\uff06\uff0334; rm\uff06\uff0334; dry_run_cmd =\uff06\uff0334;\u56de\u58f0\u5c06\u5220\u9664\uff06\uff0334; clean_project_dir\uff08\uff09{local project_dir =\uff06\uff0334; 1\u7f8e\u5143\uff06\uff0334; ls  -  ssort time --reverse\uff06\uff0334; $ project_dir\uff06\uff0334; \\ | awk\uff06\uff0339; nr\uff06gt; \uff06\uff0339; $ max_builds\uff06\uff0339; {\u6253\u5370$ 1}\uff06\uff0339; \\ |\u867d\u7136\u8bfb\u540d\u79f0\u4e3a$ cmd\uff06\uff0334; $ project_dir / $ name\uff06\uff0334;\u5b8c\u6210}\u7528\u6cd5\uff08\uff09{\u5982\u679c[\uff06\uff0334; $ *\uff06\uff0334; \uff01\uff01 =\uff06\uff0334;\uff06\uff0334; ];\u7136\u540e\u56de\u58f0\uff06\uff0334;\u9519\u8bef\uff1a$ *\uff06\uff0334;\u56de\u58f0FI\u732b\uff06lt;\uff06lt; EOF\u4f7f\u7528\u7387\uff1a$ progname [\u9009\u9879...]\u5220\u9664\u65e7\u6784\u5efa\u5de5\u4ef6\u3002\u9009\u9879\uff1a-h\uff0c--help\u663e\u793a\u6b64\u7528\u6cd5\u6d88\u606f\u548c\u9000\u51fa-q\uff0c--quiet\u5de5\u4f5c\u9759\u9ed8 - \u8fd0\u884c\u6253\u5370\u5c06\u88ab\u5220\u9664\uff0c\u800c\u4e0d\u662f\u5220\u9664\u4efb\u4f55EOF\u9000\u51fa1}\u800c[$\uff03-gt 0];\u6848\u4f8b\uff06\uff0334; 1\u7f8e\u5143\uff06\uff0334;\u5728-h |  -  help\uff09\u4f7f\u7528; -q | --quiet\uff09cmd =\uff06\uff0334; $ quiet_cmd\uff06\uff0334;\u8f6c\u79fb  ;; - \u8fd0\u884c\uff09cmd =\uff06\uff0334; $ dry_run_cmd\uff06\uff0334;\u8f6c\u79fb  ;; -  *\uff09\u4f7f\u7528\uff06\uff0334;\u672a\u77e5\u9009\u9879\uff06\uff0339; $ 1\uff06\uff0339;\uff06\uff0334; ;; *\uff09\u4f7f\u7528\uff06\uff0334;\u592a\u591a\u4e89\u8bba\uff06\uff0334; ;;\u5728$ root_dir / * /\u4e2d\u4e3aproject_dir\u5b8c\u6210esac; do clean_project_dir\uff06\uff0334; $ project_dir\uff06\uff0334;\u5b8c\u6bd5\n  \u8981\u4f7f\u6784\u5efa\u7f51\u7ad9\u770b\u8d77\u6765\u6709\u70b9\u6f02\u4eae\uff0c\u6211\u914d\u7f6e\u4e86\u82b1\u5f0f\u7d22\u5f15\u6a21\u5757\u6765\u4f7f\u7528\u5e73\u9762\u4e3b\u9898\u3002\u6211\u8fd8\u5728\u964d\u5e8f\u8ba2\u5355\u4e2d\u5236\u4f5c\u4e86\u5b83\u5217\u8868\u6784\u5efa\uff0c\u4ee5\u4fbf\u6700\u65b0\u7248\u672c\u59cb\u7ec8\u4f4d\u4e8e\u9875\u9762\u7684\u9876\u90e8\u3002\n \u5b83\uff0c\u4f60\u53ef\u4ee5\u770b\u770b\u5b83\uff1ahttps://builds.agateau.com/\u3002\u73b0\u5728\u53ea\u6709\u4e24\u4e2a\u9879\u76ee\uff0c\u6211\u8ba1\u5212\u5c06\u6765\u589e\u52a0\u66f4\u591a\u3002\n  \u6211\u5f88\u9ad8\u5174\u6211\u82b1\u4e86\u4e00\u4e9b\u65f6\u95f4\u8bbe\u7f6e\u8fd9\u4e2a\u795e\u5668\u4e0a\u4f20\u7cfb\u7edf\uff0c\u56e0\u4e3a\u5b83\u5df2\u7ecf\u8bc1\u660e\u4e86\u8ba9\u9519\u8bef\u8bb0\u8005\u5728\u62a5\u544a\u95ee\u9898\u540e\u786e\u8ba4\u4fee\u590d\u3002\u8ba9\u6211\u77e5\u9053\u8fd9\u662f\u5426\u5bf9\u60a8\u6709\u7528\uff0c\u6216\u8005\u60a8\u662f\u5426\u77e5\u9053\u53d1\u5e03\u6784\u5efa\u5de5\u4ef6\u7684\u66f4\u7b80\u5355\u7684\u89e3\u51b3\u65b9\u6848\u3002 ", "note_en": "The idea: whenever your CI builds the code from your main branch, do not ditch the build results: publish them instead. This makes it easy to provide QA engineers or bug reporters with new builds to try.\n  I first experienced this setup at work, where we use Jenkins. Jenkins is  not my preferred CI system, but to its credit, it makes it super easy to implement this feature: add a step to archive artifacts, either using the GUI or using the  archiveArtifacts pipeline command.\n We actually do this for all builds at work, not only master branch builds. It makes the life of our QA engineers much easier. Our workflow looks like this:\n when developers consider it ready to QA, QA engineers download the artifacts produced by the PR build and use them to validate the work.\n  I thought it would be a good idea to setup something similar for my own projects, which are hosted on GitHub and use GitHub CI.\n I expected a feature like this to be readily available, but I could not find exactly what I wanted. GitHub provides a way to download artifacts from a build but it&#39;s not ideal:\n Artifacts are all bundled together in a big zip, which is inconvenient when building multi-platform apps: no-one wants to download a single archive containing the same application for macOS, Windows and Linux.\n Some projects use tags to produce main branch builds, but I don&#39;t like this idea. Call me a purist, but using tags that way feels like subverting the concept to compensate for a missing GitHub feature.\n Since I host my blog on a VPS, what I ended up doing is setting up a subdomain for builds on the VPS ( builds.agateau.com) and making GitHub upload artifacts to my server over SSH.\n  The first thing I set up was the HTTP server to serve the files. After adding the subdomain on my registrar, I created a directory on my VPS and configured Nginx so that users visiting &#34;builds.agateau.com&#34; would be able to browse and download the content of this directory, using the  Nginx Fancy Index module.\n   I then created a  build user on the VPS, created one directory per project in  /srv/builds.agateau.com/html and made the  build user the owner of these directories so that it can write to them.\n Finally I created an SSH key for this user, so that the GitHub builder can connect to it.\n  I looked into existing GitHub actions for SSH uploads but it all felt overkill for just an  scp call. Instead I decided to keep it simple: my build is going to call a shell script to do the upload. I prefer keeping dependencies with the CI to a minimum anyway, it makes it easier to test build scripts locally instead of using the commit-push-and-pray &#34;workflow&#34;.\n  #!/bin/bash set -euo pipefail PROGNAME = $(basename  $0 )die ()  {  echo  &#34; $PROGNAME :  $* &#34; &gt; &amp; 2  exit  1 } # Check $1 is defined and not emptycheck_var ()  {  local  name = $1  if ! env  | grep -q  &#34;^ $name =..*&#34;  ;  then die  &#34;Environment variable  $name  is not set or is empty&#34;  fi }usage ()  {  if  [  &#34; $* &#34; ! =  &#34;&#34;  ]  ;  then  echo  &#34;Error:  $* &#34;  echo  fi cat  &lt;&lt; EOF Usage: $PROGNAME [OPTION ...] &lt;project&gt; &lt;build_file&gt; [build_file...] Uploads build artifacts to a server using scp. Files are upload to builds/&lt;project&gt;/. Expects the following environment variables to be set: - UPLOAD_USERNAME - UPLOAD_PRIVATE_KEY - UPLOAD_HOSTNAME Options:  -h, --help display this usage message and exit EOF  exit  1 } project = &#34;&#34; build_files = &#34;&#34; while  [  $# -gt  0  ]  ;  do  case  &#34; $1 &#34; in -h |--help ) usage  ;; -* ) usage  &#34;Unknown option &#39; $1 &#39;&#34;  ;; * )  if  [ -z  &#34; $project &#34;  ]  ;  then  project = &#34; $1 &#34;  else  build_files = &#34; $build_files   $1 &#34;  fi  ;;  esac  shift done if  [ -z  &#34; $build_files &#34;  ]  ;  then usage  &#34;Not enough arguments&#34; ficheck_var UPLOAD_USERNAMEcheck_var UPLOAD_PRIVATE_KEYcheck_var UPLOAD_HOSTNAME echo  &#34;Uploading&#34; eval  $(ssh-agent ) echo  &#34; $UPLOAD_PRIVATE_KEY &#34;  | ssh-add -scp -o  &#34;StrictHostKeyChecking off&#34;  $build_files  &#34; $UPLOAD_USERNAME @ $UPLOAD_HOSTNAME :builds/ $project /&#34;\n Admittedly, it&#39;s a bit long for a simple  scp call, but that&#39;s because I prefer adding at least a minimum amount of doc, argument parsing and error handling to such scripts. I find that it helps when revisiting them 6 months later (I wrote about my  shell script template some time ago if you are interested).\n This script takes the name of the project, which matches the directory created on the server for it, and the files to upload. Sensitive information (username, host name and private key) is provided through environment variables.\n Note: I had to disable host-key checking (the  -o &#34;StrictHostKeyChecking off&#34; option in the  scp call) because I could not figure out how to pass the host key as an argument or environment variable. I believe in that case it won&#39;t be too bad, the worse that could happen is someone managing to steal the account public key and uploading builds to their server instead of mine. Still I&#39;d prefer to be able to pass the host key. If you know how to do this, I would love to hear from you!\n  I connected to the project GitHub admin page and declared the username, host name and private keys as  GitHub encrypted secrets.\n Now all that was left to do was to call the  upload-build script from the GitHub build workflow.\n Here is  Git Bonsai build workflow, showing how to call  upload-build after each push to the master branch.\n name :  Build on :  [ push ,  pull_request ] jobs :  build :  strategy :  fail-fast :  false  matrix :  os :  -  ubuntu-18.04  -  macos-10.15  -  windows-2019  runs-on :  ${{ matrix.os }}  defaults :  run :  shell :  bash  steps :  -  uses :  actions/ [email\u00a0protected]  -  name :  Build  run :  ci/build-app  -  name :  Run static checks  run :  ci/run-static-checks  -  name :  Run tests  run :  ci/run-tests  -  name :  Create archive  run :  ci/create-archive  -  name :  Upload  if :  github.ref == &#39;refs/heads/master&#39;  run :  ci/upload-build git-bonsai artifacts/*.bz2  env :  UPLOAD_USERNAME :  ${{ secrets.UPLOAD_USERNAME }}  UPLOAD_PRIVATE_KEY :  ${{ secrets.UPLOAD_PRIVATE_KEY }}  UPLOAD_HOSTNAME :  ${{ secrets.UPLOAD_HOSTNAME }}\n  One last thing was required on the server side: to ensure the server disk does not get filled with builds and the build list page does not become too long to load, I added a cleanup script to keep only the latest 30 builds for each project. This script runs every day.\n Here it is, once again it&#39;s a bit longer than what one would expect because of argument parsing:\n #!/bin/bash set -euo pipefail PROGNAME = $(basename  $0 ) ROOT_DIR =/srv/builds.agateau.com/html MAX_BUILDS = 30 # Verbose command by default CMD = &#34;rm -v&#34; QUIET_CMD = &#34;rm&#34; DRY_RUN_CMD = &#34;echo Would delete &#34;clean_project_dir ()  {  local  project_dir = &#34; $1 &#34; ls --sort  time --reverse  &#34; $project_dir &#34;  \\  | awk  &#39;NR &gt; &#39; $MAX_BUILDS &#39; { print $1 }&#39;  \\  |  while  read name  do  $CMD  &#34; $project_dir / $name &#34;  done }usage ()  {  if  [  &#34; $* &#34; ! =  &#34;&#34;  ]  ;  then  echo  &#34;Error:  $* &#34;  echo  fi cat  &lt;&lt; EOF Usage: $PROGNAME [OPTION ...] Delete old builds artifacts. Options: -h, --help display this usage message and exit -q, --quiet work silently --dry-run print what would be deleted instead of deleting anything EOF  exit  1 } while  [  $# -gt  0  ]  ;  do  case  &#34; $1 &#34; in -h |--help ) usage  ;; -q |--quiet )  CMD = &#34; $QUIET_CMD &#34;  shift  ;; --dry-run )  CMD = &#34; $DRY_RUN_CMD &#34;  shift  ;; -* ) usage  &#34;Unknown option &#39; $1 &#39;&#34;  ;; * ) usage  &#34;Too many arguments&#34;  ;;  esac done for project_dir in  $ROOT_DIR/*/  ;  do clean_project_dir  &#34; $project_dir &#34; done\n  To make the builds site look a bit nicer, I configured the Fancy Index module to use the  Flat theme. I also made it list builds in descending date order, so that the latest builds are always at the top of the page.\n That&#39;s it, you can have a look at it here:  https://builds.agateau.com/. There are only two projects for now, I plan to add more in the future.\n  I am happy I spent some time setting up this artifact upload system as it has proved useful to let bug reporters confirm a fix after they reported an issue. Let me know if this was useful to you, or if you know of simpler solutions to publish build artifacts.", "posttime": "2021-06-22 00:49:35", "source_domain": "news.ycombinator.com", "source_name": "Hacker News", "tags": "\u53d1\u5e03,publishing,\u6784\u5efa", "title": "\u81ea\u52a8\u53d1\u5e03\u60a8\u7684\u6784\u5efa\u5de5\u4ef6 ", "title_en": "Automatically publishing your build artifacts", "transed": 1, "url": "https://agateau.com/2021/automatically-publishing-your-build-artifacts/", "via": "", "real_tags": ["\u53d1\u5e03", "\u6784\u5efa"]}, {"category": "", "categoryclass": "", "imagename": "8ba41e0b008abde46e41f5c9e01a86db.jpg", "infoid": 1067233, "ip": "", "isanchordig": 1, "ischecked": 1, "isdelete": 0, "isneo": 1, "mark": "", "name": "", "note": "\u6211\u662f\u7f8e\u56fd\u4e2d\u4e16\u7eaa\u5386\u53f2\u4e0a\u7684\u535a\u58eb\u5b66\u751f\u3002\u6211\u7684\u8bb2\u8bdd\u6d89\u53ca\u7f8e\u56fd\u7684\u5386\u53f2\u535a\u58eb\u8282\u76ee\u3002\u5982\u679c\u4f60\u8ba4\u4e3a\u8fd9\u662f\u865a\u4f2a\u7684\uff0c\u90a3\u5c31\u8fd9\u6837\u3002\n \u4eba\u6587\u535a\u58eb\u4ecd\u7136\u662f\u4e00\u4e2a\u804c\u4e1a\u5b66\u4f4d\uff0c\u4e3a\u5b66\u751f\u505a\u597d\u5b66\u79d1\u804c\u4e1a\u6559\u5b66\uff0c\u800c\u4e14\u6ca1\u6709\u5de5\u4f5c\u3002\u5386\u53f2\u4e0a\u6ca1\u6709\u535a\u58eb\u5b66\u4f4d\u3002\n \u770b\uff0c\u6211\u5f97\u5230\u5b83\u3002\u5728Askhistorians\u7684\u6240\u6709\u4eba\u4e2d\uff0c\u6211\u5f97\u5230\u5b83\u3002\u4f60\u4e0d\u8981\uff06\uff0339; t\uff06\uff0334;\u7231\u60c5\u5386\u53f2;\uff06\uff0334;\u4f60\u559c\u6b22\u4f60\u7075\u9b42\u4e2d\u7684\u4e00\u5207\u7684\u5386\u53f2\uff0c\u4f60\u8bfb\u51fa\u4f60\u7684\u5b50\u573a\u5916\u7684\u5386\u53f2\u4e66\u7c4d\u4ee5\u83b7\u5f97\u4e50\u8da3\uff0c\u4f60\u82b1\u4e8690\uff05\u7684\u7a7a\u95f2\u65f6\u95f4\u8bd5\u56fe\u8ba9\u5176\u4ed6\u4eba\u5c3d\u53ef\u80fd\u591a\u5730\u7231\u5386\u53f2\uff0c\u751a\u81f3\u56db\u5206\u4e4b\u4e00\u751a\u81f3\u662f\u4e00\u4e2a\u5b63\u5ea6\u53ea\u662f\u60f3\u4e00\u60f3\u51e0\u5206\u949f\uff0c\u4f60\u7684\u4e00\u5929\u662f\u505a\u51fa\u7684\u3002\u6211\u5f97\u5230\u5b83\u3002\n \u4f60\u6709\u6559\u6388\uff06\uff0339; S\u544a\u8bc9\u4f60\u4f60\uff06\uff0339;\u91cd\u590d\u6559\u5b66\u5b66\u9662\u3002\u4f60\u6709\u4e00\u4f4d\u5411\u4f60\u4fdd\u8bc1\u4f60\u7684\u6559\u6388\uff06\uff0339;\u91cd\u65b0\u51fa\u73b0\u5e76\u5c06\u6210\u529f\u3002\u4f60\u6709\u4e00\u4e2a\u521a\u521a\u83b7\u5f97\u535a\u58eb\u5b66\u4f4d\u7684\u670b\u53cb\uff0c\u5e76\u5728\u52a0\u5dde\u5927\u5b66\u6d1b\u6749\u77f6\u5206\u6821\u5de5\u4f5c\u3002\u4f60\u4e0d\u9700\u8981\u4e00\u4e2aR1\u5b66\u6821;\u4f60\u53ea\u662f\u60f3\u6559\u5bfc\u4f60\uff06\uff0339; D\u4e0e\u4e00\u4e2a\u5c0f\u76844\u5e74\u7684\u81ea\u7531\u827a\u672f\u5927\u5b66\u804c\u4f4d\u826f\u597d\u3002\n \u60a8\uff06\uff0339;\u5728\u7a7a\u6c14\u5e8a\u57ab\u4e0a\u7761\u4e86\u56db\u4e2a\u6216\u516d\u4e2a\u751f\u5b58\u4e00\u5e74\uff0c\u5e76\u4eab\u53d7\u8d2b\u56f0\u5377\u997c\uff0c\u5e76\u5de5\u4f5c\u4e09\u4e2a\u517c\u804c\u5de5\u4f5c\uff0c\u4ee5\u652f\u4ed8\u672c\u79d1\u751f\u3002\u4f60\uff06\uff0339;\u518d\u62c5\u5fc3\u66f4\u591a\u3002\u54ce\u5440\uff0c\u4e00\u4e2a\u535a\u58eb\u5b66\u4f4d\u770b\u8d77\u6765\u50cf\u4e00\u4e2a\u85aa\u6c34\u3002\u6216\u8005\u4e5f\u8bb8\u4f60\u6709\u613f\u610f\u4ecb\u5165\u7684\u7236\u6bcd\u6216\u7956\u7236\u6bcd\uff0c\u4e5f\u8bb8\u4f60\u6ca1\u6709\u4ece\u672c\u79d1\u8d37\u6b3e\u507f\u8fd8\u3002\n \u5b83\u5e76\u4e0d\u91cd\u8981\u3002\u4f60\u4e0d\u662f\u4f8b\u5916\u3002\u4e0d\u8981\u5728\u5386\u53f2\u6216\u4efb\u4f55\u76f8\u5173\u9886\u57df\u83b7\u5f97\u535a\u58eb\u5b66\u4f4d\u3002\n \u6ca1\u6709\u5de5\u4f5c\u3002\u5386\u53f2\u5c31\u4e1a\u5e02\u573a\u4e8e2008\u5e74\u5760\u6bc1\uff0c2011-12\u6b21\u6062\u590d\u4e86\u4e00\u70b9......\u7136\u540e\u6d88\u5931\u4e86\u3002\u8fd9\u662faha\u7684\u56fe\u8868\u3002 300\u4e2a\u5168\u804c\u5de5\u4f5c\uff0c1200\u4e2a\u65b0\u535a\u58eb\u3002\u52a0\u4e0a\u524d\u51e0\u5e74\u7684\u6240\u6709\u4eba\u6ca1\u6709\u5de5\u4f5c\uff0c\u5e76\u4e14\u5177\u6709\u6bd4\u4f60\u66f4\u591a\u7684\u51fa\u7248\u7269\u3002\u52a0\u4e0a\u6240\u6709\u5f53\u524d\u7684\u6355\u9c7c\u6559\u6388\uff0c\u4ed6\u4eec\u62e5\u6709\u66f4\u591a\u7684\u51fa\u7248\u7269\uff0c\u8fde\u63a5\u548c\u7ecf\u9a8c\u3002\u51cf\u53bb\u4e0d\u5728\u60a8\u9886\u57df\u7684\u6240\u6709\u5de5\u4f5c\u3002\u51cf\u53bb\u7528\u4e8e\u5728\u5176\u4ed6\u5730\u65b9\u6709\u6743\u7684\u9ad8\u7ea7\u6559\u6388\u4e13\u95e8\u7684\u6240\u6709\u5de5\u4f5c\u3002\u4f60\u7684\u6a21\u7cca\u5b50\u573a\u4e0d\u4f1a\u62ef\u6551\u4f60\u3002\u535a\u7269\u9986\u5de5\u4f5c\u53ef\u80fd\u66f4\u5177\u7ade\u4e89\u529b\uff0c\u60a8\u4e0d\u4f1a\u6709\u7ecf\u9a8c\u6216\u6280\u80fd\u3002\u6ca1\u6709\u5de5\u4f5c\u3002 \n\u56e0\u6b64\uff0c\u60a8\u7684\u5de5\u4f5c\u9009\u9879\u662f\u5783\u573e\u3002\u517c\u5bb9\u5de5\u4f5c\u662f\u4e0d\u53ef\u884c\u7684\u85aa\u916c\uff0c\u6ca1\u6709\u798f\u5229\uff0c\u53ef\u518d\u751f\u4f46\u4e0d\u80fd\u4fdd\u8bc1\uff0c\u5e76\u4e14\u5373\u4f7f\u6d89\u53ca\u66f4\u9ad8\u7684\u8bfe\u7a0b\u8bfe\u7a0b\uff0c\u4e5f\u6d88\u5931\u4e86\u3002 \uff06\uff0334; postdocs\uff06\uff0334;\u6709\u4e00\u4e2a\u4efb\u671f\u8d5b\u9053\u5de5\u4f5c\u7684\u6240\u6709\u8d23\u4efb\u4e3a\u4e00\u534a\u7684\u5de5\u8d44\uff08\u5982\u679c\u4f60\uff06\uff0339;\u5e78\u8fd0\u7684\u8bdd\uff09\uff0c\u53ef\u80fd\u6ca1\u6709\u597d\u5904\uff0c\u54e6\uff0c\u662f\u7684\uff0c\u4f60\u53ef\u4ee5\u57281  -  3\u5e74\u5185\u518d\u6b21\u5bfb\u627e\u5de5\u4f5c\u3002\u4e16\u754c\u7684\u67d0\u4e2a\u5730\u65b9\u3002\u8fd9\u662f\u4e00\u4e2a\u771f\u6b63\u7684\u804c\u4f4d\u5e7f\u544a\u3002\u4e8b\u5b9e\u4e0a\uff0c\u60a8\u7684\u5de5\u4f5c\u9009\u62e9\u5783\u573e\u3002\n \uff06\uff0339;\u5bf9\u5973\u6027\u66f4\u7cdf\u7cd5\u3002\u56e0\u7d20\u5305\u62ec\uff1a\u5b66\u751f\u5bf9\u6d6a\u6f6e\u66f4\u9ad8\u5ea6\u7684\u7537\u6027\u6559\u6388\u66f4\u9ad8\u3002\u5987\u5973\u6b63\u5728\u793e\u4ea4\u52b3\u52a8\uff0c\u81f4\u529b\u4e8e\u60c5\u7eea\u52b3\u52a8\u548c\uff06\uff0334;\u8bf7\u6ce8\u610f\u6ca1\u6709\u5176\u4ed6\u4eba\u6b63\u5728\u505a\u7684\u4efb\u52a1\uff06\uff0334;\u5e76\u8fd9\u6837\u505a\uff0c\u56e0\u4e3a\u4ed6\u4eec\u5fc5\u987b\u8981\u5b8c\u6210\u3002\u5973\u6027\u4f7f\u7528\u4ea7\u5047\u6210\u4e3a\u6bcd\u4eb2;\u7236\u4eb2\u4f7f\u7528\u4eb2\u5b50\u4f11\u5047\u8fdb\u884c\u7814\u7a76\u3002\u75af\u72c2\u7684\u6027\u9a9a\u6270\u7387\uff0c\u5305\u62ec\u6bd5\u4e1a\u751f\u548ceni\u7ba1\u7406\u5458\uff0c\u79ef\u6781\u4fdd\u62a4\u7537\u6027\u6559\u6388\u3002\u6bcf\u4e2a\u9636\u68af\u7684\u5973\u6027\u6559\u5e08\u8dcc\u843d\u7684\u767e\u5206\u6bd4\u662f\u7531\u4e8e\u6240\u6709\u8fd9\u4e9b\u56e0\u7d20\u6240\u5c48\u670d\u7684\u804c\u4e1a\u9636\u68af\u3002\u6211\u4e0d\u77e5\u9053\u5bf9\u989c\u8272\u6216\u5987\u5973\u7684\u989c\u8272\u6216\u5987\u5973\u7684\u7537\u6027\uff08\u6216\u5176\u4ed6\u6027\u522b\u6559\u5e08\uff09\u7684\u7814\u7a76\uff0c\u4f46\u6211\u60f3\u8c61\u5b83\u5e76\u4e0d\u662f\u4efb\u4f55\u4eba\u7684\u597d\u7167\u7247\u3002\n  \u5386\u53f2\u6ce8\u518c\u6b63\u5728\u5d29\u6e83\uff0c\u56e0\u4e3a\u5b66\u751f\u5728\u9ad8\u4e2d\u62c5\u4efb\u5386\u53f2\u8981\u6c42\uff08\u5982\u679c\u751a\u81f3\u4ecd\u7136\u662f\u4e00\u4e2a\uff09\u4f5c\u4e3aGPA\u63d0\u5347\uff0c\u66f4\u5f3a\u5927\u7684\u5927\u5b66\u5e94\u7528\u7a0b\u5e8f\u7684AP /\u53cc\u91cd\u5165\u5b66\uff0c\u5e76\u91ca\u653e\uff08\u7f8e\u56fd\uff09UNI\u7684\u8bfe\u5802\u9009\u9879\u3002\n \u5b66\u6821\u6ca1\u6709\u53d6\u4ee3\u9000\u4f11\u6559\u5e08\u3002\u4ed6\u4eec\u5c06\u4efb\u804c\u7ebf\u8f6c\u6362\u4e3a\u8f85\u52a9\u70b9\uff0c\u6216\u8005\u66f4\u5e38\u89c1\uff0c\u53ea\u9700\u8981\u73b0\u6709\u7684\u6559\u5e08\u6559\u6388\u66f4\u591a\u8bfe\u7a0b\u3002\n \u66f4\u8001\u7684\u6559\u5e08\u53ef\u4ee5\uff06\uff0339;\u4e0d\u8d77\uff0c\u6216\u8005\u4e0d\u60f3\u8981\u3002\u751a\u81f3\u88ab\u95ee\u53ca\u4ed6\u4eec\u662f\u5426\u8ba1\u5212\u9000\u4f11\uff0c\u751a\u81f3\u88ab\u95ee\u53ca\u66f4\u8001\u7684\u6559\u5e08\uff0c\u5373\u4f7f\u5b83\u4eec\u662f\u5426\u65e0\u6cd5\u8fdb\u884c\u6559\u5b66\u8bfe\u7a0b\u3002\n \u5386\u53f2\u535a\u58eb\u4e0d\u4f1a\u8ba9\u4f60\u5bf9\u5176\u4ed6\u5de5\u4f5c\u66f4\u5177\u5438\u5f15\u529b\u3002\u60a8\u5c06\u5177\u6709\u60ca\u4eba\u7684\u8f6f\u6280\u80fd\uff0c\u4f46\u516c\u53f8\u5e0c\u671b\u786c\u76d8\u3002\u4e0d\u6b62\u4e8e\u6b64\uff0c\u4ed6\u4eec\u60f3\u8981\u76f4\u63a5\u7ecf\u9a8c\uff0c\u4f60\u4e0d\u4f1a\u6709\u3002\u535a\u58eb\u53ef\u80fd\u8ba9\u4f60\u56de\u5f52\u548c\uff0334;\u8fc7\u5ea6\u8d44\u683c\uff0c\uff06\uff0334;\u6216\u8005\u81ea\u52a8\u53d6\u6d88\u8d44\u683c\uff0c\u56e0\u4e3a\u516c\u53f8/\u5b66\u533a\u89c4\u5219\u9700\u8981\u66f4\u9ad8\u7684PHDS\u85aa\u6c34\u3002\n \u5728\u5b66\u672f\u754c\u7684\u5176\u4ed6\u5de5\u4f5c\uff1f\u8001\u5b9e\u8bf4\uff0c\u4f60\u662f\u5426\u8ba4\u4e3a\u5176\u4ed61200\u4e2a\u65b0\u535a\u58eb\u8d62\u5f97\u4e86\u80b2\u7a7a\u4e2d\u95f4\u7684\u7814\u7a76\u56fe\u4e66\u9986\u961f\uff1f\u4f60\u771f\u7684\u89c9\u5f97\u4ed6\u4eec\u4e2d\u7684\u4e00\u4e9b\u4eba\u8d62\u5f97\u4e86\uff06\uff0339; t\u6709mlis\u5b66\u4f4d\uff0c\u5e76\u82b1\u4e86\u4ed6\u4eec\u7684\u535a\u58eb\u65f6\u95f4\u5f97\u5230\u7279\u6b8a\u7684\u6536\u85cf\u4f53\u9a8c\u5417\uff1f\u4f60\u60f3\u5728\u4e00\u4efd\u5de5\u4f5c\u4e2d\u89c4\u5212\u4f60\u7684\u535a\u58eb\uff0c\u6bcf\u5e74\u53ef\u80fd\u6709\u4e00\u4e2a\u5f00\u653e\u5417\uff1f\u54e6\uff01\u6216\u8005\u60a8\u53ef\u4ee5\u5728\u5b66\u672f\u7ba1\u7406\u4e2d\u5de5\u4f5c\uff0c\u5e76\u5c3d\u53ef\u80fd\u559c\u6b22\u5e2e\u52a9\u5f53\u524d\u7684\u6bd5\u4e1a\u751f\u72af\u6709\u4f60\u7684\u9519\u8bef\u3002 \n\u4f60\u4e0d\u662f\u4f8b\u5916\u3002 50\uff05\u7684\u4eba\u6587\u5b66\u751f\u5728\u83b7\u5f97\u535a\u58eb\u4e4b\u524d\u8f8d\u5b66\u3002 50\uff05\u7684\u535a\u58eb\u5b66\u751f\u627f\u8ba4\u906d\u53d7\u6291\u90c1\u75c7\uff0c\u7126\u8651\u548c\u5176\u4ed6\u5fc3\u7406\u5065\u5eb7\u95ee\u9898\uff0850\uff05\u7684\u535a\u58eb\u5b66\u751f\u6492\u8c0e\uff09\u3002\u5b66\u672f\u754c\u7684\u4eba\u6bd4\u8df3\u4f1e\u8005\u66f4\u591a\u3002\u8f8d\u5b66\u6216\u7559\u5728\uff0c\u4f60\uff06\uff0339; LL\u5df2\u7ecf\u82b1\u4e861-10\u5c81\uff0c\u6ca1\u6709\u5efa\u7acb\u5de5\u4f5c\u7ecf\u9a8c\uff0c\u85aa\u6c34\uff0c\u9000\u4f11\u50a8\u84c4\uff0c\u6c38\u4e45\u5c45\u4f4f\uff0c\u6b63\u5e38\u7684\u65f6\u95f4\u8868\uff0c\u7231\u597d\u3002\u7236\u6bcd\u6216\u914d\u5076\u72ec\u7acb\u5bcc\u88d5\uff1f\u6781\u597d;\u518d\u6b21\u4eab\u53d7\u5386\u53f2\u60a0\u95f2\u5236\u4f5c\u5386\u53f2\u535a\u58eb\uff06\uff0339;\u804c\u4e1a\u3002\n \u60a8\u7684\u8ba1\u5212\u4e0d\u662f\u4f8b\u5916\u3002\u7f8e\u56fd\u548cu.k\u7684\u8ba1\u5212\u76ee\u524d\u6b63\u5728\u6388\u6743\u5bf9\u5b66\u751f\u8fdb\u884c\u989d\u5916\u8d44\u91d1\u7684\u627f\u8bfa\u3002\u5927\u5b66\u6b63\u5728\u6539\u53d8\u622a\u6b62\u65e5\u671f\uff0c\u5c06\u5f53\u524d\u7684\u5b66\u751f\u63a8\u51fa\u95e8\uff0c\u6ca1\u6709\u8db3\u591f\u7684\u65f6\u95f4\u6765\u5b8c\u6210\u4ed6\u4eec\u9700\u8981\u7684\u7814\u7a76\u6216\u83b7\u5f97\u4ed6\u4eec\u7684\u6280\u80fd\uff0c\u4ed6\u4eec\u9700\u8981\u4efb\u4f55\u7c7b\u578b\u7684\u5386\u53f2\u804c\u4e1a\u5de5\u4f5c\uff0c\u751a\u81f3\u662f\u4ed6\u4eec\u60f3\u8981\u4e0d\u540c\u7684\u5de5\u4f5c\uff0c\u65b9\u9762\u7684\u7ecf\u9a8c\u8fd9\u4efd\u5de5\u4f5c\u3002\n \u6211\u53eb\u8fd9\u4e2a\u8bba\u6587\uff06\uff0334\u7684\u7c97\u7565\u8349\u6848;\u535a\u58eb\u535a\u58eb\u5c06\u6467\u6bc1\u4f60\u7684\u672a\u6765\uff0c\u5403\u4f60\u7684\u5b69\u5b50\u3002\uff06\uff0334;\u4e0d\uff0c\u8fd9\u4e0d\u662f\u8981\u7ffb\u8f6c\u7684\u4e1c\u897f\u3002\u5386\u53f2\u4e0a\u6ca1\u6709\u535a\u58eb\u5b66\u4f4d\u3002\n ...\u4f46\u6211\u4e5f\u5f97\u5230\u5b83\uff0c\u6211\u77e5\u9053\u5bf9\u4f60\u4eec\u4e2d\u7684\u4e00\u4e9b\u4eba\u6765\u8bf4\uff0c\u7edd\u5bf9\u6ca1\u6709\u6211\u6216\u4efb\u4f55\u4eba\u90fd\u53ef\u4ee5\u8bf4\u963b\u6b62\u4f60\u505a\u51fa\u5de8\u5927\u7cdf\u7cd5\u7684\u51b3\u5b9a\u3002\u800c\u4e14\u6211\u77e5\u9053\u90a3\u4e2a\u5c0f\u7ec4\u4e2d\u7684\u4e00\u4e9b\u4eba\u6765\u81ea\u672c\u79d1\u5b66\u6821\uff0c\u4e5f\u8bb8\u6ca1\u6709\uff06\uff0339; T\u6709\u522b\u4eba\u7684\u58f0\u671b\uff0c\u6216\u8005\u4e86\u89e3\u7533\u8bf7\u6bd5\u4e1a\u751f\u5b66\u6821\u5e76\u83b7\u5f97\u5b83\u7684\u6559\u6388\u3002\u6240\u4ee5\u5728\u8bc4\u8bba\u4e2d\uff0c\u6211\u7ed9\u51fa\u4e86\u6211\u5e0c\u671b\u7684\u5efa\u8bae\uff0c\u6211\u5e0c\u671b\u6211\u4e0d\u4f1a\u4f7f\u7528\u3002\n \u8fd9\u6740\u4e86\u6211\u5199\u4f5c\u3002\u6211\u559c\u6b22\u5386\u53f2\u3002\u6211\u82b1\u4e86\u6211\u7684\u7a7a\u95f2\u65f6\u95f4\u8c08\u8bbaReddit\u7684\u5386\u53f2\u3002\u6211\u53ef\u4ee5\u901a\u8fc7\u6211\u627e\u5230\u5927\u91cf\u7684\u65e7\u5e16\u5b50\u8bf4\u5386\u53f2\u535a\u58eb\u7684\u6240\u6709\u539f\u56e0\u90fd\u5f88\u597d\u3002\u4e0d\u3002\u5b83\u6ca1\u6709\u3002\u4f60\u4e0d\u662f\u4f8b\u5916\u3002\u60a8\u7684\u8ba1\u5212\u4e0d\u662f\u4f8b\u5916\u3002\u4e0d\u8981\u5728\u4eba\u6587\u79d1\u5b66\u4e2d\u83b7\u5f97\u535a\u58eb\u5b66\u4f4d\u3002 ", "note_en": "I am a PhD student in medieval history in the U.S. My remarks concern History PhD programs in the U.S. If you think this is hypocritical, so be it.\n The humanities PhD is still a vocational degree to prepare students for a career teaching in academia, and there are no jobs. Do not get a PhD in history.\n Look, I get it. Of all the people on AskHistorians,  I get it. You don&#39;t &#34;love history;&#34; you love history with everything in your soul and you read history books outside your subfield for fun and you spend 90% of your free time trying to get other people to love history as much as you do, or even a quarter as much, or even just think about it for a few minutes and your day is made. I get it.\n You have a professor who&#39;s told you you&#39;re perfect to teach college. You have a professor who has assured you you&#39;re the exception and will succeed. You have a friend who just got their PhD and has a tenure track job at UCLA. You don&#39;t need an R1 school; you just want to teach so you&#39;d be fine with a small, 4-year liberal arts college position.\n You&#39;ve spent four or six subsistence-level years sleeping on an air mattress and eating poverty burritos and working three part-time jobs to pay for undergrad. You&#39;re not worried about more. Heck, a PhD stipend looks like a pay  raise. Or maybe you have parents or grandparents willing to step in, maybe you have no loans from undergrad to pay back.\n It doesn&#39;t matter.  You are not the exception. Do not get a PhD in history or any of the allied fields.\n There are no jobs. The history job market crashed in 2008, recovered a bit in 2011-12...and then disappeared.  Here is the graph from the AHA. 300 full-time jobs, 1200 new PhDs. Plus all the people from previous years without jobs and with more publications than you. Plus all the current profs in crappy jobs who have more publications, connections, and experience than you. Minus all the jobs not in your field. Minus all the jobs earmarked for senior professors who already have tenure elsewhere. Your obscure subfield will not save you. Museum work is probably more competitive and you will not have the experience or skills. There are no jobs.\n Your job options, as such, are garbage. Adjunct jobs are unliveable pay, no benefits, renewable but not guaranteed, and *disappearing even though a higher percentage of courses are taught by adjuncts. &#34;Postdocs&#34; have all the responsibilities of a tenure track job for half the pay (if you&#39;re lucky), possibly no benefits, and oh yeah, you get to look for jobs all over again in 1-3 years. Somewhere in the world.  This is a real job ad. Your job options are, in fact, garbage.\n It&#39;s worse for women. Factors include: students rate male professors more highly on teaching evals. Women are socialized to take on emotional labor and to &#34;notice the tasks that no one else is doing&#34; and do them because they have to be done. Women use maternity leave to be mothers; fathers use paternity leave to do research. Insane rates of sexual harassment, including of grad students, and uni admins that actively protect male professors. The percentage of female faculty drops for each step up the career ladder you go due to all these factors. I am not aware of research for men of color or women of color (or other-gender faculty at all), but I imagine it&#39;s not a good picture for anyone.\n  History enrollments are crashing because students take their history requirement (if there even still is one) in high school as AP/dual enrollment for the GPA boost, stronger college app, and to free up class options at (U.S.) uni.\n Schools are not replacing retiring faculty. They convert tenure lines to adjunct spots, or more commonly now, just require current faculty to teach more classes.\n Older faculty can&#39;t afford to retire, or don&#39;t want to. Tenure protects older faculty from even being asked if they plan to retire, even if they are incapable of teaching classes anymore.\n A history PhD will not make you more attractive for other jobs. You will have amazing soft skills, but companies want hard ones. More than that, they want direct experience, which you will not have. A PhD might set you back as &#34;overqualified,&#34; or automatically disqualified because corporate/school district rules require a higher salary for PhDs.\n Other jobs in academia? Do you honestly think that those other 1200 new PhDs won&#39;t apply for the research librarianship in the middle of the Yukon? Do you really think some of them won&#39;t have MLIS degrees, and have spent their PhD time getting special collections experience? Do you want to plan your PhD around a job for which there might be one opening per year? Oh! Or you could work in academic administration, and do things like help current grad students make the same mistakes you did.\n You are not the exception. 50% of humanities students drop out before getting their PhD. 50% of PhD students admit to struggling with depression, anxiety, and other mental health issues (and 50% of PhD students are lying). People in academia drink more than  skydivers. Drop out or stay in, you&#39;ll have spent 1-10 years not building job experience, salary, retirement savings, a permanent residence, a normal schedule, hobbies. Independently wealthy due to parents or spouse? Fabulous; have fun making history the  gentlemen&#39;s profession again.\n Your program is not the exception. Programs in the U.S. and U.K. are currently reneging on promises of additional funding to students  in progress on their dissertations. Universities are changing deadlines to push current students out the door without adequate time to do the research they need or acquire the skills they&#39;d need for any kind of historical profession job or even if they want a different job, the side experience for that job.\n I called the rough draft of this essay &#34;A history PhD will destroy your future and eat your children.&#34; No. This is not something to be flip about.  Do not get a PhD in history.\n ...But I also  get it, and I know that for some of you, there is absolutely nothing I or anyone else can say to stop you from making a colossally bad decision. And I know that some of you in that group are coming from undergrad schools that maybe don&#39;t have the prestige of others, or professors who understand what it takes to apply to grad school and get it. So in comments, I&#39;m giving advice that I hope with everything I am you will not use.\n This is killing me to write. I love history. I spend my free time  talking about history on reddit. You can find plenty of older posts by me saying all the reasons a history PhD is fine. No. It&#39;s not.  You are not the exception. Your program is not the exception. Do not get a PhD in the humanities.", "posttime": "2021-06-22 00:49:18", "source_domain": "news.ycombinator.com", "source_name": "Hacker News", "tags": "\u5f97\u5230,history", "title": "\u4e3a\u4ec0\u4e48\u4f60\u4e0d\u5e94\u8be5\u5f97\u5230\u5386\u53f2\u535a\u58eb ", "title_en": "Why You Should Not Get a History PhD", "transed": 1, "url": "https://www.reddit.com/r/AskHistorians/comments/96yf9h/monday_methods_why_you_should_not_get_a_history/", "via": "", "real_tags": ["\u5f97\u5230", "history"]}]