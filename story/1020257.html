<!doctype html><html lang="zh-hans"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Openwifi：基于软件无线电的LinuxMac80211兼容全栈802.11/Wi-Fi设计</title><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"><link rel="stylesheet" href="/img/css.css?random="><link data-rh="true" rel="icon" href="/img/favicon.ico"/><script data-ad-client="ca-pub-6067137220025946" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script type="text/javascript" src="https://platform-api.sharethis.com/js/sharethis.js#property=5effb96910009800120b8d4d&product=inline-share-buttons" async="async"></script>
<script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?03c1a0f31299b4a2fbb83c34d6beaac9";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script></head><body><div id="my_header"><div class="container"><nav class="navbar navbar-expand-lg"><a class="navbar-brand" href="/"><img alt="diglog" src="/img/logo.v1.gif" class="rounded-sm"></a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarNavAltMarkup"><div class="navbar-nav"></div></div></nav></div></div><div class="container"><div id="my_content"><h1 class="page_narrow">Openwifi：基于软件无线电的LinuxMac80211兼容全栈802.11/Wi-Fi设计</h1><div class="row"><div class="col-lg-12 col-12"><div class="my_story_list_item shadow p-3 mb-5 bg-white rounded"><div class="story_page_pub_time page_narrow">2020-08-26 12:17:10</div><div class="story_img_container"><a href="http://img.diglog.com/img/2020/8/6fd6b146091f62793221b2b5ecf92e68.jpeg"><img src="http://img.diglog.com/img/2020/8/6fd6b146091f62793221b2b5ecf92e68.jpeg" class="img-fluid my_story_img" onerror="this.style.display='none'"></a></div><div class="page_narrow text-break page_content"><p>该存储库包括Linux驱动程序和软件。Openwifi-HW存储库采用FPGA设计。[项目文件]。</p><p>Openwifi代码有双许可证。AGPLv3是开源许可证。有关非开源许可证，请联系Filip.Louagie@UGent.be。Openwifi项目还利用了一些第三方模块。用户有责任根据用途/用途检查并遵循这些模块的许可证。您可以在ADI公司找到有关此复合许可条件的示例说明。[如何贡献]。</p><p>802.11n MCS 0~7(目前仅PHY RX。(802.11n的全面系统支持即将推出)。</p><p>支持的SDR平台：(如果您的新板不在列表中，请查看移植指南)。</p><p>没有冲浪板吗？或者你喜欢JTAG引导而不是SD卡？查看我们的试验台w-iLab.t教程。</p><p>将openwifi主板特定的img文件(从表中)刻录到SD卡中(&#34；用磁盘映像写入器打开&#34；)。或解压后的&#34；dd&34；命令)。SD卡有两个分区：boot和rootfs。您需要通过在计算机上的操作，根据您拥有的主板在引导分区中配置正确的文件：</p><p>将openwifi/zynqmp-common/Image(zcu102板)或openwifi/zynq-common/uImage(其他板)复制到引导分区的基本目录。</p><p>将两个天线连接到RXA/TXA端口。将主板配置为SD卡引导模式(查看主板手册)。将SD卡插入电路板。通电。</p><p>使用密码openwifi从您的PC(PC以太网应具有IP 192.168.10.1)登录板。</p><p>在您的设备(电话/笔记本电脑等)上看到openwifi&34；SSID后，将其连接。浏览器到192.168.13.1，您应该会看到由板载Web服务器托管的网页。</p><p>注意1：如果您的设备不支持5 GHz(Ch44)，请更改主板上的hostapd-openwifi.conf并重新运行fosdem.sh。</p><p>注2：大约2小时后，维特比解码器将停止(Xilinx评估许可证)。如果发生这种情况，只需重新打开电路板的电源即可。(如果&#34；./sdrctl dev sdr0 get reg RX 20&#34；的输出始终相同，则表示解码器暂停)。</p><p>Sudo sysctl-w net.ipv4.ip_ward=1sudo iptables-t nat-A POSTROUTING-o ETHY-j MASQUERADEsudo IP route add 192.168.13.0/24 via 192.168.10.122 dev ethX。</p><p>EthX是连接主板的PC网卡名称。Ethy是连接互联网的PC网卡名称。</p><p>该主板实际上是一台运行hostapd以通过Wi-Fi网络接口(NIC)提供Wi-Fi AP功能的Linux/Ubuntu计算机。网卡采用Openwifi-HW FPGA设计实现。我们在板上使用术语&#34；来表示命令应该在ssh登录到板之后执行。&#34；在PC&#34；上表示命令应该在PC上运行。</p><p>Linux原生Wi-Fi工具/应用程序(iwconfig/ifconfig/iwlist/iw/hostapd/wpa_supplicant/etc)可以像商业Wi-Fi芯片一样在openwifi网卡上运行。</p><p>Sdrctl是访问openwifi驱动程序/fpga的专用工具，详细信息请查看doc目录。</p><p>由于预先构建的SD卡映像可能没有最新的错误修复/更新，因此建议更新板载的FPGA位流。</p><p>安装vivado/sdk 2018.3(如果不需要生成新的fpga码流，webpack版本无License即可)。</p><p>从openwifi-hw获取最新的FPGA比特流，生成BOOT.BIN并通过SSH通道将其传输到板上：$OPENWIFI_DIR/USER_SPACE/GET_FPGA.SH$OPENWIFI_DIRFor Zynq7000：$OPENWIFI_DIR/USER_SPACE/BOOT_BIN_GEN.sh$OPENWIFI_DIR$XILINX_DIR$BOAD_NAME对于Zynq MPSoC(如ZCU102 board)：$OPENWIFI_DIR/user_space/boot_bin_gen_zynqmp.sh$OPEQMPSoC。</p><p>板载：将BOOT.BIN放入引导分区。重新打开电路板以加载新的FPGA位流。</p><p>由于预先构建的SD卡映像可能没有最新的错误修复/更新，因此建议更新板载驱动程序。</p><p>准备ADI Linux内核源代码(只需运行一次)：$OPENWIFI_DIR/USER_SPACE/Prepare_kernel.sh$OPENWIFI_DIR$XILINX_DIR ARCH_BIT(对于Zynq 7000，ARCH_BIT应该是32，对于Zynq MPSoC，ARCH_BIT应该是64)。</p><p>编译最新的openwifi驱动程序$OPENWIFI_DIR/Driver/make_all.sh$OPENWIFI_DIR$XILINX_DIR ARCH_BIT(对于Zynq 7000，ARCH_BIT应该是32，对于Zynq MPSoC，ARCH_BIT应该是64)</p><p>通过ssh通道将驱动程序文件复制到主板，现在您可以在主板上使用wgd.sh加载新的openwifi驱动程序。</p><p>FPGA和板载驱动程序更新脚本。/sdcard_boot_update.sh$board_name(上面的命令下载uImage、BOOT.BIN和devicetree.dtb，然后将它们复制到引导分区。记住重新打开电源)./wgd.sh remote(上面的命令下载驱动程序文件，并启动sdr0)。</p><p>将SD卡插入您的Linux PC。找到挂载点(有两个子目录boot和rootfs)和设置环境变量(使用绝对路径)：</p><p>将您的主板配置为SD卡引导模式(查看主板手册)。将SD卡插入电路板。通电。</p><p>使用一次性密码ADALUAL从您的PC(PC以太网应为IP 192.168.10.1)登录板。</p><p>在PC上为您的主板设置路由/NAT--此互联网连接对于安装后/配置非常重要。</p><p>Sudo sysctl-w net.ipv4.ip_ward=1sudo iptables-t nat-A POSTROUTING-o ETHY-j MASQUERADEsudo IP route add 192.168.13.0/24 via 192.168.10.122 dev ethX。</p><p>EthX是连接主板的PC网卡名称。Ethy是连接互联网的PC网卡名称。</p><p>在板上运行一次脚本以完成安装后配置/配置(之后，密码变为openwifi)。</p><p>Openwifi仅应用OFDM作为其调制方案，因此，它不向后兼容802.11b客户端或操作模式。在信标传输、连接建立和健壮通信期间通常是这种情况。</p><p>作为此问题的解决方案，只有分别与使用hostapd/wpa_requicant用户空间程序实例化的AP/客户端通信时，才能完全控制openwifi。</p><p>对于hostapd程序，可以使用配置命令(即SUPPORTED_RATES、BASIC_RATES)抑制802.11b速率，并提供了示例配置文件(即hostapd-openwifi.conf)。这方面的一个小警告来自全MAC Wi-Fi卡，因为它们必须在设备驱动程序级别实现NL80211_TXRATE_传统NetLink处理程序。</p><p>另一方面，客户端的WPA_Supplicant程序(商用Wi-Fi加密狗/主板)无法在2.4 GHz频段抑制开箱即用的802.11b速率，因此在连接openwifi(仅限OFDM)时会出现问题。客户端应该使用打补丁的WPA_PUPICANT。</p><p>本节通过显示openwifi和ADI参考设计之间的差异来说明移植工作。Openwifi基于HDL参考设计的f61d9707(2019 R1)。</p><p>开放式模块设计&#34；，您将看到openwifi和参考设计之间的区别。在&#34；图表&#34；和&#34；地址编辑器&#34；中都有。</p><p>挂接到ARM总线的FPGA块的地址/中断应放入/对齐到设备树文件openwifi/kernel_boot/boards/zc706_fmcs2/devicetree.dts.。Linux将在引导时解析devicetree.dtb，以了解所连接设备的信息(在我们的示例中为FPGA块)。</p><p>我们使用DTC命令将ADI公司Linux映像中的devicetree.dtb转换成devicetree.dts，然后根据我们对参考设计添加/修改的内容进行修改。</p><p>请学习[从头开始构建openwifi Linux IMG]中的脚本，了解我们如何生成devicetree.dtb、BOOT.BIN和Linux内核uImage，并将它们组合在一起构建完整的SD卡镜像。</p><p>任何对openwifi项目的使用都应包括引文(Bibtex示例)，从而导致出版：</p><p>@https://github.com/open-sdr/openwifi}，{openwifigithub，作者={贤俊焦伟刘迈迈哈里}，标题={开源IEEE802.11/Wi-Fi基带芯片/FPGA设计}，url={openwifigithub Year={2019年}，}</p></div><div id="story_share_this"><div class="sharethis-inline-share-buttons"></div></div><div class="text-break sotry_link page_narrow"><a target="_blank" href="https://github.com/open-sdr/openwifi">https://github.com/open-sdr/openwifi</a></div><div class="story_tags page_narrow"><button type="button" class="btn btn-light my_tag"><a href="/tag/全栈/">#全栈</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/软件/">#软件</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/linux/">#linux</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/设计/">#设计</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/wifi/">#wifi</a></button></div></div><div class="shadow p-3 mb-5 bg-white rounded clearfix"><div class="container"><div class="row"><div class="col-sm"><div><a target="_blank" href="/story/1019256.html"><img src="http://img.diglog.com/img/2020/8/thumb_35754e31ec80760c693026ff99c5fb91.png" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1019256.html">Repl.它正在雇佣全栈工程师，以使编码更容易访问</a></div><span class="my_story_list_date">2020-8-20 6:50</span></div><div class="col-sm"><div><a target="_blank" href="/story/1015932.html"><img src="http://img.diglog.com/img/2020/8/thumb_40462da55165ca9c980a6bad5e066545.png" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1015932.html">OneSignal(消息传送和推送通知API)正在招聘一名全栈工程师</a></div><span class="my_story_list_date">2020-8-4 0:36</span></div><div class="col-sm"><div><a target="_blank" href="/story/1005797.html"><img src="http://img.diglog.com/img/2020/6/thumb_18b4e6b22707b7d5eb9f02790ac7ccb7.png" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1005797.html">构建您自己的私有自托管全栈个人云系统</a></div><span class="my_story_list_date">2020-6-9 10:23</span></div><div class="col-sm"><div><a target="_blank" href="/story/1005646.html"><img src="http://img.diglog.com/img/2020/6/thumb_1ab9856bae662c0528c01b566cb246ad.png" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1005646.html">用NIM编写的全栈Web框架</a></div><span class="my_story_list_date">2020-6-8 8:30</span></div></div></div></div><div class="my_movie_list_item shadow p-3 mb-5 bg-white rounded"><button type="button" class="btn btn-link my_tag"><a href="/tag/web2.0/">#web2.0</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/google/">#google</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/设计/">#设计</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/创意/">#创意</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/摄影/">#摄影</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/游戏/">#游戏</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/图片/">#图片</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/软件/">#软件</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/视频/">#视频</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/手机/">#手机</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/广告/">#广告</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/apple/">#apple</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/iphone/">#iphone</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/网站/">#网站</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/免费/">#免费</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/下载/">#下载</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/windows/">#windows</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/微软/">#微软</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/firefox/">#firefox</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/苹果/">#苹果</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/blog/">#blog</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/音乐/">#音乐</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/博客/">#博客</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/wordpress/">#wordpress</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/恶搞/">#恶搞</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/艺术/">#艺术</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/qq/">#qq</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/web/">#web</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/谷歌/">#谷歌</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/工具/">#工具</a></button></div></div></div><div id="my_footer"><div class=""><a href="/tags/">tags</a> <a href="/users/">users</a></div>&copy;2012-2021 diglog.com </div></div></body></html>