<!doctype html><html lang="zh-hans"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>SQLite 3.33</title><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"><link rel="stylesheet" href="/img/css.css?random="><link data-rh="true" rel="icon" href="/img/favicon.ico"/><script data-ad-client="ca-pub-6067137220025946" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script type="text/javascript" src="https://platform-api.sharethis.com/js/sharethis.js#property=5effb96910009800120b8d4d&product=inline-share-buttons" async="async"></script>
<script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?03c1a0f31299b4a2fbb83c34d6beaac9";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script></head><body><div id="my_header"><div class="container"><nav class="navbar navbar-expand-lg"><a class="navbar-brand" href="/"><img alt="diglog" src="/img/logo.v1.gif" class="rounded-sm"></a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarNavAltMarkup"><div class="navbar-nav"></div></div></nav></div></div><div class="container"><div id="my_content"><h1 class="page_narrow">SQLite 3.33</h1><div class="row"><div class="col-lg-12 col-12"><div class="my_story_list_item shadow p-3 mb-5 bg-white rounded"><div class="story_page_pub_time page_narrow">2020-08-16 22:32:25</div><div class="page_narrow text-break page_content"><p>UPDATE语句用于修改数据库表的零行或多行中存储的值的子集，该数据库表由指定为UPDATE语句一部分的限定表名标识。</p><p>如果UPDATE语句没有WHERE子句，则UPDATE将修改表中的所有行。否则，更新仅影响WHERE子句布尔表达式为TRUE的行。如果WHERE子句没有对表中的任何行求值为TRUE，这并不是错误的-这仅仅意味着UPDATE语句影响零行。</p><p>对受UPDATE语句影响的每一行所做的修改由SET关键字后面的赋值列表确定。每个赋值在等号左边指定一个列名，在右边指定一个标量表达式。对于每个受影响的行，命名列被设置为通过计算相应标量表达式找到的值。如果单个列名在赋值表达式列表中出现多次，则除了最右侧之外的所有匹配项都将被忽略。未出现在分配列表中的列保持不变。ScalareXpressions可以指正被更新的行的列。在这种情况下，在进行任何赋值之前都会计算所有标量表达式。</p><p>从SQLite版本3.15.0(2016-10-14)开始，SET子句中的赋值可以是左侧带括号的列名列表和右侧相同大小的行值。</p><p>UPDATE关键字后面的可选&#34；OR操作&34；冲突子句允许用户指定在此更新命令期间使用的特定约束冲突解决算法。有关更多信息，请参阅标题为冲突的部分。</p><p>以下附加语法限制适用于出现在CREATE TRIGGER语句体内的UPDATE语句。</p><p>指定为触发器正文中UPDATE语句一部分的表名必须是非限定的。换句话说，就是schema-name。触发器内不允许在更新的表名称上添加前缀。除非触发器附加到的表在TEMP数据库中，否则由触发器程序更新的表必须位于与其相同的数据库中。如果触发器附加到的表在TEMP数据库中，则要更新的表的非限定名的解析方式与顶级语句的解析方式相同(首先搜索TEMP数据库，然后搜索主数据库，然后按附加顺序搜索任何其他数据库)。</p><p>触发器内的UPDATE语句不允许使用INDEX BY和NOT INDEX子句。</p><p>无论用于生成SQLite的编译选项如何，触发器中都不支持用于UPDATE的LIMIT和ORDER BY子句。</p><p>UPDATE-FROM IDEA是对SQL的扩展，它允许数据库中的其他表驱动UPDATE语句。目标表是正在更新的特定表。使用UPDATE-FROM，您可以针对数据库中的其他表联接目标表，以帮助计算哪些行需要更新以及这些行上应该有哪些新值。从SQLite版本3.33.0(2020-08-14)开始支持UPDATE-FROM。</p><p>其他关系数据库引擎也实现了UPDATE-FROM，但是因为该结构不是SQL标准的一部分，所以每个产品的UPDATE-FROM都是不同的。SQLite实现与PostgreSQL兼容。相同想法的SQL Server和MySQL实现的工作方式略有不同。</p><p>作为UPDATE-FROM如何有用的示例，假设您有一个在Sales表中累计购买的销售点应用程序。在一天结束的时候，你要根据每天的销售情况来调整库存表。为此，您可以对Inventory表运行更新，该表根据当天的合计销售额调整数量。该语句将如下所示：</p><p>更新存货集数量=Quantity-daily.amt自(选择SUM(数量)为金额，ITEMID从销售组按2)为日，其中ventory.itemId=daily.itemId；</p><p>FROM子句中的子查询计算每个ItemID的库存应该减少的金额。该子查询与Inventory表连接，并且每个受影响的库存行的数量减少适当的数量。</p><p>目标表不包括在FROM子句中，除非打算对目标表执行自联接。在自联接的情况下，FROM子句中的表必须使用与目标表不同的名称。</p><p>如果目标表和FROM子句之间的连接导致同一目标表行有多个输出行，那么这些输出行中只有一个用于更新目标表。选择的输出是任意的，可能会从一个SQLite版本到下一个版本，或者从一个运行到下一个运行。</p><p>SQL Server还支持UPDATE FROM，但在SQL Server中，目标表必须包含在FROM子句中。换句话说，目标表在语句中被命名了两次。使用SQL Server时，上面演示的库存调整语句将写成这样：</p><p>从存货更新存货集数量=Quantity-daily.amt，(选择金额为SUM(数量)，从销售组选择ITEMID按2)为每日，其中ventory.itemId=daily.itemId；</p><p>MySQL支持UPDATE FROM IDEA，但是它没有使用FROM子句。相反，完整的连接规范在UPDATE和SET关键字之间给出。等效的MySQL语句如下所示：</p><p>更新库存连接(金额选择SUM(数量)，销售组选择ITEMID为2)为日使用(ITEMID)set invventory.Quantity=invventory.Quantity-daily.amt；</p><p>与其他系统不同，MySQL UPDATE语句不只有一个目标表。可以在SET子句中修改参与联接的任何表。MySQL UPDATE语法允许您一次更新多个表！</p><p>如果SQLite是使用SQLITE_ENABLE_UPDATE_DELETE_LIMIT编译时间选项生成的，则UPDATE语句的语法将使用可选的ORDER BY和LIMIT子句进行扩展，如下所示：</p><p>如果UPDATE语句有LIMIT子句，则通过计算附带的表达式并将其转换为整数值，即可找到要更新的最大行数。负值被解释为&#34；无限制&#34；。</p><p>如果LIMIT表达式的计算结果为非负值N，并且UPDATE语句具有ORDER BY子句，则将根据ORDER BY对在没有LIMIT子句的情况下更新的所有行进行排序，并更新第一个N。如果UPDATE语句也有OFFSET子句，则类似地计算它并将其强制转换为整数值。如果OFFSETexpression的计算结果为非负值M，则跳过前几行，而更新后面的N行。</p><p>如果UPDATE语句没有ORDER BY子句，则在应用LIMIT和OFFSET子句之前，将按照任意顺序组装在没有LIMIT子句的情况下要更新的所有行，以确定实际更新了哪些行。</p><p>UPDATE语句上的ORDER BY子句仅用于确定哪些行在限制范围内。修改行的顺序是任意的，不受ORDER BY子句的影响。</p></div><div id="story_share_this"><div class="sharethis-inline-share-buttons"></div></div><div class="text-break sotry_link page_narrow"><a target="_blank" href="https://www.sqlite.org/lang_update.html">https://www.sqlite.org/lang_update.html</a></div><div class="story_tags page_narrow"><button type="button" class="btn btn-light my_tag"><a href="/tag/sqlite/">#sqlite</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/update/">#update</a></button></div></div><div class="shadow p-3 mb-5 bg-white rounded clearfix"><div class="container"><div class="row"><div class="col-sm"><div><a target="_blank" href="/story/1009995.html"><img src="http://img.diglog.com/img/2020/7/thumb_32e37b91a23db8109095af1514044686.jpeg" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1009995.html">Simpleton，一个从UDP到SQLite的简单工具</a></div><span class="my_story_list_date">2020-7-6 4:29</span></div><div class="col-sm"><div><a target="_blank" href="/story/1006822.html"><img src="http://img.diglog.com/img/2020/6/thumb_8f8c5b1332820c7c0c8de312535c9593.png" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1006822.html">一种面向SQLite的Jupyter内核</a></div><span class="my_story_list_date">2020-6-17 0:14</span></div><div class="col-sm"><div><a target="_blank" href="/story/1006434.html"><img src="http://img.diglog.com/img/2020/6/thumb_0afa365aa6fefea5db5b7c52877985b4.jpg" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1006434.html">使用SQLite从*选择Code_Execution From*；</a></div><span class="my_story_list_date">2020-6-14 1:12</span></div><div class="col-sm"><div><a target="_blank" href="/story/1003458.html"><img src="http://img.diglog.com/img/2020/5/thumb_14171a5347be41b5d0afb282b90a6222.png" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1003458.html">DuckDB，SQLite for Analytics</a></div><span class="my_story_list_date">2020-5-24 7:20</span></div></div></div></div><div class="my_movie_list_item shadow p-3 mb-5 bg-white rounded"><button type="button" class="btn btn-link my_tag"><a href="/tag/web2.0/">#web2.0</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/google/">#google</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/设计/">#设计</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/创意/">#创意</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/摄影/">#摄影</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/游戏/">#游戏</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/图片/">#图片</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/软件/">#软件</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/视频/">#视频</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/手机/">#手机</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/广告/">#广告</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/apple/">#apple</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/iphone/">#iphone</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/网站/">#网站</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/免费/">#免费</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/下载/">#下载</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/windows/">#windows</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/微软/">#微软</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/firefox/">#firefox</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/苹果/">#苹果</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/blog/">#blog</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/音乐/">#音乐</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/博客/">#博客</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/wordpress/">#wordpress</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/恶搞/">#恶搞</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/艺术/">#艺术</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/qq/">#qq</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/web/">#web</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/谷歌/">#谷歌</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/工具/">#工具</a></button></div></div></div><div id="my_footer"><div class=""><a href="/tags/">tags</a> <a href="/users/">users</a></div>&copy;2012-2021 diglog.com </div></div></body></html>