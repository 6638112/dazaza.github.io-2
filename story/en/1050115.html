<!doctype html><html lang="zh-hans"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>动画PNG与动画Webp与GIF Animated PNG vs. Animated Webp vs. GIF</title><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"><link rel="stylesheet" href="/img/css.css?random="><link data-rh="true" rel="icon" href="/img/favicon.ico"/><script data-ad-client="ca-pub-6067137220025946" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script type="text/javascript" src="https://platform-api.sharethis.com/js/sharethis.js#property=5effb96910009800120b8d4d&product=inline-share-buttons" async="async"></script>
<script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?03c1a0f31299b4a2fbb83c34d6beaac9";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script></head><body><div id="my_header"><div class="container"><nav class="navbar navbar-expand-lg"><a class="navbar-brand" href="/"><img alt="diglog" src="/img/logo.v1.gif" class="rounded-sm"></a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarNavAltMarkup"><div class="navbar-nav"></div></div></nav></div></div><div class="container"><div id="my_content"><h1 class="page_narrow">Animated PNG vs. Animated Webp vs. GIF<br/>动画PNG与动画Webp与GIF </h1><div class="row"><div class="col-lg-12 col-12"><div class="my_story_list_item shadow p-3 mb-5 bg-white rounded"><div class="story_page_pub_time page_narrow">2021-03-01 19:58:04</div><div class="page_narrow text-break page_content"><p>With Chrome now supporting Animated PNG as of Chrome 59 we have two image formats that can supplant the old and tired GIF format. Varying posts and sites have different conclusions on when to use APNG versus an animated Webp. In all my findings (linked below where the source Gif comes from) animated webp beats apng in filesize each and every time. Sometimes by not very much. This of course is anecdotal and I&#39;m not as familiar with apng as the creators and others may be so they may be able to squeeze more out of an apng than I can.</p><p>从Chrome 59开始，Chrome现在支持Animated PNG，我们有两种图像格式可以替代旧的GIF格式。关于何时使用APNG和动画Webp，不同的帖子和网站有不同的结论。在我的所有发现中（每次链接在下面，Gif的来源都在其中），动画webp每次都在文件大小上击败apng。有时不是很多。这当然是轶事，我对apng的了解不如创作者和其他创作者那么熟悉，因此他们可能比我更能挤出apng。</p><p> All that being said I&#39;ve heard and read people say &#34;APNG might be bigger but webp takes longer to decode in the browser&#34;. That assumes the larger APNG will load faster than the smaller webp. Is that the case though? I assume the smaller webp gets downloaded to the client faster then it&#39;ll start decoding faster. Thus animating faster. So lets actually test that instead of me spouting off haha. On to the source GIF.</p><p> 我听到并阅读过的所有内容都表示，APNG可能更大，但webp在浏览器中解码所需的时间更长。假设较大的APNG将比较小的Webp加载更快。是这样吗？我假设较小的Webp更快地下载到客户端，然后它将开始更快地解码。因此动画速度更快。因此，让我们实际测试一下，而不是让我吐出来哈哈。转到源GIF。</p><p> The GIF I&#39;m using for this post comes from my post on  Converting MP4 To Webm   . That was a 1080p video stripped down to about 5 seconds and resized to a width of 800.</p><p> 我在这篇文章中使用的GIF来自我关于将MP4转换为Webm的文章。那是一个1080p视频，缩减到大约5秒钟，并调整为800的宽度。</p><p>    Before we can even embark on this trip we have to convert the GIF above to an APNG and an Animated Webp. Maybe you can convert the GIF on this page to an APNG and get better results. Please try I don&#39;t want to dismiss APNG as much as I think I&#39;m probably coming off as.</p><p>    在我们甚至还不准备踏上这趟旅程之前，我们必须将上面的GIF转换为APNG和Animated Webp。也许您可以将此页面上的GIF转换为APNG并获得更好的结果。请尝试我不希望解雇APNG的次数，我认为我可能会退出。</p><p>  Gif2apng offers three different options for converting a GIF to an animated PNG. We have zlib, 7zip and Zopfli compression. Each compression option besides zlib allows you to set an iteration amount which defaults to 15.</p><p>  Gif2apng提供了三种将GIF转换为动画PNG的选项。我们有zlib，7zip和Zopfli压缩。除zlib外，每个压缩选项都允许您设置默认为15的迭代量。</p><p> I&#39;m using gif2apng version 1.9  [ 1 ] [ 2 ]. For both 7zip and zopfli I&#39;ll use the &#34;default&#34; iterations of 15 and a more aggressive version of 100. Be warned if you want to do this. Depending on your server specs or locally on your own computer and it&#39;s specs Zopfli will take a long time. Increasing the iterations for either of the compression algorithms will also increase how long it takes to convert your image to an APNG. Be prepared to set aside a pretty big chunk of time if you do this on your computer :).</p><p> 我使用gif2apng版本1.9 [1] [2]。对于7zip和zopfli，我将使用＆＃34; default＆＃34;迭代15和更积极的版本100。如果要执行此操作，请警告。根据您的服务器规格或本地计算机上的规格，Zopfli将花费很长时间。增加任何一种压缩算法的迭代次数也会增加将图像转换为APNG所花费的时间。如果您在计算机上进行此操作，请准备好留出很大一部分时间：)。</p><p> After converting the GIF to an Animated PNG I&#39;ll also run it through APNGOPT. This should &#34;optimize&#34; the Animated PNG. This too offers differing amount of iterations. I&#39;ll use the &#34;default&#34; of 15 for each apng that was converted with the defaults above and 100 for all the 100 iterations.</p><p> 将GIF转换为动画PNG之后，我还将通过APNGOPT运行它。这应该＆＃34;优化＆＃34;动画PNG。这也提供了不同数量的迭代。我将使用默认的＆＃34;对于使用上述默认值转换的每个apng，其值为15，对于所有100次迭代，其值为100。 </p><p>   We can see that Zopfli compression saves the most before running these through apngopt. It&#39;s very CPU intensive though. After running these through apngopt things didn&#39;t change much or at all.</p><p>我们可以看到，在通过apngopt运行它们之前，Zopfli压缩会节省最多的时间。不过，它占用大量的CPU资源。在通过apngopt运行这些命令后，事​​情没有太大变化或根本没有变化。</p><p>   On a windows machine just use the GUI they package from sourceforge. It seems to be the most up to date. I haven&#39;t had the time to see if the GUI and CLI differ in anyway so that&#39;ll be up to you unless you&#39;re ok with the output of the GUI then keep on keepin on!</p><p>   在Windows计算机上，只需使用它们从sourceforge打包的GUI。它似乎是最新的。我还没有时间查看GUI和CLI是否有所不同，除非您对GUI的输出感到满意，然后继续进行操作，否则将由您自己决定！</p><p>  If you install gif2apng through your OS&#39;s package manager (ie: apt-get/apt) depending on your OS&#39;s you&#39;ll more than likely get version 1.7.</p><p>  如果您通过操作系统的程序包管理器（即apt-get / apt）安装gif2apng（取决于操作系统），则可能会获得1.7版。</p><p>  Depending on your OS again if you use the CLI version of apngopt you&#39;ll get versions ranging from 1.1 to 1.4.</p><p>  如果再次使用apngopt的CLI版本，则取决于您的操作系统，您将获得1.1到1.4的版本。</p><p>  The same reference gif was converted to a webp using three different options and WebP Encoder version: 0.6.0 (WebP Mux version: 0.4.0).</p><p>  使用三个不同的选项和WebP编码器版本：0.6.0（WebP Mux版本：0.4.0）将相同的参考gif转换为webp。</p><p> I didn&#39;t dive into the different CLI options available for gif2webp. Things such has   -kmin  ,   -kmax  — which specify the minimum and maximum distance between consecutive key frames and can improve decoding performance — or adjust the deblocking filter   -f  from the docs suggested 50. These could with adjustments and tweaking produce smaller or in some instances bigger files. You&#39;ll have to test those out for specific images, or use the defaults such as I have.</p><p> 我没有深入研究gif2webp可用的不同CLI选项。这样的东西具有-kmin，-kmax（它们指定连续关键帧之间的最小和最大距离，并可以提高解码性能），或者从文档建议50中调整去块滤波器-f。通过调整和调整，这些可能会变小或变小实例更大的文件。您必须对这些图像进行测试以查看特定的图像，或者使用默认设置，例如我的图像。</p><p>  Webp at it&#39;s default settings beats (barely) each of the converted APNG&#39;s, 30.86MB for the Webp compared to 33.01MB using default APNG settings (zlib) and 30.87MB using zopfli compression @ 100 iterations.</p><p>  默认情况下，Webp击败了每个转换后的APNG，Webp的频率为30.86MB，相比之下，使用默认APNG设置（zlib）的Webp为33.01MB，使用zopfli压缩的30.87MB @ 100次迭代。 </p><p>  Ok cool all the file size mumbo jumbo is out of the way. Does a few kb/mb matter when they are so close? The default webp settings gives us the same size file of an apng using apngout and zopfli @ 100 iterations.</p><p>好的，很酷，所有文件大小都无法使用。当它们如此接近时，几kb / mb是否重要？默认的webp设置使用apngout和zopfli @ 100次迭代为我们提供了与apng相同大小的文件。</p><p> Yep. The larger apng will in fact decode faster. But does that matter? Kind of.</p><p> 是的。实际上，较大的apng解码速度会更快。但这有关系吗？有点儿。</p><p>  Typically in a situation like this I would use  Webpagetest&#39;s &#34;visual comparison&#34;    option that way we could see the pages load side by side. I&#39;d run a desktop test and then I&#39;d run a mobile test using the &#34;emerging markets&#34; settings. I can&#39;t right now since as mentioned above APNG support is in Chrome 59+. The visual comparison tool uses the current stable release of Chrome (which just happened to be updated while I was testing these out. Still to be sure I ran with the Canary version). What most everyone using a non dev/beta version of Chrome uses.</p><p>  通常，在这种情况下，我会使用Webpagetest的视觉比较选项，这样我们就可以看到页面并排加载。我先进行了桌面测试，然后使用新兴市场进行了移动测试。设置。我目前无法执行此操作，因为如上所述，Chrome 59+支持APNG。视觉比较工具使用的是Chrome的当前稳定版本（在我测试这些版本时恰好进行了更新。仍然要确保我使用的是Canary版本）。大多数使用非dev / beta版本的Chrome的人都使用什么。</p><p> So I&#39;m running these tests on Chrome Canary and will use the median from the first view as the comparison. I&#39;ll run each image option/type three (3) times on Chrome desktop using a cable connection — 5Mbps 28ms Latency — and three times using a Fourth Generation Moto G and their &#34;Mobile 3g&#34; connection — 768 Kbps 3G connection with 300ms of latency.</p><p> 因此，我正在Chrome Canary上运行这些测试，并将使用第一个视图的中位数作为比较。我将使用电缆连接（5Mbps 28ms延迟）在Chrome桌面上运行三（3）次每个图像选项/类型，并使用第四代Moto G及其移动3g运行三遍。连接— 768 Kbps 3G连接，延迟为300毫秒。</p><p>  The first comparison I ran is the default settings of gif2webp. As mentioned above this defaults to a quality of 75, compression mode of 4 and is lossless like APNG. You can download these animated images and run them yourself. You&#39;ll see which actually loads faster without even having to read haha.</p><p>  我运行的第一个比较是gif2webp的默认设置。如上所述，此参数默认为质量75，压缩模式为4，并且像APNG一样是无损的。您可以下载这些动画图像并自己运行。您将看到哪一个实际上加载得更快，甚至不必阅读哈哈。</p><p> Webp at it&#39;s default settings might in fact be smaller in file size (for this particular animation) than the APNG. It helps in the fact that we are sending less bytes down the wire but as for over all page load performance you can see below it&#39;s not helping much or if any at all.</p><p> 实际上，默认情况下，Webp的文件大小可能比APNG小（对于此特定动画）。这实际上有助于我们减少网络中的字节发送量，但是就所有页面加载性能而言，您可以在下面看到它并没有太大帮助，或者根本没有帮助。</p><p>    These are large files. You&#39;re doing yourself and your users a disservice if you send these big honking things down the wire to them.</p><p>    这些是大文件。如果您将这些巨大的麻烦事通过电话发送给他们，则会给您自己和您的用户造成伤害。 </p><p>  Webp&#39;s defaults will help you out on a a slow 3g connection because it&#39;s sending less data. APNG gets frames faster to the screen since it decodes faster, hence the better speed index below.</p><p>Webp的默认设置将帮助您建立速度较慢的3g连接，因为它发送的数据较少。 APNG由于解码速度更快，因此可以更快地将帧发送到屏幕，因此下面的速度指数更好。</p><p>   So don&#39;t use APNG nor the Webp Defaults on a slow connection in my opinion. They are big files.</p><p>   因此，我认为请勿在慢速连接上使用APNG或Webp默认值。他们是大文件。</p><p>  So is there a solution for smaller file size than gif and that actually helps your page performance? Yes if you don&#39;t mind a possible lossy compressed image.</p><p>  那么，有没有比gif大小小的文件大小的解决方案，实际上可以提高您的页面性能？是的，如果您不介意可能的有损压缩图像。</p><p> We can take the Webp image converted with the defaults, the mixed compression (lossy &amp; lossless), the lossy converted webp, and a lossy compressed and filtered webp image and compare those to the &#34;best&#34; file size wise APNG and an unoptimized GIF.</p><p> 我们可以获取使用默认值，混合压缩（有损和无损），有损转换后的webp以及有损压缩和过滤后的webp图像转换后的Webp图像，并将其与“最佳”图像进行比较。文件大小明智的APNG和未优化的GIF。</p><p> Before I show you those here are the numbers from those runs on a desktop.</p><p> 在向您展示这些之前，这里是台式机上运行的那些数字。</p><p>    What I was most surprised by was how close a default settings animated webp and an unoptimized gif page load times and speed index were.</p><p>    最让我惊讶的是，默认设置的动画Webp以及未优化的gif页面加载时间和速度索引的接近程度。</p><p> These aren&#39;t fair comparision to APNG either since there is lossy compression. There&#39;s also high variance in the load times. Much like you&#39;d have in a real world scenario. So take these results with a grain of salt. I didn&#39;t put much effort into making them all variable free.</p><p> 由于存在有损压缩，因此与APNG的比较不是公平的。加载时间也存在很大差异。就像您在现实世界中遇到的情况一样。因此，将这些结果与一粒盐放在一起即可。我并没有付出太多努力来使它们全部自由变量。 </p><p>  Where you&#39;ll get the most benefit with this animated webp is on a slow 3g connection.</p><p>借助这种动画Webp，您将获得最大收益的地方是缓慢的3g连接。</p><p>   The animated webp&#39;s load faster on 3g since there&#39;s less data being sent. APNG&#39;s decode a bit faster and the GIF is just flat out bad. What I didn&#39;t include is CPU busy time but you can get a feel for that in the &#34;First Interactive&#34; numbers. Here&#39;s what Webpagetest says First interactive is:</p><p>   动画的webp在3g上的加载速度更快，因为发送的数据较少。 APNG的解码速度更快一些，而GIF恰好不好。我没有包括的是CPU繁忙时间，但是您可以在＆＃34; First Interactive＆＃34;中了解一下数字。这是Webpagetest所说的“首次互动”是：</p><p> reports when the page is first expected to be usable and will respond to input quickly (with the possibility of slow responses as more content loads).</p><p> 报告何时首先预期页面可用，并将快速响应输入（随着更多内容加载，响应速度可能很慢）。</p><p>  None of these. No really. Well I should say typically depending on your browser support and what you have as a source format you shouldn&#39;t use any of these (animated webp, animated png or GIF).</p><p>  都不是。不完全是。好吧，我通常应该说，这取决于您的浏览器支持以及您所使用的源格式，您不应该使用其中的任何一种（动画化的Webp，动画png或GIF）。</p><p> If you have control over your source. Meaning you have the actual video you wish to use as a short animation then use a short video. As I&#39;ve shown in my other post,  Converting MP4 To Webm, these video formats can be significantly smaller. For instance these same animated images as their corresponding MP4&#39;s and webm&#39;s are a lot smaller.</p><p> 如果您可以控制来源。这意味着您拥有希望用作短动画的实际视频，然后再使用短视频。正如我在另一篇文章“将MP4转换为Webm”中所显示的那样，这些视频格式可能要小得多。例如，这些相同的动画图像与其对应的MP4和webm相比要小得多。</p><p>  Running these short videos through WPT gives us, in my opinion, the definitive answer on why you should use these video formats for short gif like animations over the other formats in this post.</p><p>  在我看来，通过WPT运行这些短视频为我们提供了一个明确的答案，即为什么您应该将这些视频格式用于短gif（例如动画）而不是本文中的其他格式。</p><p>    Now this is a very particular &#34;test&#34; for one type of animation. Certain images and videos will vary greatly in their file sizes compared to their actual size. For instances like using responsive images. If we have three images used in srcset, or picture element (which hopefully you should be using a responsive image element or attributes) with the following dimensions  1:</p><p>    现在，这是一个非常特殊的＆＃34; test＆＃34;一种动画。与实际大小相比，某些图像和视频的文件大小会有很大差异。对于像使用响应图像的实例。如果我们在srcset或picture元素（希望您应该使用响应式image元素或属性）中使用了三个图像，它们的尺寸如下：1： </p><p>   The GIF&#39;s are converted to Animated Webp&#39;s and Animated PNG&#39;s using their default settings. Animated Webp defaults are covered above. Animated PNG&#39;s defaults for gif2apng are</p><p>使用默认设置将GIF转换为Animated Webp和Animated PNG。 Webp动画的默认设置已在上面介绍。 gif2apng的PNG动画默认值为</p><p> Then usually an 800px wide webp/apng wont be sent to mobile users. So page load times and the rest of the metrics will be better. For instance here are the 400px wide animated images Webpagetest results:</p><p> 然后，通常不会将800px宽的webp / apng发送给移动用户。因此页面加载时间和其余指标会更好。例如，以下是400像素宽的动画图像网页测试结果：</p><p>  These smaller images load a lot faster. Still not as fast as an MP4 or WebM at 800px wide.</p><p>  这些较小的图像加载速度更快。仍不及800px宽的MP4或WebM快。</p><p>  There&#39;s a reason Gyfcat (webm or MP4) and Imgur (gifv) serve videos for their &#34;GIFS&#34;. They are faster and typically smaller. The end user can also stop these from playing which could keep lower powered machine&#39;s fans from spinning :) or let them actually use the page.</p><p>  Gyfcat（webm或MP4）和Imgur（gifv）为他们的＆＃34; GIFS＆＃39;提供视频是有原因的。它们更快，通常更小。最终用户还可以阻止这些播放器播放，这可能会阻止低功率机器风扇旋转：)或让他们实际使用该页面。</p><p> Use video formats! Then think about webp if your browser support allows it followed by APNG and then if you have to use a GIF. You can use your server and content negotiation like I outlined in this post  Conditionally Serve Webp, JXR Images with Nginx for both Nginx and Apache or use the picture element and type switching if you don&#39;t have access to server configs or htaccess file.</p><p> 使用视频格式！如果您的浏览器支持允许它，然后考虑APNG，然后再考虑是否必须使用GIF，请考虑一下webp。您可以使用服务器和内容协商，如我在这篇文章中概述的那样：如果您无权访问服务器配置或htaccess文件，则可以同时为Nginx和Apache使用带有Nginx的Webp，JXR图像和Nginx，也可以使用picture元素和类型切换。 </p></div><div id="story_share_this"><div class="sharethis-inline-share-buttons"></div></div><div class="text-break sotry_link page_narrow"><a target="_blank" href="https://corydowdy.com/blog/apng-vs-webp-vs-gif">https://corydowdy.com/blog/apng-vs-webp-vs-gif</a></div><div class="story_tags page_narrow"><button type="button" class="btn btn-light my_tag"><a href="/tag/动画/">#动画</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/animated/">#animated</a></button></div></div><div class="my_movie_list_item shadow p-3 mb-5 bg-white rounded"><button type="button" class="btn btn-link my_tag"><a href="/tag/web2.0/">#web2.0</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/google/">#google</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/设计/">#设计</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/创意/">#创意</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/摄影/">#摄影</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/图片/">#图片</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/游戏/">#游戏</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/软件/">#软件</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/视频/">#视频</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/手机/">#手机</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/广告/">#广告</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/iphone/">#iphone</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/网站/">#网站</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/免费/">#免费</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/下载/">#下载</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/windows/">#windows</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/微软/">#微软</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/blog/">#blog</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/firefox/">#firefox</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/apple/">#apple</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/音乐/">#音乐</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/苹果/">#苹果</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/博客/">#博客</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/wordpress/">#wordpress</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/恶搞/">#恶搞</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/艺术/">#艺术</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/qq/">#qq</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/web/">#web</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/工具/">#工具</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/分享/">#分享</a></button></div></div></div><div id="my_footer"><div class=""><a href="/tags/">tags</a> <a href="/users/">users</a></div>&copy; 2020 diglog.com </div></div></body></html>