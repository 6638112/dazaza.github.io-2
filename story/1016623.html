<!doctype html><html lang="zh-hans"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Simdjson：每秒解析千兆字节的JSON</title><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"><link rel="stylesheet" href="/img/css.css?random="><link data-rh="true" rel="icon" href="/img/favicon.ico"/><script data-ad-client="ca-pub-6067137220025946" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script type="text/javascript" src="https://platform-api.sharethis.com/js/sharethis.js#property=5effb96910009800120b8d4d&product=inline-share-buttons" async="async"></script>
<script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?03c1a0f31299b4a2fbb83c34d6beaac9";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script></head><body><div id="my_header"><div class="container"><nav class="navbar navbar-expand-lg"><a class="navbar-brand" href="/"><img alt="diglog" src="/img/logo.v1.gif" class="rounded-sm"></a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarNavAltMarkup"><div class="navbar-nav"></div></div></nav></div></div><div class="container"><div id="my_content"><h1 class="page_narrow">Simdjson：每秒解析千兆字节的JSON</h1><div class="row"><div class="col-lg-12 col-12"><div class="my_story_list_item shadow p-3 mb-5 bg-white rounded"><div class="story_page_pub_time page_narrow">2020-08-06 20:08:23</div><div class="story_img_container"><a href="http://img.diglog.com/img/2020/8/21b190cb36e46b64f6e37eb85705c10f.png"><img src="http://img.diglog.com/img/2020/8/21b190cb36e46b64f6e37eb85705c10f.png" class="img-fluid my_story_img" onerror="this.style.display='none'"></a></div><div class="page_narrow text-break page_content"><p>JSON在互联网上无处不在。服务器要花费“大量”时间来解析它。我们需要一个新鲜的方法。Simdjson库使用常用的SIMD指令和微并行算法来解析JSON，速度比其他任何东西都快2.5倍。先决条件：g++(版本7或更高版本)或clang++(版本6或更高版本)，以及带命令行shell的64位系统(例如Linux、MacOS、FreeBSD)。我们还支持Visual Studio和Xcode等编程环境，但需要不同的步骤。</p><p>#include&#34；simdjson.h&#34；int main(Void){simdjson：：DOM：：Parser parser；simdjson：：DOM：：Element twets=parser。加载(&#34；twitter.json&#34；)；std：：cout&lt；&lt；twets[&#34；Search_METADATA&#34；][&#34；count&#34；]&lt；&lt；&34；结果。&#34；&lt；&lt；std：：Endl；}。</p><p>Simdjson库使用的指令比最先进的解析器RapidJSON少四分之三，比sajson少50%。据我们所知，simdjson是第一个在商用处理器上以每秒千兆字节(GB/s)的速度运行的完全验证的JSON解析器。它可以在单个内核上每秒解析数百万个JSON文档。</p><p>下图表示在英特尔Skylake处理器(3.4Ghz)上使用GNU GCC 9编译器(带-O3标志)解析各种文件时的解析速度(以GB/s为单位)。我们将其与最好、最快的C++库进行比较。Simdjson库提供完整的unicode(utf-8)验证和精确数字解析。RapidJSON库在两种模式下进行了测试：快速和快速的数字解析。Sajson库提供快速(但不精确)的数字解析和部分Unicode验证。在这个数据集中，文件大小从65KB(GitHub_Events)一直到3.3 GB(GSOC-2018)。许多文件大多由数字组成：加拿大、网格、网格、随机和数字：在这种情况下，由于数字解析成本较高，我们看到JSON解析速度较低。Simdjson库使用精确的数字解析，这特别繁琐。</p><p>在Skylake处理器上，各种处理器对twitter.json文件的解析速度(以GB/s为单位)如下，再次使用GNU GCC 9.1(带-O3标志)。流行的用于现代C++库的JSON特别慢：它显然牺牲了解析速度来换取其他所需的特性。</p><p>无论是处理小文件(例如，300字节)还是处理较大文件(例如，3MB)，SIMDJSON库都提供高速。下图显示了在3.4GHzSkylake处理器(GNU GCC 9，-O3)上使用脚本生成的各种大小的合成文件的解析速度。</p><p>如果您计划在产品中使用simdjson，请使用我们的某个版本。</p><p>我们区分了绑定(仅包装C++代码)和到另一种编程语言的端口(重新实现所有内容)。</p><p>SIMDJSON库利用现代微体系结构，与SIMD矢量指令并行化，减少分支错误预测，并降低数据依赖性，以利用每个CPU的多个执行核心。</p><p>有些人喜欢阅读我们的论文：我们的研究文章描述了simdjson的设计和实现：Geoff Langdale，DanielLemire，Parsing Gigabytes of JSON per Second，VLDB Journal 28(6)，2019年。</p><p>对于视频的倾向性，(这是投票最好的演讲，我们对此感到有点自豪)。</p><p>这项工作得到了加拿大自然科学和工程研究理事会的支持，编号为RGPIN2017-03910。</p><p>访问CONTRIBUTING.md获取有关为SIMDJSON做出贡献的信息，访问HACKING.md获取有关源、建筑和架构/设计的信息。</p><p>在Windows下，我们使用windows/dirent_portable.h文件(不在我们的库代码中)构建一些工具：它遵循自由(商业友好)MIT许可。</p><p>对于不支持C++17的编译器，我们捆绑了在Boost许可证(http://www.boost.org/LICENSE_1_0.txt).)下发布的字符串视图库。与Apache许可一样，Boost许可也是允许商业再分发的许可。</p></div><div id="story_share_this"><div class="sharethis-inline-share-buttons"></div></div><div class="text-break sotry_link page_narrow"><a target="_blank" href="https://github.com/simdjson/simdjson">https://github.com/simdjson/simdjson</a></div><div class="story_tags page_narrow"><button type="button" class="btn btn-light my_tag"><a href="/tag/字节/">#字节</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/parsing/">#parsing</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/simdjson/">#simdjson</a></button></div></div><div class="my_movie_list_item shadow p-3 mb-5 bg-white rounded"><button type="button" class="btn btn-link my_tag"><a href="/tag/web2.0/">#web2.0</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/google/">#google</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/设计/">#设计</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/创意/">#创意</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/摄影/">#摄影</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/游戏/">#游戏</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/图片/">#图片</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/软件/">#软件</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/视频/">#视频</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/手机/">#手机</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/广告/">#广告</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/apple/">#apple</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/iphone/">#iphone</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/网站/">#网站</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/免费/">#免费</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/下载/">#下载</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/windows/">#windows</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/微软/">#微软</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/firefox/">#firefox</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/苹果/">#苹果</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/blog/">#blog</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/音乐/">#音乐</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/博客/">#博客</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/wordpress/">#wordpress</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/恶搞/">#恶搞</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/艺术/">#艺术</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/qq/">#qq</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/web/">#web</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/谷歌/">#谷歌</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/工具/">#工具</a></button></div></div></div><div id="my_footer"><div class=""><a href="/tags/">tags</a> <a href="/users/">users</a></div>&copy;2012-2021 diglog.com </div></div></body></html>