<!doctype html><html lang="zh-hans"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>将PostgreSQL备份到云</title><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"><link rel="stylesheet" href="/img/css.css?random="><link data-rh="true" rel="icon" href="/img/favicon.ico"/><script data-ad-client="ca-pub-6067137220025946" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script type="text/javascript" src="https://platform-api.sharethis.com/js/sharethis.js#property=5effb96910009800120b8d4d&product=inline-share-buttons" async="async"></script>
<script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?03c1a0f31299b4a2fbb83c34d6beaac9";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script></head><body><div id="my_header"><div class="container"><nav class="navbar navbar-expand-lg"><a class="navbar-brand" href="/"><img alt="diglog" src="/img/logo.v1.gif" class="rounded-sm"></a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarNavAltMarkup"><div class="navbar-nav"></div></div></nav></div></div><div class="container"><div id="my_content"><h1 class="page_narrow">将PostgreSQL备份到云</h1><div class="row"><div class="col-lg-12 col-12"><div class="my_story_list_item shadow p-3 mb-5 bg-white rounded"><div class="story_page_pub_time page_narrow">2020-09-10 03:02:52</div><div class="story_img_container"><a href="http://img2.diglog.com/img/2020/9/8c1a71ac34aba7c4ae1625b0f97d6feb.png"><img src="http://img2.diglog.com/img/2020/9/8c1a71ac34aba7c4ae1625b0f97d6feb.png" class="img-fluid my_story_img" onerror="this.style.display='none'"></a></div><div class="page_narrow text-break page_content"><p>这篇文章将帮助你以简单、经济、安全的方式将PostgreSQL数据库备份到云中。</p><p>按以下格式输入凭据。必要时根据主机进行更改。</p><p>设置文件的权限。如果您以postgres用户身份登录，则login_username将是postgres。</p><p>在.profile文件中设置环境变量。其中/var/lib/pgsql是我的设置中用户postgres的主目录。</p><p>Restic是一个免费的开源备份程序，可用于多个发行版。下载适合您的操作系统的文件，将其解压缩，将其作为Restic移动到/var/lib/pgsql/bin/(用户postgres的主目录)，使其可执行，并设置该文件夹的路径。</p><p>Backblaze是一项云存储服务，为家庭和企业用户提供轻松加密的端到端云备份解决方案。</p><p>为了将我们的PostgreSQL数据库备份到他们的云中，我们将使用他们的B2服务通过他们的API备份我们的数据。在撰写本文时，B2上的前10 GB存储是免费的，但当我们下载这些数据并仔细阅读定价详细信息时，可能会收费。</p><p>使用pg_dump工具设置cronjob来创建PostgresSQL数据库转储，这里每天23：00完成，00：00上传到B2。</p><p>$crontab-e023*pg_dump-U dbusername-w-F t dbname&gt；/var/lib/pgsql/db.tar0 0*。/var/lib/pgsql/.bashrc；/usr/bin/Restic backup-q/var/lib/pgsql/db.tar。</p><p>注意：根据数据库的大小和更改频率，您可能需要相应地更改cron作业的计划。</p><p>检查Backblaze门户，验证快照是否在我们的b2存储桶中创建。</p><p>注意：在另一台机器上下载快照时，应提供Restic和b2的必要凭据，如前所述。</p><p>仅此而已，现在我们可以在云中拥有一个安全可靠的Postgres备份数据库。你可以发推特给我询问，如果你觉得有用的话，可以和我分享这个。</p><p>如果您想要无限制地自动备份您的整个计算机存储，那么Backblaze可以为家庭和企业用户提供解决方案。使用我的会员链接查看它们。</p></div><div id="story_share_this"><div class="sharethis-inline-share-buttons"></div></div><div class="text-break sotry_link page_narrow"><a target="_blank" href="https://abishekmuthian.com/backup-postgresql-to-cloud/">https://abishekmuthian.com/backup-postgresql-to-cloud/</a></div><div class="story_tags page_narrow"><button type="button" class="btn btn-light my_tag"><a href="/tag/备份/">#备份</a></button></div></div><div class="shadow p-3 mb-5 bg-white rounded clearfix"><div class="container"><div class="row"><div class="col-sm"><div><a target="_blank" href="/story/1012594.html"><img src="http://img.diglog.com/img/2020/7/thumb_95785de10ff858fac9b74ab502fd72a6.png" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1012594.html">PostgreSQL中的物理备份与逻辑备份</a></div><span class="my_story_list_date">2020-7-18 2:38</span></div><div class="col-sm"><div><a target="_blank" href="/story/1005776.html"><img src="http://img.diglog.com/img/2020/6/thumb_0086f7ab50a46d9c83bfa546aba8dd01.jpg" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1005776.html">我终于找到了一个适用于Linux桌面的备份解决方案：Borg+Vorta</a></div><span class="my_story_list_date">2020-6-9 7:46</span></div><div class="col-sm"><div><a target="_blank" href="/story/1004152.html"><img src="http://img.diglog.com/img/2020/5/thumb_8fb6ba72ad8d059c8f97495f22f8a707.jpg" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1004152.html">选择2FA验证器应用程序可能很困难。Ars做的，所以你不必</a></div><span class="my_story_list_date">2020-5-29 6:25</span></div><div class="col-sm"><div><a target="_blank" href="/story/technology_google_425522.html"><img src="http://img.diglog.com/img/2011/5/thumb_64919c1760e14c4b8c811c8697892544.png" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/technology_google_425522.html">[Android] 一键备份你的SMS到GMAIL：SMS Backup+</a></div><span class="my_story_list_date">2011-5-6 14:8</span></div></div></div></div><div class="my_movie_list_item shadow p-3 mb-5 bg-white rounded"><button type="button" class="btn btn-link my_tag"><a href="/tag/web2.0/">#web2.0</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/google/">#google</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/设计/">#设计</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/创意/">#创意</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/摄影/">#摄影</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/游戏/">#游戏</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/图片/">#图片</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/软件/">#软件</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/视频/">#视频</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/手机/">#手机</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/广告/">#广告</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/apple/">#apple</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/iphone/">#iphone</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/网站/">#网站</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/免费/">#免费</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/下载/">#下载</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/windows/">#windows</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/微软/">#微软</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/firefox/">#firefox</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/苹果/">#苹果</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/blog/">#blog</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/音乐/">#音乐</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/博客/">#博客</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/wordpress/">#wordpress</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/恶搞/">#恶搞</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/艺术/">#艺术</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/qq/">#qq</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/web/">#web</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/谷歌/">#谷歌</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/工具/">#工具</a></button></div></div></div><div id="my_footer"><div class=""><a href="/tags/">tags</a> <a href="/users/">users</a></div>&copy;2012-2021 diglog.com </div></div></body></html>