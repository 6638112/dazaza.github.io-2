<!doctype html><html lang="zh-hans"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Linux发行版的严重Sudo故障 Serious Sudo Trouble for Linux Distros</title><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"><link rel="stylesheet" href="/img/css.css?random="><link data-rh="true" rel="icon" href="/img/favicon.ico"/><script data-ad-client="ca-pub-6067137220025946" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script type="text/javascript" src="https://platform-api.sharethis.com/js/sharethis.js#property=5effb96910009800120b8d4d&product=inline-share-buttons" async="async"></script>
<script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?03c1a0f31299b4a2fbb83c34d6beaac9";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script></head><body><div id="my_header"><div class="container"><nav class="navbar navbar-expand-lg"><a class="navbar-brand" href="/"><img alt="diglog" src="/img/logo.v1.gif" class="rounded-sm"></a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarNavAltMarkup"><div class="navbar-nav"></div></div></nav></div></div><div class="container"><div id="my_content"><h1 class="page_narrow">Serious Sudo Trouble for Linux Distros<br/>Linux发行版的严重Sudo故障 </h1><div class="row"><div class="col-lg-12 col-12"><div class="my_story_list_item shadow p-3 mb-5 bg-white rounded"><div class="story_page_pub_time page_narrow">2021-01-29 05:54:22</div><div class="story_img_container"><a href="http://img2.diglog.com/img/2021/1/6389b9bfd2177de7fc68d1de43888d54.jpg"><img src="http://img2.diglog.com/img/2021/1/6389b9bfd2177de7fc68d1de43888d54.jpg" class="img-fluid my_story_img" onerror="this.style.display='none'"></a></div><div class="page_narrow text-break page_content"><p>We all know the jokes. Linux admin: “Make me a sandwich!” Minion: “No!” Linux admin: “  sudo Make me a sandwich!” Minion: “Okay.” But, it’s no joke when an  ancient sudo security hole is uncovered.</p><p>我们都知道笑话。 Linux管理员：“给我做个三明治！”奴才：“不！” Linux管理员：“ sudo给我做个三明治！”奴才：“好吧。”但是，当发现一个古老的sudo安全漏洞时，这并不是开玩笑。</p><p> For those uninitiated in the ways of the Unix command line,  sudo is a preface that grants regular users administrative powers for whatever command they wish to execute. It’s a handy tool for avoiding use of the root account, always a dangerous proposition.</p><p> 对于那些没有通过Unix命令行方式启动的用户，sudo是一个序言，它授予普通用户对其希望执行的任何命令的管理权。这是避免使用root帐户的便捷工具，这总是很危险的主张。</p><p> Many so-called Linux vulnerabilities, turn out, upon closer examination to be nothing much. But, then, then there’s ones like  sudo’s CVE-2021-3156, aka “Baron Samedit.”</p><p> 经过仔细研究，发现许多所谓的Linux漏洞并不多。但是，然后是sudo的CVE-2021-3156，又名“ Samedit男爵”。</p><p> With this one, if you’re lazy about keeping your computers up to date, you’re in trouble. This  sudo heap-based buffer overflow can be exploited by any local user. Worse still, any Joe or Jane user can leverage it to elevate privileges to root, even if they’re not listed in the sudoers file.</p><p> 有了这个，如果您懒于使计算机保持最新状态，就会遇到麻烦。任何本地用户都可以利用基于sudo堆的缓冲区溢出。更糟糕的是，即使没有在sudoers文件中列出，任何Joe或Jane用户都可以利用它来提升对root用户的特权。</p><p> As the  sudo programmers explained: Usually, when you run a  sudo command in shell mode, you escape any special characters in the command’s arguments with a backslash. The sudoers policy plugin then removes the escape characters from the arguments before evaluating the sudoers policy. But, that same code will read beyond the last character of a string if it ends with an unescaped backslash character.</p><p> 正如sudo程序员所解释的：通常，当您在shell模式下运行sudo命令时，您会在命令参数中使用反斜杠转义任何特殊字符。然后，sudoers策略插件会在评估sudoers策略之前从参数中删除转义字符。但是，如果相同的代码以未转义的反斜杠字符结尾，则它将读取字符串的最后一个字符。</p><p> Usually, that doesn’t matter. But, thanks to another bug, this time in the shell parsing code, an attacker can run  sudoedit with either the -s or -i options. Why is that bad? Because it enables the shell mode and since there’s no command actually running,  sudo does not escape special characters. Last, but not least,  the code that decides whether to remove the escape characters doesn’t check whether a command is actually being run.</p><p> 通常，没关系。但是，由于另一个错误，这次是在外壳解析代码中，攻击者可以使用-s或-i选项运行sudoedit。为什么这么糟？由于它启用了外壳模式，并且由于实际上没有命令在运行，因此sudo不会转义特殊字符。最后但并非最不重要的一点是，决定是否删除转义符的代码不会检查命令是否真正在运行。</p><p> So, what happens is when the command line reaches  sudoers_policy_main() program,  set_cmnd() concatenates the command-line arguments into a heap-based buffer. Without any idea how long the command is,  set_cmnd() is vulnerable to a heap-based buffer overflow using out-of-bounds characters in the “user_args” buffer.</p><p> 因此，发生的情况是当命令行到达sudoers_policy_main（）程序时，set_cmnd（）将命令行参数连接到基于堆的缓冲区中。不知道命令有多长时间，使用“ user_args”缓冲区中的越界字符，set_cmnd（）容易受到基于堆的缓冲区溢出的影响。 </p><p> The theory may sound complex, but in practice, it’s trivial to exploit. To start screwing around, all you need to do is enter the command “ sudoedit -s” with any command-line argument ending with a single backslash character.</p><p>该理论听起来可能很复杂，但是在实践中，利用它是微不足道的。要开始解决问题，您需要做的就是输入命令“ sudoedit -s”，其中任何命令行参数都以单个反斜杠字符结尾。</p><p> Yes, there have been other recent  sudo security problems, but they’re small potatoes compared to this one. For those to smack you, you had to have an unusual  sudosetup. This one will work on every Linux system with sudo installed out there. As security company  Qualys Research Team‘s  Animesh Jain, vulnerability signatures product manager wrote, “Qualys recommends users apply patches for this vulnerability immediately.” She’s right.</p><p> 是的，最近还有其他sudo安全问题，但与这个相比，它们是小问题。对于那些打你的人，你必须有一个不寻常的sudosetup。这将适用于安装了sudo的每个Linux系统。正如安全公司Qualys Research Team的Animesh Jain所说，漏洞签名产品经理说：“ Qualys建议用户立即为此漏洞应用补丁。”没错</p><p> Patch your Linux system’s  sudo command now. You want to upgrade to  sudo version 1.9.5p2 or higher as soon as possible.</p><p> 立即修补Linux系统的sudo命令。您希望尽快升级到sudo 1.9.5p2或更高版本。</p><p> Don’t think it can happen to you? Please! There are many  botnets targeting Linux systems these days using brute-force methods and this vulnerability is perfect for automated exploitation.</p><p> 认为这可能不会发生在您身上吗？请！如今，有许多使用蛮力方法针对Linux系统的僵尸网络，此漏洞非常适合自动化利用。</p><p> What are you waiting for? Do it. Do it now. Patches are already available on all major Linux distributions.</p><p> 你在等什么？做吧现在做。修补程序已经在所有主要的Linux发行版中提供。 </p></div><div id="story_share_this"><div class="sharethis-inline-share-buttons"></div></div><div class="text-break sotry_link page_narrow"><a target="_blank" href="https://thenewstack.io/serious-sudo-trouble-for-linux-distros/">https://thenewstack.io/serious-sudo-trouble-for-linux-distros/</a></div><div class="story_tags page_narrow"><button type="button" class="btn btn-light my_tag"><a href="/tag/linux/">#linux</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/trouble/">#trouble</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/sudo/">#sudo</a></button></div></div><div class="my_movie_list_item shadow p-3 mb-5 bg-white rounded"><button type="button" class="btn btn-link my_tag"><a href="/tag/web2.0/">#web2.0</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/google/">#google</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/设计/">#设计</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/创意/">#创意</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/摄影/">#摄影</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/图片/">#图片</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/游戏/">#游戏</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/软件/">#软件</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/视频/">#视频</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/手机/">#手机</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/广告/">#广告</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/iphone/">#iphone</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/网站/">#网站</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/免费/">#免费</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/下载/">#下载</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/windows/">#windows</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/微软/">#微软</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/苹果/">#苹果</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/apple/">#apple</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/blog/">#blog</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/firefox/">#firefox</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/音乐/">#音乐</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/博客/">#博客</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/wordpress/">#wordpress</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/恶搞/">#恶搞</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/qq/">#qq</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/艺术/">#艺术</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/web/">#web</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/工具/">#工具</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/分享/">#分享</a></button></div></div></div><div id="my_footer"><div class=""><a href="/tags/">tags</a> <a href="/users/">users</a></div>&copy; 2020 diglog.com </div></div></body></html>