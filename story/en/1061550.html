<!doctype html><html lang="zh-hans"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>错误的抽象（2016） The Wrong Abstraction (2016)</title><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"><link rel="stylesheet" href="/img/css.css?random="><link data-rh="true" rel="icon" href="/img/favicon.ico"/><script data-ad-client="ca-pub-6067137220025946" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script type="text/javascript" src="https://platform-api.sharethis.com/js/sharethis.js#property=5effb96910009800120b8d4d&product=inline-share-buttons" async="async"></script>
<script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?03c1a0f31299b4a2fbb83c34d6beaac9";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script></head><body><div id="my_header"><div class="container"><nav class="navbar navbar-expand-lg"><a class="navbar-brand" href="/"><img alt="diglog" src="/img/logo.v1.gif" class="rounded-sm"></a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarNavAltMarkup"><div class="navbar-nav"></div></div></nav></div></div><div class="container"><div id="my_content"><h1 class="page_narrow">The Wrong Abstraction (2016)<br/>错误的抽象（2016） </h1><div class="row"><div class="col-lg-12 col-12"><div class="my_story_list_item shadow p-3 mb-5 bg-white rounded"><div class="story_page_pub_time page_narrow">2021-05-10 07:48:49</div><div class="page_narrow text-break page_content"><p>_I originally wrote the following for my  Chainline Newsletter, but I continue to get tweets about this idea, so I&#39;m re-publishing the article here on my blog. This version has been lightly edited._</p><p>_I最初为我的Chainline通讯写了以下内容，但我继续获得关于这个想法的推文，所以我在我的博客上重新发布了这篇文章。此版本已被轻微编辑._</p><p>  I&#39;ve been thinking about the consequences of the &#34;wrong abstraction.&#34; My RailsConf 2014 &#34; all the little things&#34; talk included a section where  I asserted:</p><p>  我一直在考虑＆＃34的后果;错误的抽象。＆＃34;我的railsconf 2014＆＃34;所有的小事和＃34;谈话包括一个我被声称的部分：</p><p>    This small section of a much bigger talk invoked a surprisingly strong reaction. A few folks suggested that I had lost my mind, but many more expressed sentiments along the lines of:</p><p>    这一小部分更大的谈话援引了一个令人惊讶的强烈反应。一些人建议我失去了思想，但沿着以下更加表达的情绪：</p><p>  This, a million times this! &#34; @BonzoESC: &#34;Duplication is far cheaper than the wrong abstraction&#34;  @sandimetz  @rbonales  pic.twitter.com/3qMI0waqWb&#34;</p><p>  这是一百万次！ ＆＃34; @bonzoesc：＆＃34;复制比错误的抽象＆＃34更便宜; @sandimetz @rbonales pic.twitter.com/3qmi0waqwb&#34;</p><p>— 41 shades of blue (@pims)  March 7, 2014</p><p> -  2014年3月7日的41个蓝色（@PIM）</p><p>  The strength of the reaction made me realize just how widespread and intractable the &#34;wrong abstraction&#34; problem is. I started asking questions and came to see the following pattern:</p><p>  反应的力量让我意识到＆＃34;错误的抽象＆＃34是如何普遍和棘手的。问题是。我开始提出问题并来看以下模式：</p><p> This creates a new abstraction. It could be a new method, or perhaps even a new class.</p><p> 这会创建一个新的抽象。它可能是一种新方法，或者甚至可能是一个新的课程。 </p><p>    Programmer B feels honor-bound to retain the existing abstraction, but since isn&#39;t exactly the same for every case, they alter the code to take a parameter, and then add logic to conditionally do the right thing based on the value of that parameter.</p><p>程序员B感觉荣誉持续保留现有的抽象，但从每种情况都完全相同，它们会改变代码拍摄参数，然后根据值添加逻辑以便根据值那个参数。</p><p>  You appear in the story about here, and your life takes a dramatic turn for the worse.</p><p>  你在这里出现在故事​​中，你的生活变得更糟。</p><p> Existing code exerts a powerful influence. Its very presence argues that it is both correct and necessary. We know that code represents effort expended, and we are very motivated to preserve the value of this effort. And, unfortunately, the sad truth is that the more complicated and incomprehensible the code, i.e. the deeper the investment in creating it, the more we feel pressure to retain it (the &#34; sunk cost fallacy&#34;). It&#39;s as if our unconscious tell us &#34;Goodness, that&#39;s so confusing, it must have taken  ages to get right. Surely it&#39;s really, really important. It would be a sin to let all that effort go to waste.&#34;</p><p> 现有代码发挥了强大的影响力。它的存在符合它既是正确的，也是必要的。我们知道代码代表努力消耗，我们非常有动力，以保护这项努力的价值。不幸的是，悲伤的事实是代码更复杂和难以理解的代码，即创造它的投资更深，我们对保留它的压力越多（＆＃34;沉没成本谬误＆＃34;）。它＆＃39;因为我们的无意识告诉我们＆＃34;善良，＆＃39;如此令人困惑，它一定要达到正确的。肯定是它真的很重要。让所有努力浪费的罪恶将是一个罪恶。＆＃34;</p><p> When you appear in this story in step 8 above, this pressure may compel you to proceed forward, that is, to implement the new requirement by changing the existing code. Attempting to do so, however, is brutal. The code no longer represents a single, common abstraction, but has instead become a condition-laden procedure which interleaves a number of vaguely associated ideas. It is hard to understand and easy to break.</p><p> 当您在上面步骤8中出现本故事时，此压力可能会强迫您前进，即通过更改现有代码来实现新要求。然而，试图这样做是残酷的。代码不再代表单个常见的抽象，而是成为一种条件加载程序，其交织了许多模糊相关的想法。很难理解和容易休息。</p><p> If you find yourself in this situation, resist being driven by sunk costs. When dealing with the wrong abstraction,  the fastest way forward is back. Do the following:</p><p> 如果您在这种情况下发现自己，抵制受到沉没的推动。在处理错误的抽象时，前进的最快方式是回来。请执行下列操作：</p><p> Within each caller, use the parameters being passed to determine the subset of the inlined code that this specific caller executes.</p><p> 在每个来电者中，使用传递的参数来确定此特定呼叫者执行的内联代码的子集。</p><p> This removes both the abstraction  and the conditionals, and reduces each caller to only the code it needs. When you rewind decisions in this way, it&#39;s common to find that although each caller ostensibly invoked a shared abstraction, the code they were running was fairly unique. Once you completely remove the old abstraction you can start anew, re-isolating duplication and re-extracting abstractions.</p><p> 这删除了抽象和条件，并将每个来电者缩短为只需的代码。当你以这种方式倒带决定时，它的共同点是发现，虽然每个来电者表面上调用了一个共享抽象，但他们运行的代码是相当唯一的。一旦完全删除旧抽象，您就可以重新开始，重新隔离重复和重新提取抽象。 </p><p> I&#39;ve seen problems where folks were trying valiantly to move forward with the wrong abstraction, but having very little success. Adding new features was incredibly hard, and each success further complicated the code, which made adding the next feature even harder. When they altered their point of view from &#34;I must preserve our investment in this code&#34; to &#34;This code made sense for a while, but perhaps we&#39;ve learned all we can from it,&#34; and gave themselves permission to re-think their abstractions in light of current requirements, everything got easier. Once they inlined the code, the path forward became obvious, and adding new features become faster and easier.</p><p>我已经看到了人们勇敢地努力向前推进错误的抽象，但成功很少。添加新功能令人难以置信的硬，每个成功都进一步复杂了代码，这使得添加下一个功能即使更加困难。当他们改变他们的角度来从＆＃34改变;我必须保留我们对此代码＆＃34的投资; ＆＃34;这段代码有一段时间，但也许我们学到了我们所能的所有东西，＆＃34;并让自己允许根据当前要求重新思考他们的抽象，一切都变得更加容易。一旦它们引入了代码，前进的道路变得明显，并且添加新功能变得更快，更容易。</p><p> The moral of this story? Don&#39;t get trapped by the sunk cost fallacy. If you find yourself passing parameters and adding conditional paths through shared code, the abstraction is incorrect. It may have been right to begin with, but that day has passed. Once an abstraction is proved wrong the best strategy is to re-introduce duplication and let it show you what&#39;s right. Although it occasionally makes sense to accumulate a few conditionals to gain insight into what&#39;s going on, you&#39;ll suffer less pain if you abandon the wrong abstraction sooner rather than later.</p><p> 这个故事的寓意？不要被沉没的成本谬误陷入困境。如果您发现自己通过参数并通过共享代码添加条件路径，则抽象不正确。它可能是正确的，但那天已经过去了。一旦证明抽象错误，最好的策略就是重新引入重复并让它向您展示什么＆＃39。虽然它偶尔会累积几个条件来获得洞察力，但是如果你越早放弃错误的抽象而不是以后，你会忍受痛苦的痛苦。</p><p> When the abstraction is wrong, the fastest way forward is back. This is not retreat, it&#39;s advance in a better direction. Do it. You&#39;ll improve your own life, and the lives of all who follow.</p><p> 当抽象错误时，前进的最快方式就会回来。这不是撤退，它的进步在更好的方向上。做。你＆＃39; ll改善你自己的生活，以及所有遵循的人的生命。</p><p>   The 2nd Edition contains 3 new chapters and is about 50% longer than the 1st. Also, because  99 Bottles of OOP is about object-oriented design in general rather than any specific language, this time around we created separate books that are technically identical, but use different programming languages for the examples.</p><p>   第二个版本包含3个新章节，比1st长约50％。此外，由于99瓶OOP是关于对象设计的一般设计而不是任何特定语言，这次我们在技术上创建了单独的书籍，这是技术上相同的，而是针对示例使用不同的编程语言。</p><p> 99 Bottles of OOP is currently available in Ruby, JavaScript, and PHP versions, and beer and milk beverages. It&#39;s delivered in epub, kepub, mobi and pdf formats. This results in six different books and (3x2x4) 24 possible downloads; all unique, yet still the same. One purchase gives you rights to download any or all.</p><p> 99瓶OOP目前在Ruby，JavaScript和PHP版本以及啤酒和牛奶饮料中提供。它＆＃39;在EPUB，KEPUB，MOBI和PDF格式中提供。这导致六个不同的书籍和（3x2x4）24可能的下载;所有独特，但仍然是一样的。一次购买为您提供下载任何或全部的权利。 </p></div><div id="story_share_this"><div class="sharethis-inline-share-buttons"></div></div><div class="text-break sotry_link page_narrow"><a target="_blank" href="https://sandimetz.com/blog/2016/1/20/the-wrong-abstraction">https://sandimetz.com/blog/2016/1/20/the-wrong-abstraction</a></div><div class="story_tags page_narrow"><button type="button" class="btn btn-light my_tag"><a href="/tag/错误/">#错误</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/wrong/">#wrong</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/代码/">#代码</a></button></div></div><div class="my_movie_list_item shadow p-3 mb-5 bg-white rounded"><button type="button" class="btn btn-link my_tag"><a href="/tag/web2.0/">#web2.0</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/google/">#google</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/设计/">#设计</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/创意/">#创意</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/摄影/">#摄影</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/图片/">#图片</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/游戏/">#游戏</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/软件/">#软件</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/视频/">#视频</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/广告/">#广告</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/手机/">#手机</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/iphone/">#iphone</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/网站/">#网站</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/免费/">#免费</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/下载/">#下载</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/windows/">#windows</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/apple/">#apple</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/微软/">#微软</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/firefox/">#firefox</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/blog/">#blog</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/苹果/">#苹果</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/音乐/">#音乐</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/博客/">#博客</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/wordpress/">#wordpress</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/恶搞/">#恶搞</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/qq/">#qq</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/艺术/">#艺术</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/web/">#web</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/工具/">#工具</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/分享/">#分享</a></button></div></div></div><div id="my_footer"><div class=""><a href="/tags/">tags</a> <a href="/users/">users</a></div>&copy;2012-2021 diglog.com </div></div></body></html>