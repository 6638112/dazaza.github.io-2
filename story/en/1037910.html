<!doctype html><html lang="zh-hans"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>HTTP / 2推送已失败 HTTP/2 Push is dead</title><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"><link rel="stylesheet" href="/img/css.css?random="><link data-rh="true" rel="icon" href="/img/favicon.ico"/><script data-ad-client="ca-pub-6067137220025946" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script type="text/javascript" src="https://platform-api.sharethis.com/js/sharethis.js#property=5effb96910009800120b8d4d&product=inline-share-buttons" async="async"></script>
<script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?03c1a0f31299b4a2fbb83c34d6beaac9";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script></head><body><div id="my_header"><div class="container"><nav class="navbar navbar-expand-lg"><a class="navbar-brand" href="/"><img alt="diglog" src="/img/logo.v1.gif" class="rounded-sm"></a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarNavAltMarkup"><div class="navbar-nav"></div></div></nav></div></div><div class="container"><div id="my_content"><h1 class="page_narrow">HTTP/2 Push is dead<br/>HTTP / 2推送已失败 </h1><div class="row"><div class="col-lg-12 col-12"><div class="my_story_list_item shadow p-3 mb-5 bg-white rounded"><div class="story_page_pub_time page_narrow">2020-12-05 21:47:20</div><div class="page_narrow text-break page_content"><p>One of the hot features that came with HTTP/2 was PUSH frames. The main idea isthat if the server can predict what requests a client might want to make, theserver can preemptively send request/response pairs to the client and warm it’scache.</p><p>HTTP / 2附带的热门功能之一是PUSH帧。主要思想是，如果服务器可以预测客户端可能要发出的请求，则服务器可以抢先向客户端发送请求/响应对并预热缓存。</p><p> This is a feature I’ve been very interested in for a long time. I feel that itcan be incredibly useful for APIs to invalidate &amp; warm caches, remove the needfor compound requests (which I feel is a  hack, although sometimes anecessary one).</p><p> 这是我很久以来一直很感兴趣的功能。我认为对于API使＆amp;温暖的缓存，消除对复合请求的需求（我认为这是一种技巧，尽管有时是必要的）。</p><p> To help advance this idea, I’ve worked on a  Internet Draft to let APIclients tell the server what resources they would like to have pushed, I builta  Node.js framework with first-class, deeply integrated Push support, andadded support for  Prefer-Push to  Ketting.</p><p> 为了推动这一想法的发展，我编写了一份Internet草案，以使API客户端可以告诉服务器他们希望推送哪些资源，我构建了一个Node.js框架，该框架具有一流的，深度集成的Push支持，并增加了对Prefer-推送至Ketting。</p><p> Unfortunately HTTP/2 push always felt like feature that wasn’t quite there yet.It’s usefulness was stunted due to  Cache-Digest for HTTP/2 being killedoff, and no browser APIs to hook into push events.</p><p> 不幸的是，HTTP / 2推送总是让人感觉还不太成熟。由于HTTP / 2的Cache-Digest被淘汰，而且没有浏览器API可以挂入推送事件，因此它的实用性被削弱了。</p><p> The Chrome team has considered removing Push support since at least 2018. Themain reason being that they hadn’t really seen the performance benefit forpushing static assets. At the time, I tried to  defend the feature forthe API use-case.</p><p> Chrome团队至少从2018年开始考虑取消对Push的支持。主要原因是他们并没有真正看到推动静态资产带来的性能优势。当时，我试图捍卫API用例的功能。</p><p> Yesterday, the Chrome team  announced to remove the feature from their HTTP/2 and HTTP/3 protocol implementations.</p><p> 昨天，Chrome小组宣布从其HTTP / 2和HTTP / 3协议实现中删除该功能。</p><p> I’m a little sad that it never got to its full potential, but with this step,I no longer think it’s worthwhile to invest in this feature. So I’m ceasingmy work on  Prefer-Push, and will also remove support from the next majorKetting version.</p><p> 我感到有点遗憾，因为它没有发挥出最大的潜力，但是通过这一步骤，我认为不再值得投资此功能。因此，我正在停止Prefer-Push的工作，还将从下一个majorKetting版本中删除对它的支持。 </p><p> On a positive note, I spent a lot of time thinking and working on this, butit is sometimes nice to just be able to close a chapter, rather than to waitand let it sizzle out. It’s not an ideal conclusion, but it’s a conclusionnonetheless.</p><p>积极的一面，我花了很多时间思考和解决这个问题，但是有时候能够关闭一章而不是等待并让它腾出水来，这有时是很好的选择。这不是一个理想的结论，但仍然是一个结论。</p><p>  Lacking server-driver push, we’re back to many small HTTP request, or compoundrequests. This means you either have the N+1 problem, or (in the case ofcompound requests) poor integration with HTTP caches.  More on this here.</p><p>  缺少服务器驱动程序推送，我们回到了许多小的HTTP请求或复合请求。这意味着您或者遇到了N + 1问题，或者（对于复合请求）与HTTP缓存的集成不良。在这里更多。</p><p> If you’re going the ‘compound request’ route, there is a draft of a similarheader as  Prefer-Push;   Prefer: transclude, which Ketting alsosupports.</p><p> 如果您要使用“复合请求”路线，则有一个与“首选”按钮相似的标题草稿；首选：超越，Ketting也支持。</p><p> A feature that I hoped would work well in the future with Server Push wasserver-initiated cache invalidation. We never quite got that. To work aroundthis, we use Websockets and will keep doing this for the forseeable future.</p><p> 我希望该功能将来与Server Push一起使用时可以使服务器启动的缓存失效。我们从来没有得到过。为了解决此问题，我们使用Websockets，并将在可预见的将来继续这样做。</p><p> To reduce general latency of fetching many things, the   103 Early Hintscan help, although this is not supported  yet in Chrome, and this is alsoonly really useful for speeding up delivery of assets like images, css andJavascript as there’s no way to hook into 1xx responses programmatically ina browser.</p><p> 为了减少获取很多东西的一般延迟，尽管在Chrome中尚不支持103早期Hintscan帮助，但它对于加快图像，css和Javascript等资产的交付速度也非常有用，因为无法挂接到1xx响应以编程方式在浏览器中。 </p></div><div id="story_share_this"><div class="sharethis-inline-share-buttons"></div></div><div class="story_tags page_narrow"><button type="button" class="btn btn-light my_tag"><a href="/tag/http/">#http</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/push/">#push</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/服务器/">#服务器</a></button></div></div><div class="my_movie_list_item shadow p-3 mb-5 bg-white rounded"><button type="button" class="btn btn-link my_tag"><a href="/tag/web2.0/">#web2.0</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/google/">#google</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/设计/">#设计</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/创意/">#创意</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/摄影/">#摄影</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/游戏/">#游戏</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/图片/">#图片</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/软件/">#软件</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/视频/">#视频</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/广告/">#广告</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/手机/">#手机</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/iphone/">#iphone</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/网站/">#网站</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/免费/">#免费</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/下载/">#下载</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/windows/">#windows</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/苹果/">#苹果</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/微软/">#微软</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/apple/">#apple</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/firefox/">#firefox</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/blog/">#blog</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/音乐/">#音乐</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/博客/">#博客</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/wordpress/">#wordpress</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/恶搞/">#恶搞</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/qq/">#qq</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/艺术/">#艺术</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/web/">#web</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/工具/">#工具</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/分享/">#分享</a></button></div></div></div><div id="my_footer"><div class=""><a href="/tags/">tags</a> <a href="/users/">users</a></div>&copy; 2020 diglog.com </div></div></body></html>