<!doctype html><html lang="zh-hans"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>速度提高Web字体的五个步骤 Five steps to faster web fonts</title><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"><link rel="stylesheet" href="/img/css.css?random="><link data-rh="true" rel="icon" href="/img/favicon.ico"/><script data-ad-client="ca-pub-6067137220025946" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script type="text/javascript" src="https://platform-api.sharethis.com/js/sharethis.js#property=5effb96910009800120b8d4d&product=inline-share-buttons" async="async"></script>
<script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?03c1a0f31299b4a2fbb83c34d6beaac9";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script></head><body><div id="my_header"><div class="container"><nav class="navbar navbar-expand-lg"><a class="navbar-brand" href="/"><img alt="diglog" src="/img/logo.v1.gif" class="rounded-sm"></a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarNavAltMarkup"><div class="navbar-nav"></div></div></nav></div></div><div class="container"><div id="my_content"><h1 class="page_narrow">Five steps to faster web fonts<br/>速度提高Web字体的五个步骤 </h1><div class="row"><div class="col-lg-12 col-12"><div class="my_story_list_item shadow p-3 mb-5 bg-white rounded"><div class="story_page_pub_time page_narrow">2021-05-15 23:51:33</div><div class="story_img_container"><a href="http://img2.diglog.com/img/2021/5/35e00d3226f2bae50f219bb8f1404d0c.png"><img src="http://img2.diglog.com/img/2021/5/35e00d3226f2bae50f219bb8f1404d0c.png" class="img-fluid my_story_img" onerror="this.style.display='none'"></a></div><div class="page_narrow text-break page_content"><p>Fine-tune your font files and optimise your loading strategy for maximum speed + minimum FOUT</p><p>微调您的字体文件并优化您的加载策略以获得最大速度+最小效果</p><p>  In my previous post, I wrote about system fonts and their advantages over web fonts. I encouraged a  ‘system fonts first’ approach, arguing that, compared to system fonts, web fonts (a) can negatively impact performance, (b) use more data, and (c) increase your site’s energy consumption. But a web without web fonts would be a far less interesting one — maybe by using web fonts a little more  responsibly we can get all their benefits, while minimising the disadvantages.</p><p>  在我以前的帖子中，我写了关于系统字体及其在Web字体上的优势。我鼓励一个“系统字体首先”方法，争论与系统字体相比，Web字体（A）可以产生负面影响性能，（b）使用更多数据，并且（c）增加您的网站的能耗。但是没有网络字体的网络将是一个更不趣的一个 - 也许通过使用Web Fonts更负责任地获得所有的好处，同时最大限度地减少缺点。</p><p> In part one of this guide, I’m going to cover the five methods for improving web font performance that I think offer the greatest gains for the least effort.</p><p> 在本指南的第一个中，我将介绍五种方法，以改善我认为最少的努力最大的收益。</p><p> Credit goes to Zach Leatherman, who has written at length about web fonts on his site. All of his articles are worth reading, especially   The Font Loading Checklist and   A Comprehensive Guide to Font Loading Strategies (which is indeed very comprehensive), both of which came in very useful while I was putting this post together.</p><p> 信用进入Zach LeaTherman，他们在他的网站上写下了关于Web Fonts的长度。他所有的文章都值得阅读，特别是字体加载清单和字体加载策略的全面指南（这确实非常全面），这两者都在我将这篇文章放在一起时非常有用。</p><p>   Web Open Font Format 2.0 ( ) is, at the time of writing, the smallest and most efficient file format for web fonts. When using  @font-face at-rules in your  , ensure the   font appears  before older, less efficient, file formats such as  . The browser will use the first font in the list it understands, even if it’s a larger file.</p><p>   Web Open字体格式2.0（）是在编写时，Web字体的最小和最有效的文件格式。在您使用@ Font-Face at-true时，请确保在较旧的，效率低，诸如此类的文件格式之前出现字体。浏览器将在它理解的列表中使用第一个字体，即使它是一个更大的文件。</p><p>  Unless you need to support IE8, you don’t need anything other than   and  . If you don’t need to support IE11, you only need  .</p><p>  除非您需要支持IE8，否则您不需要以外的任何东西。如果您不需要支持IE11，则只需要。</p><p> If you only have a   file (for example, if you’ve downloaded the font from Google Fonts), you’ll need to convert it using a tool like  Online Font Converter. If you’re not using a font with a fully open source license, first check whether the licence permits this.</p><p> 如果您只有文件（例如，如果您从Google字体下载字体），则需要使用在线字体转换器等工具转换它。如果您没有使用完全开源许可证的字体，请首先检查许可证是否允许此操作。 </p><p>  There are two acronyms you’ll see a lot when you start delving into font loading strategies:</p><p>当您开始浏览到字体加载策略时，您将看到很多缩写权：</p><p> Flash of  Invisible Text ( ) is the period of time when text is invisible before the browser has downloaded a web font.</p><p> 闪存的隐形文本（）是在浏览器下载Web字体之前文本不可见的时间段。</p><p> Flash of  Unstyled Text ( ) is the period of time where text is rendered in a fallback font before the browser has downloaded a web font.</p><p> Unstyled Text（）的闪存是在浏览器下载Web字体之前在后退字体中呈现文本的时间段。</p><p> Neither of these are ideal, but if you’re using web fonts, one of them is probably going to happen the first time a user visits your website (hopefully, by the second page load, the browser will be able to serve the fonts from its cache). If we take our font-face at-rule from before and add a  font-display descriptor, we can tell the browser which one we’d prefer.</p><p> 这些都不是理想的，但如果您使用的是Web字体，其中一个可能会在用户访问您的网站时可能会发生（希望通过第二页加载，浏览器将能够提供字体它的缓存）。如果我们从前从前拍摄的字体面，请添加字体显示描述符，我们可以告诉浏览器我们愿意的浏览器。</p><p>  There are five possible values for  font-display: the first,  auto is the browser’s default behaviour (most browsers favour  ). Here are the other four:</p><p>  字体显示有五种可能的值：第一个，auto是浏览器的默认行为（大多数浏览器青睐）。以下是另外四个：</p><p>   swap tells the browser we want it to show text using a fallback font until the web font is loaded (i.e. we’d prefer a  ). Whether this takes 5 seconds or 5 minutes, as soon as the font is loaded it will be swapped in. This is a good base because it lets website visitors start reading your content right away, but be sure to choose a similar fallback (we’ll cover fallbacks in part two of this series) to prevent a big layout shift when the fonts are swapped.</p><p>   Swap告诉浏览器我们希望它使用后退字体显示文本，直到加载Web字体（即我们更喜欢a）。一旦装载字体，这需要5秒或5分钟，它将被交换。这是一个很好的基础，因为它让网站访问者立即开始阅读您的内容，但请务必选择类似的回力（我们' LL覆盖本系列中的第二部分）中的回退，以防止在字体交换时的大布局偏移。</p><p>   If we’d rather the browser hides text until the web font is loaded (i.e. we’d rather a  ), we can use  font-display: block. Text won’t remain invisible forever though: if the font doesn’t load within a certain period (usually three seconds), the browser will use the fallback font anyway, swapping in the web font once it has loaded.</p><p>   如果我们宁愿浏览器隐藏文本，直到加载Web字体（即我们而来），我们可以使用字体显示：块。文本永远不会保持不可见：如果字体在某个时段内加载（通常是三秒钟），则浏览器将使用后退字体，一旦加载，就会在Web字体中交换。 </p><p> If this seems to you like the best option because you think the   looks bad, remember that when text is invisible, your page isn’t useable and your content isn’t readable.</p><p>如果这似乎是您喜欢最好的选择，因为您认为看起来很糟糕，请记住，当文本是不可见的时，您的页面无法使用，您的内容不可读取。</p><p>    It begins with an incredibly small (~100ms) &#39;block&#39; period where text is hidden, after which it shows the fallback font.</p><p>    它以令人难以置信的小（〜100ms）＆＃39开始;块＆＃39;隐藏文本的时间，之后它显示了回归字体。</p><p> If the web font doesn’t load within a short period (~3s), the fallback font will be used for the rest of the page’s lifetime.</p><p> 如果Web字体在短时间内没有加载（〜3s），则后退字体将用于页面的其余部分。</p><p> If you’re not fussed whether the user sees your web font the first time they visit your site (chances are they’re not that fussed themselves),  fallback is a good choice.</p><p> 如果您没有讨论用户第一次访问您的网站（机会，他们不是那么迷惑自己），则回归是一个不错的选择。</p><p>   optional is similar to  fallback, but it gives the font an extremely short period of time (~100ms) to load, after which it won’t be swapped. It does, however, have an additional feature where it lets the browser decide to abort the font request if the connection is too slow for the font to load.</p><p>   可选类似于回退，但它给出了最短的时间（〜100ms）加载的字体，之后不会交换。但是，它确实有一个附加功能，它允许浏览器决定如果连接太慢，则为要加载的速度太慢，则浏览器可以决定中止字体请求。</p><p>   To minimise the   period, we want to load our web font files as quickly as possible. Using  &lt;link rel=&#34;preload&#34;&gt; in our    &lt;head&gt;, we can tell the browser to start fetching our fonts earlier. Add the following tag towards the top of your  &lt;head&gt; (before any  ), setting the  href attribute to the   of your font file:</p><p>   要最大限度地减少此期间，我们希望尽快加载我们的Web字体文件。使用＆lt;链接rel =＆＃34;预加载＆＃34;＆gt;在我们的＆lt; head＆gt;，我们可以告诉浏览器早些时候开始获取我们的字体。将以下标记添加到您的顶部＆lt;头部＆gt; （之前），将href属性设置为字体文件：</p><p>  By adding this tag, we’re telling the browser to start loading our font file right away, whereas normally it wouldn’t begin until it’s found a reference to the specific font in your    and found a   element which uses it.</p><p>  通过添加此标记，我们会告诉浏览器立即开始加载我们的字体文件，而通常它不会开始，直到它找到对您的特定字体的引用并找到使用它的元素。 </p><p> Browsers are usually smart enough to only download fonts if they’re needed on the current page. Using  preload overrides this behaviour, forcing the browser to download a font even if it isn’t used. For this reason, only ever preload a single format of each font (  if you have it).</p><p>浏览器通常智能足以仅在当前页面上需要下载字体。使用预加载覆盖此行为，迫使浏览器下载字体即使它不使用。出于这个原因，只需预先加载每个字体的单一格式（如果您拥有它）。</p><p> The more fonts you preload, the less benefit you’ll get from this technique, so prioritise those fonts which appear ‘above the fold’ (the first  100vh the user sees without scrolling).</p><p> 您预加载的字体越多，您可以从这种技术获得的较少，因此优先考虑显示在折叠之上'的字体（用户看到的第一个100VH而不滚动）。</p><p> You can read more about preloading in this article by Yoav Weiss:   Preload: What Is It Good For?</p><p> 您可以通过Yoav Weiss在本文中阅读更多关于预装的信息：预加载：什么是好的？</p><p>  By subsetting a font, we can generate a new smaller font file which only includes the glyphs (a glyph is an individual character or symbol) we need. I used the  Font Subsetter tool on Everything Fonts to subset the font used for headings on this site,  Space Grotesk Bold, to only include characters in the ‘Basic Latin’ range. This reduced the filesize of the   version from 30kB to just 7kB.</p><p>  通过子集字体，我们可以生成一个新的较小字体文件，该文件仅包括我们所需要的字形（字形是一个单独的字符或符号）。我在所有字体上使用字体子遗料工具子集在本网站上的标题中用于标题的字体，空间Grotesk粗体，只包含“基本拉丁语”范围中的字符。这将文件大小从30kb减少到仅为7kb。</p><p> Subsetting is a powerful tool, but it does come with some potential downsides. If you’re building a website that displays user-generated content, people’s names, or place names you should consider characters other than the 26 standard letters, 10 numbers, and handful of symbols common in English writing.</p><p> 子集是一个强大的工具，但它确实带有一些潜在的缺点。如果您正在构建一个显示用户生成的内容的网站，人们的名字或地点名称，您应该考虑除26标准字母，10个数字和少数英语写作中常见的字符之外的字符。</p><p> As a minimum, you should think about diacritics: glyphs that appear above or below a character which alter its pronunciation. These are common in languages including French, Spanish, Vietnamese, as well as transliterated (or ‘romanised’) text from alphabets like Greek or Hebrew; they also appear in loanwords (words adopted from another language).</p><p> 至少，您应该考虑变形物：在一个字符上方或下方改变发音的字形。这些是语言中的常见，包括法语，西班牙语，越南语，以及来自希腊语或希伯来语等字母的音译（或“罗马化”）文本;他们也出现在借词（来自另一种语言的单词）。</p><p> If you subset too aggressively, you could even end up with a mix of fonts in the same word.</p><p> 如果您太积极地分组，您甚至可以在同一个字中最终结束字体。 </p><p>  Fortunately, you don’t have to manually check every page on your site for different glyphs.  Glyphhanger is a command line tool, which does two things: firstly, it looks at your webpages and determines the Unicode character ranges used (these ranges correspond to a script or language. e.g. ‘Basic Latin’, ‘Cyrillic’, ‘Thai’); secondly it subsets a font file, outputting a new version containing only the characters in the specified ranges.</p><p>幸运的是，您不必手动检查您网站上的每个页面以获取不同的字形。 glyphanger是一个命令行工具，这是两件事：首先，它看起来，看看你的网页并确定所用的Unicode字符范围（这些范围对应于脚本或语言。例如，“基本拉丁语”，'西里尔'，'泰语'） ;其次，它将字体文件集成，输出仅包含指定范围中字符的新版本。</p><p> It can be a little tricky to get started with Glyphhanger (you’ll need python and pip) — Sara Soueidan’s explains how she got it working here:   How I set up Glyphhanger on macOS for optimizing and converting font files for the Web.</p><p> 使用Glyphanger开始（您需要Python和Pip）可能有点棘手（您需要Python和Pip） -  Sara Soueidan的解释了她如何在这里完成它：如何在摩托车上设置Glyphanger以优化和转换Web的字体文件。</p><p>   This isn’t a universal rule like most of the other points here. There are two good reasons why you might want to use a hosted service like  Google Fonts or  Adobe Fonts:</p><p>   这不是一个普遍的规则，如这里的大多数点。您可能希望使用像Google字体或Adobe字体等托管服务的原因有两个好的原因：</p><p> They’re often the cheapest or  only legal way to use certain typefaces on the web: If you’ve got no choice but to use one of these services, find out if it supports subsetting or adding  font-display descriptors.</p><p> 它们通常是在Web上使用某些字体的最便宜或唯一的法律方式：如果您别无选择，只能使用其中一个服务，找出它是否支持子集或添加字体显示描述符。</p><p> They’re convenient: Copying and pasting a line of   into your site’s  &lt;head&gt; is going to be faster than the alternative: downloading font files, converting and subsetting font files, then writing  @font-face at-rules for each weight and style.</p><p> 它们是方便：将一行中的一行复制和粘贴到您的网站的＆lt; head＆gt;将速度快于替代方案：下载字体文件，转换和子集字体文件，然后在每种重量和样式编写@ Font-Face at-true。</p><p> If you’re still using Google Fonts purely because of the convenience, take a look at  google-webfonts-helper. This tool lets you build a custom web font bundle from the complete set of Google fonts, define the weights and character sets you need, then gives you a single download containing all the   and font files (in the latest formats) you need.</p><p> 如果您仍然纯粹是因为方便而使用谷歌字体，请查看Google-Webfonts-Helper。此工具允许您从完整的Google字体集中构建自定义Web字体捆绑包，定义所需的权重和字符集，然后为您提供包含所需的所有和字体文件（以最新格式）的单一下载。</p><p>  Here are a list of good reasons  not to use a hosted service and self-host your fonts instead:</p><p>  以下是不使用托管服务和自主主机的最佳理由的列表，而不是： </p><p>  Domain lookups take time; you can use   preconnect resource hints to mitigate the issue, but there will always be a performance penalty for opening a   connection to a new domain. This might be why some of Google’s own sites (including  web.dev) now use self-hosted fonts instead of Google Fonts.</p><p>域名查找需要时间;您可以使用Preconnonnect资源提示来缓解此问题，但将始终会有用于打开与新域的连接的性能损失。这可能是为什么谷歌自己的网站（包括web.dev）现在使用自主托管字体而不是谷歌字体。</p><p>  Paid-for web font services like Adobe Fonts need to detect page views for billing purposes, but they may be collecting more data than is strictly necessary. If you’re given the choice, load your fonts using   ( &lt;link rel=&#34;stylesheet&#34;&gt;), instead of JavaScript ( &lt;script&gt;), to minimise the amount of data the third-party is able to collect about your users.</p><p>  像Adobe字体等支付Web字体服务需要检测页面视图以获取计费目的，但它们可能收集比严格必需的更多数据。如果您选择了选择，请使用（＆lt;链接rel＆＃34; stylesheet＆＃34;＆gt;）加载您的字体，而不是JavaScript（＆lt; script＆gt;），以最小化第三方的数据量能够收集您的用户。</p><p> Google Fonts doesn’t appear to collect much on website visitors beyond IP addresses and User Agent strings, but Google aren’t acting completely selflessly by providing the service for free. Each one of the fifty trillion  [3] page views using Google Fonts is a data point Google wouldn’t have if the websites chose to use self-hosted fonts instead.</p><p> 谷歌字体似乎没有在网站访问者超出IP地址和用户代理字符串的访问者上收集很多，但谷歌通过为免费提供服务而不是完全无私的。使用Google字体的五十万亿[3]页面视图中的每一个都是一个数据点，如果网站选择使用自托管字体，则Google将没有。</p><p>  With self-hosted fonts you have ultimate control over exactly how you load your fonts, allowing you to serve custom subsets, define  font-display settings, and specify how long the browser should cache font files for.</p><p>  使用自托管字体，您可以完全控制您加载字体的终极控制，允许您为自定义子集提供服务，定义字体显示设置，并指定浏览器应该缓存字体文件的长度。</p><p>  Third-party services can suffer slowdowns, outages, or  shut down altogether. When self-hosting your fonts, as long as your website is up, your fonts will be available.</p><p>  第三方服务可以完全遭受放缓，中断或关闭。只要您的网站即将到来，您的字体就会提供时，您的字体将可用。</p><p>  Each of these steps can have a benefit on its own, but used together can lead to big improvements. If you decide to implement some of the steps covered in this article, try using a tool like  Lighthouse or  Web Page Test before and after you make changes, to see the effect of each individual change.</p><p>  这些步骤中的每一个都可以自己有益，但一起使用可能导致大改善。如果您决定在本文中介绍的一些步骤中，请尝试使用灯塔或网页测试等工具进行更改后，从而查看每个单独的更改的效果。</p><p> In part two, we’ll cover some more advanced techniques including JavaScript font loading strategies and variable fonts. We’ll also see the importance of choosing the right fallback fonts and introduce a new acronym —  , the Flash Of  Faux Text.</p><p> 在第二部分中，我们将介绍一些更高级的技术，包括JavaScript字体加载策略和可变字体。我们还将看到选择正确的后备字体并介绍新的首字母缩略词 - ，FAUX文本的闪光。 </p></div><div id="story_share_this"><div class="sharethis-inline-share-buttons"></div></div><div class="text-break sotry_link page_narrow"><a target="_blank" href="https://iainbean.com/posts/2021/5-steps-to-faster-web-fonts/">https://iainbean.com/posts/2021/5-steps-to-faster-web-fonts/</a></div><div class="story_tags page_narrow"><button type="button" class="btn btn-light my_tag"><a href="/tag/字体/">#字体</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/提高/">#提高</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/faster/">#faster</a></button></div></div><div class="my_movie_list_item shadow p-3 mb-5 bg-white rounded"><button type="button" class="btn btn-link my_tag"><a href="/tag/web2.0/">#web2.0</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/google/">#google</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/设计/">#设计</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/创意/">#创意</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/摄影/">#摄影</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/游戏/">#游戏</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/图片/">#图片</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/软件/">#软件</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/视频/">#视频</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/手机/">#手机</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/广告/">#广告</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/apple/">#apple</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/iphone/">#iphone</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/网站/">#网站</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/免费/">#免费</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/下载/">#下载</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/windows/">#windows</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/微软/">#微软</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/firefox/">#firefox</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/苹果/">#苹果</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/blog/">#blog</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/音乐/">#音乐</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/博客/">#博客</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/wordpress/">#wordpress</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/恶搞/">#恶搞</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/艺术/">#艺术</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/qq/">#qq</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/web/">#web</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/谷歌/">#谷歌</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/工具/">#工具</a></button></div></div></div><div id="my_footer"><div class=""><a href="/tags/">tags</a> <a href="/users/">users</a></div>&copy;2012-2021 diglog.com </div></div></body></html>