<!doctype html><html lang="zh-hans"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Git重置说明-如何使用重置命令保存一天</title><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"><link rel="stylesheet" href="/img/css.css?random="><link data-rh="true" rel="icon" href="/img/favicon.ico"/><script data-ad-client="ca-pub-6067137220025946" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script type="text/javascript" src="https://platform-api.sharethis.com/js/sharethis.js#property=5effb96910009800120b8d4d&product=inline-share-buttons" async="async"></script>
<script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?03c1a0f31299b4a2fbb83c34d6beaac9";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script></head><body><div id="my_header"><div class="container"><nav class="navbar navbar-expand-lg"><a class="navbar-brand" href="/"><img alt="diglog" src="/img/logo.v1.gif" class="rounded-sm"></a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarNavAltMarkup"><div class="navbar-nav"></div></div></nav></div></div><div class="container"><div id="my_content"><h1 class="page_narrow">Git重置说明-如何使用重置命令保存一天</h1><div class="row"><div class="col-lg-12 col-12"><div class="my_story_list_item shadow p-3 mb-5 bg-white rounded"><div class="story_page_pub_time page_narrow">2020-10-01 05:21:52</div><div class="story_img_container"><a href="http://img2.diglog.com/img/2020/10/74e516122e07772d521b1ec7b8ac92b8.jpeg"><img src="http://img2.diglog.com/img/2020/10/74e516122e07772d521b1ec7b8ac92b8.jpeg" class="img-fluid my_story_img" onerror="this.style.display='none'"></a></div><div class="page_narrow text-break page_content"><p>这听起来耳熟吗？“救命！我上错了分店！“。“它又发生了，…。我的承诺呢？“。</p><p>嗯，我去过那里好多次了。当GIT出问题时，有人叫我的名字来帮忙。这不仅发生在我教学生的时候，也发生在与经验丰富的开发人员一起工作的时候。</p><p>我们一直使用git，通常  它帮助我们完成工作。但有时，事情会出差错，而且这种情况比我们想要的要频繁得多。</p><p>也许我们承诺了错误的分支机构。也许我们丢失了我们编写的一些代码。也许我们做了一些我们不想做的事。</p><p>有很多关于GIT的在线资源，其中一些(比如这个)实际上关注的是在这些不受欢迎的场景中会发生什么。</p><p>但我总觉得这些资源缺乏“为什么”的 。当提供一组命令 时，每个命令执行什么操作？那你是怎么得到这些命令的呢？🤔。</p><p>在上一篇文章中，我提供了Git内部的可视化介绍。虽然了解git的内部原理很有用，但获得理论知识几乎永远不够。我们如何应用我们对git内部结构的知识，并用它来解决我们已经陷入的问题呢？</p><p>在这篇文章中，我想要弥合这一差距，  并详细说明git重置命令。我们将了解Git Reset在幕后做些什么，然后将这些知识应用到解决各种场景中。😎</p><p>为了了解GIT重置的内部机制，了解在GIT 中记录更改的过程非常重要。具体地说，我指的是工作目录、索引和存储库。</p><p>如果您对这些术语有信心，请随意跳到下一节。如果你想要更深入的解释，请看上一篇文章。</p><p>当我们处理源代码时，我们从工作目录 - 文件系统上有关联存储库的任何目录开始工作。它包含我们项目的文件夹和文件，还有一个名为.git的目录。</p><p>在我们做了一些更改之后，我们希望将它们记录在我们的存储库中。存储库(简称repo)是提交的集合，每个提交都是项目工作树在过去日期的存档，无论是在我们的机器上还是在其他人的机器上。</p><p>相反，更改首先在称为索引或临时区域的东西中注册。这两个术语指的是同一件事，它们经常在git文档中使用。我们将在这篇文章中互换使用这些术语。</p><p>当我们使用git add时，我们将文件(或文件中的更改)添加到临时区域。让我们在前面创建的文件上使用此命令：</p><p>正如git状态所显示的那样，我们的文件已经准备就绪(并且准备好“提交”)。然而，它不是任何提交的一部分。换句话说，它现在位于工作目录和索引中，但不在存储库中。</p><p>接下来，当我们使用git COMMIT时，我们根据索引的状态创建一个COMMIT。因此，新的COMMIT(下面示例中的COMMIT 3)将包括预先添加到索引中的文件。</p><p>换句话说，工作目录与索引和存储库具有完全相同的状态。</p><p>命令git Commit还使当前分支主机指向新创建的提交对象。</p><p>我喜欢将git Reset看作是一个命令，它可以逆转上述过程(对工作目录进行更改，将其添加到索引中，然后将其提交到存储库)。</p><p>Git重置有三种操作模式 - --软、--混合或--硬。我认为它们有三个阶段：</p><p>首先，git重置会更新head指向的任何内容。对于GIT RESET--HARD HEAD~1，它会将HEAD指向的内容(在上例中为MASTER)移动到HEAD~1。如果使用 - -SOFT标志，GIT RESET将停止。</p><p>继续上面的示例，head将指向Commit 2，因此new_file.txt将不是当前提交树的一部分。然而，它将是索引和工作目录的一部分。</p><p>查看git状态，我们可以看到文件确实已暂存但未提交：</p><p>换句话说，我们将流程恢复到使用git add，但尚未使用git Commit的阶段。</p><p>如果我们使用git Reset--MIXED HEAD~1，那么在将指向(Master)的任何head更新为head~1之后，git不会停止。它还会将索引更新为(已经更新的)head。</p><p>在我们的示例中，这意味着索引将具有与提交2相同的状态：</p><p>因此，在使用git add - 之前，我们将流程恢复到阶段新创建的文件现在是工作目录的一部分，但索引和存储库不是。</p><p>通过使用GIT重置 - Hard Head~1，在将指向(主)的任何Head更新为Head~1之后，以及将索引更新为(已经更新的)Head之后，GIT将继续并更新工作目录以使其看起来像索引。</p><p>在我们的示例中，这意味着工作目录将具有与索引相同的状态，而索引已经具有与提交2相同的状态：</p><p>现在我们了解了GIT重置是如何工作的，让我们应用这些知识来拯救我们的生活吧！💪。</p><p>让我们考虑一下以下情况。我们用字符串this创建了一个非常重要的文件，暂存并提交了它。</p><p>嗯，现在我们知道我们可以很容易地解决这个问题了。我们可以恢复上次提交，并使用git Reset--MIXED HEAD~1将文件返回到工作目录。现在，我们可以编辑文件的内容，暂存并再次提交它。</p><p>提示：在这种特定情况下，我们还可以使用git Commit--amendate，如下所述。</p><p>2.哎呀！我将某些内容提交给了错误的分支机构 - ，我需要在新的分支机构上使用它。</p><p>我们都有过这样的经历。我们做了一些工作，然后提交给…。</p><p>哦，不，我们承诺了主分支，尽管我们应该创建一个新分支，然后发出拉取请求。🙈。</p><p>在这个阶段，我发现将我们所处的状态以及我们想要达到的目标形象化是很有帮助的：</p><p>首先，新分支指向我们最近添加的提交。其次，主服务器指向前一次提交。第三，Head指向new。</p><p>首先，使新的分支指向最近添加的提交 - ，这可以通过使用GIT BRANCH NEW简单地实现。因此，我们达到以下状态：</p><p>其次，让master指向前一次提交(换句话说，指向head~1)。我们可以通过使用GIT RESET--HARD HEAD~1来实现这一点。因此，我们达到了以下状态：</p><p>最后，我们想要在新的分支上，也就是说，把头指向新的。这很容易通过执行git checkout new来实现。</p><p>3.哎呀！我将某些内容提交给了错误的分支 - ，并且我需要在另一个已存在的分支上使用它。</p><p>在本例中，我们经历了与前一个场景中相同的步骤 - 我们做了一些工作，然后提交了…。</p><p>哦，不，我们承诺了主分支机构，尽管我们应该承诺另一个已经存在的分支机构。🙈。</p><p>首先，我们需要现有分支上的最新提交。由于master当前指向它，我们可以简单地要求git从master分支获取最近的提交，并将其应用于现有分支，如下所示：</p><p>GIT挑选主 - 将主分支上的最后一次提交应用于当前(现有)分支。</p><p>现在我们只需要让master指向以前的提交，而不是最近的提交。为此，我们可以：</p><p>GIT重置--Hard Head~1 - 现在我们回到原来的分支。</p><p>在这篇文章中，我们了解了GIT Reset是如何运行的，并阐明了它的三种操作模式 - --Soft、--Mixed和--Hard。</p><p>然后，我们应用我们关于git重置的知识来解决一些使用git的实际问题。</p><p>通过了解git的操作方式，我们可以自信地处理各种情况，并且 也会欣赏这个工具😎的美妙之处。</p><p>在以后的帖子中，我们将介绍更多的git命令，以及它们如何帮助我们解决各种不受欢迎的情况。</p><p>Omer Rosenbaum，Swimm的首席技术官。网络培训专家和Checkpoint Security Academy的创始人。“计算机网络”(希伯来语)的作者。访问我的YouTube频道。</p><p>免费学习编码。FreeCodeCamp的开源课程已经帮助超过4万人找到了开发人员的工作。开始</p></div><div id="story_share_this"><div class="sharethis-inline-share-buttons"></div></div><div class="text-break sotry_link page_narrow"><a target="_blank" href="https://www.freecodecamp.org/news/save-the-day-with-git-reset/">https://www.freecodecamp.org/news/save-the-day-with-git-reset/</a></div><div class="story_tags page_narrow"><button type="button" class="btn btn-light my_tag"><a href="/tag/重置/">#重置</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/reset/">#reset</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/git/">#git</a></button></div></div><div class="my_movie_list_item shadow p-3 mb-5 bg-white rounded"><button type="button" class="btn btn-link my_tag"><a href="/tag/web2.0/">#web2.0</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/google/">#google</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/设计/">#设计</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/创意/">#创意</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/摄影/">#摄影</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/游戏/">#游戏</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/图片/">#图片</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/软件/">#软件</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/视频/">#视频</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/手机/">#手机</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/广告/">#广告</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/apple/">#apple</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/iphone/">#iphone</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/网站/">#网站</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/免费/">#免费</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/下载/">#下载</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/windows/">#windows</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/微软/">#微软</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/firefox/">#firefox</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/苹果/">#苹果</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/blog/">#blog</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/音乐/">#音乐</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/博客/">#博客</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/wordpress/">#wordpress</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/恶搞/">#恶搞</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/艺术/">#艺术</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/qq/">#qq</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/web/">#web</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/谷歌/">#谷歌</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/工具/">#工具</a></button></div></div></div><div id="my_footer"><div class=""><a href="/tags/">tags</a> <a href="/users/">users</a></div>&copy;2012-2021 diglog.com </div></div></body></html>