<!doctype html><html lang="zh-hans"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>LLVM 11.0</title><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"><link rel="stylesheet" href="/img/css.css?random="><link data-rh="true" rel="icon" href="/img/favicon.ico"/><script data-ad-client="ca-pub-6067137220025946" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script type="text/javascript" src="https://platform-api.sharethis.com/js/sharethis.js#property=5effb96910009800120b8d4d&product=inline-share-buttons" async="async"></script>
<script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?03c1a0f31299b4a2fbb83c34d6beaac9";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script></head><body><div id="my_header"><div class="container"><nav class="navbar navbar-expand-lg"><a class="navbar-brand" href="/"><img alt="diglog" src="/img/logo.v1.gif" class="rounded-sm"></a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarNavAltMarkup"><div class="navbar-nav"></div></div></nav></div></div><div class="container"><div id="my_content"><h1 class="page_narrow">LLVM 11.0</h1><div class="row"><div class="col-lg-12 col-12"><div class="my_story_list_item shadow p-3 mb-5 bg-white rounded"><div class="story_page_pub_time page_narrow">2020-10-13 20:00:55</div><div class="page_narrow text-break page_content"><p>增加了调用点属性Vector-Function-ABI-Variant来描述标量函数和向量函数之间的映射，以实现调用点的矢量化。属性提供的信息通过VFDatabase类提供的API进行接口。当扫描与标量调用相关联的向量函数集时，循环向量器现在依赖于VFDatabase，而不是TargetLibraryInfo。</p><p>指针上的可解除引用的属性和元数据不再隐含任何有关有问题的指针对齐的内容。以前，一些优化会根据指针的类型进行假设。这种行为没有记录在案。为了保持优化，可能需要更新前端以生成适当的对齐属性和元数据。</p><p>扩展DIModule元数据以包含文件和行号信息。此信息用于表示IR级的Fortran模块调试信息。</p><p>LLVM IR现在支持两种截然不同的llvm：：FixedVectorType和llvm：：ScalableVectorType向量类型，两者都派生自基类llvm：：VectorType。许多处理IR矢量类型的算法已经更新，以确保它们既适用于可缩放矢量类型，也适用于固定矢量类型。在可能的情况下，使用基类使代码泛型以涵盖这两种情况。具体地说，以前使用类型UNSIGNED来计算向量翼数的位置现在使用llvm：：ElementCount。在使用uint64_t表示IR类型的位数的地方，我们已经将代码库部分迁移到使用llvm：：TypeSize。</p><p>在undef/毒性上进行分支是未定义的行为。它是根据分支条件正确分析取值范围所必需的。这也与MSAN的行为一致。</p><p>将undef/posis传递给标准I/O库函数调用(printf/fputc/…)。是未定义的行为。新的noundef属性附加到函数的参数中。完整列表位于llvm：：inherLibFuncAttributes。</p><p>LLVM项目已经开始向Python3迁移，而buildsystem现在更喜欢Python3。如果找不到Python 3解释器(或库)，构建系统将暂时回退到Python 2。建议下游项目迁移到Python 3，因为Python 2已被Python Software Foundation淘汰。</p><p>当以COFF为目标时，对于不支持的位置调整显然是错误的，而不是默默接受一些(无法执行所请求的操作)。</p><p>为SVE(00bet5版)的ARM C语言扩展(ACLE)中记录的SVE C语言内部实现了代码生成支持。有关更多信息，请参阅clang 11发行说明。</p><p>支持ARMv8.2-BF16BFloat16扩展。这包括一个新的仅支持C级存储的__bf16类型、一个BFloat IR类型、一个bf16 MVT，以及对汇编和内部的支持。</p><p>为完整的ARM v8.1-M MVE指令集实现了C语言内部功能。&lt；arm_mve.h&gt；现在支持ARM CLanguage扩展中定义的完整API。</p><p>在启用优化的情况下，当针对ARM和Thumb的非AndroidLinux时，clang现在默认为-fomit-frame-Pointer。以前没有指定值并依赖隐式编译器缺省值的用户可能希望指定-fno-omit-frame-pointer来获取旧行为。这提高了与GCC的兼容性。</p><p>支持ARMv8.2-AA32BF16 BFloat16扩展。这包括新的纯存储__bf16类型、BFloat IR类型、bf16 MVT以及汇编和内部支持。</p><p>现在，ARM和Thumb2支持机器大纲视图，默认情况下未启用，可以使用-mOutline clang标志启用。</p><p>改进的循环展开和阻塞合法性检查，允许它处理两个以上级别的循环嵌套。</p><p>实现了允许循环融合在具有不同恒定跳闸计数的循环上工作的选项</p><p>启用编译和链接，以便简单的&lt；stdio.h&gt；“Hello World”程序使用标准标头。</p><p>在llvm-objdump中，添加了对重新定位的支持，改进了符号标签的选择，并添加了-Symbol-Description选项。</p><p>通过RFC协商后，RISC-V后端现在接受尚未批准的建议指令集扩展的补丁。对于这些实验性扩展，不会期望持续的支持-编译器支持将继续更改，直到规范最终确定。根据这一政策，为建议的位操作扩展的0.92版添加了MC层和代码生成支持，为建议的RISC-V矢量指令集扩展的0.8版添加了MC层支持。由于这些扩展尚未获得批准，编译器支持将继续更改以与规范相匹配，直到最终确定为止。</p><p>如果可以使用一对ADDI指令生成立即数，则将选择该对，而不是将立即数具体化到具有LUI和ADDI对的独立寄存器中。</p><p>ADDI指令现在被折叠到加载/存储指令的偏移量中，即使加载/存储本身具有非零偏移量，当可以安全地执行DOSO时也是如此。</p><p>RISC-V后端的加载/存储窥孔优化通道现在支持浮点常量池，从而改进了浮点常量的代码生成。</p><p>除传统数据暂存寄存器名称外，现在还可以识别调试暂存寄存器名称dscrch0和dscrch1。</p><p>现在，程序集中支持.option pic和.option ntop.relocWAS扩展为支持任意重定位类型。</p><p>计算出的原子伪操作展开大小是固定的，避免了某些输入在分支松弛时出现“修正值超出范围”的错误。</p><p>现在发出正确的库调用，以便在没有F或D扩展名的RV64目标上将浮点/双精度数转换为32位有符号或无符号整数。</p><p>增强了汇编器解析器，即使在地址寄存器上下文中也允许使用%r0，并允许使用纯整数来指定寄存器，而不是到处使用寄存器名称。</p><p>修复了在传递仅具有单个成员离散点类型的C++类(非结构)类型时违反平台ABI的错误代码生成。</p><p>修复了使用具有16或更大立即长度参数的vec_store_len_r或vec_load_len_r内部函数时错误的代码生成。</p><p>探测堆栈属性设置为“inline-asm”的函数现在受到保护，不会发生堆栈冲突，不需要第三方探测函数，并且对性能的影响有限。</p><p>-x86-enable-old-knl-abi命令行开关已删除。当avx512f使能而avx512bwis禁用时，v32i16/v64i8矢量始终传递到ZMM寄存器中。</p><p>启用avx512f时，i16或i8元素的大于512位的向量将在多个ZMM寄存器中传递。以前，这需要davx512bw，否则它们将被分成多个YMM寄存器。这意味着将vxi16/vxi8矢量一致地视为总宽度相同的vxi32/vxi64/vxf64/vxf32矢量。</p><p>添加了推测性执行副作用抑制通道，可将其用作与推测性执行相关的CPU漏洞的最后手段缓解。</p><p>扩展了旋转模式识别以处理漏斗移动，允许我们删除现有的特定于x86的SHLD/SHRD组合。</p><p>对于所有计算函数类型的所有目标，后端默认非正规处理模式已切换为ON。希望保留旧行为的前端应明确请求F32反正常刷新。</p><p>从实验后端转移到官方后端。AVR支持现在默认包含在所有LLVM构建和发布中，并且在“AVR-UNKNOWN-UNKNOWN”目标三元组下可用。</p><p>没有“主”函数(称为“反应器”)的程序现在可以正确支持，并带有一个新的-mexec-model=反应器标志。以前使用-wl，-no-entry来避免主函数的程序应该切换到这个新标志，以便正确地执行静态初始化。</p><p>__ATTRIBUTE__((Visibility(“Protected”)现在会发出警告，因为WebAssembly不支持“Protected”可见性。</p><p>为没有COMDAT的IR级弱符号生成COFF弱外部符号(例如，对于C中的__ATTRIBUTE__((弱)。</p><p>SelDag级冻结指令已落地。它被简单地降低为对MachineIR的复制操作，但是要使其完全正确，要么应该修复IMPLICIT_DEF，要么应该将等效的冻结操作添加到MachineIR。</p><p>--plugin-opt=Whole-Program-Visibility用于指定类在使用-fall-program-vtables编译的源文件的LTO和ThinLTO链接中具有隐藏的LTO可见性。有关详细信息，请参阅LTOVisibility。(D71913)。</p><p>向llvm-dwarfdump添加了一个选项(-show-Section-size)，以显示文件中所有调试节的大小。</p><p>Llvm-nm现在实现了标志--Special-syms，默认情况下将过滤掉特殊符号，即映射ARM和AArch64上的符号。这与GNU nm的行为相匹配。</p><p>Llvm-rc现在允许-1作为菜单项ID，支持语言ID选项，并允许将字符串表值拆分为多个字符串文字</p></div><div id="story_share_this"><div class="sharethis-inline-share-buttons"></div></div><div class="text-break sotry_link page_narrow"><a target="_blank" href="https://releases.llvm.org/11.0.0/docs/ReleaseNotes.html">https://releases.llvm.org/11.0.0/docs/ReleaseNotes.html</a></div><div class="story_tags page_narrow"><button type="button" class="btn btn-light my_tag"><a href="/tag/llvm/">#llvm</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/现在/">#现在</a></button></div></div><div class="my_movie_list_item shadow p-3 mb-5 bg-white rounded"><button type="button" class="btn btn-link my_tag"><a href="/tag/web2.0/">#web2.0</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/google/">#google</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/设计/">#设计</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/创意/">#创意</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/摄影/">#摄影</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/游戏/">#游戏</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/图片/">#图片</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/软件/">#软件</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/视频/">#视频</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/手机/">#手机</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/广告/">#广告</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/apple/">#apple</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/iphone/">#iphone</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/网站/">#网站</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/免费/">#免费</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/下载/">#下载</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/windows/">#windows</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/微软/">#微软</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/firefox/">#firefox</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/苹果/">#苹果</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/blog/">#blog</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/音乐/">#音乐</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/博客/">#博客</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/wordpress/">#wordpress</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/恶搞/">#恶搞</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/艺术/">#艺术</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/qq/">#qq</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/web/">#web</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/谷歌/">#谷歌</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/工具/">#工具</a></button></div></div></div><div id="my_footer"><div class=""><a href="/tags/">tags</a> <a href="/users/">users</a></div>&copy;2012-2021 diglog.com </div></div></body></html>