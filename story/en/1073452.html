<!doctype html><html lang="zh-hans"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>基本网络故障排除Basic Network Troubleshooting</title><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"><link rel="stylesheet" href="/img/css.css?random="><link data-rh="true" rel="icon" href="/img/favicon.ico"/><script data-ad-client="ca-pub-6067137220025946" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script type="text/javascript" src="https://platform-api.sharethis.com/js/sharethis.js#property=5effb96910009800120b8d4d&product=inline-share-buttons" async="async"></script>
<script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?03c1a0f31299b4a2fbb83c34d6beaac9";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script></head><body><div id="my_header"><div class="container"><nav class="navbar navbar-expand-lg"><a class="navbar-brand" href="/"><img alt="diglog" src="/img/logo.v1.gif" class="rounded-sm"></a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarNavAltMarkup"><div class="navbar-nav"></div></div></nav></div></div><div class="container"><div id="my_content"><h1 class="page_narrow">Basic Network Troubleshooting<br/>基本网络故障排除</h1><div class="row"><div class="col-lg-12 col-12"><div class="my_story_list_item shadow p-3 mb-5 bg-white rounded"><div class="story_page_pub_time page_narrow">2022-02-15 15:14:09</div><div class="page_narrow text-break page_content"><p>Opinions, mostly my own, on the importance of being and other things.          There are many possiblereasons for why you are unable to connect to a remotesystem, and no, it&#39;s  not always the DNS. Being able to quicklyidentify what the most likely cause of the problem is(or: who would be in a position to fix it) is a usefulskill, yet I often see even senior engineers wastetime chasing false flags and red herrings when certainproblems could quickly be ruled out by a betterunderstanding of the specific meaning of the variouserror messages you might encounter.</p><p>关于存在和其他事情的重要性的观点，主要是我自己的观点。有很多可能的原因导致你无法连接到远程系统，不，它&#39；它并不总是DNS。能够快速确定问题最可能的原因是什么（或者：谁能解决问题）是一项有用的技能，然而，我经常看到，即使是高级工程师也会浪费时间去追逐虚假的信号和转移注意力，因为通过更好地理解可能遇到的各种错误信息的具体含义，可以很快排除某些问题。</p><p> The best way to cut down on wasted time is toquickly answer the question: &#34;  Is it the DNS,the network, or the app?&#34; To help you answerthis question and troubleshoot more efficiently,here&#39;s a quick explanation of the most common errorscenarios and how to quickly identify at least where the problem is likely to lie, all basedon this one weird trick: reading and understanding theerror message.</p><p>减少浪费时间的最佳方法是快速回答以下问题：&#34；是DNS、网络还是应用程序&#34; 为了帮助您更有效地回答这个问题并排除故障，请点击这里&#39；这是对最常见的错误场景的快速解释，以及如何快速确定问题可能存在的位置，所有这些都基于一个奇怪的技巧：阅读和理解错误信息。</p><p>    macos$ ssh foo.netmeister.orgssh: Could not resolve hostname foo.netmeister.org: nodename nor servname provided, or not knownornetbsd$ ssh foo.netmeister.orgssh: Could not resolve hostname foo.netmeister.org: No address associated with hostname$</p><p>macos$ssh-foo。内特迈斯特。orgssh:无法解析主机名foo。内特迈斯特。org:nodename或servname提供，或不知道nornetbsd$ssh foo。内特迈斯特。orgssh:无法解析主机名foo。内特迈斯特。组织：没有与主机名关联的地址$</p><p> Hooold it. No need to whip out  ping(8), traceroute(8), and  tcpdump(1) justyet -- this is an easy one. It tells you right therewhat the problem is:  could not resolve. Thatis, you never even got to the point where your systemtried to send any packets to the remote side, becauseit couldn&#39;t translate the name   foo.netmeister.org into an IPaddress. (Different tools and even different versionsof the same tool on different platforms may giveslightly different error messages, as shownabove.)</p><p>好极了。现在还不需要发出ping（8）、traceroute（8）和tcpdump（1）——这是一个简单的方法。它告诉你问题是什么：无法解决。也就是说，你甚至没有达到系统试图向远程端发送任何数据包的程度，因为它无法&#39；不要翻译foo这个名字。内特迈斯特。组织成一个IP地址。（不同的工具，甚至同一工具在不同平台上的不同版本，可能会给出略有不同的错误消息，如上图所示。）</p><p> In this case, you want to find out  why youcan&#39;t resolve the name. For starters, make sure youdon&#39;t have a typo there: it&#39;s easy to accidentallyslip in an extra letter or fatfinger a domain name.But suppose you are sure you have the right name, whatcan you check?</p><p>在这种情况下，你想知道为什么你可以&#39；无法解析名称。首先，确保你不&#39；这里没有输入错误：它&#39；It’很容易意外地插入一个额外的字母或是一个域名。但是假设你确定你的名字是对的，你能查到什么？</p><p>   $ dig +short netmeister.org nsns-181-a.gandi.net.ns-143-b.gandi.net.ns-179-c.gandi.net.$ dig +noall +answer +comments @ns-179-c.gandi.net. foo.netmeister.org;; Got answer:;; -&gt;&gt;HEADER&lt;&lt;- opcode: QUERY,  status: NOERROR, id: 25060;; flags: qr aa rd; QUERY: 1, ANSWER: 0, AUTHORITY: 1, ADDITIONAL: 1;; WARNING: recursion requested but not available;; OPT PSEUDOSECTION:; EDNS: version: 0, flags:; udp: 1232$</p><p>$dig+短netmeister。组织nsns-181-a.gandi。网ns-143-b.甘地。网ns-179-c.甘地。净额美元dig+noall+answer+comments@ns-179-c.gandi。网福。内特迈斯特。组织；；得到答案：-&gt&gt；标题&lt&lt；-操作码：查询，状态：无错误，id:25060；；旗帜：qr-aa-rd；查询：1，答案：0，权限：1，附加：1；；警告：已请求递归，但不可用；；选择假节：；EDNS:版本：0，标志：；udp:1232$</p><p> NOERROR indicates that there was,well, no error on the DNS server&#39;s side, meaning thequery was correctly answered. Ok, so we&#39;veestablished that   foo.netmeister.org simplydoesn&#39;t exist in the DNS, so your journey endshere. That&#39;s right, that&#39;s it: fix the DNS entry ortalk to whomever owns the domain.</p><p>NOERROR表示DNS服务器上没有错误&#39；这意味着问题得到了正确的回答。好的，那么我们&#39；Vee建立了那个foo。内特迈斯特。组织SimpleDoesn和#39；在DNS中不存在，所以你的旅程结束了。那&#39；是的，那&#39；s it：修复DNS条目或向任何拥有该域的人进行访问。</p><p>  $ dig +noall +answer +comments @ns-179-c.gandi.net. foo.netmeister.org[ time elapses ];; connection timed out; no servers could be reached$</p><p>$dig+noall+answer+comments@ns-179-c.gandi。网福。内特迈斯特。组织[时间流逝]；；连接超时；无法联系到任何服务器$</p><p> Does this mean that the problem is with theauthoritative nameserver? Not necessarily! It&#39;spossible that it&#39;s only  your system thatcan&#39;t talk to the NS, but that your configuredresolver (e.g., from   /etc/resolv.conf) can. This may be the case if, for example,your network administrator blocks outgoing DNStraffic to hosts other than the configuredresolvers.</p><p>这是否意味着问题出在授权名称服务器上？不一定！它&#39；可能是&#39；只有你的系统能&#39；不要与NS对话，但您的configuredresolver（例如，from/etc/resolv.conf）可以。例如，如果网络管理员阻止发送到除ConfiguredResolver之外的主机的DNStraffic，则可能会出现这种情况。</p><p> Note: it may also be the case that you  cantalk to the  second-level domain authoritativenameserver (  netmeister.org in this case),but the name you&#39;re trying to resolve is under a subdomain with a  differentauthoritative nameserver:</p><p>注意：在这种情况下，您也可以访问二级域名授权服务器（本例中为netmeister.org），但您的名称&#39；您试图解析的域位于具有不同授权名称服务器的子域下：</p><p> $ dig +noall +answer +comments @ns-179-c.gandi.net. bar.dns.netmeister.org;; Got answer:;; -&gt;&gt;HEADER&lt;&lt;- opcode: QUERY, status: NOERROR, id: 39531;; flags: qr rd; QUERY: 1, ANSWER: 0, AUTHORITY: 2, ADDITIONAL: 3;; WARNING: recursion requested but not available;; OPT PSEUDOSECTION:; EDNS: version: 0, flags:; udp: 1232$ dig +short dns.netmeister.org nspanix.netmeister.org$ dig +noall +answer @panix.netmeister.org bar.dns.netmeister.org[ time elapses ];; connection timed out; no servers could be reached$</p><p>$dig+noall+answer+comments@ns-179-c.gandi。网酒吧dns。内特迈斯特。组织；；得到答案：-&gt&gt；标题&lt&lt；-操作码：查询，状态：无错误，id:39531；；旗帜：qr-rd；查询：1，答案：0，权限：2，附加：3；；警告：已请求递归，但不可用；；选择假节：；EDNS:版本：0，标志：；udp:1232$dig+短dns。内特迈斯特。组织nspanix。内特迈斯特。org$dig+noall+answer@panix。内特迈斯特。组织酒吧。dns。内特迈斯特。组织[时间流逝]；；连接超时；无法联系到任何服务器$</p><p> What can you do to verify whether the name existswithout asking your resolver (which we know failed toresolve the name, since that&#39;s how we started ourjourney here) and without making outbound port 53 UDPcalls? Here you have a few options:</p><p>在不询问您的解析程序（我们知道解析程序无法解析名称，因为这是我们在这里开始旅程的方式）且不进行出站端口53 UDPCALL的情况下，您如何验证名称是否存在？这里有几个选项：</p><p>  DNS is not just port 53  UDP, and you maybe able to simply ask the authoritative via TCP:</p><p>DNS不仅仅是端口53 UDP，您可以通过TCP简单地询问权威：</p><p>    You can try to use  DNSover HTTPs to one of the public DoH resolvers,such as e.g., Google&#39;s or Cloudflare&#39;s DNS servers. dig(1) supports DoH  sinceMarch 2021 via the   +https flag, but if your dig(1) is older than that, you can also usethe JSON API directly:</p><p>您可以尝试将DNSover HTTPs用于其中一个公共DoH解析器，例如Google&#39；s或Cloudflare&#39；s的DNS服务器。DIG（1）通过+HTTPS标志支持DOH SimeCARCH 2021，但是如果您的挖掘（1）比它更大，您还可以直接使用JSONAPI：</p><p> $ curl -s &#39;https://dns.google/resolve?name=foo.netmeister.org&amp;type=a&#39; | jq &#39;.Answer&#39;null$ curl -s -H &#39;accept: application/dns-json&#39; &#39;https://cloudflare-dns.com/dns-query?name=foo.netmeister.org&#39; | jq &#39;.Answer&#39;null</p><p>$curl-s&#39；https://dns.google/resolve?name=foo.netmeister.org&amp;类型=a&#39；|jq&#39；。回答&#39；空$curl-s-H&#39；接受：应用程序/dns json&#39&#39;https://cloudflare-dns.com/dns-query?name=foo.netmeister.org&#39; | jq&#39；。答案&#39；无效的</p><p> This doesn&#39;t let you ask the  authoritativeresolver, but it lets you confirm that at least some other nameserver can resolve the hostnameyou are experiencing problems with.</p><p>这并不意味着&#39；不允许您询问授权服务器，但它允许您确认至少其他一些名称服务器可以解决您遇到的主机名问题。</p><p>  If you know a public resolver that supports  DNSover TLS, then you can try that. Differentcommand-line tools such as e.g.,   kdig(1)or   dog(1) exist,and e.g.,  dig(1) has support for DoT via the  +tls flag  sinceversion 9.18.0, but if you want to go reallybare-bones, you can even use  stunnel(1):</p><p>如果你知道一个支持DNSover TLS的公共解析器，那么你可以试试。存在不同的命令行工具，例如kdig（1）或dog（1），例如dig（1）从9.18.0版起就通过+tls标志支持DoT，但如果你想真正做到赤裸裸，你甚至可以使用stunnel（1）：</p><p> $ cat &gt;/tmp/dot &lt;&lt;EOF[dns]client = yesaccept = 127.0.0.1:5353connect = 8.8.8.8:853CAfile = /etc/ssl/cert.pemverifyChain = yescheckIP = 8.8.8.8EOF$ stunnel /tmp/dot$ dig -p 5353 +tcp @127.0.0.1 foo.netmeister.org</p><p>$cat&gt/tmp/dot&lt&书信电报；EOF[dns]client=yesaccept=127.0.0.1:5353connect=8.8.8.8:853CAfile=/etc/ssl/cert.pemfrifychain=yescheckIP=8.8.8.8EOF$stunnel/tmp/dot$dig-p5353+tcp@127.0.0.1 foo。内特迈斯特。组织</p><p> Some authoritative nameservers may even support DoTdirectly, so you may not need to use a public resolverlike Google&#39;s DNS server here, which then would getyou an authoritative answer, but even asking 8.8.8.8, you can once again confirm that whatyour resolver does is in line with (or different from)what others do.</p><p>一些权威的名称服务器甚至可能直接支持Dot，因此您可能不需要使用像Google&#39；这里有一个DNS服务器，它会给你一个权威的答案，但即使你问8.8.8.8，你也可以再次确认你的解析器所做的与其他解析器所做的一致（或不同）。</p><p>  Taking this concept a step further, you may want tocompare the results across  multiple differentpublic resolvers. Good thing I have  just the toolfor you! You can either make a simple HTTP GETrequest:</p><p>进一步考虑这个概念，您可能希望跨多个不同的公共解析器比较结果。幸好我正好有工具给你！您可以创建一个简单的HTTP GETrequest：</p><p> $ curl -s &#39;https://www.netmeister.org/puddy/?name=foo.netmeister.org&amp;format=json&#39; | jq &#39;.results&#39;{ &#34;2001:4860:4860::8888&#34;: { &#34;CNAME&#34;: { &#34;status&#34;: &#34;NOERROR&#34; }, &#34;AAAA&#34;: { &#34;status&#34;: &#34;NOERROR&#34; }, &#34;comment&#34;: &#34;Google Public DNS&#34;, &#34;A&#34;: { &#34;status&#34;: &#34;NOERROR&#34; } },[...]</p><p>$curl-s&#39；https://www.netmeister.org/puddy/?name=foo.netmeister.org&amp;格式=json&#39；|jq&#39；。结果&#39；{&#34；2001:4860:4860：：8888&#34；{&#34；CNAME&#34；{&#34；状态&#34；：&#34；无错误&#34；}&#34;AAAA&#34；：{&#34；状态&#34；：&#34；无错误&#34；}&#34;评论&#34；：&#34;谷歌公共域名系统&#34&#34;A&#34；：{&#34；状态&#34；：&#34；无错误&#34；}，[...]</p><p>  $ puddy -1 foo.netmeister.org a aaaa2001:470:20::2 (Hurricane Electric) A: [NO RECORD FOUND] AAAA: [NO RECORD FOUND] 2001:4860:4860::8888 (Google) A: [NO RECORD FOUND] AAAA: [NO RECORD FOUND] 2606:4700:4700::1001 (Cloudflare) A: [NO RECORD FOUND] AAAA: [NO RECORD FOUND] 2620:0:ccc::2 (OpenDNS) A: [NO RECORD FOUND] AAAA: [NO RECORD FOUND] 2620:fe::fe (Quad9) A: [NO RECORD FOUND] AAAA: [NO RECORD FOUND] $</p><p>$puddy-1 foo。内特迈斯特。org a aaaa2001:470:20：：2（飓风电力）a:[未发现记录]AAAA:[未发现记录]2001:4860:4860：：8888（谷歌）a:[未发现记录]AAAA:[未发现记录]2606:4700:4700:1001（Cloudflare）a:[未发现记录]AAAA:[未发现记录]2620:0:ccc:：2（OpenDNS）a:[未发现记录]AAAA:[未发现记录]2620:fe:：fe（Quad9）a:[未找到记录]AAAA:[未找到记录]$</p><p> ...although that does again require you to be ableto talk to the different resolvers on port 53. Eitherway, this offers you another way of checking if otherpeople are seeing the same result as you do on yourlocal system, which can be helpful.</p><p>...尽管这再次要求您能够在端口53上与不同的解析器对话。同时，这也为你提供了另一种检查其他人是否看到与你在本地系统上看到的结果相同的方法，这可能会有所帮助。</p><p>  A common source of frustration is an apparentdiscrepancy between a DNS lookup and behavior seen byother tools. This can often be traced back to a localchange made to  /etc/hosts, and would exhibititself like this:</p><p>令人沮丧的一个常见原因是DNS查找与其他工具看到的行为之间存在明显差异。这通常可以追溯到对/etc/hosts所做的本地更改，并且会显示如下：</p><p> $ host foo.netmeister.orgHost foo.netmeister.org not found: 3(NXDOMAIN)$ ssh foo.netmeister.orgssh: connect to host foo.netmeister.org port 22: Connection refusedor, even more frustratingly:$ host bar.dns.netmeister.orgbar.dns.netmeister.org has address 198.51.100.1bar.dns.netmeister.org has IPv6 address  2001:db8::c2de:2d22:5ca1:2727$ ping6 bar.dns.netmeister.orgPING6(56=40+8+8 bytes) 2001:470:30:84:e276:63ff:fe72:3900 --&gt;  2001:db8::9a6f:ba98:b763:574eping6: sendmsg: Network is unreachableping6: wrote 2001:db8::9a6f:ba98:b763:574e 16 chars, ret=-1ping6: sendmsg: Network is unreachableping6: wrote 2001:db8::9a6f:ba98:b763:574e 16 chars, ret=-1^C--- 2001:db8::9a6f:ba98:b763:574e ping6 statistics --- 2 packets transmitted, 0 packets received, 100.0% packet loss $ grep bar.dns.netmeister.org /etc/hosts  2001:db8::9a6f:ba98:b763:574e bar.dns.netmeister.org$</p><p>$host foo。内特迈斯特。好极了。内特迈斯特。找不到组织：3（NXDOMAIN）$ssh foo。内特迈斯特。orgsh：连接到主机foo。内特迈斯特。org端口22：连接拒绝者，更令人沮丧的是：$host bar。dns。内特迈斯特。奥格巴。dns。内特迈斯特。org的地址是198.51.100.1bar。dns。内特迈斯特。org的IPv6地址为2001:db8:：c2de:2d22:5ca1:2727$ping6 bar。dns。内特迈斯特。Orgging6（56=40+8+8字节）2001:470:30:84:e276:63ff:fe72:3900--&gt；2001:db8:：9a6f:ba98:b763:574eping6:sendmsg:网络无法访问6:Writed 2001:db8:：9a6f:ba98:b763:574e 16个字符，ret=-1ping6:sendmsg:网络无法访问6:Writed 2001:db8:：9a6f:ba98:b763:574e 16个字符，ret=-1^C---2001:db8:：9a6f:ba98:b763:574e ping6统计信息---传输2个数据包，接收0个数据包，100.0%数据包丢失$grep bar。dns。内特迈斯特。org/etc/hosts 2001:db8:：9a6f:ba98:b763:574e bar。dns。内特迈斯特。组织$</p><p> That is, you observe one address (or no address)when performing an explicit DNS lookup ( 2001:db8::c2de:2d22:5ca1:2727), butanother ( 2001:db8::9a6f:ba98:b763:574e)when running commands that use the normal gethostbyname(3) library functions, which (inmost cases) will  first try /etc/hosts.</p><p>也就是说，在执行显式DNS查找（2001:db8:：c2de:2d22:5ca1:2727）时观察一个地址（或没有地址），在运行使用常规gethostbyname（3）库函数的命令时观察另一个地址（2001:db8:：9a6f:ba98:b763:574e），在大多数情况下，这些函数将首先尝试/etc/hosts。</p><p> If you see this, fix  /etc/hosts, yell atthe person who made that change (probably youyourself), and then  makethat file immutable (e.g.,   sudo chflagsschg /etc/hosts or   sudo chattr +i/etc/hosts).</p><p>如果你看到这一点，修复/etc/hosts，向做出更改的人大喊（可能是你自己），然后使该文件不可变（例如sudo chflagschg/etc/hosts或sudo chattr+i/etc/hosts）。</p><p>    You may see this if there is no resolver configured in /etc/resolv.conf at all, for example. Thisis again different from (depending on OS and SSHversion):</p><p>如果/etc/resolv中没有配置解析器，您可能会看到这一点。例如，conf。这又不同于（取决于操作系统和SSHversion）：</p><p>  ...which you might see if none of the nameserversconfigured are reachable. Which is  yetagain different from:</p><p>...您可能会看到，如果没有配置的名称服务器是可访问的。这与叶塔干不同：</p><p>  ...which you might get if you  are able toreach your configured nameserver, but that nameserverdoes not want to talk to you, e.g., it&#39;s configured toaccept DNS queries, but has restrictions on who mayquery it for the zone in question, so returns   status:REFUSED to your DNS query.</p><p>...如果您能够访问已配置的名称服务器，但该名称服务器不想与您交谈，例如，它&#39；s配置为接受DNS查询，但对谁可以查询该区域有限制，因此返回状态：拒绝您的DNS查询。</p><p>    This error message is self-explanatory: connection refused means that you are able to talk to the host, but nothing islistening on port 22. That is, after your hostresolves the name to an IP address and sends a TCP  SYN packet, the remote side responds with aTCP   RST:</p><p>此错误消息不言自明：连接被拒绝意味着您可以与主机对话，但端口22上没有任何内容。也就是说，在主机将名称解析为IP地址并发送TCP SYN数据包后，远程端用aTCP RST进行响应：</p><p> 20:29:46.690536 IP 172.16.1.15.54702 &gt; foo.netmeister.org.ssh: Flags [S], seq 1750579353, win 65535, options [mss 1460,nop,wscale 6,nop,nop,TS val 674037520 ecr 0,sackOK,eol], length 020:29:46.701705 IP foo.netmeister.org.ssh &gt; 172.16.1.15.54702: Flags [ R.], seq 0, ack 1750579354, win 0, length 0</p><p>20:29:46.690536 IP 172.16.1.15.54702&gt；福。内特迈斯特。组织。ssh:Flags[S]，seq 1750579353，win 65535，options[mss 1460，nop，wscale 6，nop，nop，TS val 674037520 ecr 0，sackOK，eol]，长度020:29:46.701705 IP foo。内特迈斯特。组织。ssh&gt；172.16.1.15.54702：旗帜[R.]，序号0，确认1750579354，胜利0，长度0</p><p> If you&#39;re sure you have the right port and hostname,then the problem is on the remote side at this point.But do note that   connection refused isnotably different from...</p><p>如果你&#39；如果您确定端口和主机名正确，那么问题就出在远程端。但请注意，拒绝连接与。。。</p><p>   While   connection refused clearlyshows that you can reach the remote side,   operation timedout equally clearly indicates that you can not talk to the remote system on the givenport and protocol.  tcpdump(1) will show yoursystem sending repeated but unanswered   SYNpackets:</p><p>虽然拒绝连接清楚地表明您可以到达远程端，但操作时间也同样清楚地表明您无法通过给定端口和协议与远程系统通信。tcpdump（1）将显示您的系统发送重复但未应答的数据包：</p><p> 20:57:10.360287 IP 172.16.1.15.55111 &gt; foo.netmeister.org.ssh: Flags [ S], seq 299734294620:57:11.361373 IP 172.16.1.15.55111 &gt; foo.netmeister.org.ssh: Flags [ S], seq 299734294620:57:12.361702 IP 172.16.1.15.55111 &gt; foo.netmeister.org.ssh: Flags [ S], seq 299734294620:57:13.362352 IP 172.16.1.15.55111 &gt; foo.netmeister.org.ssh: Flags [ S], seq 299734294620:57:14.363566 IP 172.16.1.15.55111 &gt; foo.netmeister.org.ssh: Flags [ S], seq 2997342946...</p><p>20:57:10.360287 IP 172.16.1.15.55111&gt；福。内特迈斯特。组织。ssh:Flags[S]，seq 29973429620:57:11.361373 IP 172.16.1.15.55111&gt；福。内特迈斯特。组织。ssh:Flags[S]，seq 29973429620:57:12.361702 IP 172.16.1.15.55111&gt；福。内特迈斯特。组织。ssh:Flags[S]，seq 29973429620:57:13.362352 IP 172.16.1.15.55111&gt；福。内特迈斯特。组织。ssh:Flags[S]，seq 2997342620:57:14.363566 IP 172.16.1.15.55111&gt；福。内特迈斯特。组织。ssh:Flags[S]，seq 299734296。。。</p><p> So once more, so long as you&#39;re sure you have theright port and hostname, the problem is on the remoteside. Or rather, it&#39;s not on  your side --something else in between your system and the remoteside may be dropping packets.</p><p>再一次，只要你&#39；如果确保端口和主机名正确，问题出在远程端。或者更确切地说，它是&#39；It’它不在你这边——在你的系统和远程端之间的其他东西可能正在丢弃数据包。</p><p>  Finally, you can bring in your trusty friends ping(8) and  traceroute(8). Is thehost in question up at all?  ping(8) may be able to tell you, but remember thatICMP may be blocked or dropped along the way, andfailure to ping a host does not necessarily mean thatit&#39;s offline.</p><p>最后，你可以带上你信任的朋友ping（8）和traceroute（8）。主持人有问题吗？ping（8）可能会告诉您，但请记住，ICMP可能会被阻止或删除，ping主机失败并不一定意味着它&#39；它离线了。</p><p> traceroute(8)  may be able to helpyou identify where along the way traffic is gettingdropped, but here, too, remain aware of the probespossibly being dropped, the UDP port actually beingin use, and so on. You can remediate some of that bytrying e.g.,   traceroute -P tcp -p&lt;port&gt;.</p><p>traceroute（8）可能能够帮助您识别沿途流量被丢弃的位置，但在这里，也要注意可能被丢弃的问题、实际正在使用的UDP端口，等等。您可以通过尝试，例如traceroute-P tcp-P&lt；端口&gt；。</p><p> But not being able to talk to a remote host canalso have different causes, for example...</p><p>但是不能与远程主机通话也有不同的原因，例如。。。</p><p>   The hostname resolves, but we can&#39;t talk to the IPaddress: our system doesn&#39;t know how to route thepackets to the remote side. This may be the case whenthe hostname in question resolves to an IPv6 address,but your system doesn&#39;t have IPv6 connectivity.Another reason might simply be a wrong or missingroute, but either way, this is a problem on the clientside. In this case, you were able to resolve the host andeven talk to it using TCP on port 22, but the remoteside decided to close the connection. This may bebecause whatever is listening on port 22 on that hostdoesn&#39;t actually speak SSH; often times this happensif there is some sort of proxy or load balancing goingon, or you simply have the wrong port.</p><p>主机名可以解析，但我们可以&#39；不要跟IP地址说话：我们的系统没有&#39；I don’我不知道如何把包裹送到远端。当所讨论的主机名解析为IPv6地址，但您的系统没有&#39；我们没有IPv6连接。另一个原因可能只是一个错误的或丢失的路线，但不管怎样，这都是客户端的问题。在本例中，您可以解析主机，甚至可以在端口22上使用TCP与主机对话，但远程端决定关闭连接。这可能是因为在该主机的端口22上监听的任何内容都不会&#39；我不会说宋承宪；通常情况下，如果存在某种代理或负载平衡，或者您只是使用了错误的端口，就会发生这种情况。</p><p>   The above examples were given using SSH; many ofthem translate more or less 1:1 to other TCP basedprotocols, such as HTTP. Of course there are manyother application specific failure modes, anddifferent applications differ in how well they relaythe error messages to the user.</p><p>上面的例子是使用SSH给出的；其中许多协议或多或少地将1:1转换为其他基于TCP的协议，例如HTTP。当然，还有许多其他特定于应用程序的故障模式，不同的应用程序将错误消息传递给用户的程度不同。</p><p> But before you get to debuggin the application, we can summarize the differentnetwork errors and their meaning into this flow chart(click to open a full-sized version):</p><p>但在调试应用程序之前，我们可以将不同的网络错误及其含义总结到这个流程图中（单击打开完整版本）：</p><p>    ...to &#34; Is it the DNS, the network, or is it theapp?&#34;. Knowing which one of these it is is oftenthe first step in troubleshooting the largerproblem.</p><p>...至&#34；是DNS、网络还是应用&#34;. 了解这其中的哪一个通常是解决更大问题的第一步。</p></div><div id="story_share_this"><div class="sharethis-inline-share-buttons"></div></div><div class="story_tags page_narrow"><button type="button" class="btn btn-light my_tag"><a href="/tag/网络故障/">#网络故障</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/network/">#network</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/可能/">#可能</a></button></div></div><div class="my_movie_list_item shadow p-3 mb-5 bg-white rounded"><button type="button" class="btn btn-link my_tag"><a href="/tag/web2.0/">#web2.0</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/google/">#google</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/设计/">#设计</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/创意/">#创意</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/摄影/">#摄影</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/图片/">#图片</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/游戏/">#游戏</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/软件/">#软件</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/视频/">#视频</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/广告/">#广告</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/手机/">#手机</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/iphone/">#iphone</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/网站/">#网站</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/免费/">#免费</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/下载/">#下载</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/windows/">#windows</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/微软/">#微软</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/苹果/">#苹果</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/firefox/">#firefox</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/blog/">#blog</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/apple/">#apple</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/音乐/">#音乐</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/博客/">#博客</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/wordpress/">#wordpress</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/恶搞/">#恶搞</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/qq/">#qq</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/艺术/">#艺术</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/谷歌/">#谷歌</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/web/">#web</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/工具/">#工具</a></button></div></div></div><div id="my_footer"><div class=""><a href="/tags/">tags</a> <a href="/users/">users</a></div>&copy;2012-2021 diglog.com </div></div></body></html>