<!doctype html><html lang="zh-hans"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>GIMP 2.99.2-GTK3用户界面工具包</title><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"><link rel="stylesheet" href="/img/css.css?random="><link data-rh="true" rel="icon" href="/img/favicon.ico"/><script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?03c1a0f31299b4a2fbb83c34d6beaac9";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script><script data-ad-client="ca-pub-6067137220025946" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script type="text/javascript" src="https://platform-api.sharethis.com/js/sharethis.js#property=5effb96910009800120b8d4d&product=inline-share-buttons" async="async"></script></head><body><div id="my_header"><div class="container"><nav class="navbar navbar-expand-lg"><a class="navbar-brand" href="/"><img alt="diglog" src="/img/logo.v1.gif" class="rounded-sm"></a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarNavAltMarkup"><div class="navbar-nav"></div></div></nav></div></div><div class="container"><div id="my_content"><h1 class="page_narrow">GIMP 2.99.2-GTK3用户界面工具包</h1><div class="row"><div class="col-lg-12 col-12"><div class="my_story_list_item shadow p-3 mb-5 bg-white rounded"><div class="story_page_pub_time page_narrow">2020-11-07 11:23:08</div><div class="story_img_container"><a href="http://img2.diglog.com/img/2020/11/192f094615fe29e7d32a40a22025450c.png"><img src="http://img2.diglog.com/img/2020/11/192f094615fe29e7d32a40a22025450c.png" class="img-fluid my_story_img" onerror="this.style.display='none'"></a></div><div class="page_narrow text-break page_content"><p>GIMP 2.99.2 marks the first step towards  GIMP 3 based on  GTK3 user interface toolkit.</p><p>GIMP 2.99.2标志着向基于GTK3用户界面和工具包的GIMP 3迈出了第一步。</p><p>       The first difference will be visual as you will notice that  GIMP got abit more of a modern look and it can also use some new widgets (insteadof redeveloping them on  GTK2) as well as client-side window decorationson various dialogs. But the aesthetic differences are far from being themain appeal of  GTK3.</p><p>第一个区别将是可视化的，因为你会注意到GIMP看起来更现代一些，它也可以使用一些新的小部件(而不是在GTK2上重新开发它们)，以及在各种对话框上的客户端窗口装饰。但审美上的差异远远不是GTK3的主要吸引力。</p><p>   One of the main issues of  GTK2 was the absent support for high pixeldensity displays (e.g. small screens with high resolution or big screenswith extremely high resolution) which has become more widespread,especially among graphics professionals.  GIMP 2.10 came with partialworkaround which was acceptable only in some limited cases but was notreally appropriate for intense use of the software.</p><p>GTK2的主要问题之一是不支持高像素密度显示器(例如高分辨率的小屏幕或极高分辨率的大屏幕)，这一点已经变得越来越普遍，特别是在图形专业人士中。GIMP 2.10附带了部分解决方法，只有在某些有限的情况下才能接受，但不适合密集使用GIMP软件。</p><p>    By “input device”, we are mostly talking about drawing tablets orpen displays. In  GIMP 2, their support had many shortcomings: you had toplug the tablet before starting  GIMP, enable each new device explicitlyin the settings and, worse, unplugging the tablet could lead toinstability of the software (though this issue got mostly worked aroundon  GTK2 by  GIMP developers in the v2.8 release series).</p><p>我们所说的“输入设备”，主要是指绘制平板电脑或笔式显示器。在GIMP 2中，他们的支持有很多缺点：你必须在启动GIMP之前插入平板电脑，在设置中明确启用每台新设备，更糟糕的是，拔出平板电脑可能会导致软件不稳定(尽管这个问题主要是由GIMP开发者在V2.8版本系列中的GIMP开发者在GTK2上解决的)。</p><p> GIMP 3 (hence this first development release) is bringing hotplug support,which means: start  GIMP, plug your tablet, done. You are ready to draw,with pressure, tilt, and everything.</p><p>GIMP3(因此是第一个开发版本)带来了热插拔支持，这意味着：启动GIMP，插上你的平板电脑，完成。你已经准备好画画了，带着压力，倾斜，以及一切。</p><p> We are also trying to improve general support by making the advancedconfiguration of input devices easier to set.</p><p>我们还试图通过使输入设备的高级配置更易于设置来改善一般支持。</p><p> A while ago, we also experimented with support for touch gestures likezooming, panning, rotating etc. We did not finish this work because werealized this was not a priority compared to some other features.</p><p>不久前，我们还试验了对缩放、平移、旋转等触控手势的支持。我们没有完成这项工作，因为我们意识到，与其他一些新功能相比，这并不是优先考虑的。</p><p> Touch gestures are very nice and awesome but also sometimes become a burden.Actually, many professional artists even disable touch sensitivity toprevent unwanted input while working with a stylus (high-end tablets oftencome with a physical switch for this nowadays, and this can also be disabledin tablet settings). With this in mind, we have decided to not make ita priority compared to some other work-in-progress. So we are not surewhether specific gesture support will make it to  GIMP v3.0. We dowelcome patches from anyone willing to make it one’s priority though.</p><p>触控手势非常漂亮和令人敬畏，但有时也会成为一种负担。事实上，许多专业艺术家甚至在使用触控笔时禁用触控敏感度，以防止不需要的输入(如今高端平板电脑通常带有物理开关，在平板电脑设置中也可以禁用这一功能)。考虑到这一点，我们决定不把它作为与其他一些正在进行的工作相比的优先事项。因此，我们不确定特定的手势支持是否会出现在GIMP v3.0中。不过，我们会从任何愿意把它作为优先事项的人那里提供补丁。</p><p> Status: some work needs to be done to simplify configuration dialog asthe support for legacy features is either not needed anymore or can bedone better. We might also want to add support for Wayland-specificfeatures related to input devices.</p><p>状态：需要做一些工作来简化配置对话框，因为对遗留功能的支持要么不再需要，要么可以做得更好。我们可能还想增加对与输入设备相关的特定于Wayland的功能的支持。</p><p>  With  GTK3, we also inherit its  CSS-based theme format. Unfortunatelythis means that all custom-made themes from past versions will beincompatible with  GIMP 3.0 and future releases. On the bright side,this new theme format uses a very well known theming standard. Thisshould make it much easier to tweak  GIMP’s interface to your needs and preferences.</p><p>在GTK3中，我们还继承了它基于CSS的主题格式。不幸的是，这意味着过去版本中的所有定制主题都将与GIMP 3.0和未来版本不兼容。好的一面是，这种新的主题格式使用了一个非常著名的主题标准。这应该会让GIMP的界面更容易根据你的需求和偏好进行调整。</p><p> Moreover, the symbolic icon themes are much better supported. They willfollow the theme-set foreground and background colors. If you ever had toswitch from a dark theme to a light one in  GIMP 2.10, you probablyremember you also had to switch the symbolic icon themes manually. Thiswon’t be necessary anymore as symbolic icons will be recolored accordingto your theme.</p><p>此外，符号图标主题也得到了更好的支持。它们将遵循主题设置的前景色和背景色。如果你曾经在GIMP 2.10中从深色主题切换到浅色主题，你可能还记得你还必须手动切换符号图标主题。这将不再是必要的，因为符号图标将根据你的主题重新着色。</p><p> Finally, the “dark theme” is a core concept of  GTK3, which means,for instance, that even window decorations get recolored as you cansee in the screenshot above.</p><p>最后，“黑暗主题”是GTK3的一个核心概念，例如，这意味着即使是窗户装饰也会重新上色，就像你在上面的截图中看到的那样。</p><p> Also, a same theme could propose both a dark and a light variant, so the Theme preferences page shows a  “Use dark theme variant if available”checkbox. Similarly, icon themes may propose both symbolic and coloricons. Which is why the  “Icon Theme” preferences page has a  “Usesymbolic icons if available” switch so that you could choose yourpreferred style.</p><p>此外，同一主题可以同时提供深色和浅色变种，因此主题首选项页面会显示一个“如果可用的话，使用深色主题变种”复选框。类似地，图标主题可以同时暗示符号图标和彩色图标。这就是为什么“图标主题”首选项页面有一个“使用符号图标(如果可用)”开关，这样你就可以选择你喜欢的风格了。</p><p>   Code-side, changes related to theming are basically done. Now we need anew default theme.For now,  GIMP 2.99.2 only lists the “System” theme, which lets  GIMPfollow your system-wide  GTK theme. This is a regression from 2.10 thatwe intend to fix in time for  GIMP 3.0 by reintroducing a default themewith a neutral dark/light variant as well as a neutral middle-graycustom theme.</p><p>在代码方面，与主题相关的更改基本完成。现在，我们需要一个新的默认主题。目前，GIMP 2.99.2只列出了“系统”主题，它允许GIMP遵循系统范围的GTK主题。这是从2.10的倒退，我们打算在GIMP 3.0中及时修复，重新引入一个带有中性暗/亮变化的默认主题以及一个中性的中灰自定义主题。</p><p> The main issue with system themes is that they cover very basic desktopuse cases. Meanwhile, advanced graphics work requires a neutral gray themeto avoid polluting your color perception. This is the main reason why GIMP needs to default to a neutral color theme with symbolic icons.</p><p>系统主题的主要问题是它们涵盖了非常基本的桌面使用案例。同时，先进的图形作品需要中性灰色主题，以避免污染您的色彩感知。这也是GIMP需要默认使用带有象征性图标的中性色主题的主要原因。</p><p> Colored themes and icons are still an option, and, in fact, we arepretty sure that the community will soon come up with good-lookingcustom themes. This is a great way to contribute to  GIMP as a non-developer!</p><p>彩色主题和图标仍然是一种选择，事实上，我们非常确定社区很快就会推出好看的定制主题。作为一个真正的非开发者，这是为GIMP做贡献的一个很好的方式！</p><p>  The port to  GTK3 should normally give us Wayland support on Linux for free.And it mostly does. Unfortunately, a few bugs have already been reportedfor  GIMP running on Wayland. Some of them are clearly blockers for releasing GIMP 3 (such as various weird  GUI bugs or  huge memory leaks). Others are less seriousbut still are a bit embarrassing, like the one where the splash screen isbroken on HiDPI displays because Wayland doesn’t report scaling properly.</p><p>通常情况下，GTK3的端口应该会免费为我们提供Linux上的Wayland支持，而且大多数情况下确实是这样。不幸的是，已经有一些关于在Wayland上运行的GIMP的错误报告。其中一些显然是发布GIMP 3的拦截器(比如各种奇怪的图形用户界面错误或巨大的内存泄漏)。其他的没有那么严重，但仍然有点尴尬，比如HiDPI显示屏上的闪屏被打破，因为Wayland没有正确地报告缩放比例。</p><p> Until these issues are fixed, we don’t think we can safely claim that weprovide appropriate Wayland support. We will be grateful for all patches toaddress that, whether they arrive to  GIMP,  GTK, or another relevant partof the technology stack. If you are interesting in helping out, here is the list of Wayland-related bugs.</p><p>在这些问题得到解决之前，我们认为我们不能安全地声称我们提供了适当的Wayland支持。无论是GIMP、GTK还是技术堆栈的其他相关部分，我们都将感谢所有能够解决这一问题的补丁。如果你有兴趣帮忙，这里有一个与韦兰相关的错误清单。</p><p> Appropriate Wayland support also means we need to reimplement a fewfeatures through so called portals. We have already done this for thescreenshot plug-in (using Freedesktop,  GNOME, and  KDE portals), and thereis some ongoing work to fix on-display color picking (already works in  KDE,doesn’t yet work with  GNOME and Freedesktop portals).</p><p>适当的Wayland支持也意味着我们需要通过所谓的门户重新实现一些功能。我们已经为截图插件做了这件事(使用Freedesktop、GNOME和KDE门户)，还有一些正在进行的修复屏幕颜色选择的工作(已经在KDE中工作，还不能在GNOME和Freedesktop门户上工作)。</p><p> As for the file portal, this is probably something that won’t happenfor  GIMP 3.0, because we still require some features of the  GTK filedialog, but it might happen later with a planned redesign for improvedexport process.</p><p>至于文件门户，这在GIMP 3.0中可能不会发生，因为我们仍然需要GTK文件对话框的一些功能，但它可能会在稍后进行计划中的重新设计以改进导出流程。</p><p>   Managing a complex project with tens and hundreds of layers is now mucheasier thanks to newly added multi-layer selection.  Aryeom, the animation film directorworking with the core team, has been asking for this since 2015, sothe  ZeMarmot project finally made this happen. This is anotherexample of a successful close artist-developer collaboration: every featurewas carefully designed following discussions and was tested in production.</p><p>由于增加了多层选择，现在管理一个有数十层和数百层的复杂项目要方便得多。与核心团队合作的动画电影导演Aryeom自2015年以来一直要求这样做，所以ZeMarmot项目最终实现了这一点。这是另一个成功的艺术家和开发者紧密合作的例子：每一项功能都是经过讨论后精心设计的，并在生产中进行了测试。</p><p>  The Layers dockable is now fully multi-selection aware, using the usualinteraction for multi-items selection ( Shift+click for selecting arange of layers and  Ctrl+click for selecting or deselectingnon-contiguous layers). Organizational operations now work on allselected layers, i.e. that you can move, reorder, delete, duplicate,merge (and more…) all selected layers at once.</p><p>可停靠的层现在完全支持多选，使用通常用于多项选择的交互(按住Shift键并单击以选择一系列层，按住Ctrl键并单击以选择或取消选择不连续的层)。组织操作现在适用于所有选定的层，即您可以移动、重新排序、删除、复制、合并(以及更多…)。一次选择所有选定的层。</p><p> Several tools now also work on multiple selected layers. For instanceall transform tools (move, rotation, scale, perspective, unifiedtransform…) will transform all selected layers (in addition to the existinglayer links with the “chain” icon). You can also crop several layers atonce or copy-paste merged layers’ projection. Even the  Color Picker toolcan now pick merged color from several layers (some kind of partial“Sample merged” without having to hide unwanted layers).</p><p>现在，多个工具还可以在多个选定的层上使用。对于实例所有变换工具(移动、旋转、缩放、透视、统一变换…)。将变换所有选定的层(除了带有“链”图标的现有层链接)。你也可以一次裁剪几个层，或者复制-粘贴合并层的投影。现在，即使是拾色器工具也可以从几个层中选取合并的颜色(某种局部的“合并样本”，而不必隐藏不需要的层)。</p><p> These are just a few examples because this change affects a large partof the code base: the concept of an active layer is prominent in everyaction. You can read more about this in a  detailed developmentreport.</p><p>这些只是几个例子，因为这种更改会影响很大一部分代码库：活动层的概念在每个操作中都很突出。您可以在详细的开发报告中阅读更多关于这方面的内容。</p><p>  Some features in  GIMP still expect a single layer and need to be fixedbefore the final release. It’s possible that we will inadvertently breaksomething while working on that, which is why it’s important that we domore development releases. Moreover, we might extend the multi-itemselection to paths and channels soon.</p><p>GIMP中的一些特性仍然需要单一的层，需要在最终发布之前进行修复。我们有可能在工作的时候无意中弄坏了一些东西，这就是为什么我们要发布更多的开发版本，这一点很重要。此外，我们可能很快就会将多项选择扩展到路径和通道。</p><p> Finally, painting and  GEGL operations (filters) are still limited tosingle layers. Adding ability to paint or run pixel operations onseveral layers at once will probably require some additional interfacespecification and designing to prevent undesired consequences likeextremely slow operation or the ability to cancel a long-running process.</p><p>最后，绘制和GEGL操作(过滤器)仍然仅限于单层。增加一次在几个层上绘制或运行像素操作的能力可能需要一些额外的接口规范和设计，以防止出现极慢的操作或取消长期运行的进程等不良后果。</p><p>  We had to break the plug-in APi to introduce many improvements, although wetook a special care not to break things where it wasn’t necessary to do so.</p><p>我们不得不打破插件API来引入许多改进，尽管我们特别注意不要在不必要的地方破坏东西。</p><p> Porting a single-file plug-in from  GIMP 2.10 to  GIMP 3 usually takes between5 and 30 minutes. We are working on a porting documentation to be releasedalong with  GIMP 3.</p><p>将一个单文件插件从GIMP 2.10移植到GIMP 3通常需要5到30分钟。我们正在编写一个移植文档，该文档将与GIMP第三版一起发布。</p><p> If you are a plug-in developer, one of the first steps you can take ismaking sure you don’t use any deprecated functions. We compiled a  list of functions removed and theirreplacement. You can already do this part of the port while still targeting  GIMP 2.10.x versions.</p><p>如果您是插件开发人员，您可以采取的第一步是确保不使用任何不推荐使用的函数。我们编制了一个删除函数和替换函数的列表。您已经可以在以GIMP 2.10.x版本为目标的情况下完成端口的这一部分。</p><p>  Among the noteworthy changes, we moved away from object IDs to realobjects. In particular in  GIMP 3,  GimpImage,  GimpItem, GimpDrawable,  GimpLayer,  GimpVectors,  GimpChannel and  GimpPDBare objects (other classes of objects already exist or may be added later).</p><p>在值得注意的更改中，我们从对象ID转移到了realObjects。特别是在GIMP 3中，GimpImage、GimpItem、GimpDrawable、GimpLayer、GimpVectors、GimpChannel和GimpPDB都是对象(其他类别的对象已经存在，或者以后可能会添加)。</p><p> It brings safer programming by having typed objects whose class can beeasily verified, hence better error messaging (with IDs, which arebasically integers, having weird bugs because of improper IDs was notuncommon and it was not always easy to track the bug).</p><p>它通过让类型化的对象的类可以容易地被验证来带来更安全的编程，因此更好的错误消息(对于ID，基本上是整数，由于不正确的ID而产生奇怪的错误并不常见，并且跟踪错误的错误并不总是容易的)。</p><p> Also object-programming implies class inheritance. Typically a GimpLayer is also a  GimpDrawable, itself a  GimpItem. This meansyou can use any methods from parent classes and easily test for class ownership.</p><p>此外，对象编程还意味着类继承。通常，GimpLayer也是GimpDrawable，本身就是GimpItem。这意味着您可以使用父类中的任何方法，并轻松测试类的所有权。</p><p> A non-C consequence is that it enables bindings to adapt the  API totheir own object model. Hence duplicating a  GimpImage named forinstance  img in Python 3 can be done with the quite pythonic  API  img2= img.duplicate().</p><p>非C语言的结果是，它使绑定能够使API适应它们自己的对象模型。因此，在Python3中复制名为forInstance img的GimpImage可以使用非常强势的API img2=img.Duplate()来完成。</p><p> Status: object port is basically done. We also want to use objectsignalling, which is a work-in-progress and should eventually allow toconnect signal handlers directly on objects, in order to manage eventsfrom the core application (something impossible in  GIMP 2, except byregular polling).</p><p>状态：目标端口基本完成。我们还想使用对象信令，这是一个正在进行的工作，最终应该允许直接连接对象上的信号处理程序，以便管理来自核心应用程序的事件(这在GIMP 2中是不可能的，除了通过常规的轮询)。</p><p>  Another change in our  API is that paths are now handled as  GFile,which implies using the GLib/ GIO  API.</p><p>API中的另一个变化是路径现在被作为GFile处理，这意味着使用Glib/GIO API。</p><p> While it may seem a bit cumbersome (as it adds the additional step ofcreating and managing a GFile), this allows much more robust filehandling. In particular, you won’t have to take care about pathcharacter encoding (a real issue when developers just assume everyoneuses the same encoding as themselves) hence broken paths andnon-portable code. Also we don’t have to deal with difference ofoperating systems regarding folder separation or file system notations.Working with a  GFile makes internal representation transparent andfile handling robust.</p><p>虽然它看起来有点麻烦(因为它增加了创建和管理GFile的额外步骤)，但它允许更健壮的文件处理。尤其是，您不必关心路径字符编码(当开发人员假设每个人都使用与他们自己相同的编码时，这是一个真正的问题)，因此会导致路径中断和代码不可移植。此外，我们不必处理有关文件夹分离或文件系统符号的操作系统差异。使用GFile使内部表示透明，文件处理更加健壮。</p><p> The second big advantage is that it means all such  API gains any abilityof installed  GIO modules, in particular loading or saving from/to remotelocations (even possibly through secure channels like  HTTPS).This opens a wide range of possibilities.</p><p>第二大优势是，这意味着所有这些API都能获得任何已安装的GIO模块的能力，特别是从远程位置加载或保存(甚至可能通过HTTPS这样的安全通道)。这打开了广泛的可能性。</p><p> GIO port of file handling had been done in the core code of  GIMP, backfor  GIMP 2.10 initial release. We are now bringing the advantages toplug-in developers as well in  GIMP 3.0.</p><p>GIMP的文件处理的GIO移植已经在GIMP的核心代码中完成了，从GIMP 2.10的初始版本开始。我们现在为插件开发者带来了GIMP 3.0版的优势。</p><p>  Language bindings through GObject Introspection also have full access toGLib/ GIO  API so they are already able to create GFile from paths or  URIwithout any problem.Yet legacy manual bindings, such as  script-fu (Scheme), don’t haveGFile access. We are working on it (a patch even already exists, butneeds to be reviewed).</p><p>通过GObject自检进行的语言绑定也拥有对GLib/GIO API的完全访问权限，因此它们已经能够毫无问题地从路径或URI创建GFile。然而，传统的手动绑定(如script-fu(Plan))不具备GFile访问权限。我们正在做这件事(补丁已经存在，但需要重新审核)。</p><p>  Some major changes have been done in the  API to declare your plug-in.This is now done by subclassing the  GimpPlugIn class and overridingsome methods to list and document the created plug-in procedures. Wemade a much cleaner and explicit  API than the previous one which shouldhelp plug-in developers.</p><p>在声明插件的API中进行了一些重大更改，现在可以通过对GimpPlugIn类进行子类化并覆盖一些方法来列出和记录创建的插件过程来实现这一点。我们制作了一个比前一个更干净、更显式的API，这应该会帮助插件开发人员。</p><p> The way your plug-in procedure’s arguments are now handled has also beenstandardized, in particular using config  GObject properties. This iseasier to deal with as a generic logics. Especially the same configobject allows us to generate many features. For instance, it will helpgenerate dialogs on demand for plug-ins who do not want to tinker with GTK or other toolkit themselves. It also simplify and standardizeargument saving for subsequent calls or a same procedure.</p><p>现在处理插件过程参数的方式也已经标准化，特别是使用了config GObject属性。作为一种通用逻辑，这更容易处理。特别是，相同的配置对象允许我们生成许多功能。例如，它将帮助那些不想自己修补GTK或其他工具包的插件按需生成对话框。它还简化和标准化了后续呼叫或相同处理程序的衣物保存。</p><p> Eventually this is also part of the base work for a futurerecording/macro feature (very unlikely to be in  GIMP 3.0, but this ispart of the ground work towards such feature) since we will be able toreliably save the arguments used when running plug-ins.</p><p>最终，这也是未来录制/宏特性的基础工作的一部分(GIMP 3.0中不太可能出现，但这是实现这一特性的基础工作的一部分)，因为我们将能够可靠地保存在运行插件时使用的参数。</p><p> Status: though the main part of this  API is done, more needs to happenbefore the release, and in particular we are still tinkering with theargument representation.</p><p>状态：虽然这个API的主要部分已经完成了，但在发布之前还需要做更多的事情，特别是我们还在对表示的参数进行修修补补。</p><p>  We have introspected the full  API through  GObjectIntrospection. It means that  GIMP API should be fully usable in a wide range of language bindings. We haveonly tested a few so far, so we can confirm that  GIMP can now bescripted (additionally to C and C++ of course) with:</p><p>我们已经通过GObjectIntrospect自省了完整的API。这意味着GIMP API应该在广泛的语言绑定中完全可用。到目前为止，我们只测试了几个，所以我们可以确认GIMP现在可以使用以下命令(当然，除了C和C++之外)：</p><p>  One of the main differences with how  GIMP used to be scriptable, withPython 2 notably, is that a custom layer  API is not needed anymore.</p><p>与GIMP过去的脚本化方式不同的主要区别之一是，现在不再需要定制的层API，这一点值得注意的是，在使用Python2时，GIMP是可脚本化的。</p><p> Also  GIMP 2 bindings used to be made around the  PDB protocol which isonly a subset of the full C  libgimp  API. The new bindings are builtaround  libgimp itself. Therefore plug-ins in Python 3, Javascript, Luaor Vala (or any future introspected binding) will have the samepossibilities as C plug-ins. This is a bright new world for  GIMP plug-in developers!</p><p>此外，GIMP 2绑定通常是围绕PDB协议进行的，PDB协议只是完整的C libgimp API的一个子集。新的绑定是内置的libgimp本身。因此，Python3、Javascript、Luaor Vala(或任何未来反思过的绑定)中的插件将具有与C插件相同的可能性。对于GIMP插件开发者来说，这是一个光明的新世界！</p><p> Another consequence is that the  API is basically the same for all theselanguages, apart for language idiosyncrasies.For instance if finding an intersection of a drawable with a selectionin C is:</p><p>另一个结果是，除了语言特性之外，所有这些语言的API基本上是相同的。例如，如果在C语言中找到一个可绘制的和一个选择的交叉点是：</p><p>      Another nice example is how C-type arrays, with an additional lengtharguments are handled. As expected, the length argument does not existin a binding if the target language has an appropriate structure.For instance, while you can copy from multiple drawables from a script with:</p><p>另一个很好的例子是如何处理带有额外长度参数的C类型数组。不出所料，如果目标语言具有适当的结构，则长度参数不会存在于绑定中。例如，虽然您可以使用以下命令从脚本复制多个可绘制内容：</p><p> /* Where @drawables is a C array of drawables, and @num_drawables  * indicates the size of this array.  */ gimp_edit_copy  ( num_drawables ,  drawables );</p><p>/*其中@Drawables是可绘制文件的C数组，@num_Drawables*表示该数组的大小。*/gimp_edit_copy(num_Drawables，Drawables)；</p><p> This can be done in Python 3 as (with  num_drawables removed and C arrayreplaced by a Python list):</p><p>这可以在Python 3中按如下方式完成(删除num_Drawables并将C数组替换为一个Python列表)：</p><p>  Not only do these binding now have access to the full  GIMP  API, but theyalso have access to many more introspected APIs used as dependencies to GIMP. For instance a plug-in can have access to the full GLib/ GIO,  GTK,Pango, Cairo APIs as well as the babl and  GEGL  API (for easier pixelmanipulation and access to a massive range of existing operations). Thiswas one of the main limitation of the former Python 2 binding, whichcould not manipulate pixels with  GEGL.</p><p>这些绑定现在不仅可以访问完整的GIMP API，而且还可以访问更多作为GIMP依赖项的自省API。例如，一个插件可以访问完整的Glib/GIO、GTK、Pango、cairo API以及Babl和GEGL API(为了更容易的像素操作和对大量现有操作的访问)。这是以前的Python2绑定的主要限制之一，它不能使用GEGL操作像素。</p><p> Status: some people are regretting the facilities provided by theformer Python 2 binding, such as automatic dialog creation. Thisis worked on right now (some embryo of dialog generation has evenalready landed in the development branch after 2.99.2 release) henceshould be available for the next development release. The best part isthat such  API will be done on the main  API, thus available to allbindings, not just Python or Scheme.This is one of the biggest advantages of introspected  API compared tomanually maintained bindings: rather than reimplementing nice featuresin every available binding, we will provide them in the main  API so thatevery developer can enjoy them, whatever your preferred language.</p><p>现状：有些人对以前的Python2绑定提供的便利感到遗憾，比如自动创建对话框。THIS目前正在工作(一些对话框生成的雏形甚至已经在2.99.2版本之后进入了开发分支)，因此应该可以在下一个开发版本中使用。最好的部分是这样的API将在主API上完成，因此对所有绑定都可用，而不仅仅是Python或模式。这是自省API与手动维护的绑定相比的最大优势之一：我们将在主API中提供它们，以便每个开发人员都可以享受它们，无论您喜欢哪种语言，而不是在每个可用绑定中重新实现好的特性。</p><p> Finally Script-fu is not one of the introspected bindings (though thereis supposedly GObject Introspecting scheme bindings, but we haven’ttested any yet) and still mostly works as its own extension. Yet issuesregarding some of the  API changes have been raised (for instance theinability to create  GFile as discussed earlier) and will have to befixed before finale stable release.</p><p>最后，SCRIPT-FU不是被反思的绑定之一(虽然据说有GObject Introspecting方案绑定，但我们还没有测试任何绑定)，并且主要作为它自己的扩展工作。然而，一些关于API更改的问题已经被提出(例如，无法像前面讨论的那样创建GFile)，这些问题必须在最终稳定发布之前得到解决。</p><p>  For each of the tested binding languages, we created a plug-in called“Goat exercise”, which is a demo for creating plug-ins. You can call ita “  GIMP Hello World!“.</p><p>对于每种经过测试的绑定语言，我们都创建了一个名为“Goat Exercise”的插件，这是一个创建插件的演示。你可以称它为“GIMP Hello World！”</p><p> Each Goat Exercise does exactly the same thing in its own language: itcreates a dialog with a label, buttons and a text view ( GTK+ andGLib/ GIO demo); one of the buttons triggers a filter modifying theactive layer ( GEGL demo and  GIMP  API demo); all this while showing itsown source code inside the text view (making it easy to inspect the codefrom within  GIMP) and with a button sending you to the repository file(if you prefer to check out the last version, comfortably in your code editor).</p><p>每个Goat练习用它自己的语言做完全相同的事情：它创建一个带有标签、按钮和文本视图(GTK+和GLib/GIO演示)的对话框；其中一个按钮触发一个过滤器来修改Active Layer(GEGL演示和GIMP API演示)；所有这一切都同时在文本视图中显示它自己的源代码(便于从GIMP中检查代码)，并使用一个按钮将您发送到存储库文件(如果您更喜欢签出最新版本，</p><p>  These plug-ins are quite important as we are planning to improve theplug-in ecosystem with  GIMP 3. They are the first step of“self-documenting demo plug-ins” (while doing something a bit moreexciting that a bare “Hello World”).</p><p>这些插件非常重要，因为我们计划用GIMP 3来改善插件生态系统。它们是“自我记录演示插件”的第一步(同时做一些比光秃秃的“Hello和World”更令人兴奋的事情)。</p><p> Status: current code of the Goat Exercise is not always up-to-datewith the most recent  API yet as it is a moving target. These will beupdated before release.</p><p>状态：山羊练习的当前代码并不总是使用最新的API更新，因为它是一个移动的目标。这些将在发布之前进行更新。</p><p>  We have started to write down some documentation regarding plug-indevelopment in  GIMP 3, and will progressively start to publish sometutorials. Hopefully we will even be able to relaunch our developerwebsite that has been slowly decaying for too many years. We hope that GIMP 3 will revitalize the  GIMP plug-in ecosystem!</p><p>我们已经开始在GIMP3中写下一些关于插件开发的文档，并将逐步开始发布一些指南。希望我们甚至能够重新推出我们的开发者网站，这个网站多年来一直在慢慢衰败。我们希望GIMP 3能让GIMP插件生态系统重新焕发生机！</p><p>   Extensions are a new file format that is simply a wrapper of data(brushes, splash screens, patterns, dynamics…) or plug-ins, associatedwith metadata (name, description, screenshots, version, requirements…).The goal will be to allow plug-in developers to publish their work onrepositories for anyone to search third-party plug-ins,install/uninstall, enable/disable and update them, all within  GIMP.</p><p>扩展名是一种新的文件格式，它只是数据(画笔、闪屏、图案、动态…)的包装器。或与元数据关联的插件(名称、描述、屏幕截图、版本、Requirements…)。目标是允许插件开发人员发布他们在存储库上的工作，任何人都可以在GIMP中搜索第三方插件、安装/卸载、启用/禁用和更新它们。</p><p> The menu  Edit &gt; Manage Extensions shows the base dialog. In the“System Extensions” tab in particular, you will notice an “Official DemoPlug-ins” which is our first extension. It in fact bundles all the GoatExercises plug-ins we talked about earlier. If you switch if off, youwill notice after a restart (right now you have to restart  GIMP to seethe effect) that the menu category  Filters &gt; Development &gt; GoatExercises disappeared.</p><p>菜单编辑&&gt;管理扩展会显示基本对话框。特别是在“系统扩展”选项卡中，您会注意到一个“官方DemoPlug-in”，这是我们的第一个扩展。事实上，它捆绑了我们前面谈到的所有GoatExercise插件。如果关闭，重新启动后(现在必须重新启动GIMP才能看到效果)，菜单类别Filters&gt；Development&&gt;GoatExercises消失了。</p><p>  We’ll get back to talking about this feature after we’ve done more workon it. In particular, we will provide documentation on how to createextensions. It is definitely something plug-in and resource creatorsshould look forward to, as it will help share their creations with others.</p><p>在我们做了更多的工作之后，我们将继续讨论这个特性。特别是，我们将提供有关如何创建扩展的文档。这绝对是插件和资源创建者应该期待的东西，因为它将有助于与其他人分享他们的创作。</p><p> Status: still more work to do on the  GIMP side, especially forcommunicating with repositories, and much more work to be done for theofficial repository and the website for extensions.</p><p>现状：在GIMP方面还有更多的工作要做，特别是在与存储库的通信方面，在官方存储库和扩展网站方面还有更多的工作要做。</p><p>  “ Space invasion” is the internal code name for the work originallystarted in  2018whose goal was proper support of color space during core pixelprocessing. In the  GIMP 2.10 series, despite core color managementsupport, the profiles were sometimes lost during an operation processingand only reintroduced on finale results, which may result in wrongvalues in some cases.</p><p>“太空入侵”是这项工作的内部代号，最初于2018年开始，其目标是在核心像素处理过程中适当地支持色彩空间。在GIMP 2.10系列中，尽管核心色彩管理支持，但配置文件有时会在操作过程中丢失，并且只有在最终结果时才重新引入，这可能会在某些情况下导致错误的值。</p><p> Anyone interested to understand further the problematics can read Øyvind Kolås’s post and inparticular the detailed associated  release notes for  GEGL0.4.6 where heexplains this really well.</p><p>任何有兴趣进一步了解这个问题的人都可以阅读öyvind Kolçs的帖子，特别是GEGL0.4.6的详细相关版本说明，他很好地解释了这一点。</p><p> Some of the improvements of this work have already been progressivelybackported to various  GIMP 2.10.x releases, but  GIMP 3.0 should be theculminating release where we hope to get this 100% right.</p><p>这项工作的一些改进已经被逐步报告到各种GIMP 2.10.x版本中，但是GIMP 3.0应该是我们希望100%正确的最终版本。</p><p> Status: the development branch is much more advanced on this topicthan the 2.10 series, but some more work needs to be done. Variousaspects of  GIMP still mostly expect or display sRGB-only values.</p><p>现状：在这个主题上，开发分支比2.10系列要先进得多，但还需要做更多的工作。GIMP的各个方面仍然主要预期或显示仅限sRGB的值。</p><p>  GIMP 3 now has a render cache that keeps the result of scaling, colormanagement, display filters and shell mask (for tools like  Fuzzy Select).This results in much snappier user experience in comparison to the  GTK2version of  GIMP.</p><p>GIMP 3现在有一个渲染缓存，可以保存缩放、色彩管理、显示过滤器和外壳蒙版(用于模糊选择等工具)的结果。与GTK2版本的GIMP相比，这带来了更快的用户体验。</p><p> There is now also a  Zoom Quality setting in  Preferences -&gt; Display.When set to  Fast,  GIMP will do a nearest neighbor interpolation fromthe next bigger mipmap level instead of linear or box filtering. Thisgives a slight and permanent boost to painting and all updates. We havea few ideas to improve this further like reblitting in high qual</p><p>现在，在首选项-&gt；显示中也有缩放质量设置。当设置为快速时，GIMP将从下一个更大的mipmap级别进行最近邻内插，而不是线性或框过滤。这对绘画和所有更新都有轻微而持久的推动作用。我们有几个想法可以进一步改善这一点，比如高质量的重新定位。</p><p>......</p><p>.</p></div><div id="story_share_this"><div class="sharethis-inline-share-buttons"></div></div><div class="text-break sotry_link page_narrow"><a target="_blank" href="https://www.gimp.org/news/2020/11/06/gimp-2-99-2-released/">https://www.gimp.org/news/2020/11/06/gimp-2-99-2-released/</a></div><div class="story_tags page_narrow"><button type="button" class="btn btn-light my_tag"><a href="/tag/用户界面/">#用户界面</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/user/">#user</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/gimp/">#gimp</a></button></div></div><div class="my_movie_list_item shadow p-3 mb-5 bg-white rounded"><button type="button" class="btn btn-link my_tag"><a href="/tag/web2.0/">#web2.0</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/google/">#google</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/设计/">#设计</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/游戏/">#游戏</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/创意/">#创意</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/apple/">#apple</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/苹果/">#苹果</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/摄影/">#摄影</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/软件/">#软件</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/美国/">#美国</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/iphone/">#iphone</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/图片/">#图片</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/手机/">#手机</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/视频/">#视频</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/广告/">#广告</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/免费/">#免费</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/谷歌/">#谷歌</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/网站/">#网站</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/windows/">#windows</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/微软/">#微软</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/下载/">#下载</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/firefox/">#firefox</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/音乐/">#音乐</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/linux/">#linux</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/blog/">#blog</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/博客/">#博客</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/程序/">#程序</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/艺术/">#艺术</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/web/">#web</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/wordpress/">#wordpress</a></button></div></div></div><div id="my_footer"><div class=""><a href="/tags/">tags</a> <a href="/users/">users</a></div>&copy; 2020 diglog.com </div></div></body></html>