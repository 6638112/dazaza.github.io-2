<!doctype html><html lang="zh-hans"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>单元对话</title><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"><link rel="stylesheet" href="/img/css.css?random="><link data-rh="true" rel="icon" href="/img/favicon.ico"/><script data-ad-client="ca-pub-6067137220025946" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script type="text/javascript" src="https://platform-api.sharethis.com/js/sharethis.js#property=5effb96910009800120b8d4d&product=inline-share-buttons" async="async"></script>
<script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?03c1a0f31299b4a2fbb83c34d6beaac9";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script></head><body><div id="my_header"><div class="container"><nav class="navbar navbar-expand-lg"><a class="navbar-brand" href="/"><img alt="diglog" src="/img/logo.v1.gif" class="rounded-sm"></a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarNavAltMarkup"><div class="navbar-nav"></div></div></nav></div></div><div class="container"><div id="my_content"><h1 class="page_narrow">单元对话</h1><div class="row"><div class="col-lg-12 col-12"><div class="my_story_list_item shadow p-3 mb-5 bg-white rounded"><div class="story_page_pub_time page_narrow">2020-09-24 15:24:54</div><div class="page_narrow text-break page_content"><p>看待单元测试的方式有很多种，但我最喜欢的一种方式是将其视为在没有REPL的语言中拥有REPL的一种尝试。</p><p>当您有一个REPL时，您可以调用一个函数并交互地了解它是如何工作的。您可以立即获得反馈-您可以与其进行对话。在动态类型的语言中，这很容易。他们中的大多数都有REPL。在静态类型的语言中，这要困难得多。编译器需要执行其检查。在最坏的情况下，它必须检查一组可传递的依赖项。工具制造商通常甚至不会考虑为这样的语言编写REPL。您将能够与您的代码进行的对话不会立即进行-会有太多的停顿。</p><p>尽管有相似之处，但REPL和一系列测试之间有一个关键的区别。测试是封装的、可独立执行的历史片段-与您正在测试的事物精确交互的历史记录。</p><p>我们可以尝试通过将REPL对话复制并粘贴到测试文件中来创建测试，但这既笨拙又乏味。谢天谢地，我们是程序员。我们知道该怎么做-自动化。</p><p>我用Ruby写了一些概念证明。它被称为C11R(字符的代名词)。</p><p>我们的想法是要有一个小工具来帮助我们交互地为现有代码编写单元级表征测试。该工具是对话型的。我们编写代码行来设置我们的环境，使用特定参数运行函数并查看结果。如果我们对结果满意，我们会发出一个命令来保存我们作为测试所做的工作。</p><p>如果我们喜欢2作为答案(我们应该这样做)，我们可以使用PUSH命令，然后c11r输出一个测试，以测试我们所学到的内容。</p><p>测试Ruby似乎在我们想要的时候给了我们2&#34；assert_eq(2，1+1)End(#34；Assert_eq(2，1+1)End</p><p>&gt；修复新的&gt；修复添加a=A。新&gt；修复添加b=B。新的&gt；问一个。用(3)+b运行_。使用(2)运行(_)。</p><p>在这里，我们使用FIX NEW创建一个灯具(一次只能激活一个灯具)。Fix add命令将行附加到空的fixture，Ask执行上面看到的完全相同的操作，生成答案12。</p><p>有关fixture的好处是，它们会一直存在，直到我们再次运行fix new。</p><p>&gt；修复新的&gt；修复添加a=A。新&gt；修复添加b=B。新的&gt；问一个。用(3)+b运行_。Run_with(2)-12&gt；将跑步者推开一个产量简单的值&gt；询问a。用(3)+b运行_。Run_with(5)-24；将跑步者推下一次以上的水平跳跃。</p><p>如果我们不清楚该装置包含什么，我们可以运行fix来查看它。</p><p>很容易把它想象成一个IDE插件来做这种事情，用文本框来保存灯具和问句。我真的很惊讶竟然没有人这么做。这只是一个额外的小东西，可以使特性测试变得更容易。</p><p>您可以在这里找到概念证明代码。如果您对它进行进一步的扩展，请与其联系。</p></div><div id="story_share_this"><div class="sharethis-inline-share-buttons"></div></div><div class="text-break sotry_link page_narrow"><a target="_blank" href="https://michaelfeathers.silvrback.com/unit-conversations">https://michaelfeathers.silvrback.com/unit-conversations</a></div><div class="story_tags page_narrow"><button type="button" class="btn btn-light my_tag"><a href="/tag/单元/">#单元</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/unit/">#unit</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/测试/">#测试</a></button></div></div><div class="my_movie_list_item shadow p-3 mb-5 bg-white rounded"><button type="button" class="btn btn-link my_tag"><a href="/tag/web2.0/">#web2.0</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/google/">#google</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/设计/">#设计</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/创意/">#创意</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/摄影/">#摄影</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/游戏/">#游戏</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/图片/">#图片</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/软件/">#软件</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/视频/">#视频</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/手机/">#手机</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/广告/">#广告</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/apple/">#apple</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/iphone/">#iphone</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/网站/">#网站</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/免费/">#免费</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/下载/">#下载</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/windows/">#windows</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/微软/">#微软</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/firefox/">#firefox</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/苹果/">#苹果</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/blog/">#blog</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/音乐/">#音乐</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/博客/">#博客</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/wordpress/">#wordpress</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/恶搞/">#恶搞</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/艺术/">#艺术</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/qq/">#qq</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/web/">#web</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/谷歌/">#谷歌</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/工具/">#工具</a></button></div></div></div><div id="my_footer"><div class=""><a href="/tags/">tags</a> <a href="/users/">users</a></div>&copy;2012-2021 diglog.com </div></div></body></html>