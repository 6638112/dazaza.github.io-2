<!doctype html><html lang="zh-hans"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>谢谢HN：谷歌几乎杀死我的网站后汲取的经验教训 Thanks HN: Lessons learned after Google nearly killed my site</title><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"><link rel="stylesheet" href="/img/css.css?random="><link data-rh="true" rel="icon" href="/img/favicon.ico"/><script data-ad-client="ca-pub-6067137220025946" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script type="text/javascript" src="https://platform-api.sharethis.com/js/sharethis.js#property=5effb96910009800120b8d4d&product=inline-share-buttons" async="async"></script>
<script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?03c1a0f31299b4a2fbb83c34d6beaac9";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script></head><body><div id="my_header"><div class="container"><nav class="navbar navbar-expand-lg"><a class="navbar-brand" href="/"><img alt="diglog" src="/img/logo.v1.gif" class="rounded-sm"></a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarNavAltMarkup"><div class="navbar-nav"></div></div></nav></div></div><div class="container"><div id="my_content"><h1 class="page_narrow">Thanks HN: Lessons learned after Google nearly killed my site<br/>谢谢HN：谷歌几乎杀死我的网站后汲取的经验教训 </h1><div class="row"><div class="col-lg-12 col-12"><div class="my_story_list_item shadow p-3 mb-5 bg-white rounded"><div class="story_page_pub_time page_narrow">2021-03-07 09:15:35</div><div class="page_narrow text-break page_content"><p>I am the creator of Uploader window, a website that helps users to add an upload widget to their own apps or websites.</p><p>我是Uploader窗口的创建者，一个网站，帮助用户将上传小部件添加到自己的应用程序或网站上。</p><p>    We’ve been running this website for almost 3 years without any issues ( since 2017).  But something happened yesterday that almost shutdown my entire business at a moment’s notice.</p><p>    我们已经在没有任何问题的情况下运行了这个网站近3年（自2017年以来）。但是昨天发生了一些事情，这几乎在一瞬间关闭了我的整个业务。</p><p>    My Whatsapp started ringing. In addition to email support I give many paying users my personal WA number for emergencies. It was a message from a client using our services for over 2+ years now. He said that they are getting a warning on their site because of our script. Anybody visiting any site in which my clients integrated my app were also showing this red screen of death.</p><p>    我的是开工响铃。除了电子邮件支持外，我还给许多支付用户我的个人WA号码是否适合紧急情况。它是一条来自客户的消息，现在超过2年超过2年。他说他们因脚本而在他们的网站上发出警告。访问任何网站的人，其中我的客户集成了我的应用也也显示了这种死亡的红色屏幕。</p><p>        I opened my Inbox and there was another email from a client about the same issue.</p><p>        我打开了我的收件箱，并且来自客户的另一电子邮件有关同样的问题。</p><p>    Now we run automated tests to monitor server uptime and check server for problems every 30 seconds. Unfortunately automated test scripts were happily getting HTTP/200 replies while people using the Chrome browser were being told this is a scam business trying to steal their bank account information.</p><p>    现在我们运行自动测试以每30秒监控服务器正常运行时间并检查服务器是否存在问题。不幸的是，自动化测试脚本很乐意获得HTTP / 200回复​​，而使用Chrome浏览器的人被告知这是一个骗局企业，试图窃取他们的银行账户信息。</p><p>  Not knowing the first thing about what had happened I started looking for ways I could fix it quickly. And this is when I realized that while it was something new to me,  it has been happening for a very long time and many businesses are affected by it. All because this whole process for getting blacklisted is pretty automatic and you don’t really know about it until you’re actually blacklisted.</p><p>  不知道我开始寻找的事情的第一件事我可以快速解决它。这是我意识到这对我来说是新的，它已经发生了很长一段时间，许多企业受其影响。所有是因为这一整个游黑的过程是漂亮的自动，你真的不知道它，直到你真的被黑名单。</p><p>            I never got any email from Google but as many articles suggested the best place to start is inside the  GWT (renamed Search Central). As soon as I added my site to GWT, I got a big red security issue that my site has been categorized as a deceptive phishing site which harms customers. It also listed my homepage as the deceptive page.</p><p>            我从未有谷歌的任何电子邮件，但随着许多文章建议最佳地点在GWT内（重命名的搜索中心）。一旦我向GWT添加了我的网站，我就有一个大的红色安全问题，我的网站被归类为危害客户的欺骗性网络钓鱼网站。它还将我的主页列为欺骗性的页面。 </p><p>        It was issued a few hours ago and I was already on 5 blacklists in a matter of a few hours. Soon firefox users started seeing a warning too.</p><p>几个小时前发布了，我已经在几个小时内已经在5个黑名单。很快Firefox用户也开始看到警告。</p><p>    I checked the source code of my homepage, checked all Javascripts by hand, manually logged in to my server and checked all running processes on my servers to see if in fact we had been hacked.  Nothing, absolutely nothing was changed.</p><p>    我检查了我主页的源代码，用手检查所有JavaScript，手动登录到我的服务器，并在我的服务器上检查所有正在运行的进程，以查看实际上我们是否已被黑了攻击。没什么，绝对没有任何改变。</p><p>    There was a box to submit your site for a review but it didn’t say how much time it would take. Some said it may take upto 4 days, other sites said it could be even longer!  My business would most certainly be dead if it took that long.</p><p>    有一个框来提交您的网站进行审核，但并没有说出需要多长时间。有人说它可能需要4天，其他网站说它可能更长！如果花了那么长时间，我的业务肯定会死。</p><p>            When searching for why this has happened and ways to fix it I stumbled upon similar threads from Hacker news.  It seems a lot of other people have been victims of Google&#39;s trigger-happy blacklisting and it’s not an easy fix.</p><p>            在寻找为什么发生这种情况和修复它的方法时，我偶然发现了黑客新闻的类似线程。似乎很多人都是谷歌的受害者＆＃39;触发快乐的黑名单，这不是一个简单的修复。</p><p>    Once you’re listed, you get  bumped off Google search results and all users are banned from visiting your site (some users said they couldn’t even access it after accepting the advanced warning). Basically it’s `poweroff -h` for your site.</p><p>    一旦您列出，您会撞到Google搜索结果，所有用户都被禁止访问您的网站（某些用户表示，在接受先进警告后，他们甚至无法访问它）。基本上它是你网站的“PowerOff -H”。</p><p>    But there are plenty of Google engineers and good helpful people on Hacker news. People who go out of their way to help others</p><p>    但是有很多谷歌工程师和黑客新闻的乐于助人的人。竭尽全力帮助别人的人</p><p>        I was super tempted to contact this person directly but I decided it isn&#39;t very polite to bother people like this. Instead I posted my own thread mainly looking for advice on how I can expedite the review process and maybe learn what the hell had happened yesterday.</p><p>        我是超级诱惑直接联系这个人，但我决定它是不礼貌地打扰这样的人。相反，我发布了自己的线程，主要寻找关于如何加快审查过程的建议，也许可以了解昨天发生了什么。 </p><p>      I listed all the reasons I could think off and people were quick to help. My call for help quickly reached HN’s homepage and I finally figured out what had happened</p><p>我列出了我可以思考的所有原因，人们很快就可以帮助。我呼吁快速到达HN的主页，我终于想到了发生了什么</p><p>          So after a lot of brainstorming and ideas from HNers I finally figured out the culprit(s).</p><p>          所以经过很多头脑风暴和思想，我终于想到了罪魁祸首。</p><p>    We have a live demo on our home where people can upload a test file. The demo is a way for users to actually see how the uploader will look in their own apps. It&#39;s a way for users to test drive the site without actually signing up.</p><p>    我们在我们的家中有一个现场演示，人们可以上传测试文件。 Demo是用户实际上看到上传者如何了解自己的应用程序的一种方式。它＆＃39;是用户在没有实际注册的情况下测试网站的方式。</p><p>    Visitors love the demo. It greatly helps our conversions. I did think the demo could be used for file piracy so any files uploaded to the demo are automatically deleted after 24 hours. We never allow anything other than video and image files either. And we host the files on a cdn, so they are linked using a subdomain (cdn.uploader.win)</p><p>    游客喜欢演示。它极大地帮助我们的转换。我确实认为演示可以用于文件盗版，因此24小时后，上传到演示的任何文件都会自动删除。我们永远不会允许除视频和图像文件以外的任何内容。我们在CDN上托管文件，因此它们将使用子域（CDN.UPLOADER.WIN）链接</p><p>    We also give all users a 20MB test storage. This is to help them integrate the Uploader in their own site during development.</p><p>    我们还为所有用户提供20MB的测试存储。这是为了帮助他们在开发期间将上传者集成在自己的网站上。</p><p>    I believe that somebody signed up for our service (it’s free to sign up) and then uploaded a malicious file on our test storage and abused this feature.</p><p>    我相信有人注册了我们的服务（免费注册），然后在我们的测试存储上上传恶意文件并滥用此功能。</p><p>      We cannot unfortunately disable the live demo or remove the test storage because they both serve a purpose. But there are few things we can do to mitigate it in future:</p><p>      不幸的是，我们不能禁用实时演示或删除测试存储，因为它们都提供了一个目的。但是，我们将在未来减轻它的情况很少： </p><p>    Link to any user uploaded content using a separate domain altogether (never main domain or subdomain).</p><p>使用单独的域共链接到任何用户上载的内容（从不主域或子域）。</p><p>    If you are giving users any scripts to integrate on their site make sure to host them on a separate domain.</p><p>    如果您为用户提供以其站点集成的任何脚本，请务必在单独的域中托管它们。</p><p>        I’m not 100% sure about this but while I was frantically trying to scan my website using various online services a lot of them warned about using base64 content in the homepage.</p><p>        我不是100％肯定的这一点，但是当我疯狂地尝试使用各种在线服务扫描我的网站时，很多人都在主页中使用Base64内容警告。</p><p>        Also if you remember Google did not say it was the subdomain rather it linked directly to my homepage as hosting the deceptive content.</p><p>        此外，如果您还记得谷歌并没有说它是子域，而是直接链接到我的主页作为托管欺骗内容。</p><p>    The reason for adding inline images is to reduce the number of HTTP requests (which speeds up the page load). This got us a good score on Pagespeed insights but at the same time a lot of online virus scanners do frown upon pages that do it.</p><p>    添加内联图像的原因是减少HTTP请求的数量（加速页面加载）。这让我们在Pagespeed Insights上获得了一个很好的分数，但同时有很多在线病毒扫描仪会皱眉，这些页面会皱起它。</p><p>    Since I will never know what I did wrong I just removed all inline content (as suggested by some HNers).</p><p>    由于我永远不会知道我做错了什么，我刚刚删除了所有内联内容（如一些人提出的那样）。</p><p>      Again this is just hypothesis and it may or may not have been the case... but why take chances?</p><p>      这只是假设，它可能是也可能不是这种情况......但为什么要机会？ </p><p>        My biggest worry in all this was how it would affect my customers who depend on my site for uploads. I was feeling so helpless and anxious.</p><p>我最大的担忧是如何影响我的客户依赖我的网站上传。我感觉如此无助和焦虑。</p><p>    So I decided to instead communicate directly with some customers while I was waiting for resolution. Not only were most of my customers super supportive but I also realized that most of my customers are just developers like me and understood that things like this happen and cannot be controlled.</p><p>    所以我决定在等待解决方案时直接与一些客户进行沟通。我的大多数客户不仅超级支持，而且我也意识到我的大多数客户只是像我这样的开发人员，并理解这样的事情发生，无法控制。</p><p>                The whole ordeal was sorted in only 6 to 7 hours and things are great again!  I believe the HN thread getting on the homepage tremendously helped me and somebody from Google saw it and expedited the review after all (or maybe I was just lucky who knows). In just 4 hours after posting the thread I heard from Google (got an email this time) that my site was reviewed and removed from blacklist.</p><p>                整个磨损只在6到7个小时内排序，事情又很棒！我相信HN线程上的主页非常帮助我，谷歌的某人毕竟帮助了，并加快了审查（或者我也是我知道的幸运）。在发布我听到的线程后的只需4个小时内（此时收到一封电子邮件），我的网站被审核并从黑名单中删除。</p><p>        It was a great learning experience for me but also a little scary how fragile online businesses are. You can write all the cron jobs to monitor every single part of your business but you can never be prepared for everything.</p><p>        这对我来说是一个很好的学习体验，但也有点可怕了脆弱的在线企业。您可以编写所有Cron作业以监视业务的每一部分，但您永远无法为一切准备。</p><p>    And when shtf, the best solution is to always be open about what happened and ask for help. There are so many good people who will go out of their way to help you out.</p><p>    当SHTF时，最好的解决方案是始终开放发生的事情并询问帮助。有这么多好人会竭尽全力帮助你。</p><p>  So special thanks to all the people at Hacker news who were not only super helpful with their suggestions and comments, but also helped me get this sorted quickly!</p><p>  如此特别感谢黑客新闻中的所有人，他们不仅超强了他们的建议和意见，而且还帮助我快速地进行了分类！</p><p>    P.S. In case you learned something from my experience or liked reading this,  please take a minute to check out  Uploader window by clicking here. It’s 100% Free to try and it can reduce your development times by a lot!</p><p>    P.S.如果您从我的经验或喜欢阅读这方面学习了一些东西，请花一点时间通过单击此处查看上传窗口窗口。这是100％免费试用，可以减少您的发展时间！ </p></div><div id="story_share_this"><div class="sharethis-inline-share-buttons"></div></div><div class="text-break sotry_link page_narrow"><a target="_blank" href="https://www.uploader.win/blog/">https://www.uploader.win/blog/</a></div><div class="story_tags page_narrow"><button type="button" class="btn btn-light my_tag"><a href="/tag/谷歌/">#谷歌</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/google/">#google</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/hn/">#hn</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/lessons/">#lessons</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/网站/">#网站</a></button></div></div><div class="my_movie_list_item shadow p-3 mb-5 bg-white rounded"><button type="button" class="btn btn-link my_tag"><a href="/tag/web2.0/">#web2.0</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/google/">#google</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/设计/">#设计</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/创意/">#创意</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/摄影/">#摄影</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/图片/">#图片</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/游戏/">#游戏</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/软件/">#软件</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/视频/">#视频</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/手机/">#手机</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/广告/">#广告</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/iphone/">#iphone</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/网站/">#网站</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/免费/">#免费</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/下载/">#下载</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/windows/">#windows</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/微软/">#微软</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/blog/">#blog</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/firefox/">#firefox</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/apple/">#apple</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/音乐/">#音乐</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/苹果/">#苹果</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/博客/">#博客</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/wordpress/">#wordpress</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/恶搞/">#恶搞</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/艺术/">#艺术</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/qq/">#qq</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/web/">#web</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/工具/">#工具</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/分享/">#分享</a></button></div></div></div><div id="my_footer"><div class=""><a href="/tags/">tags</a> <a href="/users/">users</a></div>&copy; 2020 diglog.com </div></div></body></html>