<!doctype html><html lang="zh-hans"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Unix中服务管理的历史（排序）The history (sort of) of service management in Unix</title><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"><link rel="stylesheet" href="/img/css.css?random="><link data-rh="true" rel="icon" href="/img/favicon.ico"/><script data-ad-client="ca-pub-6067137220025946" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script type="text/javascript" src="https://platform-api.sharethis.com/js/sharethis.js#property=5effb96910009800120b8d4d&product=inline-share-buttons" async="async"></script>
<script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?03c1a0f31299b4a2fbb83c34d6beaac9";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script></head><body><div id="my_header"><div class="container"><nav class="navbar navbar-expand-lg"><a class="navbar-brand" href="/"><img alt="diglog" src="/img/logo.v1.gif" class="rounded-sm"></a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarNavAltMarkup"><div class="navbar-nav"></div></div></nav></div></div><div class="container"><div id="my_content"><h1 class="page_narrow">The history (sort of) of service management in Unix<br/>Unix中服务管理的历史（排序）</h1><div class="row"><div class="col-lg-12 col-12"><div class="my_story_list_item shadow p-3 mb-5 bg-white rounded"><div class="story_page_pub_time page_narrow">2022-02-22 03:46:43</div><div class="page_narrow text-break page_content"><p>It&#39;s common for sophisticated Unix init systems to also be some degreeof service management systems; the most obvious example is Linux&#39;ssystemd. However, many people have observed that it doesn&#39;t haveto be this way and have created separate systems for this, such as D. J. Bernstein&#39;s daemontools.Since  service management (or lack of it) has become one of theimportant areas of Unix init systems, youmight wonder why they&#39;ve come to have this responsibility. A significantpart of the reason is history, although  there are also pragmaticreasons.</p><p>它&#39；复杂的Unix init系统通常也是某种程度的服务管理系统；最明显的例子是Linux&#39；系统。然而，许多人观察到它没有&#39；不必如此，并为此建立了独立的系统，如D.J.Bernstein和#39；这是daemontools。由于服务管理（或缺乏服务管理）已成为Unix init系统的重要领域之一，您可能会想知道为什么它们会&#39；我是来承担这个责任的。一个重要的原因是历史，尽管也有一些实用主义的原因。</p><p> (I also think that  it&#39;s what people want. Systemadministratorys mostly don&#39;t want to have to deal with an init systemand then a separate service supervision system; they want to deal withone thing.)</p><p>（我还认为这是人们想要的。系统管理员通常不想处理初始系统，然后是单独的服务监督系统；他们想处理一件事。）</p><p> Specifically, for a long time Unix didn&#39;t have any sort of servicemanagement as such, beyond  init restarting getty processes. All services were simply started as part ofthe boot process in what started as  a very simple script and grewonly somewhat from there in BSD Unixes. If you needed to check thestatus of services, you ran  ps; if you needed to restart a service,you terminated it with  kill and started the new version by hand.The System V init system moved this forward somewhat by creatingscripts that encapsulated the knowledge of how to start, stop, andsometimes check the status of each service, but it did nothing tomanage the services as such; it still merely booted (and shut down)the system. Noticing that a service&#39;s daemons had died and startingthem again was up to you.</p><p>具体来说，在很长一段时间里，Unix没有&#39；除了初始化重新启动getty进程之外，我们没有任何类型的服务管理。所有服务都是作为启动过程的一部分启动的，启动时是一个非常简单的脚本，在BSD Unix中有点过时。如果需要检查服务状态，可以运行ps；如果需要重新启动服务，可以使用kill终止服务，并手动启动新版本。System V init系统通过创建脚本，将如何启动、停止以及有时检查每个服务的状态的知识封装起来，从而在一定程度上推进了这一点，但它没有对服务本身进行管理；它仍然只是启动（并关闭）系统。注意到服务&#39；s的守护进程已经死亡，重新启动它们取决于你。</p><p> (In System V init you could theoretically use /etc/inittab forrestarting daemons, but the overall init system environment didn&#39;tsupport doing it this way.)</p><p>（在SystemV init中，理论上可以使用/etc/inittab重新启动守护进程，但整个init系统环境不支持这样做。）</p><p> Historically, starting services was considered intertwined with theprocess of booting Unix. Starting from when Sun introduced &#34;diskless&#34;NFS based workstations and other people copied them, some daemonsneeded to be started and running before  /usr could be mounted.You couldn&#39;t defer starting all services until the system was &#39;up&#39;,but at the same time you couldn&#39;t just start all services in a bunchand be done with it, because many of them required filesystem mountsand the like. This entanglement of starting daemons and booting thesystem made putting everything in boot scripts the natural wayforward from the mid 1980s onward. A daring Unix vendor could haveintroduced a separate services system (Sun eventually sort of didin  SMF),but it still would have been deeply entwined in the boot processand thus the init system if it was going to handle all daemons andservices on the system.</p><p>在历史上，启动服务被认为与启动Unix的过程交织在一起。从Sun推出&#34；无盘&#34；基于NFS的工作站和其他人复制了它们，在安装/usr之前，需要启动并运行一些守护程序。你不能&#39；t推迟启动所有服务，直到系统启动&#39；向上&#39；，但同时你不能&#39；I don’不要一下子启动所有的服务，也不要用它来完成，因为它们中的许多都需要安装文件系统之类的东西。从20世纪80年代中期开始，启动守护程序和启动系统的这种纠结使得将所有内容都放在启动脚本中成为一种自然的方式。一个大胆的Unix供应商本可以引入一个独立的服务系统（Sun最终有点像didin SMF），但如果它要处理系统上的所有守护进程和服务，它仍然会深深地纠缠在引导过程中，从而纠缠在初始化系统中。</p><p> (Third party systems such as djb&#39;s daemontools generally had a simplerjob because they weren&#39;t envisioned as handling all daemons and services;they were just going to handle some of them, such as djb&#39;s other programssuch as qmail and tinydns.)</p><p>（第三方系统，如djb和#s daemontools，通常有一个更简单的工作，因为它们没有被设想为处理所有的守护程序和服务；它们只会处理其中一些，如djb和#s的其他程序，如qmail和tinydns。）</p><p> In practice, Unix vendors in the 1990s were not daring. Instead,they were busy fighting with each other (see OSF/1 versus SystemV release 4) and getting run over by  the march of the cheap. The free Unixes did no better; the free BSDswere busy being faithful to the purity of UCB BSD 4.x, and Linux washard at work building  a Unix from scratch (andperhaps was not inclined to depart from various versions of what was&#39;Unix&#39; at the time as a result of the &#39;Linux is not Unix&#39; controversiesof the time).</p><p>实际上，20世纪90年代的Unix厂商并不大胆。相反，他们忙于相互争斗（见OSF/1与SystemV release 4），并被廉价商品的大行其道压得喘不过气来。自由统一体也没有更好的表现；免费的BSD们忙着忠实于UCB BSD 4的纯度。x、 LinuxWashard正在从头开始构建一个Unix（也许由于当时的争论，他不想偏离当时的各种版本）。</p><p> (This is a somewhat grumpy summary of the situation, since the freeBSDs did make major changes in their init setups in practice. Butfor whatever reason, none of them changed drastically into a separateservices manager setup, although daemontools and other implementationsshows that the idea was definitely around in the open source Unixcommunity. Possibly one problem is that  Solaris SMF wasn&#39;t a goodsystem.)</p><p>（这是一个有点暴躁的情况总结，因为FreeBSD在实践中确实对其init设置进行了重大更改。但无论出于何种原因，它们都没有大幅更改为单独的服务管理器设置，尽管daemontools和其他实现表明，这个想法肯定存在于开源Unixcommunity.Po中。）一个可能的问题是Solaris SMF没有&#39；这不是一个好的系统。）</p><p> PS: I wrote up a somewhat different version of this historysome years ago in  How init wound up as Unix&#39;s daemon manager. Rereading that, I see that in writing thisentry I forgot how the addition of networking in BSD Unix complicatedsystem boot and daemon startup, because now you needed the networkconfigured before some daemons got started.</p><p>PS：几年前，我在《init最终如何成为Unix》一书中写了一个与此历史稍有不同的版本&#39；s守护进程管理器。重读一遍，我发现在写这篇文章时，我忘记了在BSD Unix中添加网络是如何使系统启动和守护进程启动复杂化的，因为现在您需要在一些守护进程启动之前配置网络。</p></div><div id="story_share_this"><div class="sharethis-inline-share-buttons"></div></div><div class="story_tags page_narrow"><button type="button" class="btn btn-light my_tag"><a href="/tag/历史/">#历史</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/sort/">#sort</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/服务/">#服务</a></button></div></div><div class="my_movie_list_item shadow p-3 mb-5 bg-white rounded"><button type="button" class="btn btn-link my_tag"><a href="/tag/web2.0/">#web2.0</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/google/">#google</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/设计/">#设计</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/创意/">#创意</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/摄影/">#摄影</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/图片/">#图片</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/游戏/">#游戏</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/软件/">#软件</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/广告/">#广告</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/视频/">#视频</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/手机/">#手机</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/iphone/">#iphone</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/网站/">#网站</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/免费/">#免费</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/windows/">#windows</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/下载/">#下载</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/微软/">#微软</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/苹果/">#苹果</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/firefox/">#firefox</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/blog/">#blog</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/音乐/">#音乐</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/博客/">#博客</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/apple/">#apple</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/wordpress/">#wordpress</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/恶搞/">#恶搞</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/qq/">#qq</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/艺术/">#艺术</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/谷歌/">#谷歌</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/工具/">#工具</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/web/">#web</a></button></div></div></div><div id="my_footer"><div class=""><a href="/tags/">tags</a> <a href="/users/">users</a></div>&copy;2012-2021 diglog.com </div></div></body></html>