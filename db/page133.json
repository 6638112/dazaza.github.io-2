[{"category": "", "categoryclass": "", "imagename": "b0d0fd04ca883af0d9eb1a4831feb79e.jpeg", "infoid": 1069344, "ip": "", "isanchordig": 1, "ischecked": 1, "isdelete": 0, "isneo": 1, "mark": "", "name": "", "note": "\u5728\u6fb3\u5927\u5229\u4e9a\u6089\u5c3c\u4ee5\u5357\u4e00\u5c0f\u65f6\u8f66\u7a0b\u7684\u5bcc\u88d5\u90ca\u533a\u65af\u5766\u5a01\u5c14\u516c\u56ed\uff0c\u786b\u51a0\u51e4\u5934\u9e66\u9e49\u5728\u5b83\u4eec\u7684\u4eba\u7c7b\u90bb\u5c45\u4e2d\u6ca1\u6709\u6700\u597d\u7684\u58f0\u8a89\u3002\u91ce\u751f\u52a8\u7269\u5728\u57ce\u5e02\u73af\u5883\u4e2d\u7e41\u884d\u751f\u606f\uff0c\u968f\u7740\u5b83\u4eec\u5728\u57ce\u5e02\u666f\u89c2\u4e2d\u7684\u6210\u529f\uff0c\u5b83\u4eec\u5df2\u7ecf\u517b\u6210\u4e86\u4e00\u4e9b\u7c97\u66b4\u7684\u65b0\u4e60\u60ef\u2014\u2014\u6bd4\u5982\u6253\u5f00\u5783\u573e\u6876\u76d6\u6765\u83b7\u53d6\u91cc\u9762\u7684\u597d\u4e1c\u897f\u3002 2014 \u5e74\uff0c\u8fd9\u79cd\u884c\u4e3a\u5728\u5f53\u5730\u793e\u533a\u6742\u5fd7\u4e0a\u4e3a\u9e66\u9e49\u8d62\u5f97\u4e86\u4e00\u4e9b\u8d1f\u9762\u62a5\u9053\u3002\u9e1f\u7c7b\u5b66\u5bb6\u7406\u67e5\u5fb7\u00b7\u6885\u6770 (Richard Major) \u5728\u63a5\u53d7\u8fd9\u7bc7\u6587\u7ae0\u7684\u91c7\u8bbf\u65f6\uff0c\u7b2c\u4e00\u6b21\u4e86\u89e3\u5230\u4ed6\u9644\u8fd1\u7684\u4e00\u7cfb\u5217\u9e1f\u8111\u5783\u573e\u7bb1\u88ad\u51fb\u4e8b\u4ef6\u3002\u5f53\u65f6\uff0c\u4ed6\u8fd8\u6ca1\u6709\u4eb2\u773c\u76ee\u7779\u72af\u7f6a\uff0c\u4f46\u4ed6\u548c\u4ed6\u7684\u7814\u7a76\u4eba\u5458\u51b3\u5b9a\u5728 2018 \u5e74\u8c03\u67e5\u8fd9\u79cd\u884c\u4e3a\u3002\u73b0\u5728\uff0c\u5728\u4eca\u5929\u53d1\u8868\u5728\u300a\u79d1\u5b66\u300b\u6742\u5fd7\u4e0a\u7684\u4e00\u9879\u65b0\u7814\u7a76\u4e2d\uff0c\u8be5\u56e2\u961f\u62a5\u544a\u8bf4\u8fd9\u4e9b\u806a\u660e\u7684\u51e4\u5934\u9e66\u9e49\u53ef\u4ee5\u5b66\u4e60\u8fd9\u4e00\u70b9\u4ed6\u4eec\u7684\u793e\u4f1a\u7fa4\u4f53\u4e2d\u7684\u5783\u573e\u89c5\u98df\u884c\u4e3a\uff0c\u6bcf\u5e74\u90fd\u6709\u66f4\u591a\u7684\u9e1f\u7c7b\u638c\u63e1\u8fd9\u9879\u6280\u80fd\u3002\u7814\u7a76\u4f5c\u8005\u3001\u6fb3\u5927\u5229\u4e9a\u5854\u9f99\u52a0\u4fdd\u62a4\u534f\u4f1a\u7684\u751f\u6001\u5b66\u5bb6\u7ea6\u7ff0\u9a6c\u4e01\u8bf4\uff0c\u201c\u9e66\u9e49\u662f\u9e1f\u7c7b\u4e16\u754c\u7684\u670b\u514b\u201d\uff0c\u65e0\u8bba\u662f\u5916\u8868\u8fd8\u662f\u6027\u683c\u3002\u9996\u5148\uff0c\u4ed6\u4eec\u8fd0\u52a8\u7684\u9ec4\u8272\u51a0\u50cf\u83ab\u970d\u514b\u65cf\u3002\u4ed6\u4eec\u5174\u594b\u7684\u8df3\u8dc3\u3001\u62cd\u6253\u7fc5\u8180\u548c\u6447\u5934\u7684\u8868\u73b0\u5f88\u5bb9\u6613\u88ab\u8bef\u8ba4\u4e3a\u662f\u4e00\u79cd\u6076\u9b54\u822c\u7684\u6001\u5ea6\u3002\u4ed6\u4eec\u7684\u5c16\u53eb\u58f0\u4f1a\u589e\u5f3a\u4efb\u4f55\u670b\u514b\u6447\u6eda\u6b4c\u66f2\u3002 \uff08\u9a6c\u4e01\u8bf4\uff0c\u6bcf\u5230\u65e5\u51fa\u548c\u65e5\u843d\uff0c\u6210\u7fa4\u7684\u51e4\u5934\u9e66\u9e49\u90fd\u4f1a\u201c\u771f\u6b63\u5730\u5c16\u53eb\u201d\u3002\uff09\u5b83\u4eec\u7684\u89c5\u98df\u4e60\u60ef\u5f88\u6709\u521b\u610f\uff0c\u867d\u7136\u6709\u70b9\u70e6\u4eba\u3002\u597d\u5947\u4e14\u5177\u6709\u7834\u574f\u6027\uff0c\u4ed6\u4eec\u5728\u98df\u7269\u88ad\u51fb\u4e2d\u7559\u4e0b\u4e86\u6bc1\u706d\u6027\u7684\u75d5\u8ff9\u2014\u2014\u4ece\u65a9\u9996\u82b1\u6735\u83b7\u53d6\u82b1\u871c\uff0c\u5230\u4e3a\u4e86\u83b7\u5f97\u51e0\u7c92\u79cd\u5b50\u800c\u780d\u6389\u6210\u7fa4\u7684\u6c34\u679c\u3002\u5f53\u9a6c\u4e01\uff0c\u5c11\u6821\u7684\u524d\u535a\u58eb\u4e4b\u4e00\u3002\u5b66\u751f\u548c\u4ed6\u7684\u540c\u4e8b\u4e86\u89e3\u4e86\u5783\u573e\u52ab\u6301\u884c\u4e3a\uff0c\u4ed6\u4eec\u60f3\u77e5\u9053\u8fd9\u79cd\u884c\u4e3a\u5728\u5176\u4ed6\u51e4\u5934\u9e66\u9e49\u4e2d\u6709\u591a\u666e\u904d\uff0c\u4ee5\u53ca\u806a\u660e\u7684\u9e1f\u7c7b\u662f\u5982\u4f55\u63a5\u53d7\u8fd9\u79cd\u884c\u4e3a\u7684\u3002\u4e09\u5e74\u540e\uff0c\u7ecf\u8fc7 160 \u6b21\u76f4\u63a5\u89c2\u5bdf\u548c\u4e00\u6b21\u5927\u89c4\u6a21\u7684\u516c\u6c11\u79d1\u5b66\u8c03\u67e5\uff0c\u7814\u7a76\u4eba\u5458\u8bc1\u5b9e\uff0c\u806a\u660e\u7684\u51e4\u5934\u9e66\u9e49\u53ef\u4ee5\u901a\u8fc7\u89c2\u5bdf\u5176\u4ed6\u5148\u9a71\u9e66\u9e49\u6765\u5b66\u4e60\u5982\u4f55\u6253\u5f00\u5783\u573e\u7bb1\u3002\u8fd9\u9879\u7814\u7a76\u9996\u6b21\u89c1\u8bc1\u4e86\u51e0\u53ea\u51e4\u5934\u9e66\u9e49\u7684\u521b\u65b0\u662f\u5982\u4f55\u5728\u540c\u9f84\u4eba\u4e2d\u4f20\u64ad\u4e00\u79cd\u65b0\u7684\u89c5\u98df\u6587\u5316\u3002 \u201c[\u7814\u7a76\u4eba\u5458] \u80fd\u591f\u5b9e\u65f6\u6355\u6349[\u5783\u573e\u7bb1\u6253\u5f00]\uff0c\u8fd9\u771f\u662f\u4ee4\u4eba\u5174\u594b\uff0c\u201d\u5965\u5730\u5229\u7ef4\u4e5f\u7eb3\u517d\u533b\u5927\u5b66\u7684\u8ba4\u77e5\u751f\u7269\u5b66\u5bb6 Alice Auersperg \u8bf4\uff0c\u4ed6\u6ca1\u6709\u53c2\u4e0e\u8fd9\u9879\u7814\u7a76\u3002\u5979\u5bf9\u7814\u7a76\u4eba\u5458\u5982\u4f55\u5229\u7528\u516c\u6c11\u79d1\u5b66\u7684\u529b\u91cf\u5728\u91ce\u5916\u5927\u89c4\u6a21\u8bb0\u5f55\u65b0\u7684\u884c\u4e3a\u602a\u7656\u5370\u8c61\u7279\u522b\u6df1\u523b\u3002 \u201c\u4ed6\u4eec\u6709\u4e00\u4e2a\u5f88\u597d\u7684\u65b9\u6cd5\uff0c\u201d\u5979\u8bf4\u3002\u7814\u7a76\u4eba\u5458\u5bf9\u6089\u5c3c\u548c\u5367\u9f99\u5c97 478 \u4e2a\u90ca\u533a\u7684 1,322 \u4eba\u8fdb\u884c\u4e86\u4e3a\u671f\u4e00\u5e74\u534a\u7684\u8c03\u67e5\uff0c\u8bb0\u5f55\u4e86\u5bf9\u5783\u573e\u7834\u574f\u884c\u4e3a\u7684\u89c2\u5bdf\u7ed3\u679c\u3002\u5728 2018 \u5e74\u4e4b\u524d\uff0c\u53ea\u6709\u4e09\u4e2a\u5730\u533a\u66fe\u89c2\u5bdf\u5230\u51e4\u5934\u9e66\u9e49\u6253\u5f00\u5783\u573e\u7bb1\uff0c\u4f46\u5230 2019 \u5e74\uff0c\u6709 44 \u4e2a\u5730\u533a\u62a5\u544a\u4e86\u8fd9\u79cd\u884c\u4e3a\u3002\u4e0e\u88ab\u68ee\u6797\u5305\u56f4\u7684\u9065\u8fdc\u793e\u533a\u6216\u793e\u533a\u76f8\u6bd4\uff0c\u5783\u573e\u6876\u5f00\u653e\u5728\u9644\u8fd1\u5730\u533a\u4f20\u64ad\u5f97\u66f4\u5feb\uff0c\u8fd9\u53ef\u80fd\u4f1a\u963b\u6b62\u6f6e\u6d41\u5f15\u9886\u8005\u5206\u4eab\u4ed6\u4eec\u65b0\u83b7\u5f97\u7684\u6280\u80fd\u3002\u7531\u4e8e\u5e76\u975e\u6240\u6709\u51e4\u5934\u9e66\u9e49\u90fd\u80fd\u6d41\u884c\uff0c\u7814\u7a76\u4eba\u5458\u8ba4\u4e3a\uff0c\u8fd9\u79cd\u521b\u65b0\u7684\u89c5\u98df\u884c\u4e3a\u53ef\u80fd\u662f\u793e\u4f1a\u5b66\u4e60\u7684\u4e00\u4e2a\u4f8b\u5b50\uff0c\u800c\u4e0d\u662f\u9057\u4f20\u503e\u5411\u3002\u4ed6\u4eec\u6240\u5b66\u7684\u6280\u80fd\u4e0d\u540c\u4e8e\u5176\u4ed6\u9e1f\u7c7b\u77e5\u8bc6\u5206\u5b50\uff0c\u4f8b\u5982\u65b0\u5580\u91cc\u591a\u5c3c\u4e9a\u4e4c\u9e26\uff0c\u65e0\u8bba\u5b83\u4eec\u662f\u5728\u91ce\u5916\u8fd8\u662f\u5728\u5708\u517b\u73af\u5883\u4e2d\u957f\u5927\uff0c\u5b83\u4eec\u5728\u8fdb\u5316\u4e0a\u90fd\u503e\u5411\u4e8e\u4fee\u8865\u5de5\u5177\u3002\n\u4e3a\u4e86\u5206\u6790\u9e66\u9e49\u6253\u5f00\u5783\u573e\u7bb1\u7684\u673a\u5236\uff0c\u7814\u7a76\u4eba\u5458\u5728\u4e09\u4e2a\u5730\u70b9\u62cd\u6444\u4e86 160 \u6b21\u8fd9\u79cd\u884c\u4e3a\u3002\u8be5\u56e2\u961f\u7528\u5411\u65e5\u8475\u79cd\u5b50\u8d3f\u8d42\u9e1f\u7c7b\uff0c\u7528\u4e34\u65f6\u6cb9\u6f06\u6d82\u62b9\u4e86\u8fd1 500 \u540d\u8def\u8fc7\u7684\u51e4\u5934\u9e66\u9e49\uff0c\u4ee5\u533a\u5206\u4e0d\u540c\u7684\u4e2a\u4f53\u3002 \uff08\u6355\u6349\u51e4\u5934\u9e66\u9e49\u8981\u590d\u6742\u5f97\u591a\u2014\u2014\u5c3d\u7ba1\u5b83\u4eec\u662f\u806a\u660e\u7684\u9e1f\u7c7b\uff0c\u4f46\u5b83\u4eec\u5f88\u5feb\u5c31\u4f1a\u5b66\u4f1a\u8bc6\u522b\u7ed1\u67b6\u8005\u5e76\u7528\u5973\u5996\u7684\u5c16\u53eb\u58f0\u53d1\u51fa\u8b66\u62a5\u3002\uff09\u5bf9\u51e4\u5934\u9e66\u9e49\u6765\u8bf4\uff0c\u6253\u5f00\u5783\u573e\u7bb1\u5e76\u4e0d\u662f\u4e00\u4ef6\u5bb9\u6613\u7684\u4e8b\uff0c\u9700\u8981\u7cbe\u5fc3\u8bbe\u8ba1\u7684\u63d0\u5347\u3001\u76d6\u5b50\u7684\u987a\u5e8f\u4fdd\u6301\u3001\u884c\u8d70\u548c\u7ffb\u8f6c\u6b65\u9aa4\u3002\u53ea\u6709 8% \u7684\u6709\u6807\u8bb0\u7684\u9e1f\u7c7b\u2014\u2014\u4e3b\u8981\u662f\u8f83\u91cd\u7684\u96c4\u6027\u2014\u2014\u53d1\u5c55\u51fa\u6253\u5f00\u76d6\u5b50\u7684\u6392\u9aa8\uff0c\u4f46\u7814\u7a76\u4eba\u5458\u5bf9\u6210\u529f\u548c\u4e0d\u6210\u529f\u4e2a\u4f53\u7684\u6574\u4f53\u6301\u4e45\u6027\u611f\u5230\u60ca\u8bb6\u3002 \u201c\u80fd\u505a\u5230\u8fd9\u4e00\u70b9\u7684\u4eba\u8ba9\u5b83\u770b\u8d77\u6765\u5982\u6b64\u7b80\u5355\uff0c\u201d\u7814\u7a76\u4f5c\u8005\u3001\u5fb7\u56fd\u9a6c\u514b\u65af\u666e\u6717\u514b\u52a8\u7269\u884c\u4e3a\u7814\u7a76\u6240\u7684\u884c\u4e3a\u751f\u6001\u5b66\u5bb6\u82ad\u82ad\u62c9\u00b7\u514b\u4f26\u666e\u8bf4\u3002 \u201c\u5982\u679c\u6211\u6ca1\u6709\u770b\u5230\u8fd9\u4e48\u591a\u9e1f\u5728\u6323\u624e\uff0c\u6211\u5c31\u4e0d\u4f1a\u610f\u8bc6\u5230\u8fd9\u5b9e\u9645\u4e0a\u662f\u4e00\u9879\u591a\u4e48\u8270\u5de8\u7684\u4efb\u52a1\u3002\u201d\u5728\u80dc\u5229\u7684\u51e4\u5934\u9e66\u9e49\u4e2d\uff0c\u6280\u672f\u56e0\u4eba\u800c\u5f02\uff0c\u751a\u81f3\u5728\u4e0d\u540c\u7684\u5730\u7406\u4f4d\u7f6e\u4e4b\u95f4\u66f4\u4e3a\u663e\u7740\u3002\u6bcf\u53ea\u9e1f\u90fd\u6709\u81ea\u5df1\u72ec\u7279\u7684\u5783\u573e\u76d7\u7a83\u65b9\u5f0f\u3002\u67d0\u4e9b\u51e4\u5934\u9e66\u9e49\u559c\u6b22\u6cbf\u7740\u5783\u573e\u7bb1\u7684\u8fb9\u7f18\u987a\u65f6\u9488\u884c\u8d70\u3002\u4e00\u4e9b\u5783\u573e\u88ad\u51fb\u8005\u4fa7\u8eab\u62d6\u7740\u811a\u6b65\uff0c\u800c\u53e6\u4e00\u4e9b\u4eba\u5219\u50cf\u8d70\u94a2\u4e1d\u4e00\u6837\u4e00\u5934\u624e\u8fdb\u3002\u8fd9\u4e00\u7ed3\u679c\u6697\u793a\u4e86\u51e4\u5934\u9e66\u9e49\u4e4b\u95f4\u5b58\u5728\u533a\u57df\u4e9a\u6587\u5316\u3002\u5176\u4ed6\u901a\u8fc7\u793e\u4ea4\u5b66\u4e60\u5e76\u8ba4\u540c\u81ea\u5df1\u6587\u5316\u7684\u52a8\u7269\u667a\u969c\u5305\u62ec\u7075\u957f\u7c7b\u52a8\u7269\u3001\u9cb8\u9c7c\u548c\u9e23\u79bd\u3002 \u201c\u4ece\u751f\u6001\u7684\u89d2\u5ea6\u6765\u770b\uff0c\u8fd9\u5bf9\u6211\u4eec\u6765\u8bf4\u975e\u5e38\u4ee4\u4eba\u5174\u594b\uff0c\u201dKlump \u8bf4\u3002 \u201c\u5728\u8fd9\u6837\u7684\u4eba\u7c7b\u73af\u5883\u4e2d\uff0c\u52a8\u7269\u6587\u5316\u5b9e\u9645\u4e0a\u53ef\u4ee5\u4fc3\u8fdb\u9002\u5e94\u3002\u201d\u5979\u8865\u5145\u8bf4\uff0c\u5bf9\u4e8e\u9e66\u9e49\u7684\u89c5\u98df\u4e60\u60ef\uff0c\u4eba\u7c7b\u53ea\u80fd\u611f\u8c22\u6216\u8d23\u5907\u81ea\u5df1\uff0c\u56e0\u4e3a\u4ed6\u4eec\u9996\u5148\u4e3a\u9e1f\u7c7b\u63d0\u4f9b\u4e86\u5e26\u76d6\u7684\u5783\u573e\u7bb1\u4f9b\u5b83\u4eec\u63a2\u7d22\u3002 \u201c\u8fd9\u53ea\u662f\u8868\u660e\u8fd9\u4e9b\u9e1f\u7c7b\u5bf9\u4eba\u7c7b\u73af\u5883\u7684\u9002\u5e94\u7a0b\u5ea6\u5982\u4f55\uff0c\u201d\u5979\u8bf4\u3002\u4f4f\u5728\u6089\u5c3c\u5e76\u559c\u6b22\u51e4\u5934\u9e66\u9e49\u7684\u9a6c\u4e01\u8bf4\uff0c\u6709\u51e0\u53ea\u9e1f\u7fa4\u8e72\u5728\u4ed6\u9547\u7684\u89d2\u843d\u91cc\uff0c\u6bcf\u4e2a\u8239\u5458\u5927\u7ea6\u6709 50 \u540d\u6210\u5458\u3002\u4ed6\u8fd8\u6ca1\u6709\u89c2\u5bdf\u5230\u4ed6\u6240\u5728\u5730\u533a\u7684\u5783\u573e\u6876\u6253\u5f00\u884c\u4e3a\uff0c\u4f46\u4ed6\u9884\u8ba1\u8fd9\u79cd\u884c\u4e3a\u6700\u7ec8\u4f1a\u6d41\u884c\u8d77\u6765\u3002\u5f53\u7136\uff0c\u53ea\u6709\u65f6\u95f4\u4f1a\u8bc1\u660e\u4e00\u5207\uff0c\u4f46\u6982\u7387\u80af\u5b9a\u4e0d\u662f\u4e0d\u53ef\u80fd\u7684\u3002 \u201c\u6709\u5f88\u591a\u9e1f\uff0c\u201d\u4ed6\u8bf4\uff0c\u201c\u6bcf\u4e2a\u623f\u5b50\u90fd\u6709\u5783\u573e\u7bb1\u3002\u201d", "note_en": "Sulfur-crested cockatoos don\u2019t have the best reputation around their human neighbors in Stanwell Park, an affluent suburb an hour\u2019s drive south of Sydney, Australia. The wild animals have flourished in an urban environment, and with their success in the cityscape, they\u2019ve developed some rowdy new habits\u2014like flipping open trash bin lids to access the goodies within. In 2014, this behavior earned the cockatoos  a bit of bad press in the local community magazine. Ornithologist Richard Major first learned about the string of bird-brained bin raids in his neighborhood when he was interviewed for the article. At the time, he hadn\u2019t witnessed the crime firsthand yet, but he and his fellow researchers decided to investigate the behavior in 2018.\n    Now, in a new study published today in the journal   Science, the team reports these clever cockatoos can learn this garbage foraging behavior within their social groups, with more birds picking up the skill each year.\n  \u201cCockatoos are the punks of the bird world\u201d in both looks and character, says study author John Martin, an ecologist at Taronga Conservation Society, Australia. For starters, the yellow crests they sport resemble mohawks. Their exuberant displays of hopping, wing flapping and head bobbing are easy to mistake for a devil-may-care attitude. Their shrieking  calls would enhance any punk rock song. (Martin says flocks of cockatoos \u201cliterally scream\u201d every sunrise and sunset.) Their foraging habits are inventive, if not a bit annoying. Curious and destructive, they leave a trail of devastation in their food raids\u2014from beheading flowers for nectar to decimating hordes of fruit just to reach a few seeds.\n  When Martin, one of Major\u2019s former Ph.D. students, and his colleagues learned about the trash-jacking behavior, they wondered how prevalent it was among other cockatoos and how the brainy birds pick up the action. Three years, 160 direct observations and one large-scale citizen science survey later, the researchers confirmed that the clever cockatoos can learn how to open garbage bins by observing other pioneering parrots. This research is the first of its kind to witness how a stroke of innovation in a few cockatoos propagates a new foraging culture among peers.\n  \u201cIt\u2019s really exciting that [the researchers] were able to catch [bin opening] in real time,\u201d says Alice Auersperg, a cognitive biologist at the University of Veterinary Medicine, Vienna in Austria, who wasn\u2019t involved in the study. She\u2019s particularly impressed with how the researchers tapped into the power of citizen science to document a new behavioral quirk in the wild at large scales. \u201cThey had a great approach,\u201d she says.\n    The researchers documented observations of bin-busting behavior by surveying 1,322 people across 478 suburbs in Sydney and Wollongong for one and a half years. Only three districts had ever observed cockatoos opening bins before 2018, but by 2019, 44 areas reported the behavior. Bin opening spread more quickly to nearby districts than to faraway neighborhoods or communities surrounded by forests, which could have walled off trendsetters from sharing their newly acquired skills.\n  Since not all cockatoos catch on, the researchers suggest the innovative foraging behavior could be an example of social learning rather than a genetic predisposition. Their learned skill is unlike other avian intelligentsia such as New Caledonian crows, which are  evolutionarily wired to tinker with tools whether they were raised in the wild or in captivity.\n  To analyze the mechanics of bin opening \u00e0 la cockatoo, the researchers filmed 160 instances of the behavior in three locations. Bribing the birds with sunflower seeds, the team dabbed nearly 500 cockatoo passers-by with temporary paint to tell different individuals apart. (Capturing cockatoos is much trickier\u2014smart birds as they are, they quickly learn to recognize human kidnappers and sound the alarm with their banshee shrieks.)\n  Busting the bin open is no easy task for a cockatoo, requiring an elaborate sequence of lifting, lid holding, walking and flipping steps. Only eight percent of marked birds\u2014mostly the heavier males\u2014developed the chops to flip open the lids, but the researchers were surprised by the overall persistence in both successful and unsuccessful individuals.\n  \u201cThe ones that can do it make it look so easy,\u201d says study author Barbara Klump, a behavioral ecologist at the Max Planck Institute of Animal Behavior in Germany. \u201cIf I hadn\u2019t seen so many birds struggling, I wouldn&#39;t appreciate what a difficult task this actually is.\u201d\n  Among triumphant cockatoos, techniques varied between individuals and even more saliently across geographic locations. Each bird had its own unique way of going about its garbage burglary. Certain cockatoos favored walking clockwise along the bin\u2019s rim. Some rubbish raiders shuffled sideways, whereas others marched headlong as if walking along a tightrope. This result alludes to the existence of regional subcultures among cockatoos. Other animal brainiacs that learn socially and subscribe to cultures of their own include  primates,  whales and  songbirds.\n    \u201cThat\u2019s very exciting for us from an ecological point of view,\u201d Klump says. \u201cIn such a human environment, animal cultures can actually facilitate adaptation.\u201d\n  She adds humans have only themselves to thank\u2014or blame\u2014for the cockatoo\u2019s foraging habits, as they\u2019ve provided lidded bins for the birds to explore in the first place. \u201cIt just shows how well-adapted these birds are to the human environment,\u201d she says.\n  Martin, who lives in Sydney and adores cockatoos, says several flocks squat in his corner of town, each crew around 50 members strong. He has yet to observe bin opening behavior in his district, but he anticipates it could catch on eventually. Only time will tell, of course, but the probability is certainly not out of the question. \u201cThere are lots of birds,\u201d he says, \u201cand every house has bin.\u201d", "posttime": "2021-07-24 07:18:02", "source_domain": "news.ycombinator.com", "source_name": "Hacker News", "tags": "\u5783\u573e\u7bb1,trash,\u9e66\u9e49", "title": "\u6fb3\u5927\u5229\u4e9a\u7684\u5783\u573e\u7bb1\u88ad\u51fb\u51e4\u5934\u9e66\u9e49", "title_en": "Australia\u2019s trash bin-raiding cockatoos", "transed": 1, "url": "https://www.smithsonianmag.com/science-nature/cockatoos-learn-open-garbage-bins-observing-their-peers-180978248/", "via": "", "real_tags": ["\u5783\u573e\u7bb1", "trash", "\u9e66\u9e49"]}, {"category": "", "categoryclass": "", "imagename": "6c3b19fc8f11f0de42fd4d1f9a6ddee7.png", "infoid": 1069343, "ip": "", "isanchordig": 1, "ischecked": 1, "isdelete": 0, "isneo": 1, "mark": "", "name": "", "note": "\u767b\u5165", "note_en": "Sign in", "posttime": "2021-07-24 07:17:51", "source_domain": "news.ycombinator.com", "source_name": "Hacker News", "tags": "\u6280\u672f,survive,\u767b\u5165", "title": "\u6211\u4eec\u80fd\u5728\u6280\u672f\u4e2d\u751f\u5b58\u5417\uff1f (1955) [pdf]", "title_en": "Can we survive technology? (1955) [pdf]", "transed": 1, "url": "https://drive.google.com/file/d/10_IKsz0GdgyLlO9-MAtpTPQ7vnfpN8Ng/view?usp=drivesdk", "via": "", "real_tags": ["\u6280\u672f", "survive", "\u767b\u5165"]}, {"category": "", "categoryclass": "", "imagename": "", "infoid": 1069342, "ip": "", "isanchordig": 1, "ischecked": 1, "isdelete": 0, "isneo": 1, "mark": "", "name": "", "note": "\u4e0b\u8f7d PDF \u6458\u8981\uff1a\u7a7a\u95f4\u5b89\u5168\u8fdd\u89c4\u662f\u8bb8\u591a\u5b89\u5168\u653b\u51fb\u548c\u5e94\u7528\u7a0b\u5e8f\u610f\u5916\u884c\u4e3a\u7684\u6839\u6e90\u3002\u73b0\u6709\u7684\u5f3a\u5236\u6267\u884c\u7a7a\u95f4\u5b89\u5168\u7684\u6280\u672f\u5728\u5bf9\u8c61\u6216\u6307\u9488\u7c92\u5ea6\u4e0a\u5e7f\u6cdb\u5de5\u4f5c\u3002\u57fa\u4e8e\u5bf9\u8c61\u7684\u65b9\u6cd5\u5f80\u5f80\u4f1a\u5bfc\u81f4\u9ad8 CPU \u5f00\u9500\uff0c\u800c\u57fa\u4e8e\u6307\u9488\u7684\u65b9\u6cd5\u4f1a\u5bfc\u81f4\u9ad8 CPU \u548c\u5185\u5b58\u5f00\u9500\u3002 SGXBounds \u662f\u4e00\u79cd\u57fa\u4e8e\u5bf9\u8c61\u7684\u65b9\u6cd5\uff0c\u662f\u8fc4\u4eca\u4e3a\u6b62\u4e3a\u5bf9\u8c61\u63d0\u4f9b\u5b8c\u6574\u8d8a\u754c\u4fdd\u62a4\u7684\u6700\u6709\u6548\u6280\u672f\u3002\u4f46\u662f\uff0c\u8fd9\u79cd\u65b9\u6cd5\u7684\u4e00\u4e2a\u4e3b\u8981\u7f3a\u70b9\u662f\u5b83\u5c06\u5e94\u7528\u7a0b\u5e8f\u5730\u5740\u7a7a\u95f4\u9650\u5236\u4e3a 4GB\u3002\u5728\u672c\u6587\u4e2d\uff0c\u6211\u4eec\u4ecb\u7ecd\u4e86 CGuard\uff0c\u8fd9\u662f\u4e00\u79cd\u4e3a C \u5e94\u7528\u7a0b\u5e8f\u63d0\u4f9b\u5bf9\u8c61\u8fb9\u754c\u4fdd\u62a4\u7684\u5de5\u5177\uff0c\u5176\u5f00\u9500\u4e0e SGXBounds \u76f8\u5f53\uff0c\u800c\u4e0d\u4f1a\u9650\u5236\u5e94\u7528\u7a0b\u5e8f\u5730\u5740\u7a7a\u95f4\u3002 CGuard \u5728\u5bf9\u8c61\u7684\u57fa\u5730\u5740\u4e4b\u524d\u5b58\u50a8\u8fb9\u754c\u4fe1\u606f\uff0c\u5e76\u5728 x86_64 \u67b6\u6784\u4e2d\u53ef\u7528\u7684\u865a\u62df\u5730\u5740\u7684\u5907\u7528\u4f4d\u4e2d\u7f16\u7801\u57fa\u5730\u5740\u7684\u76f8\u5bf9\u504f\u79fb\u91cf\u3002\u5bf9\u4e8e\u65e0\u6cd5\u653e\u5165\u5907\u7528\u4f4d\u7684\u5bf9\u8c61\uff0cCGuard \u4f7f\u7528\u81ea\u5b9a\u4e49\u5185\u5b58\u5e03\u5c40\uff0c\u4f7f\u5176\u80fd\u591f\u5728\u4e00\u6b21\u5185\u5b58\u8bbf\u95ee\u4e2d\u627e\u5230\u5bf9\u8c61\u7684\u57fa\u5730\u5740\u3002\u6211\u4eec\u7684\u7814\u7a76\u63ed\u793a\u4e86\u6765\u81ea SPEC CPU2017 \u57fa\u51c6\u6d4b\u8bd5\u5957\u4ef6\u7684 gccand x264 \u57fa\u51c6\u6d4b\u8bd5\u548c\u6765\u81ea Phoenix \u57fa\u51c6\u6d4b\u8bd5\u5957\u4ef6\u7684 string_matchbenchmark \u7684\u7a7a\u95f4\u5b89\u5168\u8fdd\u89c4\u3002 SPEC CPU2017 \u548c Phoenix \u57fa\u51c6\u5957\u4ef6\u7684\u6267\u884c\u65f6\u95f4\u5f00\u9500\u5206\u522b\u4e3a 44% \u548c 25%\uff0c\u800c\u5f53 CPU \u5b8c\u5168\u9971\u548c\u65f6\uff0cApache Web \u670d\u52a1\u5668\u7684\u541e\u5410\u91cf\u964d\u4f4e\u4e86 30%\u3002\u8fd9\u4e9b\u7ed3\u679c\u8868\u660e CGuard \u5728\u4fdd\u6301\u5408\u7406\u6548\u7387\u7684\u540c\u65f6\u53ef\u4ee5\u975e\u5e38\u6709\u6548\u3002", "note_en": "Download PDF  Abstract: Spatial safety violations are the root cause of many security attacks andunexpected behavior of applications. Existing techniques to enforce spatialsafety work broadly at either object or pointer granularity. Object-basedapproaches tend to incur high CPU overheads, whereas pointer-based approachesincur both high CPU and memory overheads. SGXBounds, an object-based approach,is so far the most efficient technique that provides complete out-of-boundsprotection for objects. However, a major drawback of this approach is that itrestricts the application address space to 4GB. In this paper, we present CGuard, a tool that provides object-boundsprotection for C applications with comparable overheads to SGXBounds withoutrestricting the application address space. CGuard stores the bounds informationjust before the base address of an object and encodes the relative offset ofthe base address in the spare bits of the virtual address available in x86_64architecture. For an object that can&#39;t fit in the spare bits, CGuard uses acustom memory layout that enables it to find the base address of the object injust one memory access. Our study revealed spatial safety violations in the gccand x264 benchmarks from the SPEC CPU2017 benchmark suite and the string_matchbenchmark from the Phoenix benchmark suite. The execution time overheads forthe SPEC CPU2017 and Phoenix benchmark suites were 44% and 25% respectively,whereas the reduction in the throughput for the Apache webserver when the CPUswere fully saturated was 30%. These results indicate that CGuard can be highlyeffective while maintaining a reasonable degree of efficiency.", "posttime": "2021-07-24 07:17:45", "source_domain": "news.ycombinator.com", "source_name": "Hacker News", "tags": "\u7a7a\u95f4,efficient,\u5bf9\u8c61", "title": "CGuard\uff1aC \u7684\u9ad8\u6548\u7a7a\u95f4\u5b89\u5168", "title_en": "CGuard: Efficient Spatial Safety for C", "transed": 1, "url": "https://arxiv.org/abs/2107.10533", "via": "", "real_tags": ["\u7a7a\u95f4", "efficient", "\u5bf9\u8c61"]}, {"category": "", "categoryclass": "", "imagename": "ac649f8216b5e977df1d758b8154f87c.jpg", "infoid": 1069341, "ip": "", "isanchordig": 1, "ischecked": 1, "isdelete": 0, "isneo": 1, "mark": "", "name": "", "note": "MySQL \u662f\u4e00\u79cd\u7531 Oracle \u5f00\u53d1\u7684\u5f00\u6e90\u6570\u636e\u5e93\uff0c\u4e3a Facebook \u7684\u4e00\u4e9b\u6700\u91cd\u8981\u7684\u5de5\u4f5c\u8d1f\u8f7d\u63d0\u4f9b\u652f\u6301\u3002\u6211\u4eec\u79ef\u6781\u5f00\u53d1 MySQL \u4e2d\u7684\u65b0\u529f\u80fd\uff0c\u4ee5\u652f\u6301\u6211\u4eec\u4e0d\u65ad\u53d1\u5c55\u7684\u9700\u6c42\u3002\u8fd9\u4e9b\u7279\u6027\u6539\u53d8\u4e86 MySQL \u7684\u8bb8\u591a\u4e0d\u540c\u9886\u57df\uff0c\u5305\u62ec\u5ba2\u6237\u7aef\u8fde\u63a5\u5668\u3001\u5b58\u50a8\u5f15\u64ce\u3001\u4f18\u5316\u5668\u548c\u590d\u5236\u3002 MySQL \u7684\u6bcf\u4e2a\u65b0\u4e3b\u8981\u7248\u672c\u90fd\u9700\u8981\u82b1\u8d39\u5927\u91cf\u7684\u65f6\u95f4\u548c\u7cbe\u529b\u6765\u8fc1\u79fb\u6211\u4eec\u7684\u5de5\u4f5c\u8d1f\u8f7d\u3002\u6311\u6218\u5305\u62ec\uff1a \u6211\u4eec\u4e0a\u6b21\u5347\u7ea7\u5230 MySQL 5.6 \u7684\u4e3b\u8981\u7248\u672c\u82b1\u4e86\u4e00\u5e74\u591a\u7684\u65f6\u95f4\u624d\u63a8\u51fa\u3002\u5f53 5.7 \u7248\u53d1\u5e03\u65f6\uff0c\u6211\u4eec\u4ecd\u5728\u5f00\u53d1 5.6 \u7248\u4e0a\u7684 LSM-Tree \u5b58\u50a8\u5f15\u64ce MyRocks\u3002\u7531\u4e8e\u5728\u6784\u5efa\u65b0\u5b58\u50a8\u5f15\u64ce\u7684\u540c\u65f6\u5347\u7ea7\u5230 5.7 \u4f1a\u663e\u7740\u51cf\u7f13 MyRocks \u7684\u8fdb\u5ea6\uff0c\u56e0\u6b64\u6211\u4eec\u9009\u62e9\u7ee7\u7eed\u4f7f\u7528 5.6\uff0c\u76f4\u5230 MyRocks \u5b8c\u6210\u3002 MySQL 8.0 \u662f\u5728\u6211\u4eec\u5b8c\u6210\u5c06 MyRocks \u90e8\u7f72\u5230\u6211\u4eec\u7684\u7528\u6237\u6570\u636e\u5e93 (UDB) \u670d\u52a1\u5c42\u65f6\u5ba3\u5e03\u7684\u3002\u8be5\u7248\u672c\u5305\u62ec\u5f15\u4eba\u6ce8\u76ee\u7684\u529f\u80fd\uff0c\u5982\u57fa\u4e8e\u5199\u96c6\u7684\u5e76\u884c\u590d\u5236\u548c\u63d0\u4f9b\u539f\u5b50 DDL \u652f\u6301\u7684\u4e8b\u52a1\u6570\u636e\u5b57\u5178\u3002\u5bf9\u6211\u4eec\u6765\u8bf4\uff0c\u8fc1\u79fb\u5230 8.0 \u8fd8\u4f1a\u5e26\u6765\u6211\u4eec\u9519\u8fc7\u7684 5.7 \u529f\u80fd\uff0c\u5305\u62ec\u6587\u6863\u5b58\u50a8\u3002 5.6 \u7248\u5373\u5c06\u7ed3\u675f\uff0c\u6211\u4eec\u5e0c\u671b\u5728 MySQL \u793e\u533a\u4e2d\u4fdd\u6301\u6d3b\u8dc3\uff0c\u5c24\u5176\u662f\u6211\u4eec\u5728 MyRocks \u5b58\u50a8\u5f15\u64ce\u4e0a\u7684\u5de5\u4f5c\u3002 8.0 \u4e2d\u7684\u589e\u5f3a\u529f\u80fd\uff0c\u5982\u5373\u65f6 DDL\uff0c\u53ef\u4ee5\u52a0\u901f MyRocks \u67b6\u6784\u66f4\u6539\uff0c\u4f46\u6211\u4eec\u9700\u8981\u5728 8.0 \u4ee3\u7801\u5e93\u4e0a\u4f7f\u7528\u5b83\u3002\u8003\u8651\u5230\u4ee3\u7801\u66f4\u65b0\u7684\u597d\u5904\uff0c\u6211\u4eec\u51b3\u5b9a\u8fc1\u79fb\u5230 8.0\u3002\u6211\u4eec\u6b63\u5728\u5206\u4eab\u6211\u4eec\u5982\u4f55\u5904\u7406 8.0 \u8fc1\u79fb\u9879\u76ee - \u4ee5\u53ca\u6211\u4eec\u5728\u6b64\u8fc7\u7a0b\u4e2d\u53d1\u73b0\u7684\u4e00\u4e9b\u60ca\u559c\u3002\u5f53\u6211\u4eec\u6700\u521d\u786e\u5b9a\u9879\u76ee\u7684\u8303\u56f4\u65f6\uff0c\u5f88\u660e\u663e\u8fc1\u79fb\u5230 8.0 \u6bd4\u8fc1\u79fb\u5230 5.6 \u6216 MyRocks \u66f4\u52a0\u56f0\u96be\u3002\u5f53\u65f6\uff0c\u6211\u4eec\u5b9a\u5236\u7684 5.6 \u5206\u652f\u6709\u8d85\u8fc7 1,700 \u4e2a\u4ee3\u7801\u8865\u4e01\u53ef\u4ee5\u79fb\u690d\u5230 8.0\u3002\u5728\u6211\u4eec\u79fb\u690d\u8fd9\u4e9b\u66f4\u6539\u65f6\uff0c\u65b0\u7684 Facebook MySQL \u529f\u80fd\u548c\u4fee\u590d\u88ab\u6dfb\u52a0\u5230 5.6 \u4ee3\u7801\u5e93\u4e2d\uff0c\u4ece\u800c\u5c06\u76ee\u6807\u79fb\u5f97\u66f4\u8fdc\u3002\u6211\u4eec\u6709\u8bb8\u591a MySQL \u670d\u52a1\u5668\u5728\u751f\u4ea7\u4e2d\u8fd0\u884c\uff0c\u4e3a\u5927\u91cf\u4e0d\u540c\u7684\u5e94\u7528\u7a0b\u5e8f\u63d0\u4f9b\u670d\u52a1\u3002\u6211\u4eec\u8fd8\u62e5\u6709\u7528\u4e8e\u7ba1\u7406 MySQL \u5b9e\u4f8b\u7684\u5e7f\u6cdb\u8f6f\u4ef6\u57fa\u7840\u8bbe\u65bd\u3002\u8fd9\u4e9b\u5e94\u7528\u7a0b\u5e8f\u6267\u884c\u8bf8\u5982\u6536\u96c6\u7edf\u8ba1\u6570\u636e\u548c\u7ba1\u7406\u670d\u52a1\u5668\u5907\u4efd\u4e4b\u7c7b\u7684\u64cd\u4f5c\u3002\u4ece 5.6 \u5347\u7ea7\u5230 8.0 \u5b8c\u5168\u8df3\u8fc7\u4e86 5.7\u3002\u5728 5.6 \u4e2d\u5904\u4e8e\u6d3b\u52a8\u72b6\u6001\u7684 API \u5c06\u5728 5.7 \u4e2d\u88ab\u5f03\u7528\uff0c\u5e76\u53ef\u80fd\u5728 8.0 \u4e2d\u88ab\u5220\u9664\uff0c\u8fd9\u8981\u6c42\u6211\u4eec\u4f7f\u7528\u73b0\u5df2\u5220\u9664\u7684 API \u66f4\u65b0\u4efb\u4f55\u5e94\u7528\u7a0b\u5e8f\u3002\u8bb8\u591a Facebook \u529f\u80fd\u4e0e 8.0 \u4e2d\u7684\u7c7b\u4f3c\u529f\u80fd\u4e0d\u5411\u524d\u517c\u5bb9\uff0c\u9700\u8981\u5f03\u7528\u548c\u5411\u524d\u8fc1\u79fb\u3002\n\u6211\u4eec\u9996\u5148\u8bbe\u7f6e\u4e86 8.0 \u5206\u652f\uff0c\u7528\u4e8e\u5728\u6211\u4eec\u7684\u5f00\u53d1\u73af\u5883\u4e2d\u8fdb\u884c\u6784\u5efa\u548c\u6d4b\u8bd5\u3002\u7136\u540e\uff0c\u6211\u4eec\u5f00\u59cb\u4e86\u4ece 5.6 \u5206\u652f\u79fb\u690d\u8865\u4e01\u7684\u6f2b\u957f\u65c5\u7a0b\u3002\u6211\u4eec\u5f00\u59cb\u65f6\u6709 1,700 \u591a\u4e2a\u8865\u4e01\uff0c\u4f46\u6211\u4eec\u80fd\u591f\u5c06\u5b83\u4eec\u5206\u4e3a\u51e0\u4e2a\u4e3b\u8981\u7c7b\u522b\u3002\u6211\u4eec\u7684\u5927\u591a\u6570\u81ea\u5b9a\u4e49\u4ee3\u7801\u90fd\u6709\u5f88\u597d\u7684\u6ce8\u91ca\u548c\u63cf\u8ff0\uff0c\u56e0\u6b64\u6211\u4eec\u53ef\u4ee5\u8f7b\u677e\u786e\u5b9a\u5e94\u7528\u7a0b\u5e8f\u662f\u5426\u4ecd\u7136\u9700\u8981\u5b83\uff0c\u6216\u8005\u662f\u5426\u53ef\u4ee5\u5220\u9664\u5b83\u3002\u7531\u7279\u6b8a\u5173\u952e\u5b57\u6216\u552f\u4e00\u53d8\u91cf\u540d\u79f0\u542f\u7528\u7684\u529f\u80fd\u4e5f\u4f7f\u786e\u5b9a\u76f8\u5173\u6027\u53d8\u5f97\u5bb9\u6613\uff0c\u56e0\u4e3a\u6211\u4eec\u53ef\u4ee5\u641c\u7d22\u6211\u4eec\u7684\u5e94\u7528\u7a0b\u5e8f\u4ee3\u7801\u5e93\u4ee5\u627e\u5230\u5b83\u4eec\u7684\u7528\u4f8b\u3002\u4e00\u4e9b\u8865\u4e01\u975e\u5e38\u6a21\u7cca\uff0c\u9700\u8981\u4fa6\u63a2\u5de5\u4f5c\u2014\u2014\u6316\u6398\u65e7\u7684\u8bbe\u8ba1\u6587\u6863\u3001\u5e16\u5b50\u548c/\u6216\u4ee3\u7801\u5ba1\u67e5\u8bc4\u8bba\u2014\u2014\u4ee5\u4e86\u89e3\u5b83\u4eec\u7684\u5386\u53f2\u3002\u5220\u9664\uff1a\u4e0d\u518d\u4f7f\u7528\u7684\u529f\u80fd\u6216\u5728 8.0 \u4e2d\u5177\u6709\u7b49\u6548\u529f\u80fd\u7684\u529f\u80fd\u4e0d\u9700\u8981\u79fb\u690d\u3002\u6784\u5efa/\u5ba2\u6237\u7aef\uff1a\u79fb\u690d\u4e86\u652f\u6301\u6211\u4eec\u7684\u6784\u5efa\u73af\u5883\u548c\u4fee\u6539\u8fc7\u7684 MySQL \u5de5\u5177\uff08\u5982 mysqlbinlog\uff09\u6216\u6dfb\u52a0\u7684\u529f\u80fd\uff08\u5982\u5f02\u6b65\u5ba2\u6237\u7aef API\uff09\u7684\u975e\u670d\u52a1\u5668\u529f\u80fd\u3002\u975e MyRocks \u670d\u52a1\u5668\uff1a\u79fb\u690d\u4e86 mysqld \u670d\u52a1\u5668\u4e2d\u4e0e\u6211\u4eec\u7684 MyRocks \u5b58\u50a8\u5f15\u64ce\u65e0\u5173\u7684\u529f\u80fd\u3002\u6211\u4eec\u4f7f\u7528\u7535\u5b50\u8868\u683c\u8ddf\u8e2a\u6bcf\u4e2a\u8865\u4e01\u7684\u72b6\u6001\u548c\u76f8\u5173\u5386\u53f2\u4fe1\u606f\uff0c\u5e76\u5728\u5220\u9664\u8865\u4e01\u65f6\u8bb0\u5f55\u6211\u4eec\u7684\u63a8\u7406\u3002\u66f4\u65b0\u76f8\u540c\u529f\u80fd\u7684\u591a\u4e2a\u8865\u4e01\u88ab\u7ec4\u5408\u5728\u4e00\u8d77\u8fdb\u884c\u79fb\u690d\u3002\u79fb\u690d\u5e76\u63d0\u4ea4\u5230 8.0 \u5206\u652f\u7684\u8865\u4e01\u4f7f\u7528 5.6 \u63d0\u4ea4\u4fe1\u606f\u8fdb\u884c\u4e86\u6ce8\u91ca\u3002\u7531\u4e8e\u6211\u4eec\u9700\u8981\u7b5b\u9009\u5927\u91cf\u8865\u4e01\uff0c\u8fd9\u4e9b\u6ce8\u91ca\u5e2e\u52a9\u6211\u4eec\u89e3\u51b3\u4e86\u8fd9\u4e9b\u95ee\u9898\uff0c\u56e0\u6b64\u4e0d\u53ef\u907f\u514d\u5730\u4f1a\u51fa\u73b0\u79fb\u690d\u72b6\u6001\u7684\u5dee\u5f02\u3002\u6bcf\u4e2a\u5ba2\u6237\u7aef\u548c\u670d\u52a1\u5668\u7c7b\u522b\u81ea\u7136\u800c\u7136\u5730\u6210\u4e3a\u8f6f\u4ef6\u53d1\u5e03\u7684\u91cc\u7a0b\u7891\u3002\u79fb\u690d\u6240\u6709\u4e0e\u5ba2\u6237\u7aef\u76f8\u5173\u7684\u66f4\u6539\u540e\uff0c\u6211\u4eec\u80fd\u591f\u5c06\u5ba2\u6237\u7aef\u5de5\u5177\u548c\u8fde\u63a5\u5668\u4ee3\u7801\u66f4\u65b0\u5230 8.0\u3002\u4e00\u65e6\u79fb\u690d\u4e86\u6240\u6709\u975e MyRocks \u670d\u52a1\u5668\u529f\u80fd\uff0c\u6211\u4eec\u5c31\u80fd\u591f\u4e3a InnoDB \u670d\u52a1\u5668\u90e8\u7f72 8.0 mysqld\u3002\u5b8c\u6210 MyRocks \u670d\u52a1\u5668\u529f\u80fd\u4f7f\u6211\u4eec\u80fd\u591f\u66f4\u65b0 MyRocks \u5b89\u88c5\u3002\u4e00\u4e9b\u6700\u590d\u6742\u7684\u529f\u80fd\u9700\u8981\u5bf9 8.0 \u8fdb\u884c\u91cd\u5927\u66f4\u6539\uff0c\u5e76\u4e14\u4e00\u4e9b\u9886\u57df\u5b58\u5728\u91cd\u5927\u517c\u5bb9\u6027\u95ee\u9898\u3002\u4f8b\u5982\uff0c\u4e0a\u6e38 8.0 binlog \u4e8b\u4ef6\u683c\u5f0f\u4e0e\u6211\u4eec\u7684\u4e00\u4e9b\u81ea\u5b9a\u4e49 5.6 \u4fee\u6539\u4e0d\u517c\u5bb9\u3002 Facebook 5.6 \u529f\u80fd\u4f7f\u7528\u7684\u9519\u8bef\u4ee3\u7801\u4e0e\u4e0a\u6e38 8.0 \u5206\u914d\u7ed9\u65b0\u529f\u80fd\u7684\u9519\u8bef\u4ee3\u7801\u76f8\u51b2\u7a81\u3002\u6211\u4eec\u6700\u7ec8\u9700\u8981\u4fee\u8865\u6211\u4eec\u7684 5.6 \u670d\u52a1\u5668\u4ee5\u4e0e 8.0 \u5411\u524d\u517c\u5bb9\u3002\n\u5b8c\u6210\u6240\u6709\u8fd9\u4e9b\u529f\u80fd\u7684\u79fb\u690d\u82b1\u4e86\u51e0\u5e74\u65f6\u95f4\u3002\u5230\u6700\u540e\uff0c\u6211\u4eec\u5df2\u7ecf\u8bc4\u4f30\u4e86 2,300 \u591a\u4e2a\u8865\u4e01\u5e76\u5c06\u5176\u4e2d\u7684 1,500 \u4e2a\u79fb\u690d\u5230 8.0\u3002\u6211\u4eec\u5c06\u591a\u4e2a mysqld \u5b9e\u4f8b\u7ec4\u5408\u6210\u4e00\u4e2a MySQL \u526f\u672c\u96c6\u3002\u526f\u672c\u96c6\u4e2d\u7684\u6bcf\u4e2a\u5b9e\u4f8b\u90fd\u5305\u542b\u76f8\u540c\u7684\u6570\u636e\uff0c\u4f46\u5728\u5730\u7406\u4e0a\u5206\u5e03\u5230\u4e0d\u540c\u7684\u6570\u636e\u4e2d\u5fc3\uff0c\u4ee5\u63d0\u4f9b\u6570\u636e\u53ef\u7528\u6027\u548c\u6545\u969c\u8f6c\u79fb\u652f\u6301\u3002\u6bcf\u4e2a\u526f\u672c\u96c6\u6709\u4e00\u4e2a\u4e3b\u5b9e\u4f8b\u3002\u5176\u4f59\u5b9e\u4f8b\u90fd\u662f\u8f85\u52a9\u5b9e\u4f8b\u3002\u4e3b\u8282\u70b9\u5904\u7406\u6240\u6709\u5199\u5165\u6d41\u91cf\u5e76\u5c06\u6570\u636e\u5f02\u6b65\u590d\u5236\u5230\u6240\u6709\u8f85\u52a9\u8282\u70b9\u3002\u6211\u4eec\u4ece\u5305\u542b 5.6 \u4e2a\u4e3b/5.6 \u4e2a\u8f85\u52a9\u7684\u526f\u672c\u96c6\u5f00\u59cb\uff0c\u6700\u7ec8\u76ee\u6807\u662f\u5305\u542b 8.0 \u4e2a\u4e3b/8.0 \u4e2a\u8f85\u52a9\u7684\u526f\u672c\u96c6\u3002\u6211\u4eec\u9075\u5faa\u4e86\u4e00\u4e2a\u7c7b\u4f3c\u4e8e UDB MyRocks \u8fc1\u79fb\u8ba1\u5212\u7684\u8ba1\u5212\u3002\u5bf9\u4e8e\u6bcf\u4e2a\u526f\u672c\u96c6\uff0c\u4f7f\u7528 mysqldump \u901a\u8fc7\u903b\u8f91\u526f\u672c\u521b\u5efa\u548c\u6dfb\u52a0 8.0 \u6b21\u8981\u526f\u672c\u3002\u8fd9\u4e9b\u8f85\u52a9\u8282\u70b9\u4e0d\u63d0\u4f9b\u4efb\u4f55\u5e94\u7528\u7a0b\u5e8f\u8bfb\u53d6\u6d41\u91cf\u3002\u6bcf\u4e2a\u526f\u672c\u96c6\u90fd\u53ef\u4ee5\u72ec\u7acb\u5730\u8fc7\u6e21\u4e0a\u8ff0\u6bcf\u4e2a\u6b65\u9aa4\uff0c\u5e76\u6839\u636e\u9700\u8981\u505c\u7559\u5728\u4e00\u4e2a\u6b65\u9aa4\u4e0a\u3002\u6211\u4eec\u5c06\u526f\u672c\u96c6\u5206\u6210\u66f4\u5c0f\u7684\u7ec4\uff0c\u5e76\u5728\u6bcf\u6b21\u8f6c\u6362\u4e2d\u8fdb\u884c\u5f15\u5bfc\u3002\u5982\u679c\u6211\u4eec\u53d1\u73b0\u95ee\u9898\uff0c\u6211\u4eec\u53ef\u4ee5\u56de\u6eda\u5230\u4e0a\u4e00\u6b65\u3002\u5728\u67d0\u4e9b\u60c5\u51b5\u4e0b\uff0c\u526f\u672c\u96c6\u80fd\u591f\u5728\u5176\u4ed6\u6b65\u9aa4\u5f00\u59cb\u4e4b\u524d\u5230\u8fbe\u6700\u540e\u4e00\u6b65\u3002\u4e3a\u4e86\u81ea\u52a8\u5316\u5927\u91cf\u526f\u672c\u96c6\u7684\u8f6c\u6362\uff0c\u6211\u4eec\u9700\u8981\u6784\u5efa\u65b0\u7684\u8f6f\u4ef6\u57fa\u7840\u8bbe\u65bd\u3002\u6211\u4eec\u53ef\u4ee5\u5c06\u526f\u672c\u96c6\u5206\u7ec4\u5728\u4e00\u8d77\uff0c\u5e76\u901a\u8fc7\u7b80\u5355\u5730\u66f4\u6539\u914d\u7f6e\u6587\u4ef6\u4e2d\u7684\u4e00\u884c\u6765\u5c06\u5b83\u4eec\u79fb\u52a8\u5230\u6bcf\u4e2a\u9636\u6bb5\u3002\u4efb\u4f55\u9047\u5230\u95ee\u9898\u7684\u526f\u672c\u96c6\u90fd\u53ef\u4ee5\u5355\u72ec\u56de\u6eda\u3002\u4f5c\u4e3a 8.0 \u8fc1\u79fb\u5de5\u4f5c\u7684\u4e00\u90e8\u5206\uff0c\u6211\u4eec\u51b3\u5b9a\u6807\u51c6\u5316\u4f7f\u7528\u57fa\u4e8e\u884c\u7684\u590d\u5236 (RBR)\u3002\u4e00\u4e9b 8.0 \u529f\u80fd\u9700\u8981 RBR\uff0c\u5b83\u7b80\u5316\u4e86\u6211\u4eec\u7684 MyRocks \u79fb\u690d\u5de5\u4f5c\u3002\u867d\u7136\u6211\u4eec\u7684\u5927\u591a\u6570 MySQL \u526f\u672c\u96c6\u5df2\u7ecf\u5728\u4f7f\u7528 RBR\uff0c\u4f46\u90a3\u4e9b\u4ecd\u5728\u8fd0\u884c\u57fa\u4e8e\u8bed\u53e5\u7684\u590d\u5236 (SBR) \u7684\u526f\u672c\u65e0\u6cd5\u8f7b\u677e\u8f6c\u6362\u3002\u8fd9\u4e9b\u526f\u672c\u96c6\u901a\u5e38\u6709\u6ca1\u6709\u4efb\u4f55\u9ad8\u57fa\u6570\u952e\u7684\u8868\u3002\u5b8c\u5168\u5207\u6362\u5230 RBR \u662f\u4e00\u4e2a\u76ee\u6807\uff0c\u4f46\u6dfb\u52a0\u4e3b\u952e\u6240\u9700\u7684\u957f\u5c3e\u5de5\u4f5c\u7684\u4f18\u5148\u7ea7\u901a\u5e38\u4f4e\u4e8e\u5176\u4ed6\u9879\u76ee\u3002\n\u56e0\u6b64\uff0c\u6211\u4eec\u5c06 RBR \u4f5c\u4e3a 8.0 \u7684\u8981\u6c42\u3002\u5728\u8bc4\u4f30\u5e76\u4e3a\u6bcf\u4e2a\u8868\u6dfb\u52a0\u4e3b\u952e\u540e\uff0c\u6211\u4eec\u5207\u6362\u4e86\u4eca\u5e74\u6700\u540e\u4e00\u4e2a SBR \u526f\u672c\u96c6\u3002\u4f7f\u7528 RBR \u8fd8\u4e3a\u6211\u4eec\u63d0\u4f9b\u4e86\u4e00\u79cd\u66ff\u4ee3\u89e3\u51b3\u65b9\u6848\uff0c\u7528\u4e8e\u89e3\u51b3\u6211\u4eec\u5728\u5c06\u4e00\u4e9b\u526f\u672c\u96c6\u79fb\u52a8\u5230 8.0 \u4e3b\u7248\u672c\u65f6\u9047\u5230\u7684\u5e94\u7528\u7a0b\u5e8f\u95ee\u9898\uff0c\u7a0d\u540e\u5c06\u5bf9\u6b64\u8fdb\u884c\u8ba8\u8bba\u3002\u5927\u591a\u6570 8.0 \u8fc1\u79fb\u8fc7\u7a0b\u6d89\u53ca\u4f7f\u7528\u6211\u4eec\u7684\u81ea\u52a8\u5316\u57fa\u7840\u8bbe\u65bd\u548c\u5e94\u7528\u7a0b\u5e8f\u67e5\u8be2\u6d4b\u8bd5\u548c\u9a8c\u8bc1 mysqld \u670d\u52a1\u5668\u3002\u968f\u7740\u6211\u4eec\u7684 MySQL \u673a\u7fa4\u7684\u589e\u957f\uff0c\u6211\u4eec\u7528\u6765\u7ba1\u7406\u670d\u52a1\u5668\u7684\u81ea\u52a8\u5316\u57fa\u7840\u8bbe\u65bd\u4e5f\u5728\u589e\u957f\u3002\u4e3a\u4e86\u786e\u4fdd\u6211\u4eec\u6240\u6709\u7684 MySQL \u81ea\u52a8\u5316\u90fd\u4e0e 8.0 \u7248\u672c\u517c\u5bb9\uff0c\u6211\u4eec\u6295\u8d44\u6784\u5efa\u4e86\u4e00\u4e2a\u6d4b\u8bd5\u73af\u5883\uff0c\u8be5\u73af\u5883\u5229\u7528\u6d4b\u8bd5\u526f\u672c\u96c6\u548c\u865a\u62df\u673a\u6765\u9a8c\u8bc1\u884c\u4e3a\u3002\u6211\u4eec\u7f16\u5199\u4e86\u96c6\u6210\u6d4b\u8bd5\uff0c\u5bf9\u6bcf\u4e2a\u81ea\u52a8\u5316\u90e8\u5206\u8fdb\u884c\u91d1\u4e1d\u96c0\u6d4b\u8bd5\uff0c\u4ee5\u4fbf\u5728 5.6 \u7248\u672c\u548c 8.0 \u7248\u672c\u4e0a\u8fd0\u884c\u5e76\u9a8c\u8bc1\u5b83\u4eec\u7684\u6b63\u786e\u6027\u3002\u5728\u8fdb\u884c\u6b64\u7ec3\u4e60\u65f6\uff0c\u6211\u4eec\u53d1\u73b0\u4e86\u51e0\u4e2a\u9519\u8bef\u548c\u884c\u4e3a\u5dee\u5f02\u3002\u7531\u4e8e\u6bcf\u4e2a MySQL \u57fa\u7840\u8bbe\u65bd\u90fd\u9488\u5bf9\u6211\u4eec\u7684 8.0 \u670d\u52a1\u5668\u8fdb\u884c\u4e86\u9a8c\u8bc1\uff0c\u6211\u4eec\u53d1\u73b0\u5e76\u4fee\u590d\u4e86\uff08\u6216\u89e3\u51b3\u4e86\uff09\u8bb8\u591a\u6709\u8da3\u7684\u95ee\u9898\uff1a\u4ece\u9519\u8bef\u65e5\u5fd7\u3001mysqldump \u8f93\u51fa\u6216\u670d\u52a1\u5668\u663e\u793a\u547d\u4ee4\u89e3\u6790\u6587\u672c\u8f93\u51fa\u7684\u8f6f\u4ef6\u5f88\u5bb9\u6613\u635f\u574f\u3002\u670d\u52a1\u5668\u8f93\u51fa\u7684\u7ec6\u5fae\u53d8\u5316\u901a\u5e38\u4f1a\u63ed\u793a\u5de5\u5177\u89e3\u6790\u903b\u8f91\u4e2d\u7684\u9519\u8bef\u3002 8.0 \u7684\u9ed8\u8ba4 utf8mb4 \u6392\u5e8f\u89c4\u5219\u8bbe\u7f6e\u5bfc\u81f4\u6211\u4eec\u7684 5.6 \u548c 8.0 \u5b9e\u4f8b\u4e4b\u95f4\u7684\u6392\u5e8f\u89c4\u5219\u4e0d\u5339\u914d\u3002 8.0 \u8868\u53ef\u80fd\u4f1a\u4f7f\u7528\u65b0\u7684 utf8mb4_0900 \u6392\u5e8f\u89c4\u5219\uff0c\u5373\u4f7f\u5bf9\u4e8e 5.6 \u7684 show create table \u751f\u6210\u7684 create \u8bed\u53e5\uff0c\u56e0\u4e3a\u4f7f\u7528 utf8mb4_general_ci \u7684 5.6 \u6a21\u5f0f\u6ca1\u6709\u660e\u786e\u6307\u5b9a\u6392\u5e8f\u89c4\u5219\u3002\u8fd9\u4e9b\u8868\u5dee\u5f02\u901a\u5e38\u4f1a\u5bfc\u81f4\u590d\u5236\u548c\u6a21\u5f0f\u9a8c\u8bc1\u5de5\u5177\u51fa\u73b0\u95ee\u9898\u3002\u67d0\u4e9b\u590d\u5236\u5931\u8d25\u7684\u9519\u8bef\u4ee3\u7801\u53d1\u751f\u4e86\u53d8\u5316\uff0c\u6211\u4eec\u5fc5\u987b\u4fee\u590d\u6211\u4eec\u7684\u81ea\u52a8\u5316\u4ee5\u6b63\u786e\u5904\u7406\u5b83\u4eec\u3002\n8.0 \u7248\u672c\u7684\u6570\u636e\u5b57\u5178\u5e9f\u5f03\u4e86\u8868 .frm \u6587\u4ef6\uff0c\u4f46\u6211\u4eec\u7684\u4e00\u4e9b\u81ea\u52a8\u5316\u4f7f\u7528\u5b83\u4eec\u6765\u68c0\u6d4b\u8868\u67b6\u6784\u4fee\u6539\u3002\u6211\u4eec\u5e0c\u671b\u5e94\u7528\u7a0b\u5e8f\u7684\u8f6c\u6362\u5c3d\u53ef\u80fd\u900f\u660e\uff0c\u4f46\u4e00\u4e9b\u5e94\u7528\u7a0b\u5e8f\u67e5\u8be2\u4f1a\u51fa\u73b0\u6027\u80fd\u4e0b\u964d\u6216\u5728 8.0 \u4e0a\u4f1a\u5931\u8d25\u3002\u5bf9\u4e8e MyRocks \u8fc1\u79fb\uff0c\u6211\u4eec\u6784\u5efa\u4e86\u4e00\u4e2a MySQL \u5f71\u5b50\u6d4b\u8bd5\u6846\u67b6\uff0c\u7528\u4e8e\u6355\u83b7\u751f\u4ea7\u6d41\u91cf\u5e76\u5c06\u5176\u91cd\u64ad\u5230\u6d4b\u8bd5\u5b9e\u4f8b\u3002\u5bf9\u4e8e\u6bcf\u4e2a\u5e94\u7528\u7a0b\u5e8f\u5de5\u4f5c\u8d1f\u8f7d\uff0c\u6211\u4eec\u5728 8.0 \u4e0a\u6784\u5efa\u6d4b\u8bd5\u5b9e\u4f8b\u5e76\u5411\u5b83\u4eec\u91cd\u653e\u5f71\u5b50\u6d41\u91cf\u67e5\u8be2\u3002\u6211\u4eec\u6355\u83b7\u5e76\u8bb0\u5f55\u4e86\u4ece 8.0 \u670d\u52a1\u5668\u8fd4\u56de\u7684\u9519\u8bef\uff0c\u5e76\u53d1\u73b0\u4e86\u4e00\u4e9b\u6709\u8da3\u7684\u95ee\u9898\u3002\u4e0d\u5e78\u7684\u662f\uff0c\u5e76\u975e\u6240\u6709\u8fd9\u4e9b\u95ee\u9898\u90fd\u5728\u6d4b\u8bd5\u8fc7\u7a0b\u4e2d\u88ab\u53d1\u73b0\u3002\u4f8b\u5982\uff0c\u5728\u8fc1\u79fb\u8fc7\u7a0b\u4e2d\u5e94\u7528\u7a0b\u5e8f\u53d1\u73b0\u4e86\u4e8b\u52a1\u6b7b\u9501\u3002\u5728\u6211\u4eec\u7814\u7a76\u4e0d\u540c\u7684\u89e3\u51b3\u65b9\u6848\u65f6\uff0c\u6211\u4eec\u80fd\u591f\u6682\u65f6\u5c06\u8fd9\u4e9b\u5e94\u7528\u7a0b\u5e8f\u56de\u6eda\u5230 5.6\u3002 8.0 \u4e2d\u5f15\u5165\u4e86\u65b0\u7684\u4fdd\u7559\u5173\u952e\u5b57\uff0c\u5176\u4e2d\u4e00\u4e9b\u4e0e\u5e94\u7528\u7a0b\u5e8f\u67e5\u8be2\u4e2d\u4f7f\u7528\u7684\u6d41\u884c\u8868\u5217\u540d\u79f0\u548c\u522b\u540d\u76f8\u51b2\u7a81\uff0c\u4f8b\u5982\u7ec4\u548c\u6392\u540d\u3002\u8fd9\u4e9b\u67e5\u8be2\u6ca1\u6709\u901a\u8fc7\u53cd\u5f15\u53f7\u5bf9\u540d\u79f0\u8fdb\u884c\u8f6c\u4e49\uff0c\u4ece\u800c\u5bfc\u81f4\u89e3\u6790\u9519\u8bef\u3002\u4f7f\u7528\u81ea\u52a8\u8f6c\u4e49\u67e5\u8be2\u4e2d\u5217\u540d\u7684\u8f6f\u4ef6\u5e93\u7684\u5e94\u7528\u7a0b\u5e8f\u6ca1\u6709\u9047\u5230\u8fd9\u4e9b\u95ee\u9898\uff0c\u4f46\u5e76\u975e\u6240\u6709\u5e94\u7528\u7a0b\u5e8f\u90fd\u4f7f\u7528\u5b83\u4eec\u3002\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\u5f88\u7b80\u5355\uff0c\u4f46\u8ffd\u8e2a\u5e94\u7528\u7a0b\u5e8f\u6240\u6709\u8005\u548c\u751f\u6210\u8fd9\u4e9b\u67e5\u8be2\u7684\u4ee3\u7801\u5e93\u9700\u8981\u65f6\u95f4\u3002\u4e00\u4e9b\u5e94\u7528\u7a0b\u5e8f\u5728 InnoDB \u4e0a\u7684\u91cd\u590d\u952e\u67e5\u8be2\u4e0a\u9047\u5230\u4e86\u6d89\u53ca insert \u2026 \u7684\u53ef\u91cd\u590d\u8bfb\u53d6\u4e8b\u52a1\u6b7b\u9501\u3002 5.6 \u6709\u4e00\u4e2a\u9519\u8bef\uff0c\u5728 8.0 \u4e2d\u5f97\u5230\u7ea0\u6b63\uff0c\u4f46\u4fee\u590d\u589e\u52a0\u4e86\u4e8b\u52a1\u6b7b\u9501\u7684\u53ef\u80fd\u6027\u3002\u5728\u5206\u6790\u4e86\u6211\u4eec\u7684\u67e5\u8be2\u4e4b\u540e\uff0c\u6211\u4eec\u80fd\u591f\u901a\u8fc7\u964d\u4f4e\u9694\u79bb\u7ea7\u522b\u6765\u89e3\u51b3\u5b83\u4eec\u3002\u7531\u4e8e\u6211\u4eec\u5df2\u5207\u6362\u5230\u57fa\u4e8e\u884c\u7684\u590d\u5236\uff0c\u56e0\u6b64\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528\u6b64\u9009\u9879\u3002\u6211\u4eec\u7684\u81ea\u5b9a\u4e49 5.6 \u6587\u6863\u5b58\u50a8\u548c JSON \u51fd\u6570\u4e0e 8.0 \u4e0d\u517c\u5bb9\u3002\u4f7f\u7528\u6587\u6863\u5b58\u50a8\u7684\u5e94\u7528\u7a0b\u5e8f\u9700\u8981\u5c06\u6587\u6863\u7c7b\u578b\u8f6c\u6362\u4e3a\u6587\u672c\u4ee5\u8fdb\u884c\u8fc1\u79fb\u3002\u5bf9\u4e8e JSON \u51fd\u6570\uff0c\u6211\u4eec\u5411 8.0 \u670d\u52a1\u5668\u6dfb\u52a0\u4e86 5.6 \u517c\u5bb9\u7248\u672c\uff0c\u4ee5\u4fbf\u5e94\u7528\u7a0b\u5e8f\u53ef\u4ee5\u5728\u4ee5\u540e\u8fc1\u79fb\u5230 8.0 API\u3002\u6211\u4eec\u5bf9 8.0 \u670d\u52a1\u5668\u7684\u67e5\u8be2\u548c\u6027\u80fd\u6d4b\u8bd5\u53d1\u73b0\u4e86\u4e00\u4e9b\u9700\u8981\u7acb\u5373\u89e3\u51b3\u7684\u95ee\u9898\u3002\n\u6211\u4eec\u5728 ACL \u7f13\u5b58\u5468\u56f4\u53d1\u73b0\u4e86\u65b0\u7684\u4e92\u65a5\u91cf\u4e89\u7528\u70ed\u70b9\u3002\u5f53\u540c\u65f6\u6253\u5f00\u5927\u91cf\u8fde\u63a5\u65f6\uff0c\u5b83\u4eec\u90fd\u53ef\u4ee5\u963b\u6b62\u68c0\u67e5 ACL\u3002\u5f53\u5b58\u5728\u8bb8\u591a binlog \u6587\u4ef6\u4e14\u9ad8 binlog \u5199\u5165\u901f\u7387\u9891\u7e41\u8f6e\u6362\u6587\u4ef6\u65f6\uff0cbinlog \u7d22\u5f15\u8bbf\u95ee\u4e5f\u4f1a\u51fa\u73b0\u7c7b\u4f3c\u7684\u4e89\u7528\u3002\u51e0\u4e2a\u6d89\u53ca\u4e34\u65f6\u8868\u7684\u67e5\u8be2\u88ab\u7834\u574f\u3002\u67e5\u8be2\u5c06\u8fd4\u56de\u610f\u5916\u9519\u8bef\u6216\u8fd0\u884c\u65f6\u95f4\u8fc7\u957f\u800c\u8d85\u65f6\u3002\u5185\u5b58\u4f7f\u7528\u4e0e 5.6 \u76f8\u6bd4\u6709\u6240\u589e\u52a0\uff0c\u7279\u522b\u662f\u5bf9\u4e8e\u6211\u4eec\u7684 MyRocks \u5b9e\u4f8b\uff0c\u56e0\u4e3a\u5fc5\u987b\u52a0\u8f7d 8.0 \u4e2d\u7684 InnoDB\u3002\u9ed8\u8ba4\u7684 performance_schema \u8bbe\u7f6e\u542f\u7528\u4e86\u6240\u6709\u4eea\u5668\u5e76\u6d88\u8017\u4e86\u5927\u91cf\u5185\u5b58\u3002\u6211\u4eec\u901a\u8fc7\u4ec5\u542f\u7528\u5c11\u91cf\u4eea\u5668\u5e76\u66f4\u6539\u4ee3\u7801\u4ee5\u7981\u7528\u65e0\u6cd5\u624b\u52a8\u5173\u95ed\u7684\u8868\u6765\u9650\u5236\u5185\u5b58\u4f7f\u7528\u3002\u4f46\u662f\uff0c\u5e76\u975e\u6240\u6709\u589e\u52a0\u7684\u5185\u5b58\u90fd\u7531 performance_schema \u5206\u914d\u3002\u6211\u4eec\u9700\u8981\u68c0\u67e5\u548c\u4fee\u6539\u5404\u79cd InnoDB \u5185\u90e8\u6570\u636e\u7ed3\u6784\uff0c\u4ee5\u8fdb\u4e00\u6b65\u51cf\u5c11\u5185\u5b58\u5360\u7528\u3002\u8fd9\u4e00\u52aa\u529b\u5c06 8.0 \u7684\u5185\u5b58\u4f7f\u7528\u7387\u964d\u4f4e\u5230\u53ef\u63a5\u53d7\u7684\u6c34\u5e73\u3002\u5230\u76ee\u524d\u4e3a\u6b62\uff0c8.0 \u8fc1\u79fb\u5df2\u7ecf\u82b1\u8d39\u4e86\u51e0\u5e74\u65f6\u95f4\u3002\u6211\u4eec\u5df2\u5c06\u8bb8\u591a InnoDB \u526f\u672c\u96c6\u8f6c\u6362\u4e3a\u5b8c\u5168\u5728 8.0 \u4e0a\u8fd0\u884c\u3002\u5176\u4f59\u7684\u5927\u90e8\u5206\u90fd\u5904\u4e8e\u8fc1\u79fb\u8def\u5f84\u7684\u4e0d\u540c\u9636\u6bb5\u3002\u73b0\u5728\u6211\u4eec\u7684\u5927\u90e8\u5206\u81ea\u5b9a\u4e49\u529f\u80fd\u90fd\u5df2\u79fb\u690d\u5230 8.0\uff0c\u66f4\u65b0\u5230 Oracle \u7684\u6b21\u8981\u7248\u672c\u76f8\u5bf9\u5bb9\u6613\uff0c\u6211\u4eec\u8ba1\u5212\u4e0e\u6700\u65b0\u7248\u672c\u4fdd\u6301\u540c\u6b65\u3002\u9996\u5148\uff0c\u6211\u4eec\u65e0\u6cd5\u5c31\u5730\u5347\u7ea7\u670d\u52a1\u5668\uff0c\u9700\u8981\u4f7f\u7528\u903b\u8f91\u8f6c\u50a8\u548c\u8fd8\u539f\u6765\u6784\u5efa\u65b0\u670d\u52a1\u5668\u3002\u4f46\u662f\uff0c\u5bf9\u4e8e\u975e\u5e38\u5927\u7684 mysqld \u5b9e\u4f8b\uff0c\u8fd9\u5728\u5b9e\u65f6\u751f\u4ea7\u670d\u52a1\u5668\u4e0a\u53ef\u80fd\u9700\u8981\u5f88\u591a\u5929\uff0c\u800c\u4e14\u8fd9\u4e2a\u8106\u5f31\u7684\u8fc7\u7a0b\u53ef\u80fd\u4f1a\u5728\u5b8c\u6210\u4e4b\u524d\u88ab\u4e2d\u65ad\u3002\u5bf9\u4e8e\u8fd9\u4e9b\u5927\u578b\u5b9e\u4f8b\uff0c\u6211\u4eec\u4e0d\u5f97\u4e0d\u4fee\u6539\u6211\u4eec\u7684\u5907\u4efd\u548c\u6062\u590d\u7cfb\u7edf\u6765\u5904\u7406\u91cd\u5efa\u3002\u5176\u6b21\uff0c\u68c0\u6d4b API \u66f4\u6539\u8981\u56f0\u96be\u5f97\u591a\uff0c\u56e0\u4e3a 5.7 \u53ef\u4ee5\u5411\u6211\u4eec\u7684\u5e94\u7528\u7a0b\u5e8f\u5ba2\u6237\u7aef\u63d0\u4f9b\u5f03\u7528\u8b66\u544a\u4ee5\u4fee\u590d\u6f5c\u5728\u95ee\u9898\u3002\u76f8\u53cd\uff0c\u6211\u4eec\u9700\u8981\u8fd0\u884c\u989d\u5916\u7684\u5f71\u5b50\u6d4b\u8bd5\u6765\u53d1\u73b0\u6545\u969c\uff0c\u7136\u540e\u624d\u80fd\u8fc1\u79fb\u751f\u4ea7\u5de5\u4f5c\u8d1f\u8f7d\u3002\u4f7f\u7528\u81ea\u52a8\u8f6c\u4e49\u67b6\u6784\u5bf9\u8c61\u540d\u79f0\u7684 mysql \u5ba2\u6237\u7aef\u8f6f\u4ef6\u6709\u52a9\u4e8e\u51cf\u5c11\u517c\u5bb9\u6027\u95ee\u9898\u7684\u6570\u91cf\u3002\n\u5728\u4e00\u4e2a\u526f\u672c\u96c6\u4e2d\u652f\u6301\u4e24\u4e2a\u4e3b\u8981\u7248\u672c\u662f\u5f88\u56f0\u96be\u7684\u3002\u4e00\u65e6\u526f\u672c\u96c6\u5c06\u5176\u4e3b\u5b9e\u4f8b\u63d0\u5347\u4e3a 8.0 \u5b9e\u4f8b\uff0c\u6700\u597d\u5c3d\u5feb\u7981\u7528\u5e76\u5220\u9664 5.6 \u5b9e\u4f8b\u3002\u5e94\u7528\u7a0b\u5e8f\u7528\u6237\u5f80\u5f80\u4f1a\u53d1\u73b0\u4ec5 8.0 \u652f\u6301\u7684\u65b0\u529f\u80fd\uff0c\u4f8b\u5982 utf8mb4_0900 \u6392\u5e8f\u89c4\u5219\uff0c\u4f7f\u7528\u8fd9\u4e9b\u529f\u80fd\u53ef\u80fd\u4f1a\u4e2d\u65ad 8.0 \u548c 5.6 \u5b9e\u4f8b\u4e4b\u95f4\u7684\u590d\u5236\u6d41\u3002\u5c3d\u7ba1\u5728\u6211\u4eec\u7684\u8fc1\u79fb\u8fc7\u7a0b\u4e2d\u9047\u5230\u4e86\u6240\u6709\u969c\u788d\uff0c\u4f46\u6211\u4eec\u5df2\u7ecf\u770b\u5230\u4e86\u8fd0\u884c 8.0 \u7684\u597d\u5904\u3002\u4e00\u4e9b\u5e94\u7528\u7a0b\u5e8f\u9009\u62e9\u63d0\u524d\u8f6c\u6362\u5230 8.0\uff0c\u4ee5\u5229\u7528\u6587\u6863\u5b58\u50a8\u548c\u6539\u8fdb\u7684\u65e5\u671f\u65f6\u95f4\u652f\u6301\u7b49\u529f\u80fd\u3002\u6211\u4eec\u4e00\u76f4\u5728\u8003\u8651\u5982\u4f55\u5728 MyRocks \u4e0a\u652f\u6301 Instant DDL \u7b49\u5b58\u50a8\u5f15\u64ce\u529f\u80fd\u3002\u603b\u7684\u6765\u8bf4\uff0c\u65b0\u7248\u672c\u6781\u5927\u5730\u6269\u5c55\u4e86\u6211\u4eec\u53ef\u4ee5\u7528 MySQL @ Facebook \u505a\u7684\u4e8b\u60c5\u3002", "note_en": "MySQL , an open source database developed by Oracle, powers some of Facebook\u2019s most important workloads. We actively develop new features in MySQL to support our evolving requirements. These features change many different areas of MySQL, including client connectors, storage engine, optimizer, and replication. Each new major version of MySQL requires significant time and effort to migrate our workloads. The challenges\u00a0 include:\n  Our last major version upgrade, to MySQL 5.6, took more than a year to roll out. When version 5.7 was released, we were still in the midst of developing our LSM-Tree storage engine,   MyRocks , on version 5.6. Since upgrading to 5.7 while simultaneously building a new storage engine would have significantly slowed the progress on MyRocks, we opted to stay with 5.6 until MyRocks was complete. MySQL 8.0 was announced as we were finishing the rollout of MyRocks to our user database (UDB) service tier.\n That version included compelling features like writeset-based parallel replication and a transactional data dictionary that provided atomic DDL support. For us, moving to 8.0 would also bring in the 5.7 features we had missed, including Document Store. Version 5.6 was approaching end of life, and we wanted to stay active within the MySQL community, especially with our work on the MyRocks storage engine. Enhancements in 8.0, like instant DDL, could speed up MyRocks schema changes, but we needed to be on the 8.0 codebase to use it. Given the benefits of the code update, we decided to migrate to 8.0. We\u2019re sharing how we tackled our 8.0 migration project \u2014 and some of the surprises we discovered in the process. When we initially scoped out the project, it was clear that moving to 8.0 would be even more difficult than migrating to 5.6 or MyRocks.\n At the time, our customized 5.6 branch had over 1,700 code patches to port to 8.0. As we were porting those changes, new Facebook MySQL features and fixes were added to the 5.6 codebase that moved the goalpost further away.\n We have many MySQL servers running in production, serving a large number of disparate applications. We also have extensive software infrastructure for managing MySQL instances. These applications perform operations like gathering statistics and managing server backups.\n Upgrading from 5.6 to 8.0 skipped over 5.7 entirely. APIs that were active in 5.6 would have been deprecated in 5.7 and possibly removed in 8.0, requiring us to update any application using the now-removed APIs.\n A number of Facebook features were not forward-compatible with similar ones in 8.0 and required a deprecation and migration path forward.\n  We first set up the 8.0 branch for building and testing in our development environments. We then began the long journey to port the patches from our 5.6 branch. There were more than 1,700 patches when we started, but we were able to organize them into a few major categories. Most of our custom code had good comments and descriptions so we could easily determine whether it was still needed by the applications or if it could be dropped. Features that were enabled by special keywords or unique variable names also made it easy to determine relevance because we could search through our application codebases to find their use cases. A few patches were very obscure and required detective work \u2014 digging through old design documents, posts, and/or code review comments \u2014\u00a0to understand their history.\n  Drop: Features that were no longer used, or had equivalent functionality in 8.0, did not need to be ported.\n Build/Client: Non-server features that supported our build environment and modified MySQL tools like mysqlbinlog, or added functionality like the async client API, were ported.\n Non-MyRocks Server: Features in the mysqld server that were not related to our MyRocks storage engine were ported.\n We tracked the status and relevant historical information of each patch using spreadsheets, and recorded our reasoning when dropping a patch. Multiple patches that updated the same feature were grouped together for porting. Patches ported and committed to the 8.0 branch were annotated with the 5.6 commit information. Discrepancies on porting status would inevitably arise due to the large number of patches we needed to sift through and these notes helped us resolve them.\n Each of the client and server categories naturally became a software release milestone. With all client-related changes ported, we were able to update our client tooling and connector code to 8.0. Once all of the non-MyRocks server features were ported, we were able to deploy 8.0 mysqld for InnoDB servers. Finishing up the MyRocks server features enabled us to update MyRocks installations.\n Some of the most complex features required significant changes for 8.0, and a few areas had major compatibility problems. For example, upstream 8.0 binlog event formats were incompatible with some of our custom 5.6 modifications. Error codes used by Facebook 5.6 features conflicted with those assigned to new features by upstream 8.0. We ultimately needed to patch our 5.6 server to be forward-compatible with 8.0.\n It took a couple of years to complete porting all of these features. By the time we got to the end, we had evaluated more than 2,300 patches and ported 1,500 of those to 8.0.\n  We group together multiple mysqld instances into a single MySQL replica set. Each instance in a replica set contains the same data but is geographically distributed to a different data center to provide data availability and failover support. Each replica set has one primary instance. The remaining instances are all secondaries. The primary handles all write traffic and replicates the data asynchronously to all secondaries.\n  We started with replica sets consisting of 5.6 primary/5.6 secondaries and the end goal was replica sets with 8.0 primary/8.0 secondaries. We followed a plan similar to the   UDB MyRocks migration plan .\n For each replica set, create and add 8.0 secondaries via a logical copy using mysqldump. These secondaries do not serve any application read traffic.\n Each replica set could transition through each of the steps above independently and stay on a step as long as needed. We separated replica sets into much smaller groups, which we shepherded through each transition. If we found problems, we could rollback to the previous step. In some cases, replica sets were able to reach the last step before others started.\n To automate the transition of a large number of replica sets, we needed to build new software infrastructure. We could group replica sets together and move them through each stage by simply changing a line in a configuration file. Any replica set that encountered problems could then be individually rolled back.\n  As part of the 8.0 migration effort, we decided to standardize on using row-based replication (RBR). Some 8.0 features required RBR, and it simplified our MyRocks porting efforts. While most of our MySQL replica sets were already using RBR, those still running statement-based replication (SBR) could not be easily converted. These replica sets usually had tables without any high cardinality keys. Switching completely to RBR had been a goal, but the long tail of work needed to add primary keys was often prioritized lower than other projects.\n Hence, we made RBR a requirement for 8.0. After evaluating and adding primary keys to every table, we switched over the last SBR replica set this year. Using RBR also gave us an alternative solution for resolving an application issue that we encountered when we moved some replica sets to 8.0 primaries, which will be discussed later.\n  Most of the 8.0 migration process involved testing and verifying the mysqld server with our automation infrastructure and application queries.\n As our MySQL fleet grew, so did the automation infrastructure we use to manage the servers. In order to ensure all of our MySQL automation was compatible with the 8.0 version, we invested in building a test environment, which leveraged test replica sets with virtual machines to verify the behaviors. We wrote integration tests to canary each piece of automation to run on both the 5.6 version and the 8.0 version and verified their correctness. We found several bugs and behavior differences as we went through this exercise.\n As each piece of MySQL infrastructure was validated against our 8.0 server, we found and fixed (or worked around) a number of interesting issues:\n Software that parsed text output from error log, mysqldump output, or server show commands easily broke. Slight changes in the server output often revealed bugs in a tool\u2019s parsing logic.\n The 8.0\u2019s default  utf8mb4  collation settings resulted in collation mismatches between our 5.6 and 8.0 instances. 8.0 tables may use the new  utf8mb4_0900  collations even for create statements generated by 5.6\u2019s show create table because the 5.6 schemas using  utf8mb4_general_ci  do not explicitly specify collation. These table differences often caused problems with replication and schema verification tools.\n The error codes for certain replication failures changed and we had to fix our automation to handle them correctly.\n The 8.0 version\u2019s data dictionary obsoleted table .frm files, but some of our automation used them to detect table schema modifications.\n  We wanted the transition for applications to be as transparent as possible, but some application queries hit performance regressions or would fail on 8.0.\n For the MyRocks migration, we built a MySQL shadow testing framework that captured production traffic and replayed them to test instances. For each application workload, we constructed test instances on 8.0 and replayed shadow traffic queries to them. We captured and logged the errors returning from the 8.0 server and found some interesting problems. Unfortunately, not all of these problems were found during testing. For example, the transaction deadlock was discovered by applications during the migration. We were able to roll back these applications to 5.6 temporarily while we researched different solutions.\n New reserved keywords were introduced in 8.0 and a few, such as groups and rank, conflicted with popular table column names and aliases used in application queries. These queries did not escape the names via backquotes, leading to parsing errors. Applications using software libraries that automatically escaped the column names in queries did not hit these issues, but not all applications used them. Fixing the problem was simple, but it took time to track down application owners and codebases generating these queries.\n  A few applications hit   repeatable-read transaction deadlocks  involving  insert \u2026 on duplicate key  queries on InnoDB. 5.6 had a bug which was corrected in 8.0, but the fix increased the likelihood of transaction deadlocks. After analyzing our queries, we were able to resolve them by lowering the isolation level. This option was available to us since we had made the switch to row-based replication.\n Our custom 5.6 Document Store and JSON functions were not compatible with 8.0\u2019s. Applications using Document Store needed to convert the document type to text for the migration. For the JSON functions, we added 5.6-compatible versions to the 8.0 server so that applications could migrate to the 8.0 API at a later time.\n Our query and performance testing of the 8.0 server uncovered a few problems that needed to be addressed almost immediately.\n We found new mutex contention hotspots around the ACL cache. When a large number of connections were opened simultaneously, they could all block on checking ACLs.\n Similar contention was found with binlog index access when many binlog files are present and high binlog write rates rotate files frequently.\n Several queries involving temp tables were broken. The queries would return unexpected errors or take so long to run that they would time out.\n Memory usage compared with 5.6 had increased, especially for our MyRocks instances, because InnoDB in 8.0 must be loaded. The default performance_schema settings enabled all instruments and consumed significant memory. We limited the memory usage by only enabling a small number of instruments and making code changes to disable tables that could not be manually turned off. However, not all the increased memory was being allocated by performance_schema. We needed to examine and modify various InnoDB internal data structures to reduce the memory footprint further. This effort brought 8.0\u2019s memory usage down to acceptable levels.\n  The 8.0 migration has taken a few years so far. We have converted many of our InnoDB replica sets to running entirely on 8.0. Most of the remaining ones are at various stages along the migration path. Now that most of our custom features have been ported to 8.0, updating to Oracle\u2019s minor releases has been comparatively easier and we plan to keep pace with the latest versions.\n  First, we could not upgrade servers in place and needed to use logical dump and restore to build a new server. However, for very large mysqld instances, this can take many days on a live production server and this fragile process will likely be interrupted before it can complete. For these large instances, we had to modify our backup and restore systems to handle the rebuild.\n Second, it is much harder to detect API changes because 5.7 could have provided deprecation warnings to our application clients to fix potential issues. Instead, we needed to run additional shadow tests to find failures before we could migrate the production workloads. Using mysql client software that automatically escaped schema object names helps reduce the number of compatibility issues.\n Supporting two major versions within a replica set is hard. Once a replica set promotes its primary to be an 8.0 instance, it is best to disable and remove the 5.6 ones as soon as possible. Application users tend to discover new features that are supported only by 8.0, like  utf8mb4_0900  collations, and using these can break the replication stream between 8.0 and 5.6 instances.\n Despite all the hurdles in our migration path, we have already seen the benefits of running 8.0. Some applications have opted for early conversion to 8.0 to utilize features like Document Store and improved datetime support. We have been considering how to support storage engine features like Instant DDL on MyRocks. Overall, the new version greatly expands on what we can do with MySQL @ Facebook.", "posttime": "2021-07-24 07:17:17", "source_domain": "news.ycombinator.com", "source_name": "Hacker News", "tags": "mysql,facebook,\u8fc1\u79fb", "title": "\u5c06 Facebook \u8fc1\u79fb\u5230 MySQL 8.0", "title_en": "Migrating Facebook to MySQL 8.0", "transed": 1, "url": "https://engineering.fb.com/2021/07/22/data-infrastructure/mysql/", "via": "", "real_tags": ["mysql", "facebook", "\u8fc1\u79fb"]}, {"category": "", "categoryclass": "", "imagename": "1fb89afefe117b7e27bc907c3544c11c.png", "infoid": 1069340, "ip": "", "isanchordig": 1, "ischecked": 1, "isdelete": 0, "isneo": 1, "mark": "", "name": "", "note": "\u5728\u81f4\u529b\u4e8e\u5bf9 transactionfee.info \u7684\u4e3b\u6839\u652f\u6301\u8fdb\u884c\u5de5\u4f5c\u65f6\uff0c\u5f88\u660e\u663e\u4e3b\u7f51\u4e0a\u5df2\u7ecf\u5b58\u5728\u4e00\u4e9b Pay-to-Taproot (P2TR) \u8f93\u51fa\u3002\u4efb\u4f55\u4eba\u90fd\u53ef\u4ee5\u4f7f\u7528\u8fd9\u4e9b\u8f93\u51fa\uff0c\u4f46\u5b83\u4eec\u662f\u975e\u6807\u51c6\u7684\uff0c\u56e0\u6b64\u65e0\u6cd5\u5728\u6bd4\u7279\u5e01\u4e2d\u7684\u8282\u70b9\u4e4b\u95f4\u8fdb\u884c\u4e2d\u7ee7\u70b9\u5bf9\u70b9\u7f51\u7edc\u3002\u4f46\u662f\uff0c\u77ff\u6c60\u53ef\u4ee5\u5728\u5176\u533a\u5757\u4e2d\u5305\u542b\u975e\u6807\u51c6\u4ea4\u6613\u3002\u6211\u4eec\u6db5\u76d6\u4e86\u4e3b\u7f51\u4e0a\u5df2\u7ecf\u5b58\u5728\u7684\u516d\u4e2a P2TR \u8f93\u51fa\uff0c\u5e76\u89e3\u91ca\u4e86\u4e3a\u4ec0\u4e48\u4efb\u4f55\u4eba\u90fd\u53ef\u4ee5\u5728\u4e3b\u6839\u6fc0\u6d3b\u4e4b\u524d\u4f7f\u7528\u8fd9\u4e9b\u8f93\u51fa\u3002\u5728 f2pool.com \u77ff\u6c60\u7684\u5e2e\u52a9\u4e0b\uff0c\u56db\u4e2a P2TR \u8f93\u51fa\u88ab\u6350\u8d60\u7ed9 brink.dev\uff0c\u4e00\u5bb6\u4e13\u6ce8\u4e8e\u652f\u6301\u5f00\u6e90\u6bd4\u7279\u5e01\u5f00\u53d1\u7684\u975e\u8425\u5229\u516c\u53f8\u3002 Taproot \u662f\u5bf9\u6bd4\u7279\u5e01\u534f\u8bae\u7684\u8f6f\u5206\u53c9\u5347\u7ea7\uff0c\u5e76\u6536\u7d27\u4e86\u5171\u8bc6\u89c4\u5219\u3002\u8f6f\u5206\u53c9\u4e00\u65e6\u6fc0\u6d3b\u5c31\u4f1a\u7981\u6b62\u4e4b\u524d\u5141\u8bb8\u7684\u4e1c\u897f\u3002 Taproot \u9650\u5236\u4e86\u539f\u751f SegWit \u8f93\u51fa\u7684\u4f7f\u7528\u65b9\u5f0f\uff0cwitnessversion \u4e3a 1 \u548c\u4e00\u4e2a 32 \u5b57\u8282\u7684\u89c1\u8bc1\u7a0b\u5e8f\u3002\u5176\u4ed6\u89c1\u8bc1\u7248\u672c\u3001\u5d4c\u5957\u9694\u79bb\u89c1\u8bc1\u548c\u539f\u751f\u9694\u79bb\u89c1\u8bc1\u8f93\u51fa\u7684\u652f\u51fa\u89c4\u5219\uff0c\u5176\u89c1\u8bc1\u7248\u672c\u4e3a 1\uff0c\u4f46\u66f4\u957f\u6216\u66f4\u77ed\u7684\u89c1\u8bc1\u7a0b\u5e8f\u4e0d\u53d7\u5f71\u54cd\u3002\u867d\u7136\u53ef\u4ee5\u5728\u4e3b\u6839\u6fc0\u6d3b\u4e4b\u524d\u521b\u5efa P2TR \u8f93\u51fa\uff0c\u4f46\u4e0d\u5efa\u8bae\u8fd9\u6837\u505a\u3002\u540c\u6837\uff0c\u94b1\u5305\u4e0d\u5e94\u8be5\u5728\u6fc0\u6d3b\u524d\u751f\u6210 P2TR \u5730\u5740\u3002\u5c3d\u7ba1\u5982\u6b64\uff0c\u5728\u64b0\u5199\u672c\u6587\u65f6\uff0c\u6bd4\u7279\u5e01\u4e3b\u7f51\u4e0a\u5df2\u7ecf\u6709\u516d\u4e2a P2TR \u8f93\u51fa\u3002\u7b2c\u4e00\u4e2a P2TR \u8f93\u51fa\u662f\u5728 2019 \u5e74 12 \u6708 17 \u65e5\u5728\u6765\u81ea purse.io \u7684\u63d0\u6b3e\u4ea4\u6613\u4e2d\u521b\u5efa\u7684\u3002 Matthew Zipkin \u5411\u89c1\u8bc1\u7248\u672c 1 bech32 \u5730\u5740\u53d1\u8d77\u4e86 5431 sat \u7684\u63d0\u6b3e\uff0c\u4ee5\u6d4b\u8bd5\u53d1\u9001\u5bf9\u89c1\u8bc1\u7248\u672c 1 \u7684\u652f\u6301\u3002\u4ed6\u5c06\u4ed6\u7684\u6d4b\u8bd5\u7ed3\u679c\u6dfb\u52a0\u5230\u6bd4\u7279\u5e01 OptechCompatibility Matrix \u4e2d\uff0c\u5e76\u63d0\u4f9b\u4e86\u4e00\u5f20\u663e\u793a\u5728 thepurse.io \u524d\u7aef\u63d0\u6b3e\u7684\u5c4f\u5e55\u622a\u56fe\u3002\u5730\u5740\u4e2d\u7f16\u7801\u7684\u516c\u94a5\u662f 010 10101 01010101 010 101010101010 10 10 101010101 0101010101 0 101010 101\uff0c\u8fd9\u5f88\u53ef\u80fd\u4e0d\u662f\u7531\u79c1\u94a5\u751f\u6210\u7684\u3002\u5047\u8bbe\u8fd9\u4e2a\u516c\u94a5\u7684\u79c1\u94a5\u662f\u672a\u77e5\u7684\uff0c\u4e00\u65e6\u4e3b\u6839\u6fc0\u6d3b\uff0c\u8d44\u91d1\u5c06\u65e0\u6cd5\u4f7f\u7528\u3002\u7b2c\u4e8c\u4e2a P2TR \u8f93\u51fa\u521b\u5efa\u4e8e 2020 \u5e74 1 \u6708 28 \u65e5\u3002\u503c\u4e3a 700sat\uff0c\u63a5\u8fd1\u9ed8\u8ba4\u7684 SegWit \u7070\u5c18\u9608\u503c 294 sat\u3002\u6b64\u8f93\u51fa\u7684\u521b\u5efa\u8005\u672a\u77e5\u3002\u7b2c\u4e09\u4e2a\u3001\u7b2c\u56db\u4e2a\u548c\u7b2c\u4e94\u4e2a P2TR \u8f93\u51fa\u662f\u5728\u68c0\u67e5\u53d1\u9001\u652f\u6301\u5230 Pieter Wuille \u4e8e 2020 \u5e74 10 \u6708 19 \u65e5\u53d1\u5e03\u5230\u6bd4\u7279\u5e01\u5f00\u53d1\u90ae\u4ef6\u5217\u8868\u7684\u89c1\u8bc1 v1 bech32 \u5730\u5740\u65f6\u521b\u5efa\u7684\u6d4b\u8bd5\u8f93\u51fa\u3002\u7b2c\u4e09\u4e2a P2TR \u8f93\u51fa\u7684\u503c\u4e3a 3656 sat \u548c\u7531 Riccardo Casatta \u4f7f\u7528 Blockstream Aqua \u94b1\u5305\u521b\u5efa\u3002\u4ef7\u503c 50.000 sat \u7684\u7b2c\u56db\u4e2a P2TR \u8f93\u51fa\u5f88\u53ef\u80fd\u662f Mike Schmidt \u4f7f\u7528 BRD \u94b1\u5305\u521b\u5efa\u7684\u3002\u4e0d\u77e5\u9053\u662f\u8c01\u521b\u5efa\u4e86\u7b2c\u4e94\u4e2a P2TR \u8f93\u51fa\uff0c\u503c\u4e3a 100.000 sat\u3002\u7b2c\u516d\u4e2a P2TR \u8f93\u51fa\uff0c\u503c\u4e3a 1324 sat\uff0c\u521b\u5efa\u4e8e 2021 \u5e74 7 \u6708 7 \u65e5\u3002\u5b83\u662f\u5728 2021 \u5e74 6 \u6708 13 \u65e5\u9501\u5b9a\u4e3b\u6839\u540e\u521b\u5efa\u7684\u552f\u4e00 P2TR \u8f93\u51fa\u3002\u5176\u4ed6 P2TR \u8f93\u51fa\u662f\u5728\u5c1a\u4e0d\u6e05\u695a\u4e3b\u6839\u4f55\u65f6\u6216\u662f\u5426\u4f1a\u88ab\u521b\u5efa\u65f6\u521b\u5efa\u7684\u542f\u7528\u3002\n\u5728\u4e3b\u6839\u6fc0\u6d3b\u4e4b\u524d\uff0c\u4efb\u4f55\u4eba\u90fd\u53ef\u4ee5\u4f7f\u7528\u8fd9\u516d\u4e2a P2TR \u8f93\u51fa\u3002\u7136\u800c\uff0c\u8fd9\u4e9b P2TR \u8f93\u51fa\u8fd8\u6ca1\u6709\u88ab\u82b1\u8d39\uff0c\u56e0\u4e3a\u652f\u51fa\u4ea4\u6613\u76ee\u524d\u88ab\u8ba4\u4e3a\u662f\u975e\u6807\u51c6\u7684\u3002\u975e\u6807\u51c6\u4ea4\u6613\u4e0d\u4f1a\u5728\u6bd4\u7279\u5e01\u7f51\u7edc\u4e0a\u4e2d\u7ee7\u3002\u5728\u63a5\u53d7\u4ea4\u6613\u5230\u5185\u5b58\u6c60\u4e4b\u524d\uff0c\u6bd4\u7279\u5e01\u6838\u5fc3\u4f1a\u5728 AreInputsStandard \u51fd\u6570\u4e2d\u68c0\u67e5\u6bcf\u4e2a\u8f93\u5165\u7684\u6807\u51c6\u6027\u3002\u5982\u679c\u82b1\u8d39\u7684 UTXO \u662f P2TR \u8f93\u51fa\uff0c\u5219\u8be5\u51fd\u6570\u5f53\u524d\u8fd4\u56de false\uff0c\u8868\u660e\u4ea4\u6613\u5177\u6709\u975e\u6807\u51c6\u8f93\u5165\u3002\u8282\u70b9\u4e0d\u63a5\u53d7\u5bf9\u5176\u5185\u5b58\u6c60\u7684\u4ea4\u6613\uff0c\u5e76\u4e14\u4e0d\u4f1a\u5c06\u5176\u8f6c\u53d1\u7ed9\u5bf9\u7b49\u65b9\u3002\u4f46\u662f\uff0c\u5f53\u76f4\u63a5\u5305\u542b\u5728\u4e00\u4e2a\u533a\u5757\u4e2d\u65f6\uff0c\u975e\u6807\u51c6\u4ea4\u6613\u4ecd\u7136\u6709\u6548\u3002\u5728\u5176\u4ed6\u68c0\u67e5\u65c1\u8fb9\uff0c\u4ea4\u6613\u5fc5\u987b\u901a\u8fc7\u811a\u672c\u9a8c\u8bc1\u3002\u4e0d\u68c0\u67e5\u6807\u51c6\u3002\u5728 Bitcoin Core \u4e2d\uff0cVerifyScript \u51fd\u6570\u8d1f\u8d23\u811a\u672c\u9a8c\u8bc1\u3002 SegWit \u82b1\u8d39\u7684\u811a\u672c\u9a8c\u8bc1\u5305\u62ec\u4e24\u90e8\u5206\uff1a\u811a\u672c\u8bc4\u4f30\u548c\u89c1\u8bc1\u7a0b\u5e8f\u7684\u9a8c\u8bc1\u3002\u5728\u811a\u672c\u8bc4\u4f30\u671f\u95f4\uff0c\u9996\u5148\u8bc4\u4f30 scriptSig\u3002\u5728\u4ece\u8f93\u5165\u4e2d\u5f15\u7528\u7684 UTXO \u8bc4\u4f30 scriptPubKey \u65f6\uff0c\u7ed3\u679c\u5806\u6808\u7528\u4f5c\u521d\u59cb\u5806\u6808\u72b6\u6001\u3002\u5982\u679c\u811a\u672c\u8bc4\u4f30\u5b8c\u6210\u4e14\u6ca1\u6709\u5931\u8d25\uff0c\u5806\u6808\u4e0d\u4e3a\u7a7a\uff0c\u5e76\u4e14\u5806\u6808\u9876\u90e8\u5143\u7d20\u8f6c\u6362\u4e3a\u771f\uff08\u4e0d\u4e3a\u96f6\uff09\uff0c\u5219\u811a\u672c\u8bc4\u4f30\u6210\u529f\u3002\u5f53\u4f7f\u7528\u539f\u751f SegWit \u8f93\u51fa\uff08\u4f8b\u5982 P2TRoutputs\uff09\u65f6\uff0cscriptSig \u4e3a\u7a7a\u3002 scriptPubKey \u5305\u542bwitnessversion \u548cwitness \u7a0b\u5e8f\u3002\u7531\u4e8e scriptSig \u4e3a\u7a7a\uff0c\u56e0\u6b64\u4f7f\u7528\u7a7a\u5806\u6808\u8fdb\u884c scriptPubKey \u8bc4\u4f30\u3002\u5728\u90a3\u91cc\uff0c\u89c1\u8bc1\u7248\u672c\u548c\u89c1\u8bc1\u7a0b\u5e8f\u88ab\u538b\u5165\u5806\u6808\u3002\u811a\u672c\u8bc4\u4f30\u5b8c\u6210\u3002\u7531\u4e8e\u5806\u6808\u4e0d\u4e3a\u7a7a\u5e76\u4e14\u5806\u6808\u9876\u90e8\u5143\u7d20\u662f\u89c1\u8bc1\u7a0b\u5e8f\uff08\u901a\u5e38\u4e0d\u4e3a\u96f6\uff09\uff0c\u811a\u672c\u8bc4\u4f30\u5c06\u6210\u529f\u3002\u8fd9\u79cd\u884c\u4e3a\u4f7f SegWit \u6210\u4e3a\u8f6f\u5206\u53c9\u3002\u9694\u79bb\u89c1\u8bc1\u4ea4\u6613\u5bf9\u4e0d\u652f\u6301\u9694\u79bb\u89c1\u8bc1\u7684\u8282\u70b9\u6709\u6548\uff0c\u56e0\u4e3a\u6808\u9876\u5143\u7d20\u4e0d\u4e3a\u7a7a\u3002\u4e00\u65e6\u4e3b\u6839\u6fc0\u6d3b\uff0c\u5173\u952e\u8def\u5f84 P2TR \u652f\u51fa\u5c06\u662f\u6709\u6548\u548c\u6807\u51c6\u7684\u3002\u4efb\u4f55\u4eba\u90fd\u53ef\u4ee5\u652f\u51fa\u7684 P2TR \u652f\u51fa\u53ef\u80fd\u6709\u4e00\u4e2a\u7a7a\u7684\u89c1\u8bc1\u4eba\uff0c\u4f46\u5176\u4ed6\u65b9\u9762\u770b\u8d77\u6765\u662f\u4e00\u6837\u7684\u3002\u4e0b\u4e00\u6b65\uff0c\u5982\u679c\u89c1\u8bc1\u7248\u672c\u5df2\u77e5\uff0c\u5219\u9a8c\u8bc1\u89c1\u8bc1\u7a0b\u5e8f\u3002\u5982\u679c\u89c1\u8bc1\u7248\u672c\u672a\u77e5\uff0c\u5219\u5c06\u89c1\u8bc1\u7a0b\u5e8f\u89c6\u4e3a\u6709\u6548 1.\u5728\u9a8c\u8bc1\u7248\u672c 1 \u89c1\u8bc1\u7a0b\u5e8f\u671f\u95f4\uff08\u5373\u5f53\u82b1\u8d39 P2TR \u8f93\u51fa\u65f6\uff09\u7684\u7b2c\u4e00\u4e2a\u68c0\u67e5) \u662f\u5982\u679c\u8bbe\u7f6e\u4e86 SCRIPT_VERIFY_TAPROOT \u811a\u672c\u9a8c\u8bc1\u6807\u5fd7\u3002\u5982\u679c\u672a\u8bbe\u7f6e\uff0c\u5219\u5728\u68c0\u67e5\u89c1\u8bc1\u7a0b\u5e8f\u4e4b\u524d\u9a8c\u8bc1\u6210\u529f\u3002\u6b64\u6807\u5fd7\u4ec5\u5728\u4e3b\u6839\u5904\u4e8e\u6d3b\u52a8\u72b6\u6001\u65f6\u8bbe\u7f6e\u3002\u8fd9\u5bfc\u81f4\u4e3b\u6839\u8f93\u51fa\u5728\u6fc0\u6d3b\u4e4b\u524d\u662f\u4efb\u4f55\u4eba\u90fd\u53ef\u4ee5\u4f7f\u7528\u7684\u3002\u89c1\u8bc1\u7a0b\u5e8f\u672a\u7ecf\u8fc7\u9a8c\u8bc1\uff0c\u89c1\u8bc1\u53ef\u4ee5\u7559\u7a7a\u3002\u6211\u4eec\u901a\u8fc7\u6784\u5efa\u4e00\u4e2a\u5171\u8bc6\u6709\u6548\u7684\u975e\u6807\u51c6\u4ea4\u6613\u6765\u8bc1\u660e\u5728\u4e3b\u6839\u8f6f\u5206\u53c9\u6fc0\u6d3b\u4e4b\u524d P2TR \u8f93\u51fa\u7684\u652f\u51fa\u3002\u77ff\u6c60 f2pool.com \u901a\u8fc7\u5728\u533a\u5757\u4e2d\u5305\u542b\u975e\u6807\u51c6\u4ea4\u6613\u6765\u63d0\u4f9b\u5e2e\u52a9\u3002\u5bf9\u4e8e\u6211\u4eec\u7684\u4ea4\u6613\uff0c\u6211\u4eec\u4ece\u524d\u9762\u8ba8\u8bba\u7684\u516d\u4e2a\u53ef\u7528\u8f93\u51fa\u4e2d\u9009\u62e9\u7b2c\u4e00\u4e2a\u3001\u7b2c\u4e09\u4e2a\u3001\u7b2c\u56db\u4e2a\u548c\u7b2c\u4e94\u4e2a P2TR \u8f93\u51fa\u3002\u503c\u4e3a 5.431 sat \u7684\u7b2c\u4e00\u4e2a\u8f93\u51fa\u5728\u4e3b\u6839\u6fc0\u6d3b\u65f6\u5c06\u65e0\u6cd5\u4f7f\u7528\uff0c\u5426\u5219\u5c06\u6c38\u8fdc\u4fdd\u7559\u5728 UTXO \u96c6\u4e2d\u3002\u7b2c\u4e09\u4e2a\uff083.656 sat\uff09\u3001\u7b2c\u56db\u4e2a\uff0850.000 sat\uff09\u548c\u7b2c\u4e94\u4e2a\uff08100.000 sat\uff09P2TR \u8f93\u51fa\u5728\u6d4b\u8bd5\u4ea4\u6613\u4e2d\u53d1\u9001\uff0c\u77e5\u9053\u8d44\u91d1\u5f88\u53ef\u80fd\u4f1a\u4e22\u5931\u6216\u6350\u8d60\u7ed9\u6148\u5584\u673a\u6784\u3002\u8fd9\u4f7f\u6211\u4eec\u603b\u5171\u53ef\u4ee5\u82b1\u8d39 159.087 sat\u3002\u6211\u4eec\u5c06\u53e6\u5916\u4e24\u4e2a P2TR \u8f93\u51fa\uff08700 sat \u548c 1.324 sat\uff09\u7559\u7ed9\u5176\u4ed6\u4eba\u5728\u6fc0\u6d3b\u4e4b\u524d\u6216\u4e4b\u540e\u4f7f\u7528\u3002\n\u6211\u4eec\u7684\u4ea4\u6613\u5305\u542b\u4e24\u4e2a\u8f93\u51fa\u3002\u7b2c\u4e00\u4e2a\u8f93\u51fa\u5c06\u5168\u90e8\u8f93\u5165\u91cf 159.087 sat\uff08\u5728\u64b0\u5199\u672c\u6587\u65f6\u7ea6\u4e3a 50 \u7f8e\u5143\uff09\u6350\u8d60\u7ed9 brink.dev\uff0c\u4ee5\u652f\u6301\u5f00\u6e90\u6bd4\u7279\u5e01\u5f00\u53d1\u3002\u4ea4\u6613\u6545\u610f\u4e0d\u652f\u4ed8\u77ff\u5de5\u8d39\u4ee5\u6700\u5927\u5316\u6350\u8d60\u91d1\u989d\u3002\u7b2c\u4e8c\u4e2a\u8f93\u51fa\u662f\u4e00\u4e2a OP_RETURN \u8f93\u51fa\uff0c\u5e26\u6709\u6307\u5411\u6b64\u535a\u5ba2\u6587\u7ae0\u7684\u94fe\u63a5\u3002\u8fd9\u4f7f\u5f97\u627e\u5230\u4efb\u4f55\u4eba\u90fd\u53ef\u4ee5\u82b1\u8d39\u7684\u4ea4\u6613\u7684\u4eba\u6709\u53ef\u80fd\u66f4\u591a\u5730\u4e86\u89e3\u4e3a\u4ec0\u4e48\u5728 Taproot \u6fc0\u6d3b\u4e4b\u524d P2TR \u8f93\u51fa\u662f\u53ef\u4ee5\u82b1\u8d39\u7684\u3002 { \u201cTxID\u6dfb\u52a0\u201d\uff1a \u201cb10c007c60e14f9d087e0291d4d0c7869697c6681d979c6639dbd960792b4d41\u201d\uff0c \u201c\u6563\u5217\u201d\uff1a \u201cb10c007c60e14f9d087e0291d4d0c7869697c6681d979c6639dbd960792b4d41\u201d\uff0c \u201c\u7248\u672c\u201d\uff1a1\uff0c \u201c\u5927\u5c0f\u201d\uff1a234\uff0c \u201cVSIZE\u201d\uff1a234\uff0c \u201c\u91cd\u91cf\u201d\uff1a936\uff0c \u201cLOCKTIME\u201d\uff1a45324\uff0c \u201cVIN\u201d : [ { &quot;txid&quot; : &quot;b53e3bc5edbb41b34a963ecf67eb045266cf841cab73a780940ce6845377f141&quot;, &quot;vout&quot; : 0, &quot;scriptSig&quot; : { &quot;asm,&quot; 7&quot;, &quot;16&quot;, &quot;16&quot;, &quot;7&quot;, &quot;4 b48a59fa9e036e997ba733904f631b1a64f5274be646698e49fd542141ca9404&quot; \uff0c \u201cVOUT\u201d\uff1a0 \u201cscriptSig\u201d\uff1a{ \u201cASM\u201d\uff1a \u201c\u201d\uff0c \u201c\u516d\u89d2\u201d\uff1a \u201c\u201d}\uff0c \u201c\u5e8f\u5217\u201d\uff1a45324}\uff0c{ \u201cTxID\u6dfb\u52a0\u201d\uff1a \u201c7641c08f4bd299abfef26dcc6b477938f4a6c2eed2f224d1f5c1c86b4e09739d\u201d\uff0c \u201cVOUT\u201d\uff1a1 , &quot;scriptSig&quot; : { &quot;asm&quot; : &quot;&quot; , &quot;hex&quot; : &quot;&quot; }, &quot;sequence&quot; : 45324 }, { &quot;txid&quot; : &quot;fd43650477e0ba6825ae0482a8b0b2b509d5443fa2a87127s&quot;{ig2a87271ds&quot;,scripta87s, dd0as &quot;, sig2a87271d&quot; &quot; : &quot;&quot; , &quot;hex&quot; : &quot;&quot; }, &quot;sequence&quot; : 45324 }], &quot;vout&quot; : [ { &quot;value&quot; : 0.00159087, &quot;n&quot; : 0, &quot;scriptPubKey&quot; : { &quot;asm&quot; : &quot;OP_HASH160 fb94f9a556bae3f98f44186e1c caa4f5ff6a3187 OP_EQUAL\u201d\uff0c \u201c\u516d\u89d2\u201d\uff1a \u201ca914fb94f9a556bae3f98f44186e1ccaa4f5ff6a318787\u201d\uff0c \u201creqSigs\u201d\uff1a1\uff0c \u201c\u7c7b\u578b\u201d\uff1a \u201cscripthash\u201d\uff0c \u201c\u5730\u5740\u201d\uff1a[ \u201c3QdFzfpU3u92GeRN4U5pLLezbBaHbj2ppr\u201d]}}\uff0c{ \u201c\u503c\u201d\uff1a0.00000000\u4e2d\uff0c \u201cn\u201d\uff1a1 \u201cscriptPubKey\u201d\uff1a{ \u201cASM\u201d\uff1a \u201cOP_RETURN 68747470733a2f2f623130632e6d652f37\u201d\uff0c \u201c\u516d\u89d2\u201d\uff1a \u201c6a1168747470733a2f2f623130632e6d652f37\u201d\uff0c \u201c\u7c7b\u578b\u201d\uff1a \u201cnulldata\u201d}}]}\u5f53\u5728\u5757709632\u76f4\u6839\u6fc0\u6d3b\uff0c\u6bd4\u7279\u5e01\u6838\u5fc3v0.21.1\u548cnewerwill\u5f00\u59cb\u6267\u884c\u4e3b\u6839\u89c4\u5219\u3002\u53ea\u6709\u901a\u8fc7\u4e3a\u5bc6\u94a5\u8def\u5f84\u82b1\u8d39\u63d0\u4f9b\u6709\u6548\u7b7e\u540d\u6216\u6ee1\u8db3\u811a\u672c\u8def\u5f84\u82b1\u8d39\u7684\u811a\u672c\u8981\u6c42\uff0c\u624d\u6709\u53ef\u80fd\u82b1\u8d39 P2TR\u3002\u4f46\u662f\uff0c\u4e0d\u77e5\u9053\u4e3b\u6839\u8f6f\u5206\u53c9\u7684\u65e7\u8282\u70b9\u5c06\u7ee7\u7eed\u5c06 P2TR \u82b1\u8d39\u89c6\u4e3a\u4efb\u4f55\u4eba\u90fd\u53ef\u4ee5\u82b1\u8d39\u3002\u4f8b\u5982\uff0c\u5982\u679c\u77ff\u6c60\u5fd8\u8bb0\u5347\u7ea7\u5e76\u5305\u542b\u6765\u81ea P2TR \u8f93\u51fa\u7684\u4ea4\u6613\u652f\u51fa\uff0c\u800c\u6ca1\u6709\u6ee1\u8db3\u7f51\u7edc\u5f3a\u5236\u6267\u884c\u7684\u4e3b\u6839\u89c4\u5219\uff0c\u8fd9\u53ef\u80fd\u4f1a\u6210\u4e3a\u4e00\u4e2a\u95ee\u9898\u3002\u94fe\u5c06\u5728\u6267\u884c\u4e3b\u6839\u7684\u5347\u7ea7\u8282\u70b9\u548c\u672a\u5347\u7ea7\u8282\u70b9\u4e4b\u95f4\u5206\u88c2\u3002\u5efa\u8bae\u5728\u6fc0\u6d3b\u4e3b\u6839\u4e4b\u524d\u5347\u7ea7\u751f\u4ea7\u548c\u652f\u4ed8\u5904\u7406\u8282\u70b9\u3002\u6211\u8981\u611f\u8c22 f2pool.com \u7684\u5408\u4f5c\u3002\u5982\u679c\u6ca1\u6709\u4ed6\u4eec\u5728\u4e00\u4e2a\u533a\u5757\u4e2d\u5305\u542b\u975e\u6807\u51c6\u4ea4\u6613\uff0c\u5c06 P2TR \u8f93\u51fa\u6350\u8d60\u7ed9 brink.dev\uff0c\u5c06\u662f\u4e0d\u53ef\u80fd\u7684\u3002\u8fd9\u5141\u8bb8\u901a\u8fc7\u672a\u6765\u7684\u8f6f\u5206\u53c9\u5411\u5f53\u524d\u672a\u4f7f\u7528\u7684\u89c1\u8bc1\u7248\u672c\u5f15\u5165\u65b0\u89c4\u5219\u3002\u89c1\u8bc1\u7a0b\u5e8f\u9a8c\u8bc1\u5728\u4e0d\u77e5\u9053\u8f6f\u5206\u53c9\u7684\u8282\u70b9\u4e0a\u6210\u529f\u3002 \u21a9\ufe0e", "note_en": "While working on taproot support for  transactionfee.info, it became apparentthat there already exist a few  Pay-to-Taproot (P2TR) outputs on mainnet.Anyone can spend these outputs, but they are non-standard and thus not relayedbetween nodes in the Bitcoin peer-to-peer network. However, a mining pool caninclude non-standard transactions in their block.We cover the six P2TR outputs already present on mainnet and explainwhy the outputs can be spent by anyone before taproot activates. With the helpof the  f2pool.com mining pool, four P2TR outputs are donated to  brink.dev,a non-profit company focused on supporting open-source Bitcoin development.\n  Taproot is a softfork upgrade to the Bitcoin protocol and tightens theconsensus rules. A softfork forbids something that was previously allowedonce it activates. Taproot restricts how native SegWit outputs, with a witnessversion of 1 and a 32-byte witness program, can be spent. The spending rules forother witness versions, nested SegWit, and native SegWit outputs with a witnessversion of 1, but longer or shorter witness programs are unaffected.\n  While it is possible to create P2TR outputs before taproot activates, it is notrecommended to do so. Likewise,  wallets shouldn\u2019t generate P2TR addressesbefore activation. Nonetheless, at the time of writing, there are already sixP2TR outputs on Bitcoin mainnet.\n The first P2TR output was created on December 17, 2019, in a withdrawal transaction from purse.io. Matthew Zipkin initiated a withdrawalof 5431 sat to a witness version 1 bech32 address to test sending support forwitness version 1. He  added his test results to the  Bitcoin OptechCompatibility Matrix and provided a  screenshot showing the withdrawal on thepurse.io frontend. The public key encoded in the address is 010\u200b10101\u200b01010101\u200b010\u200b101010101010\u200b10\u200b10\u200b101010101\u200b0101010101\u200b0\u200b101010\u200b101, which islikely not generated from a private key. It is to be assumed that the privatekey to this public key is unknown, and the funds won\u2019t be spendable once taprootactivates.\n The  second P2TR output was created on January 28th, 2020. With a value of 700sat, it is close to the default SegWit dust threshold of 294 sat. The creator ofthis output is unknown.\n The third, fourth, and fifth P2TR outputs are test outputs created whilechecking send support to a witness v1 bech32 addresses that Pieter Wuille posted to the bitcoin-dev mailing list on October 19th, 2020.The  third P2TR output has a value of 3656 sat and was created by Riccardo Casatta using the Blockstream Aqua wallet. The  fourth P2TR outputwith a value of 50.000 sat was likely created by  Mike Schmidt using theBRD wallet. It\u2019s unknown who created the  fifth P2TR outputwith a value of 100.000 sat.\n The  sixth P2TR output, with a value of 1324 sat, was created on July7th, 2021. It is the only P2TR output created after taproot locked in onJune 13th, 2021. The other P2TR outputs were created while it was still unclearwhen or if taproot would activate.\n  Before taproot activates, these six P2TR outputs can be spent by anyone. Hoever,none of these P2TR outputs have been spent yet, as the spending transaction iscurrently considered non-standard. Non-standard transactions aren\u2019t relayed onthe Bitcoin network. Bitcoin Core checks each input for standardness in the AreInputsStandard function before accepting a transaction to the mempool. Ifthe  spend UTXO is a P2TR output, the function currently returns  false,indicating that the transaction has non-standard inputs. Nodes don\u2019t accept thetransaction to their mempool and it is not relayed to peers.\n However, a non-standard transaction can still be valid when directly included ina block. Next to other checks, the transaction has to pass the scriptverification. Standardness is not checked. In Bitcoin Core, the   VerifyScriptfunction is responsible for script verification. The script verification fornative SegWit spends consists of two parts: the script evaluation and theverification of the witness program.\n During script evaluation, the  scriptSig is evaluated first. The resultingstack is used as the initial stack state when evaluating the  scriptPubKey fromthe UTXO referenced in the input. The script evaluation succeeds if it finisheswithout failing, the stack is not empty, and the top stack element casts to true (is not zero). When spending native SegWit outputs like, for example, P2TRoutputs, the  scriptSig is empty. The  scriptPubKey contains the witnessversion and the witness program. As the  scriptSig is empty, an empty stack isused for the  scriptPubKey evaluation. There, the witness version and witnessprogram are pushed onto the stack. The script evaluation finishes. As the stackisn\u2019t empty and the top stack element is the witness program (which usuallyisn\u2019t zero), the script evaluation will succeed. This behavior makes SegWit asoftfork. SegWit transactions are valid for nodes without SegWit support as thetop stack element is not empty.\n  A keypath P2TR spend that will be valid and standard once taproot activates.A anyone-can-spend P2TR spend will likely have an empty witness, but otherwiselook the same.\n As a next step, the witness program is verified if the witness version is known.If the witness version is unknown, the witness program  is treated as valid   1.One of the first checks during verification of version 1 witness programs (i.e.when spending P2TR outputs) is if the  SCRIPT_VERIFY_TAPROOT script verificationflag is set.  If unset, the verification succeeds before checking the witnessprogram. This flag is only set  when taproot is active. This causestaproot outputs to be anyone-can-spend before activation. The witness programisn\u2019t verified, and the witness can be left empty.\n  We demonstrate the spending of P2TR outputs before the taproot softfork activatesby constructing a non-standard transaction that is consensus valid. The miningpool  f2pool.com helps by including the non-standard transaction in a block.\n For our transaction, we pick the first, third, fourth, and fifth P2TR output outof the six available outputs discussed earlier. The first output with a value of5.431 sat will be unspendable upon taproot activation and would otherwise remainin the UTXO-set forever. The third (3.656 sat), fourth (50.000 sat), and fifth(100.000 sat) P2TR output were sent in test transactions with the knowledge thatthe funds will most likely be lost or donated to charity. This allows us tospend a total of 159.087 sat. We leave the other two P2TR outputs (700 sat and1.324 sat) for someone else to spend either before or after activation.\n Our transaction contains two outputs. The first output donates the full inputamount of 159.087 sat (about 50 USD at the time of writing) to  brink.dev tosupport open-source Bitcoin development. The transaction purposefully doesn\u2019tpay a miner fee to maximize the donation amount. The second output is anOP_RETURN output with a link to this blog post. This makes it possible forsomeone finding the anyone-can-spend transaction to learn more about why theP2TR outputs were spendable before Taproot activation.\n     {  &#34;txid&#34; :  &#34;b10c007c60e14f9d087e0291d4d0c7869697c6681d979c6639dbd960792b4d41&#34; ,  &#34;hash&#34; :  &#34;b10c007c60e14f9d087e0291d4d0c7869697c6681d979c6639dbd960792b4d41&#34; ,  &#34;version&#34; :  1 ,  &#34;size&#34; :  234 ,  &#34;vsize&#34; :  234 ,  &#34;weight&#34; :  936 ,  &#34;locktime&#34; :  45324 ,  &#34;vin&#34; :  [  {  &#34;txid&#34; :  &#34;b53e3bc5edbb41b34a963ecf67eb045266cf841cab73a780940ce6845377f141&#34; ,  &#34;vout&#34; :  0 ,  &#34;scriptSig&#34; :  {  &#34;asm&#34; :  &#34;&#34; ,  &#34;hex&#34; :  &#34;&#34;  },  &#34;sequence&#34; :  6817749  },  {  &#34;txid&#34; :  &#34;b48a59fa9e036e997ba733904f631b1a64f5274be646698e49fd542141ca9404&#34; ,  &#34;vout&#34; :  0 ,  &#34;scriptSig&#34; :  {  &#34;asm&#34; :  &#34;&#34; ,  &#34;hex&#34; :  &#34;&#34;  },  &#34;sequence&#34; :  45324  },  {  &#34;txid&#34; :  &#34;7641c08f4bd299abfef26dcc6b477938f4a6c2eed2f224d1f5c1c86b4e09739d&#34; ,  &#34;vout&#34; :  1 ,  &#34;scriptSig&#34; :  {  &#34;asm&#34; :  &#34;&#34; ,  &#34;hex&#34; :  &#34;&#34;  },  &#34;sequence&#34; :  45324  },  {  &#34;txid&#34; :  &#34;fd43650477e0ba6825ae0482a8b0b2b509d5443fa2a8cdd101872752a9171dd6&#34; ,  &#34;vout&#34; :  1 ,  &#34;scriptSig&#34; :  {  &#34;asm&#34; :  &#34;&#34; ,  &#34;hex&#34; :  &#34;&#34;  },  &#34;sequence&#34; :  45324  }  ],  &#34;vout&#34; :  [  {  &#34;value&#34; :  0.00159087 ,  &#34;n&#34; :  0 ,  &#34;scriptPubKey&#34; :  {  &#34;asm&#34; :  &#34;OP_HASH160 fb94f9a556bae3f98f44186e1ccaa4f5ff6a3187 OP_EQUAL&#34; ,  &#34;hex&#34; :  &#34;a914fb94f9a556bae3f98f44186e1ccaa4f5ff6a318787&#34; ,  &#34;reqSigs&#34; :  1 ,  &#34;type&#34; :  &#34;scripthash&#34; ,  &#34;addresses&#34; :  [  &#34;3QdFzfpU3u92GeRN4U5pLLezbBaHbj2ppr&#34;  ]  }  },  {  &#34;value&#34; :  0.00000000 ,  &#34;n&#34; :  1 ,  &#34;scriptPubKey&#34; :  {  &#34;asm&#34; :  &#34;OP_RETURN 68747470733a2f2f623130632e6d652f37&#34; ,  &#34;hex&#34; :  &#34;6a1168747470733a2f2f623130632e6d652f37&#34; ,  &#34;type&#34; :  &#34;nulldata&#34;  }  }  ] }\n     When taproot activates on block 709632, Bitcoin Core v0.21.1 and newerwill start enforcing the taproot rules. Spending P2TR will only be possibleby supplying a valid signature for the keypath spend or a by satisfying thescript requirements for a scriptpath spend. However, older nodes thatdon\u2019t know about the taproot softfork will continue to treat the P2TR spends asanyone-can-spend. This can become a problem if, for example, a mining poolforgets to upgrade and includes a transaction spending from a P2TR outputwithout satisfying the taproot rules enforced by the network. The chain wouldsplit between upgraded nodes enforcing taproot and not upgraded nodes.It is recommended to upgrade production and payment handling nodes beforetaproot activates.\n I like to thank  f2pool.com for their cooperation. Without them includingthe non-standard transaction in a block, donating the P2TR outputs to brink.dev, wouldn\u2019t have been possible.\n This allows introducing of new rules to currently unused witness versionsvia a future softforks. The witness program verification succeeds at nodesunaware of the softfork.  \u21a9\ufe0e", "posttime": "2021-07-24 07:17:01", "source_domain": "news.ycombinator.com", "source_name": "Hacker News", "tags": "pay,\u8f93\u51fa", "title": "\u6fc0\u6d3b\u524d\u4efb\u4f55\u4eba\u90fd\u53ef\u4ee5\u4f7f\u7528 Pay-to-Taproot \u8f93\u51fa", "title_en": "On anyone-can-spend Pay-to-Taproot outputs before activation", "transed": 1, "url": "https://b10c.me/blog/007-spending-p2tr-pre-activation/", "via": "", "real_tags": ["pay", "\u8f93\u51fa"]}]