<!doctype html><html lang="zh-hans"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>使用NVMe引导驱动器升级Raspberry Pi 4Upgrade Raspberry Pi 4 with a NVMe boot drive</title><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"><link rel="stylesheet" href="/img/css.css?random="><link data-rh="true" rel="icon" href="/img/favicon.ico"/><script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?03c1a0f31299b4a2fbb83c34d6beaac9";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script><script data-ad-client="ca-pub-6067137220025946" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script type="text/javascript" src="https://platform-api.sharethis.com/js/sharethis.js#property=5effb96910009800120b8d4d&product=inline-share-buttons" async="async"></script></head><body><div id="my_header"><div class="container"><nav class="navbar navbar-expand-lg"><a class="navbar-brand" href="/"><img alt="diglog" src="/img/logo.v1.gif" class="rounded-sm"></a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarNavAltMarkup"><div class="navbar-nav"></div></div></nav></div></div><div class="container"><div id="my_content"><h1 class="page_narrow">Upgrade Raspberry Pi 4 with a NVMe boot drive<br/>使用NVMe引导驱动器升级Raspberry Pi 4</h1><div class="row"><div class="col-lg-12 col-12"><div class="my_story_list_item shadow p-3 mb-5 bg-white rounded"><div class="story_page_pub_time page_narrow">2020-11-24 05:29:58</div><div class="story_img_container"><a href="http://img2.diglog.com/img/2020/11/7618e40c4cf11e5c9343821524894045.jpeg"><img src="http://img2.diglog.com/img/2020/11/7618e40c4cf11e5c9343821524894045.jpeg" class="img-fluid my_story_img" onerror="this.style.display='none'"></a></div><div class="page_narrow text-break page_content"><p>You can upgrade the storage in your Raspberry Pi 4 with an  NVMe drive. These drives usually plug into a PCIe lane which gives them a potential throughput of over 3000M/s for read and write access.</p><p>您可以使用NVMe驱动器升级Raspberry Pi 4中的存储。这些驱动器通常插入PCIe通道，从而使它们具有潜在的超过3000M / s的吞吐量，可进行读写访问。</p><p> Yes I can hear you shouting already from Hacker News, Twitter and Reddit, so before we get into the tutorial, let’s start off with a disclaimer:</p><p> 是的，我听说您已经受到Hacker News，Twitter和Reddit的大喊，所以在进入教程之前，我们先声明免责声明：</p><p> The Raspberry Pi4 itself will not be a  ble to achieve its full potential with the NVMe, but it will have two advantages over your SD card — reliability and sheer speed. Buying an NVMe and its associated adapter isn’t much more expensive than an older M2 drive, and you will now have that in your parts box if you need to repurpose it later (see my note on the CM4).</p><p> Raspberry Pi4本身无法充分发挥NVMe的潜能，但与SD卡相比，它将具有两个优势-可靠性和绝对的速度。购买NVMe及其关联的适配器并不比旧的M2驱动器贵很多，现在，如果您以后需要重新调整用途，现在可以将其放在零件盒中（请参阅CM4上的说明）。</p><p> If you have an external USB SSD or M2 drive you can also follow this tutorial.</p><p> 如果您具有外部USB SSD或M2驱动器，则也可以按照本教程进行操作。</p><p>  Raspberry Pi 4–in my case I’m using a model with  8GB RAM</p><p>  Raspberry Pi 4 –就我而言，我使用的是具有8GB RAM的模型</p><p>    USB NVMe adapter — make sure that you get a USB3 model, otherwise you will be constrained to slower speeds</p><p>    USB NVMe适配器—确保您获得USB3型号，否则将被限制为速度较慢</p><p> NVMe drive — an M.2 SSD looks almost identical, but has two notches instead of one. Generally an SSD will perform to the tune of hundreds of MB/s instead of thousands.</p><p> NVMe驱动器—一个M.2 SSD看上去几乎相同，但是有两个槽口而不是一个。通常，SSD的性能可达数百MB / s，而不是数千。</p><p>  Carefully insert your NVMe drive into the caddy, and connect it to your PC to see if it shows up as expected.</p><p>小心地将NVMe驱动器插入盒式计算机，然后将其连接到PC，以查看其是否按预期显示。</p><p>  The Samsung EVO 970 Plus is faster than the WD blue drive, but also worked out about 40–50 GBP more expensive. Since our RPi’s USB3 bus will limit the speeds, we don’t need to go too crazy on our spend.</p><p>  三星EVO 970 Plus比WD蓝色驱动器快，但价格却贵了40–50英镑。由于我们的RPi的USB3总线会限制速度，因此我们不必为花费而疯狂。</p><p>    This tutorial “should also work”(tm) for Ubuntu 20.04, but if you run into issues  try this tutorial I found on Google.</p><p>    对于Ubuntu 20.04，本教程“也应该工作”（tm），但是如果遇到问题，请尝试在Google上找到的本教程。</p><p> Flash the OS to an SD card, create a boot.txt file in the first partition and then plug in your RPi and boot it up.</p><p> 将操作系统刷新到SD卡，在第一个分区中创建boot.txt文件，然后插入RPi并启动它。</p><p>        You will see the follow text. This sets the order to start with the SD card, and then to try a USB device if booting fails.</p><p>        您将看到以下文本。这样可以设置从SD卡开始的顺序，如果引导失败，则尝试USB设备的顺序。</p><p> Whilst there, why not go to Performance Options -&gt; GPU Memory and change it from 16MB to 64MB. This gives you a little more RAM back, if you don’t use the RPi for UI.</p><p> 在那里，为什么不转到性能选项-> GPU内存并将其从16MB更改为64MB。如果您不使用RPi for UI，这将为您提供更多的RAM。</p><p>   On the machine you used to flash the SD card, or on another Raspberry Pi attach the NVMe over USB and the SD card via the SD card writer. I use a dedicated Intel NUC for this purpose with Linux installed.</p><p>   在用来刷新SD卡的机器上，或在另一台Raspberry Pi上，通过SD卡写入器通过USB和SD卡连接NVMe。为此，我使用专用的Intel NUC并安装了Linux。</p><p>  alex@nuc7:~$ lsblk NAME MAJ:MIN RM SIZE RO TYPE MOUNTPOINT sdb 8:16 1 29.7G 0 disk ├─sdb1 8:17 1 256M 0 part └─sdb2 8:18 1 29.5G 0 part sdc 8:32 0 465.8G 0 disk ├─sdc1 8:33 0 256M 0 part └─sdc2 8:34 0 29.5G 0 part</p><p>alex @ nuc7：〜$ lsblk名称MAJ：MIN RM大小RO类型MOUNTPOINT sdb 8:16 1 29.7G 0磁盘├─sdb18:17 1 256M 0部分└─sdb28:18 1 29.5G 0部分sdc 8:32 0 465.8G 0磁盘├─sdc18:33 0 256M 0部分└─sdc28:34 0 29.5G 0部分</p><p> Now mirror the SD card to the NVMe, but be really careful with the device names. You don’t want to overwrite your OS on the machine you’re using to do the mirroring operation.</p><p> 现在，将SD卡镜像到NVMe，但要特别注意设备名称。您不想在用于执行镜像操作的计算机上覆盖操作系统。</p><p>  Take out the SD card and power up without the SD card and try to connect:</p><p>  取出SD卡并在没有SD卡的情况下开机，然后尝试连接：</p><p>       pi@raspberrypi: ~ $ dd if=/dev/zero of=test bs=1048576 count=500 500+0 records in 500+0 records out 524288000 bytes (524 MB, 500 MiB) copied, 2.63385 s, 199 MB/s  pi@raspberrypi: ~ $</p><p>       pi @ raspberrypi：〜$ dd if = / dev / zero of = test bs = 1048576 count = 500 500 + 0条记录在500 + 0条记录中被复制出524288000字节（524 MB，500 MiB），2.63385 s，199 MB / s pi @ raspberrypi：〜$</p><p> Now when you compare this to a  Samsung EVO 970 Plus in my Hex-core Intel NUC, the difference is night and day.</p><p> 现在，当您将其与我的Hex核心Intel NUC中的Samsung EVO 970 Plus进行比较时，白天和黑夜的区别就很大。</p><p>  When you look at the buffered disk reads, clearly the RPi’s USB3 port is holding back the drive:</p><p>  当您查看缓冲的磁盘读取时，很明显RPi的USB3端口正在阻碍驱动器：</p><p>  Interestingly, the SD card gave a seemingly better buffered disk read than the M2 SSD at 43.35 MB/sec.</p><p>  有趣的是，SD卡以43.35 MB /秒的速度提供了比M2 SSD更好的缓冲磁盘读取。</p><p> Fear not, when the CM4 becomes widely available with nice dev boards, it has a single PCIe channel it so could attach the NVMe natively.</p><p>不用担心，当CM4在具有不错的开发板的情况下广泛可用时，它只有一个PCIe通道，因此可以本地连接NVMe。</p><p>    It’s now over to you to enjoy your new more reliable and speedier storage.</p><p>    现在，您可以享用更可靠，更快的新型存储了。</p><p> Are you thinking of putting your Raspberry Pi on the Internet, or wanting a way to access it remotely? Checkout  the inlets project for an open source tunnel.</p><p> 您是否正在考虑将Raspberry Pi放置在Internet上，或者想要一种远程访问它的方法？检入入口项目中的开放源代码隧道。</p><p> Perhaps you’d like to play around with some cool tech like Kubernetes or  OpenFaaS?</p><p> 也许您想玩一些酷技术，例如Kubernetes或OpenFaaS？</p><p>  Build a Kubernetes cluster with a single node, or multiple hosts. Learn to manage containers and monitor your systems.</p><p>  使用单个节点或多个主机构建Kubernetes集群。学习管理容器和监视系统。</p><p>  Build and deploy containers with metrics, queueing and a UI built-in. No Kubernetes or Docker is required for this and it can run on a single host.</p><p>  使用指标，排队和内置UI构建和部署容器。不需要Kubernetes或Docker，它可以在单个主机上运行。</p></div><div id="story_share_this"><div class="sharethis-inline-share-buttons"></div></div><div class="text-break sotry_link page_narrow"><a target="_blank" href="https://alexellisuk.medium.com/upgrade-your-raspberry-pi-4-with-a-nvme-boot-drive-d9ab4e8aa3c2">https://alexellisuk.medium.com/upgrade-your-raspberry-pi-4-with-a-nvme-boot-drive-d9ab4e8aa3c2</a></div><div class="story_tags page_narrow"><button type="button" class="btn btn-light my_tag"><a href="/tag/nvme/">#nvme</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/raspberry/">#raspberry</a></button></div></div><div class="my_movie_list_item shadow p-3 mb-5 bg-white rounded"><button type="button" class="btn btn-link my_tag"><a href="/tag/web2.0/">#web2.0</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/google/">#google</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/设计/">#设计</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/创意/">#创意</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/摄影/">#摄影</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/图片/">#图片</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/游戏/">#游戏</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/软件/">#软件</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/视频/">#视频</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/手机/">#手机</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/广告/">#广告</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/iphone/">#iphone</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/网站/">#网站</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/免费/">#免费</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/下载/">#下载</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/windows/">#windows</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/苹果/">#苹果</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/微软/">#微软</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/apple/">#apple</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/blog/">#blog</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/firefox/">#firefox</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/音乐/">#音乐</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/博客/">#博客</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/wordpress/">#wordpress</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/恶搞/">#恶搞</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/艺术/">#艺术</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/qq/">#qq</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/web/">#web</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/工具/">#工具</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/分享/">#分享</a></button></div></div></div><div id="my_footer"><div class=""><a href="/tags/">tags</a> <a href="/users/">users</a></div>&copy; 2020 diglog.com </div></div></body></html>