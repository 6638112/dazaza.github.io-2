<!doctype html><html lang="zh-hans"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>7年的开源数据库开发：学习的经验教训 7 years of open-source database development: lessons learned</title><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"><link rel="stylesheet" href="/img/css.css?random="><link data-rh="true" rel="icon" href="/img/favicon.ico"/><script data-ad-client="ca-pub-6067137220025946" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script type="text/javascript" src="https://platform-api.sharethis.com/js/sharethis.js#property=5effb96910009800120b8d4d&product=inline-share-buttons" async="async"></script>
<script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?03c1a0f31299b4a2fbb83c34d6beaac9";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script></head><body><div id="my_header"><div class="container"><nav class="navbar navbar-expand-lg"><a class="navbar-brand" href="/"><img alt="diglog" src="/img/logo.v1.gif" class="rounded-sm"></a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarNavAltMarkup"><div class="navbar-nav"></div></div></nav></div></div><div class="container"><div id="my_content"><h1 class="page_narrow">7 years of open-source database development: lessons learned<br/>7年的开源数据库开发：学习的经验教训 </h1><div class="row"><div class="col-lg-12 col-12"><div class="my_story_list_item shadow p-3 mb-5 bg-white rounded"><div class="story_page_pub_time page_narrow">2021-04-17 14:09:16</div><div class="story_img_container"><a href="http://img2.diglog.com/img/2021/4/49491ed02b96c94ddd496b551fdddfd5.png"><img src="http://img2.diglog.com/img/2021/4/49491ed02b96c94ddd496b551fdddfd5.png" class="img-fluid my_story_img" onerror="this.style.display='none'"></a></div><div class="page_narrow text-break page_content"><p>It was April 9th 2016, and I tagged  my first official release of  rqlite — two years after I actually started coding it. Since then there has been  58 releases,  277 closed issues,  416 closed pull requests, 32,785 insertions, 1954 deletions, and 100 files have changed.</p><p>这是2016年4月9日，我标记了我的第一次官方发布了RQLite  - 两年后我实际开​​始编码它。从那时起，已有58个发布，277个已关闭问题，416个关闭拉拔请求，32,785个插入，1954年删除和100个文件已更改。</p><p>   rqlite is a lightweight, open-source, distributed relational database written in  Go, with  SQLite as its storage engine. I  started it for fun, but it’s since become something much more serious. So what have I learned about open-source database development these past 7 years?</p><p>   RQLITE是一种轻量级，开源分布式的分布式关系数据库，具有SQLite作为其存储引擎。我开始了它的乐趣，但是因为它变得更加严重。那么在过去7年中，我如何了解开源数据库开发？</p><p>  Once I tried to rewrite the  HTTP serving layer  and replace the  Raft consensus subsystem.  At the same time.</p><p>  一旦我尝试重写HTTP服务层并替换RAFT共识子系统。同时。</p><p> It was too much, and I abandoned the work. That development effort cost me many weeks before I realised it wasn’t going to work. I learned a valuable lesson — keep your changes as small as possible, and focus on one feature at a time. Push out releases as regularly as you can, and be wary of large rewrites.</p><p> 它太多了，我抛弃了这项工作。在我意识到它不会上班之前，发展努力让我花了很多时间。我学习了一个有价值的教训 - 保持尽可能小的变化，并一次关注一个特征。正常推出释放释放，并谨慎大写大写。</p><p>  I’ve added some of the most important features in a single weekend. The best times have often been a single, high-intensity weekend where I could see the shape of the new system in my mind before I wrote a single line of code. I once completely rewrote the API in a weekend, and it resulted in rqlite version 2.0 — and it was way better. Then months would go by when I would do nothing. That is  still been the pattern to this day.</p><p>  我在一个周末添加了一些最重要的功能。最好的时间经常是单身，高强度的周末，在我写一行代码之前，我可以在我的脑海中看到新系统的形状。我曾经在一个周末完全重写了API，它导致RQLite版本2.0  - 它的方式更好。然后，几个月会在我什么都不做的时候。这仍然是这一天的模式。</p><p> Another weekend I migrated the Raft log to  Protobuf encoding and compression —  and it all just worked beautifully. I often wonder how much progress I could have made if I worked solidly on the database for a year.</p><p> 另一个周末我将筏日志迁移到protobuf编码和压缩 - 它一切都刚刚精美地工作。如果我在数据库稳固地在数据库上运行一年，我常常想知道我能做多少进展。</p><p>  I’m convinced that it’s the test coverage that has keep the quality of the database high. I’ve received reports from users that rqlite instances have run for more than a year without ever needing to be restarted.</p><p>  我相信它是测试覆盖率，使数据库的质量很高。我收到了来自用户RQLite实例已运行超过一年的报告，而不需要重新启动。 </p><p> I adhere pretty closely to the  testing pyramid philosophy. Write your test cases as close as possible to the actual code — it makes a world of difference.  Do not ignore test failures. Unit tests don’t fail for magical reasons — they are telling you that you don’t fully understand what you’ve built.</p><p>我密切坚持测试金字塔哲学。将您的测试用例写入尽可能接近实际代码 - 它使其成为一个差异世界。不要忽略测试失败。单位测试不会出于神奇原因失败 - 他们告诉您您并不完全明白您构建的内容。</p><p> Keep  your integration testing for smoke tests — to make sure your database actually starts and that you haven’t missed anything basic. But unit testing is key. Without excellent coverage at the unit test level your software will never be high quality.</p><p> 保持您对烟雾测试的集成测试 - 确保您的数据库实际上开始，并且您尚未错过任何基本。但单元测试是关键。在单元测试级别的情况下，您的软件将永远不会高品质。</p><p>  I’ve always been impressed with  Go — it’s long been my favourite programming language. And it’s  made me productive. After almost 7 years I still enjoy it, and even when months pass before I return to rqlite development, I find I haven’t forgotten my Go usage style and patterns.</p><p>  我一直印象深刻 - 这是我最喜欢的编程语言。它让我富有成效。在近7年后，我仍然喜欢它，即使在返回RQLite开发之前几个月通过，我发现我没有忘记我的使用风格和模式。</p><p>  I write my database for the challenge — can I create an interesting system, that maintains a clean design and coherent implementation? And remains high quality? I think I can. But it’s also gratifying when people use it.</p><p>  我为挑战写下我的数据库 - 我可以创建一个有趣的系统，维护干净的设计和连贯的实施吗？仍然高品质？我觉得我可以。但是当人们使用它时也很令人欣慰。</p><p> But publicity is hard. It’s taken 7 years to gain  8,000 Stars on GitHub. Is this good? I don’t know. Should I care? I don’t know that either.</p><p> 但宣传很难。它需要7年的时间来获得GitHub上的8,000颗星。这个好吗？我不知道。我应该关心吗？我也不知道。</p><p>  I manage programmers  for a living. It’s an fascinating job, but it’s not the same as doing the coding yourself.  Programming as a team activity requires agreeing on coding style, bug resolution policies,  code reviews, and feature prioritization.</p><p>  我管理程序员的生活。这是一个迷人的工作，但它与自己做的编码不同。作为团队活动的编程需要同意编码样式，错误解决策略，代码审查和特征优先级。</p><p> So working on your own project is liberating. You decide on the coding style. You decide on the features. You decide which bugs to fix. It also reminds you why crossing into the world of multiple developers slows progress. Nothing beats the single mind, the single vision.</p><p> 因此，在自己的项目上工作正在解放。你决定编码样式。你决定了这些功能。您决定修复哪些错误。它还提醒你为什么穿越多个开发人员的世界就会减慢进展。没有什么能击败单一的思想，单一的愿景。 </p><p>  rqlite has existed for 7 years, and there is still so much to do. Transactions,  client libraries, proper  Kubernetes support, performance — the appeal of software is that it’s eminently extensible, and can always be improved. I’m pretty certain it’ll never get to a place where I will say “it’s done”.</p><p>RQLite已经存在7年，仍然有很多事情要做。 事务，客户端库，适当的Kubernetes支持，性能 - 软件的吸引力是它是可观的，并且可以始终得到改善。 我很确定它永远不会到达一个我会说“它已经完成的地方”。 </p></div><div id="story_share_this"><div class="sharethis-inline-share-buttons"></div></div><div class="text-break sotry_link page_narrow"><a target="_blank" href="https://www.philipotoole.com/7-years-of-open-source-database-development-lessons-learned/">https://www.philipotoole.com/7-years-of-open-source-database-development-lessons-learned/</a></div><div class="story_tags page_narrow"><button type="button" class="btn btn-light my_tag"><a href="/tag/database/">#database</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/开发/">#开发</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/开源/">#开源</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/数据库/">#数据库</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/open/">#open</a></button></div></div><div class="my_movie_list_item shadow p-3 mb-5 bg-white rounded"><button type="button" class="btn btn-link my_tag"><a href="/tag/web2.0/">#web2.0</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/google/">#google</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/设计/">#设计</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/创意/">#创意</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/摄影/">#摄影</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/图片/">#图片</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/游戏/">#游戏</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/软件/">#软件</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/视频/">#视频</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/广告/">#广告</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/手机/">#手机</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/iphone/">#iphone</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/网站/">#网站</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/apple/">#apple</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/免费/">#免费</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/下载/">#下载</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/windows/">#windows</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/微软/">#微软</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/firefox/">#firefox</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/blog/">#blog</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/苹果/">#苹果</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/音乐/">#音乐</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/博客/">#博客</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/wordpress/">#wordpress</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/恶搞/">#恶搞</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/qq/">#qq</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/艺术/">#艺术</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/web/">#web</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/工具/">#工具</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/分享/">#分享</a></button></div></div></div><div id="my_footer"><div class=""><a href="/tags/">tags</a> <a href="/users/">users</a></div>&copy;2012-2021 diglog.com </div></div></body></html>