<!doctype html><html lang="zh-hans"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Terraform中的分层子网计算器 Tiered Subnet Calculator in Terraform</title><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"><link rel="stylesheet" href="/img/css.css?random="><link data-rh="true" rel="icon" href="/img/favicon.ico"/><script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?03c1a0f31299b4a2fbb83c34d6beaac9";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script><script data-ad-client="ca-pub-6067137220025946" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script type="text/javascript" src="https://platform-api.sharethis.com/js/sharethis.js#property=5effb96910009800120b8d4d&product=inline-share-buttons" async="async"></script></head><body><div id="my_header"><div class="container"><nav class="navbar navbar-expand-lg"><a class="navbar-brand" href="/"><img alt="diglog" src="/img/logo.v1.gif" class="rounded-sm"></a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarNavAltMarkup"><div class="navbar-nav"></div></div></nav></div></div><div class="container"><div id="my_content"><h1 class="page_narrow">Tiered Subnet Calculator in Terraform<br/>Terraform中的分层子网计算器 </h1><div class="row"><div class="col-lg-12 col-12"><div class="my_story_list_item shadow p-3 mb-5 bg-white rounded"><div class="story_page_pub_time page_narrow">2020-12-13 04:33:15</div><div class="page_narrow text-break page_content"><p>I’ve been thinking about adding support for building tiered subnets of any sizefor the next iteration of the  Dynamic VPC Module.It occurred to me that auto subnet generation inside the module actuallymakes the subnetting less dynamic.</p><p>我一直在考虑为动态VPC模块的下一次迭代增加对构建任何大小的分层子网的支持。在我看来，模块内部的自动子网生成实际上使子网的动态性降低。</p><p> Furthermore, auto subnet calculation should be in assistance tothe process of allocating subnets and should not be fed directly as inputto the VPC module. This is due to the fact that order matters only for thesubnetting. So when tiers or AZs are changed, added or removed,the calculation will shift for none, some or all tiers.</p><p> 此外，自动子网计算应有助于子网的分配过程，并且不应直接作为VPC模块的输入。这是因为订单仅对子网有效。因此，当更改，添加或删除层或可用区时，将针对无，部分或全部层进行计算。</p><p> Removing the subnet generation will simplify the module itself and it will reinforcethe notion that engineers should know their subnetting when architecting networks.With all that in mind, I made  Tiered Subnet Calculator module to help with allocating subnets per AZ per network tier.</p><p> 删除子网生成将简化模块本身，并强化工程师在构建网络时应了解其子网的概念。考虑到所有这些，我制作了分层子网计算器模块，以帮助为每个网络层的每个可用区分配子网。</p><p>  base_cidr_block = &#34;10.0.0.0/16&#34;tiers = [ { name = &#34;app&#34; acl = &#34;public&#34; newbit = 4 }, { name = &#34;db&#34; acl = &#34;private&#34; newbit = 4 }, { name = &#34;worker&#34; acl = &#34;private&#34; newbit = 4 }, { name = &#34;lbs&#34; acl = &#34;public&#34; newbit = 4 }]az_newbits = { a = 4 b = 4 c = 4 d = 4}</p><p>  base_cidr_block =＆＃34; 10.0.0.0/16&#34; tiers = [{name =＆＃34; app＆＃34; acl =＆＃34; public＆＃34; newbit = 4}，{name =＆＃34; db＆＃34; acl =＆＃34;私有＆＃34; newbit = 4}，{name =＆＃34; worker＆＃34; acl =＆＃34;私有＆＃34; newbit = 4}，{name =＆＃34; lbs＆＃34; acl =＆＃34; public＆＃34; newbit = 4}] az_newbits = {a = 4 b = 4 c = 4 d = 4}</p><p>  variable &#34;base_cidr_block&#34; { type = string}variable &#34;tiers&#34; { type = set(object({ name = string acl = string newbit = number }))}variable &#34;az_newbits&#34; { type = map(number)}</p><p>  变量＆＃34; base_cidr_block＆＃34; {type = string}变量＆＃34; tiers＆＃34; {type = set（object（{name = string acl = string newbit = number}））}变量＆＃34; az_newbits＆＃34; {type = map（number）}</p><p>  locals { # generate top level networks for each tier based on tier newbit + base_cidr_block mask ie /4 + /16 = /20 tier_networks = zipmap(var.tiers[*].name, cidrsubnets(var.base_cidr_block, var.tiers[*].newbit...)) # generate a subnet based on each az newbit (in azs_new_bits map) per tier network ie /4 + /20 = /24 tier_subnets = { for t, n in local.tier_networks : t =&gt; cidrsubnets(n, values(var.az_newbits)...) } # generate azs to subnet map per tier tier_az_subnets = { for t, s in local.tier_subnets : t =&gt; zipmap(keys(var.az_newbits), s) } # build new tiers list with their associated network and az to subnets map tiers_with_subnets_per_az = [ for t in var.tiers : { name = t.name, acl = t.acl, network = lookup(local.tier_networks, t.name) azs = lookup(local.tier_az_subnets, t.name), }]}output &#34;calculated_tiers&#34; { value = local.tiers_with_subnets_per_az}</p><p>  当地人{＃根据层newbit + base_cidr_block掩码为每个层生成顶层网络，即/ 4 + / 16 = / 20 tier_networks = zipmap（var.tiers [*]。name，cidrsubnets（var.base_cidr_block，var.tiers [* ] .newbit ...））＃根据每个层级网络的每个az newbit（在azs_new_bits映射中）生成一个子网，即/ 4 + / 20 = / 24 tier_subnets = {for t，n in local.tier_networks：t => cidrsubnets（n，values（var.az_newbits）...）}＃为每层生成azs到子网的映射tier_az_subnets = {对于local.tier_subnets中的t，s：t => zipmap（keys（var.az_newbits），s）}＃建立新的层列表及其关联的网络，然后将az映射到子网将tiers_with_subnets_per_az = [用于var.tiers中的t：{name = t.name，acl = t.acl，network = lookup（local.tier_networks，t.name）azs = lookup（local.tier_az_subnets，t.name），}]}输出＆＃34; calculated_tiers＆＃34; {值= local.tiers_with_subnets_per_az}</p><p>  $ terraform refreshEmpty or non-existent state file.Refresh will do nothing. Refresh does not error or return an erroneousexit status because many automation scripts use refresh, plan, then applyand may not have a state file yet for the first run.Outputs:calculated_tiers = [ { &#34;acl&#34; = &#34;public&#34; &#34;azs&#34; = { &#34;a&#34; = &#34;10.0.0.0/24&#34; &#34;b&#34; = &#34;10.0.1.0/24&#34; &#34;c&#34; = &#34;10.0.2.0/24&#34; &#34;d&#34; = &#34;10.0.3.0/24&#34; } &#34;name&#34; = &#34;app&#34; &#34;network&#34; = &#34;10.0.0.0/20&#34; }, { &#34;acl&#34; = &#34;private&#34; &#34;azs&#34; = { &#34;a&#34; = &#34;10.0.16.0/24&#34; &#34;b&#34; = &#34;10.0.17.0/24&#34; &#34;c&#34; = &#34;10.0.18.0/24&#34; &#34;d&#34; = &#34;10.0.19.0/24&#34; } &#34;name&#34; = &#34;db&#34; &#34;network&#34; = &#34;10.0.16.0/20&#34; }, { &#34;acl&#34; = &#34;private&#34; &#34;azs&#34; = { &#34;a&#34; = &#34;10.0.32.0/24&#34; &#34;b&#34; = &#34;10.0.33.0/24&#34; &#34;c&#34; = &#34;10.0.34.0/24&#34; &#34;d&#34; = &#34;10.0.35.0/24&#34; } &#34;name&#34; = &#34;worker&#34; &#34;network&#34; = &#34;10.0.32.0/20&#34; }, { &#34;acl&#34; = &#34;public&#34; &#34;azs&#34; = { &#34;a&#34; = &#34;10.0.48.0/24&#34; &#34;b&#34; = &#34;10.0.49.0/24&#34; &#34;c&#34; = &#34;10.0.50.0/24&#34; &#34;d&#34; = &#34;10.0.51.0/24&#34; } &#34;name&#34; = &#34;lbs&#34; &#34;network&#34; = &#34;10.0.48.0/20&#34; },]</p><p>  $ terraform refreshEmpty或不存在的状态文件。Refresh不会执行任何操作。刷新不会出错或返回错误的退出状态，因为许多自动化脚本使用刷新，计划，然后应用，并且首次运行可能还没有状态文件。Outputs：calculated_tiers = [{＆＃34; acl＆＃34; =＆＃34;公共＆＃34; ＆＃34; azs＆＃34; = {＆＃34; a＆＃34; =＆＃34; 10.0.0.0/24&#34; ＆＃34; b＆＃34; =＆＃34; 10.0.1.0/24&#34; ＆＃34; c＆＃34; =＆＃34; 10.0.2.0/24&#34; ＆＃34; d＆＃34; =＆＃34; 10.0.3.0/24&#34; }＆＃34;名称＆＃34; =＆＃34; app＆＃34; ＆＃34;网络＆＃34; =＆＃34; 10.0.0.0/20&#34; }，{＆＃34; acl＆＃34; =＆＃34;私人＆＃34; ＆＃34; azs＆＃34; = {＆＃34; a＆＃34; =＆＃34; 10.0.16.0/24&#34; ＆＃34; b＆＃34; =＆＃34; 10.0.17.0/24&#34; ＆＃34; c＆＃34; =＆＃34; 10.0.18.0/24&#34; ＆＃34; d＆＃34; =＆＃34; 10.0.19.0/24&#34; }＆＃34;名称＆＃34; =＆＃34; db＆＃34; ＆＃34;网络＆＃34; =＆＃34; 10.0.16.0/20&#34; }，{＆＃34; acl＆＃34; =＆＃34;私人＆＃34; ＆＃34; azs＆＃34; = {＆＃34; a＆＃34; =＆＃34; 10.0.32.0/24&#34; ＆＃34; b＆＃34; =＆＃34; 10.0.33.0/24&#34; ＆＃34; c＆＃34; =＆＃34; 10.0.34.0/24&#34; ＆＃34; d＆＃34; =＆＃34; 10.0.35.0/24&#34; }＆＃34;名称＆＃34; =＆＃34;工人＆＃34; ＆＃34;网络＆＃34; =＆＃34; 10.0.32.0/20&#34; }，{＆＃34; acl＆＃34; =＆＃34;公共＆＃34; ＆＃34; azs＆＃34; = {＆＃34; a＆＃34; =＆＃34; 10.0.48.0/24&#34; ＆＃34; b＆＃34; =＆＃34; 10.0.49.0/24&#34; ＆＃34; c＆＃34; =＆＃34; 10.0.50.0/24&#34; ＆＃34; d＆＃34; =＆＃34; 10.0.51.0/24&#34; }＆＃34;名称＆＃34; =＆＃34; lbs＆＃34; ＆＃34;网络＆＃34; =＆＃34; 10.0.48.0/20&#34; }，] </p><p> If you want to see each tier transform you can open the terraform console and call them to see their output.</p><p>如果要查看每个层的转换，可以打开terraform控制台并调用它们以查看其输出。</p><p> $ terraform console&gt; local.tier_networks{ &#34;app&#34; = &#34;10.0.0.0/20&#34; &#34;db&#34; = &#34;10.0.16.0/20&#34; &#34;lbs&#34; = &#34;10.0.48.0/20&#34; &#34;worker&#34; = &#34;10.0.32.0/20&#34;}&gt; local.tier_subnets{ &#34;app&#34; = [ &#34;10.0.0.0/24&#34;, &#34;10.0.1.0/24&#34;, &#34;10.0.2.0/24&#34;, &#34;10.0.3.0/24&#34;, ] &#34;db&#34; = [ &#34;10.0.16.0/24&#34;, &#34;10.0.17.0/24&#34;, &#34;10.0.18.0/24&#34;, &#34;10.0.19.0/24&#34;, ] &#34;lbs&#34; = [ &#34;10.0.48.0/24&#34;, &#34;10.0.49.0/24&#34;, &#34;10.0.50.0/24&#34;, &#34;10.0.51.0/24&#34;, ] &#34;worker&#34; = [ &#34;10.0.32.0/24&#34;, &#34;10.0.33.0/24&#34;, &#34;10.0.34.0/24&#34;, &#34;10.0.35.0/24&#34;, ]}&gt; local.tier_az_subnets{ &#34;app&#34; = { &#34;a&#34; = &#34;10.0.0.0/24&#34; &#34;b&#34; = &#34;10.0.1.0/24&#34; &#34;c&#34; = &#34;10.0.2.0/24&#34; &#34;d&#34; = &#34;10.0.3.0/24&#34; } &#34;db&#34; = { &#34;a&#34; = &#34;10.0.16.0/24&#34; &#34;b&#34; = &#34;10.0.17.0/24&#34; &#34;c&#34; = &#34;10.0.18.0/24&#34; &#34;d&#34; = &#34;10.0.19.0/24&#34; } &#34;lbs&#34; = { &#34;a&#34; = &#34;10.0.48.0/24&#34; &#34;b&#34; = &#34;10.0.49.0/24&#34; &#34;c&#34; = &#34;10.0.50.0/24&#34; &#34;d&#34; = &#34;10.0.51.0/24&#34; } &#34;worker&#34; = { &#34;a&#34; = &#34;10.0.32.0/24&#34; &#34;b&#34; = &#34;10.0.33.0/24&#34; &#34;c&#34; = &#34;10.0.34.0/24&#34; &#34;d&#34; = &#34;10.0.35.0/24&#34; }}</p><p> $ terraform控制台＆gt; local.tier_networks {＆＃34; app＆＃34; =＆＃34; 10.0.0.0/20&#34; ＆＃34; db＆＃34; =＆＃34; 10.0.16.0/20&#34; ＆＃34; lbs＆＃34; =＆＃34; 10.0.48.0/20&#34; ＆＃34;工人＆＃34; =＆＃34; 10.0.32.0/20&#34;}＆gt; local.tier_subnets {＆＃34; app＆＃34; = [＆＃34; 10.0.0.0/24&#34 ;、＆＃34; 10.0.1.0/24&#34 ;、＆＃34; 10.0.2.0/24&#34 ;、＆＃34; 10.0.3.0/24& ＃34 ;,]＆＃34; db＆＃34; = [＆＃34; 10.0.16.0/24&#34 ;、＆＃34; 10.0.17.0/24&#34 ;、＆＃34; 10.0.18.0/24&#34 ;、＆＃34; 10.0.19.0/24& ＃34 ;,]＆＃34; lbs＆＃34; = [＆＃34; 10.0.48.0/24&#34 ;、＆＃34; 10.0.49.0/24&#34 ;、＆＃34; 10.0.50.0/24&#34 ;、＆＃34; 10.0.51.0/24& ＃34 ;,]＆＃34; worker＆＃34; = [＆＃34; 10.0.32.0/24&#34 ;、＆＃34; 10.0.33.0/24&#34 ;、＆＃34; 10.0.34.0/24&#34 ;、＆＃34; 10.0.35.0/24& ＃34 ;,]}＆gt; local.tier_az_subnets {＆＃34; app＆＃34; = {＆＃34; a＆＃34; =＆＃34; 10.0.0.0/24&#34; ＆＃34; b＆＃34; =＆＃34; 10.0.1.0/24&#34; ＆＃34; c＆＃34; =＆＃34; 10.0.2.0/24&#34; ＆＃34; d＆＃34; =＆＃34; 10.0.3.0/24&#34; }＆＃34; db＆＃34; = {＆＃34; a＆＃34; =＆＃34; 10.0.16.0/24&#34; ＆＃34; b＆＃34; =＆＃34; 10.0.17.0/24&#34; ＆＃34; c＆＃34; =＆＃34; 10.0.18.0/24&#34; ＆＃34; d＆＃34; =＆＃34; 10.0.19.0/24&#34; }＆＃34; lbs＆＃34; = {＆＃34; a＆＃34; =＆＃34; 10.0.48.0/24&#34; ＆＃34; b＆＃34; =＆＃34; 10.0.49.0/24&#34; ＆＃34; c＆＃34; =＆＃34; 10.0.50.0/24&#34; ＆＃34; d＆＃34; =＆＃34; 10.0.51.0/24&#34; }＆＃34; worker＆＃34; = {＆＃34; a＆＃34; =＆＃34; 10.0.32.0/24&#34; ＆＃34; b＆＃34; =＆＃34; 10.0.33.0/24&#34; ＆＃34; c＆＃34; =＆＃34; 10.0.34.0/24&#34; ＆＃34; d＆＃34; =＆＃34; 10.0.35.0/24&#34; }}</p><p>   Now I can start tweaking the  tiers object set and  az_newbits mapto generate different tiered network configurations.</p><p>   现在，我可以开始调整tiers对象集和az_newbits映射，以生成不同的分层网络配置。</p><p>  base_cidr_block = &#34;10.0.0.0/16&#34;tiers = [ { name = &#34;app&#34; acl = &#34;public&#34; newbit = 6 }, { name = &#34;db&#34; acl = &#34;private&#34; newbit = 6 }, { name = &#34;worker&#34; acl = &#34;private&#34; newbit = 4 },]az_newbits = { b = 2 c = 4 d = 4}</p><p>  base_cidr_block =＆＃34; 10.0.0.0/16&#34; tiers = [{name =＆＃34; app＆＃34; acl =＆＃34; public＆＃34; newbit = 6}，{name =＆＃34; db＆＃34; acl =＆＃34;私有＆＃34; newbit = 6}，{name =＆＃34; worker＆＃34; acl =＆＃34;私有＆＃34; newbit = 4}，] az_newbits = {b = 2 c = 4 d = 4}</p><p> $ terraform refreshEmpty or non-existent state file.Refresh will do nothing. Refresh does not error or return an erroneousexit status because many automation scripts use refresh, plan, then applyand may not have a state file yet for the first run.Outputs:calculated_tiers = [ { &#34;acl&#34; = &#34;public&#34; &#34;azs&#34; = { &#34;b&#34; = &#34;10.0.0.0/24&#34; &#34;c&#34; = &#34;10.0.1.0/26&#34; &#34;d&#34; = &#34;10.0.1.64/26&#34; } &#34;name&#34; = &#34;app&#34; &#34;network&#34; = &#34;10.0.0.0/22&#34; }, { &#34;acl&#34; = &#34;private&#34; &#34;azs&#34; = { &#34;b&#34; = &#34;10.0.4.0/24&#34; &#34;c&#34; = &#34;10.0.5.0/26&#34; &#34;d&#34; = &#34;10.0.5.64/26&#34; } &#34;name&#34; = &#34;db&#34; &#34;network&#34; = &#34;10.0.4.0/22&#34; }, { &#34;acl&#34; = &#34;private&#34; &#34;azs&#34; = { &#34;b&#34; = &#34;10.0.16.0/22&#34; &#34;c&#34; = &#34;10.0.20.0/24&#34; &#34;d&#34; = &#34;10.0.21.0/24&#34; } &#34;name&#34; = &#34;worker&#34; &#34;network&#34; = &#34;10.0.16.0/20&#34; },]</p><p> $ terraform refreshEmpty或不存在的状态文件。Refresh不会执行任何操作。刷新不会出错或返回错误的退出状态，因为许多自动化脚本使用刷新，计划，然后应用，并且首次运行可能还没有状态文件。Outputs：calculated_tiers = [{＆＃34; acl＆＃34; =＆＃34;公共＆＃34; ＆＃34; azs＆＃34; = {＆＃34; b＆＃34; =＆＃34; 10.0.0.0/24&#34; ＆＃34; c＆＃34; =＆＃34; 10.0.1.0/26&#34; ＆＃34; d＆＃34; =＆＃34; 10.0.1.64/26&#34; }＆＃34;名称＆＃34; =＆＃34; app＆＃34; ＆＃34;网络＆＃34; =＆＃34; 10.0.0.0/22&#34; }，{＆＃34; acl＆＃34; =＆＃34;私人＆＃34; ＆＃34; azs＆＃34; = {＆＃34; b＆＃34; =＆＃34; 10.0.4.0/24&#34; ＆＃34; c＆＃34; =＆＃34; 10.0.5.0/26&#34; ＆＃34; d＆＃34; =＆＃34; 10.0.5.64/26&#34; }＆＃34;名称＆＃34; =＆＃34; db＆＃34; ＆＃34;网络＆＃34; =＆＃34; 10.0.4.0/22&#34; }，{＆＃34; acl＆＃34; =＆＃34;私人＆＃34; ＆＃34; azs＆＃34; = {＆＃34; b＆＃34; =＆＃34; 10.0.16.0/22&#34; ＆＃34; c＆＃34; =＆＃34; 10.0.20.0/24&#34; ＆＃34; d＆＃34; =＆＃34; 10.0.21.0/24&#34; }＆＃34;名称＆＃34; =＆＃34;工人＆＃34; ＆＃34;网络＆＃34; =＆＃34; 10.0.16.0/20&#34; }，]</p><p> I’m able to take this output, add or remove AZs and subnetsthat may have not been in the original calculation. I can chop upnetworks as I see fit.</p><p> 我可以获取此输出，添加或删除可能不在原始计算中的可用区和子网。我认为合适的话可以砍掉网络。</p><p> tiers = [ { &#34;acl&#34; = &#34;public&#34; &#34;azs&#34; = { &#34;b&#34; = &#34;10.0.0.0/24&#34; &#34;c&#34; = &#34;10.0.1.0/26&#34; } &#34;name&#34; = &#34;app&#34; &#34;network&#34; = &#34;10.0.0.0/22&#34; }, { &#34;acl&#34; = &#34;private&#34; &#34;azs&#34; = { &#34;c&#34; = &#34;10.0.5.0/26&#34; &#34;d&#34; = &#34;10.0.5.64/26&#34; } &#34;name&#34; = &#34;db&#34; &#34;network&#34; = &#34;10.0.4.0/22&#34; }, { &#34;acl&#34; = &#34;private&#34; &#34;azs&#34; = { &#34;b&#34; = &#34;10.0.16.0/22&#34; &#34;d&#34; = &#34;10.0.21.0/24&#34; &#34;c&#34; = &#34;10.0.22.0/24&#34; } &#34;name&#34; = &#34;worker&#34; &#34;network&#34; = &#34;10.0.16.0/20&#34; },]</p><p> 层= [{＆＃34; acl＆＃34; =＆＃34;公共＆＃34; ＆＃34; azs＆＃34; = {＆＃34; b＆＃34; =＆＃34; 10.0.0.0/24&#34; ＆＃34; c＆＃34; =＆＃34; 10.0.1.0/26&#34; }＆＃34;名称＆＃34; =＆＃34; app＆＃34; ＆＃34;网络＆＃34; =＆＃34; 10.0.0.0/22&#34; }，{＆＃34; acl＆＃34; =＆＃34;私人＆＃34; ＆＃34; azs＆＃34; = {＆＃34; c＆＃34; =＆＃34; 10.0.5.0/26&#34; ＆＃34; d＆＃34; =＆＃34; 10.0.5.64/26&#34; }＆＃34;名称＆＃34; =＆＃34; db＆＃34; ＆＃34;网络＆＃34; =＆＃34; 10.0.4.0/22&#34; }，{＆＃34; acl＆＃34; =＆＃34;私人＆＃34; ＆＃34; azs＆＃34; = {＆＃34; b＆＃34; =＆＃34; 10.0.16.0/22&#34; ＆＃34; d＆＃34; =＆＃34; 10.0.21.0/24&#34; ＆＃34; c＆＃34; =＆＃34; 10.0.22.0/24&#34; }＆＃34;名称＆＃34; =＆＃34;工人＆＃34; ＆＃34;网络＆＃34; =＆＃34; 10.0.16.0/20&#34; }，] </p><p>  $ ipcalc 10.0.16.0/20Address: 10.0.16.0 00001010.00000000.0001 0000.00000000Netmask: 255.255.240.0 = 20 11111111.11111111.1111 0000.00000000Wildcard: 0.0.15.255 00000000.00000000.0000 1111.11111111=&gt;Network: 10.0.16.0/20 00001010.00000000.0001 0000.00000000HostMin: 10.0.16.1 00001010.00000000.0001 0000.00000001HostMax: 10.0.31.254 00001010.00000000.0001 1111.11111110Broadcast: 10.0.31.255 00001010.00000000.0001 1111.11111111Hosts/Net: 4094 Class A, Private Internet</p><p>$ ipcalc 10.0.16.0/20地址：10.0.16.0 00001010.00000000.0001 0000.00000000子网掩码：255.255.240.0 = 20 11111111.11111111.1111 0000.00000000通配符：0.0.15.255 00000000.00000000.0000 1111.11111111 =＆gt;网络：10.0.16.0/20 00001010.00000000.0001 0000.00000000HostMin ：10.0.16.1 00001010.00000000.0001 0000.00000001HostMax：10.0.31.254 00001010.00000000.0001 1111.11111110广播：10.0.31.255 00001010.00000000.0001 1111.11111111Hosts / Net：4094 Class A，Private Internet</p><p>  $ ipcalc 10.0.16.0/20 /24Address: 10.0.16.0 00001010.00000000.0001 0000.00000000Netmask: 255.255.240.0 = 20 11111111.11111111.1111 0000.00000000Wildcard: 0.0.15.255 00000000.00000000.0000 1111.11111111=&gt;Network: 10.0.16.0/20 00001010.00000000.0001 0000.00000000HostMin: 10.0.16.1 00001010.00000000.0001 0000.00000001HostMax: 10.0.31.254 00001010.00000000.0001 1111.11111110Broadcast: 10.0.31.255 00001010.00000000.0001 1111.11111111Hosts/Net: 4094 Class A, Private InternetSubnets after transition from /20 to /24Netmask: 255.255.255.0 = 24 11111111.11111111.11111111. 00000000Wildcard: 0.0.0.255 00000000.00000000.00000000. 11111111 1.Network: 10.0.16.0/24 00001010.00000000.00010000. 00000000HostMin: 10.0.16.1 00001010.00000000.00010000. 00000001HostMax: 10.0.16.254 00001010.00000000.00010000. 11111110Broadcast: 10.0.16.255 00001010.00000000.00010000. 11111111Hosts/Net: 254 Class A, Private Internet 2.Network: 10.0.17.0/24 00001010.00000000.00010001. 00000000HostMin: 10.0.17.1 00001010.00000000.00010001. 00000001HostMax: 10.0.17.254 00001010.00000000.00010001. 11111110Broadcast: 10.0.17.255 00001010.00000000.00010001. 11111111Hosts/Net: 254 Class A, Private Internet... 15.Network: 10.0.30.0/24 00001010.00000000.00011110. 00000000HostMin: 10.0.30.1 00001010.00000000.00011110. 00000001HostMax: 10.0.30.254 00001010.00000000.00011110. 11111110Broadcast: 10.0.30.255 00001010.00000000.00011110. 11111111Hosts/Net: 254 Class A, Private Internet 16.Network: 10.0.31.0/24 00001010.00000000.00011111. 00000000HostMin: 10.0.31.1 00001010.00000000.00011111. 00000001HostMax: 10.0.31.254 00001010.00000000.00011111. 11111110Broadcast: 10.0.31.255 00001010.00000000.00011111. 11111111Hosts/Net: 254 Class A, Private InternetSubnets: 16Hosts: 4064</p><p>  $ ipcalc 10.0.16.0/20 / 24地址：10.0.16.0 00001010.00000000.0001 0000.00000000子网掩码：255.255.240.0 = 20 11111111.11111111.1111 0000.00000000通配符：0.0.15.255 00000000.00000000.0000 1111.11111111 =＆gt;网络：10.0.16.0/20 00001010.00000000.0001 0000.00000000HostMin：10.0.16.1 00001010.00000000.0001 0000.00000001HostMax：10.0.31.254 00001010.00000000.0001 1111.11111110广播：10.0.31.255 00001010.00000000.0001 1111.11111111 Hosts / Net：4094 Class A，Private Internet Subnet从/ 20过渡到/ 24到网络掩码：255.255.255.0 = 24 11111111.11111111.11111111。 00000000通配符：0.0.0.255 00000000.00000000.00000000。 11111111 1.网络：10.0.16.0/24 00001010.00000000.00010000。 00000000HostMin：10.0.16.1 00001010.00000000.00010000。 00000001HostMax：10.0.16.254 00001010.00000000.00010000。 11111110广播：10.0.16.255 00001010.00000000.00010000。 11111111主机/网络：254类A，专用Internet 2.网络：10.0.17.0/24 00001010.00000000.00010001。 00000000HostMin：10.0.17.1 00001010.00000000.00010001。 00000001HostMax：10.0.17.254 00001010.00000000.00010001。 11111110广播：10.0.17.255 00001010.00000000.00010001。 11111111主机/网络：254类A，专用Internet ... 15网络：10.0.30.0/24 00001010.00000000.00011110。 00000000HostMin：10.0.30.1 00001010.00000000.00011110。 00000001HostMax：10.0.30.254 00001010.00000000.00011110。 11111110广播：10.0.30.255 00001010.00000000.00011110。 11111111主机/网络：254类A，专用Internet 16.网络：10.0.31.0/24 00001010.00000000.00011111。 00000000HostMin：10.0.31.1 00001010.00000000.00011111。 00000001HostMax：10.0.31.254 00001010.00000000.00011111。 11111110广播：10.0.31.255 00001010.00000000.00011111。 11111111主机/网络：254 A类，专用Internet子网：16主机：4064 </p></div><div id="story_share_this"><div class="sharethis-inline-share-buttons"></div></div><div class="text-break sotry_link page_narrow"><a target="_blank" href="https://jq1.io/posts/tiered_subnet_calculator/">https://jq1.io/posts/tiered_subnet_calculator/</a></div><div class="story_tags page_narrow"><button type="button" class="btn btn-light my_tag"><a href="/tag/子网/">#子网</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/subnet/">#subnet</a></button></div></div><div class="my_movie_list_item shadow p-3 mb-5 bg-white rounded"><button type="button" class="btn btn-link my_tag"><a href="/tag/web2.0/">#web2.0</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/google/">#google</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/设计/">#设计</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/创意/">#创意</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/摄影/">#摄影</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/图片/">#图片</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/游戏/">#游戏</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/软件/">#软件</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/手机/">#手机</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/视频/">#视频</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/广告/">#广告</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/iphone/">#iphone</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/网站/">#网站</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/免费/">#免费</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/下载/">#下载</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/windows/">#windows</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/苹果/">#苹果</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/微软/">#微软</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/apple/">#apple</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/blog/">#blog</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/firefox/">#firefox</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/音乐/">#音乐</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/博客/">#博客</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/wordpress/">#wordpress</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/恶搞/">#恶搞</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/艺术/">#艺术</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/qq/">#qq</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/web/">#web</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/工具/">#工具</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/分享/">#分享</a></button></div></div></div><div id="my_footer"><div class=""><a href="/tags/">tags</a> <a href="/users/">users</a></div>&copy; 2020 diglog.com </div></div></body></html>