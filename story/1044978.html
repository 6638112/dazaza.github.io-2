<!doctype html><html lang="zh-hans"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>那个异或技巧 </title><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"><link rel="stylesheet" href="/img/css.css?random="><link data-rh="true" rel="icon" href="/img/favicon.ico"/><script data-ad-client="ca-pub-6067137220025946" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script type="text/javascript" src="https://platform-api.sharethis.com/js/sharethis.js#property=5effb96910009800120b8d4d&product=inline-share-buttons" async="async"></script>
<script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?03c1a0f31299b4a2fbb83c34d6beaac9";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script></head><body><div id="my_header"><div class="container"><nav class="navbar navbar-expand-lg"><a class="navbar-brand" href="/"><img alt="diglog" src="/img/logo.v1.gif" class="rounded-sm"></a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarNavAltMarkup"><div class="navbar-nav"></div></div></nav></div></div><div class="container"><div id="my_content"><h1 class="page_narrow">那个异或技巧 </h1><div class="row"><div class="col-lg-12 col-12"><div class="my_story_list_item shadow p-3 mb-5 bg-white rounded"><div class="story_page_pub_time page_narrow">2021-01-19 05:18:05</div><div class="page_narrow text-break page_content"><p>可以通过以下两种方法之一解决一整套受欢迎的面试问题：以明智的方式使用通用数据结构和算法，或者以似乎难以理解的方式使用XOR的某些属性。</p><p> 虽然在访谈中期望XOR解决方案似乎是不合理的，但弄清楚它们的工作方式却很有趣，事实证明，它们都是基于相同的基本技巧，我们将在此以自底向上的方式得出之后。我们将研究该XOR窍门™的大量应用程序，例如解决此热门面试问题：</p><p> 您会得到一个由n-1个整数组成的数组，它们的范围在1到n之间。除缺少一个数字外，所有数字仅出现一次。找到这个遗漏的号码。</p><p> 当然，有很多直接的方法可以解决此问题，但是使用XOR也许也很令人惊讶。</p><p>  XOR是一个逻辑运算符，对位进行运算，用^表示，如果作为输入的两位相同，则结果为0，否则为1，这实现了异或运算，即一个参数具有为1表示最终结果为1。我们可以使用真值表来显示此结果：</p><p>  大多数编程语言将^作为按位运算符实现，这意味着XOR分别应用于位字符串（例如，字节）中的每个位。</p><p>    0 ^ 0 = 00 ^ 1 = 11 ^ 0 = 11 ^ 1 = 0 </p><p>我们可以从先前的定义中得出一堆属性。让我们逐一进行研究，然后组合它们以解决前面提到的采访问题。</p><p>  如果XOR的两个参数之一为0，则剩下的参数为结果，这是通过检查y = 0的行（即第一行和第三行）直接从真值表得出的。</p><p>   如果两个参数相同，则结果始终为0，再次，我们可以通过检查真值表来说服自己这是真的，这次我们必须检查x = y的行，即第一行和最后一行。</p><p>  直观地讲，这意味着如果将XOR应用于相同的参数，它们将互相抵消。</p><p>  XOR是可交换的，这意味着我们可以更改应用XOR的顺序。要证明这一点，我们可以检查真值表中的x ^ y和y ^ x：</p><p>  如我们所见，x ^ y和y ^ x总是以相同的值结尾。</p><p>  通过结合所有这些，我们可以推断出将要遵循的一切背后的中心洞察力： </p><p>XOR技巧：如果我们有一系列XOR操作a ^ b ^ c ^ ...，那么我们可以删除所有重复值对，而不会影响结果。  交换性使我们可以对XOR的应用进行重新排序，以使重复的元素彼此相邻。由于x ^ x = 0和a ^ 0 = a，每对重复值对结果均无影响。  a ^ b ^ c ^ a ^ b＃可交换性= a ^ a ^ b ^ b ^ c＃使用x ^ x = 0 = 0 ^ 0 ^ c＃使用x ^ 0 = x（和可交换性）= c  因为^是按位运算符，所以无论a，b和c是哪种值，它都将起作用。这个想法实际上是在许多情况下如何神奇地使用XOR的核心。  在解决发现遗漏号码的问题之前，让我们从一个简单的问题开始：  事实证明，使用以下三个XOR指令可以轻松解决此问题：  这似乎有点神秘。如果这样做，为什么我们最终要交换x，y？ </p><p>要了解其工作原理，请逐步进行操作。每条指令后的注释均显示（x，y）的当前值：</p><p> x ^ = y＃=＆gt; （x ^ y，y）y ^ = x＃=＆gt; （x ^ y，y ^ x ^ y）=（x ^ y，x）x ^ = y＃=> （x ^ y ^ x，x）=（y，x）</p><p>  这里的基本见解是，在一个寄存器中拥有x ^ y，在另一个寄存器中拥有x，使我们能够完美地重构y。一旦x ^ y被存储（指令1），我们就可以将x放入另一个寄存器中（指令2）。 ，然后使用它将x ^ y更改为y（指令3）。</p><p>   您将得到一个由n-1个整数组成的数组A，其范围在1到n之间。除缺少一个数字外，所有数字仅出现一次。找到这个遗漏的号码。</p><p> 当然，有很多直接的方法可以解决此问题，但是我们确实着手使用XOR来解决。</p><p> 通过XOR技巧，我们知道拥有一系列XOR语句意味着我们可以删除所有重复的参数。但是，如果仅对给定列表中的所有值进行XOR，则由于没有重复项，因此无法应用此技巧：</p><p>  请注意，A [n-2]是n-1个元素列表的最后一个索引。 </p><p>我们还可以做的是对1到n之间的所有值进行XOR：</p><p> 1 ^ 2 ^ ... ^ n ^ A [0] ^ A [1] ^ ... ^ A [n-2]</p><p>   如果我们对所有这些都进行XOR，那么由于XOR技巧，我们实际上会删除出现两次的所有值，这意味着我们剩下的缺失值恰好是我们最初寻找的值。</p><p>  def find_missing（A，n）：结果= 0＃范围（1，n + 1）中值从1到n的所有值的XOR：结果^ = value＃给定数组中A中值的所有值的XOR ：结果^ =值返回结果</p><p> 仅看代码，这似乎是很难理解的算法，但是当知道XOR技巧是如何工作时，它就变得微不足道了，我认为这也说明了为什么在面试中期望这种解决方案是不合理的：这要求对特定技巧的了解，但除此之外没有太多算法思考。</p><p> 在继续进行下一个应用程序之前，让我继续讲两点。</p><p>  到目前为止，虽然我们处理的是从1到n的整数，但这并不是必需的。实际上，以前的算法可以在以下情况下工作：（1）一些潜在元素集和（2）实际出现一组元素。集合可能只在一个缺失的元素上有所不同。这对于整数很好，因为潜在元素的集合刚好对应于1到n的元素。 </p><p>潜在元素的集合是Person对象，我们应该从值列表中找到缺少的Person。</p><p>  潜在元素集是图中的所有节点，我们正在寻找缺失的节点</p><p>  潜在元素的集合通常是整数（不一定是1到n），我们想找到一个缺失的整数</p><p>  如果该算法似乎仍然有些神奇（我希望它不会），那么可能会有助于考虑使用算术运算符如何实现相同的结果。这实际上非常简单：</p><p> def find_missing（A，n）：result = 0＃为范围（1，n + 1）中的值添加从1到n的所有值：result + = value＃减去给定数组中A中的所有值：result -=值返回结果</p><p> 我们将所有可能的整数相加然后减去实际出现的整数。解决方案不是很好，因为一个人需要处理溢出并且因为它需要元素的类型来支持带有特定属性的+，-但是它具有元素彼此抵消的相同逻辑是因为它们出现一定次数（一次为正，一次为负）。</p><p>  这就是有趣的地方：我们可以将完全相同的解决方案应用于相似的面试问题： </p><p>您将得到一个n + 1个整数的数组A，它们的范围在1到n之间。除一个数字重复外，所有数字仅出现一次。查找此重复的号码。</p><p> 让我们考虑一下，如果仅应用与上一个解决方案完全相同的算法，将会发生什么。我们将获得一系列XOR语句，其中元素如下所示：</p><p>  如前所述，所有重复的元素相互抵消，这意味着我们只剩下要寻找的东西：在原始数组中重复的元素，这个元素出现了3次，再加上XOR，就减少到那个元素：</p><p>    事实证明，我们可以更进一步地考虑以下问题（稍微困难一点）：</p><p> 您会得到一个由n-2个整数组成的数组A，范围在1到n之间。除缺少两个数字外，所有数字仅出现一次。找到这两个缺失的数字。</p><p> 和以前一样，查找两个重复的数字而不是两个丢失的数字时，问题完全相同。</p><p> 我敢肯定，你猜对了，但是我们会坚持以前的工作，并以完全相同的方式开始：让我们考虑一下如果使用以前的XOR算法会发生什么，如果这样做，我们将再次得到一系列XOR语句其中所有元素彼此抵消，我们正在寻找的两个元素除外。 </p><p>我们将用u和v表示这些元素，主要是因为我们之前没有使用过这些字母，所以在应用之前的算法后，我们剩下u ^ v，我们该怎么办？我们不知何故需要从该值中提取u和v，但目前尚不清楚这样做。</p><p>  幸运的是，我们可以使用前面已经讲过的方法弄清楚该怎么做。让我们考虑一下：</p><p> 如果XOR作为输入的两位相同，则结果为0，否则为1。</p><p> 如果我们分析u ^ v中的各个位，则每个0表示该位在u和v中具有相同的值。每个1表示该位不同。</p><p> 使用这个函数，我们找到u ^ v中的第一个1，即u和v必须相异的第一个位置i，然后根据该位将A以及从1到n的数字进行分区。我们最终得到两个分区，每个分区包含两个集合：</p><p> 分区0第1位为0时从1到n的所有值的集合</p><p>  分区1第1位为1时从1到n的所有值的集合 </p><p>由于u和v在位置i上不同，因此我们知道它们必须位于不同的分区中。</p><p>   到目前为止，虽然我们处理的是从1到n的整数，但这并不是必需的。实际上，以前的算法可以在以下情况下工作：（1）一些潜在元素集和（2）实际出现一组元素。集可能仅在一个缺失（或重复）元素上有所不同。</p><p> 这两个集合与每个分区中的集合完全对应。因此，我们可以通过将这个想法应用于一个分区并找到丢失的元素来搜索u，然后将其应用于另一个分区来查找v。</p><p> 实际上，这是解决问题的一种不错的方法：我们将这个新问题有效地简化为我们先前解决的问题的更一般的版本。</p><p>  一个人可能会尝试进一步解决这个问题，并试图解决两个以上缺失值的问题。我没有给出过多的想法，但是我认为这是我们停止对XOR成功的地方。如果缺少两个以上的元素（或重复），然后分析单个位会失败，因为结果0和1都有几种组合。</p><p> 然后问题似乎需要更复杂的解决方案，这些解决方案不再基于XOR。</p><p>  如前所述，基于这个技巧的面试问题似乎不是一个好主意，他们需要知道一个稍微晦涩的技巧，但是一旦知道了这个技巧，就没什么要解决的了（除了应用程序4）。也几乎没有一种显示算法思维的方法（除了归约法），也没有利用数据结构的好方法。 </p><p>但是，我发现找出这个技巧是如何工作真的很酷.XOR似乎具有正确的属性可以解决所有这些问题，并且可以使用像XOR这样基本的东西来构建它也很漂亮。 这里描述的所有东西。  感谢Eugen促成这篇文章的讨论，一起弄清楚所有这些是如何工作很有趣。 </p></div><div id="story_share_this"><div class="sharethis-inline-share-buttons"></div></div><div class="text-break sotry_link page_narrow"><a target="_blank" href="https://florian.github.io//xor-trick/">https://florian.github.io//xor-trick/</a></div><div class="story_tags page_narrow"><button type="button" class="btn btn-light my_tag"><a href="/tag/技巧/">#技巧</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/xor/">#xor</a></button></div></div><div class="shadow p-3 mb-5 bg-white rounded clearfix"><div class="container"><div class="row"><div class="col-sm"><div><a target="_blank" href="/story/1022593.html"><img src="http://img2.diglog.com/img/2020/9/thumb_8d479f58cb870fe04619d7cd96a723a1.png" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1022593.html">愚蠢的RCU技巧：争取调试器的帮助</a></div><span class="my_story_list_date">2020-9-8 3:46</span></div><div class="col-sm"><div><a target="_blank" href="/story/videos_tech-stuff_373784.html"><img src="http://img.diglog.com/img/2010/12/thumb_1a1834f436d242bba4e6f6b72fcd1589.jpg" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/videos_tech-stuff_373784.html">令人惊叹的跳绳技巧</a></div><span class="my_story_list_date">2010-12-8 17:26</span></div><div class="col-sm"><div><a target="_blank" href="/story/technology_internet_356833.html"><img src="http://img.diglog.com/img/2010/5/thumb_a20c03bf40cb44e88966412871fe1827.png" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/technology_internet_356833.html">加速Windows 7的五大秘诀 ——译者：北极星博客</a></div><span class="my_story_list_date">2010-5-29 11:12</span></div><div class="col-sm"><div><a target="_blank" href="/story/technology_web2_333377.html"><img src="http://img.diglog.com/img/2010/3/thumb_2080f9e3f79e4505a22792f414749ae5.jpg" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/technology_web2_333377.html">Orz骇客:【 6大必装Wordpress插件】</a></div><span class="my_story_list_date">2010-3-16 11:41</span></div></div></div></div><div class="my_movie_list_item shadow p-3 mb-5 bg-white rounded"><button type="button" class="btn btn-link my_tag"><a href="/tag/web2.0/">#web2.0</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/google/">#google</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/设计/">#设计</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/创意/">#创意</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/摄影/">#摄影</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/游戏/">#游戏</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/图片/">#图片</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/软件/">#软件</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/视频/">#视频</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/手机/">#手机</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/广告/">#广告</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/apple/">#apple</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/iphone/">#iphone</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/网站/">#网站</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/免费/">#免费</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/下载/">#下载</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/windows/">#windows</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/微软/">#微软</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/firefox/">#firefox</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/苹果/">#苹果</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/blog/">#blog</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/音乐/">#音乐</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/博客/">#博客</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/wordpress/">#wordpress</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/恶搞/">#恶搞</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/艺术/">#艺术</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/qq/">#qq</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/web/">#web</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/谷歌/">#谷歌</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/工具/">#工具</a></button></div></div></div><div id="my_footer"><div class=""><a href="/tags/">tags</a> <a href="/users/">users</a></div>&copy;2012-2021 diglog.com </div></div></body></html>