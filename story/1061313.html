<!doctype html><html lang="zh-hans"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>使用imagemagick生成更有趣的图像预览 </title><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"><link rel="stylesheet" href="/img/css.css?random="><link data-rh="true" rel="icon" href="/img/favicon.ico"/><script data-ad-client="ca-pub-6067137220025946" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script type="text/javascript" src="https://platform-api.sharethis.com/js/sharethis.js#property=5effb96910009800120b8d4d&product=inline-share-buttons" async="async"></script>
<script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?03c1a0f31299b4a2fbb83c34d6beaac9";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script></head><body><div id="my_header"><div class="container"><nav class="navbar navbar-expand-lg"><a class="navbar-brand" href="/"><img alt="diglog" src="/img/logo.v1.gif" class="rounded-sm"></a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarNavAltMarkup"><div class="navbar-nav"></div></div></nav></div></div><div class="container"><div id="my_content"><h1 class="page_narrow">使用imagemagick生成更有趣的图像预览 </h1><div class="row"><div class="col-lg-12 col-12"><div class="my_story_list_item shadow p-3 mb-5 bg-white rounded"><div class="story_page_pub_time page_narrow">2021-05-07 23:30:26</div><div class="story_img_container"><a href="http://img2.diglog.com/img/2021/5/670061bd1e0d129f67e6e0e2b154454e.png"><img src="http://img2.diglog.com/img/2021/5/670061bd1e0d129f67e6e0e2b154454e.png" class="img-fluid my_story_img" onerror="this.style.display='none'"></a></div><div class="page_narrow text-break page_content"><p>我最近与想卖数码图像的客户交谈。在画廊中，可以显示免费的，但是出售的人将完全模糊。</p><p> 即使我最终没有做到这个项目，我很好奇如何生成更好的图像预览，然后就是模糊整个图像。毕竟，用户需要了解它在他们想买它之前的样子。</p><p> 两个最常见的解决方案是显示一个差分差或覆盖水印的版本。两者都很容易实现和工作得很好。</p><p> 我想看看是否有一种方法可以选择性地隐藏更高分辨率图像的部分，同时隐藏它不仅仅是水印。</p><p> 我希望最终结果成为排序的缩短形象。用户应该“看到”它是什么。它应该看起来很有趣。但它不应该是可用的。铅图像显示我很满意的最终结果。下面是我经历的过程来实现它。</p><p> 我主要使用mini_magick以复制Web应用程序如何执行这些转换。但是直接运行命令是完全可行的，事实上我在几个地方这样做。 Mini_Magick毕竟只是一个包装器，有助于构建命令。</p><p>   要求＆＃39; mini_magick＆＃39; INPUT_FILE =＆＃34;图像预览输入-1.jpg＆＃34; convert = minimagick :: tool :: convert。新转换＆lt;＆lt; input_file转换。模糊（＆＃34; 0x100＆＃34;）转换＆lt;＆lt; ＆＃34;普通模糊输出.jpg＆＃34;兑换 。调用convert = minimagick :: tool :: convert。新转换＆lt;＆lt; input_file转换。 Gaussian_blur（＆＃34; 0x100＆＃34;）转换＆lt; ＆＃34;高斯模糊输出.jpg＆＃34;兑换 。称呼 </p><p>正常模糊和高斯看起来几乎相同。 常规模糊更快。  自适应模糊的文档听起来像我所想到的正是：它朝着图像的边缘迷失。  然而，在仔细阅读时，我理解它将图像中的边缘较少。  模糊图像，除了靠近边缘检测在图像上定义的边缘。 例如，使颜色更顺畅，但不要摧毁图像可能具有的任何尖锐边缘。  通过产生圆梯度来实现更模糊的中心，以用作模糊的地图。  转换-size 500x750径向梯度：白色黑色图像预览 - 圈 -  map.pngconvert映像 - 预览 - 输入-1.jpg映像 -  previews-cirect-map.png \ -comosh blur -set选项：compose：args 10x20 -composite \ image-previews-circle-map-blur-output.png  这看起来更好，然后只是模糊整个图像。 然而，它仍然非常透露。 </p><p>要求＆＃39; mini_magick＆＃39; INPUT_FILE =＆＃34;图像预览输入-1.jpg＆＃34; image = minimagick :: image。打开（input_file）size =图像。方面 。地图{| x | x}宽度=尺寸[0]高度=尺寸[1]浓度= 40＃控制三角形的大小sh =高度/浓度sw =宽/浓度convert = minimagick :: tool :: convert。新转换＆lt;＆lt; input_file密度。时间做W |密度 。时间做H |兑换 。绘制（＆＃34; polygon＃{sw * w}，＃{sh * h}＃{sw *（w + 1）}，＃{sh * h}＃{sw *（w + 1）}，＃{ Sh *（H + 1）}＆＃34;）端部转换＆lt;＆lt; ＆＃34;输出 - 与triangles.png＆＃34;兑换 。称呼</p><p>  这看起来很好。图像并不是真正可用的任何东西，但同时用户可以清楚地“看到”图像是什么。</p><p> 上面的脚本不会考虑由于整数划分的右侧和底部剩下的间距，但这是修复的琐碎。</p><p>  接下来，如果在图像的边缘附近产生的三角形，则希望看到结果会更好。</p><p> 要求＆＃39; mini_magick＆＃39; INPUT_FILE =＆＃34;图像预览输入-1.jpg＆＃34; image = minimagick :: image。打开（input_file）size =图像。方面 。地图{| x | X}宽度=尺寸[0]高度=尺寸[1]浓度= 40 sh =高度/浓度sw =宽/浓度hh =高度/ 2 hw = width / 2 convert = minimagick ::工具::转换。新转换＆lt;＆lt; input_file密度。时间做W |密度 。时间做H | c = rand prob = 1  - （（（（hw to_f  - （w * sw）。abs / hw。to_f）+（hh。to_f  - （h * sh）。to_f）。abs / hh。to_f。 ）/ 2）+ 0.1，如果c＆lt; Prob转换。绘制（＆＃34; polygon＃{sw * w}，＃{sh * h}＃{sw *（w + 1）}，＃{sh * h}＃{sw *（w + 1）}，＃{ Sh *（H + 1）}＆＃34;）端部结束转换＆lt;＆lt; ＆＃34;图像预览 - 输出 - 概率 -  triangles.png＆＃34;兑换 。称呼</p><p>     对于此示例，我必须使用更大的输入图像。通过较小的图像，透明度也不会施加，并且当它们的三角形组成时会撕裂。</p><p> 由于花了很长时间才能运行，我也降低了密度和模糊。 </p><p>由于密度降低，我将三角形改变为多边形，以便模糊图像的较大部分。</p><p> 要求＆＃39; mini_magick＆＃39; INPUT_FILE =＆＃34;输入-1-lg.jpg＆＃34; image = minimagick :: image。打开（input_file）size =图像。方面 。地图{| x | x}高度=尺寸[0]宽度=尺寸[1]密度= 10 sh =高度/密度sw =宽/浓度片段= [] hh =高度/ 2 hw =宽/ 2密度。时间做W |密度 。时间做H | c = rand prob = 1  - （（（ ）/ 2）如果c＆lt; Prob碎片。推（{w：w * sw，h：h * sh}）convert = minimagick :: tool :: convert。新转换＆lt;＆lt; input_file转换。作物（＆＃34;＃{sh} x＃{sw} +＃{h * sh} +＃{w * sw}＆＃34;）转换。模糊（＆＃34; 0x200＆＃34;）转换。填充（＆＃34;黑色＆＃34;）转换。 draw（＆＃34; polygon＃{sh / sh / 2}，＃{sw}＃{sh}，＃{sw}＃{sh}，0＆＃34;）＃使用sh / 2而不是sh所以＆ ＃34;三角形＆＃34;从中间开始，而是在角落里覆盖更多的图像转换。 Fuzz（＆＃34; 15％＆＃34;）转换。定义（＆＃39; png：color-type = 6＆＃39;）转换。透明（＆＃34;黑色＆＃34;）转换＆lt;＆lt; ＆＃34;输出裁剪 - 三角形 - ＃{w * sw}  - ＃{h * sh} .png＆＃34;兑换 。呼叫结束端映像= MIMIMAGICK :: Image。打开（input_file）碎片。每件事x |裁剪= minimagick :: image。新（＆＃34;输出裁剪 - 三角形 - ＃{x [：w]}  - ＃{x [：h]} .png＆＃34;）结果=图像。复合（裁剪）做| C | C 。 compose＆＃34;过度＆＃34; C 。几何＆＃34; +＃{x [：h]} +＃{x [：w]}＆＃34;最终结果 。写＆＃34;图像预览 - 输出 - 概率 - 透明 - 三角形.jpg＆＃34;文件 。删除（＆＃34;输出 - 裁剪 - 三角形 - ＃{x [：w]}  - ＃{x [：h]} .png＆＃34;）如果是片段。最后！= X Image = Minimagick :: Image。打开（＆＃34;图像 - 预览 -  upporation-transpart-triangles.jpg＆＃34;）结束结束</p><p>    在ImageMagick文档中，我找到了一个用于编写具有纹波效果的图像的示例，所以也最终尝试了。</p><p>        这也看起来像一个有用的效果，但我认为它会对太多的图像混淆。</p><p>  我认为模糊图像中心附近的随机多边形创造了更有趣的图像预览，然后模糊整个图像，显示出低分辨率或应用水印。 </p></div><div id="story_share_this"><div class="sharethis-inline-share-buttons"></div></div><div class="text-break sotry_link page_narrow"><a target="_blank" href="https://ognjen.io/generating-more-interesting-image-previews-using-imagemagick/">https://ognjen.io/generating-more-interesting-image-previews-using-imagemagick/</a></div><div class="story_tags page_narrow"><button type="button" class="btn btn-light my_tag"><a href="/tag/图像/">#图像</a></button></div></div><div class="shadow p-3 mb-5 bg-white rounded clearfix"><div class="container"><div class="row"><div class="col-sm"><div><a target="_blank" href="/story/1060969.html"><img src="http://img2.diglog.com/img/2021/5/thumb_e05c3467e85e1bc3d3cbf2a00973fdf8.jpg" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1060969.html">Twitter在iOS和Android上推出了更大的图像和裁剪控制 </a></div><span class="my_story_list_date">2021-5-6 13:14</span></div><div class="col-sm"><div><a target="_blank" href="/story/1059758.html"><img src="http://img2.diglog.com/img/2021/4/thumb_e5b6397ab016879948b6843165d0de20.jpg" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1059758.html">卫星图像启动Albedo关闭了10米种子圆形 </a></div><span class="my_story_list_date">2021-4-22 23:40</span></div><div class="col-sm"><div><a target="_blank" href="/story/1059433.html"><img src="http://img2.diglog.com/img/2021/4/thumb_c4af471868d0c5d25249bb2ed650d27f.jpg" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1059433.html">Apple用M1更新IMAC，Slimmer Design，带有两个小型风扇，七种颜色，1080p网络摄像头，六位扬声器，波束成形三麦克阵和24英寸4.5K显示屏 </a></div><span class="my_story_list_date">2021-4-21 8:46</span></div><div class="col-sm"><div><a target="_blank" href="/story/1059044.html"><img src="http://img2.diglog.com/img/2021/4/thumb_5ed292e210614cdcfcbcce1f50abbd49.jpg" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1059044.html">曲折 </a></div><span class="my_story_list_date">2021-4-19 21:57</span></div></div></div></div><div class="my_movie_list_item shadow p-3 mb-5 bg-white rounded"><button type="button" class="btn btn-link my_tag"><a href="/tag/web2.0/">#web2.0</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/google/">#google</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/设计/">#设计</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/创意/">#创意</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/摄影/">#摄影</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/游戏/">#游戏</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/图片/">#图片</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/软件/">#软件</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/视频/">#视频</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/手机/">#手机</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/广告/">#广告</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/apple/">#apple</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/iphone/">#iphone</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/网站/">#网站</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/免费/">#免费</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/下载/">#下载</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/windows/">#windows</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/微软/">#微软</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/firefox/">#firefox</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/苹果/">#苹果</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/blog/">#blog</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/音乐/">#音乐</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/博客/">#博客</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/wordpress/">#wordpress</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/恶搞/">#恶搞</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/艺术/">#艺术</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/qq/">#qq</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/web/">#web</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/谷歌/">#谷歌</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/工具/">#工具</a></button></div></div></div><div id="my_footer"><div class=""><a href="/tags/">tags</a> <a href="/users/">users</a></div>&copy;2012-2021 diglog.com </div></div></body></html>