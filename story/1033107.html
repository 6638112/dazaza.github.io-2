<!doctype html><html lang="zh-hans"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>我为什么喜欢基本身份验证(2015)</title><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"><link rel="stylesheet" href="/img/css.css?random="><link data-rh="true" rel="icon" href="/img/favicon.ico"/><script data-ad-client="ca-pub-6067137220025946" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script type="text/javascript" src="https://platform-api.sharethis.com/js/sharethis.js#property=5effb96910009800120b8d4d&product=inline-share-buttons" async="async"></script>
<script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?03c1a0f31299b4a2fbb83c34d6beaac9";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script></head><body><div id="my_header"><div class="container"><nav class="navbar navbar-expand-lg"><a class="navbar-brand" href="/"><img alt="diglog" src="/img/logo.v1.gif" class="rounded-sm"></a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarNavAltMarkup"><div class="navbar-nav"></div></div></nav></div></div><div class="container"><div id="my_content"><h1 class="page_narrow">我为什么喜欢基本身份验证(2015)</h1><div class="row"><div class="col-lg-12 col-12"><div class="my_story_list_item shadow p-3 mb-5 bg-white rounded"><div class="story_page_pub_time page_narrow">2020-11-04 11:29:55</div><div class="page_narrow text-break page_content"><p>我在过去几年中注意到的一个令人不安的趋势是，越来越多的API服务正在慢慢放弃对HTTP基本身份验证(又名：基本身份验证)的支持，转而支持OAuth。</p><p>这是一件坏事，因为OAuth(尽管很受欢迎)对构建API服务的人和使用它们的开发人员来说都是一个巨大的痛苦。</p><p>OAuth是复杂的、被误解的、被广泛误用的，并且缺乏通用的实现。它肯定有它的用处，但在很多情况下会让人感觉不堪重负。</p><p>另一方面，Basic Auth非常简单，非常容易理解，自20世纪90年代以来在每种语言和框架中都得到了很好的支持。</p><p>您有一个API密钥对：一个API密钥ID和一个API密钥Secret。它们中的每一个都是随机生成的字符串(通常是UUID)。</p><p>要根据API服务进行身份验证，您只需将凭据放入HTTP Authorization头中。</p><p>下面的示例显示了如何使用cURL在命令行上使用基本身份验证：</p><p>&gt；&gt；&gt；从请求导入GET&gt；&gt；api_key_id=&#39；xxx&#39；&gt；&gt；api_key_secret=&#39；yyy&#39；&gt；&gt；Resp=get(&#39；https://api.someapi.com/v1/blah&#39；，AUTH=(api_key_id，api_key_secret)&gt；&gt；&gt；打印响应.json()</p><p>如果这还不够，下面的一些Node.js代码也说明了这一点：</p><p>Var Request=REQUIRED(&#39；REQUEST&#39；)；var api_key_id=&#39；xxx&#39；；var api_key_secret=&#39；yyy&#39；；Request({url：&#39；https://api.someapi.com/v1/blah&#39；，AUTH：{&#39；USER&#39；：api_key_id，&#39；PASS&#39；：API_KEY_SECRET}}，function(err，resp，body){console.log(Body)；})；</p><p>所有基本身份验证允许您(在较高抽象级别)指定您的凭据。就这样。</p><p>注：是的，我知道从技术上讲，它比这个稍微复杂一些。有Base64编码，有HTTP Authorization报头格式，等等，但是为了便于讨论，我省略了这些，因为它在这个上下文中并不重要。</p><p>Basic Auth非常适合开发人员，因为它简单、直观、易于使用。</p><p>假设您正在与API服务集成，您所要做的就是创建一个apiKey对，然后开始发出请求！</p><p>如果您不小心公布了您的API密钥对，并且它被泄露了，您该怎么办？Well…。您只需创建另一个API密钥对，将其放入您的应用程序代码中，然后删除旧的！</p><p>与OAuth不同，获取访问令牌不需要任何中间步骤：您只需要API密钥。</p><p>与其花费大量时间来计算您需要授予哪些权限和范围、设置重定向URI、Web服务器以及所有这些只会使问题复杂化的废话，您只需将该死的APIkey放入HTTP Authorization头和BAM中，狗屎就行了。</p><p>因为它非常简单，所以您可以更快地完成大量工作和测试。</p><p>提供程序更改其实现。几乎每一个OAuthProvider都无数次改变了他们的实现，打破了成千上万的开发者应用程序。</p><p>用于访问您的数据的复杂工作流。OAuth2有4种不同的授权类型，每种类型都有不同的用途和用途。</p><p>每次我使用Twilio这样的服务时，都会提醒我使用BasicAuth是多么方便：能够：</p><p>通过命令行或像Runscope这样的API资源管理器轻松测试我的API请求。</p><p>Basic Auth因为“不安全”而声名狼藉，但这并不一定是真的。</p><p>有几件事可以确保您的API服务(由Basic Auth保护)尽可能安全：</p><p>始终通过https运行所有请求。如果您不使用SSL，那么无论您使用哪种身份验证协议，您都永远不会是安全的。除非您重新使用https，否则您的所有凭据都将以纯文本形式通过网络发送：这是一个可怕的想法。</p><p>为您的开发人员提供生成任意数量的API密钥对的能力。这使得开发人员可以很容易地将他们对apiKey对的使用隔离到单个应用程序或服务。</p><p>允许您的开发人员在需要时撤销API密钥访问。例如：如果开发人员意外泄露了他在Github上的API密钥，他应该能够撤销该API密钥对，从而保证它不会被其他任何人使用。</p><p>使用uuid生成随机API密钥对。这确保了API密钥对不可猜测。</p><p>此外，对于使用基本身份验证的开发人员，您应该始终记住以下几点：</p><p>安全存储您的API密钥。如果您使用的是支持Basic Auth的API服务，请确保不要将API密钥存储在您的public Github repo中。</p><p>不要使用不是在https上运行的API服务--将来肯定会有问题。</p><p>为您编写的每个应用程序使用唯一的API密钥对。这样，如果意外丢失API密钥或将其公开泄漏，您只需撤销特定的API密钥，并且只需更新依赖于该API密钥的单个代码库。从长远来看，这将使你的生活变得容易得多。</p><p>如果您正在寻找API公司正确处理API密钥的好例子，请查看AWS。</p><p>Basic Auth的另一个伟大之处在于，每个人都只使用一种实现-这意味着对于如何制作请求或服务器端组件永远不会有任何模棱两可的地方：它总是相同的。</p><p>获取API密钥ID和API密钥Secret，并将它们放入以冒号分隔的字符串中，如下所示：&#39；xxx：yyy&#39；。</p><p>然后在字符串前面加上单词&#39；Basic&#39；，这样就有：&#39；Basicxxx：YYY&39；。</p><p>然后对字符串的API密钥部分进行Base64编码，因此以：&#39；basic eH4Onl5eQ==&#39；结束。</p><p>最后，在发出HTTP请求时将此值设置为HTTP Authorization标头。</p><p>左边是API密钥ID，右边是API KeySecret。</p><p>然后，服务器验证这些凭据，并允许您访问或返回HTTP 401未经授权的响应。</p><p>基本身份验证没有任何含糊之处。这意味着每种编程语言都有对该标准的顶级支持，而且很容易找到将Basic Auth用作生产者和消费者的广受好评的库。</p><p>我希望在OAuth继续流行的同时，开发人员会继续最大限度地支持Basic Auth。</p><p>这不仅让我作为一名开发人员的生活变得更轻松，而且也让我的生活更愉快。</p><p>对于任何信任其开发人员的API服务来说，您真的不能通过支持基本身份验证来实现。</p><p>和…。即使对于那些不信任开发者的服务--比如Google、Facebook、Fitbit等消费者服务--支持Basic Auth仍然是个好主意。这至少使他们的用户能够务实地访问他们自己的数据，而不需要跳过OAuthhoops。</p><p>注：我意识到这是一个颇具争议性的话题。我最终改写了这篇文章的许多草稿，结果都是因为它们的范围扩大了太多而把它们扔掉了。在未来，我计划写更多的文章来讨论OAuth和Basic Auth的各种缺陷，深入探讨我的观点的更深层次的技术原因。</p><p>附注：如果你读到这里，你可能想在Twitter或GitHub上关注我，并通过RSS或下面的电子邮件订阅(我会在我发布新文章时给你发电子邮件)。</p></div><div id="story_share_this"><div class="sharethis-inline-share-buttons"></div></div><div class="text-break sotry_link page_narrow"><a target="_blank" href="https://www.rdegges.com/2015/why-i-love-basic-auth/">https://www.rdegges.com/2015/why-i-love-basic-auth/</a></div><div class="story_tags page_narrow"><button type="button" class="btn btn-light my_tag"><a href="/tag/基本/">#基本</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/basic/">#basic</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/api/">#api</a></button></div></div><div class="shadow p-3 mb-5 bg-white rounded clearfix"><div class="container"><div class="row"><div class="col-sm"><div><a target="_blank" href="/story/1032044.html"><img src="http://img2.diglog.com/img/2020/10/thumb_ed78b996ddc9b30c6f37fc5a33eb2706.png" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1032044.html">微积分基本定理视觉导读</a></div><span class="my_story_list_date">2020-10-30 0:4</span></div><div class="col-sm"><div><a target="_blank" href="/story/1031835.html"><img src="http://img2.diglog.com/img/2020/10/thumb_083ce2094aff7d17f2eb3701bc4e0f39.jpg" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1031835.html">赛博朋克2077开发者在收到游戏延迟的死亡威胁后要求基本的人类礼仪</a></div><span class="my_story_list_date">2020-10-29 9:51</span></div><div class="col-sm"><div><a target="_blank" href="/story/1030155.html"><img src="http://img2.diglog.com/img/2020/10/thumb_b7aeb6930db72ecce1b1e39bd98a6380.jpg" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1030155.html">从今天开始到“至少”选举周结束，当你点击或轻触转发图标时，Twitter将显示报价推文编辑器，不鼓励基本的RTS</a></div><span class="my_story_list_date">2020-10-21 3:56</span></div><div class="col-sm"><div><a target="_blank" href="/story/1027415.html"><img src="http://img2.diglog.com/img/2020/10/thumb_8293dfad43f58cd8b9886f0a223fc802.jpg" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1027415.html">基本代码</a></div><span class="my_story_list_date">2020-10-1 5:57</span></div></div></div></div><div class="my_movie_list_item shadow p-3 mb-5 bg-white rounded"><button type="button" class="btn btn-link my_tag"><a href="/tag/web2.0/">#web2.0</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/google/">#google</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/设计/">#设计</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/创意/">#创意</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/摄影/">#摄影</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/游戏/">#游戏</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/图片/">#图片</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/软件/">#软件</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/视频/">#视频</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/手机/">#手机</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/广告/">#广告</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/apple/">#apple</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/iphone/">#iphone</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/网站/">#网站</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/免费/">#免费</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/下载/">#下载</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/windows/">#windows</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/微软/">#微软</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/firefox/">#firefox</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/苹果/">#苹果</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/blog/">#blog</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/音乐/">#音乐</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/博客/">#博客</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/wordpress/">#wordpress</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/恶搞/">#恶搞</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/艺术/">#艺术</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/qq/">#qq</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/web/">#web</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/谷歌/">#谷歌</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/工具/">#工具</a></button></div></div></div><div id="my_footer"><div class=""><a href="/tags/">tags</a> <a href="/users/">users</a></div>&copy;2012-2021 diglog.com </div></div></body></html>