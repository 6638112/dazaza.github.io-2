<!doctype html><html lang="zh-hans"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>通过Emacs学习Awk（2020年）Learn Awk with Emacs (2020)</title><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"><link rel="stylesheet" href="/img/css.css?random="><link data-rh="true" rel="icon" href="/img/favicon.ico"/><script data-ad-client="ca-pub-6067137220025946" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script type="text/javascript" src="https://platform-api.sharethis.com/js/sharethis.js#property=5effb96910009800120b8d4d&product=inline-share-buttons" async="async"></script>
<script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?03c1a0f31299b4a2fbb83c34d6beaac9";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script></head><body><div id="my_header"><div class="container"><nav class="navbar navbar-expand-lg"><a class="navbar-brand" href="/"><img alt="diglog" src="/img/logo.v1.gif" class="rounded-sm"></a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarNavAltMarkup"><div class="navbar-nav"></div></div></nav></div></div><div class="container"><div id="my_content"><h1 class="page_narrow">Learn Awk with Emacs (2020)<br/>通过Emacs学习Awk（2020年）</h1><div class="row"><div class="col-lg-12 col-12"><div class="my_story_list_item shadow p-3 mb-5 bg-white rounded"><div class="story_page_pub_time page_narrow">2022-02-20 18:22:01</div><div class="page_narrow text-break page_content"><p>This post describes my workflow for learning the AWK programming language using Emacs, Org mode and Org-drill. The workflow may work for other programming languages. The post won&#39;t cover details on how to use Emacs, Org mode or Org-drill. It&#39;s intention is to provide a general overview of a workflow.</p><p>这篇文章描述了我使用Emacs、Org模式和Org drill学习AWK编程语言的工作流程。该工作流可能适用于其他编程语言。邮报赢得&#39；t介绍如何使用Emacs、组织模式或组织演练的详细信息。它&#39；s的目的是提供工作流的一般概述。</p><p> A git repo is available with flash cards, note book and some text files  here.</p><p>git回购协议在这里提供闪存卡、笔记本和一些文本文件。</p><p> I just read a few chapters in the &#34;The AWK programming language&#34; book and found AWK to be awesome and I want to learn more of the language. I begin to think about my approach for learning AWK. My goal is to be efficient with AWK in smaller scripts and one liners. AWK is Turing complete and can be used for larger applications. But if I write larger applications my weapon of choice is a functional lisp with immutable data structures. I see AWK as a natural tool in my tool box and the perfect language to filtering logs, search for patterns in files, reduce a couple of files, transform my accounting data or other things related to text with some kind of structure. And in combination with programs like  find,  sed,  grep and  sort AWK can be super powerful and efficient. This is where AWK shines for me.</p><p>我刚刚读了&#34；AWK编程语言&#34；这本书让我觉得AWK很棒，我想学习更多的语言。我开始思考学习AWK的方法。我的目标是在较小的脚本和一行程序中高效地使用AWK。AWK是图灵完备的，可以用于更大的应用。但是，如果我编写更大的应用程序，我选择的武器是具有不可变数据结构的功能性lisp。我认为AWK是我工具箱中的一个自然工具，是过滤日志、搜索文件中的模式、减少几个文件、转换会计数据或其他与某种结构的文本相关的东西的完美语言。与find、sed、grep和sort AWK等程序结合使用，可以实现超级强大和高效。这就是AWK为我带来光明的地方。</p><p> One reason why I started to think about my learning process is that I feel that I don&#39;t have the time to learn a new language in one go and keep the knowledge fresh. I wanna progress slowly and over time. If I forget something or is kept away from AWK for a while I quickly wanna get back on track fast without needing to read a book again or consult to much documentation. This is of course not completely possible, but if I can keep the most essential parts of AWK in my second brain I am more than happy.</p><p>我开始思考我的学习过程的一个原因是我觉得我不&#39；I don’我没有时间一次性学习一门新语言，并保持知识新鲜。我想慢慢地、慢慢地进步。如果我忘记了什么，或者暂时远离AWK，我想尽快回到正轨，而不需要再读一本书或查阅大量文档。这当然不完全可能，但如果我能在第二个大脑中保留AWK最重要的部分，我会非常高兴。</p><p> What I came up with is a workflow combined of  Org-drill and  Org mode source blocks together with provided text files. Org-drill is an Emacs mode that uses a spaced repetition algorithm together with flash cards to provide you with questions and then the answer. The questions and answers are written by me and most often based around &#34;famous&#34; text files like Nginx access log, /etc/passwd or .ledger files.</p><p>我想到的是一个由组织钻取和组织模式源代码块以及提供的文本文件组合而成的工作流。Org drill是一种Emacs模式，它使用间隔重复算法和闪存卡为您提供问题，然后提供答案。这些问题和答案都是我写的，通常是基于#34；著名的&#34；Nginx访问日志等文本文件/etc/passwd或。账本档案。</p><p> A typical workflow to fill my source with questions and answers is to read a chapter in a book or a documentation page. If I find something that I think is useful I write one or more flash cards. This way I can increase my knowledge source and when I feel I have some time over I can run the learning workflow.</p><p>一个典型的工作流程是阅读一本书或一个文档页面中的一章，用问题和答案填充我的来源。如果我发现一些我认为有用的东西，我会写一张或多张卡片。这样我可以增加我的知识来源，当我觉得有时间时，我可以运行学习工作流。</p><p>   Together with the note book file and the flash cards are a couple of text files. The text files are examples of the &#34;famous&#34; files. The note book file contains Org mode source blocks for each of the files. And the questions states what source block to use for that particular question.</p><p>除了笔记本文件和闪存卡外，还有两个文本文件。文本文件是&#34；著名的&#34；文件夹。笔记簿文件包含每个文件的组织模式源块。这些问题说明了该问题使用的源代码块。</p><p>   It tells that the language to evaluated is AWK. Results should be inserted in the note book document just beneath the source block. The file that your AWK program have as input is in the  :in-file argument. If  C-c C-c is executed on this source block it will insert all of the content of  ./text-files/access.log file in the note book document. If an error occurs, the error message is inserted into the document.</p><p>它告诉我们要评估的语言是AWK。结果应插入源块下方的笔记本文档中。AWK程序作为输入的文件位于：in file参数中。如果在这个源代码块上执行C-C-C，它将插入的所有内容/文本文件/访问。笔记本文档中的日志文件。如果发生错误，则会将错误消息插入文档中。</p><p> Below is an example on how it can look like when you develop your answer. You write your AWK answer and use  C-c C-c to see the result. If you are satisfied and think you have the correct answer, tell that to the org-drill session and it will then provide you with the correct answer. You correct yourself by telling org-drill how good you did on a scale from 1-5. Depending how you rate your answer, org-drill will set a date for the next time the question should appear.</p><p>下面是一个例子，说明了当你给出答案时它会是什么样子。你写下你的AWK答案，然后用C-C-C查看结果。如果你感到满意，并且认为你有正确的答案，告诉组织训练课程，然后它将为你提供正确的答案。你可以通过告诉org drill你在1-5分的范围内做得有多好来纠正自己。根据你对答案的评价，org drill将为下一次出现问题设定日期。</p><p> #+BEGIN_SRC  awk  :results output code :in-file ./text-files/access.log   {  ips [ $ 1 ] += 1  }  END  {  for  ( i  in  ips )  {  print  i ,  ips [ i ]  |  &#34;sort -rk 2,2&#34; }} #+END_SRC #+RESULTS : #+begin_src  awk   121.204 . 106.181  8 191.54 . 160.135  7 111.185 . 35.101  1 111.85 . 5.44  1 101.11 . 117.117  1 #+end_src</p><p>#+BEGIN_SRC awk:结果输出代码：在文件中/文本文件/访问。日志{ips[$1]+=1}END{for（i in ips）{print i，ips[i]|和#34；sort-rk 2,2和#34；}#+结束#SRC#+结果：#+开始#SRC awk 121.204。106.181  8 191.54 . 160.135  7 111.185 . 35.101  1 111.85 . 5.44  1 101.11 . 117.117 1#+结束#</p><p> Below is an example on how the flash card looks. If you know basic with Org mode this structure will feel very familiar. One great benefit of this is that it&#39;s just text. No database or weird stuff. Just plain text that is easy to search in and easy to version control.</p><p>下面是一个关于闪存卡外观的示例。如果你知道基本的组织模式，这种结构会让你感到非常熟悉。这样做的一大好处是&#39；这只是短信。没有数据库或奇怪的东西。纯文本，易于搜索和版本控制。</p><p> ** Print line 7 to 10 of file   :awk:drill: How do you print line 7 to 10 with a range pattern? :in-file ./text-files/ledger.ledger *** Answer  #+BEGIN_SRC  awk  :results output code :in-file ./text-files/ledger.ledger   FNR == 7 , FNR == 10  #+END_SRC #+RESULTS:  #+begin_src  awk    2020 - 04 - 17  *  Dustin .  Köp  av  tangentbord .  ;;  ~ /company/incomming-invoices/2020/2020-04-17-lenovo-keyboard-swedbank-transaction.pdf  2 : 4 : 4 : 0  667.00  SEK  2 : 0 : 1 : 8  - 667.00  SEK  #+end_src</p><p>**打印文件的第7行到第10行：awk:drill:如何使用范围模式打印第7行到第10行？：存档/文本文件/分类账。分类账***答案#+开始#SRC awk：结果输出代码：在文件中/文本文件/分类账。分类账FNR==7，FNR==10#+结束#+结果：#+开始#结束#。Köp av tangentbord；~/公司/输入发票/2020/2020-04-17-lenovo-keyboard-swedbank-transaction。pdf 2:4:4:0667.00瑞典克朗2:0:1:8-667.00瑞典克朗</p><p> This kind of setup for learning languages feels very appealing to me. I think that AWK fits extra good as it&#39;s possible to have predefined text files as input and AWK programs can be short and efficient. When writing this post I have just finished the workflow and got all of the pieces together. Now it&#39;s time to fill my second brain with good questions and answers and continue my path to be a happy AWK user. If you wanna help me optimize any of the workflows or contribute with good flash cards, I am more than happy to receive pull requests via GitHub or feedback via Twitter.</p><p>这种学习语言的方式对我很有吸引力。我认为AWK非常适合#39；它可以将预定义的文本文件作为输入，AWK程序可以简短高效。在写这篇文章时，我刚刚完成了工作流程，把所有的部分都整理好了。现在是&#39；是时候用好的问题和答案填满我的第二个大脑，继续我的道路，成为一个快乐的AWK用户。如果你想帮我优化任何工作流程，或者用好的闪存卡做贡献，我非常乐意通过GitHub或Twitter收到拉取请求或反馈。</p></div><div id="story_share_this"><div class="sharethis-inline-share-buttons"></div></div><div class="story_tags page_narrow"><button type="button" class="btn btn-light my_tag"><a href="/tag/emacs/">#emacs</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/2020/">#2020</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/学习/">#学习</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/awk/">#awk</a></button></div></div><div class="my_movie_list_item shadow p-3 mb-5 bg-white rounded"><button type="button" class="btn btn-link my_tag"><a href="/tag/web2.0/">#web2.0</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/google/">#google</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/设计/">#设计</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/创意/">#创意</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/摄影/">#摄影</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/图片/">#图片</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/游戏/">#游戏</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/软件/">#软件</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/广告/">#广告</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/视频/">#视频</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/手机/">#手机</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/iphone/">#iphone</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/网站/">#网站</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/免费/">#免费</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/windows/">#windows</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/下载/">#下载</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/微软/">#微软</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/苹果/">#苹果</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/firefox/">#firefox</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/blog/">#blog</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/音乐/">#音乐</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/博客/">#博客</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/apple/">#apple</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/wordpress/">#wordpress</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/恶搞/">#恶搞</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/qq/">#qq</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/艺术/">#艺术</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/谷歌/">#谷歌</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/工具/">#工具</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/web/">#web</a></button></div></div></div><div id="my_footer"><div class=""><a href="/tags/">tags</a> <a href="/users/">users</a></div>&copy;2012-2021 diglog.com </div></div></body></html>