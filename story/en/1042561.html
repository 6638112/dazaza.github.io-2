<!doctype html><html lang="zh-hans"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Floyd-Steinberg抖动算法 Floyd-Steinberg Dithering Algorithm</title><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"><link rel="stylesheet" href="/img/css.css?random="><link data-rh="true" rel="icon" href="/img/favicon.ico"/><script data-ad-client="ca-pub-6067137220025946" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script type="text/javascript" src="https://platform-api.sharethis.com/js/sharethis.js#property=5effb96910009800120b8d4d&product=inline-share-buttons" async="async"></script>
<script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?03c1a0f31299b4a2fbb83c34d6beaac9";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script></head><body><div id="my_header"><div class="container"><nav class="navbar navbar-expand-lg"><a class="navbar-brand" href="/"><img alt="diglog" src="/img/logo.v1.gif" class="rounded-sm"></a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarNavAltMarkup"><div class="navbar-nav"></div></div></nav></div></div><div class="container"><div id="my_content"><h1 class="page_narrow">Floyd-Steinberg Dithering Algorithm<br/>Floyd-Steinberg抖动算法 </h1><div class="row"><div class="col-lg-12 col-12"><div class="my_story_list_item shadow p-3 mb-5 bg-white rounded"><div class="story_page_pub_time page_narrow">2020-12-30 23:07:55</div><div class="story_img_container"><a href="http://img2.diglog.com/img/2020/12/2de895149de223a60381c09068e68871.png"><img src="http://img2.diglog.com/img/2020/12/2de895149de223a60381c09068e68871.png" class="img-fluid my_story_img" onerror="this.style.display='none'"></a></div><div class="page_narrow text-break page_content"><p>Jump to navigation  Jump to search  Floyd–Steinberg dithering is an image  dithering algorithm first published in 1976 by  Robert W. Floyd and  Louis Steinberg. It is commonly used by image manipulation software, for example when an image is converted into  GIF format that is restricted to a maximum of 256 colors.</p><p>跳转到导航跳转到搜索弗洛伊德-斯坦伯格抖动是一种图像抖动算法，由Robert W. Floyd和Louis Steinberg于1976年首次发布。它通常由图像处理软件使用，例如，当图像转换为GIF格式（最多限制为256色）时。</p><p> The algorithm achieves dithering using  error diffusion, meaning it pushes (adds) the residual  quantization error of a  pixel onto its neighboring pixels, to be dealt with later. It spreads the debt out according to the distribution (shown as a map of the neighboring pixels):</p><p> 该算法使用误差扩散来实现抖动，这意味着它将像素的残留量化误差推（加）到其相邻像素上，稍后再进行处理。它根据分布将债务摊开（显示为相邻像素的地图）：</p><p> [            ∗           7     16        …        …           3     16              5     16              1     16        …     ]      {\displaystyle {\begin{bmatrix}&amp;&amp;*&amp;{\frac {\displaystyle 7}{\displaystyle 16}}&amp;\ldots \\\ldots &amp;{\frac {\displaystyle 3}{\displaystyle 16}}&amp;{\frac {\displaystyle 5}{\displaystyle 16}}&amp;{\frac {\displaystyle 1}{\displaystyle 16}}&amp;\ldots \\\end{bmatrix}}}</p><p> [* 7 16……3 16 5 16 1 16…] {\ displaystyle {\ begin {bmatrix}＆amp;＆amp; *＆amp; {\ frac {\ displaystyle 7} {\ displaystyle 16}}＆amp; \ ldots \\ \ ldots＆amp; {\ frac {\ displaystyle 3} {\ displaystyle 16}}＆amp; {\ frac {\ displaystyle 5} {\ displaystyle 16}}＆amp; {\ frac {\ displaystyle 1} {\ displaystyle 16}} ＆amp; \ ldots \\\ end {bmatrix}}}</p><p> The pixel indicated with a star (*) indicates the pixel currently being scanned, and the blank pixels are the previously-scanned pixels.The algorithm scans the image from left to right, top to bottom, quantizing pixel values one by one. Each time the quantization error is transferred to the neighboring pixels, while not affecting the pixels that already have been quantized. Hence, if a number of pixels have been rounded downwards, it becomes more likely that the next pixel is rounded upwards, such that on average, the quantization error is close to zero.</p><p> 带有星号（*）的像素表示当前正在扫描的像素，空白像素是先前扫描的像素。算法从左到右，从上到下扫描图像，逐一量化像素值。每次将量化误差转移到相邻像素，同时不影响已经被量化的像素。因此，如果多个像素已经向下舍入，则下一个像素向上舍入的可能性更大，从而平均而言，量化误差接近于零。</p><p> The diffusion coefficients have the property that if the original pixel values are exactly halfway in between the nearest available colors, the dithered result is a checkerboard pattern. For example, 50% grey data could be dithered as a black-and-white checkerboard pattern. For optimal dithering, the counting of quantization errors should be in sufficient accuracy to prevent rounding errors from affecting the result.</p><p> 扩散系数具有以下属性：如果原始像素值恰好位于最接近的可用颜色之间，则抖动结果为棋盘图案。例如，可以将50％的灰度数据抖动为黑白棋盘图案。为了获得最佳抖动，量化误差的计数应足够准确，以防止舍入误差影响结果。</p><p> In some implementations, the horizontal direction of scan alternates between lines; this is called &#34;serpentine scanning&#34; or  boustrophedon transform dithering.</p><p> 在一些实施方式中，扫描的水平方向在线之间交替。这称为“蛇形扫描”。或Boustrophedon变换抖动。</p><p> In the following  pseudocode we can see the algorithm described above. This works for any approximately linear encoding of pixel values, such as 8-bit integers, 16-bit integers or real numbers in the range [0,1].</p><p> 在下面的伪代码中，我们可以看到上述算法。这适用于像素值的任何近似线性编码，例如8位整数，16位整数或[0,1]范围内的实数。 </p><p> for each  y from top to bottom  do  for each  x from left to right  do oldpixel := pixel[ x][ y] newpixel := find_closest_palette_color(oldpixel) pixel[ x][ y] := newpixel quant_error := oldpixel - newpixel pixel[ x + 1][ y ] := pixel[ x + 1][ y ] + quant_error × 7 / 16 pixel[ x - 1][ y + 1] := pixel[ x - 1][ y + 1] + quant_error × 3 / 16 pixel[ x ][ y + 1] := pixel[ x ][ y + 1] + quant_error × 5 / 16 pixel[ x + 1][ y + 1] := pixel[ x + 1][ y + 1] + quant_error × 1 / 16</p><p>从上到下的每个y从左到右做每个x做oldpixel：=像素[x] [y] newpixel [x + 1] [y]：=像素[x + 1] [y] + quant_error×7/16像素[x-1] [y + 1] quant_error×3/16像素[x] [y + 1]：=像素[x] [y + 1] + quant_error×5/16像素[x + 1] [y + 1]：= pixel [x + 1] [y + 1] + quant_error×1/16</p><p> When converting 16 bit greyscale to 8 bit,  find_closest_palette_color() may perform just a simple rounding, for example:</p><p> 将16位灰度转换为8位时，find_closest_palette_color（）可能仅执行简单的舍入，例如：</p><p>  The pseudocode can result in pixel values exceeding the valid values (such as greater than 1 in a [0,1] representation). Such values should ideally be clipped by the  find_closest_palette_color() function, rather than clipping the intermediate values, since a subsequent error may bring the value back into range. However, if fixed-width integers are used, wrapping of intermediate values would cause inversion of black and white, and so should be avoided.</p><p>  伪代码可能导致像素值超过有效值（例如[0,1]表示中的值大于1）。理想情况下，此类值应由find_closest_palette_color（）函数进行裁剪，而不是裁剪中间值，因为随后的错误可能会使该值返回范围。但是，如果使用固定宽度的整数，则中间值的换行将导致黑白反转，因此应避免。</p><p>  R.W. Floyd, L. Steinberg,  An adaptive algorithm for spatial grey scale. Proceedings of the Society of Information Display  17, 75–77 (1976).</p><p>  R.W. Floyd，L。Steinberg，一种适用于空间灰度的自适应算法。信息显示学会学报，第75卷，第77-77页（1976）。 </p></div><div id="story_share_this"><div class="sharethis-inline-share-buttons"></div></div><div class="text-break sotry_link page_narrow"><a target="_blank" href="https://en.wikipedia.org/wiki/Floyd%E2%80%93Steinberg_dithering">https://en.wikipedia.org/wiki/Floyd%E2%80%93Steinberg_dithering</a></div><div class="story_tags page_narrow"><button type="button" class="btn btn-light my_tag"><a href="/tag/算法/">#算法</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/steinberg/">#steinberg</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/像素/">#像素</a></button></div></div><div class="my_movie_list_item shadow p-3 mb-5 bg-white rounded"><button type="button" class="btn btn-link my_tag"><a href="/tag/web2.0/">#web2.0</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/google/">#google</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/设计/">#设计</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/创意/">#创意</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/摄影/">#摄影</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/游戏/">#游戏</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/图片/">#图片</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/软件/">#软件</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/视频/">#视频</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/手机/">#手机</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/广告/">#广告</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/iphone/">#iphone</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/网站/">#网站</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/免费/">#免费</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/windows/">#windows</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/下载/">#下载</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/苹果/">#苹果</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/微软/">#微软</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/apple/">#apple</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/firefox/">#firefox</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/blog/">#blog</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/音乐/">#音乐</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/博客/">#博客</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/wordpress/">#wordpress</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/恶搞/">#恶搞</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/qq/">#qq</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/艺术/">#艺术</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/web/">#web</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/工具/">#工具</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/分享/">#分享</a></button></div></div></div><div id="my_footer"><div class=""><a href="/tags/">tags</a> <a href="/users/">users</a></div>&copy; 2020 diglog.com </div></div></body></html>