<!doctype html><html lang="zh-hans"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Raspberry PI现在可以启动NVME SSD The Raspberry Pi can boot off NVMe SSDs now</title><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"><link rel="stylesheet" href="/img/css.css?random="><link data-rh="true" rel="icon" href="/img/favicon.ico"/><script data-ad-client="ca-pub-6067137220025946" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script type="text/javascript" src="https://platform-api.sharethis.com/js/sharethis.js#property=5effb96910009800120b8d4d&product=inline-share-buttons" async="async"></script>
<script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?03c1a0f31299b4a2fbb83c34d6beaac9";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script></head><body><div id="my_header"><div class="container"><nav class="navbar navbar-expand-lg"><a class="navbar-brand" href="/"><img alt="diglog" src="/img/logo.v1.gif" class="rounded-sm"></a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarNavAltMarkup"><div class="navbar-nav"></div></div></nav></div></div><div class="container"><div id="my_content"><h1 class="page_narrow">The Raspberry Pi can boot off NVMe SSDs now<br/>Raspberry PI现在可以启动NVME SSD </h1><div class="row"><div class="col-lg-12 col-12"><div class="my_story_list_item shadow p-3 mb-5 bg-white rounded"><div class="story_page_pub_time page_narrow">2021-03-24 03:56:40</div><div class="page_narrow text-break page_content"><p>When the Compute Module 4 was released (see  my CM4 review here), I asked the Pi Foundation engineers when we might be able to boot off NVMe storage, since it was trivially easy to use with the exposed PCIe x1 lane on the CM4 IO Board.</p><p>当释放计算模块4时（参见我的CM4审查），我问PI基金会工程师在我们可以启动NVME存储时，因为它在CM4 IO板上的暴露的PCIe X1车道中易于使用。</p><p> The initial response in October 2020 was &#34;we&#39;ll see&#34;. Luckily, after more people started asking about it,  beta support was added for direct NVMe boot just a couple weeks ago.</p><p> 2020年10月的初始反应是＆＃34;我们＆＃39; ll查看＆＃34 ;.幸运的是，经过更多人开始询问它，在几周前即可为直接NVME启动添加测试版支持。</p><p>  And in a stroke of perfect timing, I also received a hand-made  MirkoPC board from Mirek in Poland last week, which among other features includes a full-size M.2 M-key slot, meaning I could test out NVMe boot on it with a Compute Module 4 and a  WD_black SN750 500GB SSD I use for testing.</p><p>  在一个完美的时机的中风中，上周我还收到了来自波兰的Mirek的手工制作的Mirkopc板，其中包括一个全尺寸的M.2 M-Key插槽，这意味着我可以在它上测试NVME引导使用计算模块4和WD_BLACK SN750 500GB SSD我用于测试。</p><p>  I also posted a video about booting from NVMe on my YouTube channel; it&#39;s embedded below:</p><p>  我还发布了一个关于从Nutube频道上的NVME引导的视频;它嵌入下面的＆＃39;</p><p>   The setup process is a little involved right now, since you have to set the correct boot order, update the Pi&#39;s bootloader, update the Pi&#39;s firmware, but it&#39;s not too crazy.</p><p>   现在，设置过程现在有点涉及，因为您必须设置正确的启动顺序，更新PI＆＃39; S引导加载程序，更新PI＆＃39; S固件，但它并不太疯狂。</p><p> Because I had some trouble with the MirkoPC&#39;s built-in microSD card slot, I chose to use an eMMC-powered Compute Module 4, so I flashed Pi OS to it, then  set the Pi to USB mass storage mode.</p><p> 因为我对Mirkopc＆＃39的内置microSD卡插槽有一些麻烦，所以我选择使用EMMC供电的计算模块4，因此我闪过PI OS，然后将PI设置为USB大容量存储模式。</p><p> I followed the  beta instructions to change the  BOOT_ORDER, but I had to modify the  sed command on my Mac, since the arguments are different for the non-GNU version of  sed shipped with macOS:</p><p> 我遵循测试版的说明来更改BOOT_ORDER，但我必须在MAC上修改SED命令，因为参数对于kmos附带的SED的非GNU版本不同： </p><p>   For the firmware update, I used the built-in SD Card Copier utility to copy all data from the eMMC storage over to the NVMe SSD, and made sure to check the &#34;New Partition UUIDs&#34; option when doing so.</p><p>对于固件更新，我使用内置的SD卡复印机实用程序将所有数据从EMMC存储复制到NVME SSD，并确保检查＆＃34;新分区UUIDS＆＃34;选择这样的选项。</p><p> After that, I rebooted the Pi, and used  lsblk to verify the NVMe was mounted as  / and  /boot, and then got on to benchmarking.</p><p> 之后，我重新启动了pi，并使用lsblk验证nvme是否已安装为/和/ boot，然后转到基准测试。</p><p>  The two main things I wanted to test were boot times and app launch/use times, to see what kind of impact the NVMe storage would have.</p><p>  我想要测试的两种主要内容是启动时间和应用启动/使用时间，看看NVME存储的影响是什么样的影响。</p><p> I already know from my  World&#39;s tiniest NVMe RAID video that NVMe storage is, on average,  12x faster on the Pi for normal file operations (copies, random read/write), but how much does it affect everyday performance?</p><p> 我已经从我的世界中了解到了NVME存储的最小NVME RAID视频，平均而言，普通文件操作（复制，随机读/写）的PI速度平均12倍，但它会影响日常性能多少？</p><p> Well, boot times are hardly affected by disk IO, it seems; after realizing I had to disable Bluetooth in  /boot/config.txt and disable the  hciuart service, since my CM4 didn&#39;t have a wireless module, I got pretty much the exact same boot time across NVMe, eMMC, and microSD bootups:</p><p> 好吧，启动时间几乎不会受到磁盘IO的影响，似乎;在实现我不得不在/boot/config.txt中禁用蓝牙并禁用HCIUART服务，因为我的cm4 didd＆＃39; t有一个无线模块，我几乎在nvme，emmc和microSD靴子上得到了完全相同的启动时间：</p><p>  But the next test reveals more of the typical speedup you&#39;d encounter on a Pi, day-to-day. I wrote a  Node.js benchmark script for Chromium to test how long it takes to launch Chromium, load a webpage, and quit last year, for some other testing.</p><p>  但下一个测试揭示了更多典型的加速你＆＃39; d在pi，日常生活中遇到。我为Chromium写了一个Node.js基准脚本，以测试去年推出铬，加载网页和退出的时间需要多长时间，以获得一些其他测试。</p><p> I ran that same benchmark on each storage device (three times, restarting the Pi between each test, with &lt; 2% standard deviation in the results), and got the following times:</p><p> 我在每个存储设备上运行了相同的基准测试（三次，在每个测试之间重新启动PI，结果中的标准偏差），并得到以下时间： </p><p>  In this test, NVMe storage is  44% faster than microSD, and around 20% faster than eMMC. The bigger surprise was how much better eMMC fares than microSD; the 8-bit configuration on the CM4 (vs. 4-bit on the CM3+ and earlier) makes a big difference, especially for random IO.</p><p>在该测试中，NVME存储比microSD快44％，比EMMC快约20％。更大的惊喜是emmc比microdd的更好; CM4上的8位配置（CM3 +和更早版本上的4位）产生了很大的差异，尤其是随机IO。</p><p> But 44% is a pretty significant difference. You will definitely notice the speedup from NVMe boot on the Pi, and that&#39;s not even considering the fact that you can get 4 TB (or larger) NVMe SSDs, and they have much better write longevity compared to all but the most expensive microSD cards.</p><p> 但44％是一个非常重要的差异。你肯定会注意到PI上的NVME引导的加速，而且甚至考虑到你可以获得4 TB（或更大）NVME SSD的事实，而且与最多但最多但最重要的是，它们有更好的写长寿昂贵的microSD卡。</p><p> Anyways, I thought the MirkoPC would be a great little board to test NVMe boot on, though it works on any CM4 board (look at the  list of Compute Module 4 project boards I am maintaining here), as long as you can adapt an M.2 NVMe SSD to the board&#39;s PCI Express connection (many boards have M.2 slots built-in!).</p><p> 无论如何，我认为Mirkopc将是一个伟大的小板来测试nvme靴子，但它在任何cm4板上工作（看起来是计算模块4项目板上的项目板上），只要您可以调整一个m .2 NVME SSD到电路板＆＃39; S PCI Express Connection（很多板内置M.2插槽！）。</p><p> Check out the YouTube video for more details about my tests, and stay tuned (maybe subscribe to the blog&#39;s RSS!), as I&#39;ll continue exploring more storage options for the Pi, and I&#39;ll also be posting more about the MirkoPC soon!</p><p> 有关我的测试的更多详细信息，请查看YouTube视频，并保持调整（也许订阅博客＆＃39; s rss！），作为i＆＃39; ll继续探索更多的存储选项，以及i＆＃39; ll也很快发布更多关于Mirkopc的信息！ </p></div><div id="story_share_this"><div class="sharethis-inline-share-buttons"></div></div><div class="text-break sotry_link page_narrow"><a target="_blank" href="https://www.jeffgeerling.com/blog/2021/raspberry-pi-can-boot-nvme-ssds-now">https://www.jeffgeerling.com/blog/2021/raspberry-pi-can-boot-nvme-ssds-now</a></div><div class="story_tags page_narrow"><button type="button" class="btn btn-light my_tag"><a href="/tag/pi/">#pi</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/nvme/">#nvme</a></button></div></div><div class="my_movie_list_item shadow p-3 mb-5 bg-white rounded"><button type="button" class="btn btn-link my_tag"><a href="/tag/web2.0/">#web2.0</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/google/">#google</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/设计/">#设计</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/创意/">#创意</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/摄影/">#摄影</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/图片/">#图片</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/游戏/">#游戏</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/软件/">#软件</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/视频/">#视频</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/手机/">#手机</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/广告/">#广告</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/iphone/">#iphone</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/网站/">#网站</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/免费/">#免费</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/下载/">#下载</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/windows/">#windows</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/微软/">#微软</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/firefox/">#firefox</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/blog/">#blog</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/苹果/">#苹果</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/apple/">#apple</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/音乐/">#音乐</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/博客/">#博客</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/wordpress/">#wordpress</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/恶搞/">#恶搞</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/qq/">#qq</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/艺术/">#艺术</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/web/">#web</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/工具/">#工具</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/分享/">#分享</a></button></div></div></div><div id="my_footer"><div class=""><a href="/tags/">tags</a> <a href="/users/">users</a></div>&copy;2012-2021 diglog.com </div></div></body></html>