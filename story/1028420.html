<!doctype html><html lang="zh-hans"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>面向软件专业人员的现代架构设计模式</title><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"><link rel="stylesheet" href="/img/css.css?random="><link data-rh="true" rel="icon" href="/img/favicon.ico"/><script data-ad-client="ca-pub-6067137220025946" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script type="text/javascript" src="https://platform-api.sharethis.com/js/sharethis.js#property=5effb96910009800120b8d4d&product=inline-share-buttons" async="async"></script>
<script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?03c1a0f31299b4a2fbb83c34d6beaac9";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script></head><body><div id="my_header"><div class="container"><nav class="navbar navbar-expand-lg"><a class="navbar-brand" href="/"><img alt="diglog" src="/img/logo.v1.gif" class="rounded-sm"></a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarNavAltMarkup"><div class="navbar-nav"></div></div></nav></div></div><div class="container"><div id="my_content"><h1 class="page_narrow">面向软件专业人员的现代架构设计模式</h1><div class="row"><div class="col-lg-12 col-12"><div class="my_story_list_item shadow p-3 mb-5 bg-white rounded"><div class="story_page_pub_time page_narrow">2020-10-13 20:04:19</div><div class="story_img_container"><a href="http://img2.diglog.com/img/2020/10/723519142c492bfd2b7bcd05d5385e66.png"><img src="http://img2.diglog.com/img/2020/10/723519142c492bfd2b7bcd05d5385e66.png" class="img-fluid my_story_img" onerror="this.style.display='none'"></a></div><div class="page_narrow text-break page_content"><p>许多现代应用程序需要在企业规模上构建，有时甚至需要在互联网规模上构建。每个应用程序都需要满足可扩展性、可用性、安全性、可靠性和恢复能力要求。</p><p>在本文中，我将讨论一些可以帮助您轻松实现上述功能的设计模式。我将讨论每种模式，如何在云本地环境中使用该模式，以及何时使用和何时不使用。</p><p>其中一些模式并不是很新，但在当前互联网规模的云世界中非常有用。</p><p>以下是我将在本文中讨论的模式列表：</p><p>分布式系统的设计应该考虑到故障。如今，世界已经采用了微服务，而这些服务大多依赖于其他远程服务。这些远程服务可能会由于网络、应用程序负载等各种原因而无法及时响应。在大多数情况下，实现重试应该可以解决这些问题。</p><p>但有时可能会出现服务降级或服务本身完全故障等重大问题。在这种情况下，不断重审是没有意义的。这就是断路器模式可以派上用场的地方。</p><p>上图显示了断路器模式的实施，在该模式中，当服务1了解到调用服务2时存在连续故障/超时时，服务1不会重试，而是会将呼叫跳转到服务2，并返回回退响应。</p><p>有一些流行的开源库，比如Netflix的hystrix，可以非常容易地用来实现这种模式。</p><p>如果您正在使用API网关或诸如特使之类的SideCar代理，那么这可以在代理级别本身实现。</p><p>注意：在电路打开时实施充分的日志记录和警报非常重要，以便跟踪在这段时间内收到的请求，并且运营团队意识到这一点。</p><p>您还可以在半电路打开的情况下实施断路器，以继续为服务降级的客户端提供服务。</p><p>当一个服务依赖于另一个远程服务，并且在某些情况下可能会失败。</p><p>当您处理本地依赖关系时-断路器可能会产生开销。</p><p>对于涉及使用数据存储的现代应用程序来说，CQRS是一个非常有用的模式。它基于分离数据存储中的读(查询)和写/更新(命令)操作的原则。</p><p>假设您正在构建一个需要将数据存储在MySQL/PostgreSQL等数据库中的应用程序。众所周知，当将数据写入数据存储区时，一个操作需要几个步骤-如验证、建模和持久性-因此典型的写/更新操作比简单的读操作花费更长的时间。</p><p>当您使用单个数据存储同时大规模执行读写操作时，您可能会开始看到性能问题。</p><p>在这种情况下，CQRS模式可能很有用。CQRS模式建议对读写操作使用单独的数据存储。</p><p>注意：如今大多数PaaS数据库都提供创建读副本的功能(Google Cloud SQL、Azure SQL DB、Amazon RDS等)。在帮助实现CQRS的数据存储中，CQRS的实现要容易得多。</p><p>如果您处理的是本地数据库，许多企业数据库也提供此功能。</p><p>注意：现在有些人也更喜欢将读副本实现为快速、高性能的NoSQL数据库，如MongoDB和Elasticsearch。</p><p>当您考虑扩展需要大量读写的应用程序时。</p><p>当您正在构建一个常规的CRUD应用程序，并且该应用程序不需要一次进行大量的读写操作时。</p><p>Event Sourcing是一种有趣的设计模式，其中域事件序列存储为日志，日志的聚合视图提供应用程序的当前状态。</p><p>此模式通常用于负担不起数据存储锁的系统，以及需要维护事件的审核和历史记录的系统-例如，酒店/会议/座位预订等应用程序。</p><p>考虑其中期望用户预订或取消预订的酒店房间预订系统。在这里，您需要将预订和取消存储为一系列事件。在每次预订之前，汇总视图通过查看活动日志显示可用房间。</p><p>注意：大多数云服务提供商都支持消息传递服务，如Google Pub/Sub、Azure Service Bus、AWS SQS等。这些服务与强大的一致性数据存储相结合，可用于实现此模式。</p><p>通常适用于座位预订系统-如公交车、火车、会议、电影厅等-或由购物车操作、支付等活动组成的电子商务系统。</p><p>当需要强大的审核和事件重放来创建应用程序的当前和过去状态时。</p><p>随着微服务的兴起，Sidecar模式变得流行起来。在此模式中，您将应用程序的组件部署到单独的流程或容器中。这有助于实现抽象和封装。</p><p>特使代理是目前应用最广泛、应用最广泛的侧车代理之一。它帮助您保持应用程序的核心功能独立，使用SideCar隔离网络、可观察性和安全性等常见功能。</p><p>这种类型侧车可以帮助抽象L4/L7类型的通信。像特使代理这样的旁观者甚至通过实施共同TLS来帮助实现更高的安全性。</p><p>您可以将其与服务网格结合使用，以实现各种微服务之间更好的通信和安全性。您可以在我的上一篇文章中阅读更多关于它的内容。</p><p>当您在处理通常无法应对新时代通信和安全挑战的旧式应用程序时。</p><p>当您处理需要相互通信的有限数量的服务时。</p><p>在典型的产品开发周期中，后端工程师负责创建与数据存储交互的服务，前端工程师负责构建用户界面。如今，在构建应用程序时，需要同时考虑移动和桌面使用情况。</p><p>尽管移动设备和台式设备在硬件方面的差距越来越近，但移动设备的连接和使用仍然面临挑战。</p><p>在这种情况下，BFF模式变得相当方便。在这里，您需要为特定的前端构建/定制后端服务。</p><p>要优化移动客户端的性能，您可能需要构建单独的后端服务，该服务使用轻量级和分页响应进行响应。</p><p>您可能还希望将此模式用于各种服务的聚合，以减少闲聊的通信。</p><p>注意：现在，如果您使用的是API网关，那么BFF模式可以很容易地在网关本身中实现，并且您不需要维护单独的服务。</p><p>当您想要为不同的客户端(如台式机和移动客户端)交付产品/服务时。</p><p>当期望移动和桌面应用程序显示相似的信息并提供相似的功能时。</p><p>如果您在一个正在迈向应用程序现代化之旅的组织中工作，那么扼杀设计模式是必须的。扼杀设计模式主张在您的遗留应用程序和新应用程序之上创建外观，为消费者提供抽象的视图。</p><p>注意：在典型的IT组织中，如果您要从一个ERP迁移到另一个ERP，则此类型的模式非常有用。如果您使用的是API网关，那么在网关代理本身中实现这一点就会变得更加容易。</p><p>您需要决定是要在迁移结束时保留还是删除外观。</p><p>当您迁移或现代化复杂的、高度依赖的应用程序(如ERP迁移)时</p></div><div id="story_share_this"><div class="sharethis-inline-share-buttons"></div></div><div class="text-break sotry_link page_narrow"><a target="_blank" href="https://medium.com/better-programming/modern-day-architecture-design-patterns-for-software-professionals-9056ee1ed977">https://medium.com/better-programming/modern-day-architecture-design-patterns-for-software-professionals-9056ee1ed977</a></div><div class="story_tags page_narrow"><button type="button" class="btn btn-light my_tag"><a href="/tag/软件/">#软件</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/设计/">#设计</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/day/">#day</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/服务/">#服务</a></button></div></div><div class="shadow p-3 mb-5 bg-white rounded clearfix"><div class="container"><div class="row"><div class="col-sm"><div><a target="_blank" href="/story/1028288.html"><img src="http://img2.diglog.com/img/2020/10/thumb_f5424f56413333facd5d739a478d90a3.png" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1028288.html">包括微软和赛门铁克在内的一个科技公司联盟策划了对TrickBot恶意软件僵尸网络的攻击，该恶意软件僵尸网络已经感染了100多万台电脑</a></div><span class="my_story_list_date">2020-10-12 21:57</span></div><div class="col-sm"><div><a target="_blank" href="/story/1028281.html"><img src="http://img2.diglog.com/img/2020/10/thumb_a463e5c310c79513ee80e2f3070ce0bc.jpg" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1028281.html">面向软件工程师的统一基本概念</a></div><span class="my_story_list_date">2020-10-12 21:45</span></div><div class="col-sm"><div><a target="_blank" href="/story/1028260.html"><img src="http://img2.diglog.com/img/2020/10/thumb_d9bd107be1fe51c8903cd4b12b3e9f8c.png" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1028260.html">计算机科学不是软件工程</a></div><span class="my_story_list_date">2020-10-12 21:32</span></div><div class="col-sm"><div><a target="_blank" href="/story/1028099.html"><img src="http://img2.diglog.com/img/2020/10/thumb_12f1209fdaf4744b4853c2f0d17ac1ef.jpg" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1028099.html">Android勒索软件学到了一些不祥的新把戏</a></div><span class="my_story_list_date">2020-10-11 17:6</span></div></div></div></div><div class="my_movie_list_item shadow p-3 mb-5 bg-white rounded"><button type="button" class="btn btn-link my_tag"><a href="/tag/web2.0/">#web2.0</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/google/">#google</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/设计/">#设计</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/创意/">#创意</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/摄影/">#摄影</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/游戏/">#游戏</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/图片/">#图片</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/软件/">#软件</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/视频/">#视频</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/手机/">#手机</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/广告/">#广告</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/apple/">#apple</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/iphone/">#iphone</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/网站/">#网站</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/免费/">#免费</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/下载/">#下载</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/windows/">#windows</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/微软/">#微软</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/firefox/">#firefox</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/苹果/">#苹果</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/blog/">#blog</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/音乐/">#音乐</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/博客/">#博客</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/wordpress/">#wordpress</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/恶搞/">#恶搞</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/艺术/">#艺术</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/qq/">#qq</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/web/">#web</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/谷歌/">#谷歌</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/工具/">#工具</a></button></div></div></div><div id="my_footer"><div class=""><a href="/tags/">tags</a> <a href="/users/">users</a></div>&copy;2012-2021 diglog.com </div></div></body></html>