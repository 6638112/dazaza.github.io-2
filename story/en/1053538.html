<!doctype html><html lang="zh-hans"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>破坏三明治交易商，以获取乐趣和利润 Wrecking sandwich traders for fun and profit</title><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"><link rel="stylesheet" href="/img/css.css?random="><link data-rh="true" rel="icon" href="/img/favicon.ico"/><script data-ad-client="ca-pub-6067137220025946" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script type="text/javascript" src="https://platform-api.sharethis.com/js/sharethis.js#property=5effb96910009800120b8d4d&product=inline-share-buttons" async="async"></script>
<script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?03c1a0f31299b4a2fbb83c34d6beaac9";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script></head><body><div id="my_header"><div class="container"><nav class="navbar navbar-expand-lg"><a class="navbar-brand" href="/"><img alt="diglog" src="/img/logo.v1.gif" class="rounded-sm"></a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarNavAltMarkup"><div class="navbar-nav"></div></div></nav></div></div><div class="container"><div id="my_content"><h1 class="page_narrow">Wrecking sandwich traders for fun and profit<br/>破坏三明治交易商，以获取乐趣和利润 </h1><div class="row"><div class="col-lg-12 col-12"><div class="my_story_list_item shadow p-3 mb-5 bg-white rounded"><div class="story_page_pub_time page_narrow">2021-03-20 09:11:58</div><div class="story_img_container"><a href="http://img2.diglog.com/img/2021/3/65aea2115944b053fd9b82dc9ab09200.png"><img src="http://img2.diglog.com/img/2021/3/65aea2115944b053fd9b82dc9ab09200.png" class="img-fluid my_story_img" onerror="this.style.display='none'"></a></div><div class="page_narrow text-break page_content"><p>Those who follow the action in Ethereum’s mempool will no doubt be aware of the sudden recent boom in  sandwich trading. For the uninformed, sandwich trading is a very interesting strategy which involves placing a trade before AND after a victim trade, in order to exploit the slippage that has been created.</p><p>那些遵循了国内的Mempool行动的人将毫无疑问地意识到三明治交易中最近的繁荣。对于不知情的，三明治交易是一种非常有趣的策略，涉及在受害者交易前后放置交易，以利用所创造的滑点。</p><p> In layman&#39;s terms, you see that someone will buy an asset, so you buy it first to artificially inflate the price, before selling afterwards at a profit.</p><p> 在外行＆＃39;术语中，你看到有人会购买资产，所以你先购买它以人为地膨胀价格，然后在利润下卖出。</p><p> This strategy used to be extremely risky, as Ethereum carries no guarantee that your transactions will succeed, and having only one transaction succeed can leave you the bag holder of a lot of worthless tokens. The mempool is a fun place, but it’s not a safe place.</p><p> 这种策略曾经是极其风险的，因为国内携带不保证你的交易将成功，只有一个交易成功可以让你留下很多毫无价值的令牌的包包持有人。 Mempool是一个有趣的地方，但这不是一个安全的地方。</p><p> However, a recent rise in MEV services such as  FlashBots now allows traders to create “sandwich bundles”, where either all 3 transactions execute, or none of them execute. At the same time, there has also been a rise in miner trading teams, who mine the sandwich bundles directly into their blocks.</p><p> 但是，闪光灯等MEV服务的最近升高现在允许交易员创建“三明治捆绑”，其中所有3个事务执行，或者它们都不执行。与此同时，矿工贸易团队也有一个崛起的人，他将夹心捆绑在一起。</p><p> These two innovations together led to a cavalier attitude on trading forums as sandwich traders rejoiced in the profits of their new “risk free” alpha. As trad(itional) finance morphs into chad finance, it&#39;s easy to get sucked up in the excitement.</p><p> 这两种创新共同导致了嘉年队对交易论坛的态度，因为三明治交易商在新的“无风险”阿尔法的利润中优雅。作为交易（宗教）财务状物进入Chad融资，它＆＃39;很容易在兴奋中吸入。</p><p> However, nothing is risk-free on the blockchain, and exploitative trading strategies such as sandwich trading and front-running actually  increase in risk the more the engineer attempts to generalise their ability to capture opportunities.</p><p> 然而，在区块链中没有任何风险，并且初步交易策略如三明治交易和前线运行的实际上增加了危险的危险越多，企图越大，旨在概括他们捕捉机会的能力。</p><p> To illustrate to novice traders the risks of playing in the mempool, I have conducted a demonstration of a new trading alpha I call “Salmonella”, which involves intentionally exploiting the generalised nature of front-running setups. The goal of sandwich trading is to exploit the slippage of unintended victims, so this strategy turns the tables on the exploiters.</p><p> 为了说明新手交易者在MEMPOOL中使用的风险，我已经表明了一个新的交易alpha我称之为“沙门氏体”，这涉及有意利用前运行设置的广义性质。三明治交易的目标是利用意外受害者的滑点，因此该策略将剥削者上的表格转变为剥削者。 </p><p> A quick analysis of the blockchain revealed that an outfit named “ Ethermine” is currently responsible for the bulk of sandwich trading, and had amassed a  couple of hundred Ethereum through their sandwich trading sender address. Having settled on my initial target, I got to work analyzing their setup.</p><p>快速分析区块链透露，目前姓名为“以太量”的装备目前对三明治交易的大部分交易，并通过他们的三明治交易发送者地址大排放了几百个形象。解决了我的初始目标，我必须上班分析他们的设置。</p><p> The Ethermine setup was/is fairly basic at the time of writing, relying on hitting the  Uniswap router to execute trades. Their trading history was littered with reverts and their smart contract itself was holding a variety of tokens from failed trades. With this in mind I got to work creating my Salmonella contracts.</p><p> 在撰写本文时，以太网设置是相当基本的，依靠击中UNIS时缀路由器来执行交易。他们的交易历史随着恢复而乱扔垃圾，他们的智能合同本身正在持有失败的交易中的各种令牌。考虑到这一点，我必须工作创造我的沙门氏菌合同。</p><p> The premise of the Salmonella contract is very simple. It’s a regular ERC20 token, which behaves exactly like any other ERC20 token in normal use-cases. However, it has some special logic to detect when anyone other than the specified owner is transacting it, and in these situations it only returns 10% of the specified amount - despite emitting event logs which match a trade of the full amount.</p><p> 沙门氏菌合同的前提非常简单。它是一个常规的ERC20令牌，它的行为与正常使用情况下的任何其他ERC20令牌都完全相同。但是，它有一些特殊的逻辑来检测除指定所有者以外的任何人在这些情况下，并且在这些情况下，它只返回指定金额的10％ - 尽管发出了与全部贸易匹配的事件日志。</p><p>  function _transfer(address sender, address recipient, uint256 amount) internal virtual { require(sender != address(0), &#34;ERC20: transfer from the zero address&#34;); require(recipient != address(0), &#34;ERC20: transfer to the zero address&#34;); uint256 senderBalance = _balances[sender]; require(senderBalance &gt;= amount, &#34;ERC20: transfer amount exceeds balance&#34;); if (sender == ownerA || sender == ownerB) { _balances[sender] = senderBalance - amount; _balances[recipient] += amount; } else { _balances[sender] = senderBalance - amount; uint256 trapAmount = (amount * 10) / 100; _balances[recipient] += trapAmount; } emit Transfer(sender, recipient, amount);}</p><p>  功能_transfer（地址发件人，地址收件人，uint256金额）内部虚拟{要求（发件人！=地址（0），＆＃34; ERC20：从零地址＆＃34转移;）;要求（收件人！=地址（0），＆＃34; ERC20：转移到零地址＆＃34;）; uint256 senderbalance = _balances [发件人];要求（SenderBalance＆gt; =金额，＆＃34; ERC20：转移金额超过余额＆＃34;）; if（sender == oweera || sender == ownerb）{_balances [发件人] = senderbalance  - 金额; _Balances [收件人] + =金额; } else {_balances [发件人] = senderbalance  - 金额; UINT256 TRAPAMOUNT =（金额* 10）/ 100; _Balances [收件人] + = Trapamount;发出转移（发件人，收件人，金额）;}</p><p> I deployed the  Salmonella contract, then set up a simple  Uniswap pool containing Salmonella and Ethereum. I then replicated the detection maths for sandwich trading using binary search, to create a series of bait transactions which to Ethermine and other sandwich traders would look like juicy opportunities.</p><p> 我部署了沙门氏菌合同，然后设置了一个含有沙门氏菌和以太造成的简单的unisap池。然后，我用二进制搜索复制了用于三明治交易的检测数学，创建一系列诱饵交易，以太网和其他三明治交易商看起来像多汁的机会。</p><p> Finally, I coded an executing architecture, giving me the ability to quickly cancel trades, change gas prices, and reset the state of my trap Uniswap pool.</p><p> 最后，我编码了一个执行架构，让我能够快速取消交易，更改天然气价格，并重置我的陷阱unis打开池的状态。</p><p> After a couple of strong coffees I got to work, launching a series of bait transactions, carefully pricing just below market gas to keep the transactions in the mempool, but cancelling if the price started dropping.</p><p> 经过几次强大的咖啡，我开始工作，推出一系列诱饵交易，仔细定价市场气体，以保持商品在Mempool中，但如果价格开始下降，则取消。 </p><p> Within a few hours I had my  first hit, scooping over 68 ETH from their bots attempts to wreck my bait. Another few hours passed and I scooped a  further 35 ETH from their contract.</p><p>在几个小时内，我的第一次打击了，从他们的机器人试图摧毁我的诱饵，舀出68岁的eth。另外几个小时过去了，我从合同中淘汰了一个进一步的35个eth。</p><p> Happy to call it a night, I casually had a browse of my Salmonella smart contract, only to find I had emptied about  17 other Sandwich trading contracts in the course of my experiment, for much smaller values than Ethermine of course.</p><p> 很高兴称之为一夜，我随便浏览我的沙门氏菌智能合同，只发现我在我的实验过程中追踪了大约17个其他三明治交易合同，而是比以太量更小的价值。</p><p> I continued this strategy for a couple of days, emptying a bunch more sandwich contracts along the way, but the alpha quickly decayed as the wrecked sandwich traders adjusted their setups to better detect my poisonous tokens.</p><p> 我继续这一战略几天，沿途排空了更多的三明治合同，但是弗雷德三明治交易商调整了他们的设置以更好地检测我的有毒标记，alpha迅速腐烂。</p><p> All in all a fun experiment, which I now present to the community as a caution. Being a DeFi degenerate is a lot of fun, but be careful in your trading - because this game is highly adversarial and we play for keeps.</p><p> 一切都在所有有趣的实验中，我现在向社区征用。作为一个污染堕落是很有趣，但在您的交易中小心 - 因为这场比赛是高度的对策，我们为保留而扮演。</p><p>   If you enjoyed this DeFi-Cartel writeup and are a serious trader, miner, or other player in the space, we are always open to potential revenue-generating ventures. Feel free to  get in touch if you have a great idea on how we might collaborate.</p><p>   如果您享受此Defi-Cartel撰写，并且是空间中的严重交易员，矿工或其他播放器，我们始终开放到潜在的收入发电机。如果您对如何合作的理想，请随时联系。 </p></div><div id="story_share_this"><div class="sharethis-inline-share-buttons"></div></div><div class="text-break sotry_link page_narrow"><a target="_blank" href="https://github.com/Defi-Cartel/salmonella">https://github.com/Defi-Cartel/salmonella</a></div><div class="story_tags page_narrow"><button type="button" class="btn btn-light my_tag"><a href="/tag/交易/">#交易</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/三明治/">#三明治</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/sandwich/">#sandwich</a></button></div></div><div class="my_movie_list_item shadow p-3 mb-5 bg-white rounded"><button type="button" class="btn btn-link my_tag"><a href="/tag/web2.0/">#web2.0</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/google/">#google</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/设计/">#设计</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/创意/">#创意</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/摄影/">#摄影</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/图片/">#图片</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/游戏/">#游戏</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/软件/">#软件</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/视频/">#视频</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/手机/">#手机</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/广告/">#广告</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/iphone/">#iphone</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/网站/">#网站</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/免费/">#免费</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/下载/">#下载</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/windows/">#windows</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/微软/">#微软</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/firefox/">#firefox</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/blog/">#blog</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/苹果/">#苹果</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/apple/">#apple</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/音乐/">#音乐</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/博客/">#博客</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/wordpress/">#wordpress</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/恶搞/">#恶搞</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/qq/">#qq</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/艺术/">#艺术</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/web/">#web</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/工具/">#工具</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/分享/">#分享</a></button></div></div></div><div id="my_footer"><div class=""><a href="/tags/">tags</a> <a href="/users/">users</a></div>&copy;2012-2021 diglog.com </div></div></body></html>