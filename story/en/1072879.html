<!doctype html><html lang="zh-hans"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>最笨的IRC机器人The Dumbest IRC Bot</title><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"><link rel="stylesheet" href="/img/css.css?random="><link data-rh="true" rel="icon" href="/img/favicon.ico"/><script data-ad-client="ca-pub-6067137220025946" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script type="text/javascript" src="https://platform-api.sharethis.com/js/sharethis.js#property=5effb96910009800120b8d4d&product=inline-share-buttons" async="async"></script>
<script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?03c1a0f31299b4a2fbb83c34d6beaac9";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script></head><body><div id="my_header"><div class="container"><nav class="navbar navbar-expand-lg"><a class="navbar-brand" href="/"><img alt="diglog" src="/img/logo.v1.gif" class="rounded-sm"></a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarNavAltMarkup"><div class="navbar-nav"></div></div></nav></div></div><div class="container"><div id="my_content"><h1 class="page_narrow">The Dumbest IRC Bot<br/>最笨的IRC机器人</h1><div class="row"><div class="col-lg-12 col-12"><div class="my_story_list_item shadow p-3 mb-5 bg-white rounded"><div class="story_page_pub_time page_narrow">2022-02-13 14:16:50</div><div class="page_narrow text-break page_content"><p>I’m an  IRC power user,having been hanging out in 200+ channels on 10+ networks 24/7 for the past 10years or so. Because IRC is standardized and simple, a commonpastime for IRC enthusiasts is the creation of bots. In one of the socialchannels I hang out in, we’ve spent the past 6 years gradually building theworld’s stupidest IRC bot: wormy.</p><p>我是一名IRC超级用户，在过去10年左右的时间里，我每天24小时在10+网络上的200多个频道里闲逛。由于IRC标准化且简单，IRC爱好者的一个常见消遣就是创建机器人。在我常去的一个社交渠道里，我们花了6年时间逐步打造了世界上最愚蠢的IRC机器人：wormy。</p><p> For a start, wormy is highly schizophrenic. Though it presents itself as asingle bot, it is in fact a bouncer which combines theconnections of 7 independent bots. At one point, this number was higher —as many as 11 — but some bots were consolidated.</p><p>首先，沃米患有高度精神分裂症。虽然它以单个机器人的形式出现，但实际上它是一个结合了7个独立机器人连接的保镖。这个数字一度更高——多达11个——但一些机器人被整合了。</p><p> &lt;@sircmpwn&gt; .bots&lt;wormy&gt; Serving text/html since 2017, yours truly [&#34;ps&#34;] For a list of commands, try `.help`&lt;wormy&gt; minus&#39; parcel tracking bot r10.b563abc (built on 2020-06-06T12:02:13Z, https://git.sr.ht/~minus/parcel-tracking-bot)&lt;wormy&gt; minus&#39; dice bot r16.498a0b8 (built on 2020-02-04T20:16:14Z, https://git.sr.ht/~minus/dice-irc-bot)&lt;wormy&gt; Featuring arbitrary code execution by design and buffer overflows by mistake, jsbot checking in&lt;wormy&gt; Radiobot coming to you live from The Internet, taking listener requests at 1-800-GUD-SONGS&lt;wormy&gt; urlbot: live streaming moe directly to your eyeballs&lt;wormy&gt; o/ SirCmpwn made me so he wouldn&#39;t forget shit so much</p><p>&lt@sircmpwn&gt。机器人&lt；沃米&gt；自2017年起提供文本/html，您的真实[&#34；ps&#34；]要查看命令列表，请尝试`。帮助`&lt；沃米&gt；负&#39；包裹追踪机器人r10。b563abc（建于2020-06-06T12:02:13Z，https://git.sr.ht/~减号/包裹追踪机器人）&lt；沃米&gt；负&#39；骰子机器人r16。498a0b8（建于2020-02-04T20:16:14Z，https://git.sr.ht/~minus/dice irc bot）&lt；沃米&gt；jsbot的特点是通过设计执行任意代码，并且错误地导致缓冲区溢出；沃米&gt；Radiobot通过互联网实时向您发送请求，接听1-800-GUD-SONGS&lt；沃米&gt；urlbot：直播视频直接传到你的眼球&lt；沃米&gt；o/SirCmpwn让我这样他就不会&#39；别忘得太多</p><p> These bots provide a variety of features for channel members, such as checkingtracking numbers for parcels out for delivery, requesting songs for our privateinternet radio, reading out the mimetypes and titles of URLs mentioned in thechannel, or feeding queries into Wolfram Alpha.</p><p>这些机器人为频道成员提供了多种功能，例如检查要递送的包裹的追踪号码，为我们的私人互联网广播请求歌曲，读取频道中提到的URL的模拟类型和标题，或者将查询输入Wolfram Alpha。</p><p> &lt;wormy&gt; Now playing: 8369492 小さき者への贖罪の為のソナタ by ALI PROJECT from 禁書 (4m42s FLAC)&lt;wormy&gt; Now playing: 1045361 アキノサクラ by Wakana from magic moment (5m0s FLAC) #live ♥ minus&lt;wormy&gt; Now playing: d0b1cb3 Forevermore by F from Cafe de Touhou 3 (4m9s FLAC) ♥ hummer12007&lt;wormy&gt; Now playing: 0911e90 Moeru San Shimai by Iwasaki Taku from Tengen Toppa Gurren Lagann Original Soundtrack - CD01 (3m3s FLAC)&lt;wormy&gt; Now playing: ac1a17e rebellion anthem by Yousei teikoku from rebellion anthem (5m15s MP3) ♥ minus&lt;wormy&gt; Now playing: a5ab39a Desirable Dream by GET IN THE RING from Aki-秋- (4m38s FLAC) ♥ minus</p><p>&lt；沃米&gt；正在播放：8369492小さき者への贖罪の為のソナタ 作者：阿里项目禁書 （4m42s FLAC）&lt；沃米&gt；正在播放：1045361アキノサクラ 来自魔法时刻的Wakana（佛罗里达州500万分之一）#live♥ 负&lt；沃米&gt；现在播放：d0b1cb3 Forevermore by F，来自Cafe de Touhou 3（佛罗里达州4m9s）♥ 悍马12007&lt；沃米&gt；现在播放：0911e90 Moeru San Shimai由岩崎Taku创作，来自Tengen Toppa Gurren Lagann原声带-CD01（3m3s FLAC）&lt；沃米&gt；现在播放的是：由优生teikoku创作的ac1a17e叛军歌，来自叛军歌（5m15s MP3）♥ 负&lt；沃米&gt；现在播放：A5AB39从Aki进入拳击场是一个令人向往的梦想-秋- （4m38s FLAC）♥ 减</p><p> Things really took off with the introduction of a truly stupid bot last year: jsbot. This bot adds a  .js command whichexecutes arbitrary JavaScript (using Fabrice Bellard’s quickjs) expressions, and sending theirstringified result to the channel.</p><p>去年，随着一个真正愚蠢的机器人jsbot的推出，事情真的开始了。这个机器人增加了一个。js命令，该命令执行任意JavaScript（使用Fabrice Bellard的quickjs）表达式，并将其字符串化结果发送到通道。</p><p>  We soon realized, however, that what we had effectively created was a persistentJavaScript environment which was connected to IRC. This has made it possible towrite even more IRC bots in the least practical manner imaginable: by writingJavaScript statements, one line at a time, into IRC messages, and hoping itworks.</p><p>然而，我们很快意识到，我们实际上创建的是一个连接到IRC的persistentJavaScript环境。这使得以最不实用的方式编写更多的IRC机器人成为可能：一次编写一行JavaScript语句到IRC消息中，并希望它能工作。</p><p>   One “feature”, inspired by  BryanCantrill, records every time theword “fuck” is used in the channel. Then, whenever anyone says “wtf”, the bothelpfully offers up an example of the usage of the word “fuck” by printing oneof the recorded messages. Here’s how it was made:</p><p>一个由布莱恩·坎特里尔（BryanCantrill）启发的“特写”记录了频道中每次使用“操”一词的情况。然后，每当有人说“wtf”时，bot都会通过打印一条记录的消息来提供一个使用“fuck”这个词的例子。下面是它的制作过程：</p><p> &lt;sircmpwn&gt; .js let wtf = [];&lt;wormy&gt; =&gt; undefined&lt;sircmpwn&gt; .js on(/fuck/, msg =&gt; wtf.push(msg.text))&lt;wormy&gt; =&gt; 25&lt;sircmpwn&gt; .js on(/^what the fuck$/, msg =&gt; msg.reply(wtf[Math.floor(Math.random() * wtf.length)]))&lt;wormy&gt; =&gt; 26</p><p>&lt；sircmpwn&gt。js let wtf=[]&书信电报；沃米&gt=&gt；未定义&lt；sircmpwn&gt。js on（/fuck/，msg=&gt；wtf.push（msg.text））&lt；沃米&gt=&gt；25&lt；sircmpwn&gt。js on（/^what-fuck$/，msg=&gt；msg.reply（wtf[Math.floor（Math.random（）*wtf.length）]）&lt；沃米&gt=&gt；26</p><p> Here’s one which records whenever someone says “foo++” or “foo--” and keepstrack of scores:</p><p>这里有一个记录每当有人说“foo++”或“foo--”时的记录，并记录分数：</p><p> .js on(/^([a-zA-Z0-9_]+)(\+\+|--)$/, (msg, thing, op) =&gt; { if (typeof scores[thing] === &#34;undefined&#34;) scores[thing] = 0; scores[thing] += op === &#34;++&#34; ? 1 : -1; msg.reply(`${thing}: ${scores[thing]}`) });.js on(/\.score (.*)/, (msg, item) =&gt; msg.reply(scores[item]));.js let worst = () =&gt; Object.entries(scores).sort((a, b) =&gt; a[1] - b[1]).slice(0, 5).map(s =&gt; `${s[0]}: ${s[1]}`).join(&#34;, &#34;);.js let best = () =&gt; Object.entries(scores).sort((a, b) =&gt; b[1] - a[1]).slice(0, 5).map(s =&gt; `${s[0]}: ${s[1]}`).join(&#34;, &#34;);.js on(/^.worst$/, msg =&gt; msg.reply(worst()));.js on(/^.best$/, msg =&gt; msg.reply(best()));</p><p>.js on（/^（[a-zA-Z0-9_]+）（\+\+\+-）$/，（msg，thing，op）=&gt；{if（分数类型[事物]===&#34；未定义&#34；）分数[事物]=0；得分（事物）+=op===&#34++&#34; ? 1 : -1; 味精。回复（${thing}:${scores[thing]}）}）；。js on（/\.分数（.*）/，（信息，项目）=&gt；味精。回复（分数[项目]）；。js let BEST=（）=&gt；对象参赛作品（分数）。排序（（a，b）=&gt；a[1]-b[1]）。切片（0,5）。映射（s=&gt；`s[0]}:${s[1]}`）。加入（&#34；，&#34；）；。js let best=（）=&gt；对象参赛作品（分数）。排序（（a，b）=&gt；b[1]-a[1]）。切片（0,5）。映射（s=&gt；`s[0]}:${s[1]}`）。加入（&#34；，&#34；）；。js on（/^.best$/，msg=&gt；msg.reply（best（））；。js on（/^.best$/，msg=&gt；msg.reply（best（））；</p><p> Other “features” written in horrible one-liners include SI unit conversions,rewriting undesirable URLs (e.g. m.wikipedia.org =&gt; en.wikipedia.org), answering“wormy you piece of shit” with “¯\_(ツ)_/¯”, and giving the obvious response to“make me a sandwich”.</p><p>用可怕的一行程序编写的其他“功能”包括国际单位制转换、重写不受欢迎的URL（例如：m.wikipedia.org=&gt；en.wikipedia.org），用“？”回答“wormy you Piect”\_(ツ)_/“”，并给出明显的回应“给我做个三明治”。</p><p> Eventually it occurred to us that we had two dozen stupid IRC bots storing notonly their state, but their code, in a single long-lived process on some server.For a while, the answer to this was adding “don’t reboot this server kthx” tothe MotD, but eventually we did some magic nonsense to make certain variablespersistent:</p><p>最后，我们突然想到，我们有24个愚蠢的IRC机器人，在某台服务器上的一个长期过程中，不仅存储它们的状态，还存储它们的代码。有一段时间，这个问题的答案是在MotD中添加“不要重新启动这个服务器kthx”，但最终我们做了一些神奇的废话，以使某些变量：</p><p> let  persistent  =  {}; function  writePersistent ()  {  let  fd  =  std . open ( &#34;persist.json&#34; ,  &#34;w&#34; );  fd . puts ( JSON . stringify ( persistent ));  fd . close (); } let  persist_handler  =  {  set :  ( obj ,  prop ,  val )  =&gt;  {  obj [ prop ]  =  val ;  writePersistent ();  }, }; let  p  =  std . loadFile ( &#34;persist.json&#34; ); if  ( p  !==  null )  {  persistent  =  JSON . parse ( p );  Object . keys ( persistent ). map ( key  =&gt;  {  let  proxy  =  new  Proxy ( persistent [ key ],  persist_handler );  persistent [ key ]  =  proxy ;  exports [ key ]  =  proxy ;  }); } exports . persist  =  ( name ,  obj )  =&gt;  {  let  proxy  =  new  Proxy ( obj ,  persist_handler );  persistent [ name ]  =  proxy ;  writePersistent ();  return  proxy ; };</p><p>让persistent={}；函数writePersistent（）{let fd=std.open（&#34；persist.json&#34；，&#34；w&#34；）；fd。puts（JSON.stringify（persistent））；fd。关闭（）；}让persist_handler={set:（obj，prop，val）=&gt；{obj[prop]=val；writepersist（）；}，}；设p=std。loadFile（&#34；persist.json&#34；）；if（p！==null）{persistent=JSON.parse（p）；Object.keys（persistent）.map（key=&gt；{let proxy=new proxy（persistent[key]，persistent_handler）；persistent[key]=proxy；exports[key]=proxy；}出口。persist=（名称，obj）=&gt；{let proxy=new proxy（obj，persist_handler）；persistent[name]=proxy；writePersistent（）；return proxy；}；</p><p> Anyway, there’s no moral to this story. We just have a silly IRC bot and Ithought I’d share that with you. If you want a stupid IRC bot for your ownchannel,  jsbot is available on sourcehut. Ihighly disrecommend it and disavow any responsibility for the consequences.</p><p>不管怎样，这个故事没有寓意。我们只是有一个愚蠢的IRC机器人，我想我会和你分享。如果你想在自己的频道上安装一个愚蠢的IRC机器人，那么可以在sourcehut上使用jsbot。我非常反感它，并否认对其后果负有任何责任。</p></div><div id="story_share_this"><div class="sharethis-inline-share-buttons"></div></div><div class="story_tags page_narrow"><button type="button" class="btn btn-light my_tag"><a href="/tag/机器人/">#机器人</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/irc/">#irc</a></button></div></div><div class="my_movie_list_item shadow p-3 mb-5 bg-white rounded"><button type="button" class="btn btn-link my_tag"><a href="/tag/web2.0/">#web2.0</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/google/">#google</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/设计/">#设计</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/创意/">#创意</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/摄影/">#摄影</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/图片/">#图片</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/游戏/">#游戏</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/软件/">#软件</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/视频/">#视频</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/广告/">#广告</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/手机/">#手机</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/iphone/">#iphone</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/网站/">#网站</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/免费/">#免费</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/下载/">#下载</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/windows/">#windows</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/微软/">#微软</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/苹果/">#苹果</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/firefox/">#firefox</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/blog/">#blog</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/apple/">#apple</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/音乐/">#音乐</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/博客/">#博客</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/wordpress/">#wordpress</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/恶搞/">#恶搞</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/qq/">#qq</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/艺术/">#艺术</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/谷歌/">#谷歌</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/web/">#web</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/工具/">#工具</a></button></div></div></div><div id="my_footer"><div class=""><a href="/tags/">tags</a> <a href="/users/">users</a></div>&copy;2012-2021 diglog.com </div></div></body></html>