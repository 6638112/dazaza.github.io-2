<!doctype html><html lang="zh-hans"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>苹果公司允许MacOS Big Sur上的某些网络流量绕过防火墙</title><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"><link rel="stylesheet" href="/img/css.css?random="><link data-rh="true" rel="icon" href="/img/favicon.ico"/><script data-ad-client="ca-pub-6067137220025946" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script type="text/javascript" src="https://platform-api.sharethis.com/js/sharethis.js#property=5effb96910009800120b8d4d&product=inline-share-buttons" async="async"></script>
<script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?03c1a0f31299b4a2fbb83c34d6beaac9";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script></head><body><div id="my_header"><div class="container"><nav class="navbar navbar-expand-lg"><a class="navbar-brand" href="/"><img alt="diglog" src="/img/logo.v1.gif" class="rounded-sm"></a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarNavAltMarkup"><div class="navbar-nav"></div></div></nav></div></div><div class="container"><div id="my_content"><h1 class="page_narrow">苹果公司允许MacOS Big Sur上的某些网络流量绕过防火墙</h1><div class="row"><div class="col-lg-12 col-12"><div class="my_story_list_item shadow p-3 mb-5 bg-white rounded"><div class="story_page_pub_time page_narrow">2020-11-22 10:43:51</div><div class="story_img_container"><a href="http://img2.diglog.com/img/2020/11/9d4673f1ae1fd359234dadb83a62dfc4.jpeg"><img src="http://img2.diglog.com/img/2020/11/9d4673f1ae1fd359234dadb83a62dfc4.jpeg" class="img-fluid my_story_img" onerror="this.style.display='none'"></a></div><div class="page_narrow text-break page_content"><p>防火墙不仅适用于公司网络。大量具有安全意识或隐私意识的人员还使用它们来过滤或重定向流入和流出计算机的流量。苹果最近对macOS进行了重大更改，这挫败了这些努力。</p><p> 从上周发布的Big Sur开始，大约50个Apple特定的应用和过程不再通过Little Snitch和Lulu等防火墙进行路由。 Mac和iOS企业开发人员Jamf的安全研究员Patrick Wardle在周末披露了这一更改之后，才发现了无证豁免。</p><p> 在大苏尔，苹果决定免除许多应用程序通过其现在需要使用第三方防火墙（LuLu，Little Snitch等）的框架的路由。🧐问：这是否可能被恶意软件滥用而绕过这样的防火墙？ 🤔-答：显然是的，也很容易-😬😱😭pic.twitter.com/CCNcnGPFIB</p><p>-帕特里克·沃德尔（@patrickwardle）2020年11月14日</p><p>  为了证明此举带来的风险，前国家安全局（NSA）黑客沃德尔（Wardle）演示了恶意软件开发人员如何利用此更改以经过实践检验的安全措施进行最终解决。他设置Lulu来阻止运行Big Sur的Mac上的所有传出流量，然后运行一个小型编程脚本，该脚本与Apple豁免的其中一个应用程序进行了交互。 python脚本可以毫不费力地到达他设置的命令和控制服务器，以模拟恶意软件常用的命令和控制服务器，以接收命令并泄露敏感数据。</p><p>“好心地要求（强迫？）一个受信任的Apple产品来生成到攻击者控制的服务器的网络流量，并且可以（滥用）它来泄露文件，” Wardle提到脚本时告诉我。 “基本上，‘Apple先生，您能把这个文件发送到Patrick的远程服务器吗？’我们会同意的。而且由于流量来自受信任的项目，因此永远不会通过防火墙进行路由……这意味着防火墙是100％盲目的。”</p><p>    Wardle在Twitter上发布了他在Big Sur Beta阶段提交给Apple的错误报告的一部分。它特别警告说，更改后“诸如防火墙之类的基本安全工具无效”。</p><p> 苹果尚未解释这一变化背后的原因。防火墙配置错误通常是导致软件无法正常运行的原因。一种可能性是苹果实施了此举，以减少其收到的支持请求的数量，并使Mac教育给那些没有学历的人们建立有效的防火墙规则。防火墙免除自己的流量并不罕见。苹果可能会采用相同的理由。</p><p> 但是无法覆盖设置违反了一个核心原则，即人们应该能够有选择地限制来自其自己计算机的流量。如果Mac确实受到感染，此更改还为黑客提供了一种绕开许多人可以有效缓解此类攻击的方法。</p><p> 安全公司Malw​​arebytes的Mac和移动产品部门主管Thomas Reed表示：“我看到的问题是，它确实为Patrick演示的事情打开了大门……恶意软件作者可以使用它来将数据潜入防火墙。” “此外，总有可能出于某种原因某人可能出于某种合法的需要阻止某些Apple流量，但这无需使用Mac外部的某种硬件网络过滤器就可以消除这种能力。”</p><p>想要知道哪些应用程序和进程免税的人可以打开macOS终端并输入sudo默认值，请参阅/System/Library/Frameworks/NetworkExtension.framework/Resources/Info.plist ContentFilterExclusionList。</p><p>  这项更改是在Apple不赞成使用macOS内核扩展的情况下进行的，该软件开发人员曾经使用过这些扩展来使应用程序直接与OS进行交互。不推荐使用的是NKE（网络内核扩展的缩写），第三方防火墙产品用来监视传入和传出流量。</p><p> 苹果公司代替NKE，引入了一种新的用户模式框架，称为网络扩展框架。要在Big Sur上运行，必须重写所有使用NKE的第三方防火墙以使用新框架。</p><p> Apple代表未回复有关此更改的电子邮件问题。如果他们稍后回复，则该帖子将被更新。同时，如上面Reed所述，想要取消这项新豁免的人将不得不依靠从Mac外部运行的网络过滤器。</p></div><div id="story_share_this"><div class="sharethis-inline-share-buttons"></div></div><div class="text-break sotry_link page_narrow"><a target="_blank" href="https://arstechnica.com/gadgets/2020/11/apple-lets-some-big-sur-network-traffic-bypass-firewalls/">https://arstechnica.com/gadgets/2020/11/apple-lets-some-big-sur-network-traffic-bypass-firewalls/</a></div><div class="story_tags page_narrow"><button type="button" class="btn btn-light my_tag"><a href="/tag/苹果/">#苹果</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/apple/">#apple</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/绕过/">#绕过</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/lets/">#lets</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/防火墙/">#防火墙</a></button></div></div><div class="shadow p-3 mb-5 bg-white rounded clearfix"><div class="container"><div class="row"><div class="col-sm"><div><a target="_blank" href="/story/1035747.html"><img src="http://img2.diglog.com/img/2020/11/thumb_0f0164a3c8d7e31c4067505ab6d1c882.jpg" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1035747.html">苹果因iPhone电池节流以1.13亿美元与各州达成和解</a></div><span class="my_story_list_date">2020-11-22 0:42</span></div><div class="col-sm"><div><a target="_blank" href="/story/1035725.html"><img src="http://img2.diglog.com/img/2020/11/thumb_774ded5c3164cd5f9820f8da98752cfd.jpg" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1035725.html">苹果计划限制“令人毛骨悚然”的用户跟踪</a></div><span class="my_story_list_date">2020-11-22 0:29</span></div><div class="col-sm"><div><a target="_blank" href="/story/1035682.html"><img src="http://img2.diglog.com/img/2020/11/thumb_f61b49b52348e0351d584194ed18e2b7.png" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1035682.html">克雷格·费德里希（Craig Federighi），约翰尼·斯鲁吉（Johny Srouji）和格雷格·乔斯维克（Greg Joswiak）谈苹果如何设计M1，UMA的重要性，在更高功率水平下性能的非线性增长等等。</a></div><span class="my_story_list_date">2020-11-21 23:38</span></div><div class="col-sm"><div><a target="_blank" href="/story/1035596.html"><img src="http://img2.diglog.com/img/2020/11/thumb_f9611bb522deca048be9ec7930b72cb7.jpeg" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1035596.html">苹果硅和失去我们的遗产</a></div><span class="my_story_list_date">2020-11-21 18:19</span></div></div></div></div><div class="my_movie_list_item shadow p-3 mb-5 bg-white rounded"><button type="button" class="btn btn-link my_tag"><a href="/tag/web2.0/">#web2.0</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/google/">#google</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/设计/">#设计</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/创意/">#创意</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/摄影/">#摄影</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/游戏/">#游戏</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/图片/">#图片</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/软件/">#软件</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/视频/">#视频</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/手机/">#手机</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/广告/">#广告</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/apple/">#apple</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/iphone/">#iphone</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/网站/">#网站</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/免费/">#免费</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/下载/">#下载</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/windows/">#windows</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/微软/">#微软</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/firefox/">#firefox</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/苹果/">#苹果</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/blog/">#blog</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/音乐/">#音乐</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/博客/">#博客</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/wordpress/">#wordpress</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/恶搞/">#恶搞</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/艺术/">#艺术</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/qq/">#qq</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/web/">#web</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/谷歌/">#谷歌</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/工具/">#工具</a></button></div></div></div><div id="my_footer"><div class=""><a href="/tags/">tags</a> <a href="/users/">users</a></div>&copy;2012-2021 diglog.com </div></div></body></html>