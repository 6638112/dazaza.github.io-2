<!doctype html><html lang="zh-hans"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>感知哈希的问题</title><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"><link rel="stylesheet" href="/img/css.css?random="><link data-rh="true" rel="icon" href="/img/favicon.ico"/><script data-ad-client="ca-pub-6067137220025946" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script type="text/javascript" src="https://platform-api.sharethis.com/js/sharethis.js#property=5effb96910009800120b8d4d&product=inline-share-buttons" async="async"></script>
<script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?03c1a0f31299b4a2fbb83c34d6beaac9";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script></head><body><div id="my_header"><div class="container"><nav class="navbar navbar-expand-lg"><a class="navbar-brand" href="/"><img alt="diglog" src="/img/logo.v1.gif" class="rounded-sm"></a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarNavAltMarkup"><div class="navbar-nav"></div></div></nav></div></div><div class="container"><div id="my_content"><h1 class="page_narrow">感知哈希的问题</h1><div class="row"><div class="col-lg-12 col-12"><div class="my_story_list_item shadow p-3 mb-5 bg-white rounded"><div class="story_page_pub_time page_narrow">2021-08-07 05:18:53</div><div class="page_narrow text-break page_content"><p>苹果刚刚宣布他们将使用“感知哈希”来检测 iPhone 上的非法照片。我有一些关于这项技术的经验可以分享。在我的公司，我们使用“感知哈希”来查找图像的副本，其中每个副本都略有改动。这是在股票摄影的背景下，每个股票代理商（例如 Getty Images、Adobe Stock、Shutterstock）添加自己的水印、图像文件 ID，或者锐化图像或稍微改变颜色，例如通过添加对比度。对于我们的客户，即上传照片到这些机构并通过他们的平台出售的摄影师，我们需要在这些机构上找到他们所有照片的副本。我们使用感知哈希来找到它们。大多数公开记录的感知哈希算法的工作原理是将图像数据减少为位向量（“哈希”），然后将其与哈希数据库进行比较，通常通过应用距离度量，即在许多情况下所谓的汉明距离，两个散列不同的位数。图像数据缩减通常包括调整图像大小、丢弃其颜色信息、在频域中进行过滤（通常使用 DCT 或小波），在某些情况下（据说是专有的 PhotoDNA 算法）计算这些值的直方图，在 Apple 的情况下使用卷积神经网络将图像信息减少为浮点向量，然后将该向量量化为最终的哈希位。对于我们的产品，我已经评估了平均哈希、pHash、dHash 以及快速多分辨率图像查询论文中描述的算法，该论文也用于 imgSeek 软件。我们目前必须匹配大约 1 亿张照片，发现后者效果最好，即它导致最少的误报和最少的漏报。 （我在这里发布了一个 Golang 实现。）这些算法都不是防水的。让我给你举一个误报的例子。我们试图找到下图的副本： 这些算法有时会失败并不奇怪。但在 1 亿张照片的背景下，它们确实经常失败。而且它们不会以可接受的方式失败：很容易看出这两个图像的总体构图是相似的（米色背景，右上方中间带有深色口音）。但它们的内容完全不同。与其他散列算法遇到的冲突看起来不同，通常以意想不到的方式出现，但所有这些算法都存在冲突。当我们处理感知散列时，任何距离度量都没有固定的阈值，这将清楚地将误报与漏报分开。在上面的示例中，我们可以应用更严格的阈值，但这会导致许多照片的实际副本无法检测到。简单的修改，例如水印或轻微的颜色校正，会导致算法得出“这两张图像不一样”的结论。</p><p>特别是当使用汉明距离来比较哈希时，没有太多空间来微调阈值。让我们假设我们正在处理 256 位散列：两个图像相同的汉明距离可能只有几位，即汉明距离，比如 16，已经表明了很多差异。在数百万张图片的背景下，将汉明距离阈值上下移动 1 将对生成的误报或漏报的数量产生巨大影响。即使汉明距离阈值为 0，也就是说，当两个哈希值相同时，鉴于每年拍摄的大量照片（2021 年为 1.4 万亿，现在将其分解），我看不出 Apple 如何避免大量碰撞按 iPhone 市场份额和国家/地区来看，美国 iPhone 用户的数量仍然非常大）。根据 Apple 的说法，少量的阳性结果（错误与否）不会触发帐户被标记。但同样，在这些数字上，我相信您仍然会遇到太多情况，其中一个帐户有多张照片被触发为误报。 （Apple 表示概率为“万亿分之一”，但尚不清楚他们是如何得出这样的估计的。）这些案例将被人工审查。也就是说，根据 Apple 的说法，Apple 员工会查看您的（标记的）照片。苹果是否有足够的人力来解决他们算法的缺点？我们只能希望如此。感知哈希是混乱的。图像数据减少到少量位的简单事实会导致冲突，从而导致误报。当此类算法用于检测犯罪活动时，尤其是在 Apple 规模上，许多无辜的人可能会面临严重的问题。我公司的客户对感知散列的失败感到有些不便（我们有一个 UI 可以让他们进行手动更正）。但是当谈到 CSAM 检测及其故障潜力时，那就是完全不同的球赛了。不用说，我很担心这个。</p></div><div id="story_share_this"><div class="sharethis-inline-share-buttons"></div></div><div class="story_tags page_narrow"><button type="button" class="btn btn-light my_tag"><a href="/tag/感知/">#感知</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/算法/">#算法</a></button></div></div><div class="my_movie_list_item shadow p-3 mb-5 bg-white rounded"><button type="button" class="btn btn-link my_tag"><a href="/tag/web2.0/">#web2.0</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/google/">#google</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/设计/">#设计</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/创意/">#创意</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/摄影/">#摄影</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/图片/">#图片</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/游戏/">#游戏</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/软件/">#软件</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/视频/">#视频</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/手机/">#手机</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/广告/">#广告</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/iphone/">#iphone</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/网站/">#网站</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/免费/">#免费</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/下载/">#下载</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/windows/">#windows</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/微软/">#微软</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/苹果/">#苹果</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/blog/">#blog</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/firefox/">#firefox</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/apple/">#apple</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/音乐/">#音乐</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/博客/">#博客</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/wordpress/">#wordpress</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/恶搞/">#恶搞</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/qq/">#qq</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/艺术/">#艺术</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/web/">#web</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/工具/">#工具</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/分享/">#分享</a></button></div></div></div><div id="my_footer"><div class=""><a href="/tags/">tags</a> <a href="/users/">users</a></div>&copy;2012-2021 diglog.com </div></div></body></html>