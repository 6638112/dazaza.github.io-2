<!doctype html><html lang="zh-hans"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Grub2安全更新导致系统无法引导</title><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"><link rel="stylesheet" href="/img/css.css?random="><link data-rh="true" rel="icon" href="/img/favicon.ico"/><script data-ad-client="ca-pub-6067137220025946" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script type="text/javascript" src="https://platform-api.sharethis.com/js/sharethis.js#property=5effb96910009800120b8d4d&product=inline-share-buttons" async="async"></script>
<script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?03c1a0f31299b4a2fbb83c34d6beaac9";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script></head><body><div id="my_header"><div class="container"><nav class="navbar navbar-expand-lg"><a class="navbar-brand" href="/"><img alt="diglog" src="/img/logo.v1.gif" class="rounded-sm"></a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarNavAltMarkup"><div class="navbar-nav"></div></div></nav></div></div><div class="container"><div id="my_content"><h1 class="page_narrow">Grub2安全更新导致系统无法引导</h1><div class="row"><div class="col-lg-12 col-12"><div class="my_story_list_item shadow p-3 mb-5 bg-white rounded"><div class="story_page_pub_time page_narrow">2020-07-31 00:04:47</div><div class="page_narrow text-break page_content"><p>问题描述：在全新的RHEL 8.2最小安装上应用RHSA-2020：3216 grub2安全更新和RHSA-2020：3218内核安全和错误修复更新会导致系统无法启动。如何重现：一致要重现的步骤：1.在以EFI模式运行的系统上，从2020年7月29日下载的二进制DVD iso安装RHEL 8.2&34；最小版本。2.在以EFI模式运行的系统上安装RHSA-2020：3216 grub2安全更新和RHSA-2020：3218内核安全和错误修复更新。应用截止到2020年7月29日的最新更新&#34；yum update&#34；3.重新启动系统实际结果：开机自检后系统挂起，GRUB菜单从未加载预期结果：系统应显示内核版本选择菜单，然后引导至RHEL附加信息：可在RHEL 8.2的多个连续全新安装和一个现有RHEL 8.2系统上重现。</p><p>您可以通过在BIOS中禁用安全引导来解决此问题。不太理想。当然可以，但是如果你看不到GRUB..。听起来好像安全引导链上出了什么问题。</p><p>我在故障排除模式下使用安装ISO引导我的系统，将其chroot到/mnt/sysimage，使用grub2-mkconfig重新生成grub.cfg，然后执行grub2-install.现在我可以通过GRUB，但在切换根目录时遇到了紧急shell故障。</p><p>(回复评论#6中的Sandro Bonazzola)&gt；我使用处于疑难解答模式的安装ISO引导我的系统，chroot&gt；到/mnt/sysimage，使用grub2-mkconfig重新生成grub.cfg并执行&gt；grub2-install.&gt；现在我可以跳过GRUB，但在紧急shell失败的切换&&gt;根上遇到了问题。通过实际将grubenv文件复制到/boot解决了这个问题。</p><p>您好，如果您是Red Hat的客户，请务必打开Red Hat支持的支持案例。这将允许我们的支持工程师收集调试数据，这些数据可能有助于了解在这些个别情况下发生的情况。谢谢你，克里夫。</p><p>另请参阅RHEL7上的BZ 1862045。在禁用了安全引导的HPE硬件上运行。解决方案是将GRUB2/shim/mokutil降级。</p><p>我也遇到了这个问题，并通过以下方法解决了问题：1)引导到hel-8(centos-8)故障排除模式2)chroot到/mnt/sysimage3)设置网络4)yum降级shim-x64 grub2\*5)重新引导将引导模式切换到bios中的遗留模式无济于事。</p><p>(回复Jarola v Suchanek的备注#15)&gt；我也遇到了这个问题，并通过&gt；&gt；1)引导至rhl-8(centos-8)故障排除模式&gt；2)已Chroot引导至/mnt/sysimage&gt；3)设置网络&gt；4)yum降级shim-x64 grub2\*&gt；5)重新引导&gt；将引导模式切换到旧版。您能试着逐个降低它们的等级，以确认是哪个软件包导致了这个问题吗？因为如果我理解正确的话，当安全引导被禁用时问题就会发生，这应该是可能的。</p><p>解决方案告诉我保护百胜不升级我从RHEL8.2买了新笔记本电脑没有百胜升级系统。但是我可能需要运行‘yum update`来安装一些依赖项这个保护yum不升级的解决方案对我来说足够了吗？通过在/etc/yum.confRawexclude=grub2*shim*mokutil中添加以下条目来保护yum不升级软件包。</p><p>问题存在于grub2-efi-x64中，特别是grubx64.efi中。除了使用前一个RPM中的grubx64.efi之外，您可以拥有所有其他最新内容，并且系统可以再次引导(当然，假设SecureBoot被关闭)。</p><p>(回复评论#21中的Christof Efkemann)&gt；问题存在于grub2-efi-x64中，特别是grubx64.efi中。您可以&gt；拥有最新的其他所有内容，但使用上一个RPM中的grubx64.efi，&gt；系统可以重新启动(当然，假设关闭了SecureBoot)。因此，我已经得到了明确的数据-哪个版本是您的上一个RPM？(当然，假设关闭了SecureBoot)。我已经得到了明确的数据-哪个版本是您的上一个RPM？(当然，假设您关闭了SecureBoot)。我已经得到了明确的数据-哪个版本是您的上一个RPM？</p><p>(回复彼得·琼斯的评论#23)&gt；只是为了让我有明确的数据-哪个版本是您以前的RPM？之前安装的RPM是grub2-efi-x64-1：2.02-81.el8.x86_64。</p><p>另一个注意事项：正如我所说的，我们可以使用2.02-81.el8.x86_64RPM中的grubx64.efi引导新内核(4.18.0-193.14.2.el8_2.x86_64)。但是，这似乎只有在完全绕过填充程序的情况下才有效。例如：UEFI-&gt；shim-&gt；grubx64.efi(2.02-87)-&gt；*CRASH*UEFI。*CRASH*UEFI-&gt；grubx64.efi(2.02-87)-&gt；*Crash*UEFI-&gt；grubx64.efi(2.02-81)-&gt；kernel-&gt；*成功*。</p><p>(回复评论#28中的Christof Efkemann)&gt；另一个观察：&gt；如我所说，我们能够使用来自&gt；2.02-81.el8.x86_64 rpm的grubx64.efi引导新内核&gt；(4.18.0-193.14.2.el8_2.x86_64)。&gt；然而，这似乎只有在完全绕过填补程序时才有效。&gt；&gt；即。Grubx64.efi(2.02-87)-&gt；*Crash*&gt；UEFI-&gt；填隙-&gt；grubx64.efi(2.02-81)-&gt；*Crash*&gt；UEFI-&gt；grubx64.efi(2.02-87)-&gt；*Crash*&gt；UEFI-&gt；grubx64.efi(2.02-。如果您降级了填充包，会发生什么情况？</p><p>注意：您需要先登录，然后才能对此错误进行评论或更改。</p></div><div id="story_share_this"><div class="sharethis-inline-share-buttons"></div></div><div class="text-break sotry_link page_narrow"><a target="_blank" href="https://bugzilla.redhat.com/show_bug.cgi?id=1861977">https://bugzilla.redhat.com/show_bug.cgi?id=1861977</a></div><div class="story_tags page_narrow"><button type="button" class="btn btn-light my_tag"><a href="/tag/安全更新/">#安全更新</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/security/">#security</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/gt/">#gt</a></button></div></div><div class="my_movie_list_item shadow p-3 mb-5 bg-white rounded"><button type="button" class="btn btn-link my_tag"><a href="/tag/web2.0/">#web2.0</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/google/">#google</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/设计/">#设计</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/创意/">#创意</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/摄影/">#摄影</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/游戏/">#游戏</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/图片/">#图片</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/软件/">#软件</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/视频/">#视频</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/手机/">#手机</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/广告/">#广告</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/apple/">#apple</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/iphone/">#iphone</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/网站/">#网站</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/免费/">#免费</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/下载/">#下载</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/windows/">#windows</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/微软/">#微软</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/firefox/">#firefox</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/苹果/">#苹果</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/blog/">#blog</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/音乐/">#音乐</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/博客/">#博客</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/wordpress/">#wordpress</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/恶搞/">#恶搞</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/艺术/">#艺术</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/qq/">#qq</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/web/">#web</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/谷歌/">#谷歌</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/工具/">#工具</a></button></div></div></div><div id="my_footer"><div class=""><a href="/tags/">tags</a> <a href="/users/">users</a></div>&copy;2012-2021 diglog.com </div></div></body></html>