<!doctype html><html lang="zh-hans"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Postgres：包含电池的数据库Postgres: The Batteries Included Database</title><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"><link rel="stylesheet" href="/img/css.css?random="><link data-rh="true" rel="icon" href="/img/favicon.ico"/><script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?03c1a0f31299b4a2fbb83c34d6beaac9";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script><script data-ad-client="ca-pub-6067137220025946" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script type="text/javascript" src="https://platform-api.sharethis.com/js/sharethis.js#property=5effb96910009800120b8d4d&product=inline-share-buttons" async="async"></script></head><body><div id="my_header"><div class="container"><nav class="navbar navbar-expand-lg"><a class="navbar-brand" href="/"><img alt="diglog" src="/img/logo.v1.gif" class="rounded-sm"></a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarNavAltMarkup"><div class="navbar-nav"></div></div></nav></div></div><div class="container"><div id="my_content"><h1 class="page_narrow">Postgres: The Batteries Included Database<br/>Postgres：包含电池的数据库</h1><div class="row"><div class="col-lg-12 col-12"><div class="my_story_list_item shadow p-3 mb-5 bg-white rounded"><div class="story_page_pub_time page_narrow">2020-11-25 03:45:47</div><div class="story_img_container"><a href="http://img2.diglog.com/img/2020/11/fdf84f68e895d220d6c3a71e6410bad8.png"><img src="http://img2.diglog.com/img/2020/11/fdf84f68e895d220d6c3a71e6410bad8.png" class="img-fluid my_story_img" onerror="this.style.display='none'"></a></div><div class="page_narrow text-break page_content"><p>At most of the places I&#39;ve worked, the primary language used was not what I gravitated to naturally. If you&#39;re going to ask for a language of choice personally, it&#39;s python. I appreciate the explicit nature, that it&#39;s often pseudocode that can execute and it has a rich ecosystem of libraries (though that’s most languages these days). But as much as anything I latched onto   Django in its early days. If you&#39;re not familiar with Django it&#39;s a popular framework for web apps written in Python. What I loved about it in particular was one of its taglines early on: batteries included.</p><p>在我工作过的大多数地方，使用的主要语言都不是我自然喜欢的语言。如果您要亲自询问选择的语言，那就是python。我很欣赏这种显式的本性，它通常是可以执行的伪代码，并且具有丰富的库生态系统（尽管如今这是大多数语言）。但是，在我早期使用Django时，我所获得的东西就不胜枚举。如果您不熟悉Django，那么它是使用Python编写的Web应用程序的流行框架。我特别喜欢的是它早期的标语之一：包括电池。</p><p>   Just recently I was on the   changelog Podcast talking about &#34;What&#39;s so exciting about Postgres?&#34; I talked for a while and probably could have kept going,  a lot of these features are top of mind in what we’re building with    Crunchy Bridge. In reflecting on things a bit I can see a big parallel personally to what I appreciated in Django in Postgres. To me   Postgres is the batteries included database. So what&#39;s in the PostgreSQL box:</p><p>   就在最近，我在变更日志Podcast上谈论“ Postgres有什么令人兴奋的地方？”我讨论了一段时间，也许可以继续进行下去，其中许多功能都是我们使用Crunchy Bridge构建的功能中的首要考虑因素。通过对事情的反思，我可以看到与我在PostgreSQL的Django中欣赏的东西有很大的相似之处。对我而言，Postgres是包含电池的数据库。那么PostgreSQL框中是什么：</p><p>   To me, there are few things more important than data. And knowing my data is safe and secure is really key. Whether it’s my bank balance or my food order, when I transact in some way I want to know the data is there. Same applies for the applications I build and PostgreSQL has had a long sturdy track record here of being a safe and reliable database. At its core Postgres   MVCC is a reliable way to help ensure a level of transactional consistency while still operating at large scale. Hundreds of thousands of transactions per second really can be quite manageable in a single PostgreSQL instance.</p><p>   对我来说，没有什么比数据更重要。知道我的数据是安全的是非常关键的。无论是我的银行结余还是我的食品订单，当我以某种方式进行交易时，我都想知道其中的数据。我构建的应用程序也是如此，而PostgreSQL在这里一直是可靠且安全的数据库。 Postgres MVCC的核心是一种可靠的方法，可帮助确保交易一致性水平，同时仍可大规模运行。在单个PostgreSQL实例中，每秒数十万个事务确实可以相当容易地管理。</p><p> It has also evolved over the years to be as powerful as it is reliable.   Data types are a big piece of that. Data types may on the cover not seem like something to write home about, yet not all databases have support for types that you’re using on a daily basis in your application. Just a few noteworthy ones:</p><p> 多年来，它也不断发展壮大，变得可靠。数据类型占了很大一部分。从表面上看，数据类型似乎并不值得一提，但并非所有数据库都支持您每天在应用程序中使用的类型。只是一些值得注意的：</p><p> range types - especially useful for calendaring when you need from and to, which come with an ability to enforce constraints.</p><p> 范围类型-尤其适用于需要往返时间的日历，它具有强制执行约束的功能。</p><p> timestamps -   working with time in any language is painful, timestamps with timezone make conversion easier, coupled with time intervals getting things like users that signed up in last hour is trivial.</p><p> 时间戳-使用任何语言的时间都是很痛苦的事情，带有时区的时间戳使转换变得更加容易，再加上时间间隔，使得像在上一小时注册的用户这样的事情变得微不足道。</p><p> JSONB - this one has gotten plenty of attention over the years, but it’s still new to many. A binary JSON datatype that you can easily index with GIN indexes.</p><p> JSONB-多年来，这一功能已经引起了广泛关注，但对于许多人来说，它仍然是新事物。可以使用GIN索引轻松索引的二进制JSON数据类型。</p><p>  SQL is the lingua franca for data. SQL’s origins in relational algebra and relational calculus make it a well thought out language for working with data - even if it isn’t always the most beautiful language to read. SQL is the standard language for data that every NoSQL database that doesn’t have it eventually recreates their version of SQL because it’s simply the right answer for data.</p><p>SQL是数据的通用语言。 SQL源于关系代数和关系演算，这使它成为处理数据的一种经过深思熟虑的语言，即使它并不总是最漂亮的语言。 SQL是数据的标准语言，每个没有SQL的NoSQL数据库最终都会重新创建其SQL版本，因为这是正确的数据答案。</p><p> Within Postgres you’ve got all the standard ways of accessing data, and then you’ve also got the more exotic:</p><p> 在Postgres中，您拥有访问数据的所有标准方式，然后，您还获得了更多的异国情调：</p><p> CTEs (Common Table Expressions) - useful for composing more complex queries, recursion, and   making SQL readable.</p><p> CTE（公用表表达式）-用于编写更复杂的查询，递归并使SQL可读。</p><p> Window functions - great for analytics such as ordering results, calculating things like median and percentiles.</p><p> 窗口功能-非常适合进行分析，例如排序结果，计算中位数和百分位数。</p><p> Functions - Postgres comes with a ton of functions already to make common actions like date math, parsing out characters and other things trivial.</p><p> 函数-Postgres已经提供了大量的函数来执行常见的操作，例如日期数学，解析字符和其他琐碎的事情。</p><p>  This one good friend Rach summarized it all in a post far better than I can: “ Postgres full-text search is good enough!”    - simply give it a read.</p><p>  这个好朋友拉赫（Rach）在一篇帖子中总结了所有这一切，远胜于我：“ Postgres全文搜索就足够了！” -简单阅读即可。</p><p> The broader sentiment here, is that if you have an existing application and you’re adding search to it, before you go and reach for elastic (which you then have to sync data to, and maintain and support that system) consider using something that you already have supported and contains the data - Postgres.</p><p> 这里更广泛的观点是，如果您有一个现有的应用程序并且要向其中添加搜索，那么在寻求弹性（然后必须将其同步到该系统并维护和支持该系统）之前，请考虑使用一些您已经支持并包含数据-Postgres。</p><p>  This is a whole bucket in and of itself. PostGIS is the most advanced geospatial open source database. It’s an extension to Postgres but I put it in a special class from other extensions. While extensions are becoming more and more advanced, PostGIS has been pretty rich and advanced from day one. PostGIS has its own community that runs a bit parallel to Postgres, releasing new major and minor versions of the extension at a regular cadence.</p><p>这本身就是一个整体。 PostGIS是最先进的地理空间开源数据库。它是Postgres的扩展，但我将其与其他扩展放在一个特殊的类中。随着扩展变得越来越先进，从一开始，PostGIS就已经变得非常丰富和先进。 PostGIS拥有自己的社区，该社区与Postgres有点类似，并定期发布扩展的主要版本和次要版本。</p><p> When you enable PostGIS (simply  CREATE EXTENSION postgis;) you instantly have a geospatial database. It brings new data types, new spatial predicates for querying and interacting with those geometries. You can go further and enable pgRouting which helps for route planning. Looking to figure out how to optimize 10 food deliveries across 3 drivers for optimum route and timing? PostGIS can help.</p><p> 启用PostGIS（只需创建CREATE EXTENSION postgis;），即可立即获得一个地理空间数据库。它带来了新的数据类型，新的空间谓词，用于查询这些几何并与之交互。您可以走得更远并启用pgRouting，这有助于进行路线规划。希望找出如何优化3个驾驶员的10个食物交付以优化路线和时机的方法吗？ PostGIS可以提供​​帮助。</p><p> In fact we just wrapped up a marathon PostGIS day that started early on the east coast, and wrapped up late on the west coast. While the day has since wrapped up, we’ll be posting those talks in the near future so feel free to   sign up if you want to get some updates when those are live.</p><p> 实际上，我们只是结束了马拉松式PostGIS的一天，这一天从东海岸开始，然后在西海岸结束。当天结束后，我们将在不久的将来发布这些演讲，因此，如果您想在直播时获得一些更新，请随时注册。</p><p>  I guess I went a bit out of order here leading with PostGIS. Backing up a bit… extensions are   unique to Postgres. Personally the name doesn’t really do much to convey the power and value of them. Extensions allow you to expand and change what Postgres can do, but what’s unique is what Postgres allows. Postgres has these deep low level hooks that allow you to do things like add new data types, new functions, even hooks into the query planner.</p><p>  我想我在使用PostGIS时有点混乱。备份一下……扩展是Postgres特有的。就个人而言，这个名字并不能真正传达出他们的力量和价值。扩展程序允许您扩展和更改Postgres的功能，但Postgres所具有的独特之处是。 Postgres具有这些深层次的底层挂钩，使您可以执行诸如添加新数据类型，新功能甚至将挂钩插入查询计划器的操作。</p><p> Postgres comes with some stock extensions, you may still have to enable them, but they’re at least available to you.  pg_stat_statements is one of the most useful extensions that exists, it was written and updated in Postgres 9.2 by my colleague Peter Geoghegan to be incredibly useful. It will give you an almost immediate 30,000 foot view on   database performance without having to go deep diving into your application to understand which queries are being called.</p><p> Postgres附带了一些股票扩展功能，您可能仍需要启用它们，但至少您可以使用它们。 pg_stat_statements是存在的最有用的扩展之一，它是由我的同事Peter Geoghegan在Postgres 9.2中编写和更新的，非常有用。它将使您几乎立即获得30,000英尺的数据库性能视图，而不必深入研究应用程序来了解正在调用的查询。</p><p> The list of extensions is pretty long. PGXN, the Postgres Extension Network, has an index of over 200 extensions, some more production ready than others. All could be worthy of their own deep dive but a few particular ones worthy of some highlight:</p><p> 扩展列表很长。 PGXN，即Postgres扩展网络，具有200多个扩展的索引，其中一些已经准备就绪，可以投入生产。所有人可能都值得自己深入研究，但其中一些值得一提的重点是：</p><p> pg_partman - An extension that builds on native time partitioning in Postgres to make working with time series data simple and performant. A nice bonus for me, this one is maintained by a   Crunchy Data colleague.</p><p> pg_partman-一个扩展，它建立在Postgres中的本地时间分区上，以使处理时间序列数据简单而高效。对我来说，这是一个不错的奖励，它是由Crunchy Data同事维护的。</p><p> pgsql-http - A simple extension, but potentially incredibly useful one that allows you to make http requests. Want to trigger a web hook? Call out to an API from your plpsql or   plpython?</p><p>pgsql-http-一个简单的扩展，但可能非常有用，它允许您发出http请求。想触发网页挂钩吗？从您的plpsql或plpython调用API？</p><p> zhparser,   pgroonga - I group these two together despite being two different extensions. If you’re looking for full text search but the native Postgres support doesn’t work (the case for Japanese and Chinese). Here is your answer.</p><p> zhparser，pgroonga-尽管是两个不同的扩展名，但我将这两个分组在一起。如果您要进行全文搜索，但Postgres原生支持不起作用（日语和中文）。这是你的答案。</p><p> madlib - Who needs an entire ETL and data science pipeline when you can do it all where the data lives (in Postgres). Madlib isn’t a new hobby library from some weekend dabbling, it’s nearly 10 years old and has rich support for data science broadly. Naive bayes, k-means, sketch estimations - those have all been in there since it’s 1.0 release in 2011. It’s part of the Apache foundation, and continues to evolve and simply make data science in your Postgres accessible.</p><p> madlib-谁需要一个完整的ETL和数据科学流水线，何时才能在数据所处的位置（在Postgres中）做所有事情。 Madlib从某个周末开始并不是一个新的爱好库，它已有近10年的历史，并且广泛地支持数据科学。朴素的贝叶斯，k均值，草图估计-自2011年1.0版发布以来，所有这些都已经存在。它是Apache基础的一部分，并且会不断发展，并且可以轻松访问Postgres中的数据科学。</p><p> postgres_fdw - Foreign Data Wrappers (FDWs) are an interesting class of extension that allow you to query from within Postgres to something else (read: another Postgres, Redis, Mongo, you name it). If any of the FDWs are production ready it’s the Postgres one which ships with Postgres itself.</p><p> postgres_fdw-外部数据包装器（FDW）是一种有趣的扩展类，它使您可以从Postgres内部查询其他内容（请阅读：另一种Postgres，Redis，Mongo，您为它命名）。如果有任何FDW可以投入生产，则是Postgres本身随附的Postgres。</p><p> A big part of the goal of   Crunchy Bridge, our multi-cloud PostgreSQL managed service, is to take advantage of the broad ecosystem of extensions so you can do more with your database.</p><p> Crunchy Bridge（我们的多云PostgreSQL托管服务）的目标很大一部分是利用广泛的扩展生态系统，以便您可以对数据库做更多的事情。</p><p>  Over 8 years ago I wrote a blog post explaining “  Why Postgres” was a database you should consider using. Five years later I posted a   new version with some updates. I haven’t even gotten to the fascinating future that could exist with extensions or pluggable storage.  (Want columnar storage in Postgres… I promise it’ll be here one day, maybe sooner than you think).</p><p>  8年前，我写了一篇博客文章，解释“为什么Postgres”是您应该考虑使用的数据库。五年后，我发布了具有一些更新的新版本。我什至还没有达到扩展或可插拔存储可能存在的迷人未来。 （想要在Postgres中使用柱状存储...我保证有一天会在这里，也许比您想象的要早）。</p><p> But today you don’t need a reason for choosing Postgres, if you do all your answers are above. Today the question has really shifted to what are you not using Postgres for, and how can the community better support that happening natively in Postgres in the future.</p><p> 但是今天，如果您回答的全部都以上，则无需选择Postgres的理由。今天的问题已经真正转移到您不打算使用Postgres的目的上，以及社区如何更好地支持将来在Postgres中发生的事情。</p><p> This is core to what we do   Crunchy Data and what we believe. As a community how can we advance Postgres as a great open source database and continue to include more within it? It’s the reason we’ve spent nearly 10 years now ourselves helping folks run and support production PostgreSQL, whether   VM based HA setups, on   Kubernetes with our PostgreSQL Operator, or most recently on our   database as a service.</p><p>这是我们处理“松散数据”和我们所相信的内容的核心。作为一个社区，我们如何才能使Postgres成为一个强大的开源数据库，并继续在其中包含更多内容？这就是我们现在已经花费了近十年的时间来帮助人们运行和支持生产PostgreSQL的原因，无论是基于VM的HA设置，还是通过PostgreSQL Operator在Kubernetes上，或者最近在我们的数据库即服务中。</p><p> As I look at the Django website today I see “batteries included” has mostly faded from the primary pitch for the framework, so I’m taking this opportunity to commandeer the phrase for Postgres, it really is a full batteries included database.</p><p> 当我今天在Django网站上浏览时，我发现“包含电池”已从该框架的主要用途逐渐淡出，因此，我借此机会统领Postgres这个词组，它实际上是一个完整的包含电池的数据库。</p></div><div id="story_share_this"><div class="sharethis-inline-share-buttons"></div></div><div class="text-break sotry_link page_narrow"><a target="_blank" href="https://info.crunchydata.com/blog/postgres-the-batteries-included-database">https://info.crunchydata.com/blog/postgres-the-batteries-included-database</a></div><div class="story_tags page_narrow"><button type="button" class="btn btn-light my_tag"><a href="/tag/数据库/">#数据库</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/database/">#database</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/包含/">#包含</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/batteries/">#batteries</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/postgres/">#postgres</a></button></div></div><div class="my_movie_list_item shadow p-3 mb-5 bg-white rounded"><button type="button" class="btn btn-link my_tag"><a href="/tag/web2.0/">#web2.0</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/google/">#google</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/设计/">#设计</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/创意/">#创意</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/摄影/">#摄影</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/图片/">#图片</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/游戏/">#游戏</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/软件/">#软件</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/视频/">#视频</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/手机/">#手机</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/广告/">#广告</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/iphone/">#iphone</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/网站/">#网站</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/免费/">#免费</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/下载/">#下载</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/windows/">#windows</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/微软/">#微软</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/苹果/">#苹果</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/apple/">#apple</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/blog/">#blog</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/firefox/">#firefox</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/音乐/">#音乐</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/博客/">#博客</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/wordpress/">#wordpress</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/恶搞/">#恶搞</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/qq/">#qq</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/艺术/">#艺术</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/web/">#web</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/工具/">#工具</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/分享/">#分享</a></button></div></div></div><div id="my_footer"><div class=""><a href="/tags/">tags</a> <a href="/users/">users</a></div>&copy; 2020 diglog.com </div></div></body></html>