<!doctype html><html lang="zh-hans"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>走另一条路</title><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"><link rel="stylesheet" href="/img/css.css?random="><link data-rh="true" rel="icon" href="/img/favicon.ico"/><script data-ad-client="ca-pub-6067137220025946" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script type="text/javascript" src="https://platform-api.sharethis.com/js/sharethis.js#property=5effb96910009800120b8d4d&product=inline-share-buttons" async="async"></script>
<script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?03c1a0f31299b4a2fbb83c34d6beaac9";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script></head><body><div id="my_header"><div class="container"><nav class="navbar navbar-expand-lg"><a class="navbar-brand" href="/"><img alt="diglog" src="/img/logo.v1.gif" class="rounded-sm"></a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarNavAltMarkup"><div class="navbar-nav"></div></div></nav></div></div><div class="container"><div id="my_content"><h1 class="page_narrow">走另一条路</h1><div class="row"><div class="col-lg-12 col-12"><div class="my_story_list_item shadow p-3 mb-5 bg-white rounded"><div class="story_page_pub_time page_narrow">2020-08-10 02:27:16</div><div class="page_narrow text-break page_content"><p>你有没有走过另一条路，我指的是大多数人使用产品A的地方，然后通常会长大，或者进化到使用产品B，然后你就走另一条路了呢！。一个虚构的B到A的例子是拼车应用程序-&&gt；在手机上呼叫出租车服务。</p><p>在软件世界里，当你走另一条路时，你会注意到所有的博客帖子，在线帮助一点帮助都没有。他们认为你只会去A&G；B。</p><p>我发现的例子有：从AWS迁移到Heroku进行托管，或者从Ledger-CLI迁移到YNAB4进行预算。</p><p>我将在本文中介绍这些示例中的第一个。我将讨论从AWS到Heroku的tryjobalert ts.com站点托管和数据处理。</p><p>我猜你们中的许多人都已经尝试了慷慨的AWS免费服务一年，然后在第13个月收到了第一张账单，然后说：“哦，错了。”好的。这种情况发生在我身上，促使我剔除或移出了大量运行在AWS中的东西。另一方面，我惊讶于SES是多么便宜-我想我的账单是0.10美元，而Elastic Search是多么昂贵，我的账单是50美元，一个很少使用的集群。如果看到这些数字反转，我不会感到惊讶。</p><p>然而，在账单之前，我已经开始将EC2服务器移到Heroku。原因不是成本-Heroku通常要贵一点，因为它在云基础设施上提供额外的包装和服务。我搬家的原因很明显，那就是我很懒。其是用于好时间优先排序的码字。我不想管理操作系统、服务器或配置项管道。取而代之的是，我想要一位专家为我打理这件事，每月额外支付5美元。</p><p>我从EC2转到Heroku并不是一个深思熟虑的合乎逻辑的决定，因为我是坐在真皮沙发上沉思软件架构的。这是一个情绪化的决定，因为我的节点应用程序崩溃了，我为tryjobalert ts.com提供的所有服务都停用了5分钟，而且还在继续计数。如果有人试图编辑他们的设置，却得到一个错误页面，该怎么办？真让人难堪。虽然这几天并不少见，但我并不想成为那个人。</p><p>接下来该怎么做？那么，在历史悠久的解决方案&#34；关闭它，然后再打开&#34；中，我重新启动了EC2实例和BAAM！节点应用程序再次崩溃。不管它做了什么，它以这样的方式取出了机器，我无法通过SSH连接到它来解决问题。在这一点上，我仓促地决定搬到赫鲁库去。我只是不忍心修复这些狗屎当我想编码。我知道这种情况可能会一次又一次地发生，我很可能会在向库伯内斯缓慢行进的过程中结束。</p><p>这是不是一个仓促的决定？嗯，也许是这样，但很长一段时间以来，这一直是一种潜意识中的想法。设置nginx、let‘s encyrpt、PM2等等有点有趣，但感觉像是从我真正想要做的事情上分心。我很高兴有别人来处理这件事，如果所有的东西都死了，那就再来一次吧。我会把精力集中在代码上，非常感谢。</p><p>我试了试赫鲁库。我想，让我们看看这有多容易。如果它能正常工作，我就换一个。否则我会下载K8(开玩笑！)。当网站像灯光一样熄灭时，我正在做这件事，没有人可以访问他们的设置，没有人可以注册或接收电子邮件-所以不要有压力。</p><p>搬到赫罗库非常容易。我只需要创建一个名为Procfile的文件，其中包含以下内容：</p><p>在Heroku用户界面中设置一些东西-秘密之类的。我还必须将port express运行的端口从固定的端口3001更改为Heroku作为环境变量提供的数字。在15分钟内，我说我让它工作了，没有DNS条目。</p><p>我让事情保持了几个星期。然后，我从AWS收到了比预期更高的账单，其中包括一笔相当大的PSQL费用。没有什么太令人震惊的东西，但它看起来并不物有所值。</p><p>我注意到Heroku提供了每月9美元的业余爱好基本PSQL，最多有1000万行。事实证明，我在文本字段中使用了相当大的空间，但没有使用太多行。所以我迁移到了那里。是的，令人难以置信的是，为了省钱，我正在将一些东西从AWS迁移到Heroku。</p><p>这个限制很奇怪，它基于行数而不是存储大小。我想知道有多少优秀的数据可以存储为10M行的BLOB-也许我应该保持沉默，因为Heroku产品负责人可能正在阅读。</p><p>我在网上搜索了移动数据的最佳方式。我喜欢Stack Overflow，因为如果有人有过战争故事，你会听到它，而不是亲身经历。然而，网上的大多数建议是如何将你的数据从Heroku转移到AWS。走另一条路。</p><p>因此，我尝试了几种方法。事实证明，使用psql命令行工具pg_dump和pg_restore非常容易。它第一次起作用了，花了大约30分钟的时间-大部分时间是我在做家务，同时等待PG_Restore来做它的工作。</p><p>(如果它对任何人都有帮助，这里的提示是不要使用Heroku CLI，从Heroku门户获取连接详细信息，并使用psql标准工具。)。</p><p>令我惊讶的是，Heroku在PSQL数据库上竟然更便宜。这可能是因为它们不像RDS那样提供强大的功能，尽管它们在一定程度上使用了AWS--也许它们自己管理虚拟机。</p><p>这可能是Heroku乐于在Hobby基本层上损失一点钱，或者他们比AWS在RDS中更积极地共享资源，所以在负载下它会更快崩溃。</p><p>Heroku的业余爱好Basic PSQL不提供回滚功能，这可能是它便宜的另一个原因。这意味着我需要自己处理备份，但是，通过定期转储数据库，这可以很容易地实现自动化。</p><p>我在搬到Heroku时犯的一个大错误是尝试使用免费的dynos。仅对非生产MVP执行此操作。通过使用免费的SSL，我不得不用Cloudflare做大量的工作来设置SSL，而且我从来没有让它真正工作过。</p><p>然后我意识到我无论如何都需要付费的dynos，因为免费的dynos不能重新启动(！)。在没有部署的情况下。所以我升级了，然后对SSL进行了排序。不需要云耀斑。如果我一开始就这么做了，我就可以省去几个小时令人沮丧的DNS黑客攻击。</p><p>这永远是一条微妙的界线。我的意思是，你尽量省钱，但有时你事先并不知道免费层陷阱是什么。也许Heroku可以让这一点变得更明显，但他们确实警告说，免费的dynos主要是供业余爱好使用的，所以足够公平。</p><p>在这一点上我听起来像个Heroku推销员。市场上还有其他平台即服务产品。我在2014年刚刚使用过Heroku，我喜欢它仍然存在，所以我使用了它。不过，你也可以有更好的选择，去看看吧。或者，也许像AWS这样的常规旧云就是您一直需要的。</p><p>无论如何，你可以选择另一条路，选择对你正在做的项目有意义的东西。</p><p>加入JobAlerts，从精心策划的优秀来源名单中获得免费的每日电子邮件，其中包含最新的技术工作。点击这里了解更多信息。</p></div><div id="story_share_this"><div class="sharethis-inline-share-buttons"></div></div><div class="text-break sotry_link page_narrow"><a target="_blank" href="https://tryjobalerts.com/blog/2020-08-05-going-the-other-way/">https://tryjobalerts.com/blog/2020-08-05-going-the-other-way/</a></div><div class="story_tags page_narrow"><button type="button" class="btn btn-light my_tag"><a href="/tag/heroku/">#heroku</a></button></div></div><div class="my_movie_list_item shadow p-3 mb-5 bg-white rounded"><button type="button" class="btn btn-link my_tag"><a href="/tag/web2.0/">#web2.0</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/google/">#google</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/设计/">#设计</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/创意/">#创意</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/摄影/">#摄影</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/游戏/">#游戏</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/图片/">#图片</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/软件/">#软件</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/视频/">#视频</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/手机/">#手机</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/广告/">#广告</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/apple/">#apple</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/iphone/">#iphone</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/网站/">#网站</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/免费/">#免费</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/下载/">#下载</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/windows/">#windows</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/微软/">#微软</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/firefox/">#firefox</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/苹果/">#苹果</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/blog/">#blog</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/音乐/">#音乐</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/博客/">#博客</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/wordpress/">#wordpress</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/恶搞/">#恶搞</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/艺术/">#艺术</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/qq/">#qq</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/web/">#web</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/谷歌/">#谷歌</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/工具/">#工具</a></button></div></div></div><div id="my_footer"><div class=""><a href="/tags/">tags</a> <a href="/users/">users</a></div>&copy;2012-2021 diglog.com </div></div></body></html>