<!doctype html><html lang="zh-hans"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>SUBX：X86 ISA子集的简单汇编语言 SubX: A minimalist assembly language for a subset of the x86 ISA</title><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"><link rel="stylesheet" href="/img/css.css?random="><link data-rh="true" rel="icon" href="/img/favicon.ico"/><script data-ad-client="ca-pub-6067137220025946" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script type="text/javascript" src="https://platform-api.sharethis.com/js/sharethis.js#property=5effb96910009800120b8d4d&product=inline-share-buttons" async="async"></script>
<script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?03c1a0f31299b4a2fbb83c34d6beaac9";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script></head><body><div id="my_header"><div class="container"><nav class="navbar navbar-expand-lg"><a class="navbar-brand" href="/"><img alt="diglog" src="/img/logo.v1.gif" class="rounded-sm"></a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarNavAltMarkup"><div class="navbar-nav"></div></div></nav></div></div><div class="container"><div id="my_content"><h1 class="page_narrow">SubX: A minimalist assembly language for a subset of the x86 ISA<br/>SUBX：X86 ISA子集的简单汇编语言 </h1><div class="row"><div class="col-lg-12 col-12"><div class="my_story_list_item shadow p-3 mb-5 bg-white rounded"><div class="story_page_pub_time page_narrow">2021-03-21 08:45:32</div><div class="story_img_container"><a href="http://img2.diglog.com/img/2021/3/57cd4c05779e71bbf8dc117bc1f90ccf.png"><img src="http://img2.diglog.com/img/2021/3/57cd4c05779e71bbf8dc117bc1f90ccf.png" class="img-fluid my_story_img" onerror="this.style.display='none'"></a></div><div class="page_narrow text-break page_content"><p>SubX is a notation for a subset of x86 machine code.  The Mu translatoris implemented in SubX and also emits SubX code.</p><p>SUBX是X86机器代码子集的表示法。 MU翻译在Subx中实现，也会发出子句代码。</p><p> Here&#39;s an example program in SubX that adds 1 and 1 and returns the result tothe parent shell process:</p><p> 这里＆＃39;在子句中添加1和1的示例程序，并返回结果TOTHE父shell进程：</p><p> == codeEntry:   # ebx = 1 bb/copy-to-ebx 1/imm32   # increment ebx 43/increment-ebx   # exit(ebx) e8/call syscall_exit/disp32</p><p> == CodeEntry：＃eBx = 1 BB / Copy-to-EBX 1 / IMM32＃增量EBX 43 / Increment-EBX＃EXIT（EBX）E8 / CALL SYSCALL_EXIT / DISP32</p><p>  Just like in regular machine code, SubX programs consist mostly of instructions,which are basically sequences of numbers (always in hex). Instructions consistof words separated by whitespace. Words may be  opcodes (defining theoperation being performed) or  arguments (specifying the data the operationacts on). Any word can have extra  metadata attached to it after  /. Somemetadata is required (like the  /imm32 and  /imm8 above), but unrecognizedmetadata is silently skipped so you can attach comments to words (like theinstruction name  /copy-to-eax above, or the  /exit argument).</p><p>  就像在常规机器代码中一样，Subx程序主要由指令组成，基本上是数字序列（总是在十六进制中）。说明由空格分隔的单词组成。单词可以是操作码（定义正在执行的特工）或参数（指定数据的数据）。任何单词都可以在/后附加到它的额外元数据。需要SomemetAdata（如/ imm32和/ / / / / / / / / / / / / / / / / / / / Imm8），但是默默地跳过了Unsognedizedmetadata，因此您可以将注释附加到单词（如上面的Intricalrity名称/ copy-to-eax或/退出参数）。</p><p> What do all these numbers mean? SubX supports a small subset of the 32-bit x86instruction set that likely runs on your computer. (Think of the name as shortfor &#34;sub-x86&#34;.) The instruction set contains instructions like  89/copy, 01/add,  3d/compare and  51/push-ecx which modify registers and a byte-addressablememory. For a complete list of supported instructions, run  bootstrap help opcodes.</p><p> 所有这些数字意味着什么？ SUBX支持可能在计算机上运行的32位X86 ILCRICTRING集的小子集。 （将名称视为Shortfor＆＃34; sub-x86＆＃34;）指令集包含如89 / copy，01 /添加，3D /比较和51 / push-ecx，它修改寄存器和字节addressablemeMory 。有关支持的指令的完整列表，请运行Bootstrap帮助操作码。</p><p>  Two additional 32-bit registers:  4/esp and  5/ebp. (I suggest you onlyuse these to manage the call stack.)</p><p>  两个额外的32位寄存器：4 / ESP和5 / EBP。 （我建议您唯一只使用这些来管理呼叫堆栈。）</p><p> Eight 8-bit integer registers aliased with parts of the 32-bit registers: 0/al,  1/cl,  2/dl,  3/bl,  4/ah,  5/ch,  6/dh and  7/bh.</p><p> 八个8位整数寄存器叠加，含有32位寄存器的部分：0 / Al，1 / Cl，2 / DL，3 / BL，4 / AH，5 / CH，6 / DH和7 / BH。 </p><p> (Intel processors support a 16-bit mode and 64-bit mode. SubX will neversupport them. There are also  many more instructions that SubX will neversupport.)</p><p>（英特尔处理器支持一个16位模式和64位模式。Subx将Neversupport它们。Subx的exversupport也有更多的指令。）</p><p> While SubX doesn&#39;t provide the usual mnemonics for opcodes, it  does provideerror-checking. If you miss an argument or accidentally add an extra argument,you&#39;ll get a nice error. SubX won&#39;t arbitrarily interpret bytes of data asinstructions or vice versa.</p><p> 虽然Subx Nond＆＃39; t为操作码提供通常的助记符，它确实提供了error检查。如果你错过了一个论点或意外地添加额外的论点，你会得到一个很好的错误。 SUBX WON＆＃39; t任意解释数据AsInstructions的字节，反之亦然。</p><p> It&#39;s worth distinguishing between an instruction&#39;s arguments and its  operands.Arguments are provided directly in instructions. Operands are pieces of datain register or memory that are operated on by instructions.</p><p> 它值得不同于指令＆＃39; s的参数及其操作数。在说明中直接提供。操作数是可通过指令运行的日期寄存器或内存。</p><p> Intel processors typically operate on no more than two operands, and at mostone of them (the &#39;reg/mem&#39; operand) can access memory. The address of thereg/mem operand is constructed by expressions of one of these forms:</p><p> 英特尔处理器通常在不超过两个操作数上运行，并且在其中大部分（＆＃39; reg / mem＆＃39;操作数）可以访问内存。它的地址/ MEM操作数由其中一个表单的表达式构建：</p><p> *(base + (index &lt;&lt; scale) + disp) where  base and  index are registers,and  scale and  disp are 2- and 32-bit constants respectively.</p><p> *（基本+（索引＆lt;＆lt; scale）+ disp）其中基本和索引是寄存器，并且分别是分别为2和32位常数。</p><p> Under the hood, SubX turns expressions of these forms into multiple argumentswith metadata in some complex ways. See  the doc on bare SubX.</p><p> 在引擎盖下，Subx以某种复杂方式将这些形式的表达式转变为多个参数。请参阅裸BUSX上的文档。</p><p> That covers the complexities of the reg/mem operand. The second operand issimpler. It comes from exactly one of the following argument types:</p><p> 涵盖了reg / mem操作数的复杂性。第二个操作数Issimpler。它来自以下参数类型之一： </p><p>  Putting all this together, here&#39;s an example that adds the integer in  eax tothe one at address  edx:</p><p>将所有这些放在一起，这里＆＃39</p><p>   SubX programs map to the same ELF binaries that a conventional Linux systemuses. Linux ELF binaries consist of a series of  segments. In particular, theydistinguish between code and data. Correspondingly, SubX programs consist of aseries of segments, each starting with a header line:  == followed by a nameand approximate starting address.</p><p>   子句程序映射到传统的Linux系统的相同的ELF二进制文件。 Linux ELF二进制文件由一系列部分组成。特别是，他们在代码和数据之间进行区分。相应地，Subx程序由段的ASERIES组成，每个部分以标题线开始：==，后跟一个近似启动地址。</p><p>   == code 0x09000000   # first mention requires starting address...A...== data 0x0a000000...B...== code   # no address necessary when adding...C...</p><p>   ==代码0x09000000＃首先提到需要启动地址...... a ... == data 0x0a000000 ... b ... == code＃添加... c ...</p><p>  Within the  code segment, each line contains a comment, label or instruction.Comments start with a  # and are ignored. Labels should always be the firstword on a line, and they end with a  :.</p><p>  在代码段内，每行包含注释，标签或指令.Ments以＃开头并被忽略。标签应该始终是一行中的第一字，它们以答：。</p><p> Instructions can refer to labels in displacement or immediate arguments, andthey&#39;ll obtain a value based on the address of the label: immediate argumentswill contain the address directly, while displacement arguments will containthe difference between the address and the address of the current instruction.The latter is mostly useful for  jump and  call instructions.</p><p> 说明可以引用位移或立即参数中的标签，＆＃39; ll基于标签的地址获取值：立即参数直接包含地址，而位移参数将在地址和当前指令的地址之间的差异。后者主要用于跳转和呼叫指示。</p><p> Functions are defined using labels. By convention, labels internal to functions(that must only be jumped to) start with a  $. Any other labels must only becalled, never jumped to. All labels must be unique.</p><p> 使用标签定义函数。按照惯例，函数内部的标签（必须只跳转到）以$开头。只有其他标签都必须被视为，从未跳过。所有标签必须是唯一的。</p><p>   Function arguments must be either literals (integers or strings) or a reg/memoperand using the syntax in the previous section.</p><p>   函数参数必须使用上一节中的语法是文字（整数或字符串）或reg / memoperand。 </p><p> A special label is  Entry, which can be used to specify/override the entrypoint of the program. It doesn&#39;t have to be unique, and the latest definitionwill override earlier ones.</p><p>特殊标签是条目，可用于指定/覆盖程序的入口点。它不必是唯一的，最新的定义版本覆盖了早期的。</p><p> (The  Entry label, along with duplicate segment headers, allows programs tobe built up incrementally out of multiple   layers.)</p><p> （条目标签以及重复的段标题，允许程序以多个图层递增地构建。）</p><p> Another special pair of labels are the block delimiters  { and  }. They canbe nested, and jump instructions can take arguments  loop or  break thatjump to the enclosing  { and  } respectively.</p><p> 另一对标签是块分隔符{和}。他们可以嵌套，跳跃指令可以采用参数循环或分别将该呼吸分别打破到封闭{和}。</p><p> The data segment consists of labels as before and byte values. Referring todata labels in either  code segment instructions or  data segment valuesyields their address.</p><p> 数据段由标签组成以前和字节值。在代码段指示符或数据段值中引用托管数据标签yields它们的地址。</p><p> Automatic tests are an important part of SubX, and there&#39;s a simple mechanismto provide a test harness: all functions that start with  test- are called inturn by a special, auto-generated function called  run-tests. How you chooseto call it is up to you.</p><p> 自动测试是Subx的重要组成部分，并且有一个简单的机制提供了一个测试线束：从测试开始的所有函数都是由一个名为Run-Tests的特殊，自动生成的函数所谓的Inturn。你如何挑选它取决于你。</p><p> I try to keep things simple so that there&#39;s less work to do when implementingSubX in SubX. But there  is one convenience: instructions can provide astring literal surrounded by quotes ( &#34;) in an  imm32 argument. SubX willtransparently copy it to the  data segment and replace it with its address.Strings are the only place where a SubX word is allowed to contain spaces.</p><p> 我试图保持简单的事情，以便在Subx中实现augionubx时少工作。但是有一种便利：说明可以在IMM32论点中提供由报价（＆＃34;）包围的批发文字。 Subx将其临时将其复制到数据段并用其地址替换它.Strings是允许Subx Word允许包含空格的唯一位置。</p><p> That should be enough information for writing SubX programs. The  apps/directory provides some fodder for practice in the  apps/ex*.subx files,giving a more gradual introduction to SubX features. In particular, you shouldwork through  apps/factorial4.subx, which demonstrates all the above ideas inconcert.</p><p> 这应该是编写Subx程序的信息。 Apps /目录在Apps / Ex * .subx文件中提供了一些饲料，以便更加逐步介绍Subx功能。特别是，您应该通过Apps / Factorial4.subx，它表明所有上述想法都不concert。 </p></div><div id="story_share_this"><div class="sharethis-inline-share-buttons"></div></div><div class="text-break sotry_link page_narrow"><a target="_blank" href="https://github.com/akkartik/mu/blob/main/subx.md">https://github.com/akkartik/mu/blob/main/subx.md</a></div><div class="story_tags page_narrow"><button type="button" class="btn btn-light my_tag"><a href="/tag/汇编/">#汇编</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/x86/">#x86</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/subx/">#subx</a></button></div></div><div class="my_movie_list_item shadow p-3 mb-5 bg-white rounded"><button type="button" class="btn btn-link my_tag"><a href="/tag/web2.0/">#web2.0</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/google/">#google</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/设计/">#设计</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/创意/">#创意</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/摄影/">#摄影</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/图片/">#图片</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/游戏/">#游戏</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/软件/">#软件</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/视频/">#视频</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/手机/">#手机</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/广告/">#广告</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/iphone/">#iphone</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/网站/">#网站</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/免费/">#免费</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/下载/">#下载</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/windows/">#windows</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/微软/">#微软</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/firefox/">#firefox</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/blog/">#blog</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/苹果/">#苹果</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/apple/">#apple</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/音乐/">#音乐</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/博客/">#博客</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/wordpress/">#wordpress</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/恶搞/">#恶搞</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/qq/">#qq</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/艺术/">#艺术</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/web/">#web</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/工具/">#工具</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/分享/">#分享</a></button></div></div></div><div id="my_footer"><div class=""><a href="/tags/">tags</a> <a href="/users/">users</a></div>&copy;2012-2021 diglog.com </div></div></body></html>