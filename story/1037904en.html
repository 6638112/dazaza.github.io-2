<!doctype html><html lang="zh-hans"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>您的智能电视可能忽略了PiHole Your Smart TV is probably ignoring your PiHole</title><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"><link rel="stylesheet" href="/img/css.css?random="><link data-rh="true" rel="icon" href="/img/favicon.ico"/><script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?03c1a0f31299b4a2fbb83c34d6beaac9";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script><script data-ad-client="ca-pub-6067137220025946" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script type="text/javascript" src="https://platform-api.sharethis.com/js/sharethis.js#property=5effb96910009800120b8d4d&product=inline-share-buttons" async="async"></script></head><body><div id="my_header"><div class="container"><nav class="navbar navbar-expand-lg"><a class="navbar-brand" href="/"><img alt="diglog" src="/img/logo.v1.gif" class="rounded-sm"></a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarNavAltMarkup"><div class="navbar-nav"></div></div></nav></div></div><div class="container"><div id="my_content"><h1 class="page_narrow">Your Smart TV is probably ignoring your PiHole<br/>您的智能电视可能忽略了PiHole </h1><div class="row"><div class="col-lg-12 col-12"><div class="my_story_list_item shadow p-3 mb-5 bg-white rounded"><div class="story_page_pub_time page_narrow">2020-12-05 21:01:03</div><div class="page_narrow text-break page_content"><p>If you’re using PiHole on your network to block ads and prevent your various smart devices from sending tracking information to their manufacturers,  you might be surprised to find out that some of these devices are using a sneaky tactic to bypass your PiHole entirely.</p><p>如果您在网络上使用PiHole阻止广告并阻止各种智能设备向其制造商发送跟踪信息，您可能会惊讶地发现其中某些设备采用了偷偷摸摸的策略来完全绕开您的PiHole。</p><p> Smart devices manufacturers often “hard-code” in a public DNS server, like Google’s 8.8.8.8, and their devices ignore whatever DNS server is assigned by your router - such as your PiHole.</p><p> 智能设备制造商经常在公共DNS服务器（例如Google的8.8.8.8）中“硬编码”，而他们的设备会忽略路由器分配的任何DNS服务器（例如PiHole）。</p><p> Nearly 70% of smart TVs and 46% of game consoles were found to contain hardcoded DNS settings - allowing them to simply ignore your local network’s DNS server entirely. On average, Smart TVs generate an average of 60 megabytes of outgoing Internet traffic  per day, all the while bypassing tools like PiHole.</p><p> 发现将近70％的智能电视和46％的游戏机包含硬编码的DNS设置-从而使他们完全可以完全忽略本地网络的DNS服务器。平均而言，智能电视每天平均产生60 MB的传出互联网流量，同时绕过PiHole等工具。</p><p>  Fortunately, with a few simple firewall rules, you can intercept these hardcoded DNS queries and redirect them to your PiHole. These instructions are for pfSense, however you should be able to adapt them for Sophos XG, Ubiquiti EdgeRouter, etc.</p><p>  幸运的是，通过一些简单的防火墙规则，您可以拦截这些硬编码的DNS查询并将其重定向到您的PiHole。这些说明适用于pfSense，但是您应该可以将它们适应Sophos XG，Ubiquiti EdgeRouter等。</p><p>  Log in to your pfSense admin interface, and navigate to  Firewall &gt;  NAT &gt;  Port Forward.</p><p>  登录到pfSense管理界面，然后导航至Firewall＆gt; NAT＆gt;转发端口。</p><p> We’re going to create two Port Forward NAT rules - one to redirect any DNS queries originating from devices on the LAN to PiHole, and another to allow PiHole to commmunicate with external DNS servers. We will also create an additional outbound NAT rule that will make this process invisible to any clients on the network with hardcoded DNS.</p><p> 我们将创建两个端口转发NAT规则-一个将来自LAN上设备的所有DNS查询重定向到PiHole，另一个允许PiHole与外部DNS服务器通信。我们还将创建一个附加的出站NAT规则，使使用硬编码DNS的网络上的任何客户端都看不到该过程。</p><p>   Source: LAN net (you may need to click the blue show advanced button to see this option)</p><p>   来源：LAN net（您可能需要单击蓝色的显示高级按钮才能看到此选项） </p><p>    Note: pfSense (and most other firewalls) process rules from top to bottom. Make sure you drag the second rule exempting PiHole from DNS query redirects  above the first rule we created - otherwise PiHole will not be able to contact external DNS servers.</p><p>注意：pfSense（和大多数其他防火墙）从上到下处理规则。确保将第二条规则从我们的创建的第一条规则中拖动，使PiHole不受DNS查询重定向的影响-否则PiHole将无法联系外部DNS服务器。</p><p>  Finally, we need to create an outbound NAT rule. Navigate to  Firewall &gt;  NAT &gt;  Outbound.</p><p>  最后，我们需要创建出站NAT规则。导航到防火墙＆gt; NAT＆gt;出站。</p><p> Description: Prevents hardcoded DNS clients from giving unexpected source error after DNS redirected to PiHole.</p><p> 描述：防止将DNS重定向到PiHole后，硬编码的DNS客户端产生意外的源错误。</p><p>   Create a new, temporary internal DNS entry on your network (“piholetest.example.com”), and point it to 10.0.1.1. You can do this right from PiHole under  Local DNS Records.</p><p>   在您的网络上创建一个新的临时内部DNS条目（“ piholetest.example.com”），并将其指向10.0.1.1。您可以直接从PiHole的“本地DNS记录”下执行此操作。</p><p>   If you set this up correctly,  nslookup should return 10.0.1.1. Your computer  thinks it’s receiving DNS records from 1.1.1.1, while in reality they are coming from your PiHole.</p><p>   如果正确设置，则nslookup应该返回10.0.1.1。您的计算机认为它正在接收来自1.1.1.1的DNS记录，而实际上它们来自您的PiHole。</p><p> You can further demonstate this by temporarily disabling the first NAT rule we created, and running the same  nslookup piholetest.example.com command:</p><p> 您可以通过暂时禁用我们创建的第一个NAT规则并运行相同的nslookup piholetest.example.com命令来进一步证明这一点：</p><p>  As “piholetest.example.com” doesn’t exist on the public Internet, the real 1.1.1.1 server has no record to provide - resulting in your  nslookup request returning a NXDOMAIN error.</p><p>  由于公共互联网上不存在“ piholetest.example.com”，因此真正的1.1.1.1服务器没有要提供的记录-导致您的nslookup请求返回了NXDOMAIN错误。 </p><p> Don’t forget to revert your computer’s DNS settings back to their original value, and reenable any firewall rules you temporary disabled while testing.</p><p>不要忘记将计算机的DNS设置恢复为原始值，并重新启用在测试过程中临时禁用的所有防火墙规则。 </p></div><div id="story_share_this"><div class="sharethis-inline-share-buttons"></div></div><div class="text-break sotry_link page_narrow"><a target="_blank" href="https://labzilla.io/blog/force-dns-pihole">https://labzilla.io/blog/force-dns-pihole</a></div><div class="story_tags page_narrow"><button type="button" class="btn btn-light my_tag"><a href="/tag/电视/">#电视</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/tv/">#tv</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/pihole/">#pihole</a></button></div></div><div class="my_movie_list_item shadow p-3 mb-5 bg-white rounded"><button type="button" class="btn btn-link my_tag"><a href="/tag/web2.0/">#web2.0</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/google/">#google</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/设计/">#设计</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/创意/">#创意</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/摄影/">#摄影</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/图片/">#图片</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/游戏/">#游戏</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/软件/">#软件</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/手机/">#手机</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/视频/">#视频</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/广告/">#广告</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/iphone/">#iphone</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/网站/">#网站</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/免费/">#免费</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/下载/">#下载</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/windows/">#windows</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/苹果/">#苹果</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/微软/">#微软</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/apple/">#apple</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/blog/">#blog</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/firefox/">#firefox</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/音乐/">#音乐</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/博客/">#博客</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/wordpress/">#wordpress</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/恶搞/">#恶搞</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/艺术/">#艺术</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/qq/">#qq</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/web/">#web</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/工具/">#工具</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/分享/">#分享</a></button></div></div></div><div id="my_footer"><div class=""><a href="/tags/">tags</a> <a href="/users/">users</a></div>&copy; 2020 diglog.com </div></div></body></html>