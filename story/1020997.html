<!doctype html><html lang="zh-hans"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Shelley：MacOS菜单栏应用程序，可根据授权的HTTP请求运行shell脚本</title><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"><link rel="stylesheet" href="/img/css.css?random="><link data-rh="true" rel="icon" href="/img/favicon.ico"/><script data-ad-client="ca-pub-6067137220025946" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script type="text/javascript" src="https://platform-api.sharethis.com/js/sharethis.js#property=5effb96910009800120b8d4d&product=inline-share-buttons" async="async"></script>
<script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?03c1a0f31299b4a2fbb83c34d6beaac9";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script></head><body><div id="my_header"><div class="container"><nav class="navbar navbar-expand-lg"><a class="navbar-brand" href="/"><img alt="diglog" src="/img/logo.v1.gif" class="rounded-sm"></a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarNavAltMarkup"><div class="navbar-nav"></div></div></nav></div></div><div class="container"><div id="my_content"><h1 class="page_narrow">Shelley：MacOS菜单栏应用程序，可根据授权的HTTP请求运行shell脚本</h1><div class="row"><div class="col-lg-12 col-12"><div class="my_story_list_item shadow p-3 mb-5 bg-white rounded"><div class="story_page_pub_time page_narrow">2020-08-29 04:47:59</div><div class="page_narrow text-break page_content"><p>这一切都始于周二下午，一位读者在一篇旧博客文章中评论说，他们正在使用NFC贴纸在iPhone上启动快捷方式。</p><p>我无法解释我的大脑是如何或为什么会这样跳跃的，但它立刻将这个想法与布雷特·特普斯特拉(Brett Terpstra)的“奇妙的捆绑”(Fantastic Bunch.app)联系在一起。我已经使用他的应用程序好几个月了，可以自动一次打开一堆应用程序。比如当我到达工作地点或进行其他上下文切换时。</p><p>现在，我用键盘快捷键触发这些串，但没有其他原因，如果...&#34；我想知道我是否可以用NFC敲击来做同样的事情，这可能会很酷。</p><p>更广泛地说：我想知道我是否可以从我的手机自动执行Mac上的操作？</p><p>你会看到，我在办公桌上的NFC贴纸上轻敲手机，我所有的工作应用程序都会在我的Mac上启动。</p><p>要做到这一点，我需要找到一种方法来从iOS快捷方式触发我的Mac。</p><p>我让这个解决方案在这种情况下起作用，但iCloud Drive的实时性往往远不及Dropbox。(Shortcuts.app的要求意味着我需要使用iCloud Drive。)。因此，虽然它在技术上是有效的，但它是缓慢的和不可预测的。在我打开手机上的Files.app之前，NFC TAP和我的Mac之间的反应延迟从3秒到10秒不等，甚至永远不会。</p><p>所以，我需要一个更快的解决方案。一种直接从我的手机(或任何其他设备？)发送命令的方法。给我的Mac。</p><p>我想出了一个很小的MacOS菜单栏应用程序，我叫它雪莱--因为正如一位朋友告诉我的那样，它是一个黑客中的弗兰肯斯坦(Frankenstein)。</p><p>将Shelley指向Mac上包含可执行shell脚本的文件夹。然后，它位于您的菜单栏中，监听传入的HTTP请求。当适当的请求与密钥一起到达时，只有您知道，Shelley会查找匹配的shell脚本并运行它。</p><p>结果立竿见影，您可以灵活地在Mac上编写基本上任何操作的脚本。启动应用程序，打开URL，甚至运行AppleScripts。</p><p>老实说，我还不确定该拿雪莱怎么办。但我记得当年我对黑兹尔、键盘大师，甚至快银都有同样的感觉。</p><p>使用MacOS，底层Unix工具与可编写脚本的UI层相结合，意味着您可以自动执行几乎任何操作。</p><p>就像上面的自动化应用程序一样，如果有足够的时间和一点想象力，我相信我会想出和雪莱一起做的真正有用的事情。我迫不及待地想听听其他人也有什么想法。</p><p>Shelley在端口9876上运行，并侦听格式如下的特定HTTP GET请求：</p><p>要执行其中一个脚本，请在另一台计算机、电话或其他设备上的Web浏览器中打开其中一个链接。或者使用您喜欢的脚本工具发送HTTP请求。或者使用iOS快捷方式应用程序。你想要什么都行。</p><p>Run的示例将立即执行您的脚本并返回(关闭HTTP连接)。</p><p>如果您改为ping WAIT变量，则连接将等待并保持打开状态，直到脚本执行完毕。</p><p>将您的shell脚本放在此文件夹中。它们必须标记为可执行(chmod+x script.sh)，并以.sh文件扩展名结尾。</p><p>然后，如果您想要运行上面的work-morning.sh脚本，您可以ping您的Mac，地址是：</p><p>为了在一定程度上保证安全，您还需要提供只有您和雪莱知道的密钥。</p><p>Shelley将您的密钥存储在自动添加到脚本文件夹的key.txt文件中。(您可以随意修改它选取的随机值。)。</p><p>您可以通过以下两种方式之一在HTTP请求中将该密钥传递给Shelley：</p><p>这一切都很棒，但IP地址会改变--特别是如果你瞄准的Mac是无线的。幸运的是，如果您通过局域网连接进行此操作，则不需要您的IP地址，只需要您的Mac Bonjour名称即可。</p><p>您会注意到，我正在使用内置的获取URL快捷方式的内容步骤提供的Headers选项传入我的密钥。</p><p>然后，添加一个新的快捷键自动化功能，在您点击特定的NFC标签时自动运行您的快捷键，然后轰隆作响。</p><p>安妮，就是这样。从任何可以向您的Mac发送HTTP请求的设备上，您都可以启动任何可以由shell脚本启动的东西。</p></div><div id="story_share_this"><div class="sharethis-inline-share-buttons"></div></div><div class="text-break sotry_link page_narrow"><a target="_blank" href="https://tyler.io/shelley/">https://tyler.io/shelley/</a></div><div class="story_tags page_narrow"><button type="button" class="btn btn-light my_tag"><a href="/tag/程序/">#程序</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/macos/">#macos</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/http/">#http</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/脚本/">#脚本</a></button></div></div><div class="shadow p-3 mb-5 bg-white rounded clearfix"><div class="container"><div class="row"><div class="col-sm"><div><a target="_blank" href="/story/1020949.html"><img src="http://img.diglog.com/img/2020/8/thumb_9db7bba334381453f97687fc9c69ea9f.jpg" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1020949.html">苹果拒绝Facebook应用程序，该应用程序告诉用户苹果将收取30%的佣金</a></div><span class="my_story_list_date">2020-8-29 0:30</span></div><div class="col-sm"><div><a target="_blank" href="/story/1020928.html"><img src="http://img.diglog.com/img/2020/8/thumb_feae043e5474be2289abb484ae86e870.jpg" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1020928.html">
Android安全漏洞允许恶意应用程序抽走私人用户数据</a></div><span class="my_story_list_date">2020-8-28 22:22</span></div><div class="col-sm"><div><a target="_blank" href="/story/1020920.html"><img src="http://img.diglog.com/img/2020/8/thumb_da90206bcd6556fac5104e2114bf8b6a.jpg" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1020920.html">乳齿象应用程序必须审查第三方内容，否则将从Play Store中裁员</a></div><span class="my_story_list_date">2020-8-28 22:18</span></div><div class="col-sm"><div><a target="_blank" href="/story/1020884.html"><img src="http://img.diglog.com/img/2020/8/thumb_16c93064e5a4829009cdd1c102a70e11.png" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1020884.html">面向桌面应用程序的C++轻量级、跨平台、HTML呈现引擎</a></div><span class="my_story_list_date">2020-8-28 17:0</span></div></div></div></div><div class="my_movie_list_item shadow p-3 mb-5 bg-white rounded"><button type="button" class="btn btn-link my_tag"><a href="/tag/web2.0/">#web2.0</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/google/">#google</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/设计/">#设计</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/创意/">#创意</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/摄影/">#摄影</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/游戏/">#游戏</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/图片/">#图片</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/软件/">#软件</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/视频/">#视频</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/手机/">#手机</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/广告/">#广告</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/apple/">#apple</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/iphone/">#iphone</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/网站/">#网站</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/免费/">#免费</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/下载/">#下载</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/windows/">#windows</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/微软/">#微软</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/firefox/">#firefox</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/苹果/">#苹果</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/blog/">#blog</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/音乐/">#音乐</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/博客/">#博客</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/wordpress/">#wordpress</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/恶搞/">#恶搞</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/艺术/">#艺术</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/qq/">#qq</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/web/">#web</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/谷歌/">#谷歌</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/工具/">#工具</a></button></div></div></div><div id="my_footer"><div class=""><a href="/tags/">tags</a> <a href="/users/">users</a></div>&copy;2012-2021 diglog.com </div></div></body></html>