<!doctype html><html lang="zh-hans"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>用Wigner变换分析鸟类歌曲（WDF） Analysing bird songs with Wigner transform (WDF)</title><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"><link rel="stylesheet" href="/img/css.css?random="><link data-rh="true" rel="icon" href="/img/favicon.ico"/><script data-ad-client="ca-pub-6067137220025946" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script type="text/javascript" src="https://platform-api.sharethis.com/js/sharethis.js#property=5effb96910009800120b8d4d&product=inline-share-buttons" async="async"></script>
<script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?03c1a0f31299b4a2fbb83c34d6beaac9";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script></head><body><div id="my_header"><div class="container"><nav class="navbar navbar-expand-lg"><a class="navbar-brand" href="/"><img alt="diglog" src="/img/logo.v1.gif" class="rounded-sm"></a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarNavAltMarkup"><div class="navbar-nav"></div></div></nav></div></div><div class="container"><div id="my_content"><h1 class="page_narrow">Analysing bird songs with Wigner transform (WDF)<br/>用Wigner变换分析鸟类歌曲（WDF） </h1><div class="row"><div class="col-lg-12 col-12"><div class="my_story_list_item shadow p-3 mb-5 bg-white rounded"><div class="story_page_pub_time page_narrow">2021-06-14 11:30:56</div><div class="page_narrow text-break page_content"><p>You’ll need to skillfully use WASD and QERF keys to move around and zoom-in/zoom-out.</p><p>您需要巧妙地使用WASD和Qerf键来移动和缩放/缩小。</p><p> As I was looking for interesting audio transforms, I came across the  Wigner distribution function (or just WDF). The example on Wikipedia looks indeed interesting and it’s “sold” as a function that “provides the highest possible temporal vs frequency resolution which is mathematically possible within the limitations of the uncertainty principle” and thus “when a signal is not time limited, its WDF is hard to implement.” Turns out, WDF isn’t much harder to implement than plain FFT.</p><p> 当我正在寻找有趣的音频变换时，我遇到了Wigner分发功能（或只是WDF）。维基百科的示例看起来确实有趣，它是“出售”作为一个“提供了最高可能的时间VS频率分辨率，该函数在数学上是在不确定原理的限制内”，因此“当信号不是时，其WDF很难实施。“结果，WDF比普通FFT更难实现。</p><p>   It does an interesting trick: at every point in time it inverts the audio signal and multiplies it by its normal time-forward version. This makes sense because a periodic signal at time T would locally correlate with a time inverted version of itself, however in WDF this correlation isn’t time bounded, so if the signal is 1 hour long, WDF will multiply two one hour long signals to compute just one value at T. This seems meaningless at first glance, as the random contributions 30 mins away from the current moment would make WDF random, but a closer look reveals that if those far away contributions are indeed random, they would cancel out each other, and they do (to an extent). The complex exponent on the right is effectively the usual FFT on the forward-inverted correlation.</p><p>   它做了一个有趣的技巧：在各个时间点，它反转了音频信号并将其乘以正常的前进版本。这是有道理的，因为时刻t的周期性信号与本身的时间倒置版本局部相关，但是在WDF中，这种相关性不是时界时，因此如果信号是1小时，则WDF将乘以两个1小时的信号计算只有一个价值在T.乍一看毫无意义，因为随机捐款远离当前的时刻将使WDF随机作出WDF，但仔细看来，如果那些远离捐款确实是随机的，他们将取消每个人其他，他们（在某种程度上）。右侧的复杂指数有效地是正向倒置相关性的通常的FFT。</p><p>   So it doesn’t really add any complexity on top of the regular FFT. In practice, though, WDF is an extremely noisy function that’s much less insightful than plain FFT. Below is the same bird recording ( xeno-canto.org/33539) visualized with different methods.</p><p>   所以它并没有在常规FFT之上添加任何复杂性。然而，在实践中，WDF是一个极度嘈杂的功能，比普通FFT更富有洞察力。下面是用不同方法可视化的鸟录制（Xeno-canto.org/33539）。</p><p> FFT with the  Hann window function. This is practically equivalent to CWT, as the latter is more or less the same as FFT with the slightly different  Gaussian window. And unlike CWT, computing FFT doesn’t involve any mental gymnastics.</p><p> FFT与HANN窗口功能。这实际上等同于CWT，因为后者与带有略微不同的高斯窗口的FFT或多或少相同。与CWT不同，计算FFT不涉及任何心理体操。</p><p>  Plain FFT spectrogram with 1024 bins at 48 kHz. Pixelated because only 300 or so bins capture the useful 0..8 kHz range.</p><p>  普通FFT频谱图，1024箱为48 kHz。像素化因为只有300左右的箱子捕获有用的0..8 kHz范围。</p><p>  “Continuous FFT” spectrogram that uses the  DFT Shift Theorem and the usual rectangular window function which produces these sinc-shaped diffraction patterns.</p><p>  “连续FFT”光谱图，使用DFT移位定理和通常的矩形窗口功能，从而产生这些真矩形衍射图案。 </p><p>  WDF is able to produce interesting spectrograms sometimes, but in most cases it’s unusably noisy. Unlike FFT spectrograms, WDF gets more precise on larger windows: frequency lines get thinner, at the expense of adding more noise around them. Below is the same violin sample: an FFT spectrogram, and two WDF spectrograms with 2048 and 4096 samples per frame.</p><p>WDF有时能够产生有趣的谱图，但在大多数情况下，它是不可用的嘈杂。与FFT频谱图不同，WDF在较大的窗口上获得更多精确：频线变得更薄，以牺牲它们周围添加更多噪音。下面是不同的小提琴样本：每帧为FFT谱图，以及两个WDF谱图，每帧为2048和4096个样本。</p><p>    For some reason WDF is miles ahead on simple tibetian bowl sounds (that turn out to be not that simple). This is the same 500 ms of sound, the 0..3 kHz range (use  ?wdf=1&amp;alog=3&amp;bins=4096 args):</p><p>    出于某种原因，WDF在简单的西藏碗声音上是前方的数英里（结果不是那么简单）。这是相同的500毫米的声音，0..3 kHz范围（使用？wdf = 1＆amp; alog = 3＆amp;箱= 4096 args）：</p><p>     I’ve accidentally discovered that a lazy  ffmpeg -i bird.mp3 bird.ogg produces audio artifacts. Even though they are inaudible, they can be easily seen on spectrograms.</p><p>     我不小心发现了一个懒惰的ffmpeg -i bird.mp3 bird.ogg产生音频伪影。即使他们在不见声中，它们也可以在谱图上很容易地看到。</p><p>     The interesting conclusion is that specifying the correct bitrate (48k) achieves the highest quality and the smallest file size as a bonus. Even the additional “best compression” option has no visible effect. Just  -compression_level 10 produces artifacts, as ffmpeg sets bitrate to 64k for some reason. I couldn’t get  -codec:a libvorbis to produce a good result. It must work somehow as libvorbis is used in the mp3 file, but I couldn’t figure the right set of ffmpeg options. Here’s the winner command line:</p><p>     有趣的结论是指定正确的比特率（48K）实现了最高质量和最小的文件大小作为奖励。即使是额外的“最佳压缩”选项也没有明显的效果。刚刚-compression_Level 10产生工件，因为FFMPEG为某种原因将BitRate设置为64K。我无法得到-codec：libvorbis产生良好的结果。它必须以某种方式工作，因为libvorbis用于mp3文件，但我无法覆盖正确的ffmpeg选项集。这是获胜者命令行： </p></div><div id="story_share_this"><div class="sharethis-inline-share-buttons"></div></div><div class="text-break sotry_link page_narrow"><a target="_blank" href="https://soundshader.github.io/hss/gallery/wigner">https://soundshader.github.io/hss/gallery/wigner</a></div><div class="story_tags page_narrow"><button type="button" class="btn btn-light my_tag"><a href="/tag/变换分析/">#变换分析</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/bird/">#bird</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/wdf/">#wdf</a></button></div></div><div class="my_movie_list_item shadow p-3 mb-5 bg-white rounded"><button type="button" class="btn btn-link my_tag"><a href="/tag/web2.0/">#web2.0</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/google/">#google</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/设计/">#设计</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/创意/">#创意</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/摄影/">#摄影</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/游戏/">#游戏</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/图片/">#图片</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/软件/">#软件</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/视频/">#视频</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/手机/">#手机</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/广告/">#广告</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/iphone/">#iphone</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/免费/">#免费</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/网站/">#网站</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/下载/">#下载</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/windows/">#windows</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/微软/">#微软</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/apple/">#apple</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/blog/">#blog</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/firefox/">#firefox</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/苹果/">#苹果</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/音乐/">#音乐</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/博客/">#博客</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/wordpress/">#wordpress</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/恶搞/">#恶搞</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/艺术/">#艺术</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/qq/">#qq</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/web/">#web</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/工具/">#工具</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/分享/">#分享</a></button></div></div></div><div id="my_footer"><div class=""><a href="/tags/">tags</a> <a href="/users/">users</a></div>&copy;2012-2021 diglog.com </div></div></body></html>