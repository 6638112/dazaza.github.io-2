<!doctype html><html lang="zh-hans"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Kde.org已迁移到Hugo</title><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"><link rel="stylesheet" href="/img/css.css?random="><link data-rh="true" rel="icon" href="/img/favicon.ico"/><script data-ad-client="ca-pub-6067137220025946" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script type="text/javascript" src="https://platform-api.sharethis.com/js/sharethis.js#property=5effb96910009800120b8d4d&product=inline-share-buttons" async="async"></script>
<script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?03c1a0f31299b4a2fbb83c34d6beaac9";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script></head><body><div id="my_header"><div class="container"><nav class="navbar navbar-expand-lg"><a class="navbar-brand" href="/"><img alt="diglog" src="/img/logo.v1.gif" class="rounded-sm"></a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarNavAltMarkup"><div class="navbar-nav"></div></div></nav></div></div><div class="container"><div id="my_content"><h1 class="page_narrow">Kde.org已迁移到Hugo</h1><div class="row"><div class="col-lg-12 col-12"><div class="my_story_list_item shadow p-3 mb-5 bg-white rounded"><div class="story_page_pub_time page_narrow">2020-10-31 02:02:38</div><div class="page_narrow text-break page_content"><p>KDE.org现在使用Hugo。Hugo是一个用围棋编写的快速而现代的静态站点生成器。与使用纯PHP的旧系统相比，它提供了一些改进。很大一部分工作是由Anuj在GSOC 2020期间完成的。这是一项巨大的工作，要转换存储了20多年KDE历史的存储库。</p><p>网站现在只生成一次，不再使用PHP在运行时自动生成，这提高了网站的加载速度，但速度提升并不明显，因为以前使用的PHP代码非常小，而且KDE的服务器功能强大。</p><p>但最大的改进是在功能方面。我们现在使用的是markdownfile而不是原始的HTML文件，这使得宣传团队的生活变得容易得多。</p><p>网站的内部化现在为每种语言创建了一个唯一的URL，这应该允许Google使用正确的语言链接到网站的版本。法语、乌克兰语、加泰罗尼亚语、荷兰语和其他几种语言已经可用。还有一个合适的语言选择器！我们也不需要手动标记每个字符串以进行翻译。</p><p>现在还有一个RSS订阅源，上面有所有最新的公告。另一个重大改进是公告列表是自动生成的，不再需要手动修改，也不再需要在发布脚本的帮助下修改。</p><p>对于网站开发人员来说，另一个很好的改变是，现在单个页面的SCSS代码位于kde-org存储库本身，而不是其他存储库。总体来说，开发人员的体验要好得多，不需要设置一个缓存服务器和PHP配置来包括容量框架，只需让网站在本地运行即可。现在您只需要从他们的发布页面下载Hugo二进制文件，并在repo上运行它。</p><p>KDE.org的内部化是一个相当大的挑战。当与Hugo一起处理多语言网站时，Hugo希望每个翻译页面都有一个每种语言的标记文档。</p><p>问题是，传统翻译工作流希望使用基于字符串的方法，即将文档拆分成段落并单独翻译。因此，我不能将每个文件标记为po文件中的大BLOB。为了解决这个问题，我创建了一个Python脚本，将标记文件拆分成段落，简化了标记语法(去掉了标题和列表项的前导#和+)。此脚本还处理Hugo短码转换：</p><p>脚本可以不知不觉地将各个字符串放回原位。目前，脚本只是kde-org存储库中的一个文件，但我想将其转换为独立库，以便其他gettext和Hugo用户可以翻译他们的网站。</p><p>&lt；ul class=&#34；navbar-nav ml-AUTO&#34；&gt；{{if.IsTranslated}}&lt；li class=&#34；nav-item下拉菜单&#34；aria-describedby=&#34；language-picker-description&#34；&gt；&lt；p class=&#34；sr-only&#34；id=&#34；language-picker-description&#34；&gt；{{i18n&#34；选择您的语言&#34；}}&lt；/p&gt；&lt；A class=&#34；nav-link下拉切换=&#34；href=&#34；#&#34；数据切换=&#34；下拉&#34；角色=&#34；按钮&#34；aria-haspopup=&#34；true&#34；aria-Expanded=&#34；false&#34；&gt；&lt；img src=&#34；/Language-Icons/icon20x24px-exported-transparent.png&#34；alt=&#34；&#34；/&gt；&lt；span&gt；{{i18n&#34；翻译&#34；}}&lt；/span&gt；&lt；/a&gt；&lt；div class=&#34；Dropdown-Menu Dropdonw-trans&34；Role=&#34；listbox&#34；&gt；&lt；a class=&#34；aria-Selected=&#34；true&#34；hrefang=&#34；{{.Site.Language.lang}}&#34；Role=&#34；Option&#34；lang=&#34；{{.Site.Language.Lang}}&#34；href=&#34；{{.Permalink}}&#34；&gt；{{.Site.Language.LanguageName}}&lt；/a&gt；{{range.Translations}}&lt；a class=&#34；DropDown-Item&#34；hrefang=&#34；{{.Language.Lang}}&#34；Role=&#34；Option&#34；lang=&#34；{{.Language.Lang}}&#34；href=&#34；{{.Permalink}}&#34；&gt；{{.Language.LanguageName}}&lt；/a&gt；{{end}}&lt；/div&gt；&lt；/li&gt；{{end}}&lt；/ul&gt；</p><p>这有点冗长，因为屏幕阅读器也可以完全访问此选择器。</p><p>在kde.org中使用了更多的技巧来提高内部化，例如，当页面不存在于语言中时，有一条Apache规则将其重定向到英文版本。另一个好把戏是有一个特殊的Hugo短编码i18n_var，用于参数化字符串。例如：</p><p>{{&lt；i18n_var&#34；今天KDE发布了对KDE等离子体5版本%[1]s&#34；&#34；5.20.2&#34；&gt；}的错误修复更新}。</p><p>而且提取器很聪明，只提取需要翻译的部分。</p></div><div id="story_share_this"><div class="sharethis-inline-share-buttons"></div></div><div class="text-break sotry_link page_narrow"><a target="_blank" href="https://carlschwan.eu/2020/10/30/kde-org-hugo.html">https://carlschwan.eu/2020/10/30/kde-org-hugo.html</a></div><div class="story_tags page_narrow"><button type="button" class="btn btn-light my_tag"><a href="/tag/迁移/">#迁移</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/migrated/">#migrated</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/网站/">#网站</a></button></div></div><div class="shadow p-3 mb-5 bg-white rounded clearfix"><div class="container"><div class="row"><div class="col-sm"><div><a target="_blank" href="/story/1029355.html"><img src="http://img2.diglog.com/img/2020/10/thumb_d39996891b146984683d75218d7f6573.png" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1029355.html">Atlassian迁移到云，将停止销售服务器许可证</a></div><span class="my_story_list_date">2020-10-17 7:4</span></div><div class="col-sm"><div><a target="_blank" href="/story/1019347.html"><img src="http://img.diglog.com/img/2020/8/thumb_e379b54b7e2d01ace10bd98a81a6a254.png" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1019347.html">从YouTube迁移到PeerTube</a></div><span class="my_story_list_date">2020-8-20 21:44</span></div><div class="col-sm"><div><a target="_blank" href="/story/1019032.html"><img src="http://img.diglog.com/img/2020/8/thumb_0e61bdd6d9672f55847d1c7eabbf84dc.jpeg" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1019032.html">TS-Migrate：一种规模化文字迁移工具</a></div><span class="my_story_list_date">2020-8-19 8:33</span></div><div class="col-sm"><div><a target="_blank" href="/story/1014221.html"><img src="http://img.diglog.com/img/2020/7/thumb_a94ae80d37dfabed87c2d44387ddcafe.jpg" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1014221.html">OpenJDK迁移到GitHub</a></div><span class="my_story_list_date">2020-7-26 11:49</span></div></div></div></div><div class="my_movie_list_item shadow p-3 mb-5 bg-white rounded"><button type="button" class="btn btn-link my_tag"><a href="/tag/web2.0/">#web2.0</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/google/">#google</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/设计/">#设计</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/创意/">#创意</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/摄影/">#摄影</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/游戏/">#游戏</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/图片/">#图片</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/软件/">#软件</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/视频/">#视频</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/手机/">#手机</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/广告/">#广告</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/apple/">#apple</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/iphone/">#iphone</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/网站/">#网站</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/免费/">#免费</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/下载/">#下载</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/windows/">#windows</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/微软/">#微软</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/firefox/">#firefox</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/苹果/">#苹果</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/blog/">#blog</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/音乐/">#音乐</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/博客/">#博客</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/wordpress/">#wordpress</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/恶搞/">#恶搞</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/艺术/">#艺术</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/qq/">#qq</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/web/">#web</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/谷歌/">#谷歌</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/工具/">#工具</a></button></div></div></div><div id="my_footer"><div class=""><a href="/tags/">tags</a> <a href="/users/">users</a></div>&copy;2012-2021 diglog.com </div></div></body></html>