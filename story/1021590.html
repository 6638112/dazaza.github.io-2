<!doctype html><html lang="zh-hans"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>TypeScript添加了对模板字符串类型的支持</title><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"><link rel="stylesheet" href="/img/css.css?random="><link data-rh="true" rel="icon" href="/img/favicon.ico"/><script data-ad-client="ca-pub-6067137220025946" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script type="text/javascript" src="https://platform-api.sharethis.com/js/sharethis.js#property=5effb96910009800120b8d4d&product=inline-share-buttons" async="async"></script>
<script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?03c1a0f31299b4a2fbb83c34d6beaac9";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script></head><body><div id="my_header"><div class="container"><nav class="navbar navbar-expand-lg"><a class="navbar-brand" href="/"><img alt="diglog" src="/img/logo.v1.gif" class="rounded-sm"></a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarNavAltMarkup"><div class="navbar-nav"></div></div></nav></div></div><div class="container"><div id="my_content"><h1 class="page_narrow">TypeScript添加了对模板字符串类型的支持</h1><div class="row"><div class="col-lg-12 col-12"><div class="my_story_list_item shadow p-3 mb-5 bg-white rounded"><div class="story_page_pub_time page_narrow">2020-09-01 20:55:25</div><div class="story_img_container"><a href="http://img2.diglog.com/img/2020/9/4b7d9ecba1881eda1176c27aaa7da297.png"><img src="http://img2.diglog.com/img/2020/9/4b7d9ecba1881eda1176c27aaa7da297.png" class="img-fluid my_story_img" onerror="this.style.display='none'"></a></div><div class="page_narrow text-break page_content"><p>模板字符串类型，这是字符串文字的一种形式，带有嵌入的泛型占位符，可以通过类型实例化用实际的字符串文字替换。</p><p>MAPPLED TYPE AS子句，提供转换映射类型中的属性名称的功能。</p><p>模板字符串类型是与模板字符串表达式等效的类型空间。与模板字符串表达式类似，模板字符串类型包含在反引号分隔符中，并且可以包含${T}形式的占位符，其中T是可分配给字符串、数字、布尔值或bigint的类型。模板字符串类型提供了连接文字字符串、将非字符串基元类型的文字转换为其字符串表示形式以及更改字符串文字的大小写的功能。此外，通过类型推断，模板字符串类型提供了字符串模式匹配和分解的简单形式。</p><p>占位符中的并集类型分布在模板字符串类型上。例如`[${A|B|C}]`解析为`[${A}]`|`[${B}]`|`[${C}]`。多个占位符中的并集类型解析为叉积。例如`[${A|B}，${C|D}]`解析为`[${A}，${C}]`|`[${A}，${D}]`|`[${B}，${C}]`|`[${B}，${D}]`。</p><p>占位符中的String、Number、Boolean和Bigint文本类型会导致将占位符替换为文本类型的字符串表示形式。例如`[${&#39；abc&#39；}]`解析为`[abc]`，`[${42}]`解析为`42`。</p><p>占位符中的ANY、STRING、NUMBER、Boolean或Bigint类型中的任何一种都会使模板字符串解析为String类型。</p><p>在占位符中键入类型Never会导致模板字符串解析为Never。</p><p>类型EventName&lt；T扩展字符串&gt；=`${T}Changed`；类型Concat&lt；S1扩展字符串，类型S2扩展字符串&gt；=`${S1}${S2}`；类型ToString&lt；T扩展字符串|Number|Boolean|bigint&gt；=`${T}`；类型T0=EventName&lt；&#39；foo&#39；&gt；；//&#39；fooo。|&#39；bar&#39；|&#39；baz&#39；&gt；；//&#39；fooChanged&#39；|&#39；barChanged&#39；|&#39；bazChanged&#39；type T2=conat&lt；&39；Hello&#39；，&#39；World&#39；&gt；//&#39；HelloWorld&#39；type T3=`${&#39；type T3=`${&#39；下&#39；}-${&#39；左&#39；|&#39；右&#39；}`；//&#39；左上&39；|&#39；|&#39；左下&39；|&#39；右下&39；键入T4=ToString&lt；&#39；ABC&#39；|42|true|-1234n&&gt;；；//&#39；ABC。|&#39；42&#39；|&#39；true&#39；|&#39；-1234&#39；</p><p>请注意，联合类型的交叉积分布可能会迅速升级为非常大且成本高昂的类型。另请注意，联合类型限制为少于100,000个成员，以下情况将导致错误：</p><p>Type digit=0|1|2|3|4|5|6|7|8|9，type Zip=`${digit}${digit}`；//错误。</p><p>模板字符串占位符可以选择在类型前指定大写、小写、大写或非大写修饰符。此修饰符更改整个替换字符串的大小写或替换字符串的第一个字符。例如：</p><p>类型GetterName&lt；T扩展字符串&gt；=`get${Capitalize T}`；类型Cases&lt；T扩展字符串&gt；=`${UPERCASE T}${LOWERCASE T}${CAPITALIZE T}${UNCAPITIZE T}`；类型T10=GetterName&lt；&#39；FOO&#39；&gt；//&#39；getFoo&#39；类型T11=Cases&lt；T12类型=案例&lt；&39；bar&39；&gt；；//&#39；bar&#39；</p><p>模板字符串类型都可以分配给字符串或子类型。此外，模板字符串类型`${T}`可分配给模板字符串类型`${C}`，并且是模板字符串类型`${C}`的子类型，其中C是T的字符串文字类型约束。例如：</p><p>函数test&lt；T扩展&#39；foo&#39；|&#39；bar&#39；&gt；(名称：`get${Capitalize T}`){let S1：string=name；let S2：&#39；getFoo&#39；|&#39；getBar&#39；=name；}。</p><p>类型推断支持从字符串文字类型到模板字符串类型的推断。要成功推断，目标模板字符串中的每个占位符必须由至少一个字符的跨度分隔，以指导匹配(换言之，无法推断为紧邻的占位符)。推理是通过非贪婪地从左到右加工每个跨度，并从跨度之间的子字符串推断到占位符类型来进行的。一些例子：</p><p>类型MatchPair&lt；S扩展字符串&gt；=S扩展`[${INFER A}，${INFER B}]`？[A，B]：未知；type T20=MatchPair&lt；&#39；[1，2]&39；&gt；；//[&#39；1&#39；，&#39；2&#39；]type T21=MatchPair&lt；；[foo，bar]&#39；&gt；；//[&#39；foo&#39；，&#39；bar&#39；]type T22=MatchPair&lt；；//[&#39；foo&#39；，&#39；bar&#39；]type T22=MatchPair&lt；[1，2]&#39；&gt；；//未知类型T23=MatchPair&lt；&#39；[1，2]&39；&gt；；//未知类型T24=MatchPair&lt；&#39；[1，2，3，4]&39；&gt；；//[&#39；1&#39；，&#39；2，3，4&#39；]</p><p>模板字符串类型可以与递归条件类型组合，以编写迭代重复模式的联接和拆分类型。</p><p>类型JOIN&lt；T扩展(string|number|boolean|bigint)[]，D扩展字符串&gt；=T扩展[]？&#39；&#39；：t扩展[未知]？`${T[0]}`：t扩展[未知，...。推断U]？`${T[0]}${D}${Join&lt；U，D&gt；}`：string；type T30=Join&lt；[1，2，3，4]，&#39；.&#39；&gt；；//&#39；1.2.3.4&#39；type T31=Join&lt；[&#39；foo&#39；，&#39；bar&#39；，&#39；baz&39；]，&#39；-&#39；&gt；；//&#39；foo-bar-baz&39；type T32=加入&lt；[]，&#39；.&39；&gt；；//&#39；&#39；</p><p>类型Split&lt；S扩展字符串，D扩展字符串&gt；=string扩展S？字符串[]：s扩展`${INFER T}${D}${INFER U}`？[T，...。Split&lt；U，D&gt；]：[s]；type T40=Split&lt；&#39；，&#39；，&#39；；&#39；&gt；；//[&#39；foo&#39；]type T41=Split&lt；&#39；foo.bar.baz&#39；，&#39；.&#39；&gt；//[&#39；foo&#39；，&。Bar&#39；，&#39；Baz&#39；]类型T42=拆分&lt；任意，&#39；.&#39；&gt；；//字符串[]。</p><p>例如，递归推理功能可以用于强类型函数，这些函数使用虚线路径和JavaScript框架中有时使用的模式访问属性。</p><p>键入PropType&lt；T，路径扩展字符串&gt；=字符串扩展路径？未知：路径扩展了T的键？T[路径]：路径扩展`${INFER K}。${推断R}`？K扩展了T？PropType&lt；T[K]，R&gt；：未知：未知；声明函数getPropValue&lt；T，P扩展字符串&gt；(obj：T，path：P)：PropType&lt；T，P&gt；；声明const s：string；const obj={a：{b：{c：42，d：&#39；hello&#39；}；getPropValue(obj，&#39；a。//{b：{c：number，d：string}}getPropValue(obj，&#39；a.b&#39；)；//{c：number，d：string}getPropValue(obj，&#39；a.b.d&#39；)；//string getPropValue(obj，&#39；a.b.x&#39；)；//未知getPropValue(obj，s)；//未知。</p><p>使用此PR，映射类型支持可选的AS子句，通过该子句可以指定生成的属性名称的转换：</p><p>其中N必须是可赋值给字符串的类型。通常，N是转换P的类型，例如在占位符中使用P的模板字符串类型。例如：</p><p>键入getters&lt；T&gt；={[P in keyof T&amp；string as`get${Capitalize P}`]：()=&gt；T[P]}；type T50=getters&lt；{foo：string，bar：number}&gt；；//{getFoo：()=&gt；string，getBar：()=&gt；number}</p><p>上面，Key of T&amp；字符串交集是必需的，因为KeyOf T可能包含不能使用模板字符串类型转换的符号类型。</p><p>当AS子句中指定的类型解析为Never时，不会为该键生成任何属性。因此，AS子句可以用作筛选器：</p><p>类型方法&lt；T&gt；={[T的键中的P作为T[P]扩展函数？P：从不]：t[P]}；type T60=方法&lt；{foo()：number，bar：boolean}&gt；；//{foo()：number}。</p><p>当AS子句中指定的类型解析为文字类型的联合时，将生成多个具有相同类型的属性：</p><p>Type DoubleProp&lt；T&gt；={[P in keyof T&amp；string as`${P}1`|`${P}2`]：t[P]}type t70=DoubleProp&lt；{a：string，b：number}&gt；；//{a1：string，a2：string，b1：number，b2：number}</p></div><div id="story_share_this"><div class="sharethis-inline-share-buttons"></div></div><div class="text-break sotry_link page_narrow"><a target="_blank" href="https://github.com/microsoft/TypeScript/pull/40336">https://github.com/microsoft/TypeScript/pull/40336</a></div><div class="story_tags page_narrow"><button type="button" class="btn btn-light my_tag"><a href="/tag/添加/">#添加</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/adds/">#adds</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/类型/">#类型</a></button></div></div><div class="shadow p-3 mb-5 bg-white rounded clearfix"><div class="container"><div class="row"><div class="col-sm"><div><a target="_blank" href="/story/1018479.html"><img src="http://img.diglog.com/img/2020/8/thumb_d30ddf2afe6f9eed783b4062328e6eab.png" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1018479.html">OpenRCT2 v0.3.0发布：添加插件支持</a></div><span class="my_story_list_date">2020-8-16 19:31</span></div><div class="col-sm"><div><a target="_blank" href="/story/1014693.html"><img src="http://img.diglog.com/img/2020/7/thumb_4c6191e8e0770a5a8c172870d0d22db7.png" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1014693.html">OCaml：添加对IOS/Mac ARM64的支持</a></div><span class="my_story_list_date">2020-7-28 23:29</span></div><div class="col-sm"><div><a target="_blank" href="/story/1011698.html"><img src="http://img.diglog.com/img/2020/7/thumb_ae5614296edddd7ba962e5f8c53cd5cb.jpg" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1011698.html">Microsoft在Office 365中添加对自定义‘+’电子邮件地址的支持</a></div><span class="my_story_list_date">2020-7-14 17:41</span></div><div class="col-sm"><div><a target="_blank" href="/story/1011478.html"><img src="http://img.diglog.com/img/2020/7/thumb_837e10f347d3a10bd64326320ff556fd.png" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1011478.html">Libtorrent添加了对WebTorrent协议的支持</a></div><span class="my_story_list_date">2020-7-13 19:17</span></div></div></div></div><div class="my_movie_list_item shadow p-3 mb-5 bg-white rounded"><button type="button" class="btn btn-link my_tag"><a href="/tag/web2.0/">#web2.0</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/google/">#google</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/设计/">#设计</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/创意/">#创意</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/摄影/">#摄影</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/游戏/">#游戏</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/图片/">#图片</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/软件/">#软件</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/视频/">#视频</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/手机/">#手机</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/广告/">#广告</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/apple/">#apple</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/iphone/">#iphone</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/网站/">#网站</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/免费/">#免费</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/下载/">#下载</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/windows/">#windows</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/微软/">#微软</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/firefox/">#firefox</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/苹果/">#苹果</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/blog/">#blog</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/音乐/">#音乐</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/博客/">#博客</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/wordpress/">#wordpress</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/恶搞/">#恶搞</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/艺术/">#艺术</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/qq/">#qq</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/web/">#web</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/谷歌/">#谷歌</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/工具/">#工具</a></button></div></div></div><div id="my_footer"><div class=""><a href="/tags/">tags</a> <a href="/users/">users</a></div>&copy;2012-2021 diglog.com </div></div></body></html>