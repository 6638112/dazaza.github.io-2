<!doctype html><html lang="zh-hans"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>恶意代码炸弹目标亚马逊，Lyft，Slack，Zillow Malicious Code Bombs Target Amazon, Lyft, Slack, Zillow</title><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"><link rel="stylesheet" href="/img/css.css?random="><link data-rh="true" rel="icon" href="/img/favicon.ico"/><script data-ad-client="ca-pub-6067137220025946" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script type="text/javascript" src="https://platform-api.sharethis.com/js/sharethis.js#property=5effb96910009800120b8d4d&product=inline-share-buttons" async="async"></script>
<script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?03c1a0f31299b4a2fbb83c34d6beaac9";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script></head><body><div id="my_header"><div class="container"><nav class="navbar navbar-expand-lg"><a class="navbar-brand" href="/"><img alt="diglog" src="/img/logo.v1.gif" class="rounded-sm"></a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarNavAltMarkup"><div class="navbar-nav"></div></div></nav></div></div><div class="container"><div id="my_content"><h1 class="page_narrow">Malicious Code Bombs Target Amazon, Lyft, Slack, Zillow<br/>恶意代码炸弹目标亚马逊，Lyft，Slack，Zillow </h1><div class="row"><div class="col-lg-12 col-12"><div class="my_story_list_item shadow p-3 mb-5 bg-white rounded"><div class="story_page_pub_time page_narrow">2021-03-04 05:34:22</div><div class="story_img_container"><a href="http://img2.diglog.com/img/2021/3/23481d42143d90125bbc81332db2194d.jpeg"><img src="http://img2.diglog.com/img/2021/3/23481d42143d90125bbc81332db2194d.jpeg" class="img-fluid my_story_img" onerror="this.style.display='none'"></a></div><div class="page_narrow text-break page_content"><p>Researchers have spotted malicious packages targeting internal applications for Amazon, Lyft, Slack and Zillow (among others) inside the npm public code repository — all of which exfiltrate sensitive information.</p><p>研究人员发现了针对亚马逊，Lyft，Slack和Zillow（其中）内部应用程序的内部应用程序的恶意软件包 - 所有这些都是exfiltrate敏感信息。</p><p> The packages weaponize a proof-of-concept (PoC) code dependency-confusion exploit that was recently devised by security researcher Alex Birsan to inject rogue code into developer projects.</p><p> 该软件包武器提出了概念验证（PoC）代码依赖性混淆漏洞，最近由安全研究员Alex Birsan将流氓代码注入开发人员项目。</p><p> Internal developer projects typically use standard, trusted code dependencies that are housed in private repositories. Birsan decided to see what would happen if he created “copycat” packages to be housed instead in public repositories like npm, with the same names as the private legitimate code dependencies.</p><p> 内部开发人员项目通常使用位于私人存储库中的标准，可信代码依赖项。 BIRSAN决定看到如果在像NPM这样的公共存储库中被安置“COPYCCAT”软件包，则会发生什么，与私有合法代码依赖关系相同。</p><p>  “Is it possible that some of PayPal’s internal projects will start defaulting to the new public packages instead of the private ones?” he asked. And the answer was yes.</p><p>  “有可能的一些内部项目是否可以开始默认为新的公共包而不是私人封装？”他问。答案是肯定的。</p><p>  In Birsan’s case, he tested this “dependency confusion” using benign PoC code blocks. These were uploaded to public repositories – and he simply sat back and waited to see if they would be imported. His hunch proved correct, demonstrating how outside code can be imported and propagated through a targeted company’s internal applications and systems, with relative ease — including at Apple, Microsoft, Netflix, PayPal, Shopify, Tesla and Uber.</p><p>  在Birsan的情况下，他使用良性PoC代码块测试了这种“依赖困惑”。这些被上传到公共存储库 - 他只是坐下来等待看他们是否会导入。他的亨希证明了正确的，展示了如何通过目标公司的内部应用程序和系统进口和传播的外部代码，相对缓解 - 包括Apple，Microsoft，Netflix，PayPal，Shopify，Tesla和Uber。</p><p> In all, he received more than $130,000 in bug bounties and pre-approved financial arrangements with targeted organizations from the experiment, who all had agreed to be tested. This has spawned legions of copycat bounty hunters looking to reap a payday – there were  275+ such packages uploaded to the npm repository within 48 hours of Birsan’s research being published, according to a Sonatype analysis. The number has now jumped to more than 700, Sonatype  said on Tuesday, with malicious actors wading into the mix.</p><p> 总的来说，他收到了超过130,000美元的错误赏金，并预先批准与实验的有针对性组织的财务安排，所有人都已同意进行测试。这已经产生了看起来收获发薪日的CopyCat赏金猎人的杂志 - 在Birsan的研究中出版的48小时内上传到NPM存储库中的275多个这样的套餐，根据SONATYPE分析。 Sonatype星期二表示，该号码现已跃升到700多个以上，恶意演员在混合中播出。</p><p> “An ethical researcher will typically post a package under the same name as the private dependency to a public repository like npm,” Sonatype researcher Ax Sharma explained to Threatpost in an interview. “Except, their package would contain enough minimal PoC code to demonstrate the attack to the vendor and the bug-bounty program. The ethical research packages seen by Sonatype also had disclaimers in place indicating these were a part of ethical security research, which gives some reassurance.”</p><p> “一个道德研究员通常将以与NPM这样的公共存储库的私有依赖性的私人依赖性发布包装，”SONATYPE研究员AX Sharma在接受采访时解释道。 “除了，他们的包裹将包含足够的最小POC代码来展示对供应商的攻击和错误赏金计划。 SONATYPE看到的道德研究包也有声明，表明这些是道德安全研究的一部分，这提供了一些保证。“ </p><p>   “Some of the dependency-confusion copycat packages take what may be deemed ‘ethical research’ a step further, by engaging in outright malicious activities,” Sharma explained.</p><p>“一些依赖困惑的杂志套餐采取了可能被视为”伦理研究“的进一步进一步，通过从事彻底的恶意活动，”沙尔各答解释道。</p><p> Several of the copycat packages Sonatype identified exfiltrate, for example, the user’s .bash_history files and /etc/shadow files.</p><p> 几个CopyCat包SONATYPE识别EXFILTRATE，例如，用户的.bash_history文件和/ etc / shadow文件。</p><p> The .bash_history file contains a list of commands previously executed by a Unix-based OS user at the terminal. Unless periodically cleared, this file can contain the usernames, passwords and other sensitive data.</p><p> .bash_history文件包含先前由基于UNIX的OS用户在终端执行的命令列表。除非定期清除，此文件可以包含用户名，密码和其他敏感数据。</p><p> The /etc/shadow file meanwhile maintains hashed password data of user accounts on a system. Although the file is typically restricted to “super user” accounts, a malicious actor could obtain the file should the infected machine be running npm with elevated privileges.</p><p> 同时维护系统上的用户帐户的哈希密码数据/ etc / shadow文件。虽然该文件通常仅限于“超级用户”帐户，但是如果受感染的机器运行具有提升权限的NPM，则可以获得恶意演员。</p><p> “These typically contain highly sensitive information that should remain unseen,” Sharma explained. “Some of these packages also established a reverse shell to their author’s servers, and had no obvious disclaimers or indications in place to clarify if this was part of ethical research, or a bug-bounty program.”</p><p> “这些通常包含高度敏感的信息，应该保持看不见，”Sharma解释说。 “其中一些包也为他们的作者的服务器建立了一个逆境，并且如果这是道德研究的一部分或错误赏金计划，则没有明显的免责声明或指示来澄清。”</p><p>  Exacerbating the danger from these packages is the fact that these types of code imports are done automatically – when a new version becomes available, a developer project will automatically fetch it from a repository.</p><p>  加剧这些包中的危险是事实上，这些类型的代码导入自动完成 - 当新版本可用时，开发人员项目将自动从存储库获取它。</p><p> “What makes this trend even more problematic is that dependency confusion — because of its very nature — needs no action on the victim’s part,” Sharma explained. “Considering these malicious packages could share names with internal dependencies being used by leading organizations, they can be pulled almost instantaneously into the organizations’ builds.”</p><p> “这使得这一趋势更为有问题是依赖困惑 - 因为它非常自然 - 不需要对受害者的一部分，”莎钵解释。 “考虑这些恶意软件包可以共享具有领先组织使用的内部依赖项的名称，它们可以几乎即时将其拉入组织的构建。” </p><p> Unfortunately, it’s also fairly easy to identify what those internal dependencies are, even if they’re technically private.</p><p>不幸的是，即使他们技术上是私有的，也是相当容易确定这些内部依赖性的内容。</p><p> “What ethical researchers typically do is monitor an organization’s public GitHub repository or CDN for code,” Sharma said. “This code may reveal the names of their internal dependencies (e.g. in the manifest files), not otherwise available on public repositories like npm, RubyGems or GitHub. At least, that is how Alex Birsan did it, but there remains room to be creative.”</p><p> “通常做的道德研究人员是监控组织的公共Github存储库或CDN的代码，”Sharma说。 “此代码可以揭示其内部依赖项的名称（例如，在清单文件中），在NPM，RubyGems或GitHub等公共存储库上没有任何其他可用。至少，这就是Alex Birsan如何做到的，但仍有创意的空间。“</p><p> And further, because the copycat packages are uploaded to public repositories, there’s little barrier to entry for malicious attackers. This is the same problem that’s often found in software supply-chain attacks  involving typosquatting and  brandjacking of public packages.</p><p> 此外，由于CopyCat软件包上传到公共存储库，因此对恶意攻击者的进入几乎没有障碍。这是一个相同的问题，这些问题通常在软件供应链攻击中发现，涉及打字和品牌公共包装。</p><p> “Anybody — whether ethical researchers or malicious actors — can exploit the dependency confusion issue,” Sharma said. “What constitutes ‘ethical’ or not is largely determined by the actor’s intent.”</p><p> “任何人 - 道德研究人员或恶意演员 - 可以利用依赖困惑问题，”沙姆拉说。 “什么构成”道德“或不是基本上由演员的意图决定。”</p><p>  Researchers uncovered malicious packages targeting a variety of companies, but four aimed at Amazon, Lyft, Slack and Zillow stood out.</p><p>  研究人员揭开了针对各种公司的恶意套餐，但四个针对亚马逊，莱特，松弛和Zillow奠定了。</p><p> The npm webpage for “amzn” offers two identical versions of a malicious package, each of which contains just two files: a manifest called package.json, and the functional run.js file. The “amzn” package that has names analogous to Amazon’s GitHub repository and open source packages, according to researchers.</p><p> “AMZN”的NPM网页提供了两个相同的恶意包版本，每个版本只包含两个文件：一个名为package.json的清单，以及功能run.js文件。根据研究人员的说法，有与Amazon的GitHub存储库和开源包类似的名称的“Amzn”包。</p><p> “Inside run.js is where we see the contents of the /etc/shadow file being accessed and ultimately exfiltrated to the package’s author to domain the comevil[.]fun,” according to the analysis. “The code also has the author opening a reverse shell to their server which would spawn as soon as the `amzn` package infiltrates the vulnerable build.”</p><p> “Inside Run.js是我们看到正在访问/ etc / shadow文件的内容，并最终将包裹的作者解除到域域互动，”根据分析。 “代码也有作者对他们的服务器打开了一个反向shell，这将在`Amzn`包渗透脆弱的构建时立即生成。” </p><p> As for Zillow, the package “zg-rentals” was also posted to npm by the same author, and is identical in structure and functionality to the “amzn” package, researchers said. Neither offers any indication or disclaimer that they could be linked to an ethical research effort, according to the Sonatype analysis.</p><p>对于Zillow，Package“Zg-entals”也被同一作者发布到NPM，并且研究人员表示，在“AMZN”包的结构和功能方面是相同的。根据SONATYPE分析，既不提供任何指示或免责声明，他们可以与道德研究努力相关联。</p><p> Meanwhile, the malicious “serverless-slack-app” package also has no clear-cut sign that it’s linked to an ethical research or a bug-bounty program. It’s named after a  legitimate package made by an Atlassian developer. It has both preinstall and postinstall scripts launched by the manifest file, according to Sonatype.</p><p> 与此同时，恶意“无求休闲 - 应用程序”包也没有明确的迹象，它与道德研究或错误赏金计划相关联。它以一份由阿特拉斯人开发商制作的合法包命名。根据SONATYPY，它包含清单文件的预先安装和Postinstall脚本。</p><p> “While the index.js script spun up at the preinstall stage is an identical replica of that in Birsan’s PoC research packages, the postinstall script is particularly interesting,” according to the post. “At the postinstall stage, another script hosted on GitHub is run that sends the user’s .bash_history file to the author behind serverless-slack-app.”</p><p> “虽然index.js脚本在预装阶段旋转，但在Birsan的PoC Research包中的一个相同的副本，Postinstall脚本特别有趣，”根据帖子。 “在PostInstall阶段，运行在GitHub上托管的另一个脚本，将用户的.bash_history文件发送到无服务器 -  Slack-app后面的作者。”</p><p> The same author published a near-identical Lyft package, called lyft-dataset-sdk, which shares a name with a Python-based package used by Lyft.</p><p> 同一作者发布了一个近似相同的Lyft包，称为Lyft-dataset-sdk，它与Lyft使用的基于Python的包共享名称。</p><p> “I was starting to wonder when we were going to see a malicious actor take advantage of the current situation,” Sonatype security researcher Juan Aguirre said, in the posting. “Finally, we’ve spotted one.”</p><p> “我开始想知道我们什么时候会看到一个恶意演员利用目前的情况，”SONATYPE安全研究员JUAN AGUIRRE说，在邮寄中。 “最后，我们发现了一个。”</p><p> He added, “It’s interesting to look at all the malicious npm copycat packages released recently. You can see their evolution. They start out with pretty much the same code base as the PoC released by researcher Alex Birsan and they gradually start getting creative.”</p><p> 他补充说：“看看最近发布的所有恶意NPM CopyCat软件包是有趣的。你可以看到他们的进化。他们从研究人员Alex Birsan发布的PoC开始，他们开始与同一代码基础相同。他们逐渐开始创造创意。“ </p></div><div id="story_share_this"><div class="sharethis-inline-share-buttons"></div></div><div class="text-break sotry_link page_narrow"><a target="_blank" href="https://threatpost.com/malicious-code-bombs-amazon-lyft-slack-zillow/164455/">https://threatpost.com/malicious-code-bombs-amazon-lyft-slack-zillow/164455/</a></div><div class="story_tags page_narrow"><button type="button" class="btn btn-light my_tag"><a href="/tag/amazon/">#amazon</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/代码/">#代码</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/亚马逊/">#亚马逊</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/炸弹/">#炸弹</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/code/">#code</a></button></div></div><div class="my_movie_list_item shadow p-3 mb-5 bg-white rounded"><button type="button" class="btn btn-link my_tag"><a href="/tag/web2.0/">#web2.0</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/google/">#google</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/设计/">#设计</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/创意/">#创意</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/摄影/">#摄影</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/图片/">#图片</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/游戏/">#游戏</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/软件/">#软件</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/视频/">#视频</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/手机/">#手机</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/广告/">#广告</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/iphone/">#iphone</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/网站/">#网站</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/免费/">#免费</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/下载/">#下载</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/windows/">#windows</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/微软/">#微软</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/blog/">#blog</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/firefox/">#firefox</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/apple/">#apple</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/音乐/">#音乐</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/苹果/">#苹果</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/博客/">#博客</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/wordpress/">#wordpress</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/恶搞/">#恶搞</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/艺术/">#艺术</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/qq/">#qq</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/web/">#web</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/工具/">#工具</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/分享/">#分享</a></button></div></div></div><div id="my_footer"><div class=""><a href="/tags/">tags</a> <a href="/users/">users</a></div>&copy; 2020 diglog.com </div></div></body></html>