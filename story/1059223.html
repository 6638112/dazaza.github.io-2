<!doctype html><html lang="zh-hans"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>J2打开处理器：使用Superh ISA的开源处理器 </title><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"><link rel="stylesheet" href="/img/css.css?random="><link data-rh="true" rel="icon" href="/img/favicon.ico"/><script data-ad-client="ca-pub-6067137220025946" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script type="text/javascript" src="https://platform-api.sharethis.com/js/sharethis.js#property=5effb96910009800120b8d4d&product=inline-share-buttons" async="async"></script>
<script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?03c1a0f31299b4a2fbb83c34d6beaac9";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script></head><body><div id="my_header"><div class="container"><nav class="navbar navbar-expand-lg"><a class="navbar-brand" href="/"><img alt="diglog" src="/img/logo.v1.gif" class="rounded-sm"></a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarNavAltMarkup"><div class="navbar-nav"></div></div></nav></div></div><div class="container"><div id="my_content"><h1 class="page_narrow">J2打开处理器：使用Superh ISA的开源处理器 </h1><div class="row"><div class="col-lg-12 col-12"><div class="my_story_list_item shadow p-3 mb-5 bg-white rounded"><div class="story_page_pub_time page_narrow">2021-04-20 03:05:54</div><div class="page_narrow text-break page_content"><p>介绍如何快速入门，J-Core是一个清洁室开源处理器和SoC设计，使用VHDL和可用的皇室和专利在BSD许可证下实施。</p><p> 此页面的其余部分介绍如何编译和安装A＆＃34;比特流＆＃34; Fileto以廉价（约50美元）FPGaboard实现此处理器，然后如何为该板构建Linux并将其启动到Shell提示符。</p><p>  获得FPGA板（最便宜的选项＆＃39; ve写了一个Build目标是Numato MIMAS V2）。</p><p>    引导连接到串行终端（也通过USB）到Linux shell提示符。</p><p>   Superh Processoris在1990年代后期开发了日本设计＆＃39;作为一种二次结合混合RISC设计，编译器更容易生成良好的RISC芯片的GoodCode，并且它通过使用Microcoding使用固定长度16位指令（用32位寄存器大小和地址空间）来重新替换前面的CISC设计的代码密度。允许允许执行多个时钟周期的指令。 （早期的Purerisc设计使用每个时钟周期的一个指令即使在该服务不用而是使代码更大并排气编码空间。）</p><p> Hitachi开发了4代Superh.sh2在Sega Saturn游戏控制台中向美国提供给美国，Andsh4为Sega Dreamcast提供了动力。它们也广泛应用于美国宇宙市市场的领域，例如日本自动化行业。</p><p> 但在Superh＆＃39的高度期间，1997年的亚洲经济危机导致日立收紧腰带，最终与三菱散发出来的微处理器分区，一个新的CompanyCalled＆＃34;瑞萨＆＃34;这家新公司并没有继承设计级别的日间工程师，renesas＆＃39;在Superh Dodn＆＃39上的进一步发展尝试了甚至对客户提供效果的效果。最终瑞萨搬到了它完全内部开发的新设计，并重视他们的级别......直到专利到期。 </p><p>然后Jeff Dionne（漫步到Linux Long Endrom的硬件工程师创建uClinux项目回到1990＆＃39; s，当他搬到日本时，将其移开并在2003年返回托盘软件）创建了一个与TheSuperh指令集兼容的新的处理器设计，公开发布2015年BSDLiense下的第一个版本。这种新设计称为J-Core而不是Superh，因为TheTradeMarks Haven＆＃39;到期。</p><p> 第一j核生成j2与SH2指令集兼容，这意味着Linux和GCC，并且只需要轻微调整到支持该处理器。目前的Linux，GCC，Binutils，Andmusl-libc版本支持框中的j-core。 （QEMU支持SH4，后向后兼容SH2 USEMERSPACE，但需要其OwnKernel。）</p><p> J2添加了两个Backported SH3桶形换档指令（SCH和SHLD）以提高编译器效率，以及新的CMPXCHG（Mnemonic Cas.L RM，RN，@ R0 Opcode 0010-NNNN-MMMM-0011，用于基于IBM 360指令） Futexs和SMP。支持Someis已经在Vanilla Linux和GCC / Binutils上游（Linux＆＃34; make arch = sh J2_defconfig＆＃34;和GCC＆＃34; ./ configure  -  target = sh2eb-linux-muslfdpic --with-cpu = mj2＆ ＃34;）。</p><p> 2015年，J-Core开发人员在Linux Consp日本提供了关于它的介绍性演示文稿，这些介绍了Linux每周新闻。2016年开发人员在ELC（幻灯片，视频）上提供了J-Core Design演练演示。</p><p> J2是一个Nommu处理器，因为SH2（SEGA Saturngame控制台中的处理器）是，最后的SH2专利于2014年10月到期。SH4处理器（Dreamcast）有一个MMU，但最后的SH4专利Don＆＃39; Texire至2016年。（更新：我们可以使用更简单的MMU DesignwhiCh将运行相同的用户佩纳软件，但需要内核和qemuupdates，我们＆＃39; ll在准备好时提交上游。）</p><p> j-core＆＃39; s的设计很小，简单。作为开源硬件，它可以廉价（每个处理器约3美分），并在NSaBackDoors或vendorbackdoors或可利用的固件错误中审核，并且允许在存储设备等存储设备和USB控制器中重新定位的内置额外处理器的系统内置的系统。</p><p>    理论是你闪光A＆＃34;比特流＆＃34;文件进入FPGA板＆＃39; s onboardspi闪存，配置FPGA以类似于J2处理器。该itbitstream包括一个小引导加载程序，它尝试加载名为＆＃34; vmlinux＆＃34的文件;从SD卡，使用串行控制台提供带有root filesystemin initramf的Linux内核。 </p><p>为此，您需要一个FPGA板，microSD卡，比特流，VMLinuxFile，带有捆绑的InitRamfs，SDCard编写器和带AUSB Connection的计算机（编写SPI闪存并连接到串行控制台;我们使用了Linux笔记本电脑但是Mac工作也是如此）。</p><p>  Numato：最便宜的可用FPGA开发板（50美元）J2 Build Systemcurly Targets是Numato MIMAS V2（也可以在Amazon上提供）。包含一个Xlinux＆＃34;斯巴达6＆＃34; LX9 FPGA可以在50MHz，64兆的SDRAM，USB2 MINI-B和Micro-SD卡插槽中运行J2。</p><p> 您可能还需要USB Mini-B电缆（种类PlayStationControllers使用，而不是种类的Android手机使用），USB MicroSdcard适配器和空白的microSD卡。 NuMato有一个内置USB SerialConverer，所以它的＆＃34;串口＆＃34;已经是USB。 （这个USB端口也可以发电板，NINATO提供了一个Python脚本，通过它写入车载SPI闪存的Python脚本。Alas It＆＃39;它也在19200年的BPS（有那里是115200到115200的＆＃39; Numato只提供一个更新它的Windows工具。）</p><p> Numato板的主要缺点（慢串行端口除外）是它没有以太网，它可以＆＃39; t do smp。 （具有缓存禁用的处理器的单个实例占LX9＆＃39的60％; Scaspacity。）以便在乌龟板上工作。</p><p> （J-Core＆＃39;早期开发是在Avnetmicroboard上完成的，但更昂贵，并且没有内置的SDCardReader，所以需要一个加载电路板来启动Linux。您可以找到Moreabout该板在这里。如果你想搬到J-Coreto其他FPGA板，请在邮件列表中询问我们＆＃39; LL描述了更多文档的方式。）</p><p>   开放硬件的点是您可以从VHDL源代码中构建一个比特流，但是对于您的初始烟雾，您可能会抓住一个已知的工作编程并首先安装。</p><p>  安装SH2裸机编译器（以构建ROM Bootloader）。它不需要特定的安装位置，如果您愿意，您可以提取Itoyour Home目录。 </p><p>输入Xilinx上下文并添加Cross-Compiler-Sh2elf / Bin目录Toyour $ Path So Sh2elf-CC和Friend可用，以及CD进入BitStreamSource目录。</p><p> 用：sed -i＆＃39; s / sh2-elf- / sh2elf-/ g＆＃39修复工具链前缀; $（grep -rl sh2-elf-。）[todo：check in]</p><p>  您的比特流应在输出/ * / mimas_v2.bin中结束。 [todo：为什么有关目录？那个＆＃39; s不是Package Builds Work的工作，在重建时都有输出，overwriteOutput。并使干净不删除这一点？真的？]</p><p> 裸机编译器与SH2LINIX编译器不同的原因（除了不包含C库之外）是不同的功能。由于ROM引导加载程序（处理器启动并加载SDCard的vmlinux runswhen）的低级别代码是编写程序集合程序，因此它手动指的是前缀函数名称。虽然有一个命令行选项要更改前缀，但编译器包含必须匹配代码的调用约定的LibrationCode（例如libgcc.a）。</p><p>    将电路板（VGA和USB端口之间）上的黑色开关翻转向USB侧。这是＆＃34; flash＆＃34;位置。</p><p> 使用USB MINI-B电缆将电路板连接到Linux盒子。 （TheKind PlayStation Contormers使用，而不是Android手机使用。）</p><p> 上面假定Numato串口显示为/ dev / ttyacm0，几乎总是如此。 </p><p>注意：Ubuntu 14.04决定插入2014年后电脑的任何串行设备都必须是调制解调器（20世纪返回的Telowoneland线路的硬件），并在任何新串行设备的命令下都有一个Hotplug守护程序Sendrandom困惑Numatofirmware加载器。如果您在大型调制解调器复兴中不熟悉，则需要在此处获取sudo service modemmanager stop.se for详情。</p><p>  Nomato＆＃39; S串行端口实现仅连接数据发送和接收，这意味着它不提供硬件流量控制。这使得期望RTS和CTS（更不用说DTR或DSR）。我们可以使用sttytool来告诉Linux不关心，然后使用一个简单的终端程序，＆＃39; t试图让这个本身摆弄。</p><p> 由于/ dev / ttyacm0设备每次拔掉和卸下USB电缆（那么方便地电源循环电路板），因此我们可以将这两个命令组合到CommandHistory中的单个命令行中。 （所以在电源循环后，光标向上并按串行终端。）</p><p>  即使没有SDCARD上的VMLinux映像（或没有SDCARD），也应该将其引导加载程序从SMITFLASH运行，该处理器＆＃34; CPU测试通过＆＃34;并宣布在抱怨它可以从Thesdcard加载vmlinux之前修订和建立日期。如果它没有做到这一点，你可能忘了把闪光/ runswitch放回正确的位置。 （你必须在拍摄的循环开始。）</p><p>  再次，您可以构建Linux源，但是为了我们的第一个进入它，Graba Vmlinux映像从aboriginallinux＆＃39; s sh2eb target。 （＆＃34; Linux＆＃34;系统 -  Imagetarballs中的文件是为运行J2的Numato板而构建的。）</p><p> 将SDCard粘在板中，重新启动，重新连接串行控制台，并在提示符（用户root，password admin）上登录。恭喜，在J2上有一个Linux shell提示。</p><p>   如果你想用手建立这个，vanilla 4.7内核应该支持这项板，富有的菲尔克斯＆＃39; Smusl-libc Toolchain。您＆＃39; LL需要从initramfs链接到内核映像的initramfs引导，直到我们更新内核sdcard驱动程序。 </p></div><div id="story_share_this"><div class="sharethis-inline-share-buttons"></div></div><div class="text-break sotry_link page_narrow"><a target="_blank" href="https://j-core.org/">https://j-core.org/</a></div><div class="story_tags page_narrow"><button type="button" class="btn btn-light my_tag"><a href="/tag/开源/">#开源</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/处理器/">#处理器</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/open/">#open</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/linux/">#linux</a></button></div></div><div class="shadow p-3 mb-5 bg-white rounded clearfix"><div class="container"><div class="row"><div class="col-sm"><div><a target="_blank" href="/story/1059089.html"><img src="http://img2.diglog.com/img/2021/4/thumb_f86df36700b817674c3e4261cb289171.jpeg" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1059089.html">开源“拆分襟翼”机械显示 </a></div><span class="my_story_list_date">2021-4-19 22:13</span></div><div class="col-sm"><div><a target="_blank" href="/story/1058898.html"><img src="http://img2.diglog.com/img/2021/4/thumb_49491ed02b96c94ddd496b551fdddfd5.png" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1058898.html">7年的开源数据库开发：学习的经验教训 </a></div><span class="my_story_list_date">2021-4-17 14:9</span></div><div class="col-sm"><div><a target="_blank" href="/story/1058694.html"><img src="http://img2.diglog.com/img/2021/4/thumb_7a5b1bc9cb561283f7686cb1629218e6.jpg" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1058694.html">开源职业梯子 </a></div><span class="my_story_list_date">2021-4-16 13:44</span></div><div class="col-sm"><div><a target="_blank" href="/story/1058610.html"><img src="http://img2.diglog.com/img/2021/4/thumb_5870344a151480f9c20c975d69f4e279.jpg" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1058610.html">DIY塑料回收商：用于粉碎塑料的开源机器[音频] </a></div><span class="my_story_list_date">2021-4-16 5:6</span></div></div></div></div><div class="my_movie_list_item shadow p-3 mb-5 bg-white rounded"><button type="button" class="btn btn-link my_tag"><a href="/tag/web2.0/">#web2.0</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/google/">#google</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/设计/">#设计</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/创意/">#创意</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/摄影/">#摄影</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/游戏/">#游戏</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/图片/">#图片</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/软件/">#软件</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/视频/">#视频</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/手机/">#手机</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/广告/">#广告</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/apple/">#apple</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/iphone/">#iphone</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/网站/">#网站</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/免费/">#免费</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/下载/">#下载</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/windows/">#windows</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/微软/">#微软</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/firefox/">#firefox</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/苹果/">#苹果</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/blog/">#blog</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/音乐/">#音乐</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/博客/">#博客</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/wordpress/">#wordpress</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/恶搞/">#恶搞</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/艺术/">#艺术</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/qq/">#qq</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/web/">#web</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/谷歌/">#谷歌</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/工具/">#工具</a></button></div></div></div><div id="my_footer"><div class=""><a href="/tags/">tags</a> <a href="/users/">users</a></div>&copy;2012-2021 diglog.com </div></div></body></html>