<!doctype html><html lang="zh-hans"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>还可以使用FDW迁移到PostgreSQL数据库 Migration to PostgreSQL databases can also be done using FDW</title><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"><link rel="stylesheet" href="/img/css.css?random="><link data-rh="true" rel="icon" href="/img/favicon.ico"/><script data-ad-client="ca-pub-6067137220025946" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script type="text/javascript" src="https://platform-api.sharethis.com/js/sharethis.js#property=5effb96910009800120b8d4d&product=inline-share-buttons" async="async"></script>
<script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?03c1a0f31299b4a2fbb83c34d6beaac9";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script></head><body><div id="my_header"><div class="container"><nav class="navbar navbar-expand-lg"><a class="navbar-brand" href="/"><img alt="diglog" src="/img/logo.v1.gif" class="rounded-sm"></a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarNavAltMarkup"><div class="navbar-nav"></div></div></nav></div></div><div class="container"><div id="my_content"><h1 class="page_narrow">Migration to PostgreSQL databases can also be done using FDW<br/>还可以使用FDW迁移到PostgreSQL数据库 </h1><div class="row"><div class="col-lg-12 col-12"><div class="my_story_list_item shadow p-3 mb-5 bg-white rounded"><div class="story_page_pub_time page_narrow">2021-04-07 03:15:06</div><div class="story_img_container"><a href="http://img2.diglog.com/img/2021/4/1e4fafe7ec80e91b583a1fc8392efc4a.png"><img src="http://img2.diglog.com/img/2021/4/1e4fafe7ec80e91b583a1fc8392efc4a.png" class="img-fluid my_story_img" onerror="this.style.display='none'"></a></div><div class="page_narrow text-break page_content"><p>Millions of databases are being migrated to PostgreSQL today. This is because of the liberal   PostgreSQL license  in particular that invited more contributions to PostgreSQL and eventually made it Enterprise Grade. I have   presented  and also blogged about some of the rich enterprise features as following, those are otherwise available for an additional cost with some commercial databases.</p><p>今天正在迁移数百万个数据库到PostgreSQL。这是因为自由主义的PostgreSQL许可，特别是对PostgreSQL邀请更多贡献，并最终使IT企业等级。我已经介绍了一些富裕的企业功能，如以下内容，否则有一些商业数据库的额外费用。</p><p>  While it is great that there are several features available with Postgres by default, it may be challenging if there are no solutions to help with migrations to postgres. Fortunately, there are several contributions through extensions and Open source tools that made migrations to PostgreSQL very easy. In this blog post, we are going to discuss just one of those features.</p><p>  虽然Postgres有几个功能默认情况下很棒，但如果没有解决方法，可能会具有挑战性，可能会有助于迁移到Postgres。幸运的是，通过扩展和开源工具有几个贡献，使迁移到PostgreSQL非常容易。在这个博客文章中，我们将只讨论其中一个功能。</p><p>  As of the most recently updated SQL standard,  ISO/IEC 9075:2016 aka SQL:2016,    PostgreSQL tops the compliance chart  when compared with Oracle, DB2, SQL Server and MySQL, qualifying    170 of the 177 SQL standards .</p><p>  截至最近更新的SQL标准，ISO / IEC 9075：2016 AKA SQL：2016，PostgreSQL与Oracle，DB2，SQL Server和MySQL相比，符合性图表，177个SQL标准的符合条件170。</p><p> SQL/MED is one of the standards that was originally defined as part of the SQL standard updated in 2003 (SQL:2003). MED stands for Management of External Data, the data that is accessible but not managed by the DBMS itself. Using FDW(s), objects of a heterogeneous database can be transparently mapped to PostgreSQL. This helps a user to SELECT FROM or WRITE TO a remote homogeneous/heterogeneous database from a Postgres database.</p><p> SQL / MED是最初定义为2003年更新的SQL标准一部分的标准之一（SQL：2003）。 Med代表外部数据的管理，可访问的数据，但不能由DBMS本身管理。使用FDW（s），异构数据库的对象可以透明地映射到PostgreSQL。这有助于用户从Postgres数据库中选择或写入远程同一性/异构数据库。</p><p> As seen in the following image, we can join an Oracle table with a Postgres table using Oracle FDW on a postgres server.</p><p> 如下图所示，我们可以使用Postgres服务器上的Oracle FDW加入Oracle表。</p><p>       Some of the database migrations from Oracle like databases can be simply done using oracle_fdw like foreign data wrappers. Using the IMPORT FOREIGN SCHEMA syntax, a schema similar to Oracle can be created in the postgres database. Oracle_FDW does an automatic conversion of Oracle data types to an appropriate postgres data type and creates tables and views with the same structure as of the Oracle schema.</p><p>       来自Oracle等数据库的一些数据库迁移可以简单地使用Oracle_fdw如外来数据包装器完成。使用Import Outhe Schema语法，可以在Postgres数据库中创建类似于Oracle的模式。 Oracle_FDW执行Oracle数据类型的自动转换为适当的Postgres数据类型，并创建具有与Oracle架构相同结构的表和视图。</p><p> Following is an example of how the schema : HR of an Oracle database : xepdb1 running on host : 192.168.10.1 is being migrated to PostgreSQL using oracle_fdw.  All these steps will be executed on the Postgres database and nothing on the Oracle database.</p><p> 以下是Oracle数据库的模式：XepdB1在主机上运行的XepdB1：192.168.10.1正在使用Oracle_fdw迁移到postgreSQL。所有这些步骤都将在Postgres数据库上执行，并且在Oracle数据库上没有任何内容。 </p><p> CREATE SERVER oracle_server FOREIGN DATA WRAPPER oracle_fdw OPTIONS (dbserver &#39;//192.168.10.1:1521/xepdb1&#39;);  GRANT USAGE ON FOREIGN SERVER oracle_server TO postgres;  CREATE USER MAPPING FOR postgres SERVER oracle_server OPTIONS (user &#39;SYSTEM&#39;, password &#39;SYSTEM&#39;);  CREATE SCHEMA hr_fdw;  IMPORT FOREIGN SCHEMA &#34;HR&#34; FROM SERVER oracle_server INTO hr_fdw;  postgres=# select count(*) from hr_fdw.countries;  count -------     25 (1 row)</p><p>创建服务器Oracle_server外国数据包装器Oracle_fdw选项（DBServer＆＃39; // 192.168.10.1：1521/xepdb1&#39;）;授予对外服务器Oracle_Server到Postgres的用法;为Postgres服务器oracle_server选项创建用户映射（用户＆＃39;系统＆＃39;密码＆＃39;系统＆＃39;）;创建架构hr_fdw;进口外国架构＆＃34; HR＆＃34;从Server Oracle_Server进入HR_FDW; postgres =＃从hr_fdw.countries中选择count（*）;伯爵------- 25（1行）</p><p> As seen in the above log, we could run a select on a postgres database that is getting the count of records of a table from an Oracle table.</p><p> 如上所述，我们可以在Postgres数据库上运行一个选择，该数据库正在从Oracle表中获取表的记录数。</p><p>  FDW(s) can be used to migrate data from a remote heterogeneous database to PostgreSQL. As seen in the following example, using oracle_fdw, we can run a simple insert command that can select data from an oracle database table and insert it into a postgres table.</p><p>  FDW（s）可用于将数据从远程异构数据库迁移到PostgreSQL。如下面的示例中所见，使用Oracle_FDW，我们可以运行一个简单的插入命令，可以从Oracle数据库表中选择数据并将其插入Postgres表中。</p><p>   One of the challenges faced by developers and admins migrating to PostgreSQL is the data validation. It is very difficult to validate the data between 2 heterogeneous databases. One may have to write an application comparing the data or find some other complex ways to do the same. Foreign data wrappers can be a saviour here. We can join the postgres table and the source table to check for any missing data using different combinations of the powerful SQL language.</p><p>   开发人员和管理员迁移到PostgreSQL面临的挑战之一是数据验证。验证2个异构数据库之间的数据非常困难。一个人可能必须编写一个应用程序比较数据或找到其他复杂方法来做同样的方法。外国数据包装器可以在这里成为一个救主。我们可以加入Postgres表和源表，以检查使用强大的SQL语言的不同组合的缺失数据。</p><p> SELECT id  FROM oracle_table ora  WHERE NOT EXISTS      (SELECT *       FROM postgres_table pg       WHERE pg.id = ora.id);</p><p> 从Oracle_table ORA中选择ID，其中不存在（从postgres_table pg中选择*，其中pg.id = ora.id）;</p><p>  Not all DBaaS platforms allow us to create foreign data wrappers. For example, Amazon RDS or Aurora does not list   oracle_fdw as one of the supported extensions. What to do in such cases ? Let us see a step by step technical approach on how to deal with that in our next blog post. Please subscribe to our blog posts to follow our latest updates on migrations to postgres. Please  contact us to know how we can assist you while performing migrations to PostgreSQL.</p><p>  并非所有DBAAS平台都允许我们创建外国数据包装器。例如，Amazon RDS或Aurora不会将Oracle_fdw列为支持的扩展之一。在这种情况下该怎么办？让我们在我们的下一个博客文章中逐步逐步地处理该方法。请订阅我们的博客文章，以遵循我们最新的迁移到Postgres更新。请联系我们了解我们如何在执行迁移到PostgreSQL时如何提供帮助。 </p></div><div id="story_share_this"><div class="sharethis-inline-share-buttons"></div></div><div class="text-break sotry_link page_narrow"><a target="_blank" href="https://www.migops.com/blog/2021/02/15/role-of-foreign-data-wrappers-in-migrations-to-postgresql">https://www.migops.com/blog/2021/02/15/role-of-foreign-data-wrappers-in-migrations-to-postgresql</a></div><div class="story_tags page_narrow"><button type="button" class="btn btn-light my_tag"><a href="/tag/数据库/">#数据库</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/database/">#database</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/fdw/">#fdw</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/oracle/">#oracle</a></button></div></div><div class="my_movie_list_item shadow p-3 mb-5 bg-white rounded"><button type="button" class="btn btn-link my_tag"><a href="/tag/web2.0/">#web2.0</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/google/">#google</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/设计/">#设计</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/创意/">#创意</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/摄影/">#摄影</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/图片/">#图片</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/游戏/">#游戏</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/软件/">#软件</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/视频/">#视频</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/手机/">#手机</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/广告/">#广告</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/iphone/">#iphone</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/网站/">#网站</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/免费/">#免费</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/下载/">#下载</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/windows/">#windows</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/微软/">#微软</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/firefox/">#firefox</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/blog/">#blog</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/音乐/">#音乐</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/apple/">#apple</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/博客/">#博客</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/苹果/">#苹果</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/wordpress/">#wordpress</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/恶搞/">#恶搞</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/qq/">#qq</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/艺术/">#艺术</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/谷歌/">#谷歌</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/web/">#web</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/工具/">#工具</a></button></div></div></div><div id="my_footer"><div class=""><a href="/tags/">tags</a> <a href="/users/">users</a></div>&copy;2012-2021 diglog.com </div></div></body></html>