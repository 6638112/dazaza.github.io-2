<!doctype html><html lang="zh-hans"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Apache OpenWhisk是一个真正的可移植的无服务器平台</title><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"><link rel="stylesheet" href="/img/css.css?random="><link data-rh="true" rel="icon" href="/img/favicon.ico"/><script data-ad-client="ca-pub-6067137220025946" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script type="text/javascript" src="https://platform-api.sharethis.com/js/sharethis.js#property=5effb96910009800120b8d4d&product=inline-share-buttons" async="async"></script>
<script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?03c1a0f31299b4a2fbb83c34d6beaac9";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script></head><body><div id="my_header"><div class="container"><nav class="navbar navbar-expand-lg"><a class="navbar-brand" href="/"><img alt="diglog" src="/img/logo.v1.gif" class="rounded-sm"></a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarNavAltMarkup"><div class="navbar-nav"></div></div></nav></div></div><div class="container"><div id="my_content"><h1 class="page_narrow">Apache OpenWhisk是一个真正的可移植的无服务器平台</h1><div class="row"><div class="col-lg-12 col-12"><div class="my_story_list_item shadow p-3 mb-5 bg-white rounded"><div class="story_page_pub_time page_narrow">2020-09-23 00:43:13</div><div class="page_narrow text-break page_content"><p>Apache OpenWhisk是一个真正的可移植的、多平台的无服务器引擎，现在可以在来自多个商业供应商的所有主流云中使用。下面是一个运行的国际象棋引擎：</p><p>有关如何在本地和任何Kubernetes群集(例如AWS EKS&amp；mldr)中运行它的说明，请参阅下面的说明。</p><p>Apache OpenWhisk是一个无服务器云平台，由Apache软件基金会作为开源项目开发。它类似于Amazon Lambda、Google Functions或Azure Functions。主要区别在于它是一个开放源码项目，由多个商业供应商提供，并且它具有丰富的无服务器编程模型，可以将功能组合到工作流中。</p><p>今天，许多供应商都提供基于OpenWhisk的云功能，并且它可以在所有主要的公共云上运行。然而，并不是所有的供应商都透露他们在哪里运行他们的服务，所以我指的是供应商，而不是运行它的云。它还可以安装在任何Kubernetes集群上，因此您可以安装在任何云中，无论是您喜欢的私有云还是公有云。</p><p>在本文中，我将展示OpenWhisk是一个真正的可移植的无服务器解决方案，您可以编写单个无服务器应用程序，然后在多个供应商上运行它。</p><p>为了证明我的观点，我编写了一个开源的无服务器应用程序，并在我可以访问的所有OpenWhisk供应商上运行它。我还创建了一个自定义的Kubernetes集群，并在其上安装了OpenWhisk来运行我的应用程序。</p><p>这个应用程序是一个用围棋编程语言编写的国际象棋引擎，包括后端和前端。你可以用它通过网络界面下棋，而对手是一种在OpenWhisk中作为无服务器函数运行的AI算法。</p><p>对于测试和开发，您可以使用独立的OpenWhisk。它是单节点安装，可以在您的机器上运行，只需要运行Docker即可。您还需要下载适用于您的操作系统的OpenWhisk CLI工具wsk，才能与OpenWhisk交互。</p><p>该命令将下载独立OpenWhisk的Docker映像，并启动它。它还将打开操场，您可以使用该操场通过浏览器动态创建和运行功能。</p><p>一旦OpenWhisk启动并运行，您就可以配置wsk工具来访问它。OpenWhisk访问受密钥保护，您必须检索该密钥并使用该密钥来配置wsk，如下所示：</p><p>AUTH=$(docker exec openwhk wsk property Get--auth|awk&#39；{print$3}&#39；)wsk属性集--AUTH$AUTH--apihost http://localhost:3233。</p><p>现在，让我们构建象棋引擎，并使用本地OpenWhisk在本地进行测试。GitHub上提供了国际象棋引擎的源代码。</p><p>该代码基于免费提供的名为CounterGo的国际象棋引擎。它是用围棋写的。我将其修改为作为无状态、无服务器的操作运行，并使用Chessboardjs和chess.js库在JavaScript中添加了一个前端。</p><p>为了构建动作，您需要像git、make和docker这样的常用工具。一旦有了它们，您就可以使用以下命令下载并构建源代码：</p><p>请注意，您不需要Go编译器来构建操作，只需要Docker，因为您可以使用OpenWhisk Go运行时本身编译该操作。结果是文件chess.zip包含一个预编译的GO操作，可以部署。</p><p>操作完成后，您可以使用以下命令在OpenWhisk中部署它：</p><p>如果您现在在浏览器中键入URL，您将看到我们的国际象棋引擎的用户界面，即一个棋盘，您可以在计算机上下棋。</p><p>现在，让我们开始在提供OpenWhisk的各个供应商的服务中部署我们的象棋。</p><p>Nimbella提供了一个基于OpenWhisk的无服务器解决方案，专注于提供“令人敬畏的开发体验”。</p><p>我认为说我为Nimbella工作是恰当的，但在本文中我试图保持中立，并对我所知道的所有OpenWhisk供应商进行公平的比较。</p><p>Nimbella使用其自己的名为NIM的CLI进行部署。Nimbella CLI最近是开源的。您需要注册并登录才能使用他们的服务。一旦您登录，您就可以部署我们的国际象棋操作并获得它的URL。NIM login命令可以方便地进行注册。可下载适用于Mac OS、Windows和Linux的CLI。</p><p>如果您愿意，可以将wsk CLI与Nimbella一起使用。您会注意到，这里的命令与前面显示的命令相同，但用NIM替换了wsk。</p><p>您需要下载并安装ibmcloud CLI，以便将操作部署到IBM。还有一些要求，比如下载插件和定位空间；所有步骤都在他们的网站上进行了解释。</p><p>它们为运行函数提供了慷慨的自由层。你需要在他们的网站上注册才能免费使用大量的函数调用。</p><p>下载该工具后，部署国际象棋引擎并获取URL以运行操作的命令如下：</p><p>Ibmcloud login-u&#34；$IBMUSER&#34；-p&#34；$IBMPASS&#34；ibmcloud FN action update chess chess.zip--KIND GO：1.11ibmcloud FN action get chess--url。</p><p>Naver是一家韩国公司，拥有韩语的主要搜索引擎，但也提供云服务。Naver云平台使用OpenWhisk实现云功能。</p><p>目前Naver没有提供用于部署操作的CLI，但是我被告知CLI实际上正在开发中。现在，我使用他们的Web界面部署了国际象棋动作。</p><p>Adobe也提供了基于OpenWhisk的无服务器服务。它称为Adobe I/O运行时。</p><p>Adobe I/O Runtime目前只支持基于Node.js的运行时，所以如果您选择它们作为无服务器函数提供程序，则必须用JavaScript编写无服务器函数。但是，由于基于OpenWhisk，可以根据请求使用其他运行时，因此我们也可以运行象棋引擎。我感谢Adobe团队在出于演示目的部署我的操作时给予的友好支持和帮助。</p><p>最后，您可以在任何支持Kubernetes的集群中运行OpenWhisk。为此，我在AWS上创建了一个EKS集群，并在其上安装了OpenWhisk，然后部署了我的国际象棋应用程序。我将在这里展示如何快速、轻松地做到这一点。</p><p>您将需要创建和配置AWS帐户。有关如何执行此操作的信息，请参阅AWS文档。</p><p>创建帐户后，我安装了eksctl工具，该工具可以轻松在AWS上创建Kubernetes集群。</p><p>此外，您还需要安装Helm部署工具，并使用它实际安装OpenWhisk。您可以从GitHub下载舵图并安装OpenWhisk，如下所示：</p><p>一旦一切就绪，您只需使用3个命令即可创建一个Kubernetes集群并安装OpenWhisk：</p><p>Eksctl create cluster--name openwhkeksctl create nodegroup--cluster openwhk--node-labesopenwhk-角色=invokerhelm install--set whk.ingress.type=LoadBalanceropenwhk./openwhk。</p><p>创建群集将需要一段时间。一旦完成，您将在AWS中运行您的私有OpenWhisk服务，并且您可以将您的国际象棋应用程序部署到其中。</p><p>您可以使用wsk或NIM CLI部署到OpenWhisk。您必须检索Apache OpenWhisk入口点的位置和授权密钥，并将它们传递给CLI工具。使用NIM所需的命令包括：</p><p>Cd whisk-chessAPIHOST=$(kubectl get svc|awk&39；/openwhk-nginx/{print$4}&#39；)auth=$(cat openwhk/values.yaml|awk&39；/Guest/{print$2}&#39；|TR-d&#39；&#34；&#39；)nim auth login--apihost http://$APIHOST--auth$auth。</p><p>需要注意的是，我们配置了一个不安全的设置，因为我们通过未加密的HTTP协议访问OpenWhisk。</p><p>在实际设置中，您需要额外的步骤才能使用证书设置HTTPS端点。您可以在舵图GitHub存储库中找到相关详细信息。</p><p>一旦您检索到API主机和身份验证密钥，您就可以部署您的象棋应用程序，并获得URL。</p><p>在这种情况下，我无法提供URL，因为我在测试后销毁了集群，但是，您可以在段落开头的图像中看到结果。</p></div><div id="story_share_this"><div class="sharethis-inline-share-buttons"></div></div><div class="text-break sotry_link page_narrow"><a target="_blank" href="https://openwhisk.blog/post/advocate/openwhisk-portable-serverless/">https://openwhisk.blog/post/advocate/openwhisk-portable-serverless/</a></div><div class="story_tags page_narrow"><button type="button" class="btn btn-light my_tag"><a href="/tag/服务器/">#服务器</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/openwhisk/">#openwhisk</a></button></div></div><div class="shadow p-3 mb-5 bg-white rounded clearfix"><div class="container"><div class="row"><div class="col-sm"><div><a target="_blank" href="/story/1023058.html"><img src="http://img2.diglog.com/img/2020/9/thumb_c48baa4a68e9dbfa7158a7bd5b1b8553.png" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1023058.html">Unimog：CloudFlare的XDP/eBPF边缘负载均衡</a></div><span class="my_story_list_date">2020-9-10 4:29</span></div><div class="col-sm"><div><a target="_blank" href="/story/1022961.html"><img src="http://img2.diglog.com/img/2020/9/thumb_c48baa4a68e9dbfa7158a7bd5b1b8553.png" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1022961.html">Unimog-Cloudflare的边缘负载均衡器</a></div><span class="my_story_list_date">2020-9-9 22:39</span></div><div class="col-sm"><div><a target="_blank" href="/story/1021509.html"><img src="http://img2.diglog.com/img/2020/9/thumb_0ecf87596730a375a31aecdb965e3aa9.png" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1021509.html">我刚刚输掉了1400 BTC</a></div><span class="my_story_list_date">2020-9-1 2:57</span></div><div class="col-sm"><div><a target="_blank" href="/story/1021399.html"><img src="http://img.diglog.com/img/2020/8/thumb_58e7c7e555ff62a53da9d9005ef9d781.jpg" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1021399.html">容易的--露天藏身的三只虫子</a></div><span class="my_story_list_date">2020-8-31 17:10</span></div></div></div></div><div class="my_movie_list_item shadow p-3 mb-5 bg-white rounded"><button type="button" class="btn btn-link my_tag"><a href="/tag/web2.0/">#web2.0</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/google/">#google</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/设计/">#设计</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/创意/">#创意</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/摄影/">#摄影</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/游戏/">#游戏</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/图片/">#图片</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/软件/">#软件</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/视频/">#视频</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/手机/">#手机</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/广告/">#广告</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/apple/">#apple</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/iphone/">#iphone</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/网站/">#网站</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/免费/">#免费</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/下载/">#下载</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/windows/">#windows</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/微软/">#微软</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/firefox/">#firefox</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/苹果/">#苹果</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/blog/">#blog</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/音乐/">#音乐</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/博客/">#博客</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/wordpress/">#wordpress</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/恶搞/">#恶搞</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/艺术/">#艺术</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/qq/">#qq</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/web/">#web</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/谷歌/">#谷歌</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/工具/">#工具</a></button></div></div></div><div id="my_footer"><div class=""><a href="/tags/">tags</a> <a href="/users/">users</a></div>&copy;2012-2021 diglog.com </div></div></body></html>