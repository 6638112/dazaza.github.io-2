<!doctype html><html lang="zh-hans"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>FreeBSD 12.2上的Ubuntu Linux Jail-发行版</title><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"><link rel="stylesheet" href="/img/css.css?random="><link data-rh="true" rel="icon" href="/img/favicon.ico"/><script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?03c1a0f31299b4a2fbb83c34d6beaac9";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script><script data-ad-client="ca-pub-6067137220025946" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script type="text/javascript" src="https://platform-api.sharethis.com/js/sharethis.js#property=5effb96910009800120b8d4d&product=inline-share-buttons" async="async"></script></head><body><div id="my_header"><div class="container"><nav class="navbar navbar-expand-lg"><a class="navbar-brand" href="/"><img alt="diglog" src="/img/logo.v1.gif" class="rounded-sm"></a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarNavAltMarkup"><div class="navbar-nav"></div></div></nav></div></div><div class="container"><div id="my_content"><h1 class="page_narrow">FreeBSD 12.2上的Ubuntu Linux Jail-发行版</h1><div class="row"><div class="col-lg-12 col-12"><div class="my_story_list_item shadow p-3 mb-5 bg-white rounded"><div class="story_page_pub_time page_narrow">2020-11-03 03:35:34</div><div class="page_narrow text-break page_content"><p>This page describes the steps required to configure Ubuntu-based Linux jail or chroot - a complete Linux userspace environment running on top of  Linuxulator.    Required steps:    Have linux(4) compatibility enabled, as documented in the  man page; this boils down to having  linux_enable=YES in  /etc/rc.conf. This is to load the neccessary kernel modules and set some sysctls.</p><p>本页描述了配置基于Ubuntu的Linux JAR或chroot所需的步骤-一个运行在Linuxulator之上的完整的Linux用户空间环境。必需的步骤：启用Linux(4)兼容性，如手册页中所述；这归结为在/etc/rc.conf中设置linux_enable=yes。这是为了加载必要的内核模块并设置一些sysctls。</p><p>  Run  debootstrap --arch=amd64 --no-check-gpg bionic /compat/ubuntu. This will install Ubuntu Bionic into  /compat/ubuntu. While it is technically possible to install into  /compat/linux instead, it&#39;s discouraged due to possible clash with CentOS-based ports and packages ( linux_base-c7 et al). You might see some errors during configuration phase - they are generally harmless; as long as the log ends with &#34;Base system installed successfully&#34;, everything is fine.</p><p>运行debootstrap命令--ARCH=AMD64命令--no-check-gpg命令仿生命令/compat/ubuntu。这将把Ubuntu Bionic安装到/compat/ubuntu中。虽然在技术上可以将其安装到/compat/linux中，但由于可能与基于CentOS的端口和软件包(linux_base-c7等)发生冲突，因此不建议这样做。您可能会在配置阶段看到一些错误-它们通常是无害的；只要日志以成功安装了&#34；Base system结束，一切都是正常的。</p><p>  Set up mounts in  /etc/fstab, as described in  linux(4) man page. Remember to actually mount them ( mount -a or  mount -al if you use the  late options in the example below) afterwards. If you want to share home directory contents, and be able to run X11 apps, you will also need null mounts for  /home and  /tmp. For example:</p><p>在/etc/fstab中设置挂载，如Linux(4)手册页中所述。记住在之后实际挂载它们(挂载a-a或挂载al-al，如果您使用下面示例中的后期选项)。如果您希望共享主目录内容，并且能够运行X11应用程序，则还需要为/home和/tmp设置空挂载。例如：</p><p> # Device Mountpoint FStype Options Dump Pass# devfs /compat/ubuntu/dev devfs rw,late 0 0 tmpfs /compat/ubuntu/dev/shm tmpfs rw,late,size=1g,mode=1777 0 0 fdescfs /compat/ubuntu/dev/fd fdescfs rw,late,linrdlnk 0 0 linprocfs /compat/ubuntu/proc linprocfs rw,late 0 0 linsysfs /compat/ubuntu/sys linsysfs rw,late 0 0 /tmp /compat/ubuntu/tmp nullfs rw,late 0 0 /home /compat/ubuntu/home nullfs rw,late 0 0</p><p>#设备挂载点FStype选项转储传递#devfs/compat/ubuntu/dev devfs rw，late 0 tmpfs/compat/ubuntu/dev/shm tmpfs rw，late，size=1g，mode=1777 0 0 fdesfs/compat/ubuntu/dev/fd fdesfs rw，late，linrdlnk 0 0 linprocfs/compat/ubuntu/ubuntu/proc linprocfs rw，late 0 linsysfs/compat/ubuntu/sys linsysfs rw，late 0/tmp/compat/ubuntu/tmp nfs rw，late 0/home/compat/ubuntu/ubuntu/proc linprocfs rw，late 0 linsysfs/compat/ubuntu/sys linsysfs rw，late 0/tmp/compat/ubuntu/tmp nfs rw，late 0/home/compat/ubuntu/ubuntu/proc linprocfs rw。</p><p>   That&#39;s it! You should now be able to run  chroot /compat/ubuntu /bin/bash and use  apt like you would on a typical Ubuntu instance. You will probably want to add users and groups with UIDs/GIDs matching the ones on the host system. While  systemd doesn&#39;t work, the  service command works as usual. Some things that would probably get set up by the installer require manual tweaking: if you get warnings about LC_ALL you&#39;ll want to install appropriate locales ( apt search language-pack). There&#39;s a configuration problem with the rsyslog package; use  apt remove rsyslog to make  apt stop whining. To get your environment variables set up in the typical Ubuntu way you might want to start sshd(8) ( service ssh start) and log in this way; you can add  chroot /compat/ubuntu /usr/sbin/service ssh start to  /etc/rc.local to make it run at boot.    You can find the list of tested apps at  LinuxApps. Feel free to add new entries.</p><p>就是这样！您现在应该能够像在典型的Ubuntu实例上一样运行chroot：/compat/ubuntu命令/bin/bash并使用apt了。您可能希望添加UID/GID与主机系统上的UID/GID匹配的用户和组。虽然systemd不起作用，但service命令照常工作。安装程序可能会设置的一些内容需要手动调整：如果您收到有关LC_ALL的警告，您将希望安装适当的区域设置(适合搜索语言包)。Rsyslog包存在配置问题；请使用apt删除rrsyslog以使apt停止抱怨。要以典型的Ubuntu方式设置环境变量，您可能需要启动sshd(8)(service-ssh/start)并以这种方式登录；您可以将chroot命令/compat/ubuntu/usr/sbin/service-ssh_start添加到/etc/rc.local，使其在引导时运行。你可以在LinuxApps上找到测试过的应用程序列表。您可以随意添加新条目。</p></div><div id="story_share_this"><div class="sharethis-inline-share-buttons"></div></div><div class="text-break sotry_link page_narrow"><a target="_blank" href="https://wiki.freebsd.org/LinuxJails">https://wiki.freebsd.org/LinuxJails</a></div><div class="story_tags page_narrow"><button type="button" class="btn btn-light my_tag"><a href="/tag/ubuntu/">#ubuntu</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/linux/">#linux</a></button></div></div><div class="shadow p-3 mb-5 bg-white rounded clearfix"><div class="container"><div class="row"><div class="col-sm"><div><a target="_blank" href="/story/1031695.html"><img src="http://img2.diglog.com/img/2020/10/thumb_a022a87498307e340e9ad1edc2b08f6d.jpg" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1031695.html">如何使用加密双引导Ubuntu 20.04和Windows 10</a></div><span class="my_story_list_date">2020-10-28 11:36</span></div><div class="col-sm"><div><a target="_blank" href="/story/1031582.html"><img src="http://img2.diglog.com/img/2020/10/thumb_21ededac314d85399d5606f786c2d456.jpg" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1031582.html">Pro1 X智能手机配有硬件键盘，专为运行LineageOS或Ubuntu而设计</a></div><span class="my_story_list_date">2020-10-28 3:8</span></div><div class="col-sm"><div><a target="_blank" href="/story/1031577.html"><img src="http://img2.diglog.com/img/2020/10/thumb_75e60354f9d7216fe8ff99728318d528.png" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1031577.html">Ubuntu Groovy Gorilla将Raspberry Pi添加为“一等公民”</a></div><span class="my_story_list_date">2020-10-28 2:52</span></div><div class="col-sm"><div><a target="_blank" href="/story/1030666.html"><img src="http://img2.diglog.com/img/2020/10/thumb_56256739a7bd8da78cfb7c8fddd15c4d.jpg" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1030666.html">Ubuntu 20.10现已提供下载</a></div><span class="my_story_list_date">2020-10-23 4:53</span></div></div></div></div><div class="my_movie_list_item shadow p-3 mb-5 bg-white rounded"><button type="button" class="btn btn-link my_tag"><a href="/tag/web2.0/">#web2.0</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/google/">#google</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/设计/">#设计</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/游戏/">#游戏</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/创意/">#创意</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/apple/">#apple</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/苹果/">#苹果</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/摄影/">#摄影</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/软件/">#软件</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/美国/">#美国</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/iphone/">#iphone</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/图片/">#图片</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/手机/">#手机</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/视频/">#视频</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/广告/">#广告</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/免费/">#免费</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/谷歌/">#谷歌</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/网站/">#网站</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/windows/">#windows</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/微软/">#微软</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/下载/">#下载</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/firefox/">#firefox</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/音乐/">#音乐</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/linux/">#linux</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/blog/">#blog</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/博客/">#博客</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/程序/">#程序</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/艺术/">#艺术</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/web/">#web</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/wordpress/">#wordpress</a></button></div></div></div><div id="my_footer"><div class=""><a href="/tags/">tags</a> <a href="/users/">users</a></div>&copy; 2020 diglog.com </div></div></body></html>